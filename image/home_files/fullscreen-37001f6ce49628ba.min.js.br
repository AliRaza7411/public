"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="da60ae86-3bea-5cfe-ab7b-81b7b94a62d8")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[8840],{901765:(e,t,n)=>{n.d(t,{L:()=>l});var a=n(411855);function l(e,t,n){a.useEffect(()=>{let a=a=>{var l;let r=a.target;n&&!r.isConnected||(null==(l=e.current)?void 0:l.contains(r))||t()};return document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}})}},195971:(e,t,n)=>{n.d(t,{Al:()=>h,dT:()=>g,lX:()=>f,nt:()=>y,pI:()=>_});var a=n(411855),l=n(188507),r=n(531664),i=n(358145),o=n(286640),s=n(99506),c=n(162707),d=n(479296),u=n(860178),m=n(243987);let p=e=>`SAVED_CART::${e}`;function f({teamId:e,userId:t}){if(!t)return null;let n=v(t);return(null==n?void 0:n.teamId)===e?n:null}function _({loadingPaidEditors:e,teamId:t,teamName:n,setTeamName:o,collaborators:d,setCollaborators:p}){let f=(0,u.iZ)(),_=(0,l.d4)(e=>(t?e.teamUserByTeamId[t]:{})||{}),h=(0,l.d4)(e=>e.payment.numDesignEditors),E=(0,l.d4)(e=>e.payment.numWhiteboardEditors),y=(0,l.d4)(e=>e.payment.editorStatusChanges),b=(0,i.ZC)(e),C=(0,m.BR)(_,f),w=(0,m.O1)(h,(0,m.Ky)(C,y,s._Y.DESIGN)),T=(0,m.O1)(E,(0,m.Ky)(C,y,s._Y.WHITEBOARD)),x=(0,a.useCallback)(()=>{let e=v(null==f?void 0:f.id);if(!e)return null;let{createdAt:t,updatedAt:n,...a}=e;return a},[null==f?void 0:f.id]);(0,a.useEffect)(()=>{let a=x(),l=null!==t||n?n:null==a?void 0:a.newTeamName,i=null===t&&!d||(0,r.c2)(d,c.k)?(null==a?void 0:a.newCollaborators)??c.k:d,s={teamId:t,editorStatusChanges:y,numEmptyDesignSeats:w,numEmptyWhiteboardSeats:T,newTeamName:l,newCollaborators:i,is3DS:null==a?void 0:a.is3DS};!e&&f&&((0,r.he)(a,s)||g(f.id,s),b&&(o&&l!==n&&o(l||""),p&&!(0,r.c2)(d,i)&&p(i||c.k)))},[e,b,f,t,y,w,T,x,n,o,d,p])}let g=(0,d.D)((e,t)=>{var n;try{let a=new Date().toISOString(),l={...t,createdAt:a,updatedAt:a};null==(n=(0,o.TQ)())||n.setItem(p(e),E(l))}catch(e){console.error("Failed to save cart state to Local Storage")}});function h(e){var t;if(e)try{null==(t=(0,o.TQ)())||t.removeItem(p(e))}catch(e){}}let E=e=>JSON.stringify(e),v=e=>{var t;if(!e)return null;try{let n=null==(t=(0,o.TQ)())?void 0:t.getItem(p(e));if(n)return JSON.parse(n);return null}catch(e){return null}};function y(e,t){let n=t.map(e=>e.id),a=e=>(null==e?void 0:e.filter(e=>n.includes(e)))??[];return{upgrade:{design:a(e.upgrade.design),slides:a(e.upgrade.slides),sites:a(e.upgrade.sites),whiteboard:a(e.upgrade.whiteboard)},downgrade:{design:a(e.downgrade.design),slides:a(e.downgrade.slides),sites:a(e.downgrade.sites),whiteboard:a(e.downgrade.whiteboard)}}}},257512:(e,t,n)=>{n.d(t,{$7:()=>w,Mt:()=>N,Ud:()=>T});var a=n(411855),l=n(188507),r=n(776250),i=n(367253),o=n(358145),s=n(966712),c=n(27087),d=n(881388),u=n(939863),m=n(182976),p=n(995852),f=n(229403),_=n(99506),g=n(622139),h=n(479296),E=n(738269),v=n(195971),y=n(860178),b=n(336599),C=n(243987);function w(){let e=(0,l.wA)(),t=(0,l.d4)(e=>e.payment);function n(n){e(p.Az({numWhiteboardEditors:t.numWhiteboardEditors+n}))}function a(n){e(p.js({numDesignEditors:t.numDesignEditors+n}))}return{increment:function(e,t){(0,i.nD)(t)||("whiteboard"===e?n(1):a(1))},decrement:function(e,t){(0,i.nD)(t)||("whiteboard"===e?n(-1):a(-1))}}}let T=(0,h.D)(({teamId:e,canSeeBillingAddressExp:t})=>{let n=(0,l.wA)(),m=(0,l.d4)(e=>e.loadingState),h=(0,l.d4)(t=>e?t.teamUserByTeamId[e]:null),w=(0,l.d4)(e=>e.selectedView),T=(0,y.iZ)(),[S,k]=(0,a.useState)(!0),I=(0,o.ZC)(e),A=f.Xw.loadingKeyForPayload({teamId:e}),O=(0,b.GH)(m,A),L=(0,s.DC)();(0,a.useEffect)(()=>{n(f.Xw({teamId:e}))},[n,e]);let P=function(){let e=(0,l.wA)();return(0,a.useCallback)(t=>{(0,r.sx)("Loaded Saved Cart State",{teamId:t.teamId,lastSavedAt:t.updatedAt}),e(p.eK(t))},[e])}();return(0,a.useEffect)(()=>{async function a(t){try{let a=await c.Ay.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});n(p.i({taxes:a.data.meta.estimate}))}catch(e){n(d.s.error((0,u.t)("payments.errors.estimate_calculation_error"))),n(E.$T({...w,paymentStep:g.tn.PAYMENT_AND_ADDRESS}))}k(!1)}if(void 0===I||I===e||S||(N(n),k(!0)),(!e||O)&&S){let r=(0,C.BR)(h,T),o=Object.entries(r).map(([e,t])=>{if((0,i.nD)(t.email||""))return e}).filter(e=>!!e);n(p.M2({figmaEmailTeamUsers:o}));let s=(0,v.lX)({teamId:e,userId:null==T?void 0:T.id});if(s){s.editorStatusChanges=(0,v.nt)(s.editorStatusChanges,r);let i=(0,C.Ky)(r,s.editorStatusChanges,_._Y.DESIGN),c=(0,C.Ky)(r,s.editorStatusChanges,_._Y.WHITEBOARD),d=i+s.numEmptyDesignSeats,u=c+s.numEmptyWhiteboardSeats;if(P({numDesignEditors:d,numWhiteboardEditors:u,editorStatusChanges:s.editorStatusChanges,teamId:e,updatedAt:s.updatedAt}),L){var l;let e=(l=L.billing_period,g.tY[g.tY[l]]),r=t?{billing_address:L.billing_address,shipping_address:L.shipping_address||L.billing_address}:null;n(p.Lo({billingPeriod:e})),n(p.$h({vatGstId:L.vat_gst_id})),n(p.yy({legalName:L.customer_legal_name||L.company_name,displayName:L.display_name})),n(p.Ef({regionalVatGstId:L.regional_vat_gst_id})),a({address:L.address,editor_status_changes:s.editorStatusChanges,figma_email_team_users:o,selected_currency:L.currency,annual_quantity:(0,C.fD)(e,d),monthly_quantity:(0,C.Rq)(e,d),annual_whiteboard_quantity:(0,C.fD)(e,u),monthly_whiteboard_quantity:(0,C.Rq)(e,u),vat_gst_id:L.vat_gst_id,regional_vat_gst_id:L.regional_vat_gst_id,...r})}else k(!1)}else k(!1)}},[n,O,h,I,e,T,S,L,w,P,t]),(0,a.useEffect)(()=>()=>{e&&x(n,e)},[n,e]),S}),x=(0,h.D)((e,t)=>{let n=f.Xw.loadingKeyForPayload({teamId:t});e(m.yH({key:n}))});function N(e){e(p.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[]}}})),e(p.js({numDesignEditors:0})),e(p.Az({numWhiteboardEditors:0}))}},287928:(e,t,n)=>{n.r(t),n.d(t,{EmbeddedFigmaScopeView:()=>L,EmbeddedPrototypingFigmaScopeViewEnabled:()=>R});var a=n(411855),l=n(188507),r=n(829816),i=n(395096),o=n(966159),s=n(91408),c=n(189430),d=n(966712),u=n(646240),m=n(755887),p=n(97395),f=n(395281),_=n(259927),g=n(809831),h=n(693707),E=n(168039),v=n(852800),y=n(617453),b=n(843495),C=n(335682),w=n(100197),T=n(444576),x=n(234945),N=n(611978),S=n(552657),k=n(863822),I=n(258159),A=n(109022),O=n(860168);let L=a.memo(function(){return(0,d.kc)().internal_only_debug_tools?a.createElement(D,null):null});function P(e,t){a.useEffect(()=>{let n=n=>{70===n.keyCode&&n.ctrlKey&&n.altKey&&n.metaKey&&t(!e&&!!(0,d.kc)().internal_only_debug_tools)};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[e,t])}function D(){let e=(0,w.J2)((0,y.UK)().showFigmaScope),{setIsOpen:t,setClosed:n}=a.useMemo(()=>{let e=e=>(0,y.UK)().showFigmaScope.set(e);return{setIsOpen:e,setClosed:()=>e(!1)}},[]);return P(e,t),e?a.createElement(M,{onClose:n}):null}function R(){let[e,t]=a.useState(!1),n=a.useCallback(()=>{t(!1)},[t]);return P(e,t),e?a.createElement(F,{onClose:n,appSelection:void 0,setAppSelection:void 0}):null}function M({onClose:e}){let t=(0,l.wA)(),n=(0,l.d4)(U),r=a.useCallback(e=>{"canvas"===e.selectionType&&v.Egt.setSelectedNodeAndCanvas(e.guidStr,!1)&&(b.hq(e.guidStr),v.NfO.scrollAndZoomIntoView([e.guidStr])),"local_style"===e.selectionType&&(b.wr(),t(f.Bn({type:e.styleType,styleIds:new Set([e.guidStr]),folderNames:new Set})))},[t]);return a.createElement(F,{onClose:e,appSelection:n,setAppSelection:r})}function F({onClose:e,appSelection:t,setAppSelection:n}){let d=(0,N._6)(),p=(0,C.tS)(),f=(0,w.J2)(v.Hcu.sceneGeneration()),[y]=(0,i.A)(f,500,{trailing:!0}),b=(0,u.Xr)(k.o3),T=(0,l.d4)(e=>{if("prototype"===d.view)return!0;try{return null!=e.mirror.sceneGraph.getCurrentPage()}catch(e){return!1}}),x=(0,l.d4)(e=>e.mirror.appModel.pagesList);a.useEffect(()=>{if(T){let e={type:"server_file",key:p??"unknown",backend:"fullscreen"};b((0,o.NY)({resource:e,scenes:[new S.I({resource:e,sensitiveTextPolicy:"show",inPrototypeViewer:"prototype"===d.view})]}))}},[y,b,T,d.view,p]);let L=(0,E.dB)(),P=a.useRef(null);(0,h.Z)("legacy"===L?"light":L,P,d);let D=(0,g.lg)(),{windowInnerHeight:R}=(0,c.l)(),[M,F]=a.useState(window.innerHeight/2),U=a.useMemo(()=>R-(0,m.qE)(M,(0,s.hG)("design"===D?O.LdP:O.tui),R-32),[M,D,R]),H=(0,u.Xr)(I.O);a.useEffect(()=>{H(U)},[H,U]);let[,G]=(0,r.i)({onDrag(e){F(e.clientY)}});return T?a.createElement(B,null,a.createElement("div",{style:{zIndex:6,height:U,color:"#000",position:"relative"},ref:P,className:_.Dm,tabIndex:-1},a.createElement("div",{...G({style:{cursor:"ns-resize",position:"absolute",left:0,right:0,top:"-3px",height:"5px"}})}),a.createElement(A.J,{embedded:!0,onClose:e,appSelection:t,setAppSelection:n,pagesList:x}))):null}class B extends a.PureComponent{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error(e)}render(){return this.state.hasError?null:this.props.children}}let U=(0,p.P8)([x.Xt,T.nt],(e,t)=>{let n=Object.keys(e);if(n.length>0)return{selectionType:"canvas",guidStr:n[0]};if(t){let e=Array.from(t.styleIds);if(e.length>0)return{selectionType:"local_style",guidStr:e[0],styleType:t.type}}})},162707:(e,t,n)=>{n.d(t,{b:()=>c,k:()=>s});var a=n(411855),l=n(946689),r=n(939863),i=n(278733),o=n(396754);let s=["","",""];function c({disableInvites:e,collaborators:t,setCollaborators:n,willSendInvites:s,skipInviteStep:c}){let d=(e,a)=>{if(a>=t.length)return;let l=[...t];l[a]=e,n(l)};return a.createElement(a.Fragment,null,a.createElement("div",{className:o.Fb},(0,r.tx)("pro_cart.add_collaborators.add_collaborators_to_your_team")),a.createElement(l.Kz,{multiple:.5}),a.createElement("div",{className:o.b0},(0,r.tx)("pro_cart.add_collaborators.well_add_them_to_your_team")),a.createElement(l.Kz,{multiple:4}),a.createElement("div",{style:i.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$},t.map((e,t)=>a.createElement(l.il,{key:`collaborator-email-input-${t}`,value:e,onChange:e=>d(e.target.value,t),placeholder:(0,r.t)("pro_cart.add_collaborators.email")})),a.createElement(l.Us,{onClick:()=>{let e=[...t];e.push(""),n(e)},trusted:!0,style:i.sx.alignLeft.font14.fontMedium.$},(0,r.tx)("pro_cart.add_collaborators.add_another"))),a.createElement("div",{style:i.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$},a.createElement(l.vd,{disabled:!!e,style:i.sx.font14.add({height:"44px",width:"110px"}).$,onClick:s},(0,r.tx)("pro_cart.add_collaborators.sent_invites")),a.createElement(l.Ph,{trusted:!0,onClick:c,style:i.sx.colorTextSecondary.alignCenter.$},(0,r.tx)("pro_cart.add_collaborators.skip_for_now"))))}},251398:(e,t,n)=>{let a,l,r,i,o,s,c,d,u;n.r(t),n.d(t,{FullscreenPageView:()=>eyq,LibraryAssetsReduxSyncing:()=>eyQ,onFullscreenViewRender:()=>ey$}),n(137592);var m,p,f=n(411855),_=n(188507),g=n(603625),h=n(243742),E=n(627776),v=n(358145),y=n(966712),b=n(498750),C=n(563706);let w=new Set(["-","="]),T=new Set(["-","=","f","o","p","r","s"]);function x(e){if(!T.has(e.key))return;let t=C.Ay.mac?b.xH.META:b.xH.CONTROL;(0,b.vN)(e,t)?e.preventDefault():w.has(e.key)&&(t|=b.xH.SHIFT,(0,b.vN)(e,t)&&e.preventDefault())}var N=n(794272),S=n(374626),k=n(99380),I=n(218881),A=n(286640),O=n(179479),L=n(69961),P=n(414441),D=n(863359),R=n(201547);function M(e){return(0,P.TR)()?f.createElement(F,{...e}):f.createElement(f.Fragment,null,e.children)}function F({name:e,trackingEnabled:t,alsoTrack:n,children:a}){let l=(0,O.F)(n),r=(0,P.U2)({name:e,trackingEnabled:t,alsoTrackRef:l,isNamespace:!0,autoTrackable:!1}),{trackablePath:i,error:o}=r,s=(0,P.MF)(()=>(0,P.ET)(i)),c=(0,L.o3)(L.nt.trackableDebug),d=(0,P.MF)(()=>(0,P.R8)({componentName:"TrackableNamespace",name:e,error:o,alsoTrackedProperties:s()}));return a=(0,R.C)({children:a,isDebugMode:c,name:e,color:o?"red":"purple",depth:i.length,getTooltipText:d}),f.createElement(D.f.Provider,{value:r},a)}var B=n(877723),U=n(256975),H=n(609219),G=n(410424),V=n(74021),K=n(293017),W=n(632430),z=n(986270),j=n(931828),J=n(696097),Y=n(672517),X=n(720289),q=n(126049),Z=n(776250),Q=n(809831),$=n(988022),ee=n(661843),et=n(356390);let en=new class{constructor(){this.timer=null,this.startTime=0,this.elapsed=0,this.fileKey=null,this.localSession=null,this.installListeners=()=>{window.addEventListener("pagehide",this.trackBounce),window.addEventListener("popstate",this.trackBounce),window.addEventListener("visibilitychange",this.pauseOrResume)},this.removeListeners=()=>{window.removeEventListener("pagehide",this.trackBounce),window.removeEventListener("popstate",this.trackBounce),window.removeEventListener("visibilitychange",this.pauseOrResume)},this.trackBounce=()=>{this.localSession&&(0,Z.sx)("search_result_bounced",{file_key:this.fileKey,session_id:this.localSession.id,session_expires_at:new Date(this.localSession.expires).toISOString(),session_entry_point:this.localSession.entryPoint,active_time_spent:Math.round(this.elapsed+performance.now()-this.startTime),fullscreen_is_ready:et.Y5.isReady()},{forwardToDatadog:!0,sendAsBeacon:!0}),this.stopTimer()},this.pauseOrResume=()=>{if(document.hidden)this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.elapsed+=performance.now()-this.startTime;else{if(this.timer)return;3e5<this.elapsed?this.stopTimer():(this.timer=window.setTimeout(this.stopTimer,3e5-this.elapsed),this.startTime=performance.now())}},this.stopTimer=()=>{this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.removeListeners()}}startTimer(e,t){this.stopTimer(),t&&(this.fileKey=e,this.localSession=t,this.startTime=performance.now(),this.elapsed=0,this.timer=window.setTimeout(this.stopTimer,3e5),this.installListeners())}};var ea=n(516398),el=n(715879),er=n(288536),ei=n(852800),eo=n(114716),es=n(692609),ec=n(860707),ed=n(661060),eu=n(297666),em=n(517333),ep=n(529529),ef=n(325680),e_=n(756085),eg=n(886119),eh=n(697551),eE=n(384792);let ev=(0,eu.s)((e,t)=>{em.eD.updateFullscreenMenuState({pluginMenuData:e,widgetMenuData:t})},250);var ey=n(497306),eb=n(29680),eC=n(669178),ew=n(860178),eT=n(309798),ex=n(588169),eN=n(939863),eS=n(392592),ek=n(22774),eI=n(272042),eA=n(245389);let eO="keyboard-layout-preference",eL=(e,t,n)=>{t&&e(ek.FU({tab:t})),n||et.Y5.triggerAction("toggle-keyboard-shortcuts")},eP=(e,t,n,a)=>{e(j.b({keyboard_manual_supported_bell:!0})),e(eS.F.enqueue({message:(0,eN.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_available",{newKeyboardName:(0,ex.As)(t)}),button:{text:(0,eN.t)("keyboard_settings.update_keyboard_shortcuts"),action:()=>eL(e,"layout",a)},type:eO,onDismiss:()=>{e(j.b({keyboard_manual_supported_bell:!0}))},timeoutOverride:2e4})),(0,ex.CZ)({layout:n,detectedLayout:t,eventName:"manual_supported_keyboard_detected"})},eD=(e,t,n)=>{e(j.b({keyboard_generic_supported_first_bell:!0})),e(eS.F.enqueue({message:(0,eN.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_now_available",{newKeyboardName:(0,ex.As)(t)}),button:{text:(0,eN.t)("keyboard_settings.enable_and_show_new_shortcuts"),action:()=>{eL(e,"layout",n),(0,ex.rd)({layout:t})}},type:eO,onDismiss:()=>{}})),(0,ex.CZ)({layout:ei.aTn.UNKNOWN,detectedLayout:t,eventName:"first_generic_detected_supported_keyboard"})};async function eR(e,t){if(!em.eD)return null;let n=await em.eD.getKeyboardLayout();if(!n)return null;if(t===n)return n;let a=(0,eA.pB)(n),l=(0,ex.v7)();return a===l||e(a,l,n,null!=t),n}async function eM(e,t){if(!window.isSecureContext||window.top!==window.self)return null;let n=navigator.keyboard;if(!n||!n.getLayoutMap)return null;let a=await n.getLayoutMap();if(function(e,t){for(let[n,a]of e)if((null==t?void 0:t.get(n))!==a)return!1;return!0}(a,t))return t;let{layoutJSON:l,detectedLayoutsWeb:r}=(0,eI.$$)(a),i=(0,eI.ZN)({layoutJSON:l,detectedLayouts:r,desktopLayout:null}),o=(0,ex.v7)();return i===o||e(i,o,JSON.stringify(l),null!=t),a}var eF=n(743415),eB=n(27703),eU=n(974105),eH=n(388094),eG=n(58032),eV=n(783080),eK=n(691205),eW=n(499737),ez=n(743282),ej=n(725561),eJ=n(279453),eY=n(830524),eX=n(331626),eq=n(239671),eZ=n(609210),eQ=n(143678),e$=n(280945),e0=n(88823),e1=n.n(e0),e2=n(646240),e5=(e=>(e.NOT_INITIALIZED="not_initialized",e.ACTIVE_FIRST_TIME="active_first_time",e.ACTIVE_AFTER_IDLE="active_after_idle",e.IDLE_DUE_TO_INACTIVITY="idle_due_to_inactivity",e.IDLE_DUE_TO_TAB_SWITCH="idle_due_to_tab_switch",e))(e5||{}),e4=n(38580),e3=n(529928);let e6=(0,e4.eU)(e5.NOT_INITIALIZED),e7=(0,e3.bt)(e=>{var t;return{state:e,fileKey:null==(t=e.openFile)?void 0:t.key}}),e8=[e5.ACTIVE_AFTER_IDLE,e5.ACTIVE_FIRST_TIME],e9=(0,e4.eU)(null,(e,t,n)=>{let{state:a,fileKey:l}=e(e7),r=e(e6);if((r&&e8.includes(r)?"start":"end")!=(n&&e8.includes(n)?"start":"end")){let e="";switch(n){case e5.ACTIVE_AFTER_IDLE:case e5.ACTIVE_FIRST_TIME:e="active";break;case e5.IDLE_DUE_TO_INACTIVITY:case e5.IDLE_DUE_TO_TAB_SWITCH:e="inactive";break;default:e="non-initialized"}(0,$.ds)("active_time_spent_event",l,a,{currentState:e,activeState:n},{forwardToDatadog:!0,batchRequest:!1})}t(e6,n)}),te=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];var tt=n(726864),tn=n(788811),ta=n(737499),tl=n(279145),tr=n(334290),ti=n(979686),to=n(750252),ts=n(155179),tc=n(64930),td=n(742482),tu=n(144119),tm=n(632544),tp=n(479296),tf=n(59779),t_=n(940596),tg=n(737947),th=n(761870),tE=n(195847),tv=n(838e3),ty=n(662275),tb=n(650769),tC=n(198371),tw=n(408405),tT=n(227338),tx=n(319906),tN=n(799569),tS=n(67833),tk=n(321112);function tI(e){let{onDismiss:t,canUpgrade:n}=e;return f.createElement(Y.fu,{name:"Workshop Expired File Banner"},f.createElement("div",{className:`workshop_expiry_footer--banner--ELf7G ${tk.yl}`},f.createElement("div",{className:"workshop_expiry_footer--bannerContent--w2Lw1"},f.createElement(tS.oS,{className:"workshop_expiry_footer--icon--mM-A8",type:tS.y1.WHITEBOARD}),f.createElement("div",{className:"workshop_expiry_footer--textContent--TN7cv"},f.createElement("span",{className:"workshop_expiry_footer--title--cmlOu text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"},(0,eN.tx)("whiteboard.open_sessions.expiry_banner_title")),n&&f.createElement("span",{className:"workshop_expiry_footer--subtitle--jmRvc text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"},(0,eN.tx)("whiteboard.open_sessions.expiry_banner_prompt")))),f.createElement(tN.Jn,{onClick:t,className:"workshop_expiry_footer--closeButton--L8lrO"})))}var tA=n(974898),tO=n(279080);function tL(e){let{onWorkshopExpired:t}=e;!function(){let e=(0,_.wA)(),t=(0,ew.iZ)(),n=!t,a=(0,tC.nF)(),l=a.enabled,r=a.enabled?a.id:null,i=(0,_.d4)(e=>e.progressBarState.mode),o=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.isTryFile}),s=(0,f.useMemo)(()=>{if(!t||null==r)return!1;if(o)return!0;let e=(0,A.DN)();try{return e.get((0,tO.v6)(r)).includes(t.email)}catch(e){return!1}},[t,r,o]),c=null==t?void 0:t.email;(0,f.useEffect)(()=>{c&&r&&o&&(0,tO.kO)(r,c)},[c,r,o]);let d=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.canEdit}),u=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),m=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.name});(0,f.useEffect)(()=>{if(l&&!(0,tw.T)(i)){let t=localStorage.getItem((0,tT.K)(r));n?t?(0,tb.QA)(t):e(ty.$O({type:tA.e})):d||s||e(ty.$O({type:tA.e}))}},[e,n,l,r,i,d,s]),(0,f.useEffect)(()=>{if(l&&!(0,tw.T)(i)&&n&&o&&u&&m===(0,eN.t)("fullscreen.fullscreen_view_selector.untitled")){let t=localStorage.getItem((0,tT.K)(r));t&&e(tv.S({userName:t,file_key:u}))}},[l,i,r,n,o,u,m,e])}();let{showEditFileFooter:n,userCanSeeEditButton:a,dismissEditFileFooter:l}=function(e){let[t,n]=(0,f.useState)(!1),a=(0,_.wA)(),l=(0,ew.iZ)(),r=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.name}),i=!l,o=(0,_.d4)(e=>e.openFile),{userCanEditFile:s,userCanSeeEditButton:c}=(0,f.useMemo)(()=>i?{userCanEditFile:!1,userCanSeeEditButton:!1}:o?{userCanEditFile:o.canEdit,userCanSeeEditButton:o.showEditButton}:{userCanEditFile:!1,userCanSeeEditButton:!1},[i,o]),d=(0,ta.Kx)(),u=(0,tC.nF)(),m=u.enabled,p=(0,v.ZC)(m),g=u.enabled?u.until.valueOf():null,h=(0,f.useRef)(null),E=(0,f.useCallback)(()=>{var t;if(!i){null==(t=ei.h3O)||t.reconnect(!1),s||n(!0);return}a(th.I.init({origin:"logged_out_footer",formState:tE.qB.SIGN_UP,redirectUrl:tg.Ay.location.pathname})),(null==d?void 0:d.updateFigJamTryExpiration)?u.enabled&&u.until?d.updateFigJamTryExpiration(u.until):d.updateFigJamTryExpiration(new Date):a(ty.to({type:tx.x,data:{headerText:(0,eN.t)("whiteboard.open_sessions.expiry_modal_title",{file_name:r||""}),subtitle:(0,eN.t)("whiteboard.open_sessions.expiry_modal_subtext"),disableHiding:!0}})),e()},[a,e,i,s,r,d,u]);return(0,f.useEffect)(()=>{if(m&&g){let e=Math.max(g-Date.now(),0);h.current=setTimeout(()=>{h.current=null,E()},e)}return()=>{h.current&&clearTimeout(h.current)}},[a,m,g,E]),(0,f.useEffect)(()=>{var e;null!=p&&m!==p&&(m?null==(e=ei.h3O)||e.reconnect(!1):(h.current&&clearTimeout(h.current),E()))},[a,m,p,E]),{showEditFileFooter:t,dismissEditFileFooter:(0,f.useCallback)(()=>{n(!1)},[]),userCanSeeEditButton:c}}(t);return n?f.createElement(tI,{onDismiss:l,canUpgrade:a}):null}var tP=n(717156),tD=n(7860),tR=n(964881),tM=n(617453);function tF(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("mask",{id:"fpl-icon-24-move-a",width:"17",height:"17",x:"4",y:"4",fill:"#000",maskUnits:"userSpaceOnUse"},f.createElement("path",{fill:"#fff",d:"M4 4h17v17H4z"}),f.createElement("path",{fillRule:"evenodd",d:"M19.294 12.063a1 1 0 0 0 .072-1.887l-13-5.107a1 1 0 0 0-1.297 1.297l5.107 13a1 1 0 0 0 1.887-.072l1.701-5.53 5.53-1.701Z",clipRule:"evenodd"})),f.createElement("path",{fill:"var(--color-icon)",d:"M19.294 12.063 19 11.107l.294.956Zm.072-1.887.365-.93-.365.93Zm-13-5.107.365-.93-.365.93ZM5.069 6.366l-.93.365.93-.365Zm5.107 13-.93.365.93-.365Zm1.887-.072L11.107 19l.956.294Zm1.701-5.53-.294-.955a1 1 0 0 0-.661.661l.955.294ZM19 11.107l.588 1.912a2 2 0 0 0 1.41-1.836L19 11.107Zm0 0 1.999.076a2 2 0 0 0-1.268-1.937L19 11.107ZM6 6l13 5.107.731-1.861-13-5.107L6 6Zm0 0 .731-1.861a2 2 0 0 0-2.145.447L6 6Zm0 0L4.586 4.586a2 2 0 0 0-.448 2.145L6 6Zm5.107 13L6 6l-1.862.731 5.108 13L11.107 19Zm0 0-1.861.731A2 2 0 0 0 11.183 21l-.076-2Zm0 0 .076 1.999a2 2 0 0 0 1.836-1.41L11.107 19Zm1.702-5.53L11.107 19l1.912.588 1.701-5.53-1.911-.588ZM19 11.107l-5.53 1.702.588 1.911 5.53-1.701L19 11.107Z",mask:"url(#fpl-icon-24-move-a)"}))}var tB=n(155190);function tU(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M12.997 8.62H13V10a.5.5 0 0 0 1 0V5.923A1 1 0 0 1 15.997 6v2.62H16V10a.5.5 0 0 0 1 0V8a1 1 0 1 1 2 0v.62h.01v4.743a.954.954 0 0 1-.01.143.97.97 0 0 0-.007.07 6.773 6.773 0 0 1-6.756 6.287c-.162 0-.319-.004-.47-.01-1.535-.07-2.885-.786-4.107-1.92-1.23-1.141-2.28-2.66-3.188-4.219-.289-.495-.486-.88-.555-1.193a.614.614 0 0 1-.016-.263c.007-.029.022-.071.087-.135a.574.574 0 0 1 .517-.173c.224.03.518.165.807.434l.001.002 1 .945A1 1 0 0 0 8 12.604V6a1 1 0 0 1 2 0v4a.5.5 0 0 0 1 0V5a1 1 0 1 1 2 0v.89a2.08 2.08 0 0 0-.003.11v2.62ZM7 8.5V6a2 2 0 0 1 3.112-1.662 2 2 0 0 1 3.775-.002A2 2 0 0 1 16.997 6v.27A2 2 0 0 1 20 8v.5h.01v4.863c0 .096-.007.191-.02.284a7.773 7.773 0 0 1-7.753 7.216c-.177 0-.349-.004-.516-.012-3.682-.167-6.256-3.449-8.113-6.633-.565-.969-1.11-2.043-.316-2.813.793-.769 1.898-.504 2.705.25L6 11.66l1 .945V8.5Z",clipRule:"evenodd"}))}var tH=n(487982);function tG(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M5 6.5A1.5 1.5 0 0 1 6.5 5h11A1.5 1.5 0 0 1 19 6.5v11a1.5 1.5 0 0 1-1.5 1.5h-2a.5.5 0 0 0 0 1h2a2.5 2.5 0 0 0 2.5-2.5v-11A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v2a.5.5 0 0 0 1 0v-2Zm6 2a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V9.707l-6.146 6.147a.5.5 0 0 1-.708-.708L14.293 9H11.5a.5.5 0 0 1-.5-.5Zm-7 3A1.5 1.5 0 0 1 5.5 10h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5v-5a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 4 18.5v-7Z",clipRule:"evenodd"}))}var tV=n(336417);function tK(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17 18a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h4v3.5a1.5 1.5 0 0 0 1.5 1.5H17v8Zm-.414-9L13 5.414V8.5a.5.5 0 0 0 .5.5h3.086ZM8 20h8a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-4.414-4.414A1 1 0 0 0 12.586 4H8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2Z",clipRule:"evenodd"}))}function tW(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 4a.5.5 0 0 0-.5.5V7H4.5a.5.5 0 0 0 0 1H7v8H4.5a.5.5 0 0 0 0 1H7v2.5a.5.5 0 0 0 1 0V17h8v2.5a.5.5 0 0 0 1 0V17h2.5a.5.5 0 0 0 0-1H17V8h2.5a.5.5 0 0 0 0-1H17V4.5a.5.5 0 0 0-1 0V7H8V4.5a.5.5 0 0 0-.5-.5ZM16 8H8v8h8V8Z",clipRule:"evenodd"}))}var tz=n(589282);function tj(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M13 5h5a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-8h7a1 1 0 0 0 1-1V5Zm-1 0H6a1 1 0 0 0-1 1v3h7V5Zm0-1h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6Z",clipRule:"evenodd"}))}var tJ=n(774844);function tY(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M11.5 11.25 3 19.5h5.5a3 3 0 0 0 3-3v0m0-5.25 5.742-5.742a1.78 1.78 0 0 1 2.516 0v0a1.78 1.78 0 0 1 .016 2.5L11.5 16.5m0-5.25v5.25"}))}var tX=n(439761);function tq(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("rect",{width:"15",height:"15",x:"4.5",y:"4.5",stroke:"var(--color-icon)",rx:"1.5"}))}var tZ=n(623402);function tQ(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",d:"m4.5 19.5 15-15"}))}var t$=n(900729);function t0(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 19.5 15-15m0 0H13m6.5 0V11"}))}var t1=n(165710);function t2(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("circle",{cx:"12",cy:"12",r:"8.5",stroke:"var(--color-icon)"}))}var t5=n(449217);function t4(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{stroke:"var(--color-icon)",d:"M11.784 3.875a.25.25 0 0 1 .432 0l8.228 14.25a.25.25 0 0 1-.217.375H3.773a.25.25 0 0 1-.217-.375l8.227-14.25Z"}))}var t3=n(23149);function t6(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{stroke:"var(--color-icon)",d:"m14.526 9.158.114.342h6.2a.5.5 0 0 1 .287.909l-4.831 3.397-.304.214.117.352 1.929 5.81a.5.5 0 0 1-.77.56l-4.972-3.645L12 16.88l-.296.217-4.971 3.646a.5.5 0 0 1-.77-.56l1.928-5.81.117-.353-.304-.214-4.83-3.397A.5.5 0 0 1 3.16 9.5h6.2l.114-.342 2.052-6.154a.5.5 0 0 1 .948 0l2.052 6.154Z"}))}var t7=n(689947),t8=n(38148),t9=n(803038);function ne(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m18.174 14.902.182-.579c.496-1.58.17-3.383-1.563-5.116-.43-.431-1.11-.87-1.999-1.294-.877-.42-1.904-.8-2.982-1.14-2.027-.636-4.174-1.104-5.734-1.402l4.906 4.905a2 2 0 1 1-.707.708L5.372 6.078c.297 1.56.766 3.707 1.402 5.733.695 2.213 1.532 4.08 2.433 4.982 1.734 1.733 3.537 2.059 5.117 1.562l.579-.181.428.428L16.728 20 20 16.727l-1.397-1.397-.429-.428Zm1.136-.28 1.397 1.398a1 1 0 0 1 0 1.415l-3.272 3.271a1 1 0 0 1-1.414 0l-1.397-1.397c-1.974.62-4.157.158-6.124-1.81-2.184-2.183-3.573-8.342-4.167-11.531a1.39 1.39 0 0 1 1.635-1.636c3.19.595 9.348 1.984 11.532 4.167 1.967 1.967 2.43 4.15 1.81 6.124Zm-6.603-1.915a1 1 0 1 0-1.414-1.415 1 1 0 0 0 1.414 1.415Z",clipRule:"evenodd"}))}var nt=n(308548);function nn(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M3.008 4.124a1 1 0 0 1 1.116-1.116l4 .5a1 1 0 0 1 .583.285L20.5 15.586a2 2 0 0 1 0 2.828L18.414 20.5a2 2 0 0 1-2.828 0L3.793 8.707a1 1 0 0 1-.285-.583l-.5-4ZM4 4l.128 1.024L4.5 8l9.146 9.146 3.5-3.5L8 4.5l-2.976-.372L4 4Zm13.854 10.354-3.5 3.5 1.939 1.939a1 1 0 0 0 1.414 0l2.086-2.086a1 1 0 0 0 0-1.414l-1.94-1.94Z",clipRule:"evenodd"}))}var na=n(42086),nl=n(434228);function nr(e){return(0,nl.O)()?f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 7.5v-3H12m7.5 3v-3H12m0 0v15m0 0H9m3 0h3"})):f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 7.5v-3h7m7 3v-3h-7m0 0v14m0 0h-3m3 0h3"}))}var ni=n(915377);function no(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8.293 15.707a1 1 0 0 1-.274-.903l.5-2.5a1 1 0 0 1 .274-.511l8.146-8.147a1.5 1.5 0 0 1 2.122 0l-.707.708a.5.5 0 0 0-.708 0l-1.042 1.042 2 2 1.042-1.042a.5.5 0 0 0 0-.707l-1.293-1.293.708-.708 1.293 1.294a1.5 1.5 0 0 1 0 2.12l-8.147 8.147a1 1 0 0 1-.511.274l-2.5.5a1 1 0 0 1-.903-.274ZM9.5 12.5l6.397-6.397 2 2L11.5 14.5l-1.438.287L9 15l.212-1.062L9.5 12.5Zm8.5-.05V18a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h5.55a.5.5 0 0 0 0-1H6a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-5.55a.5.5 0 0 0-1 0Z",clipRule:"evenodd"}))}function ns(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M13.359 4.736c.122-.287-.03-.632-.34-.672A8 8 0 0 0 4 12v4.8c.001 1.12.001 1.68.219 2.108a2 2 0 0 0 .874.874C5.52 20 6.08 20 7.2 20H12a8 8 0 0 0 7.936-9.02c-.04-.309-.385-.461-.672-.339a.514.514 0 0 0-.313.528A7 7 0 0 1 12 19H7.2c-.577 0-.949 0-1.232-.024-.272-.022-.373-.06-.422-.085a1 1 0 0 1-.437-.437c-.025-.05-.063-.15-.085-.422C5 17.75 5 17.377 5 16.8V12a7 7 0 0 1 7.831-6.951.515.515 0 0 0 .528-.313Z",clipRule:"evenodd"}),f.createElement("circle",{cx:"17.5",cy:"6.5",r:"2.5",fill:"var(--color-icon-danger)"}))}var nc=n(39108);function nd(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m20.854 6.854-3 3a.5.5 0 0 1-.708-.708L19.293 7H15.5A2.5 2.5 0 0 0 13 9.5v5A3.5 3.5 0 0 1 9.5 18h-.55a2.5 2.5 0 1 1 0-1h.55a2.5 2.5 0 0 0 2.5-2.5v-5A3.5 3.5 0 0 1 15.5 6h3.793l-2.147-2.146a.5.5 0 0 1 .708-.708l3 3a.5.5 0 0 1 0 .708ZM8 17.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z",clipRule:"evenodd"}))}var nu=n(927457),nm=n(935283),np=n(320063),nf=n(860601),n_=n(153234),ng=n(787978);let nh=f.memo(function({toolId:e,tooltipText:t,tooltipShortcut:n,disabled:a=!1,icon:l,activeToolId:r,onActivateTool:i,onboardingKey:o,recordingKey:s=`tool-${e}`}){let c=(0,f.useCallback)(()=>i(e),[i,e]),d=e===r;return f.createElement(ng.C,{onMouseDown:c,tooltipText:t,tooltipShortcut:n,onboardingKey:o,disabled:a,isActive:d,recordingKey:s},l)});var nE=n(326331),nv=n(902008),ny=n(629019),nb=n.n(ny),nC=n(268537),nw=n(638889),nT=n(318812),nx=n(498606),nN=n(720488),nS=n(893606),nk=(e=>(e.Button="Button",e.Tool="Tool",e.Divider="Divider",e))(nk||{}),nI=n(738269);function nA({activeToolIdAtom:e,readOnlyOverlayInfoAtom:t,readOnlyTopLevelModeAtom:n,readOnlyEditModeTypeAtom:a},l){let r=(0,S.md)(t),[i,o]=(0,S.fp)(e),s=(0,S.md)(n),c=(0,S.md)(a),d=(null==r?void 0:r.type)!==null,u=nP(),m=l||u,p=(0,f.useCallback)(()=>{m(null)},[m]);return(0,f.useEffect)(()=>{d||p()},[d,p]),{activeToolId:i,dropdownShown:r,openOverlay:e=>{m(e)},closeOpenOverlay:p,activateTool:e=>{o(e),p()},topLevelMode:s,editModeType:c}}let nO="TOOLBAR_STATE_OVERLAY_DROPDOWN_TYPE_";function nL(e){return`${nO}${String(e)}`}function nP(){let e=(0,_.wA)();return(0,f.useCallback)(t=>{if(!(null==t?void 0:t.overlayId)){e(nI.oB());return}let n=t.anchorClientRect;e(nI.j7({type:nL(t.overlayId),data:{targetRect:{top:n.top,left:n.left+74,width:n.width},items:t.items,selectedToolId:t.selectedToolId,recordingKey:t.recordingKey}}))},[e])}var nD=n(394302);function nR(e){switch(e.type){case nk.Divider:return!0;case nk.Tool:return!e.hidden;default:(0,nm.xb)(e)}}function nM(e){switch(e.type){case nk.Divider:return!1;case nk.Tool:return!0;default:(0,nm.xb)(e)}}function nF(e){let{items:t}=e,n=t.filter(nR);return n.some(e=>nM(e)&&!e.disabled)?f.createElement(nU,{...e,items:n}):null}function nB(e,t){return e.find(e=>nM(e)&&t===e.toolId)}function nU(e){let{activeToolId:t,items:n,tooltipText:a,overlayId:l,onActivateTool:r,onboardingKey:i,recordingKey:o=`tool-group-${l}`,dropdownShown:s,onOpen:c,onClose:d}=e,u=null!=t&&nB(n,t)?t:void 0,m=()=>{if(null!=u)return u;let e=n.find(e=>nM(e)&&!e.disabled);if(!e)throw Error("Expected to have an enabled tool");return e.toolId},[p,_]=(0,f.useState)(m()),g=nB(n,p),h=()=>_(m()),E=(0,nS.R)();(0,np.h)(()=>(n_.y6(h),()=>n_.nS(h))),(0,f.useEffect)(()=>{null!=u&&_(u)},[u]);let v=!!(s&&s.type===nL(l)),y=(0,f.useRef)(null),b=(0,n_.rf)(o+".chevron","mousedown",e=>{var t;if(e.stopPropagation(),v)d();else{let e=null==(t=y.current)?void 0:t.getBoundingClientRect();e&&c({overlayId:l,anchorClientRect:e,items:n,selectedToolId:p,recordingKey:o})}}),C=p===t,w=E?n_.Pt(o,`default.${g.recordingKey}`):o;return f.createElement(ng.C,{onMouseDown:()=>r(p),isActive:C,simulateHover:v,ref:y,recordingKey:w,isToolGroup:!0},f.createElement("div",{className:nb()(nD.IN,{[nD.Ou]:C}),"data-onboarding-key":i,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":g.text,"data-tooltip-shortcut":g.shortcutText,"data-tooltip-show-above":!0},g.icon||g.text),f.createElement("div",{className:nb()("tool_group--chevronContainer--9IyNJ",v?"tool_group--flyoutChevronSelected--aAgNx":""),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":a,"data-tooltip-show-above":!0,onMouseDown:b,onClick:e=>e.stopPropagation(),"data-testid":`${l}-chevron`},f.createElement("div",{className:nb()("tool_group--flyoutSvgChevron--zlSh3","tool_group--flyoutChevron--21UP1")},f.createElement(nE.r,null))))}function nH(e){let{onActivateTool:t,showItemIcons:n,simulatedHoverToolIdAtom:a}=e,l=(0,nT.U)();if(!l||!l.type.startsWith(nO))return null;let r={...l.data.targetRect,top:l.data.targetRect.top-8,height:l.data.targetRect.height+16};return f.createElement(nN.Cf,{targetRect:r,className:"tool_group--pointingDropdown--4V-h3",showPoint:!1,displayAboveTarget:!0,propagateCloseClick:!0},f.createElement("div",{className:"tool_group--flyoutDropdownContainer--RPGg7"},l.data.items.map((e,r)=>f.createElement(nV,{key:function(e,t){switch(e.type){case nk.Divider:return`divider-${t}`;case nk.Tool:return`tool-${e.toolId}`;default:(0,nm.xb)(e)}}(e,r),item:e,showItemIcon:n,hideCheck:!1,onActivateTool:t,recordingKey:l.data.recordingKey,isSelected:nM(e)&&l.data.selectedToolId===e.toolId,simulatedHoverToolIdAtom:a}))))}let nG=(0,e4.eU)(void 0);function nV({item:e,showItemIcon:t=!0,hideCheck:n,isSelected:a,onActivateTool:l,recordingKey:r,simulatedHoverToolIdAtom:i=nG}){let o=(0,S.md)(i);return e.type===nk.Divider?f.createElement(nC.W.Separator,null):f.createElement(nK,{text:e.text,shortcut:e.shortcutText,disabled:e.disabled,isChecked:a,onPointerUp:()=>l(e.toolId),icon:t?e.smallIcon||e.icon:void 0,hideCheck:n,recordingKey:n_.Pt(r,"flyout",e.recordingKey),onboardingKey:e.onboardingKey,simulateHover:e.toolId===o})}function nK({text:e,shortcut:t,icon:n,disabled:a,onClick:l,onPointerUp:r,recordingKey:i,onboardingKey:o,simulateHover:s,hideCheck:c,isChecked:d}){return f.createElement(nC.W.Option,{disabled:a,onClick:l,onPointerUp:r,recordingKey:i,simulateHover:s,onboardingKey:o},!c&&f.createElement("div",{className:"tool_group--flyoutOptionCheckMarkContainer--c6BQU tool_group--flyoutOptionIconContainerBase--7xLM8"},d&&f.createElement(nv.l,null)),n&&f.createElement("div",{className:"tool_group--flyoutOptionIconContainer--ZUv0P tool_group--flyoutOptionIconContainerBase--7xLM8"},n),f.createElement("div",{className:"tool_group--flyoutOptionText--GA6Zv"},e),null!=t&&f.createElement(nw.S,{shortcut:t,className:"tool_group--flyoutOptionShortcut--5E1Py"}))}var nW=n(976404),nz=n(259927);function nj({children:e}){let t=(0,nW.U1)();return f.createElement("div",{ref:t,role:"toolbar",className:nb()("toolbelt--root--jwHGa",nz.Dm)},e)}function nJ({onAction:e,isActive:t=!1,tooltipText:n,tooltipShortcut:a,disabled:l=!1,icon:r,onboardingKey:i,recordingKey:o="toolbelt-action",elementId:s}){return f.createElement(ng.C,{onMouseDown:e,tooltipText:n,tooltipShortcut:a,onboardingKey:i,recordingKey:o,disabled:l,elementId:s,isToolbeltAction:!0},f.createElement("div",{className:nb()(nD.kJ,{[nD.vu]:t})},r))}function nY(){return f.createElement("div",{className:"toolbelt_divider--divider--WazDM"})}var nX=n(913016),nq=n(801161),nZ=n(552793);let nQ="toolbelt_toggle_id";function n$(e){let{checked:t,onClick:n,icon:a,recordingKey:l,disabled:r}=e;return f.createElement("span",{"data-active":t,className:nb()("toolbelt_toggle--container--GCPUG",{"toolbelt_toggle--disabled--c3mYt":r}),id:nQ},f.createElement("span",{className:"toolbelt_toggle--hiddenCheckbox--aPpTc"},f.createElement(nZ.F,{checked:t,onChange:n,recordingKey:l,disabled:r})),f.createElement("div",{className:"toolbelt_toggle--knob--naRk5"},a))}function n0({children:e,editorTheme:t}){return f.createElement("div",{className:"toolbelt_left_side--leftSideRow--yovV-","data-editor-theme":t},e)}function n1(e){var t,n,a;let l=(0,_.wA)(),r=f.useRef(e.rows.map(e=>f.createRef())),i=null==(t=r.current[e.activeRowIndex].current)?void 0:t.getBoundingClientRect(),[o,s]=f.useState(null==i?void 0:i.width),[c,d]=f.useState(!1),u=null==(a=null==(n=r.current[e.activeRowIndex].current)?void 0:n.getBoundingClientRect())?void 0:a.width;return(f.useEffect(()=>{l(nq.jD())},[l,e.activeRowIndex]),f.useEffect(()=>{if(!u||u===o)return;if(void 0===o){s(u);return}let t=()=>{s(u),setTimeout(()=>{d(!1)},2e3),e.onAnimationCompletion&&setTimeout(e.onAnimationCompletion,.5*nX.Vn)},n=document.getElementById(nQ),a=null==n?void 0:n.matches(":hover");a&&(null==n||n.addEventListener("mouseleave",t)),d(!0);let l=setTimeout(t,a?550:200);return()=>{a&&(null==n||n.removeEventListener("mouseleave",t)),clearTimeout(l)}},[u,o,e.onAnimationCompletion]),o)?f.createElement("div",{className:"toolbelt_left_side--leftSideCarouselContainer--8qu6Z",style:{width:o,willChange:c?"width":"auto",transition:"0.5s"}},f.createElement("div",{className:"toolbelt_left_side--leftSideCarouselRows--SWcpz",style:{transform:`translateY(${-1*((null==i?void 0:i.height)||0)*e.activeRowIndex}px)`}},e.rows.map((e,t)=>f.createElement("div",{ref:r.current[t],key:t},e)))):f.createElement("div",{ref:r.current[e.activeRowIndex]},e.rows[e.activeRowIndex])}var n2=n(47506),n5=n(553015),n4=n(332034),n3=n(349410),n6=n(226055),n7=n(456104),n8=n(397065),n9=n(340514),ae=n(746806),at=n(601538),an=n(463546);function aa(){let e=(0,n3.ru)(),{show:t,isShowing:n,complete:a}=(0,n7.e)({overlay:an.jNM,priority:n8.N.SECONDARY_MODAL,experiment:{check:e,predicate:e=>e,postCheck:()=>!0}});return(0,np.h)(()=>{t()}),f.createElement(n9.rq,{isShowing:n,targetKey:(0,n6.GS)()?at.ON:n4.e,shouldCenterArrow:ae.EL.BEST_EFFORT,trackingContextName:"Dev Mode Starter Trial Entry Nudge",title:(0,eN.tx)("dev_handoff.paywall.starter_trial_nudge.title"),description:(0,eN.tx)("dev_handoff.paywall.starter_trial_nudge.description"),onClose:a,emphasized:!0,forceEditorTheme:"dev-handoff"})}var al=n(910741),ar=n(101505),ai=n(582947),ao=n(364871);let as="dev_mode_has_seen_direct_link_hint",ac=(0,ai.Fu)(as);function ad(){let e=(0,S.md)(ao.R),t=(0,al.m3)(),n=(0,U._I)(),a=(0,S.md)(ac),l=(0,_.wA)(),{show:r,isShowing:i,complete:o}=(0,n7.e)({overlay:an.gZN,priority:n8.N.DEFAULT_MODAL},[a]),s=(0,f.useCallback)(()=>{o(),l(j.b({[as]:!0}))},[o,l]),c=(0,f.useCallback)(()=>{n||!e||t||r({canShow:e=>!e})},[n,e,t,r]);return((0,np.h)(()=>{c()}),f.useEffect(()=>{n&&i&&s()},[n,i,s]),i)?f.createElement(n9.rq,{isShowing:i,targetKey:at.ON,shouldCenterArrow:ae.EL.BEST_EFFORT,trackingContextName:"Dev Mode Direct Link Hint",title:(0,eN.tx)("dev_handoff.paywall.direct_link_hint.title"),description:(0,eN.tx)("dev_handoff.paywall.direct_link_hint.description"),primaryCta:{label:(0,eN.tx)("general.got_it"),type:"button",onClick:s,variantOverride:"secondary",ctaTrackingDescriptor:ar.c.DEV_MODE_DIRECT_LINK_HINT},onClose:s,emphasized:!1,disableHighlight:!0}):null}let au=(0,ai.Fu)("dev_handoff_has_seen_dev_mode"),am=(0,ai.Fu)("dev_handoff_has_seen_dev_mode_ga");function ap(){return function(){let e=(0,_.d4)(e=>e.currentUserOrgId),t=(0,_.d4)(e=>e.currentTeamId),n=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.teamId})||null,a=(0,_.wA)(),l=(0,S.md)(au),r=(0,f.useRef)(!1);(0,f.useEffect)(()=>{r.current||"loaded"!==l.status||(r.current=!0,a(j.b({dev_handoff_has_seen_dev_mode:!0,dev_handoff_has_seen_dev_mode_ga:!0})))},[l,a,e,t||n])}(),null}var af=n(335682),a_=n(99506),ag=n(507956);let ah=(0,ai.Fu)("dev_mode_notified_of_approved_org_request");function aE(){let e=(0,ag.ks)(),t=(0,U._I)(),n=(0,af.q5)(),a=(0,_.d4)(e=>{var t,n;return null==(n=null==(t=e.openFile)?void 0:t.currentPartialOrgUser)?void 0:n.designAccountTypeRequest}),l=(0,_.d4)(e=>{var t,n;return null==(n=null==(t=e.openFile)?void 0:t.currentPartialOrgUser)?void 0:n.devModeAccountTypeRequest}),r=!!(0,S.md)(ah).data,i=(0,_.wA)(),o=!!(null==n?void 0:n.parentOrgId),s=!1;return(null==l?void 0:l.status)==="approved"?s=!0:(null==l?void 0:l.status)==="denied"&&(null==a?void 0:a.status)==="approved"&&(s=!0),(0,f.useEffect)(()=>{o&&t&&e&&s&&!r&&i(j.b({dev_mode_notified_of_approved_org_request:!0}))},[t,i,e,o,s,r]),!!t&&!!o&&!e&&s&&!r}function av(){let e=aE(),t=function(){let e=(0,ag.ks)(),t=(0,U._I)(),n=(0,_.d4)(e=>{var t,n,a;return(null==(n=null==(t=e.openFile)?void 0:t.currentPartialOrgUser)?void 0:n.accountType)===a_.El.FULL&&(null==(a=e.openFile)?void 0:a.canEdit)}),a=(0,S.md)(am).data,l=(0,af.q5)(),r=(0,_.d4)(e=>{var t,n;return null==(n=null==(t=e.openFile)?void 0:t.currentPartialOrgUser)?void 0:n.designAccountTypeRequest}),i=(0,_.d4)(e=>{var t,n;return null==(n=null==(t=e.openFile)?void 0:t.currentPartialOrgUser)?void 0:n.devModeAccountTypeRequest}),o=(0,_.wA)(),s=!!(null==l?void 0:l.parentOrgId),c=!1;(null==i?void 0:i.status)==="approved"?c=!0:(null==i?void 0:i.status)==="denied"&&(null==r?void 0:r.status)==="approved"&&(c=!0);let d=s&&!c&&!n&&t;return(0,f.useEffect)(()=>{d&&e&&o(j.b({dev_mode_notified_of_approved_org_request:!0}))},[o,e,d]),d&&!e&&!a}(),n=(0,S.md)(ah),a=(0,n6.GS)(),l=(0,_.wA)(),{show:r,isShowing:i,complete:o}=(0,n7.e)({overlay:an.Xu4,priority:n8.N.DEFAULT_MODAL},[n]),s=(0,al.bZ)(),c=(0,f.useCallback)(()=>{o(),l(j.b({dev_mode_notified_of_approved_org_request:!0,dev_mode_seen_paywall_reminder:!0}))},[o,l]);return(0,f.useEffect)(()=>{e||t?r({canShow:e=>!e}):i&&o()},[o,i,e,t,r]),f.createElement(n9.rq,{isShowing:i,targetKey:a?at.ON:n4.e,shouldCenterArrow:ae.EL.BEST_EFFORT,trackingContextName:"Dev Mode Approved Access Hint",title:(0,eN.tx)("dev_handoff.paywall.approved.title"),description:(0,eN.tx)("dev_handoff.paywall.approved.description"),onClose:c,emphasized:!0,disableHighlight:!1,trackingProperties:s,trackingEnabled:(null==s?void 0:s.gracePeriod)!==void 0,forceEditorTheme:"dev-handoff"})}var ay=n(103907),ab=n(683694),aC=n(728325),aw=n(855418),aT=n(843495),ax=n(813648),aN=n(100197),aS=n(402609),ak=n(147723),aI=n(132572),aA=n(872429),aO=n(141273);function aL(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m6.36 5.694 4.49 4.45.002.002a1.5 1.5 0 1 1-.707.707L5.726 6.474l1.884 6.587.005.018.004.018a4.615 4.615 0 0 0 5.624 3.539 1.175 1.175 0 0 1 1.118.298l1.216 1.22a.746.746 0 0 0 1.058 0l1.52-1.523a.754.754 0 0 0 0-1.064l-1.24-1.24a1.174 1.174 0 0 1-.298-1.104 4.622 4.622 0 0 0-3.335-5.551l-.013-.003-6.91-1.975Zm.1-1.012A1.438 1.438 0 0 0 4.681 6.46l1.962 6.859a5.615 5.615 0 0 0 6.84 4.287c.08-.02.14.006.169.034l1.216 1.22a1.748 1.748 0 0 0 2.474 0l1.52-1.523a1.754 1.754 0 0 0 0-2.476l-1.24-1.241c-.027-.028-.052-.087-.033-.166a5.622 5.622 0 0 0-4.052-6.749L6.459 4.682ZM11.498 12a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1Z",clipRule:"evenodd"}))}var aP=n(559036),aD=n(924430),aR=n(30637),aM=n(360712),aF=n(36816),aB=n(92566),aU=n(509323),aH=n(954049);function aG(e){let t=function(){let e=(0,_.wA)(),t=(0,e2.Xr)(aU.Xw),n=(0,e2.Xr)(aH.Pk);return()=>{e(nI.oB()),e(K.XE()),e(K.Uv()),t(!1),n(!1)}}(),n=aV(),a=e===ei.EMA.DESIGN?ei.EMA.SLIDES:ei.EMA.DESIGN;return()=>{(n||a!==ei.EMA.DESIGN)&&(t(),function(e){let t=S.zl.get(aB.Kh);e===ei.EMA.DESIGN&&((0,aT.NT)(ei.FAf.DESIGN),t===ei.NLJ.COMMENTS&&ei.glU.triggerAction("set-tool-default",null))}(a),a===ei.EMA.DESIGN?ei.glU.triggerAction("enter-slides-design-mode",null):ei.glU.triggerAction("enter-slides-mode",null))}}function aV(){var e,t,n,a,l,r,i;let o=(0,_.d4)(e=>e.currentUserOrgId),s=(0,_.d4)(af.vu),c=(0,aM.q)(),d=(0,eW.Rs)(eJ.L1I,{fileKey:(null==s?void 0:s.key)??"",teamId:(null==s?void 0:s.team_id)??null,repoId:(null==s?void 0:s.file_repo_id)??null,projectId:(null==s?void 0:s.folder_id)??null,currentOrgId:o??null});if((0,aR.PN)())return!0;if(c)return!1;let u=null==(n=null==(t=null==(e=d.data)?void 0:e.file)?void 0:t.org)?void 0:n.currentBaseOrgUser;if(u)return u.designPaidStatus===a_.El.FULL;{let e=null==(i=null==(r=null==(l=null==(a=d.data)?void 0:a.file)?void 0:l.roles[0])?void 0:r.user)?void 0:i.teamUser;return!!e&&e.designPaidStatus===aF.Zf.FULL}}function aK({recordingKey:e}){var t;let n=(0,tu.sO)(),a=(0,af.tS)(),l=(0,aN.J2)(null==(t=ei.Ez5)?void 0:t.slidesToolMode()),{Sprig:r}=(0,aP.A)(),i=aV(),o=aG(l),s=(()=>{let e=(0,_.d4)(e=>e.mirror.appModel.keyboardShortcuts);return(0,f.useCallback)(t=>(0,tl.c1)(e,t),[e])})();if(!n)return null;let{onAction:c,tooltipText:d,tooltipShortcut:u}=l===ei.EMA.DESIGN?{onAction:()=>{i&&(o(),(0,$.Cu)({trackingContext:"slides_toggle_back_to_slides",productType:"slides",fileKey:a}),r("track","slides_toggle_back_to_slides"))},tooltipText:(0,eN.t)("slides.inserts_menu.slides"),tooltipShortcut:s("enter-slides-mode")}:{onAction:()=>{i&&(o(),(0,$.Cu)({trackingContext:"slides_toggle_design",productType:"slides",fileKey:a}))},tooltipText:i?(0,eN.t)("slides.inserts_menu.design"):(0,eN.t)("slides.inserts_menu.design_mode_upsell"),tooltipShortcut:i?s("enter-slides-design-mode"):void 0};return f.createElement(f.Fragment,null,f.createElement(nY,null),f.createElement(nJ,{tooltipShortcut:u,icon:f.createElement(n$,{checked:l===ei.EMA.DESIGN,onClick:c,icon:f.createElement(aL,null),recordingKey:e,disabled:!i}),onAction:nf.lQ,tooltipText:d,onboardingKey:aD.uy}))}var aW=n(48009),az=n(562432),aj=n(719624);function aJ(e){let t=(0,e2.Xr)(aj.Sf);f.useEffect(()=>((0,aI.AL)()&&t(e),()=>{(0,aI.AL)()&&t(null)}),[e,t])}function aY(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M20 5.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM17.5 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm0 9a.5.5 0 0 1 .5.5V18h1.5a.5.5 0 0 1 0 1H18v1.5a.5.5 0 0 1-1 0V19h-1.5a.5.5 0 0 1 0-1H17v-1.5a.5.5 0 0 1 .5-.5ZM8.83 5.26 7.713 9.17 3.787 10.3l.277.962-.277-.961c-1.702.49-1.695 2.905.01 3.385l3.917 1.103 1.116 3.906c.486 1.702 2.898 1.702 3.384 0l1.117-3.908 3.908-1.117c1.702-.486 1.702-2.898 0-3.384l-3.908-1.117-1.117-3.908c-.486-1.702-2.898-1.702-3.384 0Zm-4.761 7.464c-.737-.208-.74-1.25-.005-1.462l4.458-1.284 1.27-4.443c.21-.735 1.25-.735 1.46 0l1.27 4.443 4.442 1.269c.735.21.735 1.252 0 1.462l-4.442 1.269-1.27 4.442c-.21.735-1.25.735-1.46 0l-1.27-4.442-4.453-1.254Z",clipRule:"evenodd"}))}function aX(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8.207 3.793a1 1 0 0 0-1.414 0l-3 3a1 1 0 0 0 0 1.414l3 3a1 1 0 0 0 1.414 0l3-3a1 1 0 0 0 0-1.414l-3-3ZM4.5 7.5l.707.707 1.586 1.586.707.707.707-.707 1.586-1.586.707-.707-.707-.707-1.586-1.586L7.5 4.5l-.707.707-1.586 1.586L4.5 7.5Zm12 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7ZM19 7.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM16.5 13a.5.5 0 0 1 .5.5V16h2.5a.5.5 0 1 1 0 1H17v2.5a.5.5 0 1 1-1 0V17h-2.5a.5.5 0 0 1 0-1H16v-2.5a.5.5 0 0 1 .5-.5ZM11 15a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3Zm-6 0a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-3Z",clipRule:"evenodd"}))}var aq=n(239737);function aZ(){return(0,aq.vh)()?f.createElement(aY,null):f.createElement(aX,null)}var aQ=n(178772),a$=n(784578);function a0(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M14.447 8.224a.5.5 0 1 0-.894-.447l-4 8a.5.5 0 1 0 .894.447l4-8Zm1.724 8.152a.5.5 0 0 0 .705-.047l3.5-4a.5.5 0 0 0 0-.658l-3.5-4a.5.5 0 0 0-.752.658L19.336 12l-3.212 3.67a.5.5 0 0 0 .047.706ZM7.829 7.624a.5.5 0 0 0-.705.047l-3.5 4a.5.5 0 0 0 0 .658l3.5 4a.5.5 0 1 0 .752-.658L4.664 12l3.212-3.672a.5.5 0 0 0-.047-.705Z",clipRule:"evenodd"}))}var a1=n(946689),a2=n(574176),a5=n(304815);function a4(){let e=(0,U.U4)(),t=aE(),n=(0,S.md)(a5.a),a=(0,S.md)(a5.d),{show:l,isShowing:r,complete:i}=(0,n7.e)({overlay:an.hQM,priority:n8.N.HIGH_PRIORITY_MODAL},[n,a]),o=(0,al.bZ)(),s=(0,_.wA)(),c=(0,f.useCallback)(()=>{e&&!t&&l({canShow:(e,t)=>!!e&&!t})},[e,t,l]);(0,np.h)(()=>{c()});let d=f.useCallback(()=>{i(),s(j.b({dev_mode_seen_paywall_reminder:!0,dev_mode_should_see_paywall_reminder:!1}))},[i,s]);return(0,f.useEffect)(()=>{r&&t&&d()},[r,d,t]),f.createElement(n9.rq,{isShowing:r,targetKey:(0,n6.GS)()?at.ON:n4.e,shouldCenterArrow:ae.EL.BEST_EFFORT,trackingContextName:"Dev Mode Paywall Closed Design Mode Reminder Hint",trackingProperties:o,trackingEnabled:(null==o?void 0:o.gracePeriod)!==void 0,description:(0,eN.tx)("dev_handoff.paywall.hint_in_design_mode"),onClose:d,emphasized:!0,forceEditorTheme:"dev-handoff"})}var a3=n(853079),a6=n(939683),a7=n(522739),a8=n(762638),a9=n(984968),le=n(733378),lt=n(422237);let ln=(0,lt.ex)("dev_mode_toggle_disabled_tracked_tooltip",function(){let e=(0,a6.U)(),t=(0,ew.iZ)(),n=(0,a9.$w)(),a=(0,af.q5)(),l=(null==t?void 0:t.external_restricted_org_id)?(0,eN.t)("dev_handoff.paywall.external_content_control_hint"):(null==a?void 0:a.parentOrgId)?(0,eN.t)("dev_handoff.paywall.org_not_member_hint"):n?void 0:(0,eN.t)("dev_handoff.paywall.team_not_member_hint"),r=(null==t?void 0:t.external_restricted_org_id)?"ecc":(null==a?void 0:a.parentOrgId)?"not_member_org":n?void 0:"not_member_pro_team";return(0,np.h)(()=>{e("Dev Mode Disabled Tooltip Viewed",{reason:r})}),f.createElement("div",{className:a8.cx.cursorDefault.colorTextTooltip.$,style:{textAlign:"center",maxWidth:180}},f.createElement("span",null,l))},()=>({unconstrainWidth:!0})),la=(0,lt.ex)("devmode_toggle_disabled_personal_draft",function({isCurrentUserFileOwner:e}){let t=(0,a6.U)(),n=(0,_.wA)(),a=(0,ew.iZ)(),l=(0,af.q5)(),r=(0,_.d4)(e=>e.repos),i=(0,le.OG)(l,a);return((0,np.h)(()=>{t("Dev Mode Disabled Tooltip Viewed",{reason:e?"personal_draft_owner":"personal_draft"})}),(0,y.kc)().ps_benchmark)?e?f.createElement("div",{className:a8.cx.cursorDefault.colorTextTooltip.$},f.createElement("span",null,(0,eN.tx)("dev_handoff.paywall.toggle_disabled_for_personal_drafts")),f.createElement("div",{className:a8.cx.bl1.hFull.inline.bSolid.colorBorderMenu.ml8.mr8.$}),f.createElement("a",{href:"/files/drafts-to-move",className:a8.cx.cursorPointer.noUnderline.fontBold.colorTextTooltip.$},(0,eN.tx)("dev_handoff.paywall.toggle_disabled_go_to_drafts_to_move"))):(0,eN.tx)("dev_handoff.paywall.toggle_disabled_while_file_is_being_moved"):e?f.createElement("div",{className:a8.cx.cursorDefault.colorTextTooltip.$},f.createElement("span",null,(0,eN.tx)("dev_handoff.paywall.toggle_disabled_for_personal_drafts_pre_ps")),f.createElement("div",{className:a8.cx.bl1.hFull.inline.bSolid.colorBorderMenu.ml8.mr8.$}),f.createElement(a7.oj,{onClick:()=>{i&&(0,le.RG)(n,l,r)()},disabled:!i,className:a8.cx.cursorPointer.noUnderline.fontBold.colorTextTooltip.$},(0,eN.tx)("dev_handoff.paywall.toggle_disabled_move_link"))):(0,eN.tx)("dev_handoff.paywall.toggle_disabled_moving_disabled")},e=>{let t=e.getAttribute("data-tooltip-is-current-user-file-owner");return{isCurrentUserFileOwner:!!t&&JSON.parse(t),unconstrainWidth:!0}}),ll="mode_switcher_toggle--toggled---c0DA";var lr=n(320735);function li({disabled:e,extraPadding:t,toggled:n,handleOnPointerDown:a,handleOnKeyDown:l,recordingKey:r}){return f.createElement("div",{className:nb()("mode_switcher_toggle--switchWithButtonBase--EtDrb",t&&"mode_switcher_toggle--extraPadding--slSfm",e&&"mode_switcher_toggle--disabled--y1Es8",n&&ll),role:"button",onPointerDown:a},f.createElement(a1.u4,{disabled:e,defaultClass:nb()("mode_switcher_toggle--switchButton--i3ZP2",n&&ll),"data-onboarding-key":n4.e,"data-fullscreen-intercept":!0,onKeyDown:l},f.createElement(a2.B,{svg:lr.A})))}function lo({disabled:e,extraPadding:t,isDevHandoff:n,recordingKey:a,tooltip:l,tooltipType:r}){let i=(0,al.m3)(),o=(0,n6.GS)(),s=(0,a3.U)(o?"ui3_toolbelt":"toggle"),c=(0,eb.aV)(),d=(0,ew.iZ)(),u=(0,af.q5)(),m=(0,n_.BV)(n_.Pt(a,"switchToDevModeButton"),"pointerdown",t=>{e||0!==t.button||(t.preventDefault(),s(n?"design":"handoff"))}),p=(0,n_.v_)(n_.Pt(a,"switchToDevModeToggle"),"keydown",e=>{("Enter"===e.code||"Space"===e.code)&&s(n?"design":"handoff")}),_=n_.rf(n_.Pt("designToolbelt","toggleDevMode"),"click",()=>{e||s(n?"design":"handoff")}),g=!!u&&(null==d?void 0:d.id)===u.creatorId,h={"data-tooltip-type":r??nx.Ib.TEXT,"data-tooltip":l??(0,eN.t)("general.dev_mode"),"data-tooltip-shortcut-key":l?void 0:n?"enter-design-mode":"enter-inspect-mode","data-tooltip-interactive":r===nx.Ib.SPECIAL,"data-tooltip-is-current-user-file-owner":JSON.stringify(g),"data-onboarding-key":at.ON,"data-tooltip-offset-y":o?-4:4};return o?f.createElement("div",{...h,"data-tooltip-show-above":!0},f.createElement(n$,{checked:n,onClick:_,icon:f.createElement(a0,null),disabled:e,recordingKey:"toolbarView.switchToDevModeButton"})):f.createElement(f.Fragment,null,f.createElement("div",{className:nb()("mode_switcher_toggle--toggleWrapper--kHykz",n?ll:""),role:"button","aria-pressed":n,...h},f.createElement(li,{disabled:e,extraPadding:t,toggled:n,handleOnPointerDown:m,handleOnKeyDown:p})),f.createElement(aS.p,null,!c&&f.createElement(ad,null),!c&&f.createElement(av,null),!c&&i&&!n&&f.createElement(a4,null),!c&&f.createElement(aa,null)))}function ls({recordingKey:e,extraPadding:t}){let n=(0,ag.ks)(),a=(0,_.wA)(),l=(0,af.tS)(),r=(0,af.q5)(),i=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.canEdit}),o=(0,_.d4)(e=>e.selectedView),s=(0,U.U4)(),c=!(0,ew.iZ)(),d=!!(0,tR.hA)(),u=n?"handoff":"design";(0,f.useEffect)(()=>{c&&"handoff"===u&&a(nI.$T({...o,view:"fullscreen",editorType:eq.nT.Design}))},[c,u,a,o]);let m="handoff"===u,p=(0,f.useRef)(m);if((0,f.useEffect)(()=>{if(p.current!==m){let e=m?(0,eN.t)("dev_handoff.inspect_mode.switched_to_inspect"):(0,eN.t)("dev_handoff.inspect_mode.switched_to_design");a(eS.F.dequeue({matchType:"switched_editor_mode"})),a(eS.F.enqueue({type:"switched_editor_mode",message:e,delay:200,timeoutOverride:1200}))}p.current=m},[m,a]),c||d)return null;let g=!m&&!s&&!(0,aR.nl)(),h=!!r&&!r.parentOrgId&&!r.teamId;return f.createElement(lo,{canEdit:i,disabled:!l||g,extraPadding:t,tooltip:g?h?la:ln:void 0,tooltipType:g?nx.Ib.SPECIAL:nx.Ib.TEXT,isDevHandoff:m,recordingKey:e})}var lc=n(157147);function ld(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10.354 5.646a.5.5 0 0 1 0 .708L7.707 9H11.5c3.576 0 6.5 2.924 6.5 6.5v2a.5.5 0 0 1-1 0v-2c0-3.024-2.476-5.5-5.5-5.5H7.707l2.647 2.646a.5.5 0 0 1-.708.708l-3.5-3.5a.5.5 0 0 1 0-.708l3.5-3.5a.5.5 0 0 1 .708 0Z",clipRule:"evenodd"}))}var lu=n(755020),lm=n(341450);function lp({children:e}){return f.createElement("div",{className:"toolbelt_label--toolbeltLabel--mlRIG"},e)}var lf=n(91408),l_=n(201242),lg=n(987918),lh=n(239349),lE=n(341860);function lv(){var e;let t=(0,tR.hA)();return null==(e=new lE.q().get(t??""))?void 0:e.isSection}function ly(e){let t=(0,lh.uQ)(),n=(0,aN.J2)(ei.Ez5.devHandoffState().nodeIds),a=(0,tR.hA)(),l=(0,aN.J2)(ei.Ez5.devHandoffState().focusNodeVisuallySortedChildren),r=a?l:n,i=t?r.indexOf(t):-1,o=i<r.length-1,s=i>0;return{nodeIndex:i,nodesForStepper:r,navigateForwardEnabled:o,navigateBackwardEnabled:s,handleStepForward:()=>{o&&e("dev-handoff-focus-next")},handleStepBack:()=>{s&&e("dev-handoff-focus-previous")}}}var lb=n(457630),lC=n(698993),lw=n(860168);let lT="dev_handoff_on_canvas_button--text--gcrgy";var lx=n(18301),lN=n(942723),lS=n(214735);function lk({floating:e=!0}){let t=lL(),{version:n}=(0,h.DP)(),a=(0,aN.J2)(ei.Ez5.devHandoffState().focusMode),l=(0,tR.hA)(),r=lv();return"ui3"===n?null:f.createElement(lO,{floating:e},t?f.createElement(lA,null):(!(a||l)||r)&&f.createElement(lI,null))}function lI(){let{nodeIndex:e,nodesForStepper:t,navigateForwardEnabled:n,navigateBackwardEnabled:a,handleStepForward:l,handleStepBack:r}=ly(f.useCallback(e=>{(0,lC.S)("stepper"),ei.glU.triggerActionInUserEditScope(e,{})},[]));return e<0?null:f.createElement(l_.gA,{navigateForwardEnabled:n,navigateBackwardEnabled:a,shouldShowFrameCounter:!0,frameCount:t.length,currentFrameIndex:e,showPreviousFrame:r,showNextFrame:l,backIcon:lx.A,nextIcon:lN.A})}function lA(){let e=(0,N.R)(e=>e.mirror.appModel.keyboardShortcuts);return f.createElement(a7.GG,{onClick:()=>{ei.glU.triggerActionInUserEditScope("zoom-to-selection",void 0)},className:nb()("dev_handoff_on_canvas_button--button--Kqr9E","dev_handoff_on_canvas_button--recenter--UbfZj"),recordingKey:(0,n_.Pt)("devHandoffNavBar","recenter"),dataTestId:"devHandoffRecenter"},f.createElement(a2.B,{className:"dev_handoff_on_canvas_button--icon--Lkbda",svg:lS.A}),f.createElement("span",{className:lT},(0,eN.tx)("dev_handoff.recenter")),f.createElement("span",{className:nb()(lT,"dev_handoff_on_canvas_button--secondaryText--JwmTf")},(0,tl.c1)(e,"zoom-to-selection")))}function lO(e){let t=(0,lb.ni)();return f.createElement("div",{className:"dev_handoff_on_canvas_button--base--n2Gb3",style:e.floating?{position:"fixed",left:t.x,width:t.width,bottom:(0,lf.jz)(lw.jUW)}:void 0},f.createElement("div",{className:"dev_handoff_on_canvas_button--container--fpCTC text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.children))}function lL(){var e,t;let n=(0,aN.J2)(null==(t=null==(e=ei.Ez5)?void 0:e.devHandoffState())?void 0:t.focusAnimationIsRunning),a=(0,lh.uQ)()??lg.AD,l=(0,ag.LS)(),r=(0,U._I)(),i=(0,eb.eY)(),[o,s]=f.useState(!1);return(0,lb.D6)({subscribeToUpdates_expensive:!0},f.useCallback(e=>{if(!r||e.isPanning||e.isZooming||n)return;let t=i.get(a),o=null==t?void 0:t.absoluteBoundingBox;if(!o||!l){s(!1);return}let c=(0,lb.Yb)(e,{x:o.x,y:o.y,width:o.w,height:o.h});s(function(e,t){let n=0,a=0;if(t.width/e.width>t.height/e.height?(n=t.width,a=e.width):(n=t.height,a=e.height),e.zoomScale<.5&&n/a<.25)return!0;let l=Math.min(t.width,.25*e.width),r=Math.min(t.height,.25*e.height);return t.x+t.width<l||t.x>e.width-l||t.y+t.height<r||t.y>e.height-r}(e,c))},[r,n,i,a,l])),o}function lP({children:e}){return f.createElement("div",{role:"toolbar",className:"secondary_toolbelt--root--YkdV7","data-secondary-toolbelt":!0},f.createElement("div",{className:"secondary_toolbelt--secondaryToolbeltContainer--BkpOx"},e))}function lD({handleAction:e}){let t=lL(),n=(0,_.d4)(e=>e.mirror.appModel.keyboardShortcuts),a=!!(0,tR.hA)(),l=lv(),{nodeIndex:r,nodesForStepper:i,handleStepForward:o,handleStepBack:s}=ly(e);return t||-1!==r&&(!a||l)?f.createElement(lP,null,t&&f.createElement(f.Fragment,null,f.createElement(ng.C,{onMouseDown:()=>{e("zoom-to-selection")},tooltipText:(0,eN.t)("dev_handoff.recenter")},f.createElement(ld,null)),f.createElement(nY,null),f.createElement(lp,null,f.createElement("span",{className:"secondary_toolbelt--secondaryToolbeltLabel--seOut"},(0,eN.tx)("dev_handoff.recenter")),f.createElement("span",{style:{marginLeft:"var(--spacer-1)",color:"var(--color-text-secondary)"}},(0,tl.c1)(n,"zoom-to-selection")))),!t&&-1!==r&&f.createElement(f.Fragment,null,f.createElement(ng.C,{onMouseDown:s,tooltipText:(0,eN.t)("viewer.footer.previous_frame")},f.createElement(lu.C,null)),f.createElement(nY,null),f.createElement(lp,null,(0,eN.tx)("viewer.footer.frame_progress",{currentFrameIndex:r+1,frameCount:i.length})),f.createElement(nY,null),f.createElement(ng.C,{onMouseDown:o,tooltipText:(0,eN.t)("viewer.footer.next_frame")},f.createElement(lm.e,null)))):null}function lR(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.5 8a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm0 1a2.5 2.5 0 1 0-2.45-3H14a8 8 0 0 0-8 8v1.05a2.5 2.5 0 1 0 1 0V14a7 7 0 0 1 7-7h1.05a2.5 2.5 0 0 0 2.45 2Zm-11 10a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",clipRule:"evenodd"}))}function lM(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M13.207 3.293a1 1 0 0 0-1.414 0L9.396 5.689 7.354 3.646a.5.5 0 1 0-.708.708L8.69 6.396 4.207 10.88a3 3 0 0 0 0 4.242l4.672 4.672a3 3 0 0 0 4.242 0l7.586-7.586a1 1 0 0 0 0-1.414l-7.5-7.5Zm-3.81 3.81-4.483 4.483a2 2 0 0 0 0 2.828l4.672 4.672a2 2 0 0 0 2.828 0l6.879-6.879L20 11.5l-.707-.707-6.086-6.086L12.5 4l-.707.707-1.69 1.69 2.75 2.75a1.5 1.5 0 1 1-.707.707l-2.75-2.75ZM19 20a1 1 0 0 0 1-1c0-.27-.15-.694-.47-1.22a8.14 8.14 0 0 0-.53-.758 8.14 8.14 0 0 0-.53.758c-.32.526-.47.95-.47 1.22a1 1 0 0 0 1 1Zm0 1a2 2 0 0 0 2-2c0-1.108-1.09-2.488-1.661-3.134a.448.448 0 0 0-.678 0C18.09 16.512 17 17.892 17 19a2 2 0 0 0 2 2Zm-5-10.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",clipRule:"evenodd"}))}var lF=n(139689);function lB({activeToolId:e,activateTool:t,getShortcutTextForTool:n,closeSecondaryToolbelt:a}){return f.createElement(lP,null,f.createElement(nh,{recordingKey:"toolbarView.toolBend",toolId:ei.NLJ.VECTOR_BEND,icon:f.createElement(lR,null),onActivateTool:t,activeToolId:e,tooltipText:(0,eN.t)("fullscreen_actions.set-tool-bend"),tooltipShortcut:n(ei.NLJ.VECTOR_BEND)}),f.createElement(nh,{recordingKey:"toolbarView.toolPaintBucket",toolId:ei.NLJ.VECTOR_PAINT_BUCKET,icon:f.createElement(lM,null),onActivateTool:t,activeToolId:e,tooltipText:(0,eN.t)("fullscreen_actions.set-tool-paint-bucket"),tooltipShortcut:n(ei.NLJ.VECTOR_PAINT_BUCKET)}),f.createElement(nY,null),f.createElement(ng.C,{onMouseDown:a,tooltipText:(0,eN.t)("fullscreen.toolbar.secondary_toolbar.close"),recordingKey:"toolbarView.toolLeaveVectorEditMode"},f.createElement(lF.A,null)))}let lU="design_toolbelt--toolbeltWrapper--tM2Eq",lH="design_toolbelt--hiddenButtonSpacer--8MJP6";var lG=(e=>(e.SelectTools="SelectTools",e.FrameTools="FrameTools",e.PenTools="PenTools",e.ShapeTools="ShapeTools",e.ToolkitMode="ToolkitMode",e.SitesLayoutMode="SitesLayoutMode",e))(lG||{}),lV=(e=>(e.None="None",e.PenTool="PenTool",e.ImageOrVideoTool="ImageOrVideoTool",e.DevModeInspectTool="DevModeInspectTool",e))(lV||{});let lK=[ei.m1T.PREVIEW,ei.m1T.BRANCHING,ei.m1T.COMPARE_CHANGES,ei.m1T.HISTORY],lW="PROTOTYPE",lz="QUICK_ACTIONS";function lj(e,t){switch(e){case ei.NLJ.SCALE:return"set-tool-scale";case ei.NLJ.HAND:return"set-tool-hand";case ei.NLJ.SELECT:return t?"set-tool-default-dev-handoff":"set-tool-default";case ei.NLJ.SLICE:return"set-tool-slice";case ei.NLJ.SECTION:return"set-tool-section";case ei.NLJ.FRAME:return"set-tool-frame";case ei.NLJ.IMAGE_OR_VIDEO:return"place";case ei.NLJ.SHAPE_STAR:return"set-tool-star";case ei.NLJ.SHAPE_REGULAR_POLYGON:return"set-tool-regular-polygon";case ei.NLJ.SHAPE_ELLIPSE:return"set-tool-ellipse";case ei.NLJ.SHAPE_ARROW:return"set-tool-arrow";case ei.NLJ.SHAPE_LINE:return"set-tool-line";case ei.NLJ.SHAPE_RECTANGLE:return"set-tool-rectangle";case ei.NLJ.SITES_RESPONSIVE_SET:return"set-tool-sites-responsive-set";case ei.NLJ.VECTOR_PENCIL:return"set-tool-pencil";case ei.NLJ.VECTOR_PEN:return"set-tool-pen";case ei.NLJ.TYPE:return"set-tool-type";case ei.NLJ.COMMENTS:return"set-tool-comments";case ei.NLJ.ANNOTATE:return"set-tool-annotate";case ei.NLJ.MEASURE:return"set-tool-measure";case ei.NLJ.VECTOR_BEND:return"set-tool-bend";case ei.NLJ.VECTOR_PAINT_BUCKET:return"set-tool-paint-bucket";case ei.NLJ.MULTISELECT:return"set-tool-multiselect";case ei.NLJ.NONE:case ei.NLJ.DROPPER_COLOR:case ei.NLJ.STACK:case ei.NLJ.STICKY:case ei.NLJ.STAMP:case ei.NLJ.SHAPE_WHITEBOARD_SQUARE:case ei.NLJ.SHAPE_WHITEBOARD_ELLIPSE:case ei.NLJ.SHAPE_WHITEBOARD_DIAMOND:case ei.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP:case ei.NLJ.SHAPE_WHITEBOARD_TRIANGLE_DOWN:case ei.NLJ.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE:case ei.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT:case ei.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT:case ei.NLJ.CONNECTOR_ELBOWED:case ei.NLJ.CONNECTOR_STRAIGHT:case ei.NLJ.CODE_BLOCK:case ei.NLJ.SHAPE_WHITEBOARD_ENG_DATABASE:case ei.NLJ.SHAPE_WHITEBOARD_ENG_QUEUE:case ei.NLJ.SHAPE_WHITEBOARD_ENG_FILE:case ei.NLJ.SHAPE_WHITEBOARD_ENG_FOLDER:case ei.NLJ.ERASER:case ei.NLJ.HIGHLIGHTER:case ei.NLJ.WASHI_TAPE:case ei.NLJ.TABLE:case ei.NLJ.SHAPE_WHITEBOARD_TRAPEZOID:case ei.NLJ.SHAPE_WHITEBOARD_STAR:case ei.NLJ.SHAPE_WHITEBOARD_SHIELD:case ei.NLJ.SHAPE_WHITEBOARD_HEXAGON:case ei.NLJ.SHAPE_WHITEBOARD_PENTAGON:case ei.NLJ.SHAPE_WHITEBOARD_OCTAGON:case ei.NLJ.SHAPE_WHITEBOARD_PLUS:case ei.NLJ.SHAPE_WHITEBOARD_PREDEFINED_PROCESS:case ei.NLJ.SHAPE_WHITEBOARD_MANUAL_INPUT:case ei.NLJ.SHAPE_WHITEBOARD_CHEVRON:case ei.NLJ.SHAPE_WHITEBOARD_DOCUMENT_SINGLE:case ei.NLJ.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE:case ei.NLJ.SHAPE_WHITEBOARD_ARROW_LEFT:case ei.NLJ.SHAPE_WHITEBOARD_ARROW_RIGHT:case ei.NLJ.SHAPE_WHITEBOARD_SUMMING_JUNCTION:case ei.NLJ.SHAPE_WHITEBOARD_OR:case ei.NLJ.SHAPE_WHITEBOARD_SPEECH_BUBBLE:case ei.NLJ.SHAPE_WHITEBOARD_INTERNAL_STORAGE:case ei.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS:case ei.NLJ.SLIDES_POLL:case ei.NLJ.SLIDES_EMBED:case ei.NLJ.SLIDES_FACEPILE:case ei.NLJ.SLIDES_ALIGNMENT_SCALE:case ei.NLJ.SLIDES_YOUTUBE:case ei.NLJ.HAND_SELECT:case ei.NLJ.LASSO:throw Error("Tool not supported yet");default:(0,nm.xb)(e)}}let lJ=(0,e3.bt)(e=>e.dropdownShown),lY=(0,e3.bt)(e=>e.mirror.appModel.currentTool),lX=(0,e3.bt)(e=>e.mirror.appModel.topLevelMode),lq=(0,e3.bt)(e=>e.mirror.appModel.activeCanvasEditModeType),lZ=(0,e3.bt)(ax.kg),lQ={readOnlyOverlayInfoAtom:lJ,activeToolIdAtom:(0,e4.eU)(e=>e(lY),(e,t,n)=>{let a=lj(n,e(lX)===ei.lyf.DEV_HANDOFF);aC.VU.get(a,"toolbar")()}),readOnlyTopLevelModeAtom:lX,readOnlyEditModeTypeAtom:lq},l$=e=>{aC.VU.get(e,"toolbar")()},l0=()=>{let e=(0,_.d4)(e=>e.mirror.appModel.keyboardShortcuts);return t=>(0,tl.c1)(e,t)},l1=e=>{let t=l0();return n=>t(lj(n,e))};function l2(){var e;let t=(0,aw.SD)(ei.NLJ.ANNOTATE);(0,nm.KF)(null!==t,"No icon for tool or action");let{activeToolId:n,activateTool:a,topLevelMode:l,editModeType:r}=nA(lQ),i=(0,eb.aV)(),o=l===ei.lyf.LAYOUT,s=l===ei.lyf.DEV_HANDOFF,c=(0,aA.cJ)(),d=(0,tu.sO)(),u=(0,aN.J2)(null==(e=ei.Ez5)?void 0:e.slidesToolMode()),[m,p]=(0,f.useState)("None"),_=(0,tR.l7)(),g=!!(0,tR.hA)(),h=(0,n6.GS)(),E=(0,L.o3)(L.nt.ui3PrototypeAsATool),y=h&&E&&o,b=f.useRef(null);aJ(b);let{close:C}=(0,az.cq)(),w=f.useCallback(e=>{y?(e===lW?(0,aT.NT)(ei.FAf.PROTOTYPE):(0,aT.NT)(ei.FAf.DESIGN),a(e===lW?ei.NLJ.SELECT:e)):((0,nm.KF)(e!==lW,"activateTool() should not be called with DUMMY_PROTOTYPE_TOOL_ID"),a(e))},[a,y]),T=l1(s),x=(0,v.ZC)(s)!==s;return((0,f.useEffect)(()=>{x&&([ei.NLJ.COMMENTS,ei.NLJ.SELECT].includes(n)||s&&n===ei.NLJ.ANNOTATE||w(ei.NLJ.SELECT),C())},[w,n,C,x,s]),(0,f.useEffect)(()=>{n!==ei.NLJ.VECTOR_BEND&&n!==ei.NLJ.VECTOR_PAINT_BUCKET&&(o&&r===ei.m1T.VECTOR?p("PenTool"):n===ei.NLJ.IMAGE_OR_VIDEO?p("ImageOrVideoTool"):s&&n===ei.NLJ.SELECT?p("DevModeInspectTool"):p("None"))},[n,o,s,r]),i||_)?f.createElement(f.Fragment,null):f.createElement(Y.fu,{name:eQ.e0.EDITOR_TOOLBELT},f.createElement("div",{className:lU,ref:b},f.createElement(nj,null,f.createElement("div",{"data-onboarding-key":ak.aE},f.createElement(l4,{topLevelMode:l,activateTool:w})),d&&u===ei.EMA.DESIGN&&f.createElement(aK,{recordingKey:"slides-tool-mode-toggle"}),!d&&!c&&!g&&f.createElement(f.Fragment,null,f.createElement(nY,null),f.createElement(nJ,{icon:f.createElement(ls,{recordingKey:"toolbarView.switchToDevModeButton",extraPadding:!1}),recordingKey:"toolbarView.switchToDevModeAction",onAction:nf.lQ,tooltipText:"",tooltipShortcut:""}),f.createElement(aS.p,null,!i&&f.createElement(av,null),!i&&f.createElement(ad,null),!i&&f.createElement(aa,null)))),f.createElement(nH,{onActivateTool:w}),"PenTool"===m&&r===ei.m1T.VECTOR&&f.createElement(lB,{activeToolId:n,activateTool:w,getShortcutTextForTool:T,closeSecondaryToolbelt:()=>{p("None"),l$("leave-edit-mode")}}),"DevModeInspectTool"===m&&f.createElement(lD,{handleAction:l$})))}function l5(e){return`ui3_finished_entering_${e}_mode`}function l4(e){let{topLevelMode:t,activateTool:n}=e,a=t===ei.lyf.DEV_HANDOFF,l=a?ei.lyf.LAYOUT:t,r=f.useMemo(()=>[f.createElement(l3,{key:ei.lyf.LAYOUT,topLevelMode:l,activateTool:n,suppressRecordingKeys:a}),f.createElement(l3,{key:ei.lyf.DEV_HANDOFF,topLevelMode:ei.lyf.DEV_HANDOFF,activateTool:n,suppressRecordingKeys:!a})],[n,l,a]),i=f.useCallback(()=>{(0,n2.YQ)({id:l5(a?"dev":"design")})},[a]);return(0,np.h)(()=>{i()}),f.createElement(n1,{rows:r,activeRowIndex:a?1:0,onAnimationCompletion:i})}function l3(e){let{topLevelMode:t,activateTool:n}=e,a=(0,ay.n6)(),l=(0,aw.SD)(ei.NLJ.ANNOTATE);(0,nm.KF)(null!==l,"No icon for tool or action");let{activeToolId:r,dropdownShown:i,openOverlay:o,closeOpenOverlay:s,editModeType:c}=nA(lQ,nP()),d=t===ei.lyf.LAYOUT,u=t===ei.lyf.DEV_HANDOFF,m=(0,aA.cJ)(),p=(0,tu.sO)(),g=d&&!m,h=t===ei.lyf.HISTORY||c===ei.m1T.DEV_HANDOFF_HISTORY,E=lK.includes(c),v=(0,aO.Os)(),y=(0,aI.AL)()&&!v,b=(0,U._I)(),C=(0,S.md)(ab.wg),w=(0,S.md)(lZ),T=(0,S.md)(aj.Bu),x=(0,aN.ut)((0,aT.aY)(),null),N=(0,n6.GS)(),k=(0,L.o3)(L.nt.ui3PrototypeAsATool),I=N&&k&&d,A=(0,aQ.P)(),O=!!I&&x===ei.FAf.PROTOTYPE,P=t=>{if(!e.suppressRecordingKeys)return n_.Pt("toolbarView",t)},D=l1(u),R=l0(),M=(0,_.d4)(e=>e.universalInsertModal.showing);return f.createElement(n0,{editorTheme:u?"dev-handoff":"design"},d&&f.createElement(nF,{overlayId:"SelectTools",recordingKey:P("moveFlyout"),tooltipText:(0,eN.t)("fullscreen.flyout.move_tools"),items:[{type:nk.Tool,toolId:ei.NLJ.SELECT,text:(0,eN.t)("fullscreen_actions.set-tool-default"),shortcutText:D(ei.NLJ.SELECT),icon:f.createElement(tF,null),smallIcon:f.createElement(tB.y,null),recordingKey:"toolDefault"},{type:nk.Tool,toolId:ei.NLJ.HAND,text:(0,eN.t)("fullscreen_actions.set-tool-hand"),shortcutText:D(ei.NLJ.HAND),icon:f.createElement(tU,null),smallIcon:f.createElement(tH.O,null),recordingKey:"toolHand"},{type:nk.Tool,toolId:ei.NLJ.SCALE,text:(0,eN.t)("fullscreen_actions.set-tool-scale"),shortcutText:D(ei.NLJ.SCALE),icon:f.createElement(tG,null),smallIcon:f.createElement(tV.l,null),recordingKey:"toolScale"}],dropdownShown:i,onOpen:o,onClose:s,activeToolId:O?void 0:r,onActivateTool:n}),m&&f.createElement(nh,{toolId:ei.NLJ.SITES_RESPONSIVE_SET,icon:f.createElement(tK,null),onActivateTool:n,activeToolId:r,tooltipText:(0,eN.t)("fullscreen_actions.set-tool-sites-responsive-set"),tooltipShortcut:D(ei.NLJ.SITES_RESPONSIVE_SET),recordingKey:P("toolLayoutSet")}),u&&f.createElement(nh,{toolId:ei.NLJ.SELECT,icon:f.createElement(tF,null),onActivateTool:n,activeToolId:r,tooltipText:(0,eN.t)("fullscreen_actions.set-tool-default-dev-handoff"),tooltipShortcut:D(ei.NLJ.SELECT),recordingKey:P("toolDefault")}),E&&f.createElement(f.Fragment,null,f.createElement(nh,{toolId:ei.NLJ.SELECT,icon:f.createElement(tF,null),onActivateTool:n,activeToolId:r,tooltipText:(0,eN.t)("fullscreen_actions.set-tool-default"),tooltipShortcut:D(ei.NLJ.SELECT)}),f.createElement(nh,{toolId:ei.NLJ.HAND,icon:f.createElement(tU,null),onActivateTool:n,activeToolId:r,tooltipText:(0,eN.t)("fullscreen_actions.set-tool-hand"),tooltipShortcut:D(ei.NLJ.HAND)})),d&&(m||p?f.createElement(nh,{toolId:ei.NLJ.FRAME,tooltipText:(0,eN.t)("fullscreen_actions.set-tool-frame"),tooltipShortcut:D(ei.NLJ.FRAME),icon:f.createElement(tW,null),onActivateTool:n,activeToolId:r}):f.createElement(nF,{overlayId:"FrameTools",recordingKey:P("regionFlyout"),onboardingKey:"frame",tooltipText:(0,eN.t)("fullscreen.flyout.region_tools"),items:[{type:nk.Tool,toolId:ei.NLJ.FRAME,text:(0,eN.t)("fullscreen_actions.set-tool-frame"),shortcutText:D(ei.NLJ.FRAME),icon:f.createElement(tW,null),smallIcon:f.createElement(tz.q,null),recordingKey:"toolFrame"},{type:nk.Tool,toolId:ei.NLJ.SECTION,text:(0,eN.t)("fullscreen_actions.set-tool-section"),shortcutText:D(ei.NLJ.SECTION),icon:f.createElement(tj,null),smallIcon:f.createElement(tJ.c,null),recordingKey:"toolSection"},{type:nk.Tool,toolId:ei.NLJ.SLICE,text:(0,eN.t)("fullscreen_actions.set-tool-slice"),shortcutText:D(ei.NLJ.SLICE),icon:f.createElement(tY,null),smallIcon:f.createElement(tX.h,null),recordingKey:"toolSlice"}],dropdownShown:i,onOpen:o,onClose:s,activeToolId:r,onActivateTool:n})),g&&f.createElement(nF,{overlayId:"ShapeTools",recordingKey:P("shapeFlyout"),tooltipText:(0,eN.t)("fullscreen.flyout.shape_tools"),items:[{type:nk.Tool,toolId:ei.NLJ.SHAPE_RECTANGLE,text:(0,eN.t)("fullscreen_actions.set-tool-rectangle"),shortcutText:D(ei.NLJ.SHAPE_RECTANGLE),icon:f.createElement(tq,null),smallIcon:f.createElement(tZ.y,null),recordingKey:"toolShapeRectangle"},{type:nk.Tool,toolId:ei.NLJ.SHAPE_LINE,text:(0,eN.t)("fullscreen_actions.set-tool-line"),shortcutText:D(ei.NLJ.SHAPE_LINE),icon:f.createElement(tQ,null),smallIcon:f.createElement(t$.h,null),recordingKey:"toolShapeLine"},{type:nk.Tool,toolId:ei.NLJ.SHAPE_ARROW,text:(0,eN.t)("fullscreen_actions.set-tool-arrow"),shortcutText:D(ei.NLJ.SHAPE_ARROW),icon:f.createElement(t0,null),smallIcon:f.createElement(t1.E,null),recordingKey:"toolShapeArrow"},{type:nk.Tool,toolId:ei.NLJ.SHAPE_ELLIPSE,text:(0,eN.t)("fullscreen_actions.set-tool-ellipse"),shortcutText:D(ei.NLJ.SHAPE_ELLIPSE),icon:f.createElement(t2,null),smallIcon:f.createElement(t5.B,null),recordingKey:"toolShapeEllipse"},{type:nk.Tool,toolId:ei.NLJ.SHAPE_REGULAR_POLYGON,text:(0,eN.t)("fullscreen_actions.set-tool-regular-polygon"),icon:f.createElement(t4,null),smallIcon:f.createElement(t3.h,null),recordingKey:"toolShapePolygon"},{type:nk.Tool,toolId:ei.NLJ.SHAPE_STAR,text:(0,eN.t)("fullscreen_actions.set-tool-star"),icon:f.createElement(t6,null),smallIcon:f.createElement(t7.Z,null),recordingKey:"toolShapeStar"},{type:nk.Tool,toolId:ei.NLJ.IMAGE_OR_VIDEO,text:(0,eN.t)("fullscreen_actions.place_image_or_video"),icon:f.createElement(t8.T,null),smallIcon:f.createElement(t9.s,null),shortcutText:D(ei.NLJ.IMAGE_OR_VIDEO),recordingKey:"image-tool"}],dropdownShown:i,onOpen:o,onClose:s,activeToolId:r,onActivateTool:n}),g&&f.createElement(nF,{overlayId:"PenTools",recordingKey:P("penFlyout"),tooltipText:(0,eN.t)("fullscreen.flyout.drawing_tools"),items:[{type:nk.Tool,toolId:ei.NLJ.VECTOR_PEN,text:(0,eN.t)("fullscreen_actions.set-tool-pen"),shortcutText:D(ei.NLJ.VECTOR_PEN),icon:f.createElement(ne,null),smallIcon:f.createElement(nt.k,null),recordingKey:"toolPen"},{type:nk.Tool,toolId:ei.NLJ.VECTOR_PENCIL,text:(0,eN.t)("fullscreen_actions.set-tool-pencil"),shortcutText:D(ei.NLJ.VECTOR_PENCIL),icon:f.createElement(nn,null),smallIcon:f.createElement(na.A,null),recordingKey:"toolPencil"}],dropdownShown:i,onOpen:o,onClose:s,activeToolId:r,onActivateTool:n}),d&&f.createElement(nh,{toolId:ei.NLJ.TYPE,icon:f.createElement(nr,null),onActivateTool:n,activeToolId:r,recordingKey:P("toolType"),tooltipText:(0,eN.t)("fullscreen_actions.set-tool-type"),tooltipShortcut:D(ei.NLJ.TYPE),onboardingKey:"tool-type-onboarding"}),u&&b&&C&&!h&&f.createElement(f.Fragment,null,f.createElement(nh,{toolId:ei.NLJ.MEASURE,icon:f.createElement(ni._,null),onActivateTool:n,activeToolId:r,tooltipText:(0,eN.t)("fullscreen_actions.set-tool-measure"),tooltipShortcut:D(ei.NLJ.MEASURE),recordingKey:P("toolMeasure"),onboardingKey:"tool-measurements-onboarding"}),f.createElement(nh,{toolId:ei.NLJ.ANNOTATE,icon:f.createElement(no,null),onActivateTool:n,activeToolId:r,recordingKey:P("toolAnnotate"),tooltipText:(0,eN.t)("fullscreen_actions.set-tool-annotate"),tooltipShortcut:D(ei.NLJ.ANNOTATE),onboardingKey:"tool-annotations-onboarding"})),!h&&f.createElement(nh,{toolId:ei.NLJ.COMMENTS,icon:a>0?f.createElement(ns,null):f.createElement(nc.f,null),onActivateTool:n,activeToolId:r,recordingKey:P("toolComment"),tooltipText:(0,eN.t)("fullscreen_actions.comment"),tooltipShortcut:D(ei.NLJ.COMMENTS)}),I&&f.createElement(nh,{toolId:lW,icon:f.createElement(nd,null),onActivateTool:n,activeToolId:r===ei.NLJ.SELECT&&O?lW:void 0,tooltipText:(0,eN.t)("fullscreen_actions.prototype")}),y&&d&&f.createElement(nh,{toolId:lz,icon:f.createElement(aZ,null),onActivateTool:()=>l$("toggle-menu"),activeToolId:T?lz:r,tooltipText:(0,eN.t)("qa.extensions.tooltip_actions"),tooltipShortcut:R("toggle-menu"),onboardingKey:ak.Ij}),!p&&!y&&d&&f.createElement(nJ,{icon:f.createElement(nu.e,null),onAction:()=>{d&&aC.VU.get("component-insert","toolbar")()},tooltipText:"Insert",elementId:"toolbelt-action-component-insert",isActive:w,onboardingKey:lc.sY}),p&&d&&!h&&C&&f.createElement("div",{"data-element-target":aW.b},f.createElement(nJ,{icon:f.createElement(nu.e,null),onAction:()=>l$("browse-all-resources-modal"),isActive:M,tooltipText:(0,eN.t)("slides.inserts_menu.assets"),tooltipShortcut:R("browse-all-resources-modal"),recordingKey:"assets-tool"})),E&&!C&&f.createElement(nJ,{icon:f.createElement("div",{"data-onboarding-key":ak.hH},f.createElement(a$.RJ,{viewOnly:!C,variant:"primary"}),f.createElement("div",{className:lH},f.createElement(n5.$,{variant:"primary"},(0,eN.tx)("fullscreen.toolbar.request.request_sent")))),tooltipText:"",onAction:nf.lQ}),u&&A&&f.createElement(nJ,{icon:f.createElement(aQ.T,null),tooltipText:"",onAction:nf.lQ}))}function l6(){let e=!!(0,tR.hA)(),t=(0,tM.UX)(),n=(0,tt.xn)();return f.createElement("div",{className:"positioned_design_toolbelt--root--INYO4",style:{marginBottom:n,marginRight:e?t:0}},f.createElement(l2,null))}var l7=n(394910),l8=n(809511),l9=n(338400),re=n(493323),rt=n(74505);function rn(e){let t=e.mirror.sceneGraph,n=e.mirror.sceneGraphSelection;if(1!==Object.keys(n).length)return null;let a=t.get(Object.keys(n)[0]);return a&&"MEDIA"===a.type?a:null}var ra=n(110727),rl=n(77909);function rr(e,t){let n={};return n.useValue=function(a){if(t&&n[a]&&t(a,n[a])&&delete n[a],!n[a]){let t=(0,rl.v)();e(a).then(e=>t.resolve(e)).catch(e=>t.reject(e)),n[a]={deferred:t,created:Date.now()}}let{deferred:l}=n[a];switch(l.status){case"pending":throw l.promise;case"rejected":throw l.error;case"resolved":return l.result}},n}var ri=n(15859);let ro=rr(rs);async function rs(e){let t=await (0,ra.OF)(()=>rc(e),10,1e3);return await new Promise((n,a)=>{let l=new Image;l.crossOrigin="anonymous",l.addEventListener("load",n),l.addEventListener("error",t=>{a(t.type+" loading the image with hash "+e)}),l.src=t}),t}async function rc(e){let t=(await (0,ri.Mj)([e],await et.Y5.openFilePromise()))[e];if(!t)throw Error("Couldn't resolve image URL from server");return t}var rd=n(998917),ru=n(941670),rm=n(538649),rp=n(978488),rf=n(43604),r_=n(511617),rg=n(157663),rh=n(988652),rE=n(755887),rv=n(30090),ry=n(46481),rb=n(754168);let rC=rr(rw,(p=(e,t)=>Date.now()-t.created>6e4,(e,t)=>!t.deferred.result&&p(e,t)));async function rw(e){return await (0,ra.OF)(()=>rT(e),20,1e3)}async function rT(e){let t=await rx(e);if(!t)throw Error("Couldn't resolve video URL from server");return t}async function rx(e){let t=await et.Y5.openFilePromise();if("figFile"!==t.type)throw Error("Unsupported file");try{let n=await rb.S.getVideosDownload({fileKey:t.fileKey,hexHash:e});if(200!==n.status||n.data.error)throw Error("api error while resolving video");return n.data.meta.signed_url}catch(t){throw console.warn(`Couldn't download video with hash ${e}`),t}}let rN=1/15;var rS=n(70337);let rk="rich_media_overlay--loadingFallback---qUKd",rI="rich_media_overlay--videoControlButton--syGqZ",rA="rich_media_overlay--videoButtonIcon--13t7r",rO="rich_media_overlay--videoButtonMaximizedScale--8Hkj5",rL="rich_media_overlay--croppedClipPath--BeUH-";var rP=n(68710),rD=n(10448),rR=n(114843),rM=n(552601);let rF={BUTTON_SHAPE_FILL:"#FFFFFF",BUTTON_BG_FILL:"#000000",BUTTON_STROKE_OPACITY:.2,BUTTON_BG_FILL_OPACITY:.7,BUTTON_BG_FILL_HOVER_OPACITY:.9};function rB(e){if(null==e||Number.isNaN(e))return"";let{seconds:t,minutes:n}=(0,nX._d)(e);return`${n}:${String(t).padStart(2,"0")}`}function rU(e,t){e&&(t?(e.play(),C.Ay.safari&&(e.currentTime=.1)):rG(e)?e.pause():(C.Ay.safari&&e.currentTime>.1&&(e.currentTime-=.1),e.play()))}let rH=(0,f.memo)(({mediaHash:e,isMaximized:t,setIsMaximized:n})=>{let a=rC.useValue(e),l=(0,a6.am)(),r=(0,f.useRef)(null),[i,o,s,c]=function(){let[e,t]=f.useState(!1),n=f.useRef(null),a=()=>t(!0),l=()=>t(!1);return f.useEffect(()=>{let e=n.current;if(e)return e.addEventListener("mousemove",a),e.addEventListener("mouseleave",l),()=>{e.removeEventListener("mousemove",a),e.removeEventListener("mouseleave",l)}},[n.current]),[f.useCallback(e=>{if(null!==n.current){let e=n.current;e&&(e.removeEventListener("mousemove",a),e.removeEventListener("mouseleave",l))}if(n.current=e,null!==n.current){let e=n.current;e&&(e.addEventListener("mousemove",a),e.addEventListener("mouseleave",l))}},[]),n,e,t]}(),d=f.useRef(null),u=f.useRef(!1),m=(0,N.R)(e=>{var t;return null==(t=e.openFile)?void 0:t.key})||"",p=(0,S.md)(rS.v),[_,g]=(0,f.useState)(!1);return f.useEffect(()=>{p&&l("figjam_video_started_playing",{mediaHash:e})},[l,e,p]),f.useEffect(()=>{u.current||(u.current=!0,async function(){window.VIDEOJS_NO_DYNAMIC_STYLE=!0;let t=await (0,rv.Fe)();if(d.current)return;let n=o.current;null!==n&&(n.style.height="100%",n.style.width="100%",n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",d.current=t.videoJs(n,{muted:!1,controls:!1,controlBar:!1,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,textTrackSettings:!1,textTrackDisplay:!1,nativeTextTracks:!1},async()=>{try{let t=`/api/files/${m}/videos/${e}/manifest`;await (0,rv.uz)(t,!0,d.current)}catch{d.current&&(rg.k.warn("Reverting to fallback video source"),d.current.src({type:"video/mp4",src:a}))}}))}())},[m,e,o,a]),(0,f.useEffect)(()=>{l("figjam_video_selected",{mediaHash:e})},[l,e]),f.createElement("div",{className:"rich_media_overlay--videoContainer--oC3oc",ref:r},f.createElement("div",{className:nb()("rich_media_overlay--clippedVideo--JljnC",t?"rich_media_overlay--noClipPath--ZooJK":rL)},f.createElement("video",{ref:i,crossOrigin:"anonymous",autoPlay:p&&!C.Ay.safari,className:nb()("rich_media_overlay--video--O6uP2",t&&nz.s4,t&&"rich_media_overlay--maximizedVideoBg--FUhbn"),onMouseUp:function(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()},controls:C.Ay.isIpad&&t,onClick:function(){t&&rU(o.current,_)}})),f.createElement(rV,{videoRef:o,videoContainerRef:r,isMaximized:t,setIsMaximized:n,isVideoHovered:s,setIsVideoHovered:c,didAutoplayOnSelection:p,mediaHash:e,hasEnded:_,setHasEnded:g}))});function rG(e){return!!e&&!e.ended&&!e.paused&&e.currentTime>0&&e.readyState>2}function rV({videoRef:e,isMaximized:t,setIsMaximized:n,isVideoHovered:a,videoContainerRef:l,setIsVideoHovered:r,didAutoplayOnSelection:i,mediaHash:o,hasEnded:s,setHasEnded:c}){var d,u,m;let[p,_]=(0,f.useState)(0),g=(0,f.useRef)(!1),h=(0,f.useRef)(i),[E,v]=(0,f.useState)(null),[y,b]=(0,f.useState)(!1),[w,T]=(0,f.useState)(!1),x=(0,a6.am)(),[k,I]=(0,rh.M)(),[A,O]=(0,rh.M)(),L=function(){let[e,t]=(0,f.useState)(!0),n=(0,N.R)(rn),a=(0,lb.qc)((0,lb._X)({subscribeToUpdates_expensive:!1}));return(0,f.useEffect)(()=>{let e=0,l=null==n?void 0:n.size;l&&(e=l.x*l.y),t(e/(a.height*a.width)<rN)},[null==n?void 0:n.size,a.height,a.width]),e}(),P=function(){let[e,t]=(0,f.useState)(!0),n=(0,N.R)(rn),a=(0,lb._X)({subscribeToUpdates_expensive:!1}),l=null==n?void 0:n.size;return(0,f.useEffect)(()=>{l&&t(l.x*a.zoomScale<96||l.y*a.zoomScale<96)},[l,a.zoomScale]),e}(),D=(0,f.useRef)(!1),[R,M]=(0,S.fp)(rS.H),{isVideoNodeHovered:F,pointerDownOnVideo:B}=R,U=(0,f.useRef)(!1),H=t&&(a||O),G=E||(null==(d=e.current)?void 0:d.currentTime),V=null==(u=e.current)?void 0:u.duration,K=rG(e.current),W=(0,f.useRef)(void 0),z=(0,f.useRef)(void 0);(0,f.useEffect)(()=>{let e=(C.Ay.isIpad?B:F)||I||H||!K||s||D.current;T(e),clearTimeout(null==W?void 0:W.current),e&&(W.current=setTimeout(()=>{s||!K||I||D.current||(T(!1),r(!1),M({isVideoNodeHovered:!1,pointerDownOnVideo:!1}))},3e3))},[s,H,K,F,I,r,M,B]);let j=(0,f.useCallback)(()=>{_(e=>e+1)},[]);(0,f.useEffect)(()=>{if(!e.current||!l.current)return;function a(){j()}function r(){D.current=!1}function i(){D.current=!1,c(!1)}function o(){c(!1),j()}function s(){D.current=!0}function d(){n(!t)}function u(){y||c(!0),j()}let m=e.current,p=l.current;return m.addEventListener("playing",o),m.addEventListener("canplay",a),m.addEventListener("ended",u),m.addEventListener("timeupdate",a),m.addEventListener("seeking",s),m.addEventListener("seeked",i),m.addEventListener("stalled",r),p.addEventListener(r_.R7.fullscreenChangeEventName,d),()=>{null==m||m.removeEventListener("playing",o),null==m||m.removeEventListener("canplay",a),null==m||m.removeEventListener("ended",u),null==m||m.removeEventListener("timeupdate",a),null==m||m.removeEventListener("seeking",s),null==m||m.removeEventListener("seeked",i),null==m||m.removeEventListener("stalled",r),null==p||p.removeEventListener(r_.R7.fullscreenChangeEventName,d)}},[t,y,j,c,n,l,e]);let J=(0,f.useCallback)(()=>{e.current&&(!1===h.current&&(h.current=!0,x("figjam_video_started_playing",{mediaHash:o})),rU(e.current,s),j())},[s,o,j,x,e]),Y=(0,f.useCallback)(()=>{e.current&&(g.current=rG(e.current)||s,e.current.pause())},[s,e]),X=(0,f.useCallback)(()=>{e.current&&(g.current&&e.current.play(),z.current&&(e.current.currentTime=z.current),v(null),z.current=void 0)},[e]),q=(0,f.useCallback)(t=>{if(e.current){if(D.current){z.current=t;return}e.current.currentTime=t}},[e]),Z=f.createElement(rJ,{togglePlay:J,hasEnded:s,isPlaying:K,shouldShowVideoControls:w,isMaximized:t});return e.current&&!(2>((null==(m=e.current)?void 0:m.readyState)||0))||U.current?(U.current=!0,C.Ay.isIpad&&t)?null:L?w&&!P?Z:null:f.createElement(f.Fragment,null,E?null:Z,f.createElement("div",{className:nb()(nz.Uu,"rich_media_overlay--videoControls--Zyzyj",!w&&"rich_media_overlay--videoControlsHidden--BM1Cp"),ref:A},f.createElement("div",{className:"rich_media_overlay--videoTime--nsc6o"},rB(G)," / ",rB(V)),f.createElement(rj,{currentTime:G||0,totalTime:V||0,onScrubStart:Y,onScrub:v,onScrubEnd:X,onVideoPositionUpdated:q,hasEnded:s,isScrubbing:y,setIsScrubbing:b}),f.createElement("div",{className:"rich_media_overlay--videoRightControls--N0YPD"},f.createElement(rK,{isMaximized:t,toggleFullscreen:function(){if(t||document.fullscreenElement)r_.R7.exitFullscreenFunc();else if(C.Ay.isIpad){let t=e.current;t&&t.webkitEnterFullscreen&&t.webkitEnterFullscreen()}else{let e=l.current;e&&r_.R7.requestFullscreenFunc.call(e)}}}),f.createElement(rW,{rerender:j,videoRef:e,volumeHoverRef:k})))):f.createElement("div",{className:nb()(rk,rL,"rich_media_overlay--videoLoadingState--bxjOn")},f.createElement(re.kt,{size:"large"}))}function rK({isMaximized:e,toggleFullscreen:t}){let n=e?f.createElement(ru.p,{className:rA}):f.createElement(rm.O,{className:rA});return f.createElement("div",null,f.createElement(rd.E,{as:"button",onClick:t,className:rI,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":e?(0,eN.t)("whiteboard.video.minimize_tooltip"):(0,eN.t)("whiteboard.video.fullscreen_tooltip")},f.createElement("span",{"aria-hidden":!0},f.createElement(ry.U,{svg:e?rM.A:rR.A},n))))}function rW({rerender:e,videoRef:t,volumeHoverRef:n}){var a;let[l,r]=(0,f.useState)(!1),i=(0,f.useRef)(1),[o,s]=(0,f.useState)((null==(a=t.current)?void 0:a.volume)||1),c=0===o,d=l&&!C.Ay.isIpad,u=(0,f.useCallback)(()=>{t.current&&(t.current.muted?(t.current.muted=!1,t.current.volume=i.current,s(i.current)):(t.current.volume>0&&(i.current=t.current.volume),t.current.muted=!0,s(0)),e())},[e,t]),m=c?f.createElement(rp.P,{className:rA}):f.createElement(rf.L,{className:rA});return f.createElement("div",{ref:n},f.createElement(rd.E,{as:"button",onClick:u,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),className:nb()(rI,"rich_media_overlay--lastVideoControl--pU-xF",d&&"rich_media_overlay--selectedVolumeControlButton--IR-FO"),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":c?(0,eN.t)("whiteboard.video.unmute_tooltip"):(0,eN.t)("whiteboard.video.mute_tooltip")},f.createElement("span",{"aria-hidden":!0},f.createElement(ry.U,{svg:c?rD.A:rP.A},m))),d?f.createElement(rz,{volume:o,handleChange:e=>{let n=e.target.valueAsNumber;t.current&&(t.current.volume=n,t.current.muted=0===n),s(n)},setIsHovered:r}):null)}function rz({handleChange:e,setIsHovered:t,volume:n}){let a=100*n,l=(0,f.useRef)(null);return f.createElement("div",{onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),className:"rich_media_overlay--volumeContainer--Wb1Hq"},f.createElement("div",{className:"rich_media_overlay--volumeBox--qpdbu"},f.createElement("input",{className:nb()("rich_media_overlay--volumeSliderInput--W1-jD",nz.Dm,nz.Uu),style:{background:`linear-gradient(to right,var(--active-slider-color) 0%,var(--active-slider-color) ${a}%,var(--inactive-slider-color) ${a}%,var(--inactive-slider-color) 100%)`},type:"range",min:0,max:1,step:.02,value:n,onChange:e,onKeyDown:function(e){(null==e?void 0:e.key)==="Escape"&&t(!1)},onMouseUp:function(){l.current instanceof HTMLInputElement&&l.current.blur()},ref:l})))}function rj({currentTime:e,totalTime:t,hasEnded:n,onVideoPositionUpdated:a,onScrubStart:l,onScrub:r,onScrubEnd:i,isScrubbing:o,setIsScrubbing:s}){let[c,d]=(0,f.useState)(!1),u=(0,f.useRef)(null),m=(0,f.useRef)(null);(0,f.useEffect)(()=>{if(o&&m.current)return document.addEventListener("pointermove",e),document.addEventListener("pointerup",n),()=>{document.removeEventListener("pointermove",e),document.removeEventListener("pointerup",n)};function e(e){if(!m.current)return;let n=e.clientX,{minX:l,maxX:i}=m.current,o=(0,rE.qE)(0,(n-l)/(i-l)*t,t);m.current.newTime=o,r(o),a(m.current.newTime)}function n(){m.current&&(a(m.current.newTime),s(!1),i(),m.current=null,document.activeElement instanceof HTMLElement&&document.activeElement.blur())}},[o,r,i,a,s,t]);let p=Math.min(e/t*100,100),_=p>0?8:0;return C.Ay.safari&&n&&(p=100),f.createElement("div",{className:"rich_media_overlay--videoTimeScrubberContainer--PnJdg",onPointerEnter:()=>d(!0),onPointerLeave:()=>d(!1)},f.createElement("div",{role:"progressbar",tabIndex:0,className:"rich_media_overlay--videoTimeScrubber--9PES-",onPointerDown:e=>{if(!u.current)return;e.stopPropagation(),s(!0),l();let n=u.current.getBoundingClientRect(),r=n.x,i=n.x+n.width,o=e.clientX,c=(0,rE.qE)(0,(o-r)/(i-r)*t,t);a(c),m.current={minX:r,maxX:i,originX:e.clientX,newTime:c}}},f.createElement("div",{className:"rich_media_overlay--videoTimeScrubberBackground--6Aulh",ref:u}),f.createElement("div",{className:"rich_media_overlay--videoTimeScrubberProgress--73GkN",style:{width:`${p}%`}}),(c||o)&&f.createElement("div",{className:"rich_media_overlay--videoTimeScrubberNub--9iFdo",style:{left:`calc(${p}% - ${_}px)`},onPointerDown:t=>{if(!u.current)return;t.stopPropagation(),s(!0),l();let n=u.current.getBoundingClientRect();m.current={minX:n.x,maxX:n.x+n.width,originX:t.clientX,newTime:e}},role:"button",tabIndex:0})))}function rJ({shouldShowVideoControls:e,togglePlay:t,hasEnded:n,isPlaying:a,isMaximized:l}){let[r,i]=(0,rh.M)(),o=i?rF.BUTTON_BG_FILL_HOVER_OPACITY:rF.BUTTON_BG_FILL_OPACITY;return f.createElement("button",{ref:r,className:nb()(nz.Uu,"rich_media_overlay--videoButton--WB1tD",!e&&"rich_media_overlay--videoButtonHidden--7x6yl"),onPointerDown:function(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),t()}},f.createElement(n?rY:a?rq:rX,{fillOpacityForBackground:o,isMaximized:l}))}function rY({fillOpacityForBackground:e,isMaximized:t}){return f.createElement("svg",{className:nb()(t&&rO),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("path",{d:"M48 24C48 37.2548 37.2548 48 24 48C10.7452 48 0 37.2548 0 24C0 10.7452 10.7452 0 24 0C37.2548 0 48 10.7452 48 24Z",fill:rF.BUTTON_BG_FILL,fillOpacity:e}),f.createElement("path",{d:"M34 24C34 18.4772 29.7175 14 24.4348 14C20.5763 14 17.2515 16.3884 15.7391 19.8282V14H14V22.1818H21.8261V20.3636H17.4222C18.7028 17.6696 21.362 15.8182 24.4348 15.8182C28.757 15.8182 32.2609 19.4813 32.2609 24C32.2609 28.5187 28.757 32.1818 24.4348 32.1818C21.362 32.1818 18.7028 30.3304 17.4222 27.6364H15.5216C16.9131 31.3612 20.3792 34 24.4348 34C29.7175 34 34 29.5228 34 24Z",fill:rF.BUTTON_SHAPE_FILL}),f.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:rF.BUTTON_BG_FILL,strokeOpacity:rF.BUTTON_STROKE_OPACITY}))}function rX({fillOpacityForBackground:e,isMaximized:t}){return f.createElement("svg",{className:nb()(t&&rO),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{clipPath:"url(#clip0_403_4259)"},f.createElement("rect",{width:"48",height:"48",rx:"24",fill:rF.BUTTON_BG_FILL,fillOpacity:e}),f.createElement("path",{d:"M19 34V14L35 24L19 34Z",fill:rF.BUTTON_SHAPE_FILL})),f.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:rF.BUTTON_BG_FILL,strokeOpacity:rF.BUTTON_STROKE_OPACITY}),f.createElement("defs",null,f.createElement("clipPath",{id:"clip0_403_4259"},f.createElement("rect",{width:"48",height:"48",rx:"24",fill:rF.BUTTON_BG_FILL}))))}function rq({fillOpacityForBackground:e,isMaximized:t}){return f.createElement("svg",{className:nb()(t&&rO),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{clipPath:"url(#clip0_1_16)"},f.createElement("rect",{width:"48",height:"48",rx:"24",fill:rF.BUTTON_BG_FILL,fillOpacity:e}),f.createElement("path",{d:"M15 15H21V33H15V15Z",fill:rF.BUTTON_SHAPE_FILL}),f.createElement("path",{d:"M27 15H33V33H27V15Z",fill:rF.BUTTON_SHAPE_FILL})),f.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:rF.BUTTON_BG_FILL,strokeOpacity:rF.BUTTON_STROKE_OPACITY}),f.createElement("defs",null,f.createElement("clipPath",{id:"clip0_1_16"},f.createElement("rect",{width:"48",height:"48",rx:"24",fill:rF.BUTTON_BG_FILL}))))}let rZ=f.memo(function(){let e=(0,_.d4)(rn);return e&&e.richMediaInfo&&f.createElement(rQ,{key:e.richMediaInfo.mediaHash,nodeGuid:e.guid,mediaHash:e.richMediaInfo.mediaHash,mediaType:e.richMediaInfo.richMediaType})}),rQ=f.memo(function(e){let{nodeGuid:t,mediaHash:n,mediaType:a}=e,l=f.useRef(null),r=f.useRef(null),i=(0,lb._X)({subscribeToUpdates_expensive:!0}),[o,s]=f.useState(!1);return f.useEffect(()=>{var e;let n=(0,rt.EE)("rich-media",[t],e=>{r.current=e.position,r2(l,i,r,o)});return r.current=(null==(e=n.currentNodePosition[t])?void 0:e.position)||null,r2(l,i,r,o),()=>{(0,rt.lB)("rich-media")}},[t,i,o]),f.createElement(f.Fragment,null,f.createElement("div",{ref:l,className:nb()("rich_media_overlay--richMediaOverlay--G9rnR",{"rich_media_overlay--maximizedMediaPositioner--vewL5":o})},f.createElement(l7.tH,{fallback:f.createElement(r0,{mediaType:a,mediaHash:n}),boundaryKey:"Video"},f.createElement(f.Suspense,{fallback:f.createElement(r$,null)},"ANIMATED_IMAGE"===a&&f.createElement(r1,{mediaHash:n}),"VIDEO"===a&&f.createElement(rH,{mediaHash:n,setIsMaximized:s,isMaximized:o})))))});function r$(){return f.createElement("div",{className:nb()(rk,rL)},f.createElement(re.kt,{size:"large"}))}function r0({mediaHash:e,mediaType:t}){let n=(0,eN.tx)("whiteboard.gif.failed_to_load");return"VIDEO"===t&&(n=(0,eN.tx)("whiteboard.video.failed_to_load"),l8.tHB.isVideoBeingUploaded(e)&&(n=(0,eN.tx)("whiteboard.video.still_uploading"))),f.createElement("div",{className:nb()(rk,rL)},f.createElement("div",{className:"rich_media_overlay--errorText--upGwm text--fontNeg16--JtecD text--_fontBase--QdLsd text--_negText--j9g-L"},n))}function r1({mediaHash:e}){let t=ro.useValue(e),n=(0,a6.am)();return f.useEffect(()=>{n("figjam_gif_started_playing")},[n]),f.createElement("img",{crossOrigin:"anonymous",style:{height:"100%",backgroundColor:"white",width:"100%"},src:t,alt:"",className:rL})}function r2(e,t,n,a){if(!e.current||!t||!n.current)return;let l=e.current;if(a)l.style.position="fixed",l.style.height="auto",l.style.width="auto",l.style.transform="none",l.style.pointerEvents="all";else{let e=n.current,a=(0,lb.Yb)(t,e);l.style.height=`${a.height}px`,l.style.width=`${a.width}px`,l.style.transform=`translate(${a.x+t.x}px, ${a.y+t.y}px) rotate(${e.angle}deg)`,l.style.transformOrigin="top left"}}var r5=n(752553),r4=n(572206),r3=n(941381),r6=n(225266),r7=n(902139),r8=n(231472),r9=n(992303),ie=n(384775);function it(e,t,n,a,l,r){let[i,o]=f.useState(e()),[s,c]=f.useState(!1),[d,u]=f.useState(!1);f.useLayoutEffect(()=>{let t=(0,eu.s)(()=>{n===r8.t.PINNED_AND_DOCKED_LEFT&&u(!0),o(e())},100);return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e,n]);let m=(0,_.wA)(),p=f.useCallback(()=>{m(r7.jy({initialX:a.x,initialY:a.y,pinned:r8.t.PINNED_AND_DOCKED_LEFT})),u(!0),t(a),aC.VU.get("set-tool-default","toolbar")()},[m,a,t,u]);f.useEffect(()=>{n===r8.t.NOT_PINNED&&l&&r&&(m(r7.jy({initialX:l.x,initialY:l.y,pinned:r8.t.NOT_PINNED})),u(!0),t(l))},[m,t,n,l,r]);let g=(0,_.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),h=(0,v.ZC)(g),E=(0,ax.LR)();return f.useEffect(()=>{h&&!g?E():!h&&g&&n===r8.t.PINNED_AND_DOCKED_LEFT&&p()},[E,n,h,p,g]),f.useEffect(()=>{d&&u(!1)},[d]),{bounds:i,showLeftPinBound:s,setShowLeftPinBound:c,shouldSnapToPosition:d,setPinned:p}}var ia=n(760445),il=n(76158),ir=n(721950),ii=n(301280),io=n(297757);function is(){let e=(0,_.d4)(e=>e.universalInsertModal),t=(0,_.d4)(e=>e.mirror.appModel.showUi),{fdPreviewResource:n,initialFdView:o,initialFdResourceTab:s}=e,c=null==n?void 0:n.type,{activeTab:d,setCurrentViewOrTab:u,currentView:m}=function(){let{initialFdResourceTab:e,initialFdView:t}=(0,_.d4)(e=>e.universalInsertModal),[n,a]=f.useState(e||l||il.s.COMPONENT),[o,s]=f.useState(e===il.s.PLUGIN&&t||r||"recents_and_saved"),[c,d]=f.useState(e===il.s.WIDGET&&t||i||"recents_and_saved"),u=f.useCallback(e=>{e===il.s.PLUGIN?r=o:e===il.s.WIDGET&&(i=c)},[o,c]),m=n===il.s.PLUGIN?o:c,p=f.useCallback(({newView:e,newTab:t})=>{let r=t===il.s.PLUGIN?o:t===il.s.WIDGET?c:void 0;e&&r!==e&&(u(n),(t||n)===il.s.PLUGIN?s(e):(t||n)===il.s.WIDGET&&d(e)),t&&n!==t&&(u(n),l=n,a(t))},[n,o,c,u]);return f.useEffect(()=>{p({newView:t,newTab:e})},[e,t]),f.useEffect(()=>{l=n,u(n)},[n,u]),f.useMemo(()=>({activeTab:n,currentView:m,setCurrentViewOrTab:p}),[n,m,p])}(),p="ui3"===(0,h.DP)().version,g=(0,_.wA)(),E=f.useRef(null),[v]=f.useState(o?"":a||"");f.useEffect(()=>{(0,n2.YQ)({id:"figma-inserts-opened"}),(0,n2.YQ)({id:r9.ko})},[]);let y=(0,ie.Au)();f.useEffect(()=>{y&&g(r7.eo())}),f.useEffect(()=>{a=v},[v]),f.useEffect(()=>g(r6.aq()),[g]),(0,r5.IT)((0,r3.se)()),(0,r5.IT)((0,r3.fd)()),f.useEffect(()=>{u({newTab:c||s})},[s,c]);let b=(0,Q.E3)(),[C,w]=f.useState(),T=p?ia.tS:ia.Zv;(0,ax.J$)(e.pinned===r8.t.NOT_PINNED,E,T);let x=(0,ia.CK)(),N=(0,ia.CG)(),{bounds:S,showLeftPinBound:k,setShowLeftPinBound:I,shouldSnapToPosition:A,setPinned:O}=it(ic,w,e.pinned,x,N,e.showing),L=(0,ax.LR)(),P=(0,nT.U)(),D=f.useCallback(e=>{e.stopPropagation(),P&&g(nI.oB())},[g,P]),R=f.useMemo(()=>({activeTab:d,viewResource:e=>{g(r7.IN({fdPreviewResource:e}))},closeResource:()=>{g(r7.IN({fdPreviewResource:void 0}))},closeModal:L,pinModal:O,setCurrentViewOrTab:u,currentView:m}),[d,L,O,g,u,m]),M=f.useCallback(e=>{aC.VU.get("set-tool-default","toolbar")(),g(r7.jy({pinned:r8.t.PINNED})),D(e)},[g,D]),F=f.useCallback(()=>{k&&O()},[k,O]);if(!e.showing)return null;let B={height:"auto",overflow:"hidden"};return(e.pinned!==r8.t.NOT_PINNED||p||(B.borderTopLeftRadius="0px"),b===eq.nT.DevHandoff)?null:f.createElement(Y.fu,{name:"universal-insert"},e.pinned===r8.t.PINNED&&k&&f.createElement("div",{className:ii.kV,style:{left:x.x,top:x.y,width:ia.AN}}),f.createElement(ia.B0.Provider,{value:R},f.createElement(ae.vx,{initialPosition:C||new r4.Mi(e.initialX,e.initialY),initialWidth:ia.AN,bounds:S,onEnterBound:()=>{p||I(!0)},onLeaveBound:()=>{I(!1)},canResetPosition:A,onClose:L,onDragStart:M,onDragEnd:F,minTopMargin:t?void 0:0,onClick:D,ref:E,containerClassName:e.pinned===r8.t.PINNED_AND_DOCKED_LEFT?io.gC:io.jT,frameStyle:B},f.createElement(ir.z,null))))}function ic(){return{x:-ia.AN,y:0,width:2*ia.AN+ia.wR,height:window.innerHeight}}var id=n(891093),iu=n(902938),im=n(327017),ip=n(571232),i_=n(636751),ig=n(866564);let ih=(0,e4.eU)(0),iE=(0,e4.eU)(e=>e(ih)>0);function iv({isVisible:e}){let t=(0,e2.Xr)(ih);(0,f.useLayoutEffect)(()=>{if(e)return t(e=>e+1),()=>t(e=>Math.max(0,e-1))},[e,t])}var iy=n(7959),ib=n(735208),iC=n(842439),iw=n(703248);let iT="voice_widget--modal--xsQ2A",ix="voice_widget--show--O6ORx voice_widget--modal--xsQ2A",iN="voice_widget--icon--wW-wb",iS="voice_widget--iconContainer--CuKNM",ik="voice_widget--muteButtonPosition--J282V",iI="voice_widget--topRow--O1wj-",iA="voice_widget--voiceModalPanel--KD-J1";function iO(e){let{fileKey:t}=e;var{userIdsInCall:n}=(0,ip.W5)(t);let a=n.size,l=(0,eb.aV)(),r=(0,ew.iZ)();f.useEffect(()=>{!C.XN&&(null==r?void 0:r.id)&&!n.has(r.id)&&(0,ig.w$)(a)},[a,null==r?void 0:r.id,n]);let i=!l&&!C.XN;return(iv({isVisible:i}),i)?f.createElement("div",{className:nb()(iT,{[ix]:!0})},f.createElement(iy.Id,{className:iA},f.createElement("div",{className:iI},f.createElement("div",{className:"voice_widget--joinModalCountGroup--zxI6Q"},f.createElement(ib.A.HeadphonesIcon,{className:iw.QH,size:24}),n.size),f.createElement(iC.K,{fileKey:e.fileKey,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("collaboration.voice.join_conversation"),isJoinWidget:!0,"data-onboarding-key":"audio-nux-key"},(0,eN.tx)("collaboration.voice.join"))))):f.createElement(f.Fragment,null)}var iL=n(182550),iP=n(36381),iD=n(27087),iR=n(373205),iM=n(325538),iF=n(977468),iB=n(752019),iU=n(498480),iH=n(507877),iG=n(227795),iV=n(206074);let iK="captions_dialog--showGradient--ZAHRk";var iW=n(727507),iz=n(554653);let ij="DROPDOWN_TYPE_CAPTIONS_DIALOG_TYPE_SIZE";function iJ({caption:e,user:t}){let n=e.userId+"_"+e.timestamp;return f.createElement("div",{className:"captions_dialog--captionRow--pgS-N",key:n},f.createElement("div",null,f.createElement(iF.Ro,{className:"captions_dialog--avatar--ISexR",entity:{...t,id:e.userId},size:24}),f.createElement("div",{className:"captions_dialog--name--SmWv6"},t?t.name:e.userId)),e.text.map((e,t)=>f.createElement("div",{className:"captions_dialog--paragraph--SjDQd",key:n+"_"+t},e.map((e,a)=>f.createElement("div",{className:"captions_dialog--sentence--SJkHn",key:n+"_"+t+"_"+a},`${e} `)))))}let iY=()=>({small:{style:"captions_dialog--smallText--aUeBx",label:(0,eN.t)("collaboration.voice.small")},medium:{style:"captions_dialog--mediumText--ODxEN",label:(0,eN.t)("collaboration.voice.medium")},large:{style:"captions_dialog--largeText---t1d2",label:(0,eN.t)("collaboration.voice.large")},x_large:{style:"captions_dialog--xlargeText--C60DA",label:(0,eN.t)("collaboration.voice.x_large")}}),iX=Date.now();function iq({call:e}){var t;let n=iY(),[a,l]=f.useState([]),[r,i]=f.useState(n.small.style),[o,s]=f.useState(!1),[c,d]=f.useState(!1),[u,m]=f.useState(!1),p=(0,_.d4)(e=>{if(!e.openFile)throw Error("Open file required");return e.openFile}),g=(0,_.d4)(e=>e.voice.activeCall[p.key]),h=(0,_.wA)(),[E,v]=f.useState(null),y=(0,nT.U)(),b=f.useRef(null),C=!!(y&&y.type===ij),w=a.reduce((e,t)=>e.add(t.userId),new Set),T=(0,ip.bF)(w,p.key).reduce((e,t)=>(e[t.userID]=t,e),{});f.useEffect(()=>{let t=e=>{e&&l(e)};return e.audioCaptionStream.subscribe(t),()=>e.audioCaptionStream.unsubscribe(t)}),f.useEffect(()=>{E&&E.scrollHeight-E.scrollTop-E.clientHeight<150&&iX<Date.now()-150&&E.scrollTo({top:E.scrollHeight-E.clientHeight,behavior:"smooth"})}),f.useEffect(()=>{E&&!u&&(E.scrollTop=E.scrollHeight-E.clientHeight)},[E,u]);let x=!u&&g;return f.createElement("div",{className:["captions_dialog--captionsDialog--gOIvh",r].join(" ")},f.createElement("div",{className:["captions_dialog--topDivider--BlM0x captions_dialog--_divider--m8Skg",o?iK:""].join(" ")}),x&&f.createElement("div",{className:"captions_dialog--scrollContainer--WuVOJ",ref:e=>v(e),onScroll:e=>{E&&(d(0!=E.scrollHeight-E.scrollTop-E.clientHeight),s(0!==E.scrollTop))},onWheel:e=>{e.deltaY<0&&(iX=Date.now())}},f.createElement("div",{className:"captions_dialog--scrollContainerInner--db2cV"},a.map(e=>f.createElement(iJ,{key:e.timestamp,caption:e,user:T[e.userId]})))),x&&f.createElement("div",{className:["captions_dialog--bottomDivider--WBbo5 captions_dialog--_divider--m8Skg",c?iK:""].join(" ")}),x&&f.createElement("button",{onClick:()=>E.scrollTo({top:E.scrollHeight-E.clientHeight,behavior:"smooth"}),className:`captions_dialog--scrollToBottomButton--SeU-4 ${c?"captions_dialog--show--LLYog":""}`},(0,eN.tx)("collaboration.voice.new_transcripts")),f.createElement("div",{className:"captions_dialog--header--SA3Wv",onClick:()=>m(!u)},f.createElement(a2.B,{className:x?"captions_dialog--closedCaptionsIconMaximized--N-lwT":"captions_dialog--closedCaptionsIconMinimized--Ou0WE",svg:iW.A}),f.createElement("span",{className:"captions_dialog--label---1DXk"},(0,eN.tx)("collaboration.voice.closed_captions")),f.createElement(iU.Ex,{text:(0,eN.t)("collaboration.voice.beta"),className:"captions_dialog--betaTag--qFyxq",color:iU.zE.BRAND}),f.createElement(iG.K0,{svg:iz.A,ref:b,className:"captions_dialog--typeSizeIcon--Xhxj-",onClick:e=>{e.stopPropagation(),h(iH.gR({type:ij}))},"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("collaboration.voice.text_size")}),b.current&&C&&f.createElement(iV.j,{dispatch:h,items:Object.keys(n).map(e=>({name:e,displayText:n[e].label,className:[n[e].style,"captions_dialog--dropdownTextOptions--ma0Ue"].join(" "),isChecked:n[e].style===r})),showPoint:!0,parentRect:null==(t=b.current)?void 0:t.getBoundingClientRect(),onSelectItem:e=>{e.name&&i(n[e.name].style)},minWidth:96}),f.createElement("div",{style:{clear:"both"}})))}var iZ=n(325655),iQ=n(118786),i$=n(951158),i0=n(247866);let i1=[i_.$E.WARNING_RECV_AUDIO_DECODE_FAILED,i_.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW,i_.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW,i_.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW];function i2(e){let t;if((0,i$.Im)(e.activeWarnings))return null;for(let n of i1)if(e.activeWarnings[n]){t=e.activeWarnings[n];break}return t?f.createElement("div",{className:e.className,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":t,"data-tooltip-show-below":!0,"data-tooltip-timeout-delay":50},f.createElement(a2.B,{className:iN,svg:i0.A})):null}function i5(e){if((0,y.kc)().voice_localization_june_24)switch(e){case i_.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:return(0,eN.t)("collaboration.voice.audio_input_too_low_warning");case i_.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:return(0,eN.t)("collaboration.voice.speaker_volume_too_low_warning");case i_.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case i_.$E.WARNING_RECV_AUDIO_DECODE_FAILED:return(0,eN.t)("collaboration.voice.poor_connection_warning");default:return null}switch(e){case i_.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:return"Mic volume low. Consider switching devices.";case i_.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:return"Speaker or headphone volume low. Consider switching devices.";case i_.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case i_.$E.WARNING_RECV_AUDIO_DECODE_FAILED:return"Connection is poor. Check your internet or leave and rejoin the conversation.";default:return null}}function i4(e){let{callEvent:t,onClick:n,notificationUserId:a}=e.notification,[l,r]=f.useState(null),[i,o]=f.useState(!1),s=f.useRef(),c=f.useRef(t),[d,u]=f.useState(),m=(0,_.d4)(e=>e.multiplayer.allUsers),p=(0,_.d4)(e=>e.voice.voiceUsersById),g=(0,n6.GS)(),h=f.useMemo(()=>{if(a){if(a in p)return p[a].name;let e=m.find(e=>e.userID===a);if(e)return e.name}return"User"},[a,p,m]),E=null==d?void 0:d.href,v=f.useMemo(()=>E?"a":"div",[E]);if(f.useEffect(()=>()=>{(null==s?void 0:s.current)&&clearTimeout(s.current)},[]),f.useEffect(()=>{let e=()=>{o(!1),r(null)};d?(o(!0),r(null),d.persist||r(setTimeout(()=>{e()},2e3))):e()},[d]),f.useEffect(()=>()=>{l&&clearTimeout(l)},[l]),f.useEffect(()=>{switch(c.current=t,t){case i_.$E.CONNECTED:u({msg:(0,eN.t)("collaboration.voice.connected"),type:i_.w.SUCCESS,icon:g?f.createElement(iQ.g,null):void 0});break;case i_.$E.CONNECTED_WITH_MIC_DISABLED:u({msg:(0,eN.t)("collaboration.voice.connected_check_your_microphone_permissions_to_start_chatting"),allowMultiLine:!0,type:i_.w.SUCCESS});break;case i_.$E.CONNECTING:u({msg:(0,eN.t)("collaboration.voice.connecting"),type:i_.w.PENDING,persist:!0});break;case i_.$E.ERROR:u({msg:(0,eN.t)("collaboration.voice.something_went_wrong_try_again"),type:i_.w.ERROR,persist:!0});break;case i_.$E.CALL_INACTIVE:u({msg:(0,eN.t)("collaboration.voice.things_got_quiet_for_awhile_so_we_ended_the_conversation"),type:i_.w.PENDING,persist:!1,allowMultiLine:!0});break;case i_.$E.TOKEN_WILL_EXPIRE:u({msg:(0,eN.t)("collaboration.voice.it_s_been_quiet_for_a_while_so_we_ll_end_the_conversation_in_20_seconds_n_click_to_stay_on"),type:i_.w.MESSAGE,persist:!0,onClick:n,allowMultiLine:!0});break;case i_.$E.TOKEN_EXPIRED:u({msg:(0,eN.t)("collaboration.voice.audio_has_timed_out_click_to_rejoin"),type:i_.w.ERROR,persist:!0,onClick:n});break;case i_.$E.USER_JOINED:u({truncatedPrefix:h,msg:(0,eN.t)("collaboration.voice.joined"),type:i_.w.MESSAGE});break;case i_.$E.USER_LEFT:u({truncatedPrefix:h,msg:(0,eN.t)("collaboration.voice.left"),type:i_.w.MESSAGE});break;case i_.$E.ERROR_MICROPHONE_PERMISSIONS_DENIED:let e=(0,eN.t)("collaboration.voice.enable_mic_access_in_your_browser_to_join");em.eD&&(e=(0,eN.t)("collaboration.voice.enable_mic_access_for_the_figma_app_to_join")),u({msg:e,type:i_.w.ERROR,href:iu.AM.TROUBLESHOOT});break;case i_.$E.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED:u({msg:(0,eN.t)("collaboration.voice.want_to_unmute_click_the_mic"),type:i_.w.PENDING});break;case i_.$E.ERROR_ON_LEAVE:u({msg:(0,eN.t)("collaboration.voice.couldn_t_leave_please_try_again"),type:i_.w.ERROR});break;case i_.$E.SYSTEM_INCOMPATIBLE:u({msg:(0,eN.t)("collaboration.voice.figma_audio_won_t_work_on_your_device_learn_why"),type:i_.w.ERROR,persist:!0,allowMultiLine:!0,href:iu.AM.TROUBLESHOOT});break;case i_.$E.DISCONNECTING:case i_.$E.RECONNECTING:s.current=setTimeout(()=>{c.current===i_.$E.RECONNECTING&&(u({msg:(0,eN.t)("collaboration.voice.attempting_to_reconnect"),type:i_.w.PENDING,persist:!0}),s.current=void 0)},1500);break;case i_.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:case i_.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:case i_.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case i_.$E.WARNING_RECV_AUDIO_DECODE_FAILED:let a=i5(t);if(!a)break;u({msg:a,type:i_.w.WARNING,allowMultiLine:!0})}},[t]),void 0===t)return f.createElement(f.Fragment,null);let y=["expanded"===e.widgetState?"voice_flash_notifications--flashExpandedList--NkNnw voice_flash_notifications--flash--8i3SH":"voice_flash_notifications--flash--8i3SH",i?function(){switch(null==d?void 0:d.type){case i_.w.ERROR:return"voice_flash_notifications--flashError--6fLPW";case i_.w.WARNING:return"voice_flash_notifications--flashWarning--tdCit";case i_.w.MESSAGE:return"voice_flash_notifications--flashMessage--lt-k-";case i_.w.SUCCESS:return"voice_flash_notifications--flashSuccess--hmpUM";case i_.w.PENDING:default:return"voice_flash_notifications--flashPending--Hzt7W"}}():"voice_flash_notifications--flashHidden--uYI96"];return f.createElement(iy.Id,{onClick:null==d?void 0:d.onClick,className:y.join(" ")},f.createElement(v,{className:(null==d?void 0:d.allowMultiLine)||g?"voice_flash_notifications--flashNotificationMessageWrap--eXghM voice_flash_notifications--flashNotificationMessageBase--wxFPN":"voice_flash_notifications--flashNotificationMessageEllipsis--eBEYX voice_flash_notifications--flashNotificationMessageBase--wxFPN ellipsis--ellipsis--Tjyfa",target:"_blank",rel:"noopener",href:null==d?void 0:d.href},(null==d?void 0:d.truncatedPrefix)&&f.createElement("span",{className:"voice_flash_notifications--truncatedPrefix---gMQI ellipsis--ellipsis--Tjyfa"},null==d?void 0:d.truncatedPrefix),null==d?void 0:d.icon,null==d?void 0:d.msg))}var i3=n(96328),i6=n(827586),i7=n(70699),i8=n(27947),i9=n(749283);let oe="active_speakers_row--name--LtwVz ellipsis--ellipsis--Tjyfa",ot="active_speakers_row--pos1--88uza active_speakers_row--pos--D59NJ",on="active_speakers_row--fadeOut--2tZhG",oa="active_speakers_row--willFadeIn--fFCX6",ol="active_speakers_row--activeSpeakerRowAvatar--zKOXb",or=(e,t)=>e.userID===t.userID,oi=(e,t)=>{let n=e.sort((e,t)=>e.userID>t.userID?-1:1).map(e=>e.userID),a=t.sort((e,t)=>e.userID>t.userID?-1:1).map(e=>e.userID);if(n.length!==a.length)return!0;for(let e=0;e<n.length;e++)if(n[e]!==a[e])return!0;return!1},oo=(e,t)=>{let n=t.filter(t=>!e.find(e=>or(e,t))),a=e.filter(e=>!t.find(t=>or(e,t))),l=e.map(e=>a.indexOf(e)>-1?e:void 0),r=e.map(e=>-1===a.indexOf(e)?e:n.shift()).filter(e=>!!e);return n.length>0&&r.push(...n),t.length>1&&1===e.length&&(l[1]=e[0]),{fadeOut:l,active:r}},os=(0,_.Ng)((e,t)=>({...t,observingSessionID:e.multiplayer.observingSessionID,presenterSessionID:e.multiplayer.presenterSessionID??null}))(function({user:e,classNames:t,observingSessionID:n,presenterSessionID:a,call:l}){let r;let i=(Array.isArray(t)?[...t,ol]:[t,ol]).join(" "),o=(0,iu.eo)(),s=f.createElement(iF.Ro,{entity:{...e,id:e.userID},className:"active_speakers_row--activeSpeakerRowAvatarWithoutMultiplayer--W-S0A",size:24,key:e.userID}),c=e=>{e.stopPropagation()};return"sessionID"in e&&(r=`active-speaker-row-voice-avatar-session-${e.sessionID}`,s=f.createElement(i8.vQ,{sessionID:null==e?void 0:e.sessionID,observingSessionID:n,presenterSessionID:a??null,nominatedSessionID:null,user:e,showColorIndicators:!0,tooltipProxyId:r}),c=t=>{t.stopPropagation(),t.preventDefault(),o(e)}),f.createElement("div",{className:i},f.createElement("div",{className:"active_speakers_row--avatarObserveClickTarget--T1JH- voice_toolbar--avatarObserveClickTarget--QALFw",onClick:c,"data-tooltip-proxy-element-id":r}),s,f.createElement(i9.i,{userId:e.userID,microphoneStyle:i_.bU.FULL,call:l,volumeIconMutedState:i9.S.MINI,className:"active_speakers_row--voiceIndicatorPositioning--YqGFz"}))});function oc({user:e,classNames:t}){return f.createElement("div",{className:oe+" "+(Array.isArray(t)?t.join(" "):t)},e.name)}let od=["active_speakers_row--pos0--Dc1bB active_speakers_row--pos--D59NJ",ot,"active_speakers_row--pos2--b5pkb active_speakers_row--pos--D59NJ","active_speakers_row--pos3--EAAkN active_speakers_row--pos--D59NJ","active_speakers_row--pos4--R5-5y active_speakers_row--pos--D59NJ","active_speakers_row--pos5--FYPvT active_speakers_row--pos--D59NJ","active_speakers_row--pos6--PTsn8 active_speakers_row--pos--D59NJ","active_speakers_row--pos7--DjtPj active_speakers_row--pos--D59NJ"];class ou extends f.Component{constructor(e){super(e),this.displayString="ActiveSpeakersRow",this.node=null,this.state={active:[],fadeOut:[]}}componentWillMount(){this.setState(oo(this.state.active,this.props.users))}shouldComponentUpdate(e,t){return e===this.props||(oi(this.props.users,e.users)&&this.setState(oo(this.state.active,e.users)),!1)}render(){let e=(e,t)=>`${e.name}-${t}`,t=[],n=im.h.getInstance();if(!n)return null;if(1===this.state.fadeOut.length&&this.state.fadeOut[0]){let a=this.state.fadeOut[0];t.push(f.createElement(os,{call:n,key:e(a,"avatar"),user:a,classNames:[od[0],on]}),f.createElement(oc,{key:e(a,"name"),user:a,classNames:[ot,on,oe]}))}else if(2===this.state.fadeOut.length&&!this.state.fadeOut[0]&&this.state.fadeOut[1]){let n=this.state.fadeOut[1];t.push(f.createElement(oc,{key:e(n,"name"),user:n,classNames:[ot,on,oe]}))}else t.push.apply(t,this.state.fadeOut.map((t,a)=>t&&f.createElement(os,{call:n,key:e(t,"avatar"),user:t,classNames:[od[a],on]})));if(1===this.state.active.length){let a=this.state.active[0];t.push(f.createElement(os,{call:n,key:e(a,"avatar"),user:a,classNames:[od[0],oa]}),f.createElement(oc,{key:e(a,"name"),user:a,classNames:[ot,oa,oe]}))}else t.push.apply(t,this.state.active.map((t,a)=>f.createElement(os,{call:n,key:e(t,"avatar"),user:t,classNames:[od[a],oa]})));return t.sort((e,t)=>null===e.key||null===t.key?0:e.key>t.key?-1:1),setTimeout(()=>{var e;null==(e=this.node)||e.querySelectorAll("."+oa).forEach(e=>e.classList.remove(oa))},10),f.createElement("div",{ref:e=>this.node=e,className:"active_speakers_row--activeSpeakerRow--l5ylB"},t)}}function om(e){let{call:t,usersInCall:n}=e,a=(0,ew.iZ)(),l=(0,iM.mt)(t),r=f.useMemo(()=>{var e;return(null==(e=null==l?void 0:l.filter(e=>e!==(null==a?void 0:a.id)))?void 0:e.slice(0,6).reduce((e,t)=>{let a=n.find(({userID:e})=>e===t);return a?e.concat([a]):e},[]))||[]},[l,n,a]);return f.createElement(ou,{users:r})}var op=n(783423),of=n(560560);function o_(e){let{children:t,headerText:n,collapsedContent:a,theme:l,onToggle:r,collapseStateOverride:i}=e,[o,s]=f.useState(!1),c=i||o;return f.createElement("span",{"data-editor-theme":l},f.createElement(iy.fI,{className:c?"voice_collapsible_dropdown--isCollapsed--SwBvz":""},f.createElement("span",{className:"voice_collapsible_dropdown--dropdownSectionTitle--lpt22",onClick:t=>{t.preventDefault(),t.stopPropagation(),r&&!0!==e.hideToggleOption&&r(!c),s(!c)}},c?a:n,!e.hideToggleOption&&f.createElement(a2.B,{svg:c?op.A:of.A,className:"voice_collapsible_dropdown--voiceDropdownChevronIcon--JgQxE"}))),!c&&t&&f.createElement(f.Fragment,null,t))}var og=n(714786);let oh=(0,_.Ng)(e=>({showWidgetParticipantList:e.voice.showWidgetParticipantList}))(function(e){let{showWidgetParticipantList:t}=e,n=(0,ew.iZ)(),a=(0,_.wA)(),{userIdsInCall:l}=(0,ip.W5)(e.fileKey),r=(0,ip.bF)(l,e.fileKey),i=(0,iu.eo)(),{usersInCall:o,callMetadata:s}=f.useMemo(()=>({usersInCall:r.filter(e=>e.userID!==(null==n?void 0:n.id)),callMetadata:{microphoneStyle:i_.bU.FULL,call:e.call}}),[r,n,e.call]);return f.createElement(f.Fragment,null,f.createElement(i8.sK,null),o.length>0&&f.createElement("div",{className:og.ev},f.createElement(o_,{headerText:`${e.currentUserInCall?"You and ":""}`+(0,i3.td)(o.length,"person","people")+" in conversation",collapseStateOverride:!t,collapsedContent:f.createElement(om,{usersInCall:o,call:e.call}),hideToggleOption:o.length<2,onToggle:e=>a(id.yF(!e))},f.createElement(i6.P,{className:og.YM},o.map(e=>f.createElement(i7.Q,{key:"sessionID"in e?e.sessionID:e.userID,callMetadata:s,user:e,isOverflow:!0,onUserClick:i}))))))});var oE=n(256296),ov=n(912925),oy=n(173919);function ob(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7 7h10a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1ZM5 8a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V8Zm4.5 7a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2Zm4.5-1.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5Zm-3.5-.5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2Zm2.5 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5ZM7.5 13a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1Z",clipRule:"evenodd"}))}var oC=n(44948),ow=n(538697);let oT="device_controls--pointingDropdown--hSJ1h",ox="device_controls--containerWithPadding--IlJeH",oN="device_controls--deviceControlRow--kSC19",oS="device_controls--controlLabel--Yp1lV",ok="device_controls--iconContainer--TuXUt",oI="device_controls--dropdownContainer--DfMXW",oA="device_controls--dropdownInput--w72f-",oO="device_controls--dropdownChevron--UBe58",oL="device_controls--divider--Z8rM-";var oP=n(909345);let oD="MICROPHONE_CONTROL_DROPDOWN",oR="PLAYBACK_DEVICE_CONTROL_DROPDOWN",oM=(0,lf.jz)(lw.aHA);function oF(e,t,n,a,l,r,i){let o=(0,_.wA)(),[s,c]=(0,f.useState)(null),[d,u]=(0,f.useState)([]),m=(0,_.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===a}),p=(0,oC.wm)(()=>d.map(e=>e.deviceId),[d]),g=(0,f.useCallback)(async()=>{try{let e=await t(),n=new Set(p);(p.length!==e.length||e.some(e=>!(e.deviceId in n)))&&u(e)}catch{i||o(eS.F.enqueue({message:(0,eN.t)("collaboration.voice.error_fetching_devices"),error:!0,type:"voice-device-error"}))}},[p,o,t,i]),h=(0,f.useCallback)(async()=>{try{if(r&&!C.Ay.chrome)return;let t=await e();t.deviceId!==(null==s?void 0:s.deviceId)&&c(t)}catch{}},[r,e,s]),E=(0,f.useCallback)(async e=>{e.deviceId!==(null==s?void 0:s.deviceId)&&c(e);try{await n(e)}catch{o(eS.F.enqueue({message:(0,eN.t)("collaboration.voice.error_selecting_device"),error:!0,type:"voice-device-error"})),await h()}},[h,n,o,s]);return(0,f.useEffect)(()=>{(l||m)&&g()},[l,m,g]),(0,f.useEffect)(()=>{h(),g()},[]),[s,d,E]}function oB(e){var t;let[n,a,l]=oF(e.call.currentMicrophone,e.call.getMicrophones,e.call.setMicrophone,oD,e.isOpen,!1,e.microphonePermissionDenied),[r,i,o]=oF(e.call.currentPlaybackDevice,e.call.getPlaybackDevices,e.call.setPlaybackDevice,oD,e.isOpen,!0,e.microphonePermissionDenied),s=null==(t=e.targetRef.current)?void 0:t.getBoundingClientRect();return e.isOpen?f.createElement(oU,{targetRect:s,currentMicrophone:n,microphoneDevices:a,setMicrophone:l,currentPlaybackDevice:r,playbackDevices:i,setPlaybackDevice:o}):null}function oU(e){let{targetRect:t,currentMicrophone:n,microphoneDevices:a,setMicrophone:l,currentPlaybackDevice:r,playbackDevices:i,setPlaybackDevice:o}=e,s=(0,_.wA)(),c=(0,n6.GS)(),[d,u]=(0,f.useState)({type:""}),m=()=>{u({type:""})},p={format:e=>(null==e?void 0:e.label)||"",isEqual:(e,t)=>e.deviceId===t.deviceId},g=f.createElement(ow.l6,{className:oI,inputClassName:oA,chevronClassName:oO,id:oD,svg:c?oP.A:void 0,ui3Icon:c?f.createElement(oy.P,null):void 0,property:n||{deviceId:"not_found",label:(0,eN.t)("collaboration.voice.microphone_not_found"),groupId:"not_found",kind:"audioinput",toJSON:()=>null},dispatch:s,dropdownShown:d,onChange:e=>{l(e)},formatter:p,neverConstrain:!0,onHideDropdownOverride:m,onShowDropdownOverride:()=>u({type:oD})},a.map(e=>f.createElement(ow.c$,{key:e.deviceId,value:e},e.label))),h=f.createElement(ow.l6,{className:oI,inputClassName:oA,chevronClassName:oO,id:oR,property:r||{deviceId:"not_found",label:(0,eN.t)("collaboration.voice.playback_device_not_found"),groupId:"not_found",kind:"audiooutput",toJSON:()=>null},svg:c?oP.A:void 0,ui3Icon:c?f.createElement(rf.L,null):void 0,dispatch:s,dropdownShown:d,onChange:e=>{o(e)},formatter:p,neverConstrain:!0,onHideDropdownOverride:m,onShowDropdownOverride:()=>u({type:oR})},i.map(e=>f.createElement(ow.c$,{key:e.deviceId,value:e},e.label))),E=f.createElement(f.Fragment,null,f.createElement("div",{className:oL}),!(0,l9.WO)()&&f.createElement(oG,null),(0,l9.WO)()&&f.createElement(oH,null));return c?f.createElement(nN.Cf,{className:oT,targetRect:t,minWidth:oM,propagateCloseClick:!0,lean:"left",leanPadding:52},f.createElement("div",{onClick:e=>e.stopPropagation()},f.createElement("div",{className:"device_controls--header---h3P-"},(0,eN.t)("collaboration.voice.audio_settings"),f.createElement(tN.Jn,{onClick:()=>s(nI.oB())})),f.createElement("div",{className:"device_controls--container--VR8KK"},f.createElement(iy.fI,{className:oN},f.createElement("span",{className:oS},(0,eN.tx)("collaboration.voice.microphone")),g),C.Ay.chrome&&f.createElement(iy.fI,{className:oN},f.createElement("span",{className:oS},(0,eN.tx)("collaboration.voice.speakers")),h))),(0,l9.X0)()&&E):f.createElement(nN.Cf,{showPoint:!!t,targetRect:t,className:oT,minWidth:280,propagateCloseClick:!0},f.createElement("div",{onClick:e=>e.stopPropagation()},f.createElement("div",{className:ox},f.createElement(iy.fI,{className:oN},f.createElement("span",{className:ok},f.createElement(ib.A.Unmuted,{size:24})),f.createElement("span",{className:oS},(0,eN.tx)("collaboration.voice.microphone"))),f.createElement(iy.fI,{className:oN},g)),C.Ay.chrome&&f.createElement(f.Fragment,null,f.createElement("div",{className:oL}),f.createElement("div",{className:ox},f.createElement(iy.fI,{className:oN},f.createElement("span",{className:ok},f.createElement(a2.B,{svg:oP.A})),f.createElement("span",{className:oS},(0,eN.tx)("collaboration.voice.speakers"))),f.createElement(iy.fI,{className:oN},h))),(0,l9.X0)()&&E))}function oH(){let e=(0,_.d4)(e=>e.voice.captionsInstallProgress),t=(0,_.d4)(e=>e.voice.showCaptions),n=(0,_.wA)(),a=f.useId(),l=f.createElement(ry.U,{className:ok,svg:iW.A},f.createElement(ob,null)),r=(0,eN.tx)("collaboration.voice.closed_captioning"),i=f.createElement(iU.Ex,{text:(0,eN.t)("collaboration.voice.beta"),className:"device_controls--betaTag---VTFI",color:iU.zE.BRAND});return t&&(0,l9.Mw)(e)&&(r=(0,eN.tx)("collaboration.voice.setting_up_closed_captions_install_progress",{installProgress:e}),l=f.createElement(re.kt,{className:"device_controls--captionsLoadingSpinner--ivdGQ"}),i=f.createElement(f.Fragment,null)),f.createElement(oE.J,{className:"device_controls--closedCaptionRow--OdIHt raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm device_controls--deviceControlRowWithHover--KUbHL device_controls--deviceControlRow--kSC19",htmlFor:a},l,f.createElement("span",{className:"device_controls--captionToggleLabel--MjCYn device_controls--controlLabelFullOpacity--1nEqI device_controls--controlLabel--Yp1lV"},r,i),f.createElement(ov.v,{id:a,checked:t,onChange:(e,{event:t})=>{t.stopPropagation(),(0,Z.sx)("voice_captions_toggle",{value:e,source:"voice_widget"}),(0,l9.HJ)(n,e)}}))}function oG(){let e=iu.AM.ACCESSIBILITY;return f.createElement(Y.L0,{target:"_blank",rel:"noopener",href:e,trackingEventName:"Learn more about captioning"},f.createElement(iy.fI,{className:"device_controls--deviceControlRowWithHover--KUbHL device_controls--deviceControlRow--kSC19"},f.createElement(a2.B,{className:ok,svg:iW.A}),f.createElement("span",{className:"device_controls--controlLabelFullOpacity--1nEqI device_controls--controlLabel--Yp1lV"},(0,eN.tx)("collaboration.voice.learn_how_to_turn_on_closed_captioning"))))}var oV=n(654703),oK=n(776836);let oW="DEVICE_CONTROL_DROPDOWN",oz=null,oj=null,oJ=null;function oY(e){let{call:t,fileKey:n,user:a,callEvent:l,notificationUserId:r,callEventCallback:i}=e,o=(0,_.Pj)(),[s,c]=(0,f.useState)(null),[d,u]=(0,f.useState)(),[m,p]=(0,f.useState)(!1),[g,h]=(0,f.useState)(!1),[E,v]=(0,f.useState)(!1),[y,b]=(0,f.useState)(!1),C=(0,_.d4)(e=>e.voice.snapWidget),[w,T]=(0,f.useState)(!1),[x,N]=(0,f.useState)(!1),[S,k]=(0,f.useState)({}),{userIdsInCall:I}=(0,ip.W5)(n);(0,iR.W)();let A=(0,_.d4)(e=>e.voice.showCaptions),O=(0,_.d4)(e=>e.voice.captionsInstallProgress),L=(0,_.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===oW}),P=(0,_.d4)(e=>e.voice.activeCall[n]||!1),D=(0,_.d4)(e=>e.voice.showWidgetParticipantList),R=(0,f.useRef)(null),M=(0,n6.GS)(),F=(0,_.wA)(),B={in:()=>{v(!0)},out:()=>(v(!1),new Promise(e=>setTimeout(e,300)))};f.useEffect(()=>{let e=t.getSystemCompatibility();if(c(e),!e){i(i_.$E.SYSTEM_INCOMPATIBLE);return}return oz||oj||(oj=new Audio("https://static.figma.com/uploads/94721b53827c353075273e54a45ea41850ee0284"),(oz=new Audio("https://static.figma.com/uploads/d917bf9964749c47b46d367572a5dd28a559bd2f")).load(),oj.load(),[oj,oz].forEach(e=>e.volume=.5)),()=>{F(id.Pp(!1))}},[]),f.useEffect(()=>{!P&&s&&G(),window.requestAnimationFrame(()=>B.in())},[s]),f.useEffect(()=>{let e;switch(l){case i_.$E.DISCONNECTED:x&&(null==oj||oj.play(),N(!1)),F(id.oI({fileKey:n}));break;case i_.$E.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT:(function e(n){if(Date.now()>=n){i(i_.$E.TOKEN_WILL_EXPIRE);return}if(t.isLocalUserSpeaking()){K(!1);return}setTimeout(()=>{e(n)},500)})(Date.now()+1e4);break;case i_.$E.CONNECTED:case i_.$E.CONNECTED_WITH_MIC_DISABLED:w&&(setTimeout(()=>null==oz?void 0:oz.play(),400),T(!1)),F(id.rO({fileKey:n}));break;case i_.$E.CALL_INACTIVE:t.leave();break;case i_.$E.TOKEN_WILL_EXPIRE:e=()=>K(!0);break;case i_.$E.TOKEN_EXPIRED:e=G;break;case i_.$E.USER_JOINED:case i_.$E.USER_LEFT:if(oJ)return;break;case i_.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:case i_.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:case i_.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case i_.$E.WARNING_RECV_AUDIO_DECODE_FAILED:let a=i5(l);if(!a)break;k({...S,[l]:a});break;case i_.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER:case i_.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER:case i_.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER:case i_.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER:let o=function(e){switch(e){case i_.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER:return i_.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW;case i_.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER:return i_.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW;case i_.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER:return i_.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW;case i_.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER:return i_.$E.WARNING_RECV_AUDIO_DECODE_FAILED;default:return null}}(l);if(!o)break;delete S[o],k(S)}void 0!==l&&u({callEvent:l,onClick:e,notificationUserId:r})},[l]),f.useEffect(()=>{b(!0)},[C]),f.useEffect(()=>{y&&b(!1)},[y]);let[U,H]=(0,f.useState)(!0),G=async()=>{if(H(!0),!t.getSystemCompatibility()){H(!1),i(i_.$E.SYSTEM_INCOMPATIBLE);return}p(!0),T(!0),oJ=setTimeout(()=>{oJ=null},5e3);try{let{data:e}=await iD.Ay.post(`/api/voice/${n}/auth`),a=await (0,iP.JL)(e.meta.user_encryption_key),l=await (0,iP.We)(a,e.meta.call_user_id);if(l!=l)throw Error(`User ID does not match local user ID.
local: ${l}
remote: ${l}`);await t.join({appId:e.meta.app_id,callId:e.meta.call_id,token:e.meta.auth_token,callUserId:e.meta.call_user_id,userId:l,encryptionKey:e.meta.call_encryption_key,userEncryptionKey:a,setParticipantIdsCallback:V,callEventCallback:i,store:o,fileKey:n})}catch(e){H(!1),i(i_.$E.ERROR)}p(!1),H(!1)};function V(e){F(id.cb(e))}iv({isVisible:E});let K=async e=>{let{data:a}=await iD.Ay.post(`/api/voice/${n}/auth`,{call_user_id:t.uid});await t.renewToken(a.meta.auth_token),e?i(i_.$E.CONNECTED):i(i_.$E.TOKEN_SILENTLY_RENEWED)},W=async()=>{p(!0),N(!0);try{await Promise.all([B.out(),t.leave()]),F(id.oI({fileKey:n})),null==oj||oj.play(),L&&F(nI.oB()),F(id.Pp(!1))}catch{B.in(),i(i_.$E.ERROR_ON_LEAVE)}p(!1)},z=async e=>{(0,$.ds)("voice_user_mute_toggle",n,o.getState(),{source:"voice_widget",muted:!e}),e?await t.unmute():await t.mute()},j=d?d&&I.size>1&&D?"expanded":"collapsed":null;A&&(0,l9.nN)(O)&&((0,$.ds)("voice_caption_download_error",n,o.getState(),{error_code:O,source:"voice_widget"}),(0,l9.HJ)(F,!1),F((0,ty.to)({type:iB.L,data:{dispatch:F,installProgress:O}})));let J=f.createElement("span",{onClick:()=>{(0,$.ds)("voice_widget_minimized_toggle",n,o.getState(),{minimized:!1}),F(id.Pp(!1))},className:["voice_widget--dismissButtonPosition--eEXoz",iS].join(" "),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("collaboration.voice.minimize")},f.createElement(ry.U,{className:iN,svg:oV.A,fallbackSvg:oV.A},f.createElement(lF.A,null))),Y=(0,nW.U1)();return f.createElement("div",{className:nb()("voice_widget--hybridModalWrapper--x9-GE"),ref:Y},f.createElement("div",{className:nb()(iT,{[ix]:E})},f.createElement(iy.Id,{className:iA},f.createElement("div",{className:iI},f.createElement("span",{className:P||g?"voice_widget--currentUser--L7Z6l":"voice_widget--inactiveCurrentUser--yVaZY voice_widget--currentUser--L7Z6l"},f.createElement(oX,{user:a,call:e.call})),f.createElement(i2,{className:"voice_widget--warningIcon--WJPdH",activeWarnings:S}),f.createElement(iZ.Y,{userId:a.id,onMuteButtonClickCallback:z,disabled:t.microphonePermissionDenied,className:[ik,iS].join(" "),disabledClassName:[ik,"voice_widget--muteButtonDisabled--fJzUI"].join(" ")}),f.createElement("span",{className:["voice_widget--controlsButtonPosition--TTGIU",L?"voice_widget--controlsButtonActive--vE2c-":iS].join(" "),onMouseDown:()=>{L?F(nI.oB()):((0,$.ds)("voice_widget_open_settings",n,o.getState()),F(nI.j7({type:oW})))},onClick:e=>e.stopPropagation(),ref:R,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("collaboration.voice.settings")},f.createElement(ry.U,{className:iN,svg:oK.A,fallbackSvg:oK.A},f.createElement(iL.I,null))),f.createElement("button",{className:P?"voice_widget--leaveButton--UUdxH basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd":"voice_widget--joinButton--WvZPr basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:P?W:G,disabled:!s||m,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1)},P||U?(0,eN.tx)("collaboration.voice.leave"):(0,eN.tx)("collaboration.voice.join")),!M&&J),P&&f.createElement(oh,{fileKey:n,currentUserInCall:P,call:t}),(0,l9.WO)()&&A&&f.createElement(iq,{call:t})),!M&&d&&f.createElement(i4,{notification:d,widgetState:j})),M&&d&&f.createElement(i4,{notification:d,widgetState:j}),f.createElement(oB,{isOpen:L,call:t,targetRef:R,microphonePermissionDenied:t.microphonePermissionDenied}))}function oX({user:e,call:t}){return f.createElement(f.Fragment,null,f.createElement(oq,{user:e,call:t}),f.createElement(iF.Ro,{entity:e,size:24,className:"voice_widget--undraggableImage--muN9g"}))}function oq({user:e,call:t}){let n=(0,iM.Wl)(e.id,t);return!n||n.isMuted?null:f.createElement(i9.i,{userId:e.id,microphoneStyle:i_.bU.FULL,className:"voice_widget--avatarVoiceIndicator--zfWwx",volumeIconMutedState:i9.S.NONE,call:t})}function oZ(){let e=(0,_.d4)(e=>e.mirror.appModel.showUi),t=(0,_.d4)(e=>{var t;return(null==(t=e.openFile)?void 0:t.key)||null}),n=(0,ew.iZ)(),a=(0,_.d4)(e=>e.voice.showWidget),l=(0,_.d4)(e=>t&&t in e.voice.activeCall),r=(0,_.d4)(e=>t&&!!e.voice.activeCall[t]),{userIdsInCall:i}=(0,ip.W5)(t,!0),o=(0,ip.bF)(i,t).length,s=(0,iu.qr)(),c=(0,_.wA)(),[d,u]=(0,f.useState)(),[m,p]=(0,f.useState)(),g=(0,n6.GS)(),h=f.useCallback((e,t)=>{i_.GA.has(e)&&c(id.Pp(!0)),t&&p(t),u(e)},[c]),E=(0,_.d4)(e=>e.voice.captionsInstallProgress),v=(0,_.d4)(e=>e.voice.showCaptions);return(f.useEffect(()=>{s&&(s.captionsToggleEnabled=v,s.streamAudioForCaptions(v&&100===E))},[v,E,s]),f.useEffect(()=>{a||(p(void 0),u(void 0))},[a]),f.useEffect(()=>{t&&!l&&o>0?c(id.Zq({fileKey:t})):t&&l&&!r&&0===o&&c(id.a6({fileKey:t}))},[o,t,l,r,c]),f.useEffect(()=>()=>{im.h.leave(),t&&c(id.a6({fileKey:t}))},[c,t]),e&&t&&n)?g&&l&&!a?f.createElement(iO,{fileKey:t}):s&&a?f.createElement(oY,{fileKey:t,user:n,call:s,notificationUserId:m,callEvent:d,callEventCallback:h}):f.createElement(f.Fragment,null):f.createElement(f.Fragment,null)}var oQ=n(109388),o$=n(505525),o0=n.n(o$),o1=n(395096),o2=n(776621),o5=n(304783),o4=n(662531),o3=n(206529),o6=n(170039);function o7(){let e=(0,lb._X)({subscribeToUpdates_expensive:!0}),t=(0,eb.p8)("isReadOnly");return f.createElement(sn,{viewportInfo:e,isReadOnly:t})}function o8(e){return null!=e&&e.y-e.absoluteBounds.y===e.height&&e.height===e.absoluteBounds.height}function o9(e){return null!=e&&e.x-e.absoluteBounds.x===e.width&&e.width===e.absoluteBounds.width}function se(e){return{...e,x:e.x-e.width,angle:0}}function st(e){return{...e,y:e.y-e.height,angle:0}}function sn({viewportInfo:e,shouldRenderMobileFlapps:t,isReadOnly:n}){let a=(0,aN.J2)(ei.Ez5.flappData().nodeIds),[l,r]=(0,f.useState)({}),i=(0,aN.J2)(ei.Ez5.singleSlideView().focusedSlideId);(0,f.useEffect)(()=>{if(!a.length)return;let{currentNodePosition:e}=(0,rt.EE)("Flapps",a,e=>{(0,oQ.flushSync)(()=>r(t=>{let n=lE.q.instance.get(e.nodeId),a=null==n?void 0:n.findContainingSlideOrSelf();if(!n||!e.position||!a)return t;let l=e.position;return o9(e.position)&&(l=se(l)),o8(e.position)&&(l=st(l)),{...t,[e.nodeId]:{guid:e.nodeId,slideId:a,position:l,type:n.interactiveSlideElementType}}}))}),t=Object.entries(e).reduce((e,[t,n])=>{let a=lE.q.instance.get(t),l=null==a?void 0:a.findContainingSlideOrSelf();if(a&&(null==n?void 0:n.position)&&l){let r=null==n?void 0:n.position;o9(n.position)&&(r=se(r)),o8(n.position)&&(r=st(r)),e[t]={guid:t,slideId:l,position:r,type:a.interactiveSlideElementType}}return e},{});return(0,oQ.flushSync)(()=>r(t)),()=>(0,rt.lB)("Flapps")},[a]);let o=ei.Ez5.singleSlideView().isSingleSlideViewFocused(),s=document.getElementById("fullscreen-root");if(!s)return null;let c=s.querySelector(".view.container-view");return c?f.createElement(f.Fragment,null,Object.values(l).map(a=>!o||o&&a.slideId===i?(0,oQ.createPortal)(f.createElement(sa,{key:a.guid,element:a,viewportInfo:e,shouldRenderMobileFlapp:t,isReadOnly:n}),c):null)):null}function sa({element:e,viewportInfo:t,shouldRenderMobileFlapp:n,isReadOnly:a}){let l=(0,aN.J2)(ei.Ez5.flappData().nodeThumbnailEditCount).get(e.guid)??0,[r,i]=(0,f.useState)(null);if(!e||!e.position||!t)return f.createElement(f.Fragment,null);let o=lE.q.instance.get(e.guid);if(!o)return null;let s=(0,lb.Yb)(t,e.position);return f.createElement("div",{title:o.name,style:{position:"fixed",width:e.position.width,height:e.position.height,transform:`translate(${t.x+s.x}px, ${t.y+s.y}px) rotate(${e.position.angle}deg) scale(${t.zoomScale})`,transformOrigin:"top left",pointerEvents:a?"none":"auto"}},f.createElement("div",{className:o6.U,ref:i},f.createElement(sl,{element:e,shouldRenderMobileFlapp:n,isReadOnly:a})),r&&f.createElement(sr,{nodeId:e.guid,editCount:l,flappDomElement:r,isReadOnly:a}))}function sl({element:e,shouldRenderMobileFlapp:t,isReadOnly:n}){if(null===e.type)return null;let{EditorFlapp:a}=t?(0,o3.v)(e.type):(0,o3.Z)(e.type);return f.createElement(a,{nodeId:e.guid,isReadOnly:n})}function sr({nodeId:e,editCount:t,flappDomElement:n,isReadOnly:a}){let[l]=(0,o1.A)(t,500);return f.useEffect(()=>{if(a)return;let t=lE.q.instance.get(e);if(!t)return;let l=t.interactiveSlideElementType;o0().toBlob(n,{bgcolor:"transparent"}).then(e=>null==e?void 0:e.arrayBuffer()).then(t=>t&&0!==t.byteLength?(0,ri.UD)(new Uint8Array(t),"image/png",e+"thumbnail"):Promise.resolve(null)).then(e=>{t&&e&&(0===t.fillPaints.data.length?o4.l7.system("generate-slide-thumbnail",()=>t.insertImageInFillPaint(e)):o4.l7.system("generate-slide-thumbnail",()=>t.setImageInFillPaint(e)))}).catch(function(t){(0,o2.x1)(o5.e.SLIDES,"Failed to generate flapp thumbnail",{error:t,nodeId:e,flappType:l},{reportAsSentryError:!0})})},[a,e,l,n]),f.createElement(f.Fragment,null)}var si=n(147829),so=n(768137),ss=n(210954),sc=n(809840),sd=n(592096),su=n(395701),sm=n(67048),sp=n(477173),sf=n(577023),s_=n(978346),sg=n(161735),sh=n(230646);let sE=(e,t)=>e.filter(e=>t.get(e));var sv=(e=>(e.DismissImmediately="dismiss-immediately",e.NoAutoDismiss="no-auto-dismiss",e.StartAutoDismissTimer="start-auto-dismiss-timer",e.noop="no-op",e))(sv||{}),sy=n(632084);function sb(e){return f.useMemo(()=>{if(!e)return!0;let{data:t}=(0,sy.b7)(new lE.q);return JSON.stringify(t.map(e=>({t:e.t,id:e.id,type:e.type,stamps:e.stamps}))).length>12e3},[e])}function sC(e=2e3){let t=(0,_.d4)(e=>e.mirror.selectionProperties.whiteboardNumSelected),[n,a]=f.useState({hasDebounceSettled:!1,numNodesSelected:void 0}),l=(0,q.A)(e=>{a({hasDebounceSettled:!0,numNodesSelected:e})},e);f.useEffect(()=>{a({hasDebounceSettled:!1,numNodesSelected:t}),l(t??0)},[l,t]);let r=n.numNodesSelected!==t;return n.hasDebounceSettled&&!r}var sw=n(736916),sT=n(62573);function sx({onClose:e,onSummarize:t,onAutoDismiss:n}){let a;let l=sC(500),r=sb(l),{lastSummarizableSelection:i}=function({onAutoDismiss:e,selectionIsStable:t}){let n=(0,sh.cF)(),[a,l]=(0,f.useState)(0),r=(0,_.d4)(e=>e.mirror.sceneGraphSelection),i=f.useMemo(()=>Object.entries(r).filter(([e,t])=>t).map(([e,t])=>e),[r]),[o,s]=(0,f.useState)([]),c=new lE.q,d=0===i.length&&o.length>0&&!sE(o,c).length;return(0,f.useEffect)(()=>{switch(function({currentAutoDismissTimeoutId:e,stickySummarizationEnabledForSelection:t,lastSummarizableSelectionHasBeenDeleted:n,selectionSize:a,canRecomputeAutoDismissAction:l}){if(0===a&&n)return"dismiss-immediately";if(l){if(t)return"no-auto-dismiss";if(!e)return"start-auto-dismiss-timer"}return"no-op"}({currentAutoDismissTimeoutId:a,stickySummarizationEnabledForSelection:n,lastSummarizableSelectionHasBeenDeleted:d,selectionSize:i.length,canRecomputeAutoDismissAction:t})){case sv.DismissImmediately:window.clearTimeout(a),l(0),e();break;case sv.NoAutoDismiss:s(i),window.clearTimeout(a),l(0);break;case sv.StartAutoDismissTimer:l(window.setTimeout(()=>{e()},1e4))}},[i.length,i,n,d,a,t,e]),{lastSummarizableSelection:o}}({onAutoDismiss:n,selectionIsStable:l});(0,f.useEffect)(()=>{S.zl.set(sw.EH,e=>e+1),S.zl.set(sw.ji,()=>new Date().toISOString())},[]);let{summarizeCanvasSelection:o}=(0,sp.ss)(ei.cfv.ABOVE,!1,"DISCOVERY_NUDGE"),s=(0,sg.Cb)(),c=(0,e2.Xr)(sf.v),d=!!(0,y.kc)().figjam_summary_nudge_too_many_tokens&&l&&r;d&&(a=(0,eN.t)("whiteboard.ai_summary.nudge.too_many_tokens"));let u=(0,f.useRef)(null),m=(0,lb.ni)(),p=(0,sd.FQ)(),g=(0,n6.GS)();return(0,f.useLayoutEffect)(()=>{let e=u.current;if(!e)return;let t=g?m.y:m.y-sd.zU,n=su.r.fromOriginAndSize(m.x,t,m.width,m.height),a=e.getBoundingClientRect(),l=p(su.r.fromOriginAndSize(n.right()-a.width-24,n.top()+(g?24:0),a.width,a.height),n);if(a.x<0||a.y<0){let t=new Animation(new KeyframeEffect(e,[{transform:`translateX(${l.left()}px) translateY(-250px)`},{transform:`translateX(${l.left()}px) translateY(${l.top()}px)`}],{duration:600}));t.onfinish=()=>{e.style.transform=`translateX(${l.left()}px) translateY(${l.top()}px)`},t.play()}else e.style.transform=`translateX(${l.left()}px) translateY(${l.top()}px)`},[u,g,-250,m,p]),f.createElement("div",{ref:u,className:"ai_summary_nudge--container--Xt3Ld"},f.createElement("div",{className:"ai_summary_nudge--topContent--EYXY0"},f.createElement("div",{className:"ai_summary_nudge--topBar--3FRaK"},f.createElement(sc.E,{fontSize:14,fontWeight:"medium"},(0,eN.tx)("whiteboard.ai_summary.nudge.title")),f.createElement("div",{className:"ai_summary_nudge--closeButton--2Lr8q"},f.createElement(tN.Jn,{"data-testid":"close-button",onClick:e}))),f.createElement("div",null,f.createElement(sc.E,{fontSize:14,color:"secondary"},(0,eN.tx)("whiteboard.ai_summary.nudge.subtitle"))),f.createElement("div",{className:"ai_summary_nudge--numberContainer--JqUxZ"},f.createElement(sS,{num:1}),f.createElement(sS,{num:2})),f.createElement(sN,{disabled:d,disabledTooltip:a,"data-testid":"summarize-button",onClick:()=>{aT.wr(),aT.Dh(i),o(),t(),s&&c(!0)},trackingProperties:{text:"summarize"}})),f.createElement("div",{className:"ai_summary_nudge--middlePerforation--z5eDN"}),f.createElement("div",{className:"ai_summary_nudge--bottomContent--EiPHE"},f.createElement("div",null,f.createElement("span",{className:a8.cx.colorTextTertiary.$},(0,eN.tx)("whiteboard.ai_summary.nudge.disclaimer")),f.createElement(ss.N,{className:a8.cx.inline.$,href:s_.nG,target:"_blank",trusted:!0},f.createElement("span",null," "),(0,eN.tx)("whiteboard.inline_menu.ai_quick_actions_dropdown_disclaimer_cta")))),f.createElement("div",{className:"ai_summary_nudge--bottomPerforation---VeRC"}))}let sN=(0,Y.tf)(function({onClick:e,disabled:t,disabledTooltip:n}){return f.createElement(Y.fu,{name:"AI Summary Nudge CTA",properties:{disabled:t}},f.createElement(so.$$,{style:{maxWidth:"initial"},className:"ai_summary_nudge--button--DlY6r",onClick:e,"data-testid":"summarize-button",disabled:t,"data-tooltip":t?n:"","data-tooltip-type":nx.Ib.TEXT},f.createElement("div",{className:"ai_summary_nudge--buttonContents--oUSGP"},f.createElement(a2.B,{svg:sT.A,className:"ai_summary_nudge--svgIcon---Lky-"}),(0,eN.tx)("whiteboard.ai_summary.nudge.cta"),f.createElement("div",{className:"ai_summary_nudge--badgeWrapper--QRaRq"},f.createElement(sm.G,{location:t?"SUMMARIZE_NUDGE_DISABLED":"SUMMARIZE_NUDGE",overrideText:(0,eN.t)("whiteboard.inline_menu.ai_quick_actions_beta_badge_text")})))))});function sS({num:e}){let t=184/e;return f.createElement("div",{className:"ai_summary_nudge--numberGraphic--CnM2r"},f.createElement(sc.E,{fontSize:14,color:"secondary"},e),f.createElement("div",{className:"ai_summary_nudge--textPlaceholder--tx2Yp",style:{width:`${t}px`}}))}function sk(){let e=(0,_.d4)(e=>e.mirror.selectionProperties.whiteboardSelectionCanShowAiSummaryNudge),t=sC(),n=sb(t);return t&&e&&!n}var sI=n(349894),sA=n(773912);function sO(){let e=(0,_.wA)(),{isShowing:t,complete:n}=function(){let e=function(){let e=function(){let e=(0,S.md)(sA.Bl),t=(0,S.md)(sw.xo),n=(0,S.md)(sw.MC),a=(0,S.md)(sw.ji),l=(0,S.md)(sw.EH);return f.useMemo(()=>{if("loaded"!==t.status||"loaded"!==n.status||"loaded"!==e.status||e.data)return(0,eW.gB)({isEligibleToShowUser:!1});let r=new Date(a).getTime()>Date.now()-864e5;return l>=3||t.data||n.data||r?(0,eW.gB)({isEligibleToShowUser:!1}):(0,eW.gB)({isEligibleToShowUser:!0})},[e,t,n,l,a])}(),t=sk();return(0,sI.gB)({shouldShowNudge:!!(e.data.isEligibleToShowUser&&t)})}(),{show:t,isShowing:n,complete:a}=(0,n7.e)({overlay:an.RSb,priority:n8.N.SECONDARY_MODAL},[e]),l=sk(),r=(0,_.d4)(e=>e.mirror.selectionProperties.numSelectedByType);return f.useEffect(()=>{t({canShow:e=>e.shouldShowNudge})},[t,e,r,l]),{isShowing:n,complete:a}}();return f.createElement(si.M,{isShowing:t},t&&f.createElement(Y.fu,{name:eQ.e0.AI_SUMMARY_TOPBAR_NUDGE},f.createElement(sx,{onClose:()=>{e(j.b({[sw.l0]:!0})),n()},onSummarize:()=>{e(j.b({[sw.zp]:!0})),e(j.b({[sw.l0]:!0})),n()},onAutoDismiss:()=>{n()}})))}var sL=n(779709),sP=n(172115),sD=n(251960),sR=n(723239),sM=n(206193),sF=n(374300),sB=n(59530),sU=n(394828),sH=n(740280),sG=n(864114);let sV=(0,ai.r1)(sB.IR);function sK(){let e=(0,e2.md)(sR.mp),t=(0,e2.md)(sR.t),n=(0,e2.md)(sV),a=(0,e2.md)(af.yV),l=(0,_.wA)(),{uniqueId:r,isShowing:i,show:o,complete:s}=(0,n7.e)({overlay:an.B14,priority:n8.N.SECONDARY_MODAL},[e,t,n]),c=(0,n3.hn)();return(0,sD.E)(r,"properties-panel-select-tab",e=>{var t;(null==(t=e.properties)?void 0:t.tab)==="prototype"&&o({canShow:(e,t,n)=>(function(e){let t=Date.now();return e.getTime()<=t-2592e6})(e)&&t&&c()&&!n})}),f.createElement(sH.X,{isShowing:i,title:(0,eN.tx)("upsell.advanced_prototyping.title"),description:(0,eN.tx)("upsell.advanced_prototyping.description"),media:f.createElement(sU.w,{src:"https://static.figma.com/uploads/30507591ad5cd385aaf75d4a16ef140b74ec821b",aspectRatio:1.75}),primaryCta:{label:(0,eN.tx)("upsell.advanced_prototyping.see_plans"),type:"button",onClick:()=>{var e;l(ty.to({type:sP.V,data:{upsellSource:sM.b.ADVANCED_PROTOTYPING_UPSELL,teamId:null==(e=null==a?void 0:a.team)?void 0:e.id,openCheckoutInNewTab:!0,featureList:(0,sF.xp)(sF.Q1.filter(e=>e!==sF.Xj.AUDIO_CONVERSATIONS),sF.Xj.ADVANCED_PROTOTYPING)}})),s()},ctaTrackingDescriptor:ar.c.SEE_PLANS},secondaryCta:{label:(0,eN.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/en-us/articles/14506587589399-Use-variables-in-prototypes",ctaTrackingDescriptor:ar.c.LEARN_MORE},trackingContextName:"Advanced Prototype Upsell Popup",userFlagOnShow:sB.IR,position:sG.Q.BOTTOM_RIGHT,onClose:s})}let sW="seen_audio_nux",sz=(0,ai.r1)(sW);function sj(){let e=(0,S.md)(sz),t=(0,n6.GS)(),n=(0,n7.e)({overlay:an.y4J,priority:n8.N.SECONDARY_MODAL},[e]);return(0,sD.E)(n.uniqueId,"Context Viewed",e=>{var t;let a=null==(t=e.properties)?void 0:t.name;"join-call-with-others"===a?n.show({canShow:e=>!e}):"should-close-open-audio-nux"===a&&n.isShowing&&n.complete()}),(0,sD.E)(n.uniqueId,"Lost DOM Target",()=>{n.isShowing&&n.complete()}),f.createElement(n9.rq,{isShowing:n.isShowing,userFlagOnShow:sW,emphasized:!0,title:(0,eN.tx)("collaboration.voice.join_the_conversation"),description:f.createElement("div",{style:t?{display:"inline"}:void 0},f.createElement(ig.OS,null)),targetKey:"audio-nux-key",onClose:n.complete,trackingContextName:"audio_nux_pointer"})}var sJ=n(594524),sY=n(665723),sX=n(585575),sq=n(916108),sZ=n(218997),sQ=n(377020),s$=n(443958),s0=n(15839),s1=n(433546),s2=n(526360),s5=n(460187),s4=(e=>(e[e.DONT_SHOW=0]="DONT_SHOW",e[e.DEFAULT_TO_SRGB=1]="DEFAULT_TO_SRGB",e[e.DEFAULT_TO_DISPLAY_P3=2]="DEFAULT_TO_DISPLAY_P3",e))(s4||{});let s3={"Export PNG with Color Profile":"867977941678289774"};function s6(){let{plugins:e}=(0,e_.wH)(),t=Object.fromEntries(Object.entries(s3).filter(([t,n])=>Object.values(e).some(e=>e.manifest.id===n)));return Object.keys(t).length>0?t:null}function s7(){let e=(0,s5.Av)();return(0,s5.tK)(e)}let s8=(0,e4.eU)(null),s9="color_management_default_to_p3_modal--onboardingFooter--VSeAU",ce="color_management_default_to_p3_modal--content--FzYUr",ct="seen_color_management_default_to_p3_modal",cn=at.tO,ca=sQ.O0,cl="color_management_default_to_p3_modal";function cr(){let e=(0,n7.e)({overlay:an.t_E,priority:n8.N.SURVEY}),{currentStep:t,next:n,back:a}=(0,sJ.A)({numSteps:2,onComplete:e.complete}),l=(0,eT.f)(ct),[r]=(0,s1.jJ)(),i=s7(),o=s6(),[s,c]=(0,S.fp)(s8),d=(0,sY.jK)(),[u,m]=(0,f.useState)(!1),[p]=(0,S.fp)(s$.n$),_=(0,sY.C$)();return f.useEffect(()=>{l||null!=s||d.colorProfilePreference!==sX.M.DEFAULT||(c(sX.M.DISPLAY_P3),_(sX.M.DISPLAY_P3,{canSeeP3:i,desktopSetting:r,p3Plugins:o}),e.show())},[i,s,r,l,e,o,c,_,d.colorProfilePreference]),(0,sD.E)(e.uniqueId,tr.kF,()=>{e.isShowing&&0===t&&e.complete()}),(0,sD.E)(e.uniqueId,sQ.nu,()=>{e.isShowing&&1===t&&e.complete()}),(0,sD.E)(e.uniqueId,tr.kL,()=>{u||e.isShowing||0!==t||p||(n(),e.show())}),(0,sD.E)(e.uniqueId,s$.E1,()=>{u||e.isShowing||0!==t||(n(),e.show())}),f.createElement(sq.U,{currentStep:t,isShowing:e.isShowing},f.createElement(sZ.h,{modalType:s0.q3.ANNOUNCEMENT_POINTER,title:f.createElement(f.Fragment,null,(0,eN.tx)("fullscreen.color_management.curator.default_to_p3.user_color_profile.title")),ctaText:(0,eN.tx)("general.next"),onClickPrimaryCta:n,stepCounter:f.createElement("span",{className:s9},(0,eN.tx)("fullscreen.color_management.curator.step_1of2")),element:ci,onboardingKey:cn,trackingContextName:cl,userFlagOnShow:ct,isShowing:e.isShowing,onClose:e.complete,onManualDismiss:()=>{e.complete(),m(!0)},width:300}),f.createElement(sZ.h,{modalType:s0.q3.ANNOUNCEMENT_POINTER,title:f.createElement(f.Fragment,null,(0,eN.tx)("fullscreen.color_management.curator.change_document_color_profile.title")),ctaText:(0,eN.tx)("general.got_it"),onClickPrimaryCta:()=>{e.complete(),m(!0)},secondaryCtaText:f.createElement("div",{onClick:a},(0,eN.tx)("general.previous")),preventDismissOnClickSecondaryCta:!0,stepCounter:f.createElement("span",{className:s9},(0,eN.tx)("fullscreen.color_management.curator.step_2of2")),element:co,onboardingKey:ca,userFlagOnShow:ct,trackingContextName:cl,isShowing:e.isShowing,onClose:e.complete,onManualDismiss:()=>{e.complete(),m(!0)},width:300}))}function ci(){return f.createElement("p",{className:ce},(0,eN.tx)("fullscreen.color_management.curator.default_to_p3.user_color_profile.content",{colorProfileSetting:f.createElement("strong",null,(0,eN.tx)("fullscreen.color_management.curator.color_profile_setting"))})," ",f.createElement("a",{href:s2.s,target:"_blank"},(0,eN.tx)("rcs.rcs_shared.learn_more")))}function co(){return f.createElement("p",{className:ce},(0,eN.tx)("fullscreen.color_management.curator.change_document_color_profile.content",{fileColorProfile:f.createElement("strong",null,(0,eN.tx)("fullscreen.color_management.curator.file_color_profile"))})," ",f.createElement("a",{href:s2.s,target:"_blank"},(0,eN.tx)("rcs.rcs_shared.learn_more")))}function cs(){let[e]=(0,s1.jJ)(),t=s7(),n=s6(),[a,l]=(0,S.fp)(s8),r=(0,sY.jK)(),i=(0,sY.C$)();return f.useEffect(()=>{null==a&&r.colorProfilePreference===sX.M.DEFAULT&&(l(sX.M.SRGB),i(sX.M.SRGB,{canSeeP3:t,desktopSetting:e,p3Plugins:n}))},[t,a,e,n,l,i,r.colorProfilePreference]),null}function cc(){let e=function(){let e=(0,sY.jK)().colorProfilePreference!==sX.M.DEFAULT,t=function(){let[e]=(0,s1.jJ)(),t=s7(),n=s6();return t&&n&&["unmanaged","default",null].includes(e)?sX.M.DISPLAY_P3:sX.M.SRGB}(),[n]=(0,S.fp)(s8);return e&&null===n?0:t===sX.M.SRGB?1:t===sX.M.DISPLAY_P3?2:0}();if(!function(e){let t=(0,eb.aV)(),[n,a]=function(e){let[t,n]=f.useState(!1),[a,l]=f.useState(!1);return f.useEffect(()=>{let e;return a&&(e=setTimeout(()=>{n(!t),l(!1)},2e3)),()=>clearTimeout(e)},[a,t,2e3]),[t,f.useCallback(()=>l(!0),[])]}(2e3);return f.useEffect(()=>{t||a()},[t,a]),n}(0))return null;switch(e){case s4.DONT_SHOW:return null;case s4.DEFAULT_TO_SRGB:return f.createElement(cs,null);case s4.DEFAULT_TO_DISPLAY_P3:return f.createElement(cr,null)}}var cd=n(816073),cu=n(965480),cm=n(177505),cp=n(601607),cf=n(653734),c_=n(91564);function cg(){var e,t,n;let a=(0,n7.e)({overlay:an.qnr,priority:n8.N.DEFAULT_MODAL}),l=(0,_.wA)(),r=(0,_.Pj)(),i=(0,cp.Fk)((e,t)=>(0,cm.zC)(e,t),r.getState().mirror.appModel.currentPage),o=(0,cu.JU)((0,cu.J3)()),s=!!(null==(e=(0,af.q5)())?void 0:e.template),c=(0,eb.aV)(),d=!!(0,eT.f)("seen_custom_template_publish_nudge"),u=null==(n=null==(t=(0,eT.f)("figjam_editor_onboarded"))?void 0:t.updatedAt)?void 0:n.getTime(),m=!!u&&u<Date.now()-12096e5,p=!c&&!d&&o&&!i&&!s&&m;return((0,f.useEffect)(()=>{p&&setTimeout(()=>{a.show(),l(j.b({seen_custom_template_publish_nudge:!0}))},1e3)},[l,a,p]),a.isShowing)?f.createElement(cf.i,{step:{modalType:s0.q3.DRAGGABLE,element:c_.ZH,trackingContextName:"custom_template_publish_nudge",onboardingKey:at.v4,title:f.createElement("div",{className:a8.cx.font13.fontMedium.pl8.pt16.pb16.$},(0,eN.tx)("whiteboard.inserts.custom_templates_header")),width:300,disableFooter:!0,hideStepCounter:!0,disableHighlight:!0},onClickPrimaryCta:a.complete,onClose:a.complete,dismissModal:a.complete,dispatch:l}):null}let ch=(0,ai.r1)("seen_desktop_download_modal_prompt"),cE=(0,ai.r1)("seen_desktop_download_modal_prompt_v2"),cv=(0,sR.tH)("used_desktop_app");function cy(){let e=(0,S.md)(ch),t=(0,S.md)(cE),n=(0,S.md)(sR.mp),a=(0,S.md)(cv),{getConfig:l}=(0,I.I7)("exp_desktop_download_prompts_v2"),r=()=>l().get("should_show_desktop_modal_prompt_v2",!1),{isShowing:i,show:o,complete:s}=(0,n7.e)({overlay:an.kmj,priority:n8.N.DEFAULT_MODAL,experiment:{check:()=>r(),predicate:e=>e,postCheck:e=>!e}},[t,e,n]);if((0,np.h)(()=>{em.eD||a||o({canShow:(e,t,n)=>(function(e){let t=Date.now();return e.getTime()<=t-12096e5})(n)&&!t})}),!i)return null;let c=()=>{s()};return f.createElement(sH.X,{isShowing:i,title:(0,eN.tx)("desktop_download_modal_prompt.download_the_figma_desktop_app"),description:(0,eN.tx)("desktop_download_modal_prompt.level_up_your_workflow_with_tabs"),media:f.createElement(sU.y,{aspectRatio:1.75,alt:"A graphic showing the desktop app with tabs",src:"https://static.figma.com/uploads/cedfb41ea4da3cb80d5d062e5b648aa1d6a5cf1b"}),primaryCta:{label:(0,eN.tx)("desktop_download_modal_prompt.get_the_desktop_app"),type:"button",onClick:()=>{(0,Z.sx)("desktop_modal_download_prompt_cta_clicked_v2"),c(),tg.Ay.redirect(`/download/desktop/${C.Ay.mac?"mac":"win"}`,"_blank")},ctaTrackingDescriptor:ar.c.DESKTOP_APP_DOWNLOAD},trackingContextName:"Desktop Download Modal Prompt",onClose:c,userFlagOnShow:"seen_desktop_download_modal_prompt_v2",position:sG.Q.BOTTOM_RIGHT,secondaryCta:{label:(0,eN.tx)("desktop_download_modal_prompt.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/5601429983767-Guide-to-the-Figma-desktop-app",ctaTrackingDescriptor:ar.c.LEARN_MORE}})}var cb=n(58994),cC=n(694687),cw=n(243987);let cT="seen_figjam_pages_launch_tooltip",cx="used_figjam_pages",cN="figjam-pages-onboarding-key",cS=(0,ai.r1)(cT),ck=(0,ai.r1)(cx);function cI(){let e=(0,S.md)(cS),t=(0,S.md)(ck),n=(0,S.md)(ab.zo),a=(0,S.md)(sR.Fy),l=(0,n6.GS)(),r=(0,eb.aV)(),i=(0,af.q5)(),o=!!(i&&(0,cw.dT)(i)),s=Date.now()<=nX.rn.getTime()+2592e6,c=(0,a9.ol)(),d=(0,cC.sZ)(),u=!!((null==c?void 0:c.student_team)||(null==d?void 0:d.k12_google_org)),{show:m,isShowing:p,complete:_}=(0,n7.e)({overlay:an.$8i,priority:n8.N.SECONDARY_MODAL},[e,n,a,t]);return f.useEffect(()=>{m({canShow:(e,t,n,a)=>!e&&o&&t&&n&&!a&&s&&!l&&!r&&!u})},[m,e,o,n,a,t,s,l,r,u]),f.createElement(n9.rq,{isShowing:p,userFlagOnShow:cT,emphasized:!0,title:(0,eN.tx)("pages_panel.toolbar.rcs_title"),description:f.createElement("p",null,(0,eN.tx)("pages_panel.toolbar.rcs_desc")),targetKey:cN,onClose:_,trackingContextName:"figjam_pages_onboarding_pointer"})}var cA=n(83012),cO=n(776008),cL=n(161074);function cP(e){let{jobTitle:t,viewedSidebar:n,setViewedSidebar:a}=e,l=(0,_.wA)(),r=(0,cA.j)(t);return f.useMemo(()=>{n||(a(!0),l(r7.En({initialX:0,initialY:0,pinned:r8.t.PINNED_AND_DOCKED_LEFT,initialSelectedCategory:r})))},[l,r,n,a]),f.createElement(f.Fragment,null)}function cD(){let e=(0,ew.TA)(),t=(0,_.d4)(e=>e.openFile),n=(0,_.d4)(e=>e.mirror.appModel.currentPage),a=(0,cp.Fk)((e,t)=>(0,cm.zC)(e,t),n),l=(0,_.d4)(e=>!(0,cL.zP)(e.mirror.appModel.currentTool)),r=(0,cL.Uj)(t,e||""),i=(0,ai.Fu)("interacted_figjam_whats_new_v2_cta"),o=(0,S.md)(i),s=(0,S.md)(sR.NT),c=(0,cO.E)(s,["education"]),d=(0,S.md)(ab.wg),[u,m]=f.useState(!1),p=(0,n7.e)({overlay:an.hsL,priority:n8.N.HIGH_PRIORITY_MODAL},[o,s]);(0,np.h)(()=>{p.show({canShow:e=>(0,cL.SS)(e)&&d&&(0,cL.ZQ)(t)&&a&&!l&&r})});let g=(0,ax.LR)(),h=()=>{g(),p.complete()};return f.createElement(sZ.h,{isShowing:p.isShowing,modalType:s0.q3.SELF_CONTAINED,trackingContextName:"FigJam Templates",element:()=>f.createElement(cP,{jobTitle:c,viewedSidebar:u,setViewedSidebar:m}),testId:"figjam_templates_whats_new_overlay",onClickPrimaryCta:p.complete,onClose:h,onManualDismiss:h})}var cR=n(892677),cM=n(129318),cF=n(181912),cB=n(586459),cU=n(632923),cH=n(135876),cG=n(881388),cV=n(237870),cK=n(488578),cW=n(384890);let cz=(0,cV.Ju)(function(){let e=(0,_.wA)();return f.createElement(Y.fu,{name:"google_device_try_file_claim_success_modal"},f.createElement(cK.aF,{disableKeyboardEventPropagation:!0,className:cW.tQ},f.createElement("div",{className:cW.Dg},f.createElement("img",{className:cW.Sl,src:"https://static.figma.com/uploads/e94b4d90f07d46f80c5d4d47a16ee2cd8df688bf",alt:""})),f.createElement(cU.k0,{multiple:2}),f.createElement("div",{className:cW.FS},f.createElement("h1",{className:cW.DX},(0,eN.tx)("google_device_try_file_modal.claim_success.header")," ")),f.createElement(cU.k0,{multiple:1}),f.createElement("div",{className:cW.FS},f.createElement("div",{className:cW.Kc},(0,eN.tx)("google_device_try_file_modal.claim_success.description"))),f.createElement(cU.k0,{multiple:3}),f.createElement(a1.nD,{type:"close",fullWidth:!0,onClick:t=>{t.preventDefault(),t.stopPropagation(),e(ty.Ce())}},(0,eN.tx)("google_device_try_file_modal.claim_success.button"))))},"GOOGLE_DEVICE_TRY_FILE_CLAIM_SUCCESS_MODAL");var cj=n(320741),cJ=n(980820);let cY=(0,cJ.nF)((e,{fileKey:t,emailAddress:n,isResentEmail:a,onSuccess:l},{loadingKey:r})=>{let i=e$.L.setClaimEmail({fileKey:t,emailAddress:n});(0,cj.N)(i,e,r),i.then(()=>{if(a){e.dispatch(eS.F.enqueue({message:(0,eN.t)("google_device_try_file_modal.resent_email.visual_bell")}));return}null==l||l(n)}).catch(t=>{var n;if((null==(n=t.data)?void 0:n.message)==="Hit Claim Email Job timeout lock"){e.dispatch(eS.F.enqueue({message:(0,eN.t)("google_device_try_file_modal.resent_email.email_resent")}));return}e.dispatch(cG.s.error((0,eN.t)("google_device_try_file_modal.enter_email.failed_to_send")))})}),cX=(0,cJ.nF)((e,{fileKey:t},{loadingKey:n})=>{let a=e$.L.claimDeviceFile({fileKey:t});(0,cj.N)(a,e,n),a.then(()=>{e.dispatch(ty.to({type:cz,data:{}}))}).catch(t=>{e.dispatch(cG.s.error((0,eN.t)("google_device_try_file.save_board.generic_error")))})}),cq="figjam_try_confirm_save_steps--descriptionBold--ou7xj";function cZ({dismissModal:e}){let t=(0,_.wA)(),n=(0,af.tS)(),a=(0,_.d4)(e=>{var t;return null==(t=e.user)?void 0:t.email_validated_at}),l=(0,_.d4)(e=>n?e.loadingState[tv.Q.loadingKeyForPayload({file_key:n})]:null),r=(0,_.d4)(e=>n?e.loadingState[cX.loadingKeyForPayload({fileKey:n})]:null),i=(0,cR.s)(),o=(0,ta.Kx)(),s=l===cB.r.LOADING||"loading"===i.status||r===cB.r.LOADING,c=l===cB.r.SUCCESS||r===cB.r.SUCCESS;(0,f.useEffect)(()=>{c&&(e(),(null==o?void 0:o.updateFigJamTrySaveStatus)&&o.updateFigJamTrySaveStatus(ts.Fl.SAVED))},[c,e,o]);let d=(0,ta.pt)();if((0,f.useEffect)(()=>{d&&(d._claim_fig_jam_try_file=e=>{t(tv.Q({file_key:e}))})},[d,t]),(0,f.useEffect)(()=>{(null==o?void 0:o.updateFigJamTrySaveStatus)&&n&&a&&o.updateFigJamTrySaveStatus(ts.Fl.REQUESTED)},[o,n,a]),!n||!a)return null;let u=(0,cF.A)(a).isAfter((0,cF.A)().subtract(5,"minutes"));return f.createElement("div",{className:"figjam_try_confirm_save_steps--modalContent--DezcS"},f.createElement("div",{className:"figjam_try_confirm_save_steps--textContent--9da6-"},f.createElement("h1",{className:"figjam_try_confirm_save_steps--headline--RRPzl text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,eN.tx)("figjam_try.save_modal.headline")),f.createElement(cU.k0,{multiple:1}),f.createElement("p",{className:"figjam_try_confirm_save_steps--description--bpGw9 text--fontPos13--xW8hS text--_fontBase--QdLsd"},u?(0,eN.tx)("figjam_try.save_modal.new_team"):(0,eN.tx)("figjam_try.save_modal.save_one_team",{share:f.createElement("p",{className:cq},(0,eN.tx)("figjam_try.save_modal.share")),file_duplicate:f.createElement("p",{className:cq},(0,eN.tx)("figjam_try.save_modal.file_duplicates"))})),f.createElement(cU.k0,{multiple:3}),f.createElement(a1.nD,{onClick:()=>{var e;"loaded"===i.status&&(0,eW.oA)(null==(e=i.data)?void 0:e.deviceTryFile)?t(cX({fileKey:n})):t(tv.Q({file_key:n}))},disabled:s,fullWidth:!0,trackingProperties:{buttonContext:"Let\u2019s jam"}},f.createElement(cH.x,{isLoading:s},()=>(0,eN.tx)("figjam_try.save_modal.cta")))))}function cQ(){let e=(0,n7.e)({overlay:an.JGK,priority:n8.N.HIGH_PRIORITY_MODAL}),t=(0,S.md)(af.yV),n=null==t?void 0:t.isTryFile,a=(0,ta.Kx)(),l=(0,cR.s)(),[r,i]=f.useState(!1);return(0,f.useEffect)(()=>{e.isShowing&&!n&&(e.complete(),(null==a?void 0:a.updateFigJamTrySaveStatus)&&a.updateFigJamTrySaveStatus(ts.Fl.SAVED))},[n,e,a]),(0,f.useEffect)(()=>{var t;let o=(0,cM.QL)(at.ao.key)===at.ao.value,s="loaded"===l.status&&!!(0,eW.oA)(null==(t=l.data)?void 0:t.deviceTryFile);o&&s&&!r?(e.show(),i(!0)):o&&n&&!s?(e.show(),(null==a?void 0:a.updateFigJamTrySaveStatus)&&a.updateFigJamTrySaveStatus(ts.Fl.REQUESTED)):o&&!n&&(null==a?void 0:a.updateFigJamTrySaveStatus)&&a.updateFigJamTrySaveStatus(ts.Fl.SAVED)},[e,n,l,r,a]),f.createElement(sZ.h,{isShowing:e.isShowing,trackingContextName:"Figjam Try Confirm Save Modal",modalType:s0.q3.WELCOME,element:({dismissModal:e})=>f.createElement(cZ,{dismissModal:e}),onClickPrimaryCta:e.complete,onClose:e.complete,onManualDismiss:e.complete})}s0.q3.WELCOME,({dismissModal:e})=>f.createElement(cZ,{dismissModal:e});var c$=n(502665);let c0="figjam_try_confirm_save--textContainer--9YaF4";function c1(){let[e,t]=f.useState(!1),{show:n,isShowing:a,complete:l}=(0,n7.e)({overlay:an.XAb,priority:n8.N.HIGH_PRIORITY_MODAL}),r=(0,S.md)(af.yV),i=null==r?void 0:r.isTryFile,o=(0,cR.s)(),s=(0,cM.QL)(at.ao.key)===at.ao.value,c=(0,S.md)(c$.N);return(0,f.useEffect)(()=>{var t,a,l,r;!e&&s&&!i&&"loaded"===o.status&&(null==(a=(0,eW.oA)(null==(t=o.data)?void 0:t.deviceTryFile))?void 0:a.claimedAt)&&(null==(r=(0,eW.oA)(null==(l=o.data)?void 0:l.deviceTryFile))?void 0:r.claimedByUserId)!==c.data&&n()},[e,i,s,o,n,c]),f.createElement(si.M,{isShowing:a},f.createElement(c2,{onClose:()=>{l(),t(!0)}}))}function c2(e){return f.createElement(Y.fu,{name:"figjam_try_device_already_claimed_overlay"},f.createElement(cK.aF,{onHide:e.onClose,disableKeyboardEventPropagation:!0,className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedModal--T7bRi"},f.createElement("div",{className:c0},f.createElement("h1",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedHeader--vNLRA text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,eN.tx)("figjam_try.already_claimed_modal.header"))),f.createElement(cU.k0,{multiple:1}),f.createElement("div",{className:c0},f.createElement("div",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedDescription--WXdx- text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,eN.tx)("figjam_try.already_claimed_modal.description",{file_duplicate:f.createElement("p",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedDescriptionBold--CZgl4"},(0,eN.tx)("figjam_try.already_claimed_modal.file_duplicate"))}))),f.createElement(cU.k0,{multiple:3}),f.createElement(a1.nD,{type:"close",fullWidth:!0,onClick:e.onClose},(0,eN.tx)("figjam_try.already_claimed_modal.continue"))))}var c5=n(116135);let c4="figjam-ui3-left-panel-onboarding-key",c3="figjam-ui3-right-rpanel-onboarding-key",c6="seen_figjam_ui3_launch_tooltip",c7="used_figjam_ui3",c8=(0,ai.r1)(c6),c9=(0,ai.r1)(c7);function de(){let e=(0,S.md)(c8),t=(0,S.md)(c9),n=(0,S.md)(ab.zo),a=(0,S.md)(sR.Fy),l=(0,n6.GS)(),r=(0,eb.aV)(),{show:i,isShowing:o,complete:s}=(0,n7.e)({overlay:an.PCP,priority:n8.N.SECONDARY_MODAL},[e,n,a,t]);f.useEffect(()=>{i({canShow:(e,t,n,a)=>!e&&t&&n&&!a&&l&&!r})},[i,e,n,a,t,l,r]);let c=[{title:(0,eN.tx)("whiteboard.ui3_panels.rcs_title"),description:(0,eN.tx)("whiteboard.ui3_left_panel.rcs_description"),trackingContextName:"figjam_ui3_left_panel_onboarding_pointer",targetKey:c4,emphasized:!0,disableHighlight:!0},{title:(0,eN.tx)("whiteboard.ui3_panels.rcs_title"),description:(0,eN.tx)("whiteboard.ui3_right_panel.rcs_description"),trackingContextName:"figjam_ui3_right_panel_onboarding_pointer",targetKey:c3,emphasized:!0,disableHighlight:!0}];return f.createElement(c5.WZ,{isShowing:o,steps:c,onComplete:s,userFlagOnShow:c6})}var dt=n(833629),dn=n(197578),da=n(832913);let dl=(0,ai.r1)(dn.USER_FLAG_V2),dr=(0,sR.tH)("last_figjam_at"),di=(0,ai.r1)("dont_show_figjam_updates_in_figma_design");function ds(){let e=(0,S.md)(di),t=(0,S.md)(ab.wg),n=(0,S.md)(sR.mp),a=(0,S.md)(dr),l=(0,S.md)(dl),r=(0,S.md)(sR.NT),i=(0,S.md)(sR.Ot),o=(0,dt.jO)(),s=(0,n7.e)({overlay:an.Ttn,priority:n8.N.DEFAULT_MODAL},[e,n,l,i,r]);return(0,np.h)(()=>{s.show({canShow:(e,n,l,r)=>{if(e||r)return!1;let i=(0,cO.f)({userCreatedAt:n,lastUsedFigjamDate:a,hasSeenOverlayV2:l});return(!t||o)&&i}})}),f.createElement(da.A,{context:"editor",jobTitle:(0,cO.E)(r,["education"]),isShowing:s.isShowing,onClickPrimaryCta:s.complete,onClose:s.complete,onManualDismiss:s.complete})}var dc=n(106757);let dd=(0,e4.eU)(!1);var du=n(6949),dm=n(407844),dp=n(164795);function df(){return f.createElement("svg",{width:"23",height:"24",viewBox:"0 0 23 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:a8.cx.colorIconBrand.$},f.createElement("g",{id:"Editor / Core / icon-32-visible"},f.createElement("path",{id:"Union",fillRule:"evenodd",clipRule:"evenodd",d:"M11.5002 15C9.20033 15 7.17803 13.8058 6.02182 12C7.17803 10.1942 9.20033 9 11.5002 9C13.8 9 15.8223 10.1942 16.9785 12C15.8223 13.8058 13.8 15 11.5002 15ZM11.5002 8C14.3782 8 16.8776 9.6211 18.1351 12C16.8776 14.3789 14.3782 16 11.5002 16C8.62214 16 6.12273 14.3789 4.86523 12C6.12273 9.6211 8.62214 8 11.5002 8ZM11.5 14C12.6046 14 13.5 13.1046 13.5 12C13.5 10.8954 12.6046 10 11.5 10C10.3954 10 9.5 10.8954 9.5 12C9.5 13.1046 10.3954 14 11.5 14Z"})))}function d_({onClose:e}){var t;let n=(0,_.wA)(),a=!!(0,eT.f)("dismissed_gen1_design_viewer_banner"),l=(0,af.q5)(),r=!!(null==l?void 0:l.parentOrgId),i=(0,du.a9)(),o=!1;if(r&&(null==i?void 0:i.design_paid_status)===a_.El.RESTRICTED?o=!0:(null==(t=null==l?void 0:l.currentTeamUser)?void 0:t.designPaidStatus)===a_.Zf.RESTRICTED&&(o=!0),a)return null;let s=f.createElement(tN.Jn,{onClick:()=>{n(j.b({dismissed_gen1_design_viewer_banner:!0})),e()},"aria-label":(0,eN.t)("banner.shared.close_banner"),className:"gen1_design_viewer_banner--closeButton--AKZWc"});return f.createElement(Y.fu,{name:"Design Viewer Onboarding Banner",properties:{isViewerRestricted:o}},f.createElement(dm.C,{content:{id:dp.om.Gen1DesignViewerBanner,bannerType:dp.x1.INFO,mainText:f.createElement(dg,{isViewerRestricted:o}),button:{type:dp.MA.CUSTOM,element:s},hideIcon:!0},editorType:eq.nT.Design,onDismiss:nf.lQ}))}function dg({isViewerRestricted:e}){let t=f.createElement("div",{className:"gen1_design_viewer_banner--keyboardShortcutContainer--Xk1DL",onClick:()=>{et.Y5.triggerAction("set-tool-comments")},role:"button",tabIndex:0},f.createElement("span",{className:"gen1_design_viewer_banner--keyboardShortcut--83jB0"},"C"));return f.createElement("div",{className:a8.cx.colorTextBrand.fontMedium.flex.flexRow.columnGap8.$},f.createElement("div",{className:a8.cx.flex.flexRow.itemsCenter.pl4.pr4.fontSemiBold.colorBgSelectedHover.bRadius4.ml8.noWrap.overflowHidden.$},f.createElement(df,null),(0,eN.tx)("file_browser.folder_settings.team_access_view_only")),f.createElement("span",{className:nb()(a8.cx.flex.flexRow.itemsCenter.$,"gen1_design_viewer_banner--mainText--M1KK2")},e?(0,eN.tx)("gen1_design_viewer_onboarding.feel_free_to_look_around_and_press_c_to_leave_comments_to_make_changes_request_a_full_design_seat_from_your_admin",{keyboardShortcut:t}):(0,eN.tx)("gen1_design_viewer_onboarding.feel_free_to_look_around_and_press_c_to_leave_comments_to_make_changes_ask_to_edit_the_file",{keyboardShortcut:t})))}function dh({onClose:e,onClickPrimaryCta:t}){let n=f.createElement("div",{className:"gen1_design_viewer_walkthrough--viewOnlyBadge--e8riE"},f.createElement(df,null),(0,eN.tx)("gen1_design_viewer_onboarding.view_only"));return f.createElement(f.Fragment,null,f.createElement("div",{className:a8.cx.fixed.top0.right0.bottom0.left0.zIndexSecondaryModal.eventsNone.$,style:{backgroundColor:"rgba(0, 0, 0, 0.27)"}}),f.createElement(sH.X,{title:(0,eN.tx)("gen1_design_viewer_onboarding.take_a_quick_tour"),description:f.createElement("div",{className:"gen1_design_viewer_walkthrough--beginTourDescription--CGAEy"},f.createElement("span",null,"\u{1F44B} "),(0,eN.tx)("gen1_design_viewer_onboarding.hey_there_welcome_to_your_first_figma_file_learn_how_to_explore_and_add_comments_in_this_file",{viewOnly:n})),onClose:e,trackingContextName:"Design Viewer Onboarding \u2014 Take Tour Step",position:sG.Q.BOTTOM_RIGHT,isShowing:!0,primaryCta:{label:(0,eN.tx)("rcs.take_tour.let_s_go"),type:"button",onClick:t,ctaTrackingDescriptor:ar.c.LETS_GO},secondaryCta:{label:(0,eN.tx)("rcs.take_tour.no_thanks"),type:"button",onClick:e,ctaTrackingDescriptor:ar.c.NO_THANKS}}))}var dE=n(126911),dv=(e=>(e[e.TRACKPAD_PAN=0]="TRACKPAD_PAN",e[e.TRACKPAD_ZOOM=1]="TRACKPAD_ZOOM",e[e.MOUSE_PAN_RIGHT_CLICK_DRAG=2]="MOUSE_PAN_RIGHT_CLICK_DRAG",e[e.MOUSE_PAN_SPACE_LEFT_CLICK_DRAG=3]="MOUSE_PAN_SPACE_LEFT_CLICK_DRAG",e[e.MOUSE_ZOOM_SCROLL_WHEEL=4]="MOUSE_ZOOM_SCROLL_WHEEL",e[e.MOUSE_ZOOM_CMD_SCROLL_WHEEL=5]="MOUSE_ZOOM_CMD_SCROLL_WHEEL",e))(dv||{});function dy({step:e}){let t=(0,aN.J2)((0,tM.UK)().rightClickPan),n=(0,aN.J2)((0,tM.UK)().scrollWheelZoom);return f.createElement("div",{className:a8.cx.flex.flexRow.columnGap16.$},f.createElement(db,{type:"pan"===e?0:1}),f.createElement(db,{type:"pan"===e?t?2:3:n?4:5}))}function db({type:e}){let t,n,a;switch(e){case 0:n="https://static.figma.com/uploads/863006f3b3055a16cb6674b2b38e180bbf2a3c3f",a=(0,eN.tx)("gen1_design_viewer_onboarding.slide_with_two_fingers_to_move_on_a_trackpad");break;case 1:n="https://static.figma.com/uploads/69708e22f9ed801bf3d746142a3a90d8befb5d60",a=(0,eN.tx)("gen1_design_viewer_onboarding.pinch_to_zoom_on_a_trackpad");break;case 3:t=f.createElement(dw,null),a=(0,eN.tx)("gen1_design_viewer_onboarding.hold_keyboard_shortcut_click_and_drag_with_your_mouse",{keyboardShortcut:f.createElement("span",{className:a8.cx.colorTextBrand.colorBgBrandTertiary.pl4.pr4.pt2.pb2.fontMedium.bRadius2.$},(0,eN.tx)("whiteboard.keyboard_shortcuts.key_label.space"))});break;case 2:t=f.createElement(dC,null),a=(0,eN.tx)("gen1_design_viewer_onboarding.right_click_and_drag_to_pan_with_your_mouse");break;case 5:n="https://static.figma.com/uploads/b99f52810b351c4f827711787d5c46a01e829835",a=(0,eN.tx)("gen1_design_viewer_onboarding.hold_and_scroll_your_mouse",{keyboardShortcut:f.createElement("span",{className:a8.cx.colorTextBrand.colorBgBrandTertiary.pl4.pr4.pt2.pb2.fontMedium.bRadius2.$},(0,eN.tx)(dE.y.isMac()?"tooltips_plus_onboarding.command_key":"tooltips_plus_onboarding.control_key"))});break;case 4:n="https://static.figma.com/uploads/b99f52810b351c4f827711787d5c46a01e829835",a=(0,eN.tx)("gen1_design_viewer_onboarding.use_the_scroll_wheel_to_zoom_with_a_mouse")}return f.createElement("div",{className:"navigation_instructions--instructionPanel--LSUWY"},f.createElement("div",{className:"navigation_instructions--instructionAsset--92t2D"},t||f.createElement("video",{src:n,autoPlay:!0,loop:!0,muted:!0,style:{width:"100%"}})),f.createElement("div",null,a))}function dC(){return f.createElement("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{id:"Rectangle 1"},f.createElement("rect",{width:"33.6014",height:"48",rx:"16.8007",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 41.9996 4.46875)",fill:"white"}),f.createElement("rect",{x:"-0.707083",y:"1.22474",width:"31.6014",height:"46",rx:"15.8007",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 40.2925 4.6935)",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"})),f.createElement("path",{id:"Vector 582",d:"M31.8131 31.5482L46.793 27.5343L45.9447 19.3759L40.1031 12.5554L31.9836 9.14054L26.2221 10.6843L31.8131 31.5482Z",fill:"#0D99FF"}),f.createElement("rect",{id:"Rectangle 3",x:"-0.707083",y:"1.22474",width:"31.6014",height:"46",rx:"15.8007",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 40.2925 4.6935)",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"}),f.createElement("g",{id:"Rectangle 2"},f.createElement("rect",{width:"9.60041",height:"16.8",rx:"4.8002",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 32.8944 16.8467)",fill:"white"}),f.createElement("rect",{x:"-0.707083",y:"1.22474",width:"7.60041",height:"14.8",rx:"3.8002",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 31.1873 17.0714)",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"})))}function dw(){return f.createElement("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("rect",{width:"33.6014",height:"48",rx:"16.8007",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 42.5767 4.30371)",fill:"white"}),f.createElement("rect",{x:"-0.707083",y:"1.22474",width:"31.6014",height:"46",rx:"15.8007",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 40.8696 4.52846)",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"}),f.createElement("path",{d:"M32.3639 31.0389L17.384 35.0528L14.0394 27.5632L15.6882 18.7357L21.0125 11.7186L26.774 10.1748L32.3639 31.0389Z",fill:"#0D99FF"}),f.createElement("rect",{width:"9.60041",height:"16.8",rx:"4.8002",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 33.4716 16.6816)",fill:"white"}),f.createElement("rect",{x:"-0.707083",y:"1.22474",width:"7.60041",height:"14.8",rx:"3.8002",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 31.7645 16.9064)",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"}),f.createElement("rect",{x:"-0.707083",y:"1.22474",width:"31.6014",height:"46",rx:"15.8007",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 40.8696 4.52846)",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"}))}let dT=[function({onClickPrimaryCta:e,onClose:t,currStepNum:n,totalNumSteps:a}){let l=sH.X;return f.createElement(l,{title:(0,eN.tx)("gen1_design_viewer_onboarding.getting_around"),description:f.createElement(f.Fragment,null,f.createElement(a1.Kz,{multiple:1}),f.createElement(dy,{step:"pan"})),onClose:t,trackingContextName:"Design Viewer Onboarding \u2014 Pan Instructions Step",primaryCta:{label:(0,eN.tx)("general.next"),type:"button",onClick:e,ctaTrackingDescriptor:ar.c.NEXT},stepCounter:{stepNum:n,totalNumSteps:a},width:360,position:sG.Q.BOTTOM_RIGHT,isShowing:!0})},function({onClickPrimaryCta:e,onClickSecondaryCta:t,onClose:n,currStepNum:a,totalNumSteps:l}){let r=sH.X;return f.createElement(r,{title:(0,eN.tx)("gen1_design_viewer_onboarding.look_closer_or_step_back"),description:f.createElement(f.Fragment,null,f.createElement(a1.Kz,{multiple:1}),f.createElement(dy,{step:"zoom"})),onClose:n,trackingContextName:"Design Viewer Onboarding \u2014 Zoom Instructions Step",primaryCta:{label:(0,eN.tx)("general.next"),type:"button",onClick:e,ctaTrackingDescriptor:ar.c.NEXT},secondaryCta:{label:(0,eN.tx)("general.back"),type:"button",onClick:t,ctaTrackingDescriptor:ar.c.BACK},stepCounter:{stepNum:a,totalNumSteps:l},width:360,position:sG.Q.BOTTOM_RIGHT,isShowing:!0})},function({onClickPrimaryCta:e,onClickSecondaryCta:t,onClose:n,currStepNum:a,totalNumSteps:l}){let r=(0,eb.dH)();(0,np.h)(()=>{r!==ei.NLJ.COMMENTS&&et.Y5.triggerAction("set-tool-comments")});let i=f.createElement("div",{className:a8.cx.lh20.pt4.$},(0,eN.tx)("gen1_design_onboarding.leave_a_comment_anywhere_in_the_canvas_to_give_feedback_ask_questions_or_mention_someone"));return f.createElement(n9.rq,{targetKey:"comment",title:(0,eN.tx)("gen1_design_viewer_onboarding.share_your_thoughts"),description:i,onClose:n,trackingContextName:"Design Viewer Onboarding \u2014 Comments Step",primaryCta:{label:(0,eN.tx)("general.next"),type:"button",onClick:e,ctaTrackingDescriptor:ar.c.NEXT},secondaryCta:{label:(0,eN.tx)("general.back"),type:"button",onClick:t,ctaTrackingDescriptor:ar.c.BACK},stepCounter:{stepNum:a,totalNumSteps:l},isShowing:!0,disableHighlight:!0})},function({onClickPrimaryCta:e,onClickSecondaryCta:t,onClose:n,currStepNum:a,totalNumSteps:l}){let r=(0,eb.dH)();(0,np.h)(()=>{r!==ei.NLJ.NONE&&et.Y5.triggerAction("set-tool-default")});let i=(0,_.d4)(e=>e.multiplayer.allUsers.length),o=f.createElement("div",{className:a8.cx.lh20.pt4.$},(0,eN.tx)("gen1_design_viewer_onboarding.yep_other_people_can_be_in_the_same_file_and_they_ll_appear_up_here_click_on_their_profile_picture_to_follow_and_see_where_they_are_in_real_time"));return f.createElement(n9.rq,{targetKey:i>1?"multiplayer-avatars":"multiplayer-users-container",title:(0,eN.tx)("gen1_design_viewer_onboarding.follow_your_teammates"),description:o,onClose:n,trackingContextName:"Design Viewer Onboarding \u2014 Spotlight Step",primaryCta:{label:(0,eN.tx)("general.done"),type:"button",onClick:e,ctaTrackingDescriptor:ar.c.DONE},secondaryCta:{label:(0,eN.tx)("general.back"),type:"button",onClick:t,ctaTrackingDescriptor:ar.c.BACK},stepCounter:{stepNum:a,totalNumSteps:l},isShowing:!0,disableHighlight:!0,zIndex:sG.R.TERTIARY_MODAL})}];function dx({onCloseOrComplete:e}){let[t,n]=f.useState(!1),a=(0,sJ.A)({numSteps:dT.length,onComplete:e}),l=f.useMemo(()=>dT.map((t,n)=>f.createElement(t,{onClickPrimaryCta:a.next,onClickSecondaryCta:a.back,onClose:e,currStepNum:n+1,totalNumSteps:dT.length})),[e,a.back,a.next]),r=(0,_.wA)();return((0,np.h)(()=>{r(j.b({seen_gen1_design_viewer_onboarding:!0}))}),t)?f.createElement(sq.U,{currentStep:a.currentStep,children:l,isShowing:!0}):f.createElement(dh,{onClose:e,onClickPrimaryCta:()=>n(!0)})}function dN(){let{getConfig:e}=(0,I.I7)("exp_gen1_viewer_onboarding"),t=(0,S.md)(ab.wg),n=(0,S.md)(dd),a=!!(0,eT.f)("dismissed_gen1_design_viewer_banner"),l=!!(0,eT.f)("seen_gen1_design_viewer_onboarding"),[r,i]=f.useState(()=>!!l),o=!!(0,eT.f)("dismissed_gen1_design_viewer_onboarding"),s=l&&!a,c=(0,y.kc)().exp_gen1_viewer_onboarding_ff,{show:d,isShowing:u,complete:m}=(0,n7.e)({overlay:an.Xh8,priority:n8.N.OVERRIDING_MODAL,experiment:{check:()=>!!s||e().get("should_see_gen1_viewer_onboarding",!1),predicate:e=>e,postCheck:()=>!a||!l}}),p=(0,_.wA)();return(f.useEffect(()=>{c&&!u&&(n||s)&&!t&&d()},[t,c,n,u,s,d]),u)?f.createElement(f.Fragment,null,f.createElement(d_,{onClose:()=>{(o||r)&&m()}}),n&&!r&&!o&&f.createElement(dx,{onCloseOrComplete:()=>{p(j.b({dismissed_gen1_design_viewer_onboarding:!0})),a&&m()}})):null}var dS=n(634732),dk=n(493364);function dI(){let e=(0,_.wA)(),t=(0,_.d4)(e=>e.currentTeamId),n=(0,_.Pj)(),a=(0,S.md)(sR.t),l=(0,S.md)(ab.NZ),r=(0,dt.jO)(),i=(0,S.md)(ab.wg),{getConfig:o}=(0,I.I7)("exp_library_upsells_v2"),{isShowing:s,show:c,complete:d,uniqueId:u}=(0,n7.e)({overlay:an.BrS,priority:n8.N.DEFAULT_MODAL,experiment:{check:()=>o().get("show_library_upsell",!1),predicate:e=>e,postCheck:e=>!0}},[a]);(0,f.useEffect)(()=>{if(!s)return;let t=n.getState().leftPanel.activeTab;return e(K.FP({tab:ei.xae.ASSETS})),()=>{e(K.FP({tab:t}))}},[e,n,s]);let m=(0,f.useCallback)(e=>{var t;(null==(t=e.properties)?void 0:t.action)==="copy_paste_from_different_file"&&i&&c({canShow:e=>e&&l&&r})},[i,c,l,r]),p=(0,f.useCallback)(()=>{s&&d()},[s,d]);return(0,sD.E)(u,"component_instance_inserted",m),f.createElement(n9.rq,{isShowing:s,targetKey:n8.D,title:(0,eN.tx)("rcs.upsell_libraries.reuse_components_across_all_files"),description:(0,eN.tx)("rcs.upsell_libraries.quickly_access_components"),primaryCta:{label:(0,eN.tx)("rcs.upsell_libraries.see_plans"),type:"button",onClick:()=>{e(ty.to({type:sP.V,data:{teamId:t??void 0,upsellSource:sM.b.UPSELL_LIBRARIES_REUSE_COMPONENTS_OVERLAY,openCheckoutInNewTab:!0}})),p()},ctaTrackingDescriptor:ar.c.GOT_IT},secondaryCta:{label:(0,eN.tx)("rcs.upsell_libraries.not_now"),type:"button",onClick:p,ctaTrackingDescriptor:ar.c.GOT_IT},onClose:p,trackingContextName:"Upsell Libraries Reuse Components Overlay",arrowPosition:dk.F_.LEFT_TITLE,emphasized:!0,onTargetLost:p})}var dA=n(278733);let dO="seen_link_shortcut_overlay",dL=(0,ai.r1)(dO);function dP(){let e=(0,_.wA)(),t=(0,e2.md)(dL),{show:n,isShowing:a,complete:l,uniqueId:r}=(0,n7.e)({overlay:an.v75,priority:n8.N.DEFAULT_MODAL},[t]),i=dE.y.isApple(),o=f.useMemo(()=>f.createElement(nw.S,{shortcut:i?"\u2318K":"Ctrl+K"}),[i]),s=f.useMemo(()=>f.createElement(nw.S,{shortcut:i?"\u21E7\u2318U":"Shift+Ctrl+U"}),[i]);return(0,sD.E)(r,["show_link_shortcuts_overlay"],()=>{n({canShow:t=>(e(j.b({seen_link_shortcut_overlay:!0})),!!(0,aI.AL)()&&!t)})}),f.createElement(sH.X,{width:350,isShowing:a,title:(0,eN.tx)("fullscreen.link_shortcuts_onboarding.title"),description:f.createElement("div",null,(0,eN.tx)("fullscreen.link_shortcuts_onboarding.description"),f.createElement("ul",{className:a8.cx.py8.$,style:dA.sx.add({listStyle:"disc inside"}).$},f.createElement("li",null,(0,eN.tx)("fullscreen.link_shortcuts_onboarding.show_actions_updated",{actionsKeyCommand:f.createElement("strong",null,o)})),f.createElement("li",null,(0,eN.tx)("fullscreen.link_shortcuts_onboarding.show_links_updated",{link:f.createElement("strong",null,(0,eN.tx)("fullscreen.link_shortcuts_onboarding.create_link")),linkKeyCommand:s})))),primaryCta:{label:(0,eN.tx)("fullscreen.link_shortcuts_onboarding.got_it"),type:"button",onClick:l,ctaTrackingDescriptor:ar.c.GOT_IT},trackingContextName:"Link Shortcuts Preference Onboarding Modal",userFlagOnShow:dO,position:sG.Q.BOTTOM_RIGHT,onClose:l,testId:"linkShortcutOverlay"})}var dD=n(140908),dR=n(689404),dM=n(630834);let dF="dismissed_local_component_asset_panel_pointer",dB=(0,ai.r1)(dF);function dU(){let e=(0,_.wA)(),t=(0,ew.TA)(),n=(0,S.md)(ab.wg),a=(0,S.md)(dB),l=(0,S.md)(ab.NZ),r=(0,S.md)(ab.pQ),i=(0,S.md)(sR.t),o=(0,dt.jO)(),s=(0,_.d4)(e=>{var t;return(null==(t=e.openFile)?void 0:t.teamId)==null}),c=(0,n6.GS)(),{isShowing:d,show:u,complete:m,uniqueId:p}=(0,n7.e)({overlay:an.Smd,priority:n8.N.SECONDARY_MODAL,experiment:{check:()=>(0,dD.Hz)(t??void 0),predicate:e=>e,postCheck:e=>!e}},[a,i,r]),g=(0,f.useCallback)(()=>{n&&u({canShow:(e,t,n)=>o&&t&&(n||l)})},[o,n,l,u]),h=(0,f.useCallback)(()=>{d&&(m(),e(j.b({[dF]:!0})))},[e,m,d]);return(0,sD.E)(p,"action_create_symbol",g),(0,sD.E)(p,"component_instance_inserted",h),f.createElement(n9.rq,{isShowing:d,targetKey:at.Qr,description:f.createElement(f.Fragment,null,f.createElement("div",{className:a8.cx.if(c,a8.cx.pt6.mr36).$},s?(0,eN.tx)("design_systems.assets_panel.drag_drop_component_draft"):(0,eN.tx)("design_systems.assets_panel.drag_drop_component")),c&&f.createElement(tN.Jn,{onClick:h,innerText:(0,eN.t)("general.close"),"aria-label":(0,eN.t)("general.close"),className:nb()(dR.Rf,a8.cx.absolute.top0.right0.mr8.mt10.$),svg:dM.default})),primaryCta:{label:(0,eN.tx)("design_systems.assets_panel.got_it"),type:"button",onClick:h,ctaTrackingDescriptor:ar.c.GOT_IT},onClose:h,trackingContextName:"Local Component Asset Panel Pointer",arrowPosition:dk.F_.LEFT_TITLE,emphasized:!0,hideCloseButton:c})}var dH=n(206121);let dG=(0,ai.r1)("seen_mobile_comment_download_modal_prompt");function dV(){let e=(0,_.wA)(),t=(0,S.md)(dG),n=(0,_.d4)(e=>{var t;return null==(t=e.userAnalyticsData)?void 0:t.is_active_mobile_user}),a=(0,_.d4)(e=>{var t;return null==(t=e.user)?void 0:t.created_at}),l=(0,cF.A)(a).add(14,"day").isSameOrAfter((0,cF.A)()),{isShowing:r,show:i,complete:o,uniqueId:s}=(0,n7.e)({overlay:an.H2x,priority:n8.N.DEFAULT_MODAL},[t]);if((0,sD.E)(s,dH.w,(0,f.useCallback)(()=>{i({canShow:e=>!!(0,y.kc)().mobile_download_modal_prompts&&!e&&!l&&!n})},[i,n,l])),!r)return null;let c=()=>{iD.Ay.post("/api/send_mobile_download_email",{type:"comment"}),(0,Z.sx)("post_comment_mobile_app_download_prompt_email_me_cta_clicked"),o(),e(eS.F.enqueue({message:(0,eN.t)("rcs.mobile_comment_reply_upsell.email_sent")}))};return f.createElement(sH.X,{isShowing:r,title:(0,eN.tx)("mobile_download_prompts.never_miss_a_comment"),description:(0,eN.tx)("mobile_download_prompts.scan_the_qr_code"),media:f.createElement(sU.y,{aspectRatio:1.75,alt:"A graphic show mobile comments with a qr code",src:"https://static.figma.com/uploads/6c270bb31fb5af03393425b7f0a6462ec59d04ab"}),primaryCta:{label:(0,eN.tx)("mobile_download_prompts.email_me"),type:"button",onClick:()=>c(),ctaTrackingDescriptor:ar.c.MOBILE_APP_DOWNLOAD_COMMENT_PROMPT_CLICKED},trackingContextName:"Mobile Comment Download Modal Prompt",onClose:()=>{o()},userFlagOnShow:"seen_mobile_comment_download_modal_prompt",position:sG.Q.BOTTOM_RIGHT,secondaryCta:{label:(0,eN.tx)("mobile_download_prompts.learn_more"),type:"link",href:"https://help.figma.com/hc/en-us/articles/1500007537281-Guide-to-the-Figma-mobile-app",ctaTrackingDescriptor:ar.c.LEARN_MORE}})}var dK=n(844647),dW=n(288527),dz=n(723200),dj=n(754407),dJ=n(720750),dY=n(20812);function dX(e){return f.createElement("div",{className:"connector_modal_wrapper--connectorModalWrapper--uCUjA"},e.children)}var dq=n(63666),dZ=n(50772),dQ=n(698380);let d$="onboard_figjam_viewer--contentContainer--t9zim",d0="onboard_figjam_viewer--imageContainer--rvqD8",d1="onboard_figjam_viewer--image--ZdwAA",d2="onboard_figjam_viewer--mainContent--8TgvP text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",d5="onboard_figjam_viewer--normal--HjE2J",d4="onboard_figjam_viewer--bold--kC3mV";class d3 extends f.PureComponent{render(){return f.createElement("div",{className:d$},f.createElement("div",{style:dA.sx.add({width:`${this.props.imgContainerWidth}px`}).$,className:d0},f.createElement("span",{className:"onboard_figjam_viewer--imgHelper--SJXYZ","aria-hidden":"true"}),f.createElement("img",{className:d1,src:this.props.imgSrc,alt:""})),f.createElement("div",{className:nb()({[d2]:!0,[d5]:!this.props.isBold,[d4]:!!this.props.isBold})},this.props.titleText&&f.createElement("div",{className:"onboard_figjam_viewer--title--k1Gpk"},this.props.titleText),f.createElement("div",{className:"onboard_figjam_viewer--text--xkcTB"},this.props.bodyText),f.createElement("div",{className:"onboard_figjam_viewer--bottomContentRow--PgTeU"},f.createElement("div",{className:nb()({"onboard_figjam_viewer--secondaryText--THVcI":!0,[d5]:!this.props.isBold,[d4]:!!this.props.isBold})},this.props.steps?(0,eN.tx)("rcs.rcs_shared.step_counter",{currentStepNum:this.props.steps.current,totalNumSteps:this.props.steps.total}):f.createElement(f.Fragment,null)),f.createElement(a1.vd,{className:nb()({"onboard_figjam_viewer--ctaButton--aFKKt text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI":!0,[d4]:!!this.props.isBold}),onClick:this.props.onNext,autoFocus:!0},this.props.buttonText,!this.props.buttonText&&this.props.steps&&this.props.steps.current===this.props.steps.total&&(0,eN.tx)("rcs.rcs_shared.done"),!this.props.buttonText&&this.props.steps&&this.props.steps.current<this.props.steps.total&&(0,eN.tx)("rcs.figjam_onboarding.next")))),f.createElement(tN.Jn,{className:nb()({"onboard_figjam_viewer--closeButton--hm43f close_button--closeX--Bc-63":!0,[d5]:!this.props.isBold,[d4]:!!this.props.isBold}),onClick:this.props.onDismiss,innerText:"close",svg:dM.default}))}}d3.displayName="FigJamOnboardingModal";var d6=n(259494);function d7(e){let t=(0,dQ.O)();(0,f.useEffect)(()=>(et.Y5.triggerAction("set-tool-hand",null),()=>et.Y5.triggerAction("set-tool-default",null)),[]),(0,f.useEffect)(()=>(t({eventName:"hand_tooltip_shown"}),()=>t({eventName:"pan_zoom_completed"})),[t]);let n=(0,dD.Un)();return f.createElement(dX,null,f.createElement(dq.Dv,{targetType:"dom",targetKey:d6.N,topPadding:-6,hasShadow:e.hasShadow},f.createElement(d3,{bodyText:f.createElement("span",null,(0,eN.tx)("rcs.figjam_onboarding.use_the_hand_tool_and_drag_to_move_around_hold_space_to_activate_it_anytime",{spaceKey:f.createElement("b",null,(0,eN.tx)("rcs.figjam_onboarding.space"))})),onNext:e.onClickPrimaryCta,steps:{current:2,total:n?2:3},onDismiss:()=>{e.dismissModal(),t({eventName:"hand_tooltip_dismissed"})},imgSrc:"https://static.figma.com/uploads/07ff49c75c8933ea70ff2e4776503291c31a35ef"})))}var d8=n(911738);function d9(e){let t=C.Ay.mac?(0,eN.t)("rcs.figjam_onboarding.cmd"):(0,eN.t)("rcs.figjam_onboarding.ctrl"),n=(0,d8.O)()?-10:-3,a=(0,dD.Un)(),l=(0,dQ.O)();return(0,f.useEffect)(()=>{l({eventName:"zoom_tooltip_shown"})},[l]),f.createElement(dX,null,f.createElement(dq.Dv,{targetType:"dom",topPadding:n,targetKey:d6.q,hasShadow:e.hasShadow},f.createElement(d3,{bodyText:f.createElement("span",null,(0,eN.tx)("rcs.figjam_onboarding.pinch_to_zoom_on_a_trackpad_hold_command_while_scrolling_or_use",{commandKey:f.createElement("b",null,t),plusOrMinusKeys:f.createElement("b",null,(0,eN.tx)("rcs.figjam_onboarding.plus_or_minus"))})),onNext:e.onClickPrimaryCta,steps:{current:1,total:a?2:3},onDismiss:()=>{e.dismissModal(),l({eventName:"zoom_tooltip_dismissed"})},imgSrc:"https://static.figma.com/uploads/4e36d3bbbf8633fef1b86238f66bb1bf54f54d2a"})))}function ue(e){return f.createElement(sZ.h,{testId:e.testId?e.testId:"ZoomConnectorOverlay",modalType:s0.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Zoom",element:d9,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function ut(e){let t=(0,dD.Un)();return f.createElement(sZ.h,{testId:e.testId?e.testId:"HandToolConnectorOverlay",modalType:s0.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Hand Tool",userFlagOnShow:t?"figjam_editor_onboarded":void 0,element:d7,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}let un=[ue,ut,function(e){return f.createElement(sZ.h,{testId:e.testId?e.testId:"ShareConnectorOverlay",modalType:s0.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Share",userFlagOnShow:"figjam_editor_onboarded",element:e=>f.createElement(dX,null,f.createElement(dq.Dv,{targetType:"dom",targetKey:at.v4,topPadding:-6},f.createElement(d3,{bodyText:f.createElement("span",null,(0,eN.tx)("rcs.figjam_onboarding.invite_others_or_share_this_file_with_a_link_to_jam_with_your_team")),onNext:e.onClickPrimaryCta,steps:{current:3,total:3},onDismiss:e.dismissModal,imgSrc:"https://static.figma.com/uploads/8f3066fc3906f11f2601a390725f2b7af58e01a1"}))),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}];var ua=n(67085),ul=n(507367),ur=n(335775),ui=n(391388),uo=n(680229);function us({skipAccountCreationDateCheck:e=!1}){let t=(0,eb.aV)(),n=(0,Q.lg)(),a=!!(0,y.kc)().figjam_share_to_google_classroom,l=(0,af.q5)(),r=(0,S.md)(sR.mp),i=(0,eW.Rs)(eJ.KMT,{currentOrgId:(null==l?void 0:l.parentOrgId)||null});return f.useMemo(()=>ui.Qw.all([r,i]).transform(l=>{var r,i;let[o,s]=l,c=function(e){let t=Date.now();return e.getTime()<=t-12096e5}(o),d=!!(null==(r=s.org)?void 0:r.k12GoogleOrg)||(0,uo.aA)((null==(i=s.currentUser.profile)?void 0:i.jobTitle)||"");return!t&&a&&n===a_._Y.WHITEBOARD&&(e||c)&&d}),[r,i,n,a,t,e])}function uc({isShowing:e,onPrimaryCtaClick:t,onClose:n}){return f.createElement(si.M,{isShowing:e},f.createElement(Y.fu,{name:"Share to Google Classroom New User Onboarding"},f.createElement(dq.Dv,{targetType:"dom",targetKey:"share",isBold:!0,topPadding:-6,autoWidth:!0},f.createElement(d3,{isBold:!0,titleText:(0,eN.tx)("whiteboard.google_classroom.onboarding.new_user.header"),bodyText:(0,eN.tx)("whiteboard.google_classroom.onboarding.new_user.body"),buttonText:(0,eN.tx)("whiteboard.google_classroom.onboarding.show_me"),onNext:t,onDismiss:n,imgSrc:"https://static.figma.com/uploads/db6976747d085e1350d443cd04b08e7ba979b86b",imgContainerWidth:105}))))}function ud({isShowing:e,onClose:t}){return f.createElement(n9.rq,{isShowing:e,zIndex:sG.R.MODAL,trackingContextName:"Share to Google Classroom Share Option Pointer",targetKey:ur.pb,arrowPosition:dk.F_.LEFT_TITLE,description:f.createElement("div",null,(0,eN.tx)("whiteboard.google_classroom.pointer.body")),onClose:t,onTargetLost:t,emphasized:!0,disableHighlight:!0,clickOutsideToHide:!0})}let uu="seen_figjam_share_to_google_classroom_existing_user_onboarding",um=(0,ai.r1)(uu),up="seen_figjam_share_to_google_classroom_new_user_onboarding",uf=(0,ai.r1)(up),u_=(0,ai.r1)("has_shared_to_google_classroom"),ug=(0,ai.r1)("figjam_editor_onboarded"),uh="start_share_to_classroom_new_user_onboarding";function uE(){let e=(0,_.wA)(),t=us({skipAccountCreationDateCheck:!0}),n=(0,S.md)(um),a=(0,S.md)(uf),l=(0,S.md)(u_),r=(0,S.md)(ur.Ij),{show:i,isShowing:o,complete:s,uniqueId:c}=(0,n7.e)({overlay:an.DKg,priority:n8.N.OVERRIDING_MODAL},[a,n,l,t]);(0,sD.E)(c,uh,()=>{i({onShow:()=>{e(j.b({[up]:!0}))},canShow:(e,t,n,a)=>!e&&!t&&!n&&a})}),f.useEffect(()=>{n.data&&s()},[n,s]);let{currentStep:d,next:u}=(0,sJ.A)({numSteps:2,onComplete:s}),m=function({isShowing:e,next:t,complete:n}){let a=(0,_.wA)(),l=(0,af.q5)();return[f.createElement(uc,{key:"share-to-google-classroom-new-user-callout",isShowing:e,onPrimaryCtaClick:()=>{if(!l){n();return}a((0,ty.to)({type:ul.g_,data:{fileKey:l.key,source:ua.nk.shareToGoogleClassroomOnboarding}})),t()},onClose:n}),f.createElement(ud,{key:"share-to-google-classroom-share-option-pointer",isShowing:e,onClose:n})]}({isShowing:o,next:u,complete:s});return f.useEffect(()=>{r&&o&&0===d&&u()},[d,o,r,u]),f.createElement(sq.U,{currentStep:d,isShowing:o,children:m})}var uv=n(554905);function uy(){let e=(0,_.d4)(e=>{var t;return null==(t=e.userFlags)?void 0:t.figjam_editor_onboarded}),t=(0,Q.ow)(),n=!(0,uv.Td)(),a=(0,af.q5)(),l=null==a?void 0:a.creatorId,r=(0,ew.TA)(),i=null===a||l===r;return t&&!i&&n&&!e}function ub(e){let t=(0,_.wA)();return()=>{t(j.b({figjam_editor_onboarded:!0})),e()}}function uC({overlayUniqueId:e,afterReset:t}){let n=(0,_.wA)();(0,sD.E)(e,"Reset Onboarding",()=>{n(j.b({figjam_editor_onboarded:!1,figjam_browse_templates_modal_onboarded:!1,figjam_browse_templates_modal_onboarding_item_selected:!1,figjam_participant_onboarded:!1})),t&&t()})}function uw({steps:e,onComplete:t,isShowing:n,overlayUniqueId:a}){let{currentStep:l,next:r,reset:i}=(0,sJ.A)({numSteps:e.length,onComplete:t});return uC({overlayUniqueId:a,afterReset:i}),f.createElement(sq.U,{currentStep:l,isShowing:n,children:f.useMemo(()=>e.map(e=>f.createElement(e,{onClickPrimaryCta:r,onClose:nf.lQ,onManualDismiss:t,isShowing:n})),[r,t,n,e])})}var uT=n(888699),ux=n(271779),uN=n(934533),uS=n(738274),uk=n(119198),uI=n(777078),uA=n(820642),uO=n(106112),uL=n(555328),uP=n(945020),uD=n(342720),uR=n(873327),uM=n(900073),uF=n(27928);function uB(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6 6h12a1 1 0 0 1 1 1v3H5V7a1 1 0 0 1 1-1Zm-1 5v6a1 1 0 0 0 1 1h3v-7H5Zm5 7h8a1 1 0 0 0 1-1v-6h-9v7ZM4 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7Z",clipRule:"evenodd"}))}var uU=n(457025),uH=n(136297);let uG=(0,f.memo)(function(e){let{tooltipText:t,isActive:n,onClick:a,recordingKey:l,addLeftMargin:r,dataElementTarget:i,onboardingKey:o,disabled:s,dataTestId:c}=e,d="text"in e&&!!e.text,u=nb()((0,uH.M)(!s,n),{"figjam_toolbar_item_ui2--toolButtonWithText--MYCBd":d,"figjam_toolbar_item_ui2--toolButtonContainer--oJdfs":!0,"figjam_toolbar_item_ui2--toolButtonContainerWithMargin--EaCDo":r});return f.createElement(a7.GG,{className:nb()(u,"figjam_toolbar_item_ui2--iconButton--v3qiH toolbar_view--iconButton--1MUm6"),"data-tooltip-type":nx.Ib.TEXT,"data-testid":c,"data-tooltip":t,"data-element-target":i,onKeyDown:e=>(0,ea.hx)({e,onClickHandler:a}),onClick:a,recordingKey:l,tabIndex:0,"aria-label":t,"aria-pressed":n,"data-fullscreen-intercept":!0,"data-onboarding-key":o,disabled:s},"icon"in e&&f.createElement(a2.B,{svg:e.icon}),d&&f.createElement("div",null,e.text),"children"in e&&f.createElement(f.Fragment,null,e.children))}),uV=(0,Y.tf)(uG);var uK=n(435898);let uW=(0,f.memo)((0,f.forwardRef)(function({tooltip:e,isActive:t,onClick:n,recordingKey:a,dataElementTarget:l,onboardingKey:r,disabled:i,dataTestId:o,children:s},c){let d=nb()("figjam_right_panel_button--button--Ul-Xf",{"figjam_right_panel_button--active--hWdY1":t});return f.createElement(a7.GG,{forwardedRef:c,className:d,"data-tooltip-type":e.type,"data-testid":o,"data-tooltip":e.type===nx.Ib.TEXT?e.text:e.key,"data-element-target":l,onKeyDown:e=>(0,ea.hx)({e,onClickHandler:n}),onClick:n,recordingKey:a,tabIndex:0,"aria-label":e.type===nx.Ib.TEXT?e.text:e.ariaLabel,"aria-pressed":t,"data-fullscreen-intercept":!0,"data-onboarding-key":r,disabled:i},s)})),uz=(0,Y.tf)(uW);var uj=n(663364);let uJ="templates_toolbar";function uY(){let e=(0,n6.GS)(),t=(0,_.wA)(),n=(0,_.d4)(e=>{var t;return(null==(t=e.modalShown)?void 0:t.type)===uF.PH.type}),a=!(0,B.q8)()&&(0,uK.Uy)(),l=(0,eN.t)("whiteboard.inserts.templates"),r={isActive:n,onClick:()=>{n?t(ty.Ce()):(uU.oW.trigger("action",ei.KWd.CLEAR),(0,uF.KF)(t,{triggeredFrom:"toolbar",templateInsertionLocation:uA.RD.CURRENT_FILE}))},trackingProperties:{trackingDescriptor:ar.c.TEMPLATES_TOOLBAR_ITEM_CLICKED},onboardingKey:uJ};return e?f.createElement(uz,{tooltip:{type:nx.Ib.TEXT,text:l},...r},f.createElement(uB,null)):f.createElement(uV,{icon:uj.A,addLeftMargin:!a,tooltipText:l,...r})}var uX=n(79132),uq=n(819338);function uZ({onClickPrimaryCta:e,useCase:t}){let n=(0,af.q5)(),a=(0,_.wA)(),l=(0,dQ.O)();return{onNext:(0,f.useCallback)(()=>{n&&(a((0,ty.to)({type:ul.g_,data:{fileKey:n.key,source:ua.nk.expFigJamOnboardingShareVariant}})),(0,n2.YQ)({id:"open share modal"}),l({eventName:"share_board_clicked",useCase:t})),e()},[n,a,e,l,t])}}let uQ="make_something_assets--svg--hgXqn",u$="make_something_assets--svgHovered--3XZdi",u0="make_something_assets--transformable--Ku46s",u1="make_something_assets--transformLeftBrainstorm--To6dH",u2="make_something_assets--transformRightBrainstorm--DH4Yj",u5="make_something_assets--transformLeftUpdates--HVSJ5",u4="make_something_assets--transformRightUpdates--jOJJ-",u3="make_something_assets--transformLeftPlanning--6tBWf",u6="make_something_assets--transformRightPlanning--H2U0C",u7="make_something_assets--transformRightDiagramming--2ff-F";function u8(e){return f.createElement("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:nb()(uQ,{[u$]:e.hovered})},f.createElement("rect",{x:"27.1868",y:"27.8497",width:"141.626",height:"142.374",fill:"#E5F4FF",stroke:"black",strokeWidth:"0.373684"}),f.createElement("rect",{x:"27.1868",y:"3.18684",width:"141.626",height:"19.8053",fill:"#0D99FF",stroke:"black",strokeWidth:"0.373684"}),f.createElement("g",{filter:"url(#filter0_d_351_43460)"},f.createElement("rect",{x:"37.4653",y:"38.1284",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),f.createElement("rect",{x:"37.6522",y:"38.3153",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),f.createElement("g",{filter:"url(#filter1_d_351_43460)"},f.createElement("rect",{x:"124.157",y:"81",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),f.createElement("rect",{x:"124.344",y:"81.1868",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),f.createElement("g",{filter:"url(#filter2_d_351_43460)"},f.createElement("rect",{x:"81",y:"38",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),f.createElement("rect",{x:"81.1868",y:"38.1868",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),f.createElement("g",{filter:"url(#filter3_d_351_43460)"},f.createElement("rect",{x:"80.8096",y:"123.326",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),f.createElement("rect",{x:"80.9964",y:"123.513",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),f.createElement("rect",{x:"84.9214",y:"128.181",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"40.8262",y:"42.2361",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"129.021",y:"85.1079",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"129.021",y:"100.057",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"40.8262",y:"49.7126",width:"18.3105",height:"4.48421",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"129.021",y:"92.584",width:"20.9263",height:"4.48421",fill:"black",fillOpacity:"0.2"}),f.createElement("path",{d:"M87.4033 45.8193C88.2079 46.4289 88.9008 47.0959 89.6122 47.8073",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),f.createElement("path",{d:"M97.5591 43.8335V48.0303",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),f.createElement("path",{d:"M103.975 49.5765C106.065 48.776 108.231 47.9817 110.38 47.3677",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),f.createElement("path",{d:"M103.748 57.5273H109.491",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),f.createElement("path",{d:"M98.8926 62.6094V67.4688",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),f.createElement("path",{d:"M90.1268 58.5264C89.2081 59.2528 88.1169 59.8811 87.2876 60.7104",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),f.createElement("g",{filter:"url(#filter4_d_351_43460)"},f.createElement("rect",{x:"81",y:"80.7251",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),f.createElement("rect",{x:"81.1868",y:"80.9119",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),f.createElement("path",{d:"M108.795 102.748L108.954 102.837L109.047 102.681L109.454 101.997C109.755 101.492 110.248 101.121 110.825 100.966C111.402 100.812 112.014 100.886 112.527 101.173C113.039 101.459 113.41 101.933 113.559 102.489C113.708 103.046 113.625 103.642 113.324 104.146L113.324 104.146L112.957 104.763L112.957 104.763L110.552 108.797L105.825 106.155C105.313 105.869 104.942 105.395 104.793 104.839C104.644 104.282 104.728 103.687 105.028 103.183C105.329 102.678 105.821 102.308 106.398 102.153C106.975 101.998 107.587 102.073 108.1 102.36L108.795 102.748Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.373684"}),f.createElement("path",{d:"M116.865 94.0866L116.958 94.2427L117.116 94.154L117.811 93.7653C118.324 93.4788 118.936 93.4037 119.513 93.5582C120.09 93.7127 120.583 94.0836 120.884 94.5878C121.185 95.0918 121.269 95.6876 121.12 96.2442C120.971 96.8009 120.6 97.2749 120.088 97.5613L120.088 97.5614L119.461 97.9124L119.461 97.9125L115.362 100.203L112.589 95.5518C112.288 95.0478 112.204 94.4522 112.353 93.8958C112.502 93.3393 112.873 92.8655 113.385 92.5793C113.897 92.293 114.51 92.2181 115.087 92.3727C115.664 92.5273 116.156 92.8982 116.457 93.4024L116.865 94.0866Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.373684"}),f.createElement("g",{filter:"url(#filter5_d_351_43460)",className:nb()(u0,u2)},f.createElement("rect",{x:"124",y:"37.761",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),f.createElement("rect",{x:"124.187",y:"37.9478",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),f.createElement("path",{d:"M131.262 57.6483C132.364 58.2951 133.535 59.063 134.814 59.2976C138.578 59.9876 139.728 56.6784 139.99 53.525C140.181 51.2338 140.49 47.2706 137.707 46.3822C135.469 45.668 135.63 48.5222 135.525 50.0614C135.198 54.8126 139.249 59.0839 144.177 57.7244C145.893 57.251 147.804 55.2775 148.694 53.7787C149.217 52.8971 149.432 51.8588 149.988 51.0257",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round",className:nb()(u0,u2)}),f.createElement("circle",{cx:"150.532",cy:"37.7597",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684",className:nb()(u0,u2)}),f.createElement("g",{filter:"url(#filter6_d_351_43460)",className:nb()(u0,u1)},f.createElement("rect",{x:"37",y:"81.208",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),f.createElement("rect",{x:"37.1868",y:"81.3948",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),f.createElement("rect",{className:nb()(u0,u1),x:"41.8633",y:"87.5618",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),f.createElement("circle",{className:nb()(u0,u1),cx:"70.6325",cy:"98.0258",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684"}),f.createElement("circle",{className:nb()(u0,u1),cx:"61.2902",cy:"106.617",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684"}),f.createElement("defs",null,f.createElement("filter",{id:"filter0_d_351_43460",x:"37.4653",y:"38.1284",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),f.createElement("filter",{id:"filter1_d_351_43460",x:"124.157",y:"81",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),f.createElement("filter",{id:"filter2_d_351_43460",x:"81",y:"38",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),f.createElement("filter",{id:"filter3_d_351_43460",x:"80.8096",y:"123.326",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),f.createElement("filter",{id:"filter4_d_351_43460",x:"81",y:"80.7251",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),f.createElement("filter",{id:"filter5_d_351_43460",x:"124",y:"37.761",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),f.createElement("filter",{id:"filter6_d_351_43460",x:"37",y:"81.208",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"}))))}function u9(e){return f.createElement("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:nb()(uQ,{[u$]:e.hovered})},f.createElement("rect",{width:"196",height:"121.761",fill:"white"}),f.createElement("rect",{x:"27.183",y:"49.6627",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),f.createElement("rect",{x:"31.7598",y:"59.3601",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),f.createElement("circle",{cx:"58.6556",cy:"61.7423",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),f.createElement("rect",{x:"76.5885",y:"49.6627",width:"42.82",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),f.createElement("rect",{x:"80.7957",y:"59.3601",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),f.createElement("circle",{cx:"109.161",cy:"61.7423",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),f.createElement("rect",{x:"76.5888",y:"3.18299",width:"42.82",height:"23.7889",rx:"2.01291",fill:"#FFCD29",stroke:"black",strokeWidth:"0.365983"}),f.createElement("rect",{x:"80.7959",y:"12.8804",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),f.createElement("circle",{cx:"110.261",cy:"15.2623",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),f.createElement("rect",{x:"125.631",y:"130.178",width:"43.0186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),f.createElement("rect",{x:"27.183",y:"89.9188",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),f.createElement("rect",{x:"33.5896",y:"99.6157",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),f.createElement("circle",{cx:"60.4899",cy:"101.998",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),f.createElement("g",{clipPath:"url(#clip0_351_43276)"},f.createElement("path",{d:"M61.0894 105.123C60.3396 105.1 59.722 104.946 59.1311 104.674C58.9431 104.588 58.7461 104.522 58.5542 104.448C58.3001 104.35 58.0777 104.2 57.9633 103.952C57.7015 103.384 57.427 102.818 57.2237 102.227C57.0344 101.676 57.1513 101.125 57.4918 100.655C57.7562 100.29 57.9163 99.8986 58.0319 99.4665C58.1742 98.9366 58.5669 98.643 59.1006 98.5287C59.3459 98.4766 59.5785 98.4931 59.8123 98.5833C60.0296 98.6672 60.2545 98.6812 60.482 98.6189C60.9039 98.5032 61.2889 98.6227 61.6663 98.8044C61.843 98.8883 62.0234 98.9772 62.2128 99.0192C62.8367 99.1564 63.157 99.5669 63.2421 100.164C63.284 100.46 63.2599 100.769 63.2383 101.07C63.2192 101.333 63.2472 101.582 63.331 101.83C63.5483 102.473 63.5153 103.102 63.2179 103.716C63.0362 104.092 62.7389 104.346 62.378 104.541C62.1251 104.677 61.8735 104.816 61.6282 104.966C61.43 105.087 61.2177 105.129 61.0894 105.123ZM61.083 104.886C61.2787 104.889 61.4274 104.827 61.6269 104.673C61.7616 104.57 61.9218 104.499 62.0704 104.415C62.2458 104.317 62.4517 104.251 62.594 104.118C63.1989 103.548 63.3361 102.819 63.1328 102.055C63.0019 101.562 62.9625 101.089 63.0197 100.591C63.0934 99.9405 62.7376 99.4512 62.1136 99.2784C61.8976 99.2187 61.6905 99.117 61.4872 99.0192C61.2266 98.8946 60.9585 98.7866 60.6713 98.8553C60.2977 98.9442 59.9419 98.9163 59.5835 98.7955C59.4666 98.7561 59.3345 98.7206 59.215 98.7345C58.7347 98.7904 58.3979 99.0738 58.2772 99.5237C58.1463 100.013 57.9264 100.439 57.6545 100.859C57.3724 101.296 57.2974 101.795 57.4982 102.297C57.6964 102.793 57.9125 103.284 58.126 103.774C58.2314 104.018 58.417 104.181 58.6673 104.274C58.9037 104.362 59.1426 104.444 59.3726 104.547C59.8796 104.772 60.4172 104.848 61.083 104.886Z",fill:"black"}),f.createElement("path",{d:"M60.5404 103.175C60.0016 103.198 59.5072 103.112 59.1222 102.711C59.0561 102.642 58.9938 102.566 58.9544 102.481C58.9354 102.441 58.9189 102.367 58.9926 102.326C59.0383 102.3 59.0968 102.327 59.1336 102.355C59.2264 102.424 59.3039 102.514 59.3979 102.583C59.8402 102.909 60.3294 103.011 60.8593 102.856C61.1275 102.778 61.3143 102.581 61.4795 102.365C61.5405 102.286 61.6078 102.167 61.7184 102.25C61.8289 102.333 61.7298 102.435 61.6726 102.511C61.3842 102.895 61.036 103.177 60.5404 103.175Z",fill:"black"}),f.createElement("path",{d:"M62.2294 101.088C62.2281 101.243 62.1099 101.367 61.9701 101.365C61.8253 101.362 61.7045 101.234 61.7083 101.088C61.7122 100.928 61.824 100.801 61.96 100.803C62.1124 100.805 62.2319 100.93 62.2294 101.088Z",fill:"black"}),f.createElement("path",{d:"M58.9061 101.294C58.9048 101.449 58.7867 101.573 58.6469 101.571C58.502 101.568 58.3813 101.44 58.3851 101.294C58.3889 101.134 58.5007 101.007 58.6367 101.009C58.7879 101.01 58.9074 101.136 58.9061 101.294Z",fill:"black"})),f.createElement("path",{d:"M96.5399 30.8149C96.5399 30.6128 96.7037 30.449 96.9058 30.449C97.108 30.449 97.2718 30.6128 97.2718 30.8149H96.5399ZM147.121 45.7131C146.978 45.856 146.747 45.856 146.604 45.7131L144.275 43.384C144.132 43.241 144.132 43.0093 144.275 42.8664C144.418 42.7234 144.649 42.7234 144.792 42.8664L146.863 44.9367L148.933 42.8664C149.076 42.7234 149.308 42.7234 149.45 42.8664C149.593 43.0093 149.593 43.241 149.45 43.384L147.121 45.7131ZM97.2718 30.8149V33.1938H96.5399V30.8149H97.2718ZM101.298 37.2196H142.471V37.9516H101.298V37.2196ZM147.229 41.9774V45.4543H146.497V41.9774H147.229ZM142.471 37.2196C145.098 37.2196 147.229 39.3498 147.229 41.9774H146.497C146.497 39.754 144.694 37.9516 142.471 37.9516V37.2196ZM97.2718 33.1938C97.2718 35.4172 99.0742 37.2196 101.298 37.2196V37.9516C98.67 37.9516 96.5399 35.8215 96.5399 33.1938H97.2718Z",fill:"black"}),f.createElement("path",{d:"M97.2684 30.8149C97.2684 30.6128 97.1045 30.449 96.9024 30.449C96.7002 30.449 96.5364 30.6128 96.5364 30.8149H97.2684ZM46.5039 45.7131C46.6468 45.856 46.8786 45.856 47.0215 45.7131L49.3506 43.384C49.4935 43.241 49.4935 43.0093 49.3506 42.8664C49.2077 42.7234 48.9759 42.7234 48.833 42.8664L46.7627 44.9367L44.6924 42.8664C44.5495 42.7234 44.3177 42.7234 44.1748 42.8664C44.0319 43.0093 44.0319 43.241 44.1748 43.384L46.5039 45.7131ZM96.5364 30.8149V33.1938H97.2684V30.8149H96.5364ZM92.5106 37.2196H51.1545V37.9516H92.5106V37.2196ZM46.3967 41.9774V45.4543H47.1287V41.9774H46.3967ZM51.1545 37.2196C48.5268 37.2196 46.3967 39.3498 46.3967 41.9774H47.1287C47.1287 39.754 48.9311 37.9516 51.1545 37.9516V37.2196ZM96.5364 33.1938C96.5364 35.4172 94.734 37.2196 92.5106 37.2196V37.9516C95.1382 37.9516 97.2684 35.8215 97.2684 33.1938H96.5364Z",fill:"black"}),f.createElement("path",{d:"M97.2686 30.6304C97.2686 30.4282 97.1047 30.2644 96.9026 30.2644C96.7005 30.2644 96.5366 30.4282 96.5366 30.6304H97.2686ZM96.6438 46.0775C96.7867 46.2204 97.0185 46.2204 97.1614 46.0775L99.4905 43.7484C99.6334 43.6054 99.6334 43.3737 99.4905 43.2308C99.3476 43.0879 99.1158 43.0879 98.9729 43.2308L96.9026 45.3011L94.8323 43.2308C94.6894 43.0879 94.4576 43.0879 94.3147 43.2308C94.1718 43.3737 94.1718 43.6054 94.3147 43.7484L96.6438 46.0775ZM96.5366 30.6304V45.8187H97.2686V30.6304H96.5366Z",fill:"black"}),f.createElement("g",{clipPath:"url(#clip1_351_43276)"},f.createElement("path",{d:"M58.8788 58.1369C59.7645 58.1496 60.4813 58.5105 61.1522 59.0925C62.5348 60.2921 62.6352 63.1971 60.4584 64.5085C58.9563 65.4133 56.9612 64.9838 55.998 63.3356C54.9331 61.5146 55.7781 59.0887 57.7364 58.3465C58.1036 58.2068 58.4836 58.133 58.8788 58.1369ZM61.8321 61.2731C61.8524 60.625 61.5258 59.874 60.9565 59.2831C60.2271 58.527 59.2867 58.2677 58.2511 58.5079C56.3449 58.9476 55.3105 61.1016 56.1263 62.9023C56.7032 64.1756 58.0592 64.8885 59.3554 64.6C60.8155 64.2747 61.8384 62.9874 61.8321 61.2731Z",fill:"black"}),f.createElement("path",{d:"M61.0418 62.2874C60.6491 63.2747 59.9489 63.8517 58.8903 63.8644C57.983 63.8746 57.3159 63.426 56.9105 62.5885C56.8851 62.6 56.8546 62.6152 56.8253 62.6254C56.7834 62.6406 56.7593 62.6508 56.7211 62.6025C56.7033 62.5796 56.6754 62.539 56.7275 62.497C56.8558 62.3916 56.9943 62.3001 57.1341 62.2124C57.1557 62.1984 57.2066 62.1971 57.2358 62.2416C57.2676 62.2912 57.2472 62.3229 57.2282 62.3484C57.1926 62.3954 57.1418 62.431 57.0909 62.4754C57.5764 63.2188 58.2232 63.6661 59.1483 63.5734C59.9641 63.492 60.5716 62.8872 60.794 62.1743C60.8041 62.1425 60.7685 62.1196 60.7342 62.0777C60.6771 62.0103 60.6377 61.9989 60.7025 61.8909C60.7495 61.8235 60.8219 61.8629 60.8639 61.8845C60.9973 61.9544 61.1294 62.0319 61.2464 62.126C61.2921 62.1628 61.376 62.2175 61.3213 62.3153C61.2705 62.4144 61.2006 62.3496 61.118 62.3255C61.0951 62.3153 61.0723 62.3013 61.0418 62.2874Z",fill:"black"}),f.createElement("path",{d:"M57.3933 60.2757C57.4657 60.1588 57.5445 60.066 57.6881 60.0953C57.8254 60.1232 57.8813 60.2427 57.8825 60.3532C57.8864 60.5718 57.8825 60.7967 57.8343 61.009C57.7847 61.2275 57.683 61.4359 57.5928 61.6431C57.5293 61.7892 57.4289 61.8184 57.3196 61.7117C56.9689 61.3661 56.7566 60.9518 56.7795 60.446C56.7859 60.3024 56.8634 60.1842 57.007 60.1359C57.162 60.0838 57.2815 60.155 57.3933 60.2757ZM57.6754 60.2999C57.6754 60.2999 57.6475 60.2592 57.6004 60.2732C57.5649 60.2706 57.5255 60.4219 57.5026 60.5019C57.481 60.5769 57.4848 60.6315 57.4314 60.6404C57.3463 60.6481 57.3526 60.5756 57.3171 60.54C57.3005 60.5223 57.2205 60.2961 57.1061 60.338C57.0324 60.3647 57.0286 60.4727 57.0324 60.5375C57.0502 60.8666 57.2001 61.1487 57.378 61.4512C57.5407 61.0611 57.7834 60.5375 57.6754 60.2999Z",fill:"black"}),f.createElement("path",{d:"M60.2957 60.1701C60.3885 60.118 60.4761 60.0736 60.5626 60.0914C60.6909 60.118 60.7163 60.2527 60.7278 60.3697C60.7646 60.742 60.6032 61.0571 60.4291 61.3672C60.3897 61.4371 60.3338 61.4981 60.297 61.5705C60.1915 61.7764 60.0098 61.7383 59.9094 61.5616C59.6997 61.1893 59.5802 60.7801 59.6184 60.3442C59.6323 60.1778 59.6946 60.0189 59.8789 59.9757C60.0644 59.93 60.2258 60.0469 60.2957 60.1701ZM60.067 61.3837C60.086 61.474 60.1051 61.4041 60.1229 61.3863C60.2499 61.1957 60.3783 61.005 60.4533 60.7954C60.5117 60.6314 60.6655 60.2159 60.5041 60.2578C60.4647 60.2604 60.424 60.3811 60.3897 60.4421C60.3618 60.4904 60.3046 60.5679 60.2804 60.5717C60.1877 60.5742 60.1991 60.4904 60.1813 60.4421C60.1394 60.3328 60.1432 60.1612 59.9869 60.1816C59.8319 60.2019 59.8497 60.3735 59.87 60.4853C59.9234 60.7865 59.9996 61.0851 60.067 61.3837Z",fill:"black"})),f.createElement("g",{clipPath:"url(#clip2_351_43276)"},f.createElement("path",{d:"M106.15 61.4002C106.19 60.3696 106.623 59.3517 107.641 58.6439C107.894 58.4685 108.194 58.3541 108.485 58.2436C110.078 57.6387 112.02 58.7328 112.438 60.7102C112.736 62.1156 112.387 63.3546 111.281 64.3014C109.773 65.5912 107.534 65.1172 106.591 63.3432C106.3 62.7917 106.153 62.2046 106.15 61.4002ZM109.218 64.6076C109.862 64.6089 110.388 64.4424 110.809 64.1489C112.465 62.9912 112.596 60.3836 111.064 59.062C110.367 58.4596 109.556 58.302 108.681 58.4965C108.409 58.5575 108.146 58.715 107.913 58.879C106.537 59.8511 106.176 61.8602 107.116 63.3127C107.638 64.1209 108.377 64.5784 109.218 64.6076Z",fill:"black"}),f.createElement("path",{d:"M108.781 63.6393C108.761 63.6736 108.735 63.708 108.716 63.7384C108.668 63.816 108.644 63.8439 108.552 63.8122C108.484 63.7728 108.498 63.6863 108.515 63.6393C108.564 63.5072 108.627 63.3801 108.701 63.2594C108.73 63.2111 108.787 63.1247 108.847 63.1526C108.893 63.1806 108.927 63.1971 108.888 63.3305C108.88 63.3559 108.871 63.3864 108.858 63.4271C109.174 63.586 109.496 63.6037 109.829 63.5237C110.313 63.4068 110.757 63.0421 111.012 62.5935C111.119 62.4054 111.164 62.225 111.222 61.9975C111.235 61.9505 111.269 61.8717 111.247 61.8577C111.218 61.8399 111.183 61.817 111.141 61.7992C111.059 61.7662 111.067 61.7052 111.084 61.6658C111.111 61.5972 111.165 61.5896 111.198 61.5985C111.387 61.6468 111.574 61.7078 111.758 61.7713C111.784 61.7802 111.818 61.8081 111.805 61.8691C111.791 61.9327 111.749 61.9441 111.713 61.9505C111.655 61.9606 111.593 61.9454 111.517 61.939C111.493 62.042 111.471 62.15 111.441 62.2542C111.208 63.0649 110.709 63.6139 109.876 63.8274C109.542 63.9125 109.203 63.8477 108.781 63.6393Z",fill:"black"}),f.createElement("path",{d:"M110.475 60.4918C110.475 60.3914 110.46 60.2859 110.481 60.1906C110.495 60.1296 110.527 60.0368 110.611 60.0381C110.692 60.0394 110.753 60.0991 110.772 60.1525C110.894 60.4994 110.944 60.859 110.894 61.2237C110.89 61.3216 110.795 61.38 110.752 61.38C110.674 61.38 110.597 61.3279 110.575 61.2377C110.517 60.9937 110.464 60.493 110.475 60.4918Z",fill:"black"}),f.createElement("path",{d:"M107.785 60.4853C107.791 60.4243 107.829 60.3175 107.921 60.2997C108.017 60.2743 108.052 60.39 108.063 60.4408C108.118 60.6848 108.104 60.639 108.132 60.9809C108.134 61.005 108.143 61.4129 108.133 61.5235C108.123 61.6404 108.059 61.6989 108.002 61.7014C107.894 61.7078 107.86 61.6353 107.836 61.5502C107.761 61.2909 107.725 61.0279 107.785 60.4853Z",fill:"black"})),f.createElement("g",{clipPath:"url(#clip3_351_43276)"},f.createElement("path",{d:"M111.595 18.3869C110.845 18.364 110.227 18.2102 109.637 17.9383C109.448 17.8519 109.251 17.7858 109.06 17.7121C108.805 17.6142 108.583 17.4643 108.469 17.2165C108.207 16.6485 107.932 16.0817 107.729 15.4908C107.54 14.9405 107.657 14.389 107.997 13.9188C108.262 13.5541 108.422 13.1627 108.537 12.7307C108.68 12.2007 109.072 11.9072 109.606 11.7928C109.851 11.7407 110.084 11.7572 110.318 11.8475C110.535 11.9313 110.76 11.9453 110.987 11.883C111.409 11.7674 111.794 11.8869 112.172 12.0686C112.348 12.1525 112.529 12.2414 112.718 12.2833C113.342 12.4206 113.662 12.831 113.747 13.4283C113.789 13.7244 113.765 14.0332 113.744 14.3344C113.725 14.5974 113.753 14.8465 113.836 15.0943C114.054 15.7373 114.021 16.3663 113.723 16.9801C113.542 17.3563 113.244 17.6104 112.883 17.8049C112.63 17.9408 112.379 18.0806 112.134 18.2306C111.935 18.3513 111.723 18.3932 111.595 18.3869ZM111.588 18.1505C111.784 18.1531 111.933 18.0908 112.132 17.937C112.267 17.8341 112.427 17.7629 112.576 17.6791C112.751 17.5812 112.957 17.5151 113.099 17.3817C113.704 16.8124 113.842 16.083 113.638 15.3192C113.507 14.8262 113.468 14.3534 113.525 13.8553C113.599 13.2047 113.243 12.7154 112.619 12.5426C112.403 12.4829 112.196 12.3812 111.993 12.2833C111.732 12.1588 111.464 12.0508 111.177 12.1194C110.803 12.2084 110.447 12.1804 110.089 12.0597C109.972 12.0203 109.84 11.9847 109.72 11.9987C109.24 12.0546 108.903 12.338 108.783 12.7878C108.652 13.2771 108.432 13.7028 108.16 14.1234C107.878 14.5606 107.803 15.0587 108.004 15.5607C108.202 16.0575 108.418 16.5481 108.631 17.0386C108.737 17.2826 108.922 17.4452 109.173 17.538C109.409 17.6257 109.648 17.7083 109.878 17.8112C110.385 18.0361 110.923 18.1124 111.588 18.1505Z",fill:"black"}),f.createElement("path",{d:"M111.046 16.4389C110.507 16.4618 110.013 16.3766 109.628 15.975C109.561 15.9064 109.499 15.8302 109.46 15.745C109.441 15.7056 109.424 15.6307 109.498 15.59C109.544 15.5646 109.602 15.5913 109.639 15.6192C109.732 15.6878 109.809 15.7781 109.903 15.8467C110.346 16.1733 110.835 16.2749 111.365 16.1199C111.633 16.0424 111.82 15.8454 111.985 15.6294C112.046 15.5506 112.113 15.4312 112.224 15.5138C112.334 15.5976 112.235 15.6993 112.178 15.7755C111.89 16.1593 111.541 16.4414 111.046 16.4389Z",fill:"black"}),f.createElement("path",{d:"M112.735 14.3521C112.733 14.5071 112.615 14.6316 112.475 14.6291C112.331 14.6266 112.21 14.4982 112.214 14.3521C112.218 14.192 112.329 14.0649 112.465 14.0674C112.618 14.0687 112.737 14.1945 112.735 14.3521Z",fill:"black"}),f.createElement("path",{d:"M109.411 14.5579C109.41 14.7129 109.292 14.8375 109.152 14.8349C109.007 14.8324 108.887 14.704 108.89 14.5579C108.894 14.3978 109.006 14.2707 109.142 14.2732C109.293 14.2745 109.413 14.4003 109.411 14.5579Z",fill:"black"})),f.createElement("path",{d:"M48.5913 77.6602C48.5913 77.458 48.4275 77.2942 48.2253 77.2942C48.0232 77.2942 47.8594 77.458 47.8594 77.6602H48.5913ZM47.9666 85.6046C48.1095 85.7475 48.3412 85.7475 48.4841 85.6046L50.8132 83.2755C50.9562 83.1326 50.9562 82.9008 50.8132 82.7579C50.6703 82.615 50.4386 82.615 50.2957 82.7579L48.2253 84.8282L46.155 82.7579C46.0121 82.615 45.7804 82.615 45.6375 82.7579C45.4945 82.9008 45.4945 83.1326 45.6375 83.2755L47.9666 85.6046ZM47.8594 77.6602V85.3458H48.5913V77.6602H47.8594Z",fill:"black"}),f.createElement("rect",{x:"125.264",y:"50.1747",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983",className:nb()(u0,u7)}),f.createElement("rect",{x:"131.664",y:"59.8726",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2",className:nb()(u0,u7)}),f.createElement("circle",{cx:"158.567",cy:"62.2545",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983",className:nb()(u0,u7)}),f.createElement("g",{clipPath:"url(#clip4_351_43276)",className:nb()(u0,u7)},f.createElement("path",{d:"M156.152 60.7639C156.525 60.325 156.935 59.9056 157.388 59.5486C157.703 59.3 157.811 59.2875 157.985 59.2403C158.032 59.2278 158.074 59.1986 158.114 59.1695C159.805 57.9764 161.959 58.8222 162.375 60.9278C162.652 62.325 161.939 63.7125 160.714 64.2792C160.695 64.2889 160.666 64.2917 160.656 64.307C160.413 64.6875 159.918 64.8347 159.617 64.9097C159.556 64.932 159.509 64.9958 159.453 65.0375C159.41 65.0695 159.367 65.1042 159.318 65.1264C157.725 65.8653 156.013 64.8764 155.638 63.2403C155.585 63.0097 155.353 61.6181 156.152 60.7639ZM159.47 64.1903C160.038 64.1875 160.409 64.0945 160.741 63.9125C162.338 63.0361 162.577 60.6556 161.171 59.4931C160.366 58.8278 159.335 58.7153 158.43 59.3528C157.353 60.1097 156.963 61.6611 157.566 62.8333C157.999 63.6764 158.686 64.1417 159.47 64.1903ZM160.013 64.55C160.082 64.525 160.092 64.507 160.081 64.4986C160.081 64.4986 160.052 64.4986 160.003 64.5C158.753 64.5945 157.813 64.0972 157.256 62.9764C156.711 61.882 156.843 60.807 157.486 59.7778C157.435 59.8028 157.393 59.8333 157.356 59.8681C156.489 60.6528 156.234 61.982 156.734 63.1181C157.195 64.1667 158.163 64.7889 159.252 64.7111C159.507 64.6931 159.759 64.6056 160.013 64.55ZM156.342 60.9472C156.343 60.907 156.306 60.957 156.3 60.9639C156.281 60.9903 156.261 61.0181 156.245 61.0458C156.016 61.432 155.873 61.85 155.853 62.2986C155.807 63.3208 156.166 64.1681 157.031 64.7458C157.606 65.1306 158.245 65.2097 158.913 65.0014C157.936 64.9028 157.175 64.45 156.661 63.6139C156.148 62.7806 156.066 61.8861 156.342 60.9472Z",fill:"black"}),f.createElement("path",{d:"M160.525 61.8376C160.717 61.8445 160.78 61.9445 160.717 62.1251C160.561 62.5695 160.124 62.7862 159.678 62.6307C159.414 62.5376 159.207 62.3682 159.064 62.1265C158.955 61.9404 159.003 61.8334 159.218 61.8195C159.443 61.8043 160.316 61.8293 160.525 61.8376ZM160.482 62.0543C160.099 62.0543 159.725 62.0543 159.348 62.0543C159.731 62.5001 160.298 62.5084 160.482 62.0543Z",fill:"black"}),f.createElement("path",{d:"M158.963 61.0499C158.964 61.2666 158.756 61.4638 158.528 61.4624C158.33 61.461 158.191 61.2819 158.189 61.0916C158.186 60.9013 158.381 60.7138 158.595 60.7082C158.8 60.7013 158.963 60.8513 158.963 61.0499ZM158.546 60.9124C158.443 60.9291 158.411 61.0263 158.42 61.0999C158.431 61.2069 158.511 61.2332 158.561 61.2346C158.609 61.236 158.702 61.1888 158.721 61.0971C158.746 61.0041 158.693 60.8777 158.546 60.9124Z",fill:"black"}),f.createElement("path",{d:"M161.617 61.1082C161.614 61.318 161.466 61.4721 161.267 61.4707C161.053 61.4694 160.899 61.2957 160.906 61.0638C160.912 60.8624 161.062 60.7069 161.248 60.711C161.441 60.7166 161.62 60.9082 161.617 61.1082ZM161.425 61.1027C161.425 60.9957 161.368 60.9235 161.28 60.9235C161.225 60.9235 161.134 60.9652 161.134 61.0791C161.134 61.2777 161.28 61.2666 161.28 61.2666C161.357 61.2638 161.425 61.2319 161.425 61.1027Z",fill:"black"})),f.createElement("rect",{x:"125.259",y:"90.4347",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),f.createElement("rect",{x:"131.662",y:"100.132",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),f.createElement("circle",{cx:"158.562",cy:"102.514",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),f.createElement("g",{clipPath:"url(#clip5_351_43276)"},f.createElement("path",{d:"M155.773 101.196C156.115 100.794 156.49 100.41 156.904 100.084C157.192 99.8563 157.291 99.8449 157.45 99.8017C157.493 99.7903 157.532 99.7636 157.568 99.7369C159.115 98.6453 161.086 99.4192 161.467 101.346C161.72 102.624 161.068 103.894 159.947 104.412C159.93 104.421 159.903 104.424 159.894 104.437C159.672 104.786 159.219 104.92 158.943 104.989C158.887 105.009 158.844 105.068 158.793 105.106C158.754 105.135 158.715 105.167 158.67 105.187C157.213 105.863 155.646 104.958 155.303 103.462C155.254 103.251 155.042 101.977 155.773 101.196ZM158.809 104.331C159.328 104.328 159.668 104.243 159.971 104.077C161.433 103.275 161.651 101.097 160.365 100.033C159.628 99.4243 158.685 99.3213 157.857 99.9046C156.872 100.597 156.515 102.017 157.066 103.089C157.463 103.861 158.092 104.286 158.809 104.331ZM159.306 104.66C159.369 104.637 159.378 104.62 159.368 104.613C159.368 104.613 159.341 104.613 159.297 104.614C158.153 104.701 157.293 104.246 156.783 103.22C156.285 102.219 156.406 101.235 156.994 100.293C156.947 100.316 156.909 100.344 156.875 100.376C156.082 101.094 155.848 102.31 156.305 103.35C156.727 104.309 157.613 104.878 158.609 104.807C158.843 104.791 159.073 104.711 159.306 104.66ZM155.947 101.363C155.948 101.327 155.914 101.372 155.909 101.379C155.891 101.403 155.873 101.428 155.858 101.454C155.648 101.807 155.517 102.189 155.5 102.6C155.458 103.535 155.786 104.31 156.577 104.839C157.103 105.191 157.688 105.263 158.299 105.073C157.406 104.983 156.709 104.568 156.239 103.803C155.769 103.041 155.694 102.223 155.947 101.363Z",fill:"black"}),f.createElement("path",{d:"M159.774 102.178C159.95 102.185 160.007 102.276 159.95 102.441C159.808 102.848 159.407 103.046 158.999 102.904C158.758 102.819 158.568 102.664 158.438 102.442C158.337 102.272 158.382 102.174 158.579 102.162C158.785 102.148 159.583 102.171 159.774 102.178ZM159.735 102.376C159.384 102.376 159.042 102.376 158.697 102.376C159.048 102.784 159.566 102.792 159.735 102.376Z",fill:"black"}),f.createElement("path",{d:"M158.345 101.458C158.346 101.656 158.155 101.836 157.947 101.835C157.765 101.834 157.638 101.67 157.637 101.496C157.634 101.322 157.812 101.15 158.008 101.145C158.196 101.139 158.345 101.276 158.345 101.458ZM157.964 101.332C157.87 101.347 157.84 101.436 157.848 101.503C157.858 101.601 157.932 101.625 157.978 101.627C158.021 101.628 158.106 101.585 158.124 101.501C158.147 101.416 158.098 101.3 157.964 101.332Z",fill:"black"}),f.createElement("path",{d:"M160.773 101.511C160.771 101.703 160.635 101.844 160.453 101.843C160.257 101.841 160.116 101.683 160.123 101.47C160.128 101.286 160.265 101.144 160.435 101.148C160.612 101.153 160.776 101.328 160.773 101.511ZM160.598 101.506C160.598 101.408 160.546 101.342 160.465 101.342C160.415 101.342 160.331 101.38 160.331 101.484C160.331 101.666 160.465 101.656 160.465 101.656C160.536 101.653 160.598 101.624 160.598 101.506Z",fill:"black"})),f.createElement("path",{className:nb()(u0,u7),d:"M147.77 78.1765C147.77 77.9744 147.606 77.8105 147.404 77.8105C147.202 77.8105 147.038 77.9744 147.038 78.1765H147.77ZM147.145 86.1209C147.288 86.2639 147.52 86.2639 147.663 86.1209L149.992 83.7918C150.135 83.6489 150.135 83.4172 149.992 83.2743C149.849 83.1313 149.617 83.1313 149.474 83.2743L147.404 85.3446L145.333 83.2743C145.191 83.1313 144.959 83.1313 144.816 83.2743C144.673 83.4172 144.673 83.6489 144.816 83.7918L147.145 86.1209ZM147.038 78.1765V85.8622H147.77V78.1765H147.038Z",fill:"black"}),f.createElement("path",{d:"M147.77 118.432C147.77 118.23 147.606 118.066 147.404 118.066C147.202 118.066 147.038 118.23 147.038 118.432H147.77ZM147.145 126.376C147.288 126.519 147.52 126.519 147.663 126.376L149.992 124.047C150.135 123.904 150.135 123.673 149.992 123.53C149.849 123.387 149.617 123.387 149.474 123.53L147.404 125.6L145.333 123.53C145.191 123.387 144.959 123.387 144.816 123.53C144.673 123.673 144.673 123.904 144.816 124.047L147.145 126.376ZM147.038 118.432V126.118H147.77V118.432H147.038Z",fill:"black"}),f.createElement("defs",null,f.createElement("clipPath",{id:"clip0_351_43276"},f.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(56.6428 98.1511)"})),f.createElement("clipPath",{id:"clip1_351_43276"},f.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(55.1821 57.8955)"})),f.createElement("clipPath",{id:"clip2_351_43276"},f.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(105.685 57.8955)"})),f.createElement("clipPath",{id:"clip3_351_43276"},f.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(107.148 11.4153)"})),f.createElement("clipPath",{id:"clip4_351_43276"},f.createElement("rect",{width:"8",height:"8",fill:"white",transform:"translate(155 58)"})),f.createElement("clipPath",{id:"clip5_351_43276"},f.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(154.719 98.6667)"}))))}function me(e){return f.createElement("svg",{width:"136",viewBox:"0 0 196 122",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:nb()(uQ,{[u$]:e.hovered})},f.createElement("rect",{x:"27.1929",y:"3.19293",width:"69.0706",height:"15.0489",fill:"black",stroke:"black",strokeWidth:"0.38587"}),f.createElement("rect",{x:"99.7337",y:"3.19293",width:"69.0706",height:"15.0489",fill:"black",stroke:"black",strokeWidth:"0.38587"}),f.createElement("rect",{x:"99.7337",y:"23.2581",width:"69.0706",height:"15.0489",rx:"2.12228",fill:"#BDE3FF",stroke:"black",strokeWidth:"0.38587"}),f.createElement("rect",{x:"27.1929",y:"43.3228",width:"99.1685",height:"15.0489",rx:"2.12228",fill:"#E4CCFF",stroke:"black",strokeWidth:"0.38587"}),f.createElement("rect",{x:"27.1929",y:"103.518",width:"99.1685",height:"15.0489",rx:"2.12228",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.38587"}),f.createElement("rect",{x:"76.5833",y:"63.3882",width:"92.2228",height:"15.0489",rx:"2.12228",fill:"#BDE3FF",stroke:"black",strokeWidth:"0.38587"}),f.createElement("rect",{x:"83.3374",y:"68.5977",width:"25.8533",height:"4.63043",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"32.7886",y:"108.728",width:"32.0272",height:"4.63043",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"33.561",y:"48.5325",width:"31.2554",height:"4.63043",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"104.947",y:"28.4675",width:"21.6087",height:"4.63043",fill:"black",fillOpacity:"0.2"}),f.createElement("path",{d:"M161.035 74.752C160.165 74.7255 159.449 74.5471 158.764 74.2317C158.546 74.1315 158.317 74.0549 158.095 73.9694C157.8 73.8559 157.542 73.682 157.409 73.3946C157.106 72.7358 156.787 72.0785 156.552 71.3932C156.332 70.755 156.468 70.1154 156.863 69.5701C157.169 69.1471 157.355 68.6932 157.489 68.1921C157.654 67.5775 158.109 67.237 158.728 67.1044C159.013 67.044 159.283 67.0631 159.554 67.1678C159.806 67.2651 160.067 67.2813 160.33 67.209C160.82 67.0749 161.266 67.2135 161.704 67.4242C161.909 67.5215 162.118 67.6247 162.338 67.6733C163.061 67.8325 163.433 68.3085 163.532 69.0012C163.58 69.3446 163.552 69.7027 163.527 70.052C163.505 70.3571 163.537 70.646 163.635 70.9334C163.887 71.6791 163.848 72.4086 163.504 73.1205C163.293 73.5567 162.948 73.8515 162.529 74.077C162.236 74.2347 161.944 74.3968 161.66 74.5707C161.43 74.7107 161.184 74.7594 161.035 74.752ZM161.028 74.4779C161.255 74.4808 161.427 74.4086 161.658 74.2303C161.815 74.1109 162 74.0284 162.173 73.9311C162.376 73.8176 162.615 73.741 162.78 73.5862C163.481 72.9259 163.641 72.08 163.405 71.1942C163.253 70.6224 163.207 70.0741 163.274 69.4964C163.359 68.7418 162.946 68.1744 162.223 67.974C161.972 67.9047 161.732 67.7868 161.496 67.6733C161.194 67.5289 160.883 67.4036 160.55 67.4832C160.117 67.5863 159.704 67.5539 159.288 67.4139C159.153 67.3682 159 67.327 158.861 67.3432C158.304 67.408 157.913 67.7367 157.773 68.2584C157.622 68.8258 157.367 69.3195 157.051 69.8074C156.724 70.3144 156.637 70.8921 156.87 71.4742C157.1 72.0505 157.35 72.6194 157.598 73.1883C157.72 73.4713 157.936 73.6599 158.226 73.7675C158.5 73.8692 158.777 73.965 159.044 74.0844C159.632 74.3452 160.255 74.4337 161.028 74.4779Z",fill:"black"}),f.createElement("path",{d:"M160.398 72.4923C159.773 72.5188 159.2 72.4201 158.753 71.9543C158.677 71.8747 158.605 71.7863 158.559 71.6876C158.537 71.6419 158.518 71.5549 158.603 71.5078C158.656 71.4783 158.724 71.5092 158.767 71.5417C158.874 71.6212 158.964 71.7259 159.073 71.8055C159.586 72.1842 160.154 72.3021 160.768 72.1223C161.079 72.0324 161.296 71.804 161.487 71.5535C161.558 71.4621 161.636 71.3235 161.764 71.4193C161.893 71.5166 161.778 71.6345 161.711 71.7229C161.377 72.168 160.973 72.4952 160.398 72.4923Z",fill:"black"}),f.createElement("path",{d:"M162.357 70.0724C162.355 70.2522 162.218 70.3966 162.056 70.3937C161.888 70.3907 161.748 70.2419 161.753 70.0724C161.757 69.8867 161.887 69.7393 162.044 69.7422C162.221 69.7437 162.36 69.8896 162.357 70.0724Z",fill:"black"}),f.createElement("path",{d:"M158.503 70.3111C158.501 70.4909 158.364 70.6354 158.202 70.6324C158.034 70.6295 157.894 70.4806 157.899 70.3111C157.903 70.1254 158.033 69.9781 158.19 69.981C158.366 69.9825 158.504 70.1284 158.503 70.3111Z",fill:"black"}),f.createElement("g",{clipPath:"url(#clip0_351_42930)"},f.createElement("path",{d:"M160.653 34.6219C159.783 34.5953 159.067 34.417 158.381 34.1016C158.163 34.0014 157.935 33.9248 157.712 33.8393C157.418 33.7258 157.16 33.5519 157.027 33.2645C156.723 32.6057 156.405 31.9484 156.169 31.2631C155.95 30.6249 156.085 29.9853 156.48 29.44C156.787 29.017 156.973 28.563 157.107 28.0619C157.272 27.4474 157.727 27.1069 158.346 26.9743C158.631 26.9139 158.9 26.933 159.171 27.0377C159.423 27.1349 159.684 27.1511 159.948 27.0789C160.437 26.9448 160.884 27.0833 161.322 27.2941C161.527 27.3914 161.736 27.4945 161.955 27.5432C162.679 27.7023 163.051 28.1784 163.149 28.8711C163.198 29.2145 163.17 29.5726 163.145 29.9219C163.123 30.227 163.155 30.5158 163.252 30.8032C163.504 31.549 163.466 32.2785 163.121 32.9904C162.91 33.4266 162.566 33.7214 162.147 33.9469C161.854 34.1046 161.562 34.2667 161.278 34.4406C161.048 34.5806 160.801 34.6292 160.653 34.6219ZM160.645 34.3477C160.872 34.3507 161.045 34.2785 161.276 34.1001C161.432 33.9808 161.618 33.8982 161.79 33.801C161.994 33.6875 162.233 33.6108 162.398 33.4561C163.099 32.7958 163.258 31.9499 163.023 31.0641C162.871 30.4923 162.825 29.944 162.891 29.3663C162.977 28.6117 162.564 28.0443 161.841 27.8438C161.59 27.7746 161.35 27.6567 161.114 27.5432C160.812 27.3987 160.501 27.2735 160.168 27.353C159.734 27.4562 159.322 27.4238 158.906 27.2838C158.771 27.2381 158.617 27.1968 158.479 27.213C157.922 27.2779 157.531 27.6065 157.391 28.1283C157.239 28.6957 156.984 29.1894 156.669 29.6772C156.342 30.1842 156.255 30.762 156.488 31.3441C156.718 31.9204 156.968 32.4893 157.216 33.0582C157.338 33.3411 157.553 33.5298 157.844 33.6374C158.118 33.7391 158.395 33.8349 158.662 33.9542C159.25 34.2151 159.873 34.3035 160.645 34.3477Z",fill:"black"}),f.createElement("path",{d:"M160.016 32.3624C159.391 32.3889 158.818 32.2902 158.371 31.8244C158.294 31.7449 158.222 31.6564 158.177 31.5577C158.154 31.512 158.135 31.425 158.221 31.3779C158.274 31.3484 158.342 31.3794 158.384 31.4118C158.492 31.4914 158.582 31.596 158.691 31.6756C159.204 32.0544 159.771 32.1723 160.386 31.9925C160.697 31.9026 160.913 31.6741 161.105 31.4236C161.176 31.3322 161.254 31.1937 161.382 31.2895C161.51 31.3867 161.395 31.5046 161.329 31.5931C160.994 32.0381 160.591 32.3653 160.016 32.3624Z",fill:"black"}),f.createElement("path",{d:"M161.974 29.9422C161.973 30.122 161.836 30.2665 161.674 30.2635C161.506 30.2606 161.366 30.1117 161.37 29.9422C161.375 29.7565 161.504 29.6092 161.662 29.6121C161.839 29.6136 161.977 29.7595 161.974 29.9422Z",fill:"black"}),f.createElement("path",{d:"M158.12 30.181C158.119 30.3608 157.982 30.5052 157.82 30.5023C157.652 30.4993 157.512 30.3505 157.516 30.181C157.521 29.9953 157.65 29.8479 157.808 29.8509C157.983 29.8523 158.122 29.9983 158.12 30.181Z",fill:"black"})),f.createElement("g",{clipPath:"url(#clip1_351_42930)"},f.createElement("path",{d:"M114.675 114.329C114.278 114.328 114.256 114.309 114.215 113.917C114.185 113.631 114.162 113.343 114.154 113.056C114.112 111.501 114.087 109.946 114.039 108.393C114.025 107.893 114.025 107.893 114.462 107.849C114.934 107.802 115.45 107.815 115.924 107.803C117.613 107.764 119.304 107.73 120.993 107.694C121.058 107.693 121.127 107.697 121.183 107.703C121.305 107.716 121.319 107.809 121.321 107.868C121.332 108.088 121.311 108.309 121.311 108.53C121.308 110.144 121.308 111.758 121.307 113.371C121.307 113.565 121.302 113.759 121.301 113.952C121.298 114.281 121.192 114.39 120.854 114.388C120.221 114.387 119.587 114.381 118.953 114.378C118.542 114.377 115.69 114.332 114.675 114.329ZM120.946 108.032L114.356 108.123C114.336 108.123 114.319 108.141 114.321 108.16C114.384 110.116 114.446 112.049 114.51 114.007C114.51 114.026 114.526 114.042 114.545 114.042H120.952C120.977 114.042 120.996 114.021 120.996 113.998V108.082C120.996 108.054 120.974 108.032 120.946 108.032Z",fill:"black"}),f.createElement("path",{d:"M117.683 112.39C117.071 112.373 116.501 112.219 116.016 111.83C115.935 111.765 115.826 111.613 115.852 111.563C115.929 111.42 116.057 111.56 116.151 111.608C117.205 112.155 118.252 112.161 119.295 111.585C119.361 111.548 119.432 111.519 119.504 111.499C119.535 111.492 119.577 111.488 119.607 111.536C119.628 111.567 119.616 111.617 119.599 111.645C119.568 111.692 119.522 111.734 119.476 111.769C118.953 112.188 118.358 112.403 117.683 112.39Z",fill:"black"}),f.createElement("path",{d:"M117.349 109.66C117.133 110.082 116.915 110.502 116.696 110.922C116.68 110.953 116.576 111.096 116.462 111.038C116.421 111.018 116.384 110.978 116.384 110.884C116.384 110.836 116.405 110.78 116.427 110.735C116.627 110.338 116.829 109.942 117.034 109.548C117.063 109.492 117.102 109.433 117.152 109.398C117.193 109.369 117.267 109.354 117.311 109.37C117.469 109.426 117.373 109.615 117.349 109.66Z",fill:"black"}),f.createElement("path",{d:"M119.47 109.498C119.606 109.477 119.652 109.594 119.618 109.695C119.59 109.784 119.551 109.871 119.507 109.952C119.342 110.248 119.174 110.543 119.003 110.835C118.953 110.922 118.885 111.016 118.766 110.959C118.632 110.894 118.682 110.776 118.73 110.686C118.915 110.341 119.103 109.998 119.299 109.659C119.339 109.589 119.401 109.498 119.47 109.498Z",fill:"black"})),f.createElement("path",{d:"M66.4764 69.1441C66.5074 69.1087 66.5118 69.0557 66.4853 69.0159C66.2111 68.6622 65.9414 68.3306 65.6894 67.9857C65.4064 67.5966 65.4816 67.2959 65.9459 67.2031C67.2679 66.9334 68.5899 66.646 69.9296 66.4912C70.8138 66.394 70.9819 66.4205 70.8802 67.464C70.7608 68.6975 70.6105 69.6924 70.4336 70.9171C70.1727 72.7033 70.1064 72.92 69.7704 72.7431C69.6908 72.6989 69.4653 72.5795 69.3017 72.4381C69.1072 72.27 68.8728 72.1064 68.7623 71.9871C68.0902 72.973 67.5597 73.5478 66.7771 74.2729C65.4241 75.8028 62.873 76.0327 60.9187 74.3393C60.2953 73.7999 59.694 73.2383 59.0838 72.6857C58.1067 71.8014 56.9704 71.6289 55.7987 72.1418C54.9675 72.5044 54.2026 73.0261 53.4332 73.5125C52.0626 74.3791 50.6168 74.8787 48.9809 74.5161C48.6271 74.4365 48.2823 74.2818 47.9507 74.1226C47.4466 73.8794 47.2123 73.4727 47.2079 72.8935C47.2034 71.6289 47.1239 70.36 47.146 69.0955C47.1636 68.1449 47.3847 67.9945 48.3265 68.1625C50.1967 68.4897 51.9565 68.136 53.6631 67.3623C54.8039 66.845 55.9844 66.478 57.2445 66.3365C59.0175 66.2039 61.1486 66.8715 62.5856 68.4499C63.178 69.0999 63.9651 69.5553 64.8361 69.6879C65.4595 69.7719 65.8972 69.7321 66.4764 69.1441ZM66.4013 67.8265C66.64 68.1714 66.9009 68.4853 67.0777 68.839C67.1706 69.0291 67.3209 69.206 67.1131 69.5155C66.5737 70.3114 65.3888 70.8552 64.4381 70.5545C63.912 70.3909 63.4035 70.1124 62.9525 69.794C62.1876 69.2635 61.5112 68.6003 60.7286 68.1095C60.1626 67.7513 59.5038 67.4816 58.8495 67.3446C57.4832 67.0572 56.148 67.3578 54.879 67.8751C52.6993 68.7683 50.5283 69.6437 47.986 68.9142C47.986 70.1124 47.9949 71.2399 47.9816 72.3629C47.9728 73.3666 47.8357 73.2472 48.8349 73.5611C48.9853 73.6097 49.14 73.6495 49.2948 73.6716C50.6831 73.8794 51.8813 73.4019 53.022 72.6635C53.756 72.186 54.4899 71.682 55.2814 71.315C56.9969 70.5192 58.5134 70.8685 59.8443 72.2037C60.4146 72.7741 61.0292 73.3091 61.6836 73.7822C62.8022 74.5913 64.0225 75.1617 65.5037 74.3304C66.7284 73.5169 67.6304 72.6812 68.2317 71.3504C68.4837 70.7933 68.5368 70.8198 68.9613 71.2708C69.0983 71.4167 69.0983 71.4167 69.3592 71.6643C69.5537 71.9031 69.5626 71.6687 69.5758 71.483C69.7925 70.0151 69.9517 68.6489 70.1772 67.1235C68.8773 67.3623 67.6702 67.5878 66.4013 67.8265Z",fill:"black"}),f.createElement("rect",{x:"27.1929",y:"23.2581",width:"69.0706",height:"15.0489",rx:"2.12228",fill:"#E4CCFF",stroke:"black",strokeWidth:"0.38587",className:nb()(u0,u3)}),f.createElement("rect",{x:"33.561",y:"29.2361",width:"21.6087",height:"4.63043",fill:"black",fillOpacity:"0.2",className:nb()(u0,u3)}),f.createElement("g",{clipPath:"url(#clip2_351_42930)",className:nb()(u0,u3)},f.createElement("path",{d:"M83.8767 30.6015C83.9224 29.4063 84.425 28.2258 85.6055 27.4048C85.8988 27.2015 86.2466 27.0688 86.5841 26.9406C88.4322 26.2391 90.6842 27.508 91.1691 29.8013C91.514 31.4313 91.1102 32.8682 89.8265 33.9662C88.0785 35.4621 85.4817 34.9124 84.3881 32.855C84.0506 32.2153 83.8797 31.5344 83.8767 30.6015ZM87.4345 34.3214C88.1817 34.3229 88.7919 34.1298 89.2797 33.7894C91.2001 32.4467 91.3519 29.4225 89.5759 27.8897C88.7668 27.1911 87.8265 27.0084 86.8111 27.2339C86.4957 27.3046 86.1906 27.4874 85.9209 27.6775C84.3247 28.805 83.9062 31.135 84.9968 32.8196C85.6025 33.7569 86.4588 34.2875 87.4345 34.3214Z",fill:"black"}),f.createElement("path",{d:"M86.9275 33.1983C86.9039 33.2381 86.8744 33.2779 86.8523 33.3133C86.7963 33.4032 86.7683 33.4356 86.6622 33.3987C86.5826 33.3531 86.5988 33.2528 86.6194 33.1983C86.6754 33.045 86.7491 32.8976 86.8346 32.7576C86.8685 32.7016 86.9348 32.6014 87.0041 32.6338C87.0572 32.6663 87.097 32.6854 87.0513 32.8402C87.0424 32.8696 87.0321 32.905 87.0174 32.9522C87.3829 33.1364 87.7572 33.157 88.1434 33.0642C88.7049 32.9286 89.2192 32.5056 89.5155 31.9854C89.6393 31.7672 89.6909 31.558 89.7586 31.2941C89.7734 31.2396 89.8132 31.1482 89.7881 31.132C89.7542 31.1114 89.713 31.0849 89.6643 31.0642C89.57 31.0259 89.5788 30.9552 89.598 30.9095C89.6304 30.8299 89.6923 30.8211 89.7306 30.8314C89.9502 30.8874 90.1669 30.9581 90.3806 31.0318C90.4101 31.0421 90.4499 31.0745 90.4351 31.1453C90.4189 31.219 90.3703 31.2322 90.3275 31.2396C90.2612 31.2514 90.189 31.2337 90.1006 31.2263C90.0726 31.3457 90.0475 31.471 90.0121 31.5919C89.7424 32.5321 89.1632 33.1688 88.1979 33.4164C87.8103 33.5152 87.4168 33.44 86.9275 33.1983Z",fill:"black"}),f.createElement("path",{d:"M88.892 29.5476C88.892 29.4312 88.8744 29.3089 88.8994 29.1984C88.9156 29.1276 88.9525 29.02 89.0497 29.0215C89.1441 29.023 89.2148 29.0922 89.2369 29.1541C89.3784 29.5565 89.4359 29.9736 89.3784 30.3966C89.374 30.51 89.2634 30.5778 89.2133 30.5778C89.1234 30.5778 89.0335 30.5174 89.0085 30.4128C88.9407 30.1298 88.8788 29.5491 88.892 29.5476Z",fill:"black"}),f.createElement("path",{d:"M85.772 29.5404C85.7793 29.4697 85.8235 29.3459 85.9296 29.3252C86.0417 29.2957 86.0815 29.4299 86.0947 29.4888C86.1581 29.7718 86.1419 29.7187 86.1743 30.1152C86.1772 30.1432 86.1876 30.6163 86.1758 30.7445C86.164 30.8801 86.0903 30.9479 86.024 30.9508C85.8987 30.9582 85.8589 30.8742 85.8309 30.7754C85.7439 30.4748 85.7027 30.1697 85.772 29.5404Z",fill:"black"})),f.createElement("rect",{x:"106.08",y:"83.0787",width:"62.5109",height:"15.0489",rx:"2.12228",fill:"#AFF4C6",stroke:"black",strokeWidth:"0.38587",className:nb()(u0,u6)}),f.createElement("rect",{x:"112.062",y:"88.2883",width:"22.7663",height:"4.63043",fill:"black",fillOpacity:"0.2",className:nb()(u0,u6)}),f.createElement("defs",null,f.createElement("clipPath",{id:"clip0_351_42930"},f.createElement("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(155.496 26.5366)"})),f.createElement("clipPath",{id:"clip1_351_42930"},f.createElement("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(113.435 106.797)"})),f.createElement("clipPath",{id:"clip2_351_42930"},f.createElement("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(83.3374 26.5366)"}))))}function mt(e){return f.createElement("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:nb()(uQ,{[u$]:e.hovered})},f.createElement("rect",{x:"27.172",y:"7.98674",width:"141.765",height:"41.2909",fill:"#E4CCFF"}),f.createElement("g",{filter:"url(#filter0_d_351_120552)"},f.createElement("rect",{x:"63.4768",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),f.createElement("rect",{x:"63.6489",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),f.createElement("rect",{x:"67.6057",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"67.6057",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("g",{filter:"url(#filter1_d_351_120552)"},f.createElement("rect",{x:"98.2268",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),f.createElement("rect",{x:"98.3989",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),f.createElement("rect",{x:"102.355",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"102.355",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("g",{filter:"url(#filter2_d_351_120552)"},f.createElement("rect",{x:"132.977",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),f.createElement("rect",{x:"133.149",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),f.createElement("rect",{x:"137.109",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"137.109",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"27.172",y:"7.98674",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),f.createElement("rect",{x:"27.172",y:"55.1305",width:"141.765",height:"41.2909",fill:"#BDE3FF"}),f.createElement("g",{filter:"url(#filter3_d_351_120552)"},f.createElement("rect",{x:"32.5081",y:"60.4646",width:"26.8391",height:"30.6241",fill:"white"}),f.createElement("rect",{x:"32.6801",y:"60.6366",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),f.createElement("rect",{x:"35.4333",y:"63.0461",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091"}),f.createElement("g",{filter:"url(#filter4_d_351_120552)"},f.createElement("rect",{x:"63.4768",y:"60.4646",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),f.createElement("rect",{x:"63.6489",y:"60.6366",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),f.createElement("rect",{x:"67.6057",y:"64.5955",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"67.6057",y:"70.4438",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("g",{filter:"url(#filter5_d_351_120552)"},f.createElement("rect",{x:"98.2268",y:"60.4646",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),f.createElement("rect",{x:"98.3989",y:"60.6366",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),f.createElement("rect",{x:"102.355",y:"64.5955",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"102.355",y:"70.4438",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("g",{clipPath:"url(#clip0_351_120552)"},f.createElement("path",{d:"M52.4628 72.139C52.4653 75.5713 50.0667 78.5645 46.8075 79.1817C46.4186 79.2545 45.9344 79.3649 45.4652 79.3423C43.9397 79.2746 42.7856 78.9007 41.6465 77.9398C40.0834 76.6175 39.3433 74.8813 39.3884 72.8616C39.4461 70.2497 40.5727 68.1497 42.8057 66.7597C44.8831 65.4651 47.0785 65.3396 49.2663 66.5113C51.2635 67.5801 52.4603 69.7429 52.4628 72.139ZM51.8631 72.2494C51.8631 72.1992 51.8606 72.149 51.8556 72.0988C51.8105 71.7074 51.7804 71.3135 51.7101 70.9297C51.1732 67.9741 48.4785 65.9945 45.558 66.3959C41.215 66.993 38.6809 72.1214 40.816 75.9527C41.9451 77.9774 44.5018 79.0864 46.4563 78.705C49.5423 78.1029 51.7879 75.3906 51.8631 72.2494Z",fill:"black"}),f.createElement("path",{d:"M42.6576 74.7006C44.424 75.9777 47.5 76.2537 49.0179 74.3719C49.038 74.3468 49.0581 74.3268 49.0506 74.3217C48.9778 74.1812 48.7495 74.0081 48.9276 73.8551C49.1108 73.697 49.2563 73.8952 49.3767 74.0156C49.5524 74.1913 49.7305 74.3694 49.876 74.5701C49.9362 74.6554 50.0767 74.7934 49.9362 74.9139C49.8158 75.0318 49.7054 74.9716 49.5624 74.8637C49.5047 74.821 49.442 74.7658 49.4018 74.7332C49.2061 74.9139 49.033 75.0895 48.8448 75.2501C47.7384 76.196 46.4387 76.4067 45.0512 76.1884C44.0827 76.0354 43.1895 75.6741 42.4092 75.0594C42.3867 75.0418 42.3089 74.959 42.2738 74.9565C42.2035 74.9515 42.1859 74.9992 42.0931 75.0318C42.0279 75.0544 41.9902 75.1221 41.8598 74.9841C41.7519 74.8737 41.8272 74.7583 41.8773 74.7182C42.1408 74.5074 42.4193 74.3142 42.7053 74.1336C42.758 74.101 42.8784 74.0734 42.9386 74.1787C43.0039 74.2916 42.9437 74.3518 42.9035 74.4146C42.8433 74.5074 42.7505 74.5827 42.6551 74.6755C42.6526 74.6855 42.6526 74.6956 42.6576 74.7006Z",fill:"black"}),f.createElement("path",{d:"M49.5523 72.5779C49.5824 72.5804 49.6151 72.5729 49.6427 72.5603C49.8384 72.4575 49.8308 72.1639 49.8308 71.9858C49.8283 71.6094 49.7832 71.2958 49.7807 70.9345C49.7807 70.7865 49.7731 70.6284 49.8133 70.4904C49.8384 70.4051 49.9488 70.2972 50.0265 70.2922C50.1043 70.2872 50.2247 70.3223 50.2624 70.4603C50.4054 71.0549 50.4104 71.8403 50.3025 72.3496C50.2122 72.7786 49.8308 72.9894 49.5047 72.9919C49.1509 72.9944 48.762 72.7385 48.6566 72.3044C48.5437 71.8377 48.5362 71.3435 48.486 70.8617C48.4835 70.8341 48.4835 70.7438 48.486 70.7162C48.5061 70.5481 48.5663 70.4528 48.7821 70.4653C48.9401 70.4703 48.9853 70.6962 49.0154 70.8266C49.0681 71.0574 49.0505 71.3033 49.0907 71.5392C49.1534 71.898 49.191 72.5528 49.5523 72.5779Z",fill:"black"}),f.createElement("path",{d:"M42.7832 70.9848C42.7983 70.8819 42.7807 70.7339 42.989 70.7013C43.1721 70.6737 43.2549 70.8593 43.2625 70.9471C43.3051 71.4414 43.3528 71.9407 43.3126 72.4325C43.275 72.8891 42.866 73.273 42.4972 73.3181C42.0732 73.3708 41.604 73.1124 41.4635 72.6257C41.333 72.1765 41.2778 71.6396 41.2804 71.2206C41.2804 71.1504 41.3029 71.0174 41.4309 70.9973C41.594 70.9622 41.6316 71.1077 41.6542 71.1855C41.7495 71.4991 41.7972 71.8253 41.8951 72.1389C41.9528 72.3246 42.0456 72.5128 42.1685 72.6583C42.3693 72.8941 42.6327 72.849 42.713 72.5529C42.7908 72.2619 42.7506 71.198 42.7832 70.9848Z",fill:"black"})),f.createElement("path",{d:"M97.2147 88.2858L97.2147 88.2858L95.4155 90.1223L95.8404 92.7175C95.8404 92.7175 95.8404 92.7175 95.8404 92.7175C95.9069 93.1235 95.4922 93.4743 95.107 93.2618L92.891 92.0416L90.675 93.2618L90.6749 93.2619L97.2147 88.2858ZM97.2147 88.2858C97.5016 87.9928 97.3551 87.4674 96.9341 87.4033L97.2147 88.2858ZM90.3664 90.1223L89.9415 92.7175L92.4384 84.6696L92.4383 84.6698C92.4383 84.6698 92.4383 84.6698 92.4382 84.6699L91.3279 87.0259L88.8479 87.4033C88.8479 87.4033 88.8479 87.4033 88.8479 87.4033C88.4269 87.4674 88.2803 87.9928 88.5673 88.2858L88.5673 88.2858L90.3664 90.1223Z",fill:"#FFC700",stroke:"black",strokeWidth:"0.344091"}),f.createElement("rect",{x:"27.172",y:"55.1305",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),f.createElement("rect",{x:"27.172",y:"103.172",width:"141.765",height:"41.2909",fill:"#93E396"}),f.createElement("g",{filter:"url(#filter6_d_351_120552)"},f.createElement("rect",{x:"32.5081",y:"108.506",width:"26.8391",height:"30.6241",fill:"white"}),f.createElement("rect",{x:"32.6801",y:"108.678",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),f.createElement("rect",{x:"35.4333",y:"111.088",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091"}),f.createElement("g",{clipPath:"url(#clip1_351_120552)"},f.createElement("path",{d:"M45.5755 113.495C47.3906 113.521 48.8594 114.261 50.2344 115.453C53.0677 117.912 53.2735 123.865 48.8125 126.552C45.7344 128.406 41.6458 127.526 39.6719 124.149C37.4896 120.417 39.2214 115.445 43.2344 113.925C43.987 113.638 44.7656 113.487 45.5755 113.495ZM51.6276 119.922C51.6693 118.594 51 117.055 49.8333 115.844C48.3386 114.294 46.4115 113.763 44.2891 114.255C40.3828 115.156 38.263 119.57 39.9349 123.261C41.1172 125.87 43.8958 127.331 46.5521 126.74C49.5443 126.073 51.6406 123.435 51.6276 119.922Z",fill:"black"}),f.createElement("path",{d:"M50.0078 122C49.2031 124.023 47.7682 125.206 45.5989 125.232C43.7396 125.253 42.3724 124.333 41.5417 122.617C41.4896 122.641 41.4271 122.672 41.3672 122.693C41.2812 122.724 41.2318 122.745 41.1536 122.646C41.1172 122.599 41.0599 122.516 41.1667 122.43C41.4297 122.213 41.7135 122.026 42 121.846C42.0443 121.818 42.1484 121.815 42.2083 121.906C42.2734 122.008 42.2318 122.073 42.1927 122.125C42.1198 122.221 42.0156 122.294 41.9114 122.385C42.9062 123.909 44.2318 124.825 46.1276 124.635C47.7995 124.469 49.0443 123.229 49.5 121.768C49.5208 121.703 49.4479 121.656 49.3776 121.57C49.2604 121.432 49.1797 121.409 49.3125 121.187C49.4088 121.049 49.5573 121.13 49.6432 121.174C49.9167 121.318 50.1875 121.476 50.4271 121.669C50.5208 121.745 50.6927 121.857 50.5807 122.057C50.4766 122.26 50.3333 122.128 50.1641 122.078C50.1172 122.057 50.0703 122.029 50.0078 122Z",fill:"black"}),f.createElement("path",{d:"M42.5313 117.878C42.6797 117.638 42.8412 117.448 43.1354 117.508C43.4167 117.565 43.5313 117.81 43.5339 118.036C43.5417 118.484 43.5339 118.945 43.4349 119.38C43.3334 119.828 43.125 120.255 42.9401 120.68C42.8099 120.979 42.6042 121.039 42.3802 120.82C41.6615 120.112 41.2266 119.263 41.2735 118.226C41.2865 117.932 41.4453 117.69 41.7396 117.591C42.0573 117.484 42.3021 117.63 42.5313 117.878ZM43.1094 117.927C43.1094 117.927 43.0521 117.844 42.9558 117.872C42.8828 117.867 42.8021 118.177 42.7552 118.341C42.711 118.495 42.7188 118.607 42.6094 118.625C42.4349 118.641 42.4479 118.492 42.375 118.419C42.3412 118.383 42.1771 117.919 41.9427 118.005C41.7917 118.06 41.7839 118.281 41.7917 118.414C41.8282 119.088 42.1354 119.667 42.5 120.286C42.8334 119.487 43.3308 118.414 43.1094 117.927Z",fill:"black"}),f.createElement("path",{d:"M48.4791 117.661C48.6692 117.555 48.8489 117.463 49.026 117.5C49.289 117.555 49.3411 117.831 49.3645 118.07C49.44 118.833 49.1093 119.479 48.7525 120.115C48.6718 120.258 48.5572 120.383 48.4817 120.531C48.2656 120.953 47.8932 120.875 47.6874 120.513C47.2578 119.75 47.013 118.911 47.0911 118.018C47.1197 117.677 47.2473 117.352 47.6249 117.263C48.0052 117.169 48.3359 117.409 48.4791 117.661ZM48.0104 120.148C48.0494 120.333 48.0885 120.19 48.1249 120.154C48.3854 119.763 48.6484 119.372 48.802 118.943C48.9218 118.607 49.2369 117.755 48.9062 117.841C48.8255 117.846 48.7421 118.094 48.6718 118.219C48.6145 118.318 48.4973 118.476 48.4479 118.484C48.2578 118.49 48.2812 118.318 48.2447 118.219C48.1588 117.995 48.1666 117.643 47.8463 117.685C47.5286 117.726 47.565 118.078 47.6067 118.307C47.7161 118.924 47.8723 119.536 48.0104 120.148Z",fill:"black"})),f.createElement("g",{filter:"url(#filter7_d_351_120552)"},f.createElement("rect",{x:"63.4768",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),f.createElement("rect",{x:"63.6489",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),f.createElement("rect",{x:"67.6057",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"67.6057",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("g",{filter:"url(#filter8_d_351_120552)"},f.createElement("rect",{x:"98.2268",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),f.createElement("rect",{x:"98.3989",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),f.createElement("rect",{x:"102.355",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"102.355",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("g",{filter:"url(#filter9_d_351_120552)"},f.createElement("rect",{x:"134",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),f.createElement("rect",{x:"134.172",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),f.createElement("rect",{x:"138.129",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"138.129",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),f.createElement("rect",{x:"27.172",y:"103.172",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),f.createElement("path",{d:"M163.058 5.32444L163.144 5.46819L163.29 5.38648L163.93 5.02854C164.401 4.76472 164.965 4.6956 165.497 4.83787C166.028 4.98013 166.482 5.32166 166.759 5.78594C167.036 6.25002 167.113 6.7986 166.976 7.31116C166.839 7.82371 166.498 8.26021 166.026 8.52392L166.026 8.52399L165.449 8.84723L165.449 8.84732L161.674 10.9565L159.121 6.67356C158.844 6.20954 158.767 5.66108 158.904 5.1487C159.041 4.63631 159.382 4.20002 159.854 3.93649C160.326 3.67286 160.889 3.60389 161.421 3.74625C161.952 3.8886 162.406 4.23014 162.682 4.69436L163.058 5.32444Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.344091"}),f.createElement("g",{clipPath:"url(#clip2_351_120552)"},f.createElement("path",{d:"M50.4871 107.641C48.8069 109.488 47.7973 109.61 46.2305 108.164C44.1148 111.157 42.1849 111.774 39.8514 110.153C39.3857 111.079 38.7655 112.239 37.5921 112.305C36.4645 112.372 35.5675 111.561 35.5655 111.477C35.4727 112.106 34.6737 113.559 33.4639 113.686C32.2099 113.819 31.2714 113.252 30.5935 112.255C29.723 110.962 29.5512 109.451 29.3703 107.956C29.191 106.467 29.0468 104.962 28.982 103.463C28.9502 102.678 29.0635 101.875 29.1937 101.087C29.2925 100.431 29.6597 99.9338 30.3896 99.8121C31.1194 99.6905 31.6381 100.065 31.9285 100.641C32.3488 101.47 32.6502 102.369 32.9353 103.077C33.2923 102.692 33.636 101.824 34.3226 101.609C35.0214 101.392 35.4604 101.455 36.3429 102.413C36.466 102.004 36.5602 101.635 36.6897 101.277C36.8358 100.882 36.9849 100.473 37.1984 100.113C37.8619 99.0194 38.6917 99.0087 39.483 100.068C41.3417 97.8755 42.7542 97.6508 45.017 99.1989C45.1976 98.6844 45.3353 98.1548 45.5664 97.6599C45.9532 96.8325 46.466 96.1419 47.5332 96.2202C48.4276 96.284 49.1693 96.9204 49.4516 97.9734C49.6358 98.6678 49.71 99.3903 49.8425 100.137C50.3717 99.6633 50.906 99.2599 51.6015 99.843C51.9154 98.8326 52.1853 97.879 52.518 96.9418C52.6775 96.4977 52.9121 96.067 53.1866 95.691C53.8238 94.8256 54.8328 94.8797 55.2722 95.86C55.5988 96.6025 55.8035 97.4282 55.8874 98.2393C56.1186 100.567 56.1084 102.892 55.4407 105.164C55.1061 106.296 54.4433 107.24 53.5059 107.974C52.1712 109.011 51.4815 108.934 50.4871 107.641ZM39.1546 101.785C39.0891 101.528 38.9628 100.247 38.431 100.253C38.0747 100.207 37.9209 100.878 37.8281 101.226C37.5065 102.512 37.3242 103.834 36.9597 105.104C36.8457 105.497 36.6329 105.708 36.3764 105.748C36.1323 105.836 36.0697 105.286 36.0118 105.034C35.8691 104.375 35.8318 103.695 35.6418 103.054C35.5686 102.793 35.455 102.425 34.9767 102.437C34.7887 102.44 34.5019 102.539 34.3083 102.901C34.0965 103.293 33.9031 103.707 33.7862 104.14C33.5734 104.91 33.4662 105.712 33.2259 106.475C33.1403 106.751 33.0228 107.08 32.747 107.222C32.492 107.268 32.2728 107.149 32.1872 106.305C32.1341 105.818 32.0887 105.335 32.0157 104.847C31.8459 103.7 31.6608 102.544 31.3612 101.424C31.2831 101.119 31.078 100.495 30.4631 100.684C29.8482 100.874 29.9096 101.47 29.9595 101.945C29.9644 101.989 29.9784 102.044 29.9848 102.095C30.134 103.39 30.2893 104.683 30.4324 105.98C30.6126 107.625 30.698 109.282 30.9957 110.903C31.2384 112.233 32.1254 112.904 33.1276 112.829C34.0977 112.757 34.5588 112.118 34.7112 110.629C34.7807 109.935 34.8013 109.227 34.9106 108.536C34.9416 108.326 35.0266 107.947 35.3415 107.957C35.6613 108.012 35.7028 108.352 35.753 108.574C35.8707 109.136 35.8113 109.743 36.0098 110.264C36.1478 110.626 36.541 110.993 36.9117 111.146C37.3912 111.342 37.9451 111.194 38.2282 110.698C38.5189 110.182 38.8062 109.627 38.9192 109.052C39.3781 106.599 39.4945 104.13 39.1546 101.785ZM50.8522 100.321C50.6149 100.258 50.3557 100.923 50.2715 101.178C50.0578 101.792 49.9284 102.43 49.7147 103.044C49.647 103.237 49.5064 103.527 49.2543 103.533C48.9942 103.482 48.9645 103.366 48.8893 103.021C48.8485 102.837 48.8275 102.628 48.8218 102.427C48.7926 101.55 48.8153 100.673 48.7357 99.8021C48.6756 99.1606 48.5757 98.4902 48.3279 97.9031C48.1793 97.5509 47.7245 97.1208 47.3882 97.1028C47.0656 97.0877 46.6017 97.4861 46.4018 97.8234C46.0823 98.38 45.9086 99.0228 45.7102 99.6459C45.6547 99.8358 45.6715 100.105 45.7672 100.275C46.8416 102.238 46.9952 104.339 46.6722 106.483C46.563 107.2 46.9941 107.487 47.413 107.803C47.8581 108.144 48.4053 108.147 48.8005 107.76C49.2155 107.348 49.5459 106.834 49.8595 106.331C50.0246 106.061 50.0502 105.703 50.206 105.423C50.2847 105.273 50.5023 105.107 50.6476 105.115C50.7592 105.119 50.9256 105.362 50.9616 105.529C51.0227 105.793 50.986 106.082 51.0211 106.346C51.1198 107.062 51.2231 107.517 51.6431 107.735C51.8624 107.881 52.5903 107.395 52.9417 107.091C54.0901 106.088 54.7064 104.76 54.7639 103.255C54.8461 101.237 54.8412 99.2094 54.7797 97.1893C54.7667 96.7568 54.7833 95.881 54.1461 95.9074C53.7619 95.8041 53.4068 96.5518 53.3005 96.9498C52.8868 98.4345 52.594 99.9599 52.2232 101.46C52.1499 101.758 52.0432 102.358 51.7501 102.433C51.4493 102.477 51.3007 102.405 51.1703 101.488C51.1212 101.169 51.1439 100.292 50.8522 100.321ZM45.4285 102.079C45.2305 101.635 45.0085 100.996 44.6721 100.419C43.5398 98.484 41.2245 98.5104 40.1057 100.468C39.9544 100.741 39.8878 101.142 39.9537 101.45C40.4517 103.651 40.4271 105.869 40.2406 108.089C40.1474 109.225 40.646 109.852 41.8126 109.938C43.2636 110.041 44.5426 109.168 45.2218 107.602C45.9719 105.856 45.931 103.407 45.4285 102.079Z",fill:"black"}),f.createElement("path",{d:"M59.6396 92.9477C59.6565 93.5223 59.7124 95.0885 59.7076 96.163C59.6942 97.6363 59.661 99.1083 59.5957 100.582C59.5728 101.154 59.472 101.726 59.3543 102.283C59.2411 102.806 58.8621 103.105 58.3303 103.111C57.7603 103.12 57.3065 102.872 57.0987 102.313C57.001 102.059 56.917 101.781 56.9124 101.509C56.9306 98.9612 57.0382 96.5596 57.0869 94.004C57.0898 93.6845 57.1071 93.2183 57.1818 92.9C57.328 92.2512 57.6344 91.8216 58.4066 91.8907C59.0794 91.9528 59.6227 92.3732 59.6396 92.9477ZM58.2221 102.332C58.2955 102.339 58.3705 102.352 58.4373 102.283C58.5789 102.175 58.5611 102.004 58.5634 101.861C58.6363 98.9672 58.7107 96.0798 58.7514 93.1879C58.7564 92.9785 58.7327 92.5553 58.3965 92.5632C57.9562 92.5458 58.0021 93.3861 57.9966 93.7713C57.9589 96.3956 57.9427 99.0275 57.9433 101.649C57.9446 101.882 57.9833 102.263 58.2221 102.332Z",fill:"black"}),f.createElement("path",{d:"M59.9054 105.251C60.1529 106.345 59.539 107.276 58.6658 107.474C57.8782 107.649 57.0496 107.055 56.8431 106.171C56.6145 105.176 57.0259 104.394 57.9922 104.179C58.8348 103.99 59.7065 104.372 59.9054 105.251ZM57.6513 105.847C57.8325 106.555 58.3501 106.468 58.4661 106.438C58.8092 106.305 59.0463 106.062 58.7828 105.388C58.71 105.205 58.5347 105.003 58.249 105.031C57.696 105.081 57.5609 105.519 57.6513 105.847Z",fill:"black"}),f.createElement("path",{d:"M42.9659 102.547C42.9771 102.921 43.0739 105.537 43.0732 107.085C43.0759 107.299 42.9866 107.738 42.5969 107.74C42.2333 107.768 42.0919 107.343 42.0754 107.126C41.9862 105.607 41.9396 104.078 41.9404 102.555C41.9392 102.322 42.0882 101.913 42.4165 101.848C42.8885 101.812 42.9547 102.172 42.9659 102.547Z",fill:"black"})),f.createElement("g",{filter:"url(#filter10_d_351_120552)",className:nb()(u0,u4)},f.createElement("rect",{x:"132.649",y:"60.1077",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),f.createElement("rect",{x:"132.821",y:"60.2797",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),f.createElement("rect",{x:"136.782",y:"64.2385",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2",className:nb()(u0,u4)}),f.createElement("rect",{x:"136.782",y:"70.0869",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2",className:nb()(u0,u4)}),f.createElement("g",{filter:"url(#filter11_d_351_120552)",className:nb()(u0,u5)},f.createElement("rect",{x:"32.7107",y:"12.5178",width:"26.8391",height:"30.6241",fill:"white"}),f.createElement("rect",{x:"32.8827",y:"12.6899",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),f.createElement("rect",{x:"35.6359",y:"15.0993",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091",className:nb()(u0,u5)}),f.createElement("path",{className:nb()(u0,u5),d:"M40.2485 22.3512C41.0198 21.4451 41.8657 20.5791 42.8005 19.8422C43.4514 19.3289 43.6751 19.3031 44.0335 19.2056C44.131 19.1798 44.217 19.1196 44.3002 19.0594C47.7898 16.5963 52.2372 18.3425 53.0974 22.6896C53.668 25.5742 52.1971 28.4387 49.668 29.6086C49.6278 29.6287 49.5676 29.6345 49.5476 29.666C49.0458 30.4517 48.025 30.7556 47.4027 30.9105C47.2766 30.9563 47.1791 31.0882 47.0644 31.1743C46.9755 31.2402 46.8866 31.3119 46.7862 31.3578C43.4973 32.8832 39.9618 30.8416 39.1876 27.4638C39.0786 26.9878 38.5997 24.1147 40.2485 22.3512ZM47.0988 29.4251C48.2716 29.4194 49.0372 29.2273 49.7225 28.8516C53.02 27.0423 53.5132 22.1275 50.6114 19.7275C48.9483 18.354 46.8206 18.1217 44.9511 19.4379C42.7288 21.0006 41.9231 24.2036 43.1675 26.6237C44.0622 28.3642 45.4816 29.3248 47.0988 29.4251ZM48.2199 30.1678C48.3633 30.1162 48.3834 30.0789 48.3604 30.0617C48.3604 30.0617 48.3002 30.0617 48.1999 30.0646C45.6192 30.2596 43.6779 29.233 42.5281 26.919C41.4041 24.6595 41.6765 22.4401 43.0041 20.3153C42.898 20.3669 42.812 20.43 42.7346 20.5017C40.9453 22.1218 40.4177 24.8659 41.45 27.2115C42.4019 29.3764 44.4005 30.661 46.6486 30.5004C47.1762 30.4631 47.6952 30.2825 48.2199 30.1678ZM40.6413 22.7297C40.6442 22.6465 40.5668 22.7498 40.5553 22.7641C40.5152 22.8186 40.475 22.8759 40.4406 22.9333C39.9675 23.7304 39.6722 24.5935 39.632 25.5197C39.5374 27.6301 40.2772 29.3793 42.0636 30.5721C43.2507 31.3664 44.5697 31.5298 45.9489 31.0997C43.9331 30.8961 42.3618 29.9613 41.3009 28.2352C40.2399 26.5147 40.0707 24.6681 40.6413 22.7297Z",fill:"black"}),f.createElement("path",{className:nb()(u0,u5),d:"M49.2781 24.5675C49.6738 24.5819 49.8028 24.7883 49.6738 25.1611C49.3526 26.0787 48.4494 26.526 47.529 26.2048C46.9841 26.0127 46.5569 25.6629 46.2616 25.164C46.035 24.7797 46.1354 24.5589 46.5798 24.5303C47.0444 24.4987 48.8451 24.5503 49.2781 24.5675ZM49.1892 25.0149C48.3978 25.0149 47.6265 25.0149 46.8465 25.0149C47.6379 25.9353 48.8078 25.9525 49.1892 25.0149Z",fill:"black"}),f.createElement("path",{className:nb()(u0,u5),d:"M46.0523 22.9417C46.0552 23.389 45.625 23.7962 45.1548 23.7933C44.7447 23.7905 44.458 23.4206 44.4551 23.0277C44.4494 22.6349 44.8508 22.2478 45.2924 22.2363C45.7168 22.222 46.0523 22.5317 46.0523 22.9417ZM45.1921 22.6578C44.9799 22.6922 44.9139 22.893 44.9311 23.0449C44.9541 23.2657 45.1204 23.3202 45.2236 23.3231C45.3211 23.3259 45.5132 23.2284 45.5534 23.0392C45.605 22.8471 45.496 22.5861 45.1921 22.6578Z",fill:"black"}),f.createElement("path",{className:nb()(u0,u5),d:"M51.5318 23.0622C51.5261 23.4952 51.2193 23.8135 50.8092 23.8106C50.3676 23.8077 50.0494 23.4493 50.0637 22.9704C50.0752 22.5547 50.3848 22.2335 50.7691 22.2421C51.1677 22.2536 51.5376 22.6493 51.5318 23.0622ZM51.1361 23.0507C51.1361 22.8299 51.0185 22.6808 50.835 22.6808C50.7232 22.6808 50.534 22.7669 50.534 23.002C50.534 23.412 50.835 23.3891 50.835 23.3891C50.9956 23.3833 51.1361 23.3174 51.1361 23.0507Z",fill:"black"}),f.createElement("defs",null,f.createElement("filter",{id:"filter0_d_351_120552",x:"63.4768",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),f.createElement("filter",{id:"filter1_d_351_120552",x:"98.2268",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),f.createElement("filter",{id:"filter2_d_351_120552",x:"132.977",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),f.createElement("filter",{id:"filter3_d_351_120552",x:"32.5081",y:"60.4646",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),f.createElement("filter",{id:"filter4_d_351_120552",x:"63.4768",y:"60.4646",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),f.createElement("filter",{id:"filter5_d_351_120552",x:"98.2268",y:"60.4646",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),f.createElement("filter",{id:"filter6_d_351_120552",x:"32.5081",y:"108.506",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),f.createElement("filter",{id:"filter7_d_351_120552",x:"63.4768",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),f.createElement("filter",{id:"filter8_d_351_120552",x:"98.2268",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),f.createElement("filter",{id:"filter9_d_351_120552",x:"134",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),f.createElement("filter",{id:"filter10_d_351_120552",x:"132.649",y:"60.1077",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),f.createElement("filter",{id:"filter11_d_351_120552",x:"32.7107",y:"12.5178",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),f.createElement("clipPath",{id:"clip0_351_120552"},f.createElement("rect",{width:"14.4518",height:"14.4518",fill:"white",transform:"translate(38.6985 65.2793)"})),f.createElement("clipPath",{id:"clip1_351_120552"},f.createElement("rect",{width:"15",height:"15",fill:"white",transform:"translate(38 113)"})),f.createElement("clipPath",{id:"clip2_351_120552"},f.createElement("rect",{width:"36.296",height:"36.296",fill:"white",transform:"translate(23 89.9951) rotate(-14.3491)"}))))}var mn=n(794321),ma=n(537240);let ml="browse_templates_make_something_onboarding--faded--UuXrP";var mr=n(764350),mi=n(325570),mo=n(518577),ms=n(13303);let mc="loadingMakeSomethingTemplate",md=e=>{let t=(0,e2.Xr)(uT.w),{name:n}=(0,Y.j6)(),a=(0,_.wA)(),[l,r]=(0,f.useState)(mn.fD.NONE),i=(0,f.useCallback)(e=>{a(uS.Ji({isActive:e}))},[a]);(0,f.useEffect)(()=>(i(!0),()=>{i(!1)}),[i]);let o=(0,eo.g)();(0,f.useEffect)(()=>{var e;return o&&(null==(e=ei.gw5)||e.setFigjamStarterKitEnabled(!0)),()=>{var e;null==(e=ei.gw5)||e.setFigjamStarterKitEnabled(!1)}},[o]);let s=(0,e2.Xr)(uM.Qs);(0,f.useEffect)(()=>{s({type:"CLOSE"})},[s]);let c=(0,dQ.O)(),d=(0,f.useRef)(Date.now()),u=e.onHideModal,m=(0,f.useCallback)(()=>{u(),(0,n2.YQ)({id:mn.Lz}),a(j.b({figjam_browse_templates_modal_onboarding_item_selected:!0})),a(ty.Ce()),t(uT.tX.COMPLETED)},[u,a,t]),p=t=>{(!e.shouldAcceptClickUseCaseTile||e.shouldAcceptClickUseCaseTile())&&((0,$.Cu)({trackingContext:n,text:`${t} tile clicked`},"CTA Clicked"),e.onClickUseCaseTile(t))};function g(t,a){var l;(0,$.Cu)({trackingContext:n,text:`${t} tile hovered`},"CTA Hovered"),r(t),null==(l=e.onUseCasePreview)||l.call(e,t,a)}let h=[{headerText:(0,eN.t)("figjam_onboarding_make_something.templates_modal.button_title.brainstorm"),headerIcon:mr.A,previewSvg:e=>f.createElement(u8,{hovered:e}),useCase:mn.fD.BRAINSTORM,previewType:ei.KpW.MAKE_SOMETHING_BRAINSTORM},{headerText:(0,eN.t)("figjam_onboarding_make_something.templates_modal.button_title.team_updates"),headerIcon:ms.A,previewSvg:e=>f.createElement(mt,{hovered:e}),useCase:mn.fD.UPDATES,previewType:ei.KpW.MAKE_SOMETHING_TEAM_UPDATES},{headerText:(0,eN.t)("figjam_onboarding_make_something.templates_modal.button_title.planning_ahead"),headerIcon:mi.A,previewSvg:e=>f.createElement(me,{hovered:e}),useCase:mn.fD.PLAN,previewType:ei.KpW.MAKE_SOMETHING_PLANNING},{headerText:(0,eN.t)("figjam_onboarding_make_something.templates_modal.button_title.team_chart"),headerIcon:mo.A,previewSvg:e=>f.createElement(u9,{hovered:e}),useCase:mn.fD.TEAM,previewType:ei.KpW.MAKE_SOMETHING_TEAM_CHART}];function E(e,t){let n=h.findIndex(t=>t.useCase===e)+t;return n>h.length-1?n=0:n<0&&(n=h.length-1),n}return{hoveredUseCase:l,setHoveredUseCase:r,onClickCloseButton:()=>{e.onHideModal(),(0,n2.YQ)({id:mn.Lz}),t(uT.tX.COMPLETED);let n=Math.round((Date.now()-d.current)/1e3);c({eventName:"msv2_dismissed",style:e.style,secondsAfterShown:n})},onClickMoreTemplatesButton:()=>{(0,uF.KF)(a,{templateInsertionLocation:e.templateInsertionLocation,triggeredFrom:"makeSomething",onTemplateInsertedCurrentFile:m,onTemplateInsertedNewFile:m,hideModal:()=>{a(ty.Ce())}}),c({eventName:"more_templates_clicked",style:e.style})},onClickUseCaseTile:p,onUseCasePreview:g,useCaseTiles:h,onListBoxKeydown:function(e){let t;if("Enter"===e.key){l!==mn.fD.NONE&&h.find(({useCase:e})=>e===l)&&p(l);return}if("Home"===e.key)t=0;else if("End"===e.key)t=h.length-1;else if(["ArrowUp","ArrowLeft"].includes(e.key))t=E(l,-1);else{if(!["ArrowDown","ArrowRight"].includes(e.key))return;t=E(l,1)}let n=h[t];r(n.useCase),g(n.useCase,n.previewType)}}},mu={[mn.fD.BRAINSTORM]:mn.qy.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED,[mn.fD.PLAN]:mn.qy.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED,[mn.fD.UPDATES]:mn.qy.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED,[mn.fD.TEAM]:mn.qy.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED},mm=(0,tp.n)(({onSuccess:e}={})=>{let t=(0,e2.Xr)(uT.w),n=(0,_.wA)(),a=(0,eb.aV)(),l=(0,eo.g)(),r=(0,_.d4)(e=>e.mirror.appModel.multiplayerSessionState===ei.kul.JOINED),{hubFiles:i,templates:o,categoryIds:s,isLoading:c}=(0,uX.bg)({templatesShelfType:uL.cS.FIGJAM_SIMPLE_TEMPLATES_PICKER,source:"make-something-v2"}),{insertTemplate:d}=(0,uI.Fz)(),u=(0,f.useMemo)(()=>{let e={};return Object.keys(i).filter(e=>s.some(t=>o[t].includes(e))).reduce((e,t)=>{let n=i[t];return e[(0,uA.a6)(n).name.toUpperCase()]=n,e},e),e},[i,o,s]),m=l&&!c&&!a&&r;return{insert:(0,f.useCallback)(a=>{if(!m)return;if(a===mn.fD.NONE){null==e||e();return}let l=u[a],r=mu[a];d({template:{template:l,type:uO.n.HubFile},onSuccess:()=>{null==e||e(),n(eS.F.dequeue({matchType:mc})),(0,n2.YQ)({id:r}),n(j.b({figjam_browse_templates_modal_onboarding_item_selected:!0})),t(uT.tX.USE_CASE_STEPS),a===mn.fD.PLAN?ei.glU.setCanvasZoomScale(.8):a===mn.fD.TEAM&&ei.glU.setCanvasZoomScale(1.2)},triggeredFrom:"browse-templates-make-something",selectTemplateAfterInsertion:!1}),n(eS.F.enqueue({message:(0,eN.t)("figjam_onboarding_make_something.visual_bell.loading_template"),icon:uN.zX.SPINNER,type:mc}))},[n,e,d,t,u,m]),canInsert:m}});function mp(e){let t=(0,_.d4)(e=>{var t,n,a;let l=null==(n=null==(t=null==e?void 0:e.mirror)?void 0:t.appModel)?void 0:n.currentPage,r=null==(a=null==e?void 0:e.mirror)?void 0:a.sceneGraph,i=null==r?void 0:r.get(l);return!i||!i.childrenNodes.length||i.childrenAreAllGhosts}),n=(0,dD.Un)(),a=(0,dQ.O)(),l=!n||t,r=l?"banner":"popup",i=()=>{var t;null==(t=e.hideModal)||t.call(e)},o=e=>{a({eventName:"use_case_hovered",useCase:e,style:r})},s=e=>{a({eventName:"use_case_clicked",useCase:e,style:r})};return function(e){let t=(0,dQ.O)(),n=(0,v.ZC)(e);(0,f.useEffect)(()=>{if(!n){t({eventName:"msv2_shown",style:e});return}if(n!==e){t({eventName:"msv2_style_changed",style:e,prevStyle:n});return}},[n,e,t])}(r),l?f.createElement(mf,{onHideModal:i,trackUseCaseHover:o,trackUseCaseClick:s}):f.createElement(m_,{onHideModal:i,trackUseCaseHover:o,trackUseCaseClick:s})}function mf(e){let{onHideModal:t,trackUseCaseHover:n,trackUseCaseClick:a}=e,[l,r]=(0,f.useState)(!1),i=(0,f.useRef)(!1),{insert:o,canInsert:s}=mm({onSuccess:()=>{i.current=!1}}),{hoveredUseCase:c,setHoveredUseCase:d,onClickCloseButton:u,onClickMoreTemplatesButton:m,onClickUseCaseTile:p,onUseCasePreview:_,useCaseTiles:g,onListBoxKeydown:h}=md({templateInsertionLocation:uA.RD.CURRENT_FILE,onHideModal:t,onClickUseCaseTile(e){i.current=!0,o(e),t(),a(e)},onUseCasePreview(e,t){ei.gw5.clearFigjamStarterKitPreview(),ei.gw5.rotateFigjamStarterKitStrings(),ei.gw5.showFigjamStarterKitPreview(t),n(e)},shouldAcceptClickUseCaseTile:()=>!i.current,style:"banner"});function E(){r(!1),ei.gw5.clearFigjamStarterKitPreview(),d(mn.fD.NONE)}let v=(0,dD.Un)();return s?f.createElement(cK.Nb,{size:"fitContent",className:"browse_templates_make_something_onboarding--modalContainer--tYRC4",backgroundClassName:v?"browse_templates_make_something_onboarding--modalBackgroundWithPassthroughClicks--Lrf3O browse_templates_make_something_onboarding--modalBackground--Cyb7O":"browse_templates_make_something_onboarding--modalBackground--Cyb7O",hide:t,tintedModalBackground:!1,disableClickOutsideToHide:!0,enableEscapeToClose:!0},f.createElement(ux.i,{displayAs:ux.C.Block},f.createElement("div",{className:nb()("browse_templates_make_something_onboarding--closeHeader--tGUaS",{[ml]:l})},f.createElement(tN.Jn,{dataTestId:"MakeSomethingCloseButton",onClick:u,trackingEventName:"modal closed"})),f.createElement("div",{className:"browse_templates_make_something_onboarding--makeSomethingContainer--rxr6G"},f.createElement("div",{className:nb()("browse_templates_make_something_onboarding--titleContainer--41-OQ",{[ml]:l})},f.createElement("div",{className:"browse_templates_make_something_onboarding--title--OqmHP text--fontPos20Whyte--o3mBO text--_fontBaseWhyte--efAjI"},(0,eN.tx)("figjam_onboarding_make_something.templates_modal.main_title")),f.createElement("div",{className:"browse_templates_make_something_onboarding--subtitle--T-kBc text--fontPos14Whyte--pEiDq text--_fontBaseWhyte--efAjI"},(0,eN.tx)("figjam_onboarding_make_something.templates_modal.main_subtitle")),f.createElement("div",{className:nb()("browse_templates_make_something_onboarding--templateButtonContainer--ey3hb",{[ml]:l})},f.createElement(a1.vd,{className:nb()({"browse_templates_make_something_onboarding--templateButtonParent--4zUAI text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI":!0}),trackingEventName:"more templates click",onClick:m,onFocus:E,autoFocus:!1,tabIndex:0},f.createElement("div",{className:"browse_templates_make_something_onboarding--templateButton--gmFOn"},f.createElement("div",{className:"browse_templates_make_something_onboarding--templateButtonContent--Sl5TE text--fontPos11Whyte--wZDnv text--_fontBaseWhyte--efAjI"},f.createElement(a2.B,{svg:uj.A,className:"browse_templates_make_something_onboarding--templatesButtonIcon--m4jW4",useOriginalSrcFills_DEPRECATED:!0}),f.createElement("div",{className:"browse_templates_make_something_onboarding--templatesButtonText--CzC6F"},(0,eN.tx)("figjam_onboarding_make_something.templates_modal.button_title.templates_button"))))))),f.createElement("div",{"aria-activedescendant":c,"aria-label":(0,eN.t)("figjam_onboarding_make_something.use_case_listbox.aria_label"),"aria-orientation":"horizontal",className:"browse_templates_make_something_onboarding--listItems--57vh3",onKeyDown:h,onMouseEnter:()=>r(!0),onMouseLeave:E,role:"listbox",tabIndex:0},g.map(({headerIcon:e,headerText:t,useCase:n,previewSvg:a,previewType:l})=>f.createElement("div",{tabIndex:-1,role:"option",className:nb()("browse_templates_make_something_onboarding--useCaseContainer--nnBm-",{[ml]:![mn.fD.NONE,n].includes(c)}),onFocus:()=>_(n,l),onMouseEnter:()=>_(n,l),onClick:()=>p(n),key:n,"aria-label":t,"aria-selected":c===n,id:`make-something-onboarding-${n}`},f.createElement("div",{className:"browse_templates_make_something_onboarding--useCaseHeader--0ad0i text--fontPos11Whyte--wZDnv text--_fontBaseWhyte--efAjI"},f.createElement(a2.B,{svg:e,height:"28px",width:"28px",autosize:!0,className:"browse_templates_make_something_onboarding--useCaseIcon--0Dqvb",useOriginalSrcFills_DEPRECATED:!0}),t),f.createElement("div",{className:"browse_templates_make_something_onboarding--previewContainer--lohmG"},a(c===n)))))))):null}function m_(e){let{onHideModal:t,trackUseCaseHover:n,trackUseCaseClick:a}=e,{shiftPopupUp:l,popupRef:r}=function(){var e;let t=null==(e=(0,uq.C)())?void 0:e.dltContainerNode,n=(0,f.useRef)(null),[a,l]=(0,f.useState)(!1);return(0,f.useLayoutEffect)(()=>{let e=(0,eu.s)(()=>{var e;let a=null==(e=n.current)?void 0:e.getBoundingClientRect(),r=null==t?void 0:t.getBoundingClientRect();a&&r&&l(r.left-a.right<24)},100);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),{popupRef:n,shiftPopupUp:a}}(),i=(0,_.wA)(),o=(0,uR.Bq)(),{hoveredUseCase:s,setHoveredUseCase:c,onClickCloseButton:d,onClickMoreTemplatesButton:u,onClickUseCaseTile:m,onUseCasePreview:p,useCaseTiles:g,onListBoxKeydown:h}=md({templateInsertionLocation:uA.RD.NEW_FILE,onHideModal:t,onClickUseCaseTile(e){i(uk.zE({state:o,from:uP.f6.FIGJAM_MAKE_SOMETHING_POPUP,editorType:a_._Y.WHITEBOARD,team:void 0,openNewFileIn:uP.ai.NEW_TAB,figjamMakeSomethingUseCase:e})),a(e)},onUseCasePreview(e){n(e)},style:"popup"});return f.createElement(cK.Nb,{modalRef:r,className:"browse_templates_make_something_onboarding--popupModal--y2117",backgroundClassName:nb()("browse_templates_make_something_onboarding--popupBackground--qUE9z",{"browse_templates_make_something_onboarding--popupBackgroundAboveDlt--3VTFo":l}),size:"fitContent",hide:t,tintedModalBackground:!1,disableClickOutsideToHide:!0,enableEscapeToClose:!0,disableFocusTrap:!0},f.createElement(ux.i,{displayAs:ux.C.Block},f.createElement("div",{className:"browse_templates_make_something_onboarding--popupHeader--gqTTZ"},f.createElement("div",{className:"browse_templates_make_something_onboarding--popupTitle--qSiMo text--fontPos14Whyte--pEiDq text--_fontBaseWhyte--efAjI"},(0,eN.tx)("figjam_onboarding_make_something.popup.title")),f.createElement(tN.Jn,{dataTestId:"MakeSomethingCloseButton",onClick:d,trackingEventName:"modal closed"})),f.createElement("div",{"aria-activedescendant":s,"aria-label":(0,eN.t)("figjam_onboarding_make_something.use_case_listbox.aria_label"),"aria-orientation":"horizontal",onKeyDown:h,role:"listbox",tabIndex:0},g.map(({headerIcon:e,headerText:t,useCase:n})=>f.createElement("button",{className:nb()("browse_templates_make_something_onboarding--popupButton--r5tGZ text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",{"browse_templates_make_something_onboarding--popupButtonActive--EbHMe":s===n}),tabIndex:-1,role:"option",onFocus:()=>p(n),onBlur:()=>c(mn.fD.NONE),onMouseEnter:()=>p(n),onMouseLeave:()=>c(mn.fD.NONE),onClick:()=>m(n),key:n,"aria-label":t,"aria-selected":s===n,id:`make-something-onboarding-${n}`},f.createElement(a2.B,{className:nb()({"browse_templates_make_something_onboarding--brainstormIcon--O0mh5":n===mn.fD.BRAINSTORM}),svg:e,height:n===mn.fD.BRAINSTORM?"16px":"20px",width:n===mn.fD.BRAINSTORM?"16px":"20px",autosize:!0,useOriginalSrcFills_DEPRECATED:!0}),t)),f.createElement(Y.Co,{className:"browse_templates_make_something_onboarding--popupTemplates--aTTD4 text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",trackingEventName:"more templates click",onFocus:()=>c(mn.fD.NONE),onMouseEnter:()=>c(mn.fD.NONE),onClick:u,tabIndex:0},(0,eN.tx)("figjam_onboarding_make_something.templates_modal.button_title.templates_button")))))}function mg(){let{insert:e,canInsert:t}=mm(),[n,a]=(0,S.fp)(uT.l5),l=(0,f.useRef)(!1);return(0,f.useEffect)(()=>{t&&n!==mn.fD.NONE&&!l.current&&(e(n),l.current=!0)},[n,e,t]),(0,f.useEffect)(()=>()=>a(mn.fD.NONE),[a]),null}mn.Og,s0.q3.SELF_CONTAINED,e=>f.createElement(mp,{hideModal:e.dismissModal});let mh=`${mn.Og} Templates Toolbar Connector Tooltip`,mE=`${mn.Og} Templates Toolbar Onboarding Finished Connector Tooltip`;function mv(e){return f.createElement(dq.Dv,{targetType:"dom",targetKey:uJ,topPadding:-6,autoWidth:!0,isBold:!0,arrowPosition:ae.F_.BOTTOM},f.createElement(uD.mI,{bodyText:f.createElement("span",{className:nb()(ma.RL)},(0,eN.tx)("figjam_onboarding_make_something.templates_toolbar_connector.body_text",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.templates_toolbar_connector.body_text_bold"))})),buttonText:(0,eN.tx)("figjam_onboarding_make_something.templates_toolbar_connector.done_button"),onButtonClick:e.onClickPrimaryCta}))}function my(e){return f.createElement(dq.Dv,{targetType:"dom",targetKey:uJ,topPadding:-6,autoWidth:!0,isBold:!0,arrowPosition:ae.F_.BOTTOM},f.createElement(uD.mI,{titleText:f.createElement("span",{className:"browse_templates_make_something_onboarding--tooltipTitle--EmYZQ"},(0,eN.tx)("figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.title_want_to_try_something_else")),bodyText:f.createElement("span",{className:ma.$s},(0,eN.tx)("figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.body_text",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.body_text_bold"))})),buttonText:(0,eN.tx)("figjam_onboarding_make_something.templates_toolbar_connector.done_button"),onButtonClick:e.onClickPrimaryCta}))}function mb(e){let t=(0,e2.Xr)(uT.w);return(0,np.h)(()=>{t(uT.tX.MODAL_SHOWING)}),f.createElement(sZ.h,{testId:e.testId?e.testId:"MakeSomethingOnboardingOverlay",modalType:s0.q3.SELF_CONTAINED,trackingContextName:"Make Something Modal Onboarding",element:f.useCallback(e=>f.createElement(mp,{hideModal:e.dismissModal}),[]),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}s0.q3.SELF_CONTAINED,s0.q3.SELF_CONTAINED;let mC="figjam_unified_onboarding_product",mw="figjam_unified_onboarding_pz";function mT(e){(0,n2.YQ)({id:e===dD.jg.PRODUCT_THEN_PZ?mC:mw})}let mx=[ue,ut];function mN(){let e=(0,S.md)(dD.Am),{show:t,uniqueId:n,isShowing:a,complete:l}=(0,n7.e)({overlay:an.wRI,priority:n8.N.OVERRIDING_MODAL}),r=ub((0,f.useCallback)(()=>{l(),e===dD.jg.PZ_THEN_PRODUCT&&(0,n2.YQ)({id:mC}),e===dD.jg.PRODUCT_THEN_PZ&&(0,n2.YQ)({id:uh})},[l,e]));return(0,sD.E)(n,mw,()=>{t()}),f.createElement(uw,{steps:mx,onComplete:r,isShowing:a,overlayUniqueId:n})}function mS(){let e=(0,S.md)(dD.Am),t=(0,S.md)(uT.w),{show:n,uniqueId:a,isShowing:l,complete:r}=(0,n7.e)({overlay:an.Kze,priority:n8.N.OVERRIDING_MODAL}),i=ub(r);return(0,sD.E)(a,mC,()=>{n()}),(0,f.useEffect)(()=>{t===uT.tX.COMPLETED&&e===dD.jg.PRODUCT_THEN_PZ&&(0,n2.YQ)({id:mw}),t===uT.tX.COMPLETED&&e===dD.jg.PZ_THEN_PRODUCT&&(0,n2.YQ)({id:uh})},[t,e]),f.createElement(mb,{onClickPrimaryCta:i,onClose:nf.lQ,onManualDismiss:i,isShowing:l})}var mk=n(205548),mI=n(371097),mA=n(583765),mO=n(315944),mL=n(288706),mP=n(373119),mD=n(325746);let mR="figjam_participant_onboarded";var mM=(e=>(e.CREATE_STICKY="create_sticky",e.CREATE_STAMP="create_stamp",e.CANVAS_ZOOM="first_user_zoom_with_device",e.CANVAS_PAN="first_user_pan_with_device",e))(mM||{});function mF(e,t,n){let a=(0,e2.Xr)(mD.EW),l=(0,mD.yk)(e);(0,sD.E)(n.uniqueId,t,()=>{l&&a({type:"DISMISS_TOOLTIP",tooltip:e})})}let mB=(0,ai.r1)(mR);function mU(){let e=uy(),t=(0,S.md)(mB),n=(0,S.md)(mD.$j),a=(0,S.md)((0,mL.Rq)(ab.Sb)),l="hasData"===a.state&&a.data||void 0,r=(0,ew.TA)(),{resetFullscreenEvents:i}=function(){let e=(0,mP.q)(),t=(0,mD.LW)(),n=f.useCallback(()=>{(0,Z.sx)(mM.CANVAS_ZOOM)},[]),a=f.useCallback(()=>{(0,Z.sx)(mM.CANVAS_PAN)},[]);return f.useEffect(()=>{if(e&&t)return ei.glU.setUsedZoomAction(!1),ei.glU.setUsedPanAction(!1),et.Y5.fromFullscreen.on("zoomActionMessageForOnboarding",n),et.Y5.fromFullscreen.on("panActionMessageForOnboarding",a),()=>{et.Y5.fromFullscreen.removeListener("zoomActionMessageForOnboarding",n),et.Y5.fromFullscreen.removeListener("panActionMessageForOnboarding",a)}},[e,t,a,n]),{resetFullscreenEvents:()=>{ei.glU.setUsedZoomAction(!1),ei.glU.setUsedPanAction(!1)}}}(),o=(0,e2.Xr)(mD.EW),s=(0,_.wA)(),c=(0,n7.e)({overlay:an.P0g,priority:n8.N.OVERRIDING_MODAL+1},[t,a]);return uC({overlayUniqueId:c.uniqueId,afterReset:f.useCallback(()=>{s(j.b({[mR]:!1})),e&&!1===l&&(i(),o({type:"INITIALIZE_ONBOARDING"}),s(j.b({[mR]:!0})))},[e,l,o,s,i])}),mF(mD.eh.STICKY,mM.CREATE_STICKY,c),mF(mD.eh.STAMP,mM.CREATE_STAMP,c),mF(mD.eh.ZOOM,mM.CANVAS_ZOOM,c),mF(mD.eh.PAN,mM.CANVAS_PAN,c),(0,f.useEffect)(()=>{c.isShowing&&n&&c.complete()},[n,c]),(0,f.useEffect)(()=>{e&&!n&&c.show({onShow:()=>{i(),o({type:"INITIALIZE_ONBOARDING"}),s(j.b({[mR]:!0}))},canShow:(e,t)=>!e&&!t})},[n,e,c,r,o,s,i]),f.createElement("div",{"data-testid":"FigJamParticipantOnboardingOverlay"})}var mH=n(309225),mG=n(340159),mV=n(336599),mK=n(428467);let mW=(0,tp.D)(e=>{e(mG.dY())}),mz=(0,tp.D)((e,t)=>{t(iH.V3({url:e}))});function mj(e){let t=(0,_.wA)(),n=(0,N.R)(e=>{let t=(0,dt.uF)(e.fileByKey,(0,mK.getPermissionsState)(e)),n=mG.dY.loadingKeyForPayload();return{isLoading:(0,mV.VP)(e.loadingState,n),tutorialFileUrl:t,shouldShowLoadingState:!t,didFail:(0,mV.aF)(e.loadingState,n)}});f.useEffect(()=>{n.tutorialFileUrl||n.isLoading||mW(t)},[]);let{dismissModal:a}=e;return f.useEffect(()=>{n.didFail&&(a(),mJ("failure","curator"))},[n.didFail,a]),f.useEffect(()=>{let e=setTimeout(()=>{n.isLoading&&mJ("timeout","curator")},5e3);return()=>clearTimeout(e)},[n.isLoading]),f.createElement("div",{className:"onboard_figjam_viewer--openTutorialModalContainer--O1ld1"},f.createElement("div",{className:"onboard_figjam_viewer--openTutorialModalShadow--HF-Gb onboard_figjam_viewer--openTutorialModalBase--vDoVP"},f.createElement("div",{className:"onboard_figjam_viewer--openTutorialModal--3j-H4 onboard_figjam_viewer--openTutorialModalBase--vDoVP"},f.createElement("div",{className:d$},f.createElement("div",{className:d0},f.createElement("img",{className:d1,src:"https://static.figma.com/uploads/964c3ddf18b0f2712b664efde991dfc4f2c58eb8",alt:""})),f.createElement("div",{className:nb()({[d2]:!0,[d5]:!0})},f.createElement("div",{className:"onboard_figjam_viewer--openTutorialModalText--9oABQ onboard_figjam_viewer--text--xkcTB"},(0,eN.tx)("rcs.figjam_onboarding.for_more_tips_and_tricks_here_s_a_2_minute_hands_on_tutorial")),f.createElement("div",{className:"onboard_figjam_viewer--openTutorialBottomContentRow--rVWqG onboard_figjam_viewer--bottomContentRow--PgTeU"},f.createElement("div",{className:"onboard_figjam_viewer--secondaryTextClickable--iF6eC onboard_figjam_viewer--secondaryText--THVcI",onClick:e.dismissModal},(0,eN.tx)("rcs.figjam_onboarding.maybe_later")),f.createElement(a1.vd,{className:n.shouldShowLoadingState?"onboard_figjam_viewer--openTutorialButtonDisabled--EYffC onboard_figjam_viewer--openTutorialButton--4AqFo onboard_figjam_viewer--ctaButton--aFKKt text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI":"onboard_figjam_viewer--openTutorialButton--4AqFo onboard_figjam_viewer--ctaButton--aFKKt text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",onClick:()=>{n.tutorialFileUrl&&mz(n.tutorialFileUrl,t),e.dismissModal()},disabled:n.shouldShowLoadingState},n.shouldShowLoadingState?f.createElement(re.kt,{className:"onboard_figjam_viewer--openTutorialSpinner--zV-nH publish_modal--spinner--7DaqW"}):(0,eN.tx)("rcs.figjam_onboarding.open_tutorial"))))))))}function mJ(e,t){(0,o2.kF)("type",e),(0,o2.kF)("source",t),(0,o2.us)("FigJam onboarding - failed to load open tutorial button")}async function mY(e){let t=(await e).data;if(!t)return!1;let n=(0,mk.kd)(t),a=(0,mk.mW)(n,"figjam_editor_onboarded");return!a&&!a&&!(()=>{let e=(0,A.DN)();try{return!!e.get(tb.Xk)}catch(e){}return!1})()}function mX({openFile:e}){var t;return!!(e&&(null==(t=e.trackTags)?void 0:t.isTemplate)&&e.editorType===a_._Y.WHITEBOARD)}function mq(e){return f.createElement(sZ.h,{testId:e.testId?e.testId:"OpenFigJamTutorialOverlay",modalType:s0.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Open Tutorial",userFlagOnShow:"figjam_editor_onboarded",element:mj,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function mZ(){let e=(0,_.wA)(),t=(0,n7.e)({overlay:an.MJs,priority:n8.N.OVERRIDING_MODAL}),n=function(e,t){let n=(0,f.useRef)(),a=(0,f.useRef)(),l=(0,f.useRef)();return((0,f.useEffect)(()=>()=>{var e;null==(e=n.current)||e.call(n)},[]),a.current)?a.current:null==n.current||null==l.current?(a.current=new Promise(r=>{var i;null==(i=n.current)||i.call(n),n.current=(0,mH.WB)().subscribe(e,t,e=>{("loaded"===e.status||e.errors)&&(l.current=e,r(l.current),a.current=void 0)})}),a.current):Promise.resolve(l.current)}(eJ.Tej,{}),a=(0,S.md)(af.yV),l=(0,uv.Td)(),r=!mX({openFile:a});(0,sD.E)(t.uniqueId,"Context Viewed",e=>{var a,l,r;let i=null==(a=e.properties)?void 0:a.name,o=null==(l=e.properties)?void 0:l.productType,s=null==(r=e.properties)?void 0:r.canEdit;i!==eQ.e0.EDITOR||"figjam"!==o||s||mY(n).then(e=>{e&&t.show()})});let{currentStep:i,next:o,reset:s}=(0,sJ.A)({numSteps:r?4:3,onComplete:t.complete});(0,sD.E)(t.uniqueId,"Reset Onboarding",()=>{e(j.b({figjam_editor_onboarded:!1})),l&&(s(),t.show())});let c=ub(t.complete),d=f.useMemo(()=>{let e=un.map(e=>f.createElement(e,{key:e.name,isShowing:t.isShowing,onClickPrimaryCta:o,onClose:nf.lQ,onManualDismiss:c}));return r&&e.push(f.createElement(mq,{key:"OpenFigJamTutorialOverlay",isShowing:t.isShowing,onClickPrimaryCta:o,onClose:nf.lQ,onManualDismiss:c,testId:"open_figjam_tutorial_overlay"})),e},[o,c,t.isShowing,r]);return f.createElement(sq.U,{currentStep:i,isShowing:t.isShowing,children:d})}let mQ="Browse Templates Modal";function m$(e){return f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.WELCOME,trackingContextName:mQ,element:f.useCallback(e=>f.createElement(uF.N$,{editorType:a_._Y.WHITEBOARD,templateInsertionLocation:uA.RD.CURRENT_FILE,triggeredFrom:"newFile",hideModal:e.dismissModal,hideTintedModalBackground:!0}),[]),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function m0(e){return f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.WELCOME,trackingContextName:mQ,element:f.useCallback(e=>f.createElement(uF.N$,{editorType:a_._Y.WHITEBOARD,templateInsertionLocation:uA.RD.CURRENT_FILE,triggeredFrom:"newFile",hideModal:e.onClickPrimaryCta,hideTintedModalBackground:!0}),[]),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}let m1=(0,tp.D)(()=>{let e=(0,A.DN)();try{return!!e.get(tb.Xk)}catch(e){}return!1});function m2({userFlags:e,emailValidatedAt:t,userSpace:n,isTemplateFile:a,isTryFile:l,canvasEmpty:r,onboardedToFigJam:i,jobTitle:o,cameFromWhatsNew:s}){let c=(0,mk.mW)(e,"not_gen_0"),d=n===eQ.qo.ORG,u=(0,mI.d2)({emailValidatedAt:t,jobTitle:o});if((i||m1())&&(d||c||u))return[];if(!u&&(0,mk.of)(e)&&!d&&!s)return l?(0,y.kc)().nux_gen0_overlay_enabled?[l?m0:m$]:[mI.vm,l?m0:m$]:(0,y.kc)().nux_gen0_overlay_enabled?[mb]:[mI.vm,mb];let m=(0,dZ.O)()?[]:un;if(a)return m;let p=[...m,mq];return s||l||!r?p:[mb]}function m5({openFile:e}){let t=(0,S.md)(uT.l5),n=(0,S.md)(ab.zo),a=(0,S.md)(dD.Am);return t!==mn.fD.NONE?null:("loaded"!==n.status||n.data)&&!a?f.createElement(m7,{openFile:e}):f.createElement(m6,{openFile:e})}let m4=(0,e4.eU)(!1),m3=(e,t)=>{let[n,a]=(0,S.fp)(m4),l=(0,e2.Xr)(dD.Am),r=(0,e2.Xr)(uT.w),i=(0,S.md)(ab.zo),o=(0,eb.aV)(),s=(0,S.md)(mA.dO).status===mO.c.LOADING;(0,sD.E)(e,"Context Viewed",e=>{var t,n,l;let r=null==(t=e.properties)?void 0:t.name,i=null==(n=e.properties)?void 0:n.productType,o=null==(l=e.properties)?void 0:l.canEdit;r===eQ.e0.EDITOR&&"figjam"===i&&o&&a(!0)}),uC({overlayUniqueId:e,afterReset:()=>{l(null),r(uT.tX.NOT_STARTED),a(!0)}}),(0,f.useEffect)(()=>{!n||"loaded"!==i.status||o||s||(a(!1),t())},[n,a,t,i.status,o,s])};function m6({openFile:e}){let t=(0,S.md)(sR.g5),n=(0,S.md)(ai.qG),a=(0,S.md)(sR.d2),l=(0,S.md)(sR.NT),r=(0,_.d4)(e=>e.mirror.appModel.currentPage),i=(0,cp.Fk)((e,t)=>(0,cm.zC)(e,t),r),o=(0,S.md)(ab.zo),s=(0,ai.Fu)("interacted_figjam_whats_new_v2_cta"),c=(0,S.md)(s),d=(0,e2.Xr)(dD.Am),{getConfig:u}=(0,I.XV)("exposed_exp_figjam_unified_onboarding","figjam_unified_onboarding"),m=(0,f.useCallback)(()=>{let e=u().get("sequence",dD.jg.DEFAULT);return d(e),e},[u,d]),[p,g]=(0,f.useState)(!1),[h,E]=(0,f.useState)(!1),[v,b]=(0,f.useState)([]),{show:C,uniqueId:w,isShowing:T,complete:x,experimentResult:N}=(0,n7.e)({overlay:an.zoI,priority:n8.N.OVERRIDING_MODAL,experiment:{check:m,predicate:e=>e!==dD.jg.DEFAULT,postCheck:(e,t,n,a,l)=>{let r=n===eQ.qo.ORG,i=!(0,mI.d2)({emailValidatedAt:t,jobTitle:l})&&(0,mk.of)(e),o=!(0,y.kc)().nux_gen0_overlay_enabled&&i&&!r;return E(o),a||m1()||g(!0),o}}},[n,t,a,o,l,c]),k=(0,f.useRef)(i);(0,f.useEffect)(()=>{k.current=i},[i]);let{show:A,isShowing:O,complete:L}=(0,n7.e)({overlay:an.lLk,priority:n8.N.OVERRIDING_MODAL,experiment:{check:m,predicate:e=>e===dD.jg.DEFAULT,postCheck:(t,n,a,l,r,i)=>{let o=m2({userFlags:t,emailValidatedAt:n,userSpace:a,isTemplateFile:mX({openFile:e}),isTryFile:e.isTryFile,canvasEmpty:k.current,onboardedToFigJam:l,jobTitle:r,cameFromWhatsNew:(0,cL.SS)(i)}),s=o.length>0;return s&&b(o),s}}},[n,t,a,o,l,c]),P=N||dD.jg.DEFAULT,D=P===dD.jg.DEFAULT?O:T,R=P===dD.jg.DEFAULT?L:x,M=(0,f.useMemo)(()=>P===dD.jg.DEFAULT?v:h?[mI.vm]:[],[P,h,v]);m3(w,(0,f.useCallback)(()=>{C(),A()},[C,A]));let F=ub(R),B=(0,f.useCallback)(()=>{P===dD.jg.DEFAULT?F():p&&(R(),mT(P))},[F,R,p,P]);return((0,f.useEffect)(()=>{0===M.length&&p&&P!==dD.jg.DEFAULT&&mT(P)},[p,M,P]),N&&D&&0!==M.length)?f.createElement(uw,{steps:M,onComplete:B,isShowing:D,overlayUniqueId:w}):null}function m7({openFile:e}){let t=(0,S.md)(sR.g5),n=(0,S.md)(ai.qG),a=(0,S.md)(sR.d2),l=(0,S.md)(sR.NT),r=(0,_.d4)(e=>e.mirror.appModel.currentPage),i=(0,cp.Fk)((e,t)=>(0,cm.zC)(e,t),r),o=(0,S.md)(ab.zo),s=(0,ai.Fu)("interacted_figjam_whats_new_v2_cta"),c=(0,S.md)(s),{show:d,uniqueId:u,isShowing:m,complete:p}=(0,n7.e)({overlay:an.lLk,priority:n8.N.OVERRIDING_MODAL},[n,t,a,o,l,c]),[g,h]=(0,f.useState)([]);m3(u,(0,f.useCallback)(()=>{d({canShow:(t,n,a,l,r,o)=>{let s=m2({userFlags:t,emailValidatedAt:n,userSpace:a,isTemplateFile:mX({openFile:e}),isTryFile:e.isTryFile,canvasEmpty:i,onboardedToFigJam:l,jobTitle:r,cameFromWhatsNew:(0,cL.SS)(o)}),c=s.length>0;return c&&h(s),c}})},[d,h,i,e]));let E=ub(p);return m&&0!==g.length?f.createElement(uw,{steps:g,onComplete:E,isShowing:m,overlayUniqueId:u}):null}function m8({openFile:e}){return"figjam_participant_onboarding"===function(){let e=uy(),t=(0,ew.TA)();return e&&(0,dD.dQ)(t)?"figjam_participant_onboarding":"figjam_editor_onboarding"}()?f.createElement(mU,null):f.createElement(m5,{openFile:e})}let m9=(0,e4.eU)(async()=>{if(document.fonts&&FontFace){let e=new FontFace("Whyte","url(https://static.figma.com/webfont/1/Whyte-Regular.woff)");document.fonts.add(e)}await document.fonts.ready}),pe=(0,mL.Rq)(m9);function pt(e){return f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:mh,userFlagOnShow:"figjam_browse_templates_modal_onboarded",element:mv,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pn(e){return f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:mE,userFlagOnShow:"figjam_browse_templates_modal_onboarded",element:my,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pa(){let e=(0,ai.r1)("figjam_browse_templates_modal_onboarded"),t=(0,S.md)(e),n=(0,S.md)(pe),[a,l]=(0,f.useState)(!1),r=(0,dD.Un)(),{show:i,isShowing:o,uniqueId:s,complete:c}=(0,n7.e)({overlay:an.kp0,priority:n8.N.OVERRIDING_MODAL},[t,n]);return(0,sD.E)(s,mn.Lz,()=>{l(!0),i({canShow:e=>!e&&!r})}),(0,sD.E)(s,at.P7,()=>{i({canShow:e=>!e&&!r})}),a?f.createElement(pt,{isShowing:o,onClickPrimaryCta:c,onClose:c,onManualDismiss:c}):f.createElement(pn,{isShowing:o,onClickPrimaryCta:c,onClose:c,onManualDismiss:c})}var pl=n(244673),pr=n(178498),pi=n(972283),po=n(728406),ps=n(487392);function pc(e){return f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.BRAINSTORM},f.createElement(uD.wV,{bodyText:f.createElement("span",{className:ma.R9},(0,eN.tx)("figjam_onboarding_make_something.brainstorm.fig_jam_s_great_for_brainstorming",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.brainstorm.fig_jam_s_great_for_brainstorming_prefix"))})),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:mr.A}))}function pd(e){let{onClickPrimaryCta:t,dismissModal:n}=e;return f.useEffect(()=>{function e(){t()}return et.Y5.fromFullscreen.on("createdSticky",e),()=>{et.Y5.fromFullscreen.removeListener("createdSticky",e)}},[t]),f.createElement(uD.vX,{onSkipClick:n,useCase:mn.fD.BRAINSTORM},f.createElement(dq.Dv,{targetType:"dom",targetKey:pr.s,topPadding:-22,autoWidth:!0,isBold:!0},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.brainstorm.sticky_notes_let_you_share_ideas_go_ahead_drag_one_into_the_blue_box_above",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.brainstorm.sticky_notes_let_you_share_ideas_go_ahead_drag_one_into_the_blue_box_above_bold_text"))}))})))}function pu(e){let[t]=f.useState(()=>ei.glU.getPointerModalNodeId("createdSticky")||""),{handleTargetLost:n}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.BRAINSTORM},f.createElement(dq.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.LEFT_TITLE,onTargetLost:n},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.brainstorm.just_like_that_keep_it_to_one_idea_per_sticky_next_let_s_check_out_stamps",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.brainstorm.just_like_that_keep_it_to_one_idea_per_sticky_next_let_s_check_out_stamps_bold_text"))})),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function pm(e){let{onClickPrimaryCta:t,dismissModal:n}=e,{handleTargetLost:a}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.useEffect(()=>{function e(){t()}return et.Y5.fromFullscreen.on("createdStamp",e),()=>{et.Y5.fromFullscreen.removeListener("createdStamp",e)}},[t]),f.createElement(uD.vX,{onSkipClick:n,useCase:mn.fD.BRAINSTORM},f.createElement(dq.Dv,{targetType:"dom",targetKey:pi.E$,topPadding:-27,isBold:!0,autoWidth:!0,onTargetLost:a},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.brainstorm.stamps_are_here_or_press_e_they_re_good_for_voting_go_ahead_stamp_something",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.brainstorm.stamps_are_here_or_press_e_they_re_good_for_voting_go_ahead_stamp_something_bold_text"))}))})))}function pp(e){let[t]=f.useState(()=>ei.glU.getPointerModalNodeId("createdStamp")||""),{handleTargetLost:n}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.BRAINSTORM},f.createElement(dq.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.TOP,onTargetLost:n},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.brainstorm.lovely_just_one_more_thing",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.brainstorm.lovely_just_one_more_thing_bold_text"))})),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function pf(e){let t=(0,_.wA)(),n=(0,ps.MR)(),a=(0,ps.qU)(),[l,r]=f.useState("invalid"),{handleTargetLost:i}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.useEffect(()=>(n({source:ps.OO.MAKE_SOMETHING_V2_ONBOARDING}),t(pl.lu({state:"open",userInitiated:!1})),r(po.Hm),()=>{a({source:ps.OO.MAKE_SOMETHING_V2_ONBOARDING}),t(pl.lu({state:"closed",userInitiated:!1}))}),[a,t,n]),f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.BRAINSTORM},f.createElement(dq.Dv,{targetType:"dom",targetKey:l,topPadding:-4,isBold:!0,autoWidth:!0,onTargetLost:i},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.brainstorm.use_the_timer_to_keep_things_moving",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.brainstorm.use_the_timer_to_keep_things_moving_bold_text"))})),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function p_(e){let{onNext:t}=uZ({...e,useCase:mn.fD.BRAINSTORM});return f.createElement(dq.Dv,{targetType:"dom",targetKey:at.v4,topPadding:-4,isBold:!0,hasShadow:!0},f.createElement(d3,{titleText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.when_you_re_ready"),bodyText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.start_a_brainstorm_by_inviting_a_few_people_here_that_s_it"),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:uD.mN,isBold:!0}))}function pg(e){return(0,uD.rL)({useCase:mn.fD.BRAINSTORM,stepName:"Intro",stepNum:1}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Brainstorm - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:pc,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function ph(e){return(0,uD.rL)({useCase:mn.fD.BRAINSTORM,stepName:"Sticky Prompt",stepNum:2}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Brainstorm - Sticky Prompt`,userFlagOnShow:"figjam_editor_onboarded",element:pd,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pE(e){return(0,uD.rL)({useCase:mn.fD.BRAINSTORM,stepName:"Sticky Reaction",stepNum:3}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Brainstorm - Sticky Reaction`,userFlagOnShow:"figjam_editor_onboarded",element:pu,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pv(e){return(0,uD.rL)({useCase:mn.fD.BRAINSTORM,stepName:"Stamp Prompt",stepNum:4}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Brainstorm - Stamp Prompt`,userFlagOnShow:"figjam_editor_onboarded",element:pm,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function py(e){return(0,uD.rL)({useCase:mn.fD.BRAINSTORM,stepName:"Stamp Reaction",stepNum:5}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Brainstorm - Stamp Reaction`,userFlagOnShow:"figjam_editor_onboarded",element:pp,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pb(e){return(0,uD.rL)({useCase:mn.fD.BRAINSTORM,stepName:"Timer",stepNum:6}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Brainstorm - Timer`,userFlagOnShow:"figjam_editor_onboarded",element:pf,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pC(e){let t=(0,dQ.O)();return(0,uD.rL)({useCase:mn.fD.BRAINSTORM,stepName:"Share",stepNum:7}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Brainstorm - Share`,userFlagOnShow:"figjam_editor_onboarded",element:p_,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:mn.fD.BRAINSTORM}),e.onClose()},onManualDismiss:e.onManualDismiss})}var pw=n(202232);function pT(e){return f.useEffect(()=>{ei.glU.populatePointerModalNodeTrackerForPlanningAhead()},[]),f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.PLAN},f.createElement(uD.wV,{bodyText:f.createElement("span",{className:ma.R9},(0,eN.tx)("figjam_onboarding_make_something.planning_ahead.fig_jam_s_great_for_planning_ahead_here_s_how_it_s_done",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.planning_ahead.fig_jam_s_great_for_planning_ahead_here_s_how_it_s_done_bold_text"))})),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:mi.A}))}function px(e){let[t]=f.useState(()=>ei.glU.getPointerModalNodeId("planningAheadInitialNode")||""),{handleTargetLost:n}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.PLAN},f.createElement(dq.Dv,{targetType:"canvas",targetKey:t,topPadding:-7,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.BOTTOM,onTargetLost:n},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.planning_ahead.start_with_a_simple_timeline_with_a_row_for_each_member_of_your_team")),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function pN(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=f.useState(()=>ei.glU.getPointerModalNodeId("planningAheadPerson")||""),{handleTargetLost:l}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.useEffect(()=>{function e(){t()}return et.Y5.fromFullscreen.on("finishedEditingText",e),()=>{et.Y5.fromFullscreen.removeListener("finishedEditingText",e)}},[t]),f.createElement(uD.vX,{onSkipClick:n,useCase:mn.fD.PLAN},f.createElement(dq.Dv,{targetType:"canvas",targetKey:a,topPadding:2,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.LEFT_TITLE,onTargetLost:l},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.planning_ahead.type_your_name_here_right_at_the_top",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.planning_ahead.type_your_name_here_right_at_the_top_bold_text"))}))})))}function pS(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=f.useState(()=>ei.glU.getPointerModalNodeId("planningAheadProject")||""),{handleTargetLost:l}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.useEffect(()=>{function e(){t()}return et.Y5.fromFullscreen.on("finishedEditingShapeWithText",e),()=>{et.Y5.fromFullscreen.removeListener("finishedEditingShapeWithText",e)}},[t]),f.createElement(uD.vX,{onSkipClick:n,useCase:mn.fD.PLAN},f.createElement(dq.Dv,{targetType:"canvas",targetKey:a,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.BOTTOM,onTargetLost:l},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.planning_ahead.what_are_you_working_on_this_month_rename_this_block_to_your_current_project",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.planning_ahead.what_are_you_working_on_this_month_rename_this_block_to_your_current_project_bold_text"))}))})))}function pk(e){let[t]=f.useState(()=>ei.glU.getPointerModalNodeId("planningAheadProject")||""),{handleTargetLost:n}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.PLAN},f.createElement(dq.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.LEFT_TITLE,onTargetLost:n},f.createElement(uD.mI,{bodyText:(0,eN.tx)("figjam_onboarding_make_something.planning_ahead.you_can_resize_blocks_by_dragging_their_ends"),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function pI(e){let{handleTargetLost:t}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.PLAN},f.createElement(dq.Dv,{targetType:"dom",targetKey:pw.BC,topPadding:-23,isBold:!0,autoWidth:!0,onTargetLost:t},f.createElement(uD.mI,{bodyText:(0,eN.tx)("figjam_onboarding_make_something.planning_ahead.and_grab_more_shapes_as_needed_from_your_toolbar"),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function pA(e){let{onNext:t}=uZ({...e,useCase:mn.fD.PLAN});return f.createElement(dq.Dv,{targetType:"dom",targetKey:at.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0},f.createElement(d3,{titleText:(0,eN.tx)("figjam_onboarding_make_something.planning_ahead.try_it_with_your_team"),bodyText:(0,eN.tx)("figjam_onboarding_make_something.planning_ahead.share_this_board_and_your_whole_team_can_contribute"),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:uD.mN,isBold:!0}))}function pO(e){return(0,uD.rL)({useCase:mn.fD.PLAN,stepName:"Intro",stepNum:1}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Planning Ahead - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:pT,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pL(e){return(0,uD.rL)({useCase:mn.fD.PLAN,stepName:"Section",stepNum:2}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Planning Ahead - Section`,userFlagOnShow:"figjam_editor_onboarded",element:px,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pP(e){return(0,uD.rL)({useCase:mn.fD.PLAN,stepName:"Person",stepNum:3}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Planning Ahead - Person`,userFlagOnShow:"figjam_editor_onboarded",element:pN,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pD(e){return(0,uD.rL)({useCase:mn.fD.PLAN,stepName:"Project Name",stepNum:4}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Planning Ahead - Project Name`,userFlagOnShow:"figjam_editor_onboarded",element:pS,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pR(e){return(0,uD.rL)({useCase:mn.fD.PLAN,stepName:"Project Block",stepNum:5}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Planning Ahead - Project Block`,userFlagOnShow:"figjam_editor_onboarded",element:pk,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pM(e){return(0,uD.rL)({useCase:mn.fD.PLAN,stepName:"Shape",stepNum:6}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Planning Ahead - Shape`,userFlagOnShow:"figjam_editor_onboarded",element:pI,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pF(e){let t=(0,dQ.O)();return(0,uD.rL)({useCase:mn.fD.PLAN,stepName:"Share",stepNum:7}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Planning Ahead - Share`,userFlagOnShow:"figjam_editor_onboarded",element:pA,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:mn.fD.PLAN}),e.onClose()},onManualDismiss:e.onManualDismiss})}function pB(e){return f.useEffect(()=>{ei.glU.populatePointerModalNodeTrackerForTeamChart()},[]),f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.TEAM},f.createElement(uD.wV,{bodyText:f.createElement("span",{className:ma.R9},(0,eN.tx)("figjam_onboarding_make_something.team_chart.in_fig_jam_you_can_diagram_all_sorts_of_things_here_s_an_example",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.team_chart.in_fig_jam_you_can_diagram_all_sorts_of_things_here_s_an_example_bold_text"))})),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:mo.A}))}function pU(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=f.useState(()=>ei.glU.getPointerModalNodeId("teamChartName")||""),{handleTargetLost:l}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.useEffect(()=>{function e(){t()}return et.Y5.fromFullscreen.on("finishedEditingShapeWithText",e),()=>{et.Y5.fromFullscreen.removeListener("finishedEditingShapeWithText",e)}},[t]),f.createElement(uD.vX,{onSkipClick:n,useCase:mn.fD.TEAM},f.createElement(dq.Dv,{targetType:"canvas",targetKey:a,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.BOTTOM,onTargetLost:l},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.team_chart.double_click_this_text_to_type_in_the_manager_s_name_go_ahead_try_it",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.team_chart.double_click_this_text_to_type_in_the_manager_s_name_go_ahead_try_it_bold_text"))}))})))}function pH(e){let[t]=f.useState(()=>ei.glU.getPointerModalNodeId("teamChartImage")||""),{handleTargetLost:n}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.TEAM},f.createElement(dq.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.LEFT_TITLE,onTargetLost:n},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.team_chart.you_can_add_images_by_simply_dragging_them_into_fig_jam")),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function pG(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=f.useState(()=>ei.glU.getPointerModalNodeId("teamChartQuickCreate")||""),{handleTargetLost:l}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.useEffect(()=>{function e(){t()}return et.Y5.fromFullscreen.on("quickCreate",e),()=>{et.Y5.fromFullscreen.removeListener("quickCreate",e)}},[t]),f.createElement(uD.vX,{onSkipClick:n,useCase:mn.fD.TEAM},f.createElement(dq.Dv,{targetType:"canvas",targetKey:a,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.RIGHT_TITLE,onTargetLost:l},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.team_chart.adding_to_a_diagram_is_simple_hover_over_a_shape_and_click_this_button_try_it",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.team_chart.adding_to_a_diagram_is_simple_hover_over_a_shape_and_click_this_button_try_it_bold_text"))}))})))}function pV(e){let{handleTargetLost:t}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.TEAM},f.createElement(dq.Dv,{targetType:"dom",targetKey:pw.BC,topPadding:-23,isBold:!0,autoWidth:!0,onTargetLost:t},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.team_chart.you_can_also_grab_more_shapes_from_here")),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function pK(e){let{handleTargetLost:t}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.TEAM},f.createElement(dq.Dv,{targetType:"dom",targetKey:pw.Nr,isBold:!0,autoWidth:!0,onTargetLost:t},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.team_chart.and_use_the_connector_tool_to_connect_any_two_things_together")),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function pW(e){let{onNext:t}=uZ({...e,useCase:mn.fD.TEAM});return f.createElement(dq.Dv,{targetType:"dom",targetKey:at.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0},f.createElement(d3,{titleText:(0,eN.tx)("figjam_onboarding_make_something.team_chart.diagram_together"),bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.team_chart.share_this_board_and_your_whole_team_can_pitch_in")),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:uD.mN,isBold:!0}))}function pz(e){return(0,uD.rL)({useCase:mn.fD.TEAM,stepName:"Intro",stepNum:1}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Chart - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:pB,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pj(e){return(0,uD.rL)({useCase:mn.fD.TEAM,stepName:"Name",stepNum:2}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Chart - Name`,userFlagOnShow:"figjam_editor_onboarded",element:pU,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pJ(e){return(0,uD.rL)({useCase:mn.fD.TEAM,stepName:"Image",stepNum:3}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Chart - Image`,userFlagOnShow:"figjam_editor_onboarded",element:pH,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pY(e){return(0,uD.rL)({useCase:mn.fD.TEAM,stepName:"Quick Create",stepNum:4}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Chart - Quick Create`,userFlagOnShow:"figjam_editor_onboarded",element:pG,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pX(e){return(0,uD.rL)({useCase:mn.fD.TEAM,stepName:"Shape",stepNum:5}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Chart - Shape`,userFlagOnShow:"figjam_editor_onboarded",element:pV,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pq(e){return(0,uD.rL)({useCase:mn.fD.TEAM,stepName:"Connector",stepNum:6}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Chart - Connector`,userFlagOnShow:"figjam_editor_onboarded",element:pK,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function pZ(e){let t=(0,dQ.O)();return(0,uD.rL)({useCase:mn.fD.TEAM,stepName:"Share",stepNum:7}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Chart - Share`,userFlagOnShow:"figjam_editor_onboarded",element:pW,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:mn.fD.TEAM}),e.onClose()},onManualDismiss:e.onManualDismiss})}function pQ(e){return f.useEffect(()=>{ei.glU.populatePointerModalNodeTrackerForTeamUpdates()},[]),f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.UPDATES},f.createElement(uD.wV,{bodyText:f.createElement("span",{className:ma.R9},(0,eN.tx)("figjam_onboarding_make_something.team_updates.fig_jam_s_great_for_team_syncs_here_s_how_it_works",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.team_updates.fig_jam_s_great_for_team_syncs_here_s_how_it_works_bold_text"))})),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:ms.A}))}function p$(e){let[t]=f.useState(()=>ei.glU.getPointerModalNodeId("teamUpdatesSection")||""),{handleTargetLost:n}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.UPDATES},f.createElement(dq.Dv,{targetType:"canvas",targetKey:t,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.BOTTOM,onTargetLost:n},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.team_updates.each_person_gets_a_row_of_their_own_for_sharing_updates_and_priorities")),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function p0(e){let[t]=f.useState(()=>ei.glU.getPointerModalNodeId("teamUpdatesPhotoBooth")||""),{handleTargetLost:n}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.UPDATES},f.createElement(dq.Dv,{targetType:"canvas",targetKey:t,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.BOTTOM,onTargetLost:n},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.team_updates.take_a_selfie_then_drag_it_into_whichever_row_you_d_like_try_and_click_the_red_dot",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.team_updates.take_a_selfie_then_drag_it_into_whichever_row_you_d_like_try_and_click_the_red_dot_bold_text"))})),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function p1(e){let[t]=f.useState(()=>ei.glU.getPointerModalNodeId("teamUpdatesUpdates")||""),{handleTargetLost:n}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.UPDATES},f.createElement(dq.Dv,{targetType:"canvas",targetKey:t,topPadding:-5,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.BOTTOM,onTargetLost:n},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.team_updates.your_whole_team_can_share_updates_here")),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function p2(e){let[t]=f.useState(()=>ei.glU.getPointerModalNodeId("teamUpdatesImportantDates")||""),{handleTargetLost:n}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.createElement(uD.vX,{onSkipClick:e.dismissModal,useCase:mn.fD.UPDATES},f.createElement(dq.Dv,{targetType:"canvas",targetKey:t,topPadding:-5,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.BOTTOM,onTargetLost:n},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.team_updates.and_can_add_important_dates_to_the_calendar_over_here")),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function p5(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[a]=f.useState(()=>ei.glU.getPointerModalNodeId("teamUpdatesSticky")||""),{handleTargetLost:l}=(0,dq.Du)({shouldSkipConnectorModalAtom:uT.aG,skipConnectorModal:e.onClickPrimaryCta});return f.useEffect(()=>{function e(){t()}return et.Y5.fromFullscreen.on("finishedEditingSticky",e),()=>{et.Y5.fromFullscreen.removeListener("finishedEditingSticky",e)}},[t]),f.createElement(uD.vX,{onSkipClick:n,useCase:mn.fD.UPDATES},f.createElement(dq.Dv,{targetType:"canvas",targetKey:a,topPadding:-16,isBold:!0,autoWidth:!0,arrowPosition:ae.F_.TOP,onTargetLost:l},f.createElement(uD.mI,{bodyText:f.createElement("span",null,(0,eN.tx)("figjam_onboarding_make_something.team_updates.give_it_a_go_try_typing_your_priorities_in_this_sticky_note",{boldText:f.createElement("b",null,(0,eN.tx)("figjam_onboarding_make_something.team_updates.give_it_a_go_try_typing_your_priorities_in_this_sticky_note_bold_text"))}))})))}function p4(e){let{onNext:t}=uZ({...e,useCase:mn.fD.UPDATES});return f.createElement(dq.Dv,{targetType:"dom",targetKey:at.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0},f.createElement(d3,{titleText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.when_you_re_ready"),bodyText:(0,eN.tx)("figjam_onboarding_make_something.team_updates.invite_your_teammates_and_run_a_quick_team_check_in"),buttonText:(0,eN.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:uD.mN,isBold:!0}))}function p3(e){return(0,uD.rL)({useCase:mn.fD.UPDATES,stepName:"Intro",stepNum:1}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Updates - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:pQ,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function p6(e){return(0,uD.rL)({useCase:mn.fD.UPDATES,stepName:"Section",stepNum:2}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Updates - Section`,userFlagOnShow:"figjam_editor_onboarded",element:p$,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function p7(e){return(0,uD.rL)({useCase:mn.fD.UPDATES,stepName:"Photo Booth",stepNum:3}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Updates - Photo Booth`,userFlagOnShow:"figjam_editor_onboarded",element:p0,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function p8(e){return(0,uD.rL)({useCase:mn.fD.UPDATES,stepName:"Updates",stepNum:4}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Updates - Updates`,userFlagOnShow:"figjam_editor_onboarded",element:p1,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function p9(e){return(0,uD.rL)({useCase:mn.fD.UPDATES,stepName:"Important Dates",stepNum:5}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Updates - Important Dates`,userFlagOnShow:"figjam_editor_onboarded",element:p2,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function fe(e){return(0,uD.rL)({useCase:mn.fD.UPDATES,stepName:"Sticky",stepNum:6}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Updates - Sticky`,userFlagOnShow:"figjam_editor_onboarded",element:p5,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function ft(e){let t=(0,dQ.O)();return(0,uD.rL)({useCase:mn.fD.UPDATES,stepName:"Share",stepNum:7}),f.createElement(sZ.h,{testId:e.testId,modalType:s0.q3.SELF_CONTAINED,trackingContextName:`${uD.CM} - Team Updates - Share`,userFlagOnShow:"figjam_editor_onboarded",element:p4,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:mn.fD.UPDATES}),e.onClose()},onManualDismiss:e.onManualDismiss})}function fn(e){switch(e){case mn.qy.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED:return[pg,ph,pE,pv,py,pb,pC,fa];case mn.qy.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED:return[p3,p6,p7,p8,p9,fe,ft,fa];case mn.qy.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED:return[pO,pL,pP,pD,pR,pM,pF,fa];case mn.qy.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED:return[pz,pj,pJ,pY,pX,pq,pZ,fa];default:return[]}}function fa({onClickPrimaryCta:e}){let t=(0,_.d4)(e=>e.modalShown),n=(0,f.useRef)(t);return(0,f.useEffect)(()=>{!t&&n.current&&(e(),(0,n2.YQ)({id:at.P7}))},[e,t]),f.createElement(f.Fragment,null)}function fl(){let[e,t]=f.useState([]),n=(0,e2.Xr)(uT.w),{complete:a,uniqueId:l,show:r,isShowing:i}=(0,n7.e)({overlay:an.Njd,priority:n8.N.OVERRIDING_MODAL}),o=f.useCallback(()=>{a(),n(uT.tX.COMPLETED)},[a,n]);return((0,sD.E)(l,mn.qy.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED,()=>{t(fn(mn.qy.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED)),n(uT.tX.USE_CASE_STEPS),r()}),(0,sD.E)(l,mn.qy.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED,()=>{t(fn(mn.qy.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED)),n(uT.tX.USE_CASE_STEPS),r()}),(0,sD.E)(l,mn.qy.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED,()=>{t(fn(mn.qy.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED)),n(uT.tX.USE_CASE_STEPS),r()}),(0,sD.E)(l,mn.qy.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED,()=>{t(fn(mn.qy.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED)),n(uT.tX.USE_CASE_STEPS),r()}),uC({overlayUniqueId:l,afterReset:a}),0===e.length)?null:f.createElement(uw,{steps:e,onComplete:o,isShowing:i,overlayUniqueId:l})}var fr=n(835691),fi=n(317946);let fo="edit_action_experiment_dont_show_again";function fs({dismissModal:e}){let t=(0,fi.E)(),n=(0,_.wA)(),a=(0,af.q5)();return f.createElement(f.Fragment,null,f.createElement("div",{className:"edit_action_experiment_steps--header--kBYL2 onboarding--editorOnboardingHeader--Kk5Cb"},(0,eN.tx)("pro_edit_action.heading")),f.createElement("div",{className:"edit_action_experiment_steps--content---HMhp"},(0,eN.tx)("pro_edit_action.body_text")),f.createElement("div",{className:"edit_action_experiment_steps--cta--3U128"},f.createElement(a1.tM,{onClick:()=>{n(j.b({[fo]:!0})),e()},trackingProperties:{text:"Not now"}},(0,eN.tx)("pro_edit_action.dismiss_button_text")),f.createElement(a1.vd,{className:"edit_action_experiment_steps--primaryButton--R2FKA",onClick:()=>{e(),a&&t(a,a$.$5)},trackingProperties:{text:"Start editing"}},(0,eN.tx)("pro_edit_action.primary_button_text"))))}var fc=n(708277),fd=n(217071);let fu=(0,fc.Op)({initial:"await_button_or_fullscreen",states:[{id:"await_button_or_fullscreen",transitions:[(0,fc.nr)("Context Viewed","check_in_drafts",{condition:({event:e})=>"Editor > Toolbar > File Edit Button"===e.properties.name||"Editor > Toolbelt > File Edit Button"===e.properties.name}),(0,fc.nr)(fd.R,"check_show_button",{condition:({event:e})=>0!==e.properties.numSelected&&null!=e.properties.numSelected}),(0,fc.nr)(ek.cZ,"check_show_button")]},{id:"check_in_drafts",transitions:[(0,fc.MR)("static_checks_in_drafts","await_button_or_fullscreen",{condition:({event:e})=>!e.succeeded}),(0,fc.MR)("static_checks_in_drafts","show_overlay",{condition:({event:e})=>e.succeeded})]},{id:"check_show_button",transitions:[(0,fc.MR)("static_checks_show_button","await_button_or_fullscreen",{condition:({event:e})=>!e.succeeded}),(0,fc.MR)("static_checks_show_button","show_overlay",{condition:({event:e})=>e.succeeded})]},{id:"show_overlay",terminal:!0}]}),fm="edit_action_experiment_shown_once",fp="edit_action_experiment_shown_twice",ff=(0,ai.r1)("edit_action_experiment_dont_show_again"),f_=(0,ai.r1)(fm),fg=(0,ai.r1)(fp);function fh(){let e=(0,_.wA)(),t=(0,fr.eD)(fu),n=(0,S.md)(ff),a=(0,S.md)(ab.$q),l=(0,S.md)(f_),r=(0,S.md)(fg),i=(0,S.md)(ab.aT),o=(0,n7.e)({overlay:an.UGT,priority:n8.N.HIGH_PRIORITY_MODAL},[n,l,r]),s=(0,f.useCallback)(()=>{o.show({canShow:e=>!e})},[o]),c=(0,f.useCallback)(()=>{"loaded"!==l.status||l.data||e(j.b({[fm]:!0})),"loaded"===l.status&&l.data&&e(j.b({[fp]:!0})),o.complete()},[e,o,l]);(0,fr.ST)(t,(0,f.useCallback)(({to:e})=>{"check_in_drafts"===e&&t.transition({id:"static_checks_in_drafts",succeeded:!a}),"check_show_button"===e&&t.transition({id:"static_checks_show_button",succeeded:i}),"show_overlay"===e&&(s(),t.reset())},[a,t,i,s]));let d=(0,f.useCallback)(({dismissModal:e})=>f.createElement(fs,{dismissModal:e}),[]);return f.createElement(sZ.h,{className:"edit_action_experiment_steps--modal--3KhyN pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",element:d,disableHighlight:!0,isShowing:o.isShowing,modalType:s0.q3.WALK_THROUGH,onboardingKey:a$.m7,onClickPrimaryCta:c,onClose:c,onManualDismiss:c,shouldCenterArrow:ae.EL.FALLBACK,shouldDismissWhenLostDOMTarget:!0,trackingContextName:"Edit Action Experiment Modal (no checkbox)",width:300-2*dq.uv,additionalOnExplicitDismiss:()=>{e(j.b({[fo]:!0}))}})}var fE=n(363659),fv=n(401352),fy=n(175290),fb=n(295296);function fC(){return f.createElement("svg",{width:"146",height:"191",viewBox:"0 0 146 191",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("path",{d:"M35 153H3C1.34315 153 0 154.343 0 156V188C0 189.657 1.34315 191 3 191H35C36.6569 191 38 189.657 38 188V156C38 154.343 36.6569 153 35 153Z",fill:"#007BE5"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.875 166.25C22.4943 166.25 21.375 167.369 21.375 168.75C21.375 170.131 22.4943 171.25 23.875 171.25C25.2557 171.25 26.375 170.131 26.375 168.75C26.375 167.369 25.2557 166.25 23.875 166.25ZM19.875 168.75C19.875 166.541 21.6659 164.75 23.875 164.75C26.0841 164.75 27.875 166.541 27.875 168.75C27.875 170.3 26.9937 171.644 25.7049 172.308C28.337 173.03 30.3125 175.271 30.3125 178.012V179.312V180.062H29.5625H20.5625H19.8125H18.1875H8.4375H7.6875V179.312V178.012C7.6875 175.271 9.663 173.03 12.2951 172.308C11.0063 171.644 10.125 170.3 10.125 168.75C10.125 166.541 11.9159 164.75 14.125 164.75C16.3341 164.75 18.125 166.541 18.125 168.75C18.125 170.3 17.2437 171.644 15.9549 172.308C17.1449 172.634 18.2008 173.271 19.0005 174.125C19.7985 173.271 20.8514 172.633 22.0433 172.307C20.7555 171.642 19.875 170.299 19.875 168.75ZM9.1875 178.012C9.1875 175.617 11.3334 173.562 14.125 173.562C16.9166 173.562 19.0625 175.617 19.0625 178.012V178.562H18.1875H9.1875V178.012ZM20.5625 178.562H28.8125V178.012C28.8125 175.617 26.6666 173.562 23.875 173.562C22.2296 173.562 20.7911 174.286 19.8997 175.374C20.323 176.164 20.5625 177.058 20.5625 178.012V178.562ZM11.625 168.75C11.625 167.369 12.7443 166.25 14.125 166.25C15.5057 166.25 16.625 167.369 16.625 168.75C16.625 170.131 15.5057 171.25 14.125 171.25C12.7443 171.25 11.625 170.131 11.625 168.75Z",fill:"white"}),f.createElement("path",{d:"M89 153H57C55.3431 153 54 154.343 54 156V188C54 189.657 55.3431 191 57 191H89C90.6569 191 92 189.657 92 188V156C92 154.343 90.6569 153 89 153Z",fill:"#9747FF"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M77.875 166.25C76.4943 166.25 75.375 167.369 75.375 168.75C75.375 170.131 76.4943 171.25 77.875 171.25C79.2557 171.25 80.375 170.131 80.375 168.75C80.375 167.369 79.2557 166.25 77.875 166.25ZM73.875 168.75C73.875 166.541 75.6659 164.75 77.875 164.75C80.0841 164.75 81.875 166.541 81.875 168.75C81.875 170.3 80.9937 171.644 79.7049 172.308C82.337 173.03 84.3125 175.271 84.3125 178.012V179.312V180.062H83.5625H74.5625H73.8125H72.1875H62.4375H61.6875V179.312V178.012C61.6875 175.271 63.663 173.03 66.2951 172.308C65.0063 171.644 64.125 170.3 64.125 168.75C64.125 166.541 65.9159 164.75 68.125 164.75C70.3341 164.75 72.125 166.541 72.125 168.75C72.125 170.3 71.2437 171.644 69.9549 172.308C71.1449 172.634 72.2008 173.271 73.0005 174.125C73.7985 173.271 74.8514 172.633 76.0433 172.307C74.7555 171.642 73.875 170.299 73.875 168.75ZM63.1875 178.012C63.1875 175.617 65.3334 173.562 68.125 173.562C70.9166 173.562 73.0625 175.617 73.0625 178.012V178.562H72.1875H63.1875V178.012ZM74.5625 178.562H82.8125V178.012C82.8125 175.617 80.6666 173.562 77.875 173.562C76.2296 173.562 74.7911 174.286 73.8997 175.374C74.323 176.164 74.5625 177.058 74.5625 178.012V178.562ZM65.625 168.75C65.625 167.369 66.7443 166.25 68.125 166.25C69.5057 166.25 70.625 167.369 70.625 168.75C70.625 170.131 69.5057 171.25 68.125 171.25C66.7443 171.25 65.625 170.131 65.625 168.75Z",fill:"white"}),f.createElement("path",{d:"M143 153H111C109.343 153 108 154.343 108 156V188C108 189.657 109.343 191 111 191H143C144.657 191 146 189.657 146 188V156C146 154.343 144.657 153 143 153Z",fill:"#FFCD29"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M131.875 166.25C130.494 166.25 129.375 167.369 129.375 168.75C129.375 170.131 130.494 171.25 131.875 171.25C133.256 171.25 134.375 170.131 134.375 168.75C134.375 167.369 133.256 166.25 131.875 166.25ZM127.875 168.75C127.875 166.541 129.666 164.75 131.875 164.75C134.084 164.75 135.875 166.541 135.875 168.75C135.875 170.3 134.994 171.644 133.705 172.308C136.337 173.03 138.312 175.271 138.312 178.012V179.312V180.062H137.562H128.562H127.812H126.188H116.438H115.688V179.312V178.012C115.688 175.271 117.663 173.03 120.295 172.308C119.006 171.644 118.125 170.3 118.125 168.75C118.125 166.541 119.916 164.75 122.125 164.75C124.334 164.75 126.125 166.541 126.125 168.75C126.125 170.3 125.244 171.644 123.955 172.308C125.145 172.634 126.201 173.271 127 174.125C127.799 173.271 128.851 172.633 130.043 172.307C128.755 171.642 127.875 170.299 127.875 168.75ZM117.188 178.012C117.188 175.617 119.333 173.562 122.125 173.562C124.917 173.562 127.062 175.617 127.062 178.012V178.562H126.188H117.188V178.012ZM128.562 178.562H136.812V178.012C136.812 175.617 134.667 173.562 131.875 173.562C130.23 173.562 128.791 174.286 127.9 175.374C128.323 176.164 128.562 177.058 128.562 178.012V178.562ZM119.625 168.75C119.625 167.369 120.744 166.25 122.125 166.25C123.506 166.25 124.625 167.369 124.625 168.75C124.625 170.131 123.506 171.25 122.125 171.25C120.744 171.25 119.625 170.131 119.625 168.75Z",fill:"white"}),f.createElement("path",{d:"M112.581 1L125 13.7668V113H20V1H112.581Z",fill:"white"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5 0.5H112.792L125.5 13.5637V113.5H19.5V0.5ZM20.5 1.5V112.5H124.5V14.2668H112.081V1.5H20.5ZM113.081 2.23108L123.816 13.2668H113.081V2.23108Z",fill:"black",fillOpacity:"0.8"}),f.createElement("path",{d:"M38 71C41.866 71 45 67.866 45 64C45 60.134 41.866 57 38 57C34.134 57 31 60.134 31 64C31 67.866 34.134 71 38 71Z",fill:"#56CCF2",fillOpacity:"0.8"}),f.createElement("path",{d:"M60 71C63.866 71 67 67.866 67 64C67 60.134 63.866 57 60 57C56.134 57 53 60.134 53 64C53 67.866 56.134 71 60 71Z",fill:"#EB5757"}),f.createElement("path",{d:"M82 71C85.866 71 89 67.866 89 64C89 60.134 85.866 57 82 57C78.134 57 75 60.134 75 64C75 67.866 78.134 71 82 71Z",fill:"#F2994A"}),f.createElement("path",{d:"M104 71C107.866 71 111 67.866 111 64C111 60.134 107.866 57 104 57C100.134 57 97 60.134 97 64C97 67.866 100.134 71 104 71Z",fill:"#F2C94C"}),f.createElement("path",{d:"M38 49C41.866 49 45 45.866 45 42C45 38.134 41.866 35 38 35C34.134 35 31 38.134 31 42C31 45.866 34.134 49 38 49Z",fill:"#333333"}),f.createElement("path",{d:"M60 49C63.866 49 67 45.866 67 42C67 38.134 63.866 35 60 35C56.134 35 53 38.134 53 42C53 45.866 56.134 49 60 49Z",fill:"#4F4F4F"}),f.createElement("path",{d:"M82 49C85.866 49 89 45.866 89 42C89 38.134 85.866 35 82 35C78.134 35 75 38.134 75 42C75 45.866 78.134 49 82 49Z",fill:"#828282"}),f.createElement("path",{d:"M104 49C107.866 49 111 45.866 111 42C111 38.134 107.866 35 104 35C100.134 35 97 38.134 97 42C97 45.866 100.134 49 104 49Z",fill:"#E0E0E0"}),f.createElement("path",{d:"M36.66 20L36.1 18.36H33.26L32.68 20H31.05L33.72 13H35.69L38.34 20H36.66ZM33.7 17.1H35.67L35.15 15.58C34.99 15.11 34.97 14.59 34.96 13.85H34.42C34.41 14.59 34.4 15.11 34.23 15.59L33.7 17.1ZM39.9023 21.95C38.9523 21.95 38.6523 21.49 38.6523 21.01C38.6523 20.61 38.9823 20.32 39.3423 20.21V19.75C39.0223 19.66 38.7723 19.44 38.7723 19.08C38.7723 18.54 39.1623 18.28 39.5923 18.14V17.69C39.2423 17.44 39.0223 17.16 39.0223 16.65C39.0223 15.6 39.9323 14.85 41.1023 14.85C41.9223 14.85 42.6723 15.17 42.9323 15.9H43.3623C43.4423 15.17 43.6723 15 44.1523 15H44.4123V16.08H43.8623C43.5523 16.08 43.4723 16.15 43.4123 16.66L43.4023 16.75C43.2823 17.83 42.4123 18.49 41.2423 18.49C40.8723 18.49 40.5023 18.45 40.2023 18.32C39.9223 18.4 39.8223 18.51 39.8223 18.67C39.8223 18.89 40.0323 18.89 40.3223 18.89H42.4723C43.5423 18.89 44.2123 19.59 44.2123 20.4C44.2123 21.41 43.4523 21.95 42.4723 21.95H39.9023ZM41.2323 17.56C41.7623 17.56 42.1123 17.22 42.1123 16.71C42.1123 16.19 41.7623 15.81 41.2323 15.81C40.7023 15.81 40.3523 16.19 40.3523 16.71C40.3523 17.22 40.7023 17.56 41.2323 17.56ZM40.2423 20.92H42.1923C42.6623 20.92 42.8123 20.73 42.8123 20.45C42.8123 20.22 42.6623 20 42.1923 20H40.0023C39.8823 20.07 39.7423 20.25 39.7423 20.45C39.7423 20.77 39.9723 20.92 40.2423 20.92Z",fill:"black",fillOpacity:"0.8"}),f.createElement("path",{d:"M54.62 20L53.97 18.15H50.89L50.23 20H49.15L51.78 13H53.16L55.74 20H54.62ZM51.22 17.23H53.64L52.97 15.33C52.77 14.75 52.66 14.35 52.65 13.7H52.23C52.21 14.35 52.11 14.76 51.9 15.33L51.22 17.23ZM57.4441 21.95C56.5441 21.95 56.2441 21.45 56.2441 21.05C56.2441 20.6 56.5041 20.27 56.9341 20.08V19.72C56.6641 19.63 56.4441 19.41 56.4441 19.11C56.4441 18.73 56.7041 18.43 57.1841 18.23V17.87C56.8741 17.62 56.6441 17.28 56.6441 16.64C56.6441 15.7 57.4141 14.9 58.5441 14.9C59.5941 14.9 60.0441 15.46 60.2141 15.87H60.5641C60.6041 15.4 60.8441 15.04 61.3241 15.04H61.6641V15.82H61.2541C60.8341 15.82 60.6741 15.92 60.6341 16.49L60.6141 16.73C60.5241 17.85 59.7541 18.57 58.6441 18.57C58.3041 18.57 57.9841 18.53 57.7041 18.38C57.4341 18.49 57.2641 18.67 57.2641 18.85C57.2641 19.02 57.3641 19.17 57.7041 19.17H59.8541C60.8241 19.17 61.4541 19.73 61.4541 20.56C61.4541 21.49 60.7341 21.95 59.8741 21.95H57.4441ZM58.6441 17.83C59.2941 17.83 59.7141 17.4 59.7141 16.74C59.7141 16.09 59.2941 15.64 58.6441 15.64C57.9941 15.64 57.5741 16.09 57.5741 16.74C57.5741 17.4 57.9941 17.83 58.6441 17.83ZM57.8241 21.15H59.7541C60.1541 21.15 60.5041 21.04 60.5041 20.57C60.5041 20.1 60.1541 20 59.7541 20H57.4341C57.2741 20.1 57.0741 20.32 57.0741 20.63C57.0741 21.03 57.3441 21.15 57.8241 21.15Z",fill:"black",fillOpacity:"0.8"}),f.createElement("path",{d:"M67.4862 20H66.2205L68.5249 13.4545H69.9886L72.2962 20H71.0305L69.2823 14.7969H69.2312L67.4862 20ZM67.5277 17.4336H70.9794V18.386H67.5277V17.4336ZM75.1377 21.9432C74.7222 21.9432 74.3653 21.8867 74.067 21.7738C73.7687 21.663 73.529 21.5138 73.3479 21.3263C73.1668 21.1388 73.0411 20.9311 72.9708 20.7031L74.0127 20.4506C74.0596 20.5465 74.1277 20.6413 74.2172 20.7351C74.3067 20.831 74.4271 20.9098 74.5784 20.9716C74.7318 21.0355 74.9246 21.0675 75.1569 21.0675C75.485 21.0675 75.7566 20.9876 75.9718 20.8278C76.187 20.6701 76.2946 20.4102 76.2946 20.0479V19.1179H76.2371C76.1775 19.2372 76.0901 19.3597 75.975 19.4854C75.8621 19.6112 75.7119 19.7166 75.5244 19.8018C75.339 19.8871 75.1057 19.9297 74.8245 19.9297C74.4473 19.9297 74.1054 19.8413 73.7986 19.6644C73.4939 19.4854 73.251 19.2191 73.0699 18.8654C72.8909 18.5096 72.8014 18.0643 72.8014 17.5295C72.8014 16.9904 72.8909 16.5355 73.0699 16.1648C73.251 15.7919 73.4949 15.5096 73.8017 15.3178C74.1086 15.1239 74.4505 15.027 74.8277 15.027C75.1153 15.027 75.3518 15.076 75.5372 15.174C75.7247 15.2699 75.8738 15.386 75.9846 15.5224C76.0954 15.6566 76.1796 15.7834 76.2371 15.9027H76.301V15.0909H77.442V20.0799C77.442 20.4996 77.3419 20.8469 77.1416 21.1218C76.9413 21.3967 76.6675 21.6023 76.3202 21.7386C75.9729 21.875 75.5787 21.9432 75.1377 21.9432ZM75.1473 19.022C75.3923 19.022 75.6011 18.9624 75.7737 18.843C75.9463 18.7237 76.0773 18.5522 76.1668 18.3285C76.2563 18.1048 76.301 17.8363 76.301 17.5231C76.301 17.2141 76.2563 16.9435 76.1668 16.7113C76.0794 16.479 75.9495 16.299 75.7769 16.1712C75.6064 16.0412 75.3966 15.9762 75.1473 15.9762C74.8895 15.9762 74.6743 16.0433 74.5017 16.1776C74.3291 16.3118 74.1991 16.4961 74.1118 16.7305C74.0244 16.9627 73.9807 17.2269 73.9807 17.5231C73.9807 17.8235 74.0244 18.0866 74.1118 18.3125C74.2013 18.5362 74.3323 18.7109 74.5049 18.8366C74.6796 18.9602 74.8937 19.022 75.1473 19.022Z",fill:"black",fillOpacity:"0.8"}),f.createElement("path",{d:"M84.0611 20H83.2301L85.6335 13.4545H86.4517L88.8551 20H88.0241L86.0682 14.4901H86.017L84.0611 20ZM84.3679 17.4432H87.7173V18.1463H84.3679V17.4432ZM91.7989 21.9432C91.4346 21.9432 91.1213 21.8963 90.8593 21.8026C90.5972 21.7109 90.3788 21.5895 90.2041 21.4382C90.0315 21.2891 89.8941 21.1293 89.7918 20.9588L90.3927 20.5369C90.4608 20.6264 90.5471 20.7287 90.6515 20.8438C90.7559 20.9609 90.8987 21.0621 91.0798 21.1474C91.263 21.2347 91.5027 21.2784 91.7989 21.2784C92.1952 21.2784 92.5223 21.1825 92.7801 20.9908C93.0379 20.799 93.1668 20.4986 93.1668 20.0895V19.0923H93.1029C93.0475 19.1818 92.9687 19.2926 92.8664 19.4247C92.7662 19.5547 92.6213 19.6708 92.4317 19.7731C92.2442 19.8732 91.9907 19.9233 91.6711 19.9233C91.2748 19.9233 90.9189 19.8295 90.6036 19.642C90.2904 19.4545 90.0422 19.1818 89.8589 18.8239C89.6778 18.4659 89.5873 18.0312 89.5873 17.5199C89.5873 17.017 89.6757 16.5792 89.8525 16.2063C90.0294 15.8313 90.2755 15.5415 90.5908 15.337C90.9062 15.1303 91.2705 15.027 91.6838 15.027C92.0035 15.027 92.257 15.0803 92.4445 15.1868C92.6341 15.2912 92.779 15.4105 92.8792 15.5447C92.9814 15.6768 93.0603 15.7855 93.1157 15.8707H93.1924V15.0909H93.9211V20.1406C93.9211 20.5625 93.8252 20.9055 93.6334 21.1697C93.4438 21.4361 93.1881 21.631 92.8664 21.7546C92.5468 21.8803 92.191 21.9432 91.7989 21.9432ZM91.7733 19.2457C92.0759 19.2457 92.3316 19.1765 92.5404 19.038C92.7492 18.8995 92.9079 18.7003 93.0166 18.4403C93.1253 18.1804 93.1796 17.8693 93.1796 17.5071C93.1796 17.1534 93.1263 16.8413 93.0198 16.5707C92.9133 16.3001 92.7556 16.0881 92.5468 15.9347C92.338 15.7812 92.0802 15.7045 91.7733 15.7045C91.4537 15.7045 91.1874 15.7855 90.9743 15.9474C90.7634 16.1094 90.6047 16.3267 90.4981 16.5994C90.3937 16.8722 90.3415 17.1747 90.3415 17.5071C90.3415 17.848 90.3948 18.1495 90.5013 18.4116C90.61 18.6715 90.7698 18.8761 90.9807 19.0252C91.1938 19.1722 91.458 19.2457 91.7733 19.2457Z",fill:"black",fillOpacity:"0.8"}),f.createElement("path",{d:"M75.8419 93V88.6364H77.4399C77.7496 88.6364 78.006 88.6875 78.2091 88.7898C78.4122 88.8906 78.5642 89.0277 78.6651 89.201C78.7659 89.3729 78.8163 89.5668 78.8163 89.7827C78.8163 89.9645 78.783 90.1179 78.7162 90.2429C78.6494 90.3665 78.5599 90.4659 78.4477 90.5412C78.3369 90.6151 78.2148 90.669 78.0813 90.7031V90.7457C78.2261 90.7528 78.3675 90.7997 78.5053 90.8864C78.6445 90.9716 78.7595 91.093 78.8504 91.2507C78.9413 91.4084 78.9868 91.6001 78.9868 91.826C78.9868 92.049 78.9342 92.2493 78.8291 92.4268C78.7254 92.603 78.5649 92.7429 78.3476 92.8466C78.1303 92.9489 77.8526 93 77.5145 93H75.8419ZM76.5003 92.4354H77.4506C77.7659 92.4354 77.9918 92.3743 78.1281 92.2521C78.2645 92.13 78.3327 91.9773 78.3327 91.794C78.3327 91.6562 78.2979 91.5298 78.2283 91.4148C78.1587 91.2997 78.0592 91.2081 77.93 91.1399C77.8021 91.0717 77.6501 91.0376 77.474 91.0376H76.5003V92.4354ZM76.5003 90.5241H77.3824C77.5301 90.5241 77.6629 90.4957 77.7808 90.4389C77.9001 90.3821 77.9946 90.3026 78.0642 90.2003C78.1352 90.0966 78.1707 89.9744 78.1707 89.8338C78.1707 89.6534 78.1075 89.5021 77.9811 89.38C77.8547 89.2578 77.6608 89.1967 77.3994 89.1967H76.5003V90.5241ZM81.8197 91.6428V89.7273H82.4589V93H81.8325V92.4332H81.7984C81.7231 92.608 81.6024 92.7536 81.4362 92.87C81.2714 92.9851 81.0662 93.0426 80.8204 93.0426C80.6102 93.0426 80.4241 92.9964 80.2622 92.9041C80.1017 92.8104 79.9752 92.6719 79.8829 92.4886C79.792 92.3054 79.7465 92.0788 79.7465 91.8089V89.7273H80.3836V91.7322C80.3836 91.9553 80.4454 92.1328 80.569 92.2649C80.6926 92.397 80.8531 92.4631 81.0505 92.4631C81.1698 92.4631 81.2885 92.4332 81.4063 92.3736C81.5257 92.3139 81.6244 92.2237 81.7025 92.103C81.7821 91.9822 81.8211 91.8288 81.8197 91.6428ZM84.8726 89.7273V90.2386H83.085V89.7273H84.8726ZM83.5644 88.9432H84.2014V92.0391C84.2014 92.1626 84.2199 92.2557 84.2568 92.3182C84.2938 92.3793 84.3414 92.4212 84.3996 92.4439C84.4593 92.4652 84.5239 92.4759 84.5935 92.4759C84.6446 92.4759 84.6894 92.4723 84.7277 92.4652C84.7661 92.4581 84.7959 92.4524 84.8172 92.4482L84.9323 92.9744C84.8953 92.9886 84.8428 93.0028 84.7746 93.017C84.7064 93.0327 84.6212 93.0412 84.5189 93.0426C84.3513 93.0455 84.195 93.0156 84.0502 92.9531C83.9053 92.8906 83.7881 92.794 83.6986 92.6634C83.6091 92.5327 83.5644 92.3686 83.5644 92.1712V88.9432ZM87.135 89.7273V90.2386H85.3474V89.7273H87.135ZM85.8268 88.9432H86.4639V92.0391C86.4639 92.1626 86.4823 92.2557 86.5193 92.3182C86.5562 92.3793 86.6038 92.4212 86.662 92.4439C86.7217 92.4652 86.7863 92.4759 86.8559 92.4759C86.907 92.4759 86.9518 92.4723 86.9901 92.4652C87.0285 92.4581 87.0583 92.4524 87.0796 92.4482L87.1947 92.9744C87.1578 92.9886 87.1052 93.0028 87.037 93.017C86.9688 93.0327 86.8836 93.0412 86.7813 93.0426C86.6137 93.0455 86.4575 93.0156 86.3126 92.9531C86.1677 92.8906 86.0505 92.794 85.961 92.6634C85.8715 92.5327 85.8268 92.3686 85.8268 92.1712V88.9432ZM89.2131 93.0661C88.9063 93.0661 88.6386 92.9957 88.4099 92.8551C88.1812 92.7145 88.0036 92.5178 87.8772 92.2649C87.7508 92.0121 87.6876 91.7166 87.6876 91.3786C87.6876 91.0391 87.7508 90.7422 87.8772 90.4879C88.0036 90.2337 88.1812 90.0362 88.4099 89.8956C88.6386 89.755 88.9063 89.6847 89.2131 89.6847C89.52 89.6847 89.7877 89.755 90.0164 89.8956C90.2451 90.0362 90.4227 90.2337 90.5491 90.4879C90.6755 90.7422 90.7387 91.0391 90.7387 91.3786C90.7387 91.7166 90.6755 92.0121 90.5491 92.2649C90.4227 92.5178 90.2451 92.7145 90.0164 92.8551C89.7877 92.9957 89.52 93.0661 89.2131 93.0661ZM89.2153 92.5312C89.4141 92.5312 89.5789 92.4787 89.7096 92.3736C89.8403 92.2685 89.9369 92.1286 89.9994 91.9538C90.0633 91.7791 90.0952 91.5866 90.0952 91.3764C90.0952 91.1676 90.0633 90.9759 89.9994 90.8011C89.9369 90.625 89.8403 90.4837 89.7096 90.3771C89.5789 90.2706 89.4141 90.2173 89.2153 90.2173C89.015 90.2173 88.8488 90.2706 88.7167 90.3771C88.586 90.4837 88.4887 90.625 88.4248 90.8011C88.3623 90.9759 88.331 91.1676 88.331 91.3764C88.331 91.5866 88.3623 91.7791 88.4248 91.9538C88.4887 92.1286 88.586 92.2685 88.7167 92.3736C88.8488 92.4787 89.015 92.5312 89.2153 92.5312ZM92.1169 91.0568V93H91.4798V89.7273H92.0913V90.2599H92.1318C92.2071 90.0866 92.325 89.9474 92.4855 89.8423C92.6474 89.7372 92.8513 89.6847 93.097 89.6847C93.32 89.6847 93.5153 89.7315 93.683 89.8253C93.8506 89.9176 93.9805 90.0554 94.0729 90.2386C94.1652 90.4219 94.2114 90.6484 94.2114 90.9183V93H93.5743V90.995C93.5743 90.7578 93.5125 90.5724 93.3889 90.4389C93.2653 90.304 93.0956 90.2365 92.8797 90.2365C92.732 90.2365 92.6006 90.2685 92.4855 90.3324C92.3719 90.3963 92.2817 90.4901 92.2149 90.6136C92.1496 90.7358 92.1169 90.8835 92.1169 91.0568Z",fill:"black",fillOpacity:"0.8"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73 83C71.8954 83 71 83.8954 71 85V97C71 98.1046 71.8954 99 73 99H97C98.1046 99 99 98.1046 99 97V85C99 83.8954 98.1046 83 97 83H73ZM70 85C70 83.3431 71.3431 82 73 82H97C98.6569 82 100 83.3431 100 85V97C100 98.6569 98.6569 100 97 100H73C71.3431 100 70 98.6569 70 97V85Z",fill:"black",fillOpacity:"0.8"}),f.createElement("path",{d:"M58 82H34C32.3431 82 31 83.3431 31 85V97C31 98.6569 32.3431 100 34 100H58C59.6569 100 61 98.6569 61 97V85C61 83.3431 59.6569 82 58 82Z",fill:"#56CCF2",fillOpacity:"0.8"}),f.createElement("path",{d:"M36.7669 93V88.6364H38.3649C38.6746 88.6364 38.931 88.6875 39.1341 88.7898C39.3372 88.8906 39.4892 89.0277 39.5901 89.201C39.6909 89.3729 39.7413 89.5668 39.7413 89.7827C39.7413 89.9645 39.708 90.1179 39.6412 90.2429C39.5744 90.3665 39.4849 90.4659 39.3727 90.5412C39.2619 90.6151 39.1398 90.669 39.0063 90.7031V90.7457C39.1511 90.7528 39.2925 90.7997 39.4303 90.8864C39.5695 90.9716 39.6845 91.093 39.7754 91.2507C39.8663 91.4084 39.9118 91.6001 39.9118 91.826C39.9118 92.049 39.8592 92.2493 39.7541 92.4268C39.6504 92.603 39.4899 92.7429 39.2726 92.8466C39.0553 92.9489 38.7776 93 38.4395 93H36.7669ZM37.4253 92.4354H38.3756C38.6909 92.4354 38.9168 92.3743 39.0531 92.2521C39.1895 92.13 39.2577 91.9773 39.2577 91.794C39.2577 91.6562 39.2229 91.5298 39.1533 91.4148C39.0837 91.2997 38.9842 91.2081 38.855 91.1399C38.7271 91.0717 38.5751 91.0376 38.399 91.0376H37.4253V92.4354ZM37.4253 90.5241H38.3074C38.4551 90.5241 38.5879 90.4957 38.7058 90.4389C38.8251 90.3821 38.9196 90.3026 38.9892 90.2003C39.0602 90.0966 39.0957 89.9744 39.0957 89.8338C39.0957 89.6534 39.0325 89.5021 38.9061 89.38C38.7797 89.2578 38.5858 89.1967 38.3244 89.1967H37.4253V90.5241ZM42.7747 91.6428V89.7273H43.4139V93H42.7875V92.4332H42.7534C42.6781 92.608 42.5574 92.7536 42.3912 92.87C42.2264 92.9851 42.0212 93.0426 41.7754 93.0426C41.5652 93.0426 41.3791 92.9964 41.2172 92.9041C41.0567 92.8104 40.9302 92.6719 40.8379 92.4886C40.747 92.3054 40.7015 92.0788 40.7015 91.8089V89.7273H41.3386V91.7322C41.3386 91.9553 41.4004 92.1328 41.524 92.2649C41.6476 92.397 41.8081 92.4631 42.0055 92.4631C42.1248 92.4631 42.2435 92.4332 42.3613 92.3736C42.4807 92.3139 42.5794 92.2237 42.6575 92.103C42.7371 91.9822 42.7761 91.8288 42.7747 91.6428ZM45.8576 89.7273V90.2386H44.07V89.7273H45.8576ZM44.5494 88.9432H45.1864V92.0391C45.1864 92.1626 45.2049 92.2557 45.2418 92.3182C45.2788 92.3793 45.3264 92.4212 45.3846 92.4439C45.4443 92.4652 45.5089 92.4759 45.5785 92.4759C45.6296 92.4759 45.6744 92.4723 45.7127 92.4652C45.7511 92.4581 45.7809 92.4524 45.8022 92.4482L45.9173 92.9744C45.8803 92.9886 45.8278 93.0028 45.7596 93.017C45.6914 93.0327 45.6062 93.0412 45.5039 93.0426C45.3363 93.0455 45.18 93.0156 45.0352 92.9531C44.8903 92.8906 44.7731 92.794 44.6836 92.6634C44.5941 92.5327 44.5494 92.3686 44.5494 92.1712V88.9432ZM48.15 89.7273V90.2386H46.3624V89.7273H48.15ZM46.8418 88.9432H47.4789V92.0391C47.4789 92.1626 47.4973 92.2557 47.5343 92.3182C47.5712 92.3793 47.6188 92.4212 47.677 92.4439C47.7367 92.4652 47.8013 92.4759 47.8709 92.4759C47.922 92.4759 47.9668 92.4723 48.0051 92.4652C48.0435 92.4581 48.0733 92.4524 48.0946 92.4482L48.2097 92.9744C48.1728 92.9886 48.1202 93.0028 48.052 93.017C47.9838 93.0327 47.8986 93.0412 47.7963 93.0426C47.6287 93.0455 47.4725 93.0156 47.3276 92.9531C47.1827 92.8906 47.0655 92.794 46.976 92.6634C46.8865 92.5327 46.8418 92.3686 46.8418 92.1712V88.9432ZM50.2581 93.0661C49.9513 93.0661 49.6836 92.9957 49.4549 92.8551C49.2262 92.7145 49.0486 92.5178 48.9222 92.2649C48.7958 92.0121 48.7326 91.7166 48.7326 91.3786C48.7326 91.0391 48.7958 90.7422 48.9222 90.4879C49.0486 90.2337 49.2262 90.0362 49.4549 89.8956C49.6836 89.755 49.9513 89.6847 50.2581 89.6847C50.565 89.6847 50.8327 89.755 51.0614 89.8956C51.2901 90.0362 51.4677 90.2337 51.5941 90.4879C51.7205 90.7422 51.7837 91.0391 51.7837 91.3786C51.7837 91.7166 51.7205 92.0121 51.5941 92.2649C51.4677 92.5178 51.2901 92.7145 51.0614 92.8551C50.8327 92.9957 50.565 93.0661 50.2581 93.0661ZM50.2603 92.5312C50.4591 92.5312 50.6239 92.4787 50.7546 92.3736C50.8853 92.2685 50.9819 92.1286 51.0444 91.9538C51.1083 91.7791 51.1402 91.5866 51.1402 91.3764C51.1402 91.1676 51.1083 90.9759 51.0444 90.8011C50.9819 90.625 50.8853 90.4837 50.7546 90.3771C50.6239 90.2706 50.4591 90.2173 50.2603 90.2173C50.06 90.2173 49.8938 90.2706 49.7617 90.3771C49.631 90.4837 49.5337 90.625 49.4698 90.8011C49.4073 90.9759 49.376 91.1676 49.376 91.3764C49.376 91.5866 49.4073 91.7791 49.4698 91.9538C49.5337 92.1286 49.631 92.2685 49.7617 92.3736C49.8938 92.4787 50.06 92.5312 50.2603 92.5312ZM53.1919 91.0568V93H52.5548V89.7273H53.1663V90.2599H53.2068C53.2821 90.0866 53.4 89.9474 53.5605 89.8423C53.7224 89.7372 53.9263 89.6847 54.172 89.6847C54.395 89.6847 54.5903 89.7315 54.758 89.8253C54.9256 89.9176 55.0555 90.0554 55.1479 90.2386C55.2402 90.4219 55.2864 90.6484 55.2864 90.9183V93H54.6493V90.995C54.6493 90.7578 54.5875 90.5724 54.4639 90.4389C54.3403 90.304 54.1706 90.2365 53.9547 90.2365C53.807 90.2365 53.6756 90.2685 53.5605 90.3324C53.4469 90.3963 53.3567 90.4901 53.2899 90.6136C53.2246 90.7358 53.1919 90.8835 53.1919 91.0568Z",fill:"white"}),f.createElement("mask",{id:"mask0_1_30",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"20",y:"121",width:"107",height:"22"},f.createElement("path",{d:"M126.001 121H20.5566V143H126.001V121Z",fill:"white"})),f.createElement("g",{mask:"url(#mask0_1_30)",className:"oss_sales_upsell_modal--graphicLine--6Z-mU"},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73 143V121H74V143H73Z"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M40.5566 121.477L20.5566 143L19.8759 142.267L39.8759 120.745L40.5566 121.477Z"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M126 142.523L106 121L106.681 120.267L126.681 141.79L126 142.523Z"})))}let fw=[{key:1,elem:(0,eN.tx)("oss_sales_upsell_overlay.feature1")},{key:2,elem:(0,eN.tx)("oss_sales_upsell_overlay.feature2")},{key:3,elem:(0,eN.tx)("oss_sales_upsell_overlay.feature3")}],fT=(0,cV.Ju)(function({onDismiss:e}){let t=(0,S.md)(af.yV),n=(0,_.wA)();return f.createElement(cK.Rw,{isLoading:!(null==t?void 0:t.teamId),confirmationTitle:(0,eN.tx)("oss_sales_upsell_overlay.title"),titleClass:"oss_sales_upsell_modal--title--wpaS5",confirmText:(0,eN.tx)("oss_sales_upsell_overlay.primary_cta"),cancelText:(0,eN.tx)("oss_sales_upsell_overlay.secondary_cta"),onConfirm:()=>{if(!(null==t?void 0:t.teamId))return;let e=sM.b.LIBRARY_DUPLICATE_OSS_SALES_UPSELL;n((0,ty.to)({type:sP.V,data:{upsellSource:e,teamId:t.teamId,isProCurrent:!0,overrideHighlightedPlan:"none",openCheckoutInNewTab:!0}}))},onCancel:()=>{n((0,ty.to)({type:fb.lk,data:{source:fb.B7.LIBRARY_DUPLICATE_OSS_SALES_UPSELL,overridePlaceholderText:(0,eN.t)("oss_sales_upsell_overlay.contact_sales_form.text_placeholder")}}))},onCloseButtonClick:e,className:"oss_sales_upsell_modal--modal--fdI6U",overrideOnHide:e,hideOnConfirm:!1,hideOnCancel:!1,autoFocusCta:!1},f.createElement("div",{className:a8.cx.lh24.font13.pt24.pr0.pb32.pl0.$},f.createElement(fy.Y,{spacing:"40px"},f.createElement(fy.Y,{direction:"vertical",spacing:"12px"},f.createElement("p",null,(0,eN.tx)("oss_sales_upsell_overlay.body1")),f.createElement(fy.Y,{direction:"vertical",spacing:8},f.createElement("p",{className:a8.cx.fontSemiBold.$},(0,eN.tx)("oss_sales_upsell_overlay.body2")),f.createElement(fy.Y,{direction:"vertical",spacing:8},fw.map(e=>f.createElement(fy.Y,{key:e.key,spacing:8,horizontalAlignItems:"start"},f.createElement("p",null,"\u2713"),f.createElement("p",null,e.elem))))),f.createElement("p",{className:a8.cx.pt4.$},(0,eN.tx)("oss_sales_upsell_overlay.body3"))),f.createElement("div",{className:a8.cx.mr16.$},f.createElement(fC,null)))),f.createElement("div",{className:a8.cx.bt1.colorBorder.bSolid.$}))},"OssSalesUpsellModal");function fx(){let e=(0,S.md)(af.As),t=(0,S.md)(af.ze);return e&&t?f.createElement(fN,{teamId:e,fileKey:t}):null}function fN({teamId:e,fileKey:t}){let n=(0,_.wA)(),a=(0,S.md)(sR.M$),l=(0,eW.Rs)(eJ.TNJ,{id:e}),r=(0,n7.e)({overlay:an.jRE,priority:n8.N.DEFAULT_MODAL},[a,l]),i=(0,fE.b6)({undefinedIfKnownDomain:!0});return(0,np.h)(()=>{r.show({canShow:(e,n)=>{var a;return!!(i&&(0,fv.nN)(t))&&!e&&null!=(a=n.team)&&!!a.hasPermission}})}),(0,f.useEffect)(()=>{r.isShowing&&(0,fv.wj)()},[i,r.isShowing]),f.createElement(sZ.h,{isShowing:r.isShowing,modalType:s0.q3.FEATURE_UPDATE,element:function(e){return(0,np.h)(()=>{n((0,ty.to)({type:fT,data:{onDismiss:e.dismissModal}}))}),f.createElement("div",null)},trackingContextName:"oss_sales_upsell_overlay",onClickPrimaryCta:nf.lQ,onClose:r.complete,onManualDismiss:r.complete,testId:"oss_sales_upsell_overlay_test_id"})}let fS=(0,lt.ex)("old_outline_shortcuts",function(){let e=dE.y.isApple();return f.createElement("div",{className:a8.cx.flex.flexRow.gap12.$},f.createElement("div",{className:a8.cx.flex.flexColumn.alignLeft.$},f.createElement("span",null,(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.show_outlines")),f.createElement("span",null,(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.outline_stroke")),f.createElement("span",null,(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.team_library"))),f.createElement("div",{className:a8.cx.flex.flexColumn.alignRight.$},f.createElement("span",null,f.createElement(nw.S,{shortcut:e?"\u21E7O":"Shift+O"})),f.createElement("span",null,f.createElement(nw.S,{shortcut:e?"\u21E7\u2318O":"Ctrl+Shift+O"})),f.createElement("span",null,f.createElement(nw.S,{shortcut:e?"\u2325\u2318O":"Ctrl+Alt+O"}))))}),fk="seen_outline_mode_shortcut_pref_overlay",fI=(0,ai.r1)(fk),fA=new Date("2024-03-15T18:00:00.000Z").getTime();function fO(e){let t=(0,e2.md)(sR.mp),n=(0,e2.md)(fI),a=(0,tM.S0)(),{show:l,isShowing:r,complete:i,uniqueId:o}=(0,n7.e)({overlay:an.x9K,priority:n8.N.DEFAULT_MODAL},[n,t]),s=dE.y.isApple(),c=dE.y.isChromeOS(),d=f.useMemo(()=>f.createElement(nw.S,{shortcut:s?"\u21E7\u2318O":"Ctrl+Shift+O"}),[s]),u=f.useMemo(()=>f.createElement(nw.S,{shortcut:s?"\u2325\u2318O":"Ctrl+Alt+O"}),[s]),m=f.useMemo(()=>f.createElement(nw.S,{shortcut:c?"Alt+Shift+3":s?"\u23253":"Alt+3"}),[s,c]),[p,_]=f.useState(!1);return f.useEffect(()=>{r&&a&&i()},[r,a,i]),(0,sD.E)(o,["show_outline_shortcuts_overlay"],e=>{var t;r||_((null==(t=e.properties)?void 0:t.entrypoint)==="alt+meta+O"),l({canShow:(e,t)=>!!(0,y.kc)().ce_outlines_shortcut_onboarding&&!a&&!e&&null!=t&&t.getTime()<=fA})}),f.createElement(sH.X,{width:350,isShowing:r,title:(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.title"),description:f.createElement("div",null,p?(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.changed_shortcuts"):(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.changed_outline_shortcuts"),f.createElement("ul",{className:"outline_mode_shortcut_pref_overlay--shortcutList--DJ5Vg"},f.createElement("li",null,(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.show_outlines_updated",{showOutlines:f.createElement("strong",null,(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.show_outlines")),showOutlinesKeyCommand:d})),f.createElement("li",null,(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.outline_stroke_updated",{outlineStroke:f.createElement("strong",null,(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.outline_stroke")),outlineStrokeKeyCommand:u})),p?f.createElement("li",null,(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.team_library_updated",{teamLibrary:f.createElement("strong",null,(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.team_library")),teamLibraryKeyCommand:m})):null),(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.opt_out_options")),primaryCta:{label:(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.got_it"),type:"button",onClick:i,ctaTrackingDescriptor:ar.c.GOT_IT},secondaryCta:{label:(0,eN.tx)("fullscreen.outline_shortcuts_onboarding.keep_old_shortcuts"),type:"button",onClick:()=>{et.Y5.triggerAction("toggle-use-old-outline-shortcuts"),i()},ctaTrackingDescriptor:ar.c.KEEP_OLD_SHORTCUTS,tooltipProperties:{"data-tooltip-type":nx.Ib.SPECIAL,"data-tooltip":fS,"data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-hide-immediately":!0}},trackingContextName:"Outline Shortcuts Preference Onboarding Modal",userFlagOnShow:fk,position:sG.Q.BOTTOM_RIGHT,onClose:i})}var fL=n(862442),fP=n(433861);function fD(){let{show:e,isShowing:t,complete:n,uniqueId:a}=(0,n7.e)({overlay:an.Q8d,priority:n8.N.DEFAULT_MODAL}),l=!!(0,eT.f)("seen_pinned_comments_education_callout"),r=!!(0,eT.f)("has_toggled_comment_pin"),i=(0,af.q5)(),o=(0,ew.TA)(),s=f.useContext(fP.kw),c=(0,fL.Z)();return((0,sD.E)(a,"Context Viewed",t=>{var n;(null==(n=t.properties)?void 0:n.name)==="Editor > Pin comment icon"&&e({canShow:()=>!l&&(null==i?void 0:i.creatorId)===o&&!r,onShow:()=>{let{offsetX:e,offsetY:t,zoomScale:n}=s.getViewportInfo();c({centerX:e,centerY:t-72/n,scale:n})}})}),t)?f.createElement("div",{onClick:()=>{n()},role:"button",tabIndex:0},f.createElement(n9.rq,{userFlagOnShow:"seen_pinned_comments_education_callout",description:f.createElement("div",{className:a8.cx.alignCenter.$},(0,eN.tx)("comments.pinning.pinned_comments_always_show_up_first_great_for_a_project_intro_or_important_info")),onClose:()=>n(),trackingContextName:"Pinned Comments Creator Education Callout",targetKey:"pin-comment-icon",isShowing:t,arrowPosition:dk.F_.BOTTOM,width:320,disableHighlight:!0,emphasized:!0,hideCloseButton:!0,pointerOffsetOverride:196,zIndex:sG.R.UNSET,onTargetLost:()=>n()})):null}function fR(){let{show:e,isShowing:t,complete:n,uniqueId:a}=(0,n7.e)({overlay:an.S$N,priority:n8.N.DEFAULT_MODAL}),l=(0,_.wA)(),r=!!(0,eT.f)("seen_pinned_comments_navigation_callout"),i=(0,af.q5)(),o=(0,ew.TA)(),s=t&&!r;f.useEffect(()=>{s&&l(j.b({seen_pinned_comments_navigation_callout:!0}))},[l,s]);let c=f.useContext(fP.kw),d=(0,fL.Z)();return((0,sD.E)(a,"Context Viewed",a=>{var l,s;(null==(l=a.properties)?void 0:l.name)==="Editor > Pin comment icon"&&(t&&r&&(null==(s=a.properties)?void 0:s.isPinned)&&n(),e({canShow:()=>{var e;return!r&&(null==i?void 0:i.creatorId)!==o&&!!(null==(e=a.properties)?void 0:e.isPinned)},onShow:()=>{let{offsetX:e,offsetY:t,zoomScale:n}=c.getViewportInfo();d({centerX:e,centerY:t-72/n,scale:n})}}))}),t)?f.createElement("div",{onClick:()=>{n()},role:"button",tabIndex:0},f.createElement(n9.rq,{userFlagOnShow:"seen_pinned_comments_education_callout",description:f.createElement("div",{className:a8.cx.justifyCenter.alignCenter.$},(0,eN.tx)("comments.pinning.feedback_giver_callout")),onClose:()=>n(),trackingContextName:"Pinned Comments Feedback Giver Education Callout",targetKey:"thread-header-left-section",isShowing:t,arrowPosition:dk.F_.BOTTOM,width:320,disableHighlight:!0,emphasized:!0,hideCloseButton:!0,pointToLeftEdge:!0,pointerOffsetOverride:20,zIndex:sG.R.UNSET,onTargetLost:()=>n()})):null}var fM=n(384303),fF=n(963067),fB=n(258751),fU=n(787523),fH=n(212957),fG=n(442617),fV=n(611047),fK=n(89263),fW=n(66154);let fz=fV.qv.AUDIO,fj=fV.qQ.getOnboardingStepTriggerEventId(fz),fJ=fV.qQ.getOnboardingStepUserFlag(fz),fY=(0,ai.r1)(fJ);function fX(e){let t=(0,S.md)(fY),{show:n,isShowing:a,complete:l,uniqueId:r}=(0,n7.e)({overlay:an.U3h,priority:n8.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),i=(0,_.wA)(),o=(0,_.d4)(e=>{var t;return(null==(t=e.openFile)?void 0:t.key)&&!!e.voice.activeCall[e.openFile.key]}),s=(0,_.d4)(e=>{let{allUsers:t,deviceNameFilter:n}=e.multiplayer;return new Set(t.filter(e=>e.deviceName===n).map(e=>e.userID)).size}),c=(0,f.useCallback)(()=>i(j.b({[fJ]:!0})),[i]);return(0,sD.E)(r,[fK.M8],(0,f.useCallback)(()=>{s<2||o||n({canShow:e=>!e,onShow:c})},[n,c,o,s])),(0,sD.E)(r,[fj],(0,f.useCallback)(()=>{n({onBlocked:e=>fV.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,fz)})},[n])),f.createElement(si.M,{isShowing:a},f.createElement(Y.fu,{name:fH.S.getTooltipTrackingContext(fz),properties:fH.S.getTrackingProperties()},f.createElement(fW.Mi,{dismissModal:l})))}let fq=fV.qv.COMPONENT_PUBLISHING,fZ=fV.qQ.getOnboardingStepTriggerEventId(fq),fQ=fV.qQ.getOnboardingStepUserFlag(fq),f$=(0,ai.r1)(fQ);function f0(e){let t=(0,S.md)(f$),{show:n,isShowing:a,complete:l,uniqueId:r}=(0,n7.e)({overlay:an.K_4,priority:n8.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),i=(0,_.wA)(),o=(0,f.useCallback)(()=>i(j.b({[fQ]:!0})),[i]);return(0,sD.E)(r,["action_create_symbol"],(0,f.useCallback)(()=>{n({onShow:o,canShow:e=>!e})},[n,o])),(0,sD.E)(r,[fZ],(0,f.useCallback)(()=>{n({onBlocked:e=>fV.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,fq)})},[n])),f.createElement(si.M,{isShowing:a},f.createElement(Y.fu,{name:fH.S.getTooltipTrackingContext(fq),properties:fH.S.getTrackingProperties()},f.createElement(fW.Ec,{dismissModal:l})))}var f1=n(707465);let f2=fV.qv.OPEN_SESSIONS,f5=fV.qQ.getOnboardingStepTriggerEventId(f2),f4=fV.qQ.getOnboardingStepUserFlag(f2),f3=(0,ai.r1)(f4);function f6(e){let t=(0,S.md)(f3),{show:n,isShowing:a,complete:l,uniqueId:r}=(0,n7.e)({overlay:an.bJw,priority:n8.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),i=(0,_.wA)(),o=(0,_.d4)(e=>(0,f1.zg)(e.selectedView)),s=(0,_.d4)(e=>{var t;return(null==(t=e.modalShown)?void 0:t.type)===ul.g_.type}),c=(0,v.ZC)(s),d=(0,f.useCallback)(()=>i(j.b({[f4]:!0})),[i]);return(0,sD.E)(r,["multiplayer_toolbar_share_button"],(0,f.useCallback)(()=>{o||n({onShow:d,canShow:e=>!e})},[n,d,o])),(0,sD.E)(r,[f5],(0,f.useCallback)(()=>{n({onShow:()=>i((0,ty.to)({type:ul.g_,data:{source:ua.nk.expProTrialsV3CardStackWidget}})),onBlocked:e=>fV.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,f2)})},[n,i])),f.useEffect(()=>{!s&&c&&l()},[l,s,c]),f.createElement(si.M,{isShowing:a},f.createElement(Y.fu,{name:fH.S.getTooltipTrackingContext(f2),properties:fH.S.getTrackingProperties()},f.createElement(fW.Nm,{dismissModal:l})))}let f7=fV.qv.PASSWORD_PROTECTION,f8=fV.qQ.getOnboardingStepTriggerEventId(f7),f9=fV.qQ.getOnboardingStepUserFlag(f7),_e=fV.qQ.getOnboardingStepUserFlag(fV.qv.OPEN_SESSIONS),_t=(0,ai.r1)(f9),_n=(0,ai.r1)(_e);function _a(e){let t=(0,S.md)(_t),n=(0,S.md)(_n),{show:a,isShowing:l,complete:r,uniqueId:i}=(0,n7.e)({overlay:an.GUu,priority:n8.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t,n]),o=(0,_.wA)(),s=(0,_.d4)(e=>(0,Q.XE)(e.selectedView)===eq.nT.Whiteboard),c=(0,_.d4)(e=>(0,f1.zg)(e.selectedView)),d=(0,_.d4)(e=>{var t;return(null==(t=e.modalShown)?void 0:t.type)===ul.g_.type}),u=(0,v.ZC)(d),m=(0,f.useCallback)(()=>o(j.b({[f9]:!0})),[o]);return(0,sD.E)(i,["multiplayer_toolbar_share_button"],(0,f.useCallback)(()=>{c||a({onShow:m,canShow:(e,t)=>!e&&(!s||!!t)})},[a,m,s,c])),(0,sD.E)(i,[f8],(0,f.useCallback)(()=>{a({onShow:()=>o((0,ty.to)({type:ul.g_,data:{source:ua.nk.expProTrialsV3CardStackWidget}})),onBlocked:e=>fV.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,f7)})},[a,o])),f.useEffect(()=>{!d&&u&&r()},[r,d,u]),f.createElement(si.M,{isShowing:l},f.createElement(Y.fu,{name:fH.S.getTooltipTrackingContext(f7),properties:fH.S.getTrackingProperties()},f.createElement(fW._G,{dismissModal:r})))}let _l=fV.qv.UNLIMITED_PAGES,_r=fV.qQ.getOnboardingStepTriggerEventId(_l),_i=fV.qQ.getOnboardingStepUserFlag(_l),_o=(0,ai.r1)(_i);function _s(e){let t=(0,S.md)(_o),{show:n,isShowing:a,complete:l,uniqueId:r}=(0,n7.e)({overlay:an.fR0,priority:n8.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),i=(0,_.wA)(),o=(0,f.useCallback)(()=>i(j.b({[_i]:!0})),[i]);return(0,np.h)(()=>{n({onShow:o,canShow:e=>!e})}),(0,sD.E)(r,[_r],(0,f.useCallback)(()=>{n({onBlocked:e=>fV.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,_l)})},[n])),f.createElement(si.M,{isShowing:a},f.createElement(Y.fu,{name:fH.S.getTooltipTrackingContext(_l),properties:fH.S.getTrackingProperties()},f.createElement(fW.BI,{dismissModal:l})))}var _c=n(485861);let _d=fV.qv.VIDEO,_u=fV.qQ.getOnboardingStepTriggerEventId(_d),_m=fV.qQ.getOnboardingStepUserFlag(_d),_p=(0,ai.r1)(_m);function _f(e){let t=(0,S.md)(_p),{show:n,isShowing:a,complete:l,uniqueId:r}=(0,n7.e)({overlay:an.juT,priority:n8.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),i=(0,_.wA)(),o=(0,_.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)==="flyout-dropdown-shape-flyout"}),s=(0,v.ZC)(o),c=(0,f.useCallback)(()=>i(j.b({[_m]:!0})),[i]);return(0,f.useEffect)(()=>{o&&n({onShow:c,canShow:e=>!e})},[n,c,o]),(0,sD.E)(r,[_u],(0,f.useCallback)(()=>{let e=(0,_c.xT)("shape-flyout");e&&n({onShow:()=>i(nI.j7({type:"flyout-dropdown-shape-flyout",data:{items:lc.yY.children,targetRect:e.getBoundingClientRect()}})),onBlocked:e=>fV.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,_d)})},[n,i])),f.useEffect(()=>{s&&!o&&a&&l()},[s,o,l,a]),f.createElement(si.M,{isShowing:a},f.createElement(Y.fu,{name:fH.S.getTooltipTrackingContext(_d),properties:fH.S.getTrackingProperties()},f.createElement(fW.Lz,{dismissModal:l})))}let __="seen_pro_onboarding_variables_overlay",_g=(0,ai.r1)(__);function _h(){let e=(0,S.md)(_g),t=(0,n3.kO)(),{show:n,isShowing:a,complete:l}=(0,n7.e)({overlay:an.wwW,priority:n8.N.DEFAULT_MODAL,experiment:{check:t,predicate:e=>e,postCheck:e=>!e}},[e]);return(0,np.h)(()=>{n()}),f.createElement(si.M,{isShowing:a,userFlagOnShow:__},f.createElement(Y.fu,{name:fH.S.getTooltipTrackingContext("Variables"),properties:fH.S.getTrackingProperties()},f.createElement(fW.rQ,{dismissModal:l})))}let _E="seen_pro_onboarding_voting_overlay",_v=(0,ai.r1)(_E);function _y(){let e=(0,S.md)(_v),t=(0,n3.kO)(),{show:n,isShowing:a,complete:l,uniqueId:r}=(0,n7.e)({overlay:an.oyU,priority:n8.N.DEFAULT_MODAL,experiment:{check:t,predicate:e=>e,postCheck:e=>!e}},[e]),i=(0,_.d4)(e=>!!e.modalShown),o=(0,_.d4)(e=>{let{allUsers:t,deviceNameFilter:n}=e.multiplayer;return new Set(t.filter(e=>e.deviceName===n).map(e=>e.userID)).size});return(0,sD.E)(r,[fK.M8],(0,f.useCallback)(()=>{i||o<2||n()},[n,i,o])),f.createElement(si.M,{isShowing:a,userFlagOnShow:_E},f.createElement(Y.fu,{name:fH.S.getTooltipTrackingContext("Voting"),properties:fH.S.getTrackingProperties()},f.createElement(fW.lj,{dismissModal:l})))}function _b(e){let{teamId:t,isDesignEditor:n,isFigJamEditor:a}=e,l=function(){let e=(0,S.md)(fB.P),t=(0,ag.ks)(),n=(0,eb.p8)("showUi"),a=(0,eb.aV)(),l=(0,_.d4)(e=>e.openFile),r=(0,_.d4)(e=>e.selectedView),i=(0,_.d4)(e=>e.userFlags),o=(0,_.d4)(e=>e.notifications.length>0);return!!l&&!!l.editorType&&!!l.canEdit&&fH.S.canSeeOnboardingInFile({editorType:l.editorType,selectedView:r,showStarterKit:e!==fU.iH.FALSE,userFlags:i,hasNotifications:o,isDevHandoffView:t,isAppUiShown:n,isLoading:a})}(),r=(0,af.q5)(),i=(0,_.d4)(e=>e.teams[t])||null,o=(0,fF.yy)()||null,s=(null==r?void 0:r.editorType)||null,c=(0,_.d4)(e=>(0,mK.canEditTeam)(t,e)),d=(0,l9.Lk)(),u=(0,fG.M_)({team:i,org:o,editorType:s}),m=(0,n3.kO)();return l&&i&&i.pro_team&&c?f.createElement("div",{"data-testid":"proOnboardingOverlayWrapper"},f.createElement(_a,{experimentCheck:m}),d&&f.createElement(fX,{experimentCheck:m}),n&&f.createElement(f0,{experimentCheck:m}),n&&f.createElement(_s,{experimentCheck:m}),n&&f.createElement(_f,{experimentCheck:m}),a&&u&&f.createElement(f6,{experimentCheck:m}),a&&f.createElement(_y,null),n&&f.createElement(_h,null)):null}var _C=n(498270);function _w(e){let{teamId:t,isDesignEditor:n,isFigJamEditor:a}=e,l=(0,_C.i)(t),r=(0,af.q5)(),i=(0,_.d4)(e=>e.teams[t])||null,o=(0,fF.yy)()||null,s=(null==r?void 0:r.editorType)||null,c=(0,l9.Lk)(),d=(0,fG.M_)({team:i,org:o,editorType:s});return l?f.createElement("div",{"data-testid":"proTrialsV3EditorOverlayWrapper"},f.createElement(_a,null),c&&f.createElement(fX,null),n&&f.createElement(f0,null),n&&f.createElement(_s,null),n&&f.createElement(_f,null),a&&d&&f.createElement(f6,null)):null}var _T=n(279994),_x=n(520177),_N=n(5231),_S=n(983238);let _k="seen_figjam_section_preset_picker_callout",_I=(0,ai.Fu)(_k),_A=e=>(0,_.d4)(t=>{if(!e)return!1;let n=Object.keys(t.mirror.sceneGraphSelection);return 1===n.length&&n[0]===e});function _O({sectionNodeId:e,isShowing:t,complete:n}){let a=(0,lb._X)({subscribeToUpdates_expensive:!0}),l=lE.q.instance.get(e);if(!l)return null;let r=l.sectionPresetPickerCalloutPosition;if(isNaN(r.x)||isNaN(r.y))return null;let i=(0,lb.Z0)(a,r,!0),o=parseFloat(_S._1),s={top:i.y+a.y+o+2,left:i.x+a.x-150,pointerOffset:150-o,pointerPosition:dk.F_.TOP};return f.createElement(n9.rq,{isShowing:t,userFlagOnShow:_k,fixedPosition:!0,location:s,onClose:n,clickOutsideToHide:!0,trackingContextName:"section_preset_picker_callout",title:(0,eN.tx)("whiteboard.section_presets_onboarding.picker_callout.title"),description:(0,eN.tx)("whiteboard.section_presets_onboarding.picker_callout.description"),primaryCta:{label:(0,eN.tx)("rcs.got_it"),type:"button",onClick:n,ctaTrackingDescriptor:ar.c.GOT_IT},width:300})}function _L(){let e=(0,mP.q)(),t=(0,S.md)(_x.w),n=(0,S.md)(_N.m5),a=(0,S.md)(_I),l=(0,f.useRef)({numShown:0,hasLoggedToSentry:!1}),[r,i]=(0,f.useState)(null),o=_A(r),{show:s,isShowing:c,complete:d}=(0,n7.e)({overlay:an.Byv,priority:n8.N.DEFAULT_MODAL},[n,a]);return((0,f.useEffect)(()=>{t&&r&&o&&e&&s({canShow:(e,t)=>!!e&&!t})},[s,e,t,r,o]),(0,f.useEffect)(()=>{if("loaded"===a.status&&!a.data&&"loaded"===n.status&&n.data)return(0,_T.H)(function(e){i(e)})},[a,n]),(0,f.useEffect)(()=>{c&&l.current.numShown++,l.current.numShown>1&&!l.current.hasLoggedToSentry&&(l.current.hasLoggedToSentry=!0,(0,o2.x1)("SectionPresetPickerCallout","Callout shown more than once, this should not happen. Please investigate.",void 0,{reportAsSentryError:!0}))},[c]),c&&r)?f.createElement(_O,{sectionNodeId:r,isShowing:c,complete:d}):null}function _P({isShowing:e,onPrimaryCtaClick:t,onClose:n}){return f.createElement(n9.rq,{testId:"share-to-google-classroom-onboarding",isShowing:e,trackingContextName:"Share to Google Classroom Onboarding",targetKey:"share",title:(0,eN.tx)("whiteboard.google_classroom.onboarding.header"),description:(0,eN.tx)("whiteboard.google_classroom.onboarding.body"),media:f.createElement(sU.y,{src:"https://static.figma.com/uploads/90c10991400b728428a200de3b347bba3f6d1d1e",alt:(0,eN.t)("whiteboard.google_classroom.onboarding.image_alt"),aspectRatio:300/169}),primaryCta:{label:(0,eN.tx)("whiteboard.google_classroom.onboarding.show_me"),type:"button",onClick:t,ctaTrackingDescriptor:ar.c.SHOW_ME},onClose:n})}function _D(){let e=(0,_.wA)(),t=us({}),n=(0,S.md)(um),a=(0,S.md)(uf),l=(0,S.md)(u_),r=(0,S.md)(ug),i=(0,S.md)(ur.Ij),{show:o,isShowing:s,complete:c}=(0,n7.e)({overlay:an.Y2_,priority:n8.N.DEFAULT_MODAL},[a,n,l,r,t]);f.useEffect(()=>{o({onShow:()=>{e(j.b({[uu]:!0}))},canShow:(e,t,n,a,l)=>!e&&!t&&!n&&a&&l})},[t,e,o]),f.useEffect(()=>{a.data&&c()},[a,c]);let{currentStep:d,next:u}=(0,sJ.A)({numSteps:2,onComplete:c}),m=function({isShowing:e,next:t,complete:n}){let a=(0,_.wA)(),l=(0,af.q5)();return[f.createElement(_P,{key:"share-to-google-classroom-existing-user-callout",onPrimaryCtaClick:()=>{if(!l){n();return}a((0,ty.to)({type:ul.g_,data:{fileKey:l.key,source:ua.nk.shareToGoogleClassroomOnboarding}})),t()},onClose:n,isShowing:e}),f.createElement(ud,{key:"share-to-google-classroom-share-option-pointer",isShowing:e,onClose:n})]}({isShowing:s,next:u,complete:c});return f.useEffect(()=>{i&&s&&0===d&&u()},[d,s,i,u]),f.createElement(sq.U,{currentStep:d,isShowing:s,children:m})}let _R=240/135,_M=n8.N.HIGH_PRIORITY_MODAL+3,_F="seen_exit_ui3_ai_help_callout";function _B(){let{show:e,isShowing:t,complete:n,uniqueId:a}=(0,n7.e)({overlay:an.Pke,priority:_M}),l=!!(0,eT.f)(_F);return(0,sD.E)(a,ak.p,()=>{e({canShow:()=>!l})}),f.createElement(n9.rq,{userFlagOnShow:_F,description:f.createElement("div",{className:a8.cx.pr8.$},f.createElement("div",{className:a8.cx.colorTextTooltip.textBodyMediumStrong.$},(0,eN.tx)("ui3_and_ai_callouts.exit_ui3_ai.title")),f.createElement("div",{className:a8.cx.colorTextTooltipSecondary.$},(0,eN.tx)("ui3_and_ai_callouts.exit_ui3_ai.description"))),onClose:()=>n(),trackingContextName:"Exit UI3 AI Help Callout",targetKey:at.J_,isShowing:t,arrowPosition:dk.F_.BOTTOM,disableHighlight:!0,hideCloseButton:!0,onTargetLost:()=>n(),testId:"exitUi3HelpCallout",isTooltip:!0})}let _U="seen_exit_ui3_help_callout";function _H(){let{show:e,isShowing:t,complete:n,uniqueId:a}=(0,n7.e)({overlay:an.$lu,priority:_M}),l=!!(0,eT.f)(_U);return(0,sD.E)(a,ak.e7,()=>{e({canShow:()=>!l})}),f.createElement(n9.rq,{userFlagOnShow:_U,description:f.createElement("div",{className:a8.cx.pr8.$},f.createElement("div",{className:a8.cx.colorTextTooltip.textBodyMediumStrong.$},(0,eN.tx)("ui3_and_ai_callouts.exit_ui3.title")),f.createElement("div",{className:a8.cx.colorTextTooltipSecondary.$},(0,eN.tx)("ui3_and_ai_callouts.exit_ui3.description",{back_to_old_design_option:f.createElement("div",{className:a8.cx.textBodyMediumStrong.$},(0,eN.tx)("ui3_and_ai_callouts.exit_ui3.back_to_old_design_option"))}))),onClose:()=>n(),trackingContextName:"Exit UI3 Help Callout",targetKey:at.J_,isShowing:t,arrowPosition:dk.F_.BOTTOM,disableHighlight:!0,hideCloseButton:!0,onTargetLost:()=>n(),testId:"exitUi3HelpCallout",isTooltip:!0})}var _G=n(74487);let _V="has_onboarded_ui3",_K="has_onboarded_ai";function _W(){let e=!!(0,y.kc)().ui3_and_ai_welcome_modal,t=(0,_G.$)(),n=(0,_G.Q)(),a=t&&n,l=(0,Q.E3)(),r=l===eq.nT.Design,i=(0,aM.q)(),o=l===eq.nT.DevHandoff&&!i,s=(0,B.Mq)(),c=(0,n6.GS)();return e&&(r||o)&&c?{shouldShowUI3AndAIModal:a&&s,shouldShowUI3OnlyModal:n&&(!t||!s),shouldShowAIOnlyModal:a&&s}:{shouldShowUI3AndAIModal:!1,shouldShowUI3OnlyModal:!1,shouldShowAIOnlyModal:!1}}var _z=n(520607);function _j(e,t){(0,np.h)(()=>{e(j.b({[t]:!0}))})}let _J=f.createElement(_z.Jm,{src:"https://static.figma.com/uploads/acb6a1c0e3ac6be7b238b37570ad0496ff594610",aspectRatio:_R,width:240});function _Y({onClose:e,isShowing:t,onTargetLost:n}){let a=(0,_.wA)();return _j(a,ak.jx),f.createElement(n9.rq,{isShowing:t,targetKey:ak.Ij,trackingContextName:"UI3/AI Onboarding > AI",onClose:e,arrowPosition:dk.F_.BOTTOM,title:(0,eN.tx)("ui3_and_ai_tour.ai_callout.title"),description:(0,eN.tx)("ui3_and_ai_tour.ai_callout.description"),media:_J,primaryCta:{type:"button",label:(0,eN.tx)("ui3_and_ai_tour.ai_callout.show_me"),onClick:()=>{(0,ie.$I)(a,{trackingData:{source:"placeholder_<AICallout>"}}),e()},ctaTrackingDescriptor:ar.c.SHOW_ME},secondaryCta:{type:"link",label:(0,eN.tx)("ui3_and_ai_tour.ai_callout.playground_link"),href:"https://www.figma.com/community/file/1375505114072192161",ctaTrackingDescriptor:ar.c.AI_PLAYGROUND},testId:ak.T4,highlightBlue:!0,onTargetLost:n})}var _X=n(260906),_q=n(372189);let _Z=f.createElement(_z.Jm,{src:"https://static.figma.com/uploads/acb6a1c0e3ac6be7b238b37570ad0496ff594610",aspectRatio:_R,width:240});function _Q({primaryCta:e,onClose:t,isShowing:n,stepNum:a,totalNumSteps:l,onTargetLost:r}){let i=(0,_.wA)();return _j(i,ak.jx),_j(i,ak.pN),f.createElement(n9.rq,{isShowing:n,testId:ak.T2,targetKey:ak.Ij,trackingContextName:"UI3/AI Onboarding > Toolbar with AI",onClose:t,arrowPosition:dk.F_.BOTTOM,title:(0,eN.tx)("ui3_and_ai_tour.toolbar_with_ai.title"),description:f.createElement("span",{className:a8.cx.preWrap.$},(0,eN.tx)("ui3_and_ai_tour.toolbar_with_ai.description",{actions:f.createElement("strong",null,(0,eN.tx)("ui3_and_ai_tour.actions"))})),media:_Z,stepCounter:{stepNum:a,totalNumSteps:l},primaryCta:e,secondaryCta:{type:"link",label:(0,eN.tx)("ui3_and_ai_tour.toolbar_with_ai.playground_link"),href:"https://www.figma.com/community/file/1375505114072192161",ctaTrackingDescriptor:ar.c.AI_PLAYGROUND},highlightBlue:!0,onTargetLost:r})}let _$=f.createElement(_z.Jm,{src:"https://static.figma.com/uploads/1530d9f6ebfd38448a0c74c5b5077a5f2b9a271e",aspectRatio:_R,width:240});function _0({primaryCta:e,onClose:t,isShowing:n,stepNum:a,totalNumSteps:l,onTargetLost:r}){return _j((0,_.wA)(),ak.pN),f.createElement(n9.rq,{isShowing:n,testId:ak.hM,targetKey:ak.Ij,trackingContextName:"UI3/AI Onboarding > Toolbar without AI",onClose:t,arrowPosition:dk.F_.BOTTOM,title:(0,eN.tx)("ui3_and_ai_tour.toolbar_without_ai.title"),description:f.createElement("span",{className:a8.cx.preWrap.$},(0,eN.tx)("ui3_and_ai_tour.toolbar_without_ai.description",{actions:f.createElement("strong",null,(0,eN.tx)("ui3_and_ai_tour.actions"))})),media:_$,stepCounter:{stepNum:a,totalNumSteps:l},primaryCta:e,secondaryCta:{type:"link",label:(0,eN.tx)("general.learn_more"),href:"https://help.figma.com/hc/en-us/articles/360041064174-Access-design-tools-from-the-toolbar",ctaTrackingDescriptor:ar.c.LEARN_MORE},highlightBlue:!0,onTargetLost:r})}let _1=f.createElement(_z.Jm,{src:"https://static.figma.com/uploads/48302e800da0dcfe895346a2e008912fbe371b26",aspectRatio:_R,width:240});function _2({primaryCta:e,onClose:t,isShowing:n,stepNum:a,totalNumSteps:l,onTargetLost:r}){return _j((0,_.wA)(),ak.pN),f.createElement(n9.rq,{isShowing:n,targetKey:ak.hH,testId:ak.W_,trackingContextName:"UI3/AI Onboarding > Toolbar view only",onClose:t,arrowPosition:dk.F_.BOTTOM,title:(0,eN.tx)("ui3_and_ai_tour.toolbar_view_only.title"),description:(0,eN.tx)("ui3_and_ai_tour.toolbar_view_only.description"),media:_1,stepCounter:{stepNum:a,totalNumSteps:l},primaryCta:e,disableHighlight:!0,onTargetLost:r})}let _5=f.createElement(_z.Jm,{src:"https://static.figma.com/uploads/5aec067cec384a36a40e18c66ea26d3f87908092",aspectRatio:_R,width:240});function _4({primaryCta:e,onClose:t,isShowing:n,stepNum:a,totalNumSteps:l,onTargetLost:r}){return _j((0,_.wA)(),ak.pN),f.createElement(n9.rq,{isShowing:n,testId:ak.e0,targetKey:at.ON,trackingContextName:"UI3/AI Onboarding > Dev Mode",onClose:t,arrowPosition:dk.F_.BOTTOM,title:(0,eN.tx)("ui3_and_ai_tour.dev_mode_callout.title"),description:(0,eN.tx)("ui3_and_ai_tour.dev_mode_callout.description"),media:_5,stepCounter:{stepNum:a,totalNumSteps:l},primaryCta:e,highlightBlue:!0,onTargetLost:r})}function _3({primaryCta:e,onClose:t,isShowing:n,stepNum:a,totalNumSteps:l,onTargetLost:r}){return _j((0,_.wA)(),ak.pN),f.createElement(n9.rq,{isShowing:n,testId:ak.zW,targetKey:ak.ue,trackingContextName:"UI3/AI Onboarding > Resize or Minimize",onClose:t,arrowPosition:dk.F_.LEFT_TITLE,title:(0,eN.tx)("ui3_and_ai_callouts.resize_or_minimize.title"),description:f.createElement("span",null,(0,eN.tx)("ui3_and_ai_callouts.resize_or_minimize.description",{minimizeUI:f.createElement("span",{className:a8.cx.inlineFlex.itemsCenter.$},f.createElement("div",{className:"design_steps--minimizeUIIcon--EFBdo"},f.createElement(_X.O,null)),f.createElement("strong",{className:a8.cx.pl24.$},(0,eN.tx)("ui3_and_ai_callouts.resize_or_minimize.minimize_ui")))})),media:f.createElement(_z.Jm,{src:"https://static.figma.com/uploads/153732307961af828ec166c51c12e01ad44cbe2f",aspectRatio:_R,width:240}),stepCounter:{stepNum:a,totalNumSteps:l},primaryCta:e,secondaryCta:void 0,highlightBlue:!0,onTargetLost:r})}function _6({primaryCta:e,onClose:t,isShowing:n,stepNum:a,totalNumSteps:l,onTargetLost:r}){return _j((0,_.wA)(),ak.pN),f.createElement(n9.rq,{isShowing:n,testId:ak.U7,targetKey:ak.D9,trackingContextName:"UI3/AI Onboarding > Refreshed properties",onClose:t,arrowPosition:dk.F_.RIGHT_BODY,title:(0,eN.tx)("ui3_and_ai_callouts.refreshed_properties.title"),description:(0,eN.tx)("ui3_and_ai_callouts.refreshed_properties.description"),media:f.createElement(_z.Jm,{src:"https://static.figma.com/uploads/d0a1b9bbdccdd25601052b98f6d5ff0f72e91bff",aspectRatio:_R,width:240}),stepCounter:{stepNum:a,totalNumSteps:l},primaryCta:e,secondaryCta:{label:(0,eN.tx)("general.learn_more"),type:"button",ctaTrackingDescriptor:ar.c.LEARN_MORE,onClick:()=>(0,r_.FJ)("https://help.figma.com/hc/en-us/articles/360039832014-Design-prototype-and-explore-layer-properties-in-the-right-sidebar","_blank")},highlightBlue:!0,onTargetLost:r})}function _7({primaryCta:e,onClose:t,isShowing:n,stepNum:a,totalNumSteps:l,onTargetLost:r}){return _j((0,_.wA)(),ak.pN),f.createElement(n9.rq,{isShowing:n,testId:ak.EB,targetKey:ak.hH,trackingContextName:"UI3/AI Onboarding > Ask to edit",onClose:t,arrowPosition:dk.F_.BOTTOM,title:(0,eN.tx)("ui3_and_ai_callouts.ask_to_edit.title"),description:(0,eN.tx)("ui3_and_ai_callouts.ask_to_edit.description"),media:f.createElement(sU.y,{src:"https://static.figma.com/uploads/6629092993720542f2e7befaccf593e6e604551b",alt:"Ask to edit in toolbar",aspectRatio:_R}),stepCounter:{stepNum:a,totalNumSteps:l},primaryCta:e,highlightBlue:!0,onTargetLost:r})}function _8({primaryCta:e,onClose:t,isShowing:n,stepNum:a,totalNumSteps:l,onTargetLost:r}){return _j((0,_.wA)(),ak.pN),f.createElement(n9.rq,{isShowing:n,testId:ak.DX,targetKey:_q.Z8,trackingContextName:"UI3/AI Onboarding > Help resources",onClose:t,arrowPosition:dk.F_.RIGHT_BODY,title:(0,eN.tx)("ui3_and_ai_callouts.help.title"),description:f.createElement("span",{className:a8.cx.preWrap.$},(0,eN.tx)("ui3_and_ai_callouts.help.description")),media:f.createElement(sU.y,{src:"https://static.figma.com/uploads/bda3ec9e88a20e645af9aa542d2f13c8fe04c4db",alt:"image of the help widget with the menu expanded",aspectRatio:_R}),stepCounter:{stepNum:a,totalNumSteps:l},primaryCta:e,secondaryCta:void 0,highlightBlue:!0,onTargetLost:r})}function _9({primaryCta:e,onClose:t,isShowing:n,stepNum:a,totalNumSteps:l,onTargetLost:r}){let i=(0,_.wA)();return _j(i,ak.Ih),_j(i,ak.qM),f.createElement(n9.rq,{isShowing:n,testId:ak.xd,targetKey:ak.o5,trackingContextName:"UI3/AI Onboarding > Ready for Dev",onClose:t,arrowPosition:dk.F_.LEFT_TITLE,title:(0,eN.tx)("ui3_and_ai_tour.ready_for_dev.title"),description:(0,eN.tx)("ui3_and_ai_tour.ready_for_dev.description"),stepCounter:{stepNum:a,totalNumSteps:l},primaryCta:e,secondaryCta:{type:"link",label:(0,eN.tx)("general.learn_more"),href:"https://help.figma.com/hc/en-us/articles/23918228264855",ctaTrackingDescriptor:ar.c.LEARN_MORE},disableHighlight:!0,onTargetLost:r})}function ge({primaryCta:e,onClose:t,isShowing:n,stepNum:a,totalNumSteps:l,onTargetLost:r}){return _j((0,_.wA)(),ak.qM),f.createElement(n9.rq,{isShowing:n,testId:ak.j1,targetKey:ak.aE,trackingContextName:"UI3/AI Onboarding > Toolbar in Dev Mode",onClose:t,arrowPosition:dk.F_.BOTTOM,title:(0,eN.tx)("ui3_and_ai_tour.toolbar_dev_mode.title"),description:(0,eN.tx)("ui3_and_ai_tour.toolbar_dev_mode.description"),stepCounter:{stepNum:a,totalNumSteps:l},primaryCta:e,disableHighlight:!0,onTargetLost:r})}var gt=n(233387);function gn({onClose:e,isShowing:t,onTargetLost:n}){return _j((0,_.wA)(),ak.af),f.createElement(n9.rq,{title:(0,eN.tx)("ui3_and_ai_callouts.fragment_search.title"),description:(0,eN.tx)("ui3_and_ai_callouts.fragment_search.description"),primaryCta:{type:"button",label:(0,eN.tx)("ui3_and_ai_callouts.fragment_search.cta"),onClick:()=>{(0,gt.Bd)(),e()},ctaTrackingDescriptor:ar.c.TRY_IT_OUT},onClose:()=>e(),trackingContextName:"Fragment Search Callout",targetKey:ak.Ij,isShowing:t,arrowPosition:dk.F_.BOTTOM,highlightBlue:!0,testId:"fragmentSearchCallout",isTooltip:!0,onTargetLost:n})}var ga=n(168039);let gl="https://static.figma.com/uploads/7d9b7756fe36b9026b905b376304df5075524455",gr="https://static.figma.com/uploads/3204fbc71d9f4e689987acfb4166d88b7107273d";var gi=(e=>(e.UI3_ONLY="UI3_ONLY",e.AI_ONLY="AI_ONLY",e.UI3_AND_AI="UI3_AND_AI",e))(gi||{});function go(e,t){e(j.b({has_onboarded_ai:t}))}function gs(e,t){e(j.b({has_onboarded_ui3:t}))}function gc({label:e,href:t}){return f.createElement("a",{href:t,className:a8.cx.colorTextBrand.cursorPointer.$,target:"_blank"},e)}function gd({variant:e,onClose:t,onStartTour:n}){let a=(0,_.wA)(),l=(0,cC.sL)(),r=(0,f.useMemo)(()=>f.createElement(gc,{label:(0,eN.tx)("ui3_and_ai_welcome.learn_more_ai_link"),href:"https://help.figma.com/hc/en-us/articles/24039793359767"}),[]),i="dark"===(0,ga.DP)(),{title:o,imgSrc:s,body:c,betaDisclaimer:d,ctaLabel:u}=(0,f.useMemo)(()=>{switch(e){case"UI3_AND_AI":return{title:(0,eN.tx)("ui3_and_ai_welcome.ui3_and_ai.title"),imgSrc:i?gr:gl,body:(0,eN.tx)("ui3_and_ai_welcome.ui3_and_ai.body"),betaDisclaimer:(0,eN.tx)("ui3_and_ai_welcome.ui3_and_ai.beta_disclaimer",{learnMore:r}),ctaLabel:(0,eN.tx)("ui3_and_ai_welcome.ui3_and_ai.cta")};case"UI3_ONLY":return{title:(0,eN.tx)("ui3_and_ai_welcome.ui3_only.title"),imgSrc:i?"https://static.figma.com/uploads/0a7b90ceb5dd62bb538f1220ba12c0cf1f0be4f0":"https://static.figma.com/uploads/d9343cbdcd73dbbc6573e25e38b6b74682f31107",body:(0,eN.tx)("ui3_and_ai_welcome.ui3_only.body"),betaDisclaimer:null,ctaLabel:(0,eN.tx)("ui3_and_ai_welcome.ui3_only.cta")};case"AI_ONLY":return{title:(0,eN.tx)("ui3_and_ai_welcome.ai_only.title"),imgSrc:i?gr:gl,body:(0,eN.tx)("ui3_and_ai_welcome.ai_only.body"),betaDisclaimer:(0,eN.tx)("ui3_and_ai_welcome.ai_only.beta_disclaimer",{learnMore:r}),ctaLabel:(0,eN.tx)("ui3_and_ai_welcome.ai_only.cta")};default:(0,nm.xb)(e)}},[e,r,i]);function m(){switch(e){case"UI3_AND_AI":gs(a,!0),go(a,!0);break;case"UI3_ONLY":gs(a,!0);break;case"AI_ONLY":go(a,!0);break;default:(0,nm.xb)(e)}}let p=(0,f.useMemo)(()=>f.createElement(gc,{label:(0,eN.tx)("ui3_and_ai_welcome.ai_legal_consent.ai_subprocessors_link"),href:"https://www.figma.com/sub-processors/"}),[]),g=(0,f.useMemo)(()=>f.createElement(gc,{label:(0,eN.tx)("ui3_and_ai_welcome.ai_legal_consent.software_services_agreement_link"),href:"https://www.figma.com/ssa/"}),[]),h="UI3_AND_AI"===e||"AI_ONLY"===e,E=l.length>0,v=(0,f.useMemo)(()=>h&&E?(0,eN.tx)("ui3_and_ai_welcome.ai_legal_consent.subprocessors_and_ssa",{subprocessorsLink:p,softwareServicesAgreementLink:g}):h?(0,eN.tx)("ui3_and_ai_welcome.ai_legal_consent.subprocessors_only",{subprocessorsLink:p}):E?(0,eN.tx)("ui3_and_ai_welcome.ai_legal_consent.ssa_only",{softwareServicesAgreementLink:g}):void 0,[h,E,p,g]);return(0,np.h)(()=>{(0,Z.sx)(ak.LK,{variant:e})}),f.createElement("div",{"data-testid":ak.Hl,"data-variant":e},f.createElement(_z._l,{isShowing:!0,onClose:function(){switch(t(),m(),e){case"UI3_AND_AI":(0,Z.sx)(ak.p);break;case"UI3_ONLY":(0,Z.sx)(ak.e7);break;case"AI_ONLY":break;default:(0,nm.xb)(e)}},description:f.createElement("div",{className:a8.cx.flex.flexColumn.gap8.$},f.createElement("p",null,c),d&&f.createElement("p",null,d)),trackingContextName:"UI3 And AI Welcome Modal",title:f.createElement("div",{className:"welcome_modal--title--N2oxD"},f.createElement(a1.Kz,{multiple:4}),o,f.createElement(a1.Kz,{multiple:1})),primaryCta:{label:u,onClick:function(){n(),m()},ctaTrackingDescriptor:ar.c.UI3_AND_AI_WELCOME,type:"button"},disclaimerFooter:v,orientation:"portrait",media:f.createElement("img",{width:332,src:s,alt:"An illustration showcasing the new Figma"}),closeButtonColor:"light"}))}function gu({primaryCta:e,onClose:t}){return f.createElement(gd,{variant:"UI3_AND_AI",onClose:t,onStartTour:e.onClick})}function gm({primaryCta:e,onClose:t}){return f.createElement(gd,{variant:"UI3_ONLY",onClose:t,onStartTour:e.onClick})}function gp({primaryCta:e,onClose:t}){return f.createElement(gd,{variant:"AI_ONLY",onClose:t,onStartTour:e.onClick})}function gf({openFile:e}){var t;let n=(0,n6.GS)(),a=function({openFile:e}){let t=function(){let e=_W(),t=(0,eT.f)(_V),n=(0,eT.f)(_K),a=(0,eb.p8)("showUi"),l=(0,f.useMemo)(()=>t,[a]),r=(0,f.useMemo)(()=>n,[a]),i=(0,ag.ks)(),o=(0,Q.Em)();return!e.shouldShowUI3AndAIModal||l||r?e.shouldShowUI3OnlyModal&&!l?gm:e.shouldShowAIOnlyModal&&!r&&!i&&o?gp:null:gu}(),n=function({openFile:e}){let t=_W(),n=(0,eb.p8)("topLevelMode")===ei.lyf.LAYOUT,a=(0,U.U4)(),l=(0,ag.ks)(),r=(0,S.md)(ab.wg),i=(0,eb.aV)(),o=(0,ew.iZ)(),s=(0,_.d4)(t=>{var n,a;return i&&e?e.canEdit:null==(a=null==(n=t.mirror)?void 0:n.appModel)?void 0:a.isReadOnly}),c=!!o&&!!e&&!!s,d=(0,a$.kU)({file:e,viewOnly:c}),u=!r&&d&&(null==d?void 0:d.type)!==a$.Kw.VIEW_ONLY;return(0,f.useMemo)(()=>{let e=[];return n?t.shouldShowAIOnlyModal||t.shouldShowUI3AndAIModal?e.push(_Q):e.push(_0):e.push(_2),(!l||a)&&e.push(_4),e.push(_3),n&&e.push(_6),u&&e.push(_7),e.push(_8),e},[a,n,l,t.shouldShowAIOnlyModal,t.shouldShowUI3AndAIModal,u])}({openFile:e}),a=function(){let e=(0,tR.ZI)();return(0,f.useMemo)(()=>{let t=[];return e>0&&t.push(_9),t.push(ge),t.push(_8),t},[e])}(),l=(0,eT.f)(ak.pN),r=(0,eT.f)(ak.qM),i=(0,eT.f)(ak.$9),o=(0,eT.f)(ak.af),s=(0,eb.p8)("showUi"),c=(0,f.useMemo)(()=>l,[s]),d=(0,f.useMemo)(()=>r,[s]),u=(0,f.useMemo)(()=>i,[s]),m=(0,f.useMemo)(()=>o,[s]),p=(0,ag.ks)(),g=(0,Q.Em)(),h=(0,aq.vh)(),E=function(){let e=(0,n6.GS)(),t=(0,aq.LC)();return e&&(0,aI.C7)()&&t}(),v=(0,U._I)(),y=[];return t&&y.push(t),p&&v&&!d?y.push(...a):p||c||y.push(...n),(0===y.length||1===y.length&&y[0]===gp)&&!p&&g&&h&&!u&&y.push(_Y),0===y.length&&!p&&g&&E&&!m&&y.push(gn),y}({openFile:e}),l=(t=a[0])===gm||t===gp||t===gu,r=_W(),i=(0,ai.r1)(_V),o=(0,S.md)(i),s=(0,ai.r1)(_K),c=(0,S.md)(s),d=(0,ai.r1)("did_sign_up_as_ui3_user"),u=(0,S.md)(d),m=(0,ai.r1)(ak.pN),p=(0,S.md)(m),g=(0,ai.r1)(ak.qM),h=(0,S.md)(g),E=(0,ai.r1)(ak.$9),v=(0,S.md)(E),b=(0,Q.Em)(),C=(0,tR.l7)(),w=(0,tR.hA)(),T=!!(0,y.kc)().ui3_and_ai_welcome_modal,x=(0,eb.aV)(),{uniqueId:N,show:k,isShowing:I,complete:A}=(0,n7.e)({overlay:an.S$7,priority:_M},[o,c,p,h,v,u]),{currentStep:O,next:L}=(0,sJ.A)({numSteps:0===a.length?1:a.length,onComplete:()=>A});(0,sD.E)(N,[l5("dev"),l5("design")],()=>{P()});let P=(0,f.useCallback)(()=>{T&&b&&n&&(x||k({canShow:(e,t,n,a,l,r)=>(!e||!t||!n||!a||!l)&&!r}))},[T,b,n,x,k]);(0,f.useEffect)(()=>{x||P()},[x,P]),(0,sD.E)(N,"CTA Clicked",e=>{var t;a[O]===_8&&(null==(t=e.properties)?void 0:t.text)==="HelpWidget"&&A()});let D=(0,f.useCallback)(()=>{A(),r.shouldShowUI3AndAIModal?(0,Z.sx)(ak.p):r.shouldShowUI3OnlyModal&&(0,Z.sx)(ak.e7)},[A,r]),R=f.useMemo(()=>{let e={type:"button",label:(0,eN.tx)("general.next"),onClick:L,ctaTrackingDescriptor:ar.c.NEXT},t={type:"button",label:(0,eN.tx)("general.done"),onClick:A,ctaTrackingDescriptor:ar.c.DONE};return a.map((n,r)=>f.createElement(n,{primaryCta:r===a.length-1?t:e,onClose:r===a.length-1?A:D,stepNum:l?r:r+1,totalNumSteps:l?a.length-1:a.length,isShowing:I,onTargetLost:r===a.length-1?A:L}))},[L,A,a,D,l,I]);return((0,f.useEffect)(()=>{(!R||0===a.length||!n||C||w)&&A()},[R,a.length,n,C,w,A]),I)?f.createElement(sq.U,{currentStep:O,isShowing:I,children:R}):null}var g_=n(424863),gg=n(984032),gh=n(593788),gE=(e=>(e.AwaitIsShowing="AwaitIsShowing",e.AwaitPastedElementsSelected="AwaitPastedElementsSelected",e.AwaitOtherElementsSelected="AwaitOtherElementsSelected",e.Completed="Completed",e))(gE||{}),gv=(e=>(e.OnShow="OnShowUpsellLibariesConsecutivePaste",e[e.SelectionChanged=fd.R]="SelectionChanged",e))(gv||{});let gy=(0,fc.Op)({initial:"AwaitIsShowing",states:[{id:"AwaitIsShowing",transitions:[(0,fc.nr)("OnShowUpsellLibariesConsecutivePaste","AwaitPastedElementsSelected")]},{id:"AwaitPastedElementsSelected",transitions:[(0,fc.nr)(gv.SelectionChanged,"AwaitOtherElementsSelected",{condition:({event:e})=>!!e.properties.didSelectedNodeIdsChange})]},{id:"AwaitOtherElementsSelected",transitions:[(0,fc.nr)(gv.SelectionChanged,"Completed",{condition:({event:e})=>!!e.properties.didSelectedNodeIdsChange})]},{id:"Completed",terminal:!0}]}),gb=(0,gh.rn)("paste_deselected_machine",gy),gC=(0,ai.r1)("explicitly_dismissed_create_component_pointer"),gw=(0,sR.tH)("first_component_created_date");function gT(){let e=(0,_.wA)(),t=(0,S.md)(sR.t),n=(0,S.md)(ab.NZ),a=(0,S.md)(ab.pQ),l=(0,dt.jO)(),r=(0,S.md)(gw),i=(0,S.md)(gC),o=(0,fr.zl)(gb),s=(0,n7.e)({overlay:an.g4U,priority:n8.N.SECONDARY_MODAL},[t,a,i]);return(0,sD.E)(s.uniqueId,g_.zb,()=>{null===r&&s.show({canShow:(e,t,a)=>e&&(t||n)&&l&&!a,onShow:()=>{(0,n2.YQ)({id:gv.OnShow})}})}),(0,sD.E)(s.uniqueId,"action_create_symbol",()=>{s.isShowing&&(e(j.b({explicitly_dismissed_create_component_pointer:!0})),s.complete())}),(0,fr.ST)(o,({to:e})=>{e===gE.Completed&&(s.complete(),o.reset())}),f.createElement(gx,{isShowing:s.isShowing,onAbort:s.complete},f.createElement(sZ.h,{isShowing:s.isShowing,modalType:s0.q3.SELF_CONTAINED,trackingContextName:"Consecutive Paste Create Component Pointer",element:gg.gL,onClickPrimaryCta:s.complete,onClose:s.complete,onManualDismiss:s.complete,testId:"upsell_libraries_consecutive_paste_overlay"}))}function gx(e){var t;let[n,a]=f.useState(!1),l=null==(t=(0,y.Ay)().user_data)?void 0:t.id,{isShowing:r,onAbort:i}=e;return f.useEffect(()=>{!n&&r&&((0,dD.Hz)(l)?a(!0):i())},[a,n,r,i,l]),n?e.children:null}var gN=n(70964),gS=n(972045);let gk="seen_chrome_version_warning",gI=["Chrome/77.0.3865.75","Chrome/77.0.3865.90","Chrome/77.0.3865.105"];function gA(e){let t=navigator&&navigator.userAgent&&navigator.userAgent.match(/CrOS/),n=(0,eN.tx)("rcs.chrome_version.please_update_your_browser_to_avoid_losing_work"),a=f.createElement("p",null,(0,eN.tx)("rcs.chrome_version.the_version_of_chrome_you_are_using_has_a_networking_issue_which_may_prevent_you_from_saving_your_work_please_upgrade_your_browser_to_version_77_0_3865_120_or_greater_to_avoid_any_issues",{upgradeYourBrowser:f.createElement(a1.Us,{target:"_blank",href:"https://help.figma.com/hc/articles/360040035734",trusted:!0},(0,eN.tx)("rcs.chrome_version.upgrade_your_browser"))}));return t&&(n=(0,eN.tx)("rcs.chrome_version.please_update_chrome_os_to_avoid_losing_work"),a=f.createElement("p",null,(0,eN.tx)("rcs.chrome_version.the_version_of_chrome_os_you_are_using_has_a_networking_issue_which_may_prevent_you_from_saving_your_work_a_patch_has_been_released_with_version_77_0_3865_120_starting_november_4_2019_make_sure_to_allow_chrome_os_to_update_automatically",{updateAutomatically:f.createElement(a1.Us,{target:"_blank",href:"https://support.google.com/chromebook/answer/177889",trusted:!0},(0,eN.tx)("rcs.chrome_version.update_automatically"))}))),f.createElement(gN.mS,null,f.createElement("h1",null,n),f.createElement("br",null),a,f.createElement("br",null),f.createElement(function(){return f.createElement("p",null,(0,eN.tx)("rcs.chrome_version.if_you_have_any_questions_please_email_us_at",{figmaSupportEmail:f.createElement(a1.Us,{href:`mailto:${(0,y.W4)()}`,trusted:!0},(0,y.W4)())}))},null),f.createElement(tN.Jn,{className:gS.b,onMouseDown:e=>e.stopPropagation(),onClick:e.dismissModal,innerText:"close"}))}let gO=(0,ai.r1)(gk);function gL(){let e=(0,af.q5)(),t=null==e?void 0:e.canEdit,n=(0,S.md)(gO),a=(0,n7.e)({overlay:an.ZTu,priority:n8.N.URGENT_ALERT},[n]);return(0,np.h)(()=>{let e=(0,r_.n5)()||"";t&&gI.includes(e)&&a.show({canShow:e=>!e})}),f.createElement(sZ.h,{modalType:s0.q3.DRAGGABLE,trackingContextName:"Chrome Version Warning Redalert 10-16-19",disableFooter:!0,userFlagOnShow:gk,element:gA,onClickPrimaryCta:a.complete,onClose:a.complete,onManualDismiss:a.complete,isShowing:a.isShowing,currentStepIndex:0,totalNumSteps:1})}var gP=n(944682),gD=n(867795),gR=n(178911);let gM="seen_workflow_interop_diagram_onboarding",gF=(0,ai.r1)(gM),gB="FigJam Diagram Onboarding (Workflow Interop Experiment)",gU={connectors:`${gB} - Connectors`,shapes:`${gB} - Shapes`,templates:`${gB} - Templates`};function gH(){!function(){let e=(0,eb.p8)("pagesList");(0,f.useMemo)(()=>{let t=(0,cM.QL)("preservePageIndex");if(t&&e.length>0){(0,cM.EM)("preservePageIndex");let n=parseInt(t);if(isNaN(n)||n<0||n>=e.length)return;e.forEach((e,t)=>{t!==n&&et.Y5.triggerAction("page-delete",{args:{nodeId:e.nodeId,skipVisualBell:!0}})})}},[e])}(),function(){let{insertTemplate:e}=(0,uI.Fz)(),t=(0,_.wA)();(0,np.h)(()=>{let n=(0,cM.QL)("templateId");null!=n&&((0,cM.EM)("templateId"),t(G.ts({hubFileId:n,callback:t=>{e({template:{template:t,type:uO.n.HubFile},userTriggered:!1,templateInsertionDirection:ei.hKj.ABOVE,triggeredFrom:"workflow-interop"})}})))})}();let e=(0,S.md)(gF),t=(0,n7.e)({overlay:an.uPw,priority:n8.N.OVERRIDING_MODAL},[e]),n=function(e){let t=(0,_.wA)();return f.useMemo(()=>[{title:(0,eN.tx)("rcs.figjam_diagram_onboarding.connectors_title"),trackingContextName:gU.connectors,arrowPosition:dk.F_.BOTTOM,media:f.createElement(sU.y,{src:"https://static.figma.com/uploads/2655e9f0e4247dff3d5a46cf59f788473bffe0c6",aspectRatio:900/508,alt:(0,eN.t)("rcs.figjam_diagram_onboarding.connectors_title")}),description:(0,eN.tx)("rcs.figjam_diagram_onboarding.connectors"),targetKey:pw.BC,onClose:nf.lQ},{title:(0,eN.tx)("rcs.figjam_diagram_onboarding.shapes_title"),trackingContextName:gU.shapes,arrowPosition:dk.F_.BOTTOM,media:f.createElement(sU.y,{aspectRatio:900/507,src:"https://static.figma.com/uploads/0c9201d8164c2390cdcf3fb8d316b6bacdddb438",alt:(0,eN.t)("rcs.figjam_diagram_onboarding.shapes_title")}),description:(0,eN.tx)("rcs.figjam_diagram_onboarding.shapes"),targetKey:pw.BC,onClose:nf.lQ},{title:(0,eN.tx)("rcs.figjam_diagram_onboarding.templates_title"),trackingContextName:gU.templates,arrowPosition:dk.F_.BOTTOM,media:f.createElement(sU.y,{aspectRatio:900/505,src:"https://static.figma.com/uploads/b8b42ba263794abd20364c3da0f3f4993fd4ed86",alt:(0,eN.t)("rcs.figjam_diagram_onboarding.templates_title")}),description:(0,eN.tx)("rcs.figjam_diagram_onboarding.templates"),targetKey:gR.yl,secondaryCta:{type:"button",label:(0,eN.tx)("rcs.figjam_diagram_onboarding.see_templates"),onClick:()=>{t(r7.En({initialX:0,initialY:0,initialTab:gD.p.TEMPLATES})),e.complete()}},onClose:nf.lQ}],[t,e])}(t);return(0,np.h)(()=>{(0,cM.QL)(gP.tX.key)===gP.tX.value&&t.show({canShow:e=>!e})}),f.createElement(c5.WZ,{testId:"workflow-interop-machine-overlay",userFlagOnShow:gM,isShowing:t.isShowing,onComplete:t.complete,steps:n})}let gG="seen_figjam_workshop_onboarding",gV=(0,ai.r1)(gG);function gK(e){let t=(0,S.md)(ab.J1),n=(0,S.md)(gV),a=(0,S.md)(ab.zo),l=(0,S.md)(ab.PD),r=(0,n7.e)({overlay:an.Fq3,priority:n8.N.SECONDARY_MODAL},[t,n,a,l]);return(0,np.h)(()=>{r.show({canShow:(e,t,n,a)=>e&&!t&&n&&!a})}),f.createElement(sZ.h,{onboardingKey:at.v4,modalType:s0.q3.DRAGGABLE,trackingContextName:"Fig Jam Workshop Onboarding",title:()=>(0,eN.t)("rcs.figjam_workshop.invite_the_world_to_your_workshop"),disableFooter:!0,width:301,element:gW,isShowing:r.isShowing,onClickPrimaryCta:r.complete,onClose:r.complete,onManualDismiss:r.complete,currentStepIndex:0,totalNumSteps:1,userFlagOnShow:gG})}function gW(e){return f.createElement(f.Fragment,null,f.createElement(gN.Gv,{width:301,src:"https://static.figma.com/uploads/a97e76df2b43ae8b408127c1c63ea0b8485ba8ac"}),f.createElement(gN.ak,null,(0,eN.tx)("rcs.figjam_workshop.open_sessions_let_you_jam_with_anyone_even_people_who_don_t_have_a_figma_account")))}var gz=n(666258),gj=n(396021),gJ=n(173101),gY=n(600907),gX=n(469572),gq=n(572174),gZ=n(464382),gQ=n(256320);function g$(){let e=(0,_.wA)(),t=(0,gZ.C)();return f.useEffect(()=>{if(t)return;let n=(0,tr.Es)(),a=document.querySelector(`[data-tooltip=${n}]`);return a&&e(nI.j7({type:tl.pi,data:{targetRect:a.getBoundingClientRect()}})),()=>{e(nI.oB())}},[t,e]),f.createElement(f.Fragment,null,f.createElement(gN.Gv,{width:350,src:"https://static.figma.com/uploads/30b3da35c8e26b773e6fc4b88528ff8077543ad8"}),f.createElement(gN.ak,null,(0,eN.tx)("rcs.back_to_file_browser.the_file_browser_allows_you_to"),f.createElement("br",null),f.createElement("br",null),(0,eN.tx)("rcs.back_to_file_browser.you_can_head_there_by_clicking_on_option_in_the_main_menu",{optionName:f.createElement("span",{className:gS.Cr},(0,eN.tx)("rcs.back_to_file_browser.back_to_files"))})))}function g0(e){return f.createElement(sZ.h,{testId:"BackToFileBrowserOverlay",modalType:s0.q3.DRAGGABLE,trackingContextName:"Back to File Browser Modal",element:g$,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:gS.Yl,footerClassName:gQ.ay,title:(0,eN.tx)("rcs.back_to_file_browser.file_browser"),onboardingKey:"back-to-files",pointDirection:s0._L.LEFT_TITLE,currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,userFlagOnShow:"back_to_file_browser_onboarded",UNSAFE_disableFocus:!0})}function g1(){return f.createElement("div",null,f.createElement(gN.Gv,{src:"https://static.figma.com/app/onboarding/page-3.gif"}),f.createElement(gN.ak,null,(0,eN.tx)("rcs.comments.leave_notes_right_in_your_design_files"),f.createElement("br",null),f.createElement("br",null),(0,eN.tx)("rcs.comments.get_feedback_requests_and_copy_updates_where_you_ll_use_them_not_in_your_inbox")))}function g2(e){return f.createElement(Y.fu,{name:"Community Hub Duplicate Onboarding Modal"},f.createElement(si.M,{userFlagOnShow:"editor_community_duplicate_onboarded",isShowing:e.isShowing},f.createElement(cK.Nb,{className:gS.W8,hide:e.onManualDismiss,size:s0.pN,disableClickOutsideToHide:!0},f.createElement("div",{className:gS.SI},f.createElement("h1",null,(0,eN.tx)("rcs.community_hub_file_duplicate.welcome_to_figma")),f.createElement(a1.Kz,{multiple:4}),f.createElement("p",null,(0,eN.tx)("rcs.community_hub_file_duplicate.you_just_duplicated_this_file_from_the_community_to_get_started_let_us_show_you_some_of_the_things_that_make_figma_special_and_different_from_other_design_tools")),f.createElement(a1.Kz,{multiple:4}),f.createElement(cU.Go,{fullWidth:!1,onClick:e.onClickPrimaryCta},(0,eN.tx)("rcs.community_hub_file_duplicate.show_me_around")),f.createElement(a1.Kz,{multiple:3}),f.createElement(a1.Ph,{className:gS.X8,onClick:e.onManualDismiss,trusted:!0},(0,eN.tx)("rcs.community_hub_file_duplicate.no_thanks"))))))}function g5(){return f.createElement("div",null,f.createElement(gN.Gv,{src:"https://static.figma.com/app/onboarding/export.png",width:350}),f.createElement(gN.ak,null,(0,eN.tx)("rcs.export.export_your_designs_for_use_in_production_or_to_share_with_your_team"),f.createElement("br",null),f.createElement("br",null),(0,eN.tx)("rcs.export.figma_can_export_to_png_jpeg_svg_and_pdf")))}function g4(){return f.createElement("div",null,f.createElement(gN.Gv,{src:"https://static.figma.com/app/onboarding/livepreview.gif"}),f.createElement(gN.ak,null,(0,eN.tx)("rcs.live_device_preview.to_view_your_frames_live_on_your_device_just_download_figma_mirror",{linkToIOS:f.createElement(gN.lp,{href:"https://itunes.apple.com/app/figma-mirror/id1152747299"},(0,eN.tx)("rcs.live_device_preview.i_os")),linkToAndroid:f.createElement(gN.lp,{href:"https://play.google.com/store/apps/details?id=com.figma.mirror&hl=en"},(0,eN.tx)("rcs.live_device_preview.android"))}),f.createElement("br",null),f.createElement("br",null),(0,eN.tx)("rcs.live_device_preview.they_ll_update_instantly_no_matter_what_network_you_re_on_and_with_no_need_to_connect_via_usb")))}function g3(){return f.createElement("div",null,f.createElement(gN.Gv,{src:"https://static.figma.com/app/onboarding/multiplayer.gif"}),f.createElement(gN.ak,null,(0,eN.tx)("rcs.multiplayer.collaborate_in_real_time_with_your_team_and_never_worry_about_your_files"),f.createElement("br",null),f.createElement("br",null),(0,eN.tx)("rcs.multiplayer.no_syncing_no_waiting_no_merge_conflicts")))}function g6(){return f.createElement("div",null,f.createElement(gN.Gv,{src:"https://static.figma.com/app/onboarding/sharing.gif"}),f.createElement(gN.ak,null,(0,eN.tx)("rcs.sharing.share_your_projects_with_teammates_clients_and_stakeholders"),f.createElement("br",null),f.createElement("br",null),(0,eN.tx)("rcs.sharing.control_their_access_with_granular_permissions_and_manage_their_access_in_one_simple_place")))}function g7(){let e=(0,_.wA)(),t=(0,_.Pj)();return f.useEffect(()=>{let n=t.getState().leftPanel.activeTab;return e(K.FP({tab:ei.xae.ASSETS})),()=>{e(K.FP({tab:n}))}},[e,t]),f.createElement("div",null,f.createElement(gN.Gv,{src:"https://static.figma.com/app/onboarding/library.gif"}),f.createElement(gN.ak,null,(0,eN.tx)("rcs.team_library.share_components_and_styles_across_your_team_by_publishing_them"),f.createElement("br",null),f.createElement("br",null),(0,eN.tx)("rcs.team_library.enable_quick_access_to_other_libraries_in_this_file")))}function g8(){return f.createElement("div",null,f.createElement(gN.Gv,{src:"https://static.figma.com/uploads/238ff8ea8ab49de9355932f62342f3f859ad8f4a"}),f.createElement(gN.ak,null,(0,eN.tx)("rcs.universal_inserts.insert_components_from_your_libraries")))}let g9=["editor_community_duplicate_onboarded","editor_onboarded","shared_component_library_onboarded","shared_component_publish_onboarded","library_modal_onboarded","styles_onboarded","pdf_onboarded","coco_onboarded","line_height_update_onboarded","gifs_onboarded","opentype_onboarded","seen_community_hub_landing_editor_onboarding","variants_onboarded","multiple_starting_points_onboarded"],he=[function(e){return f.createElement(sH.X,{emphasized:!0,testId:"LaunchNuxModalViewOverlay",trackingContextName:"LaunchNux",isShowing:e.isShowing,position:sG.Q.BOTTOM_RIGHT,title:(0,eN.tx)("rcs.launch_nux_modal.take_a_quick_tour_of_figma"),description:(0,eN.tx)("rcs.launch_nux_modal.walk_through_figma_s_unique_editor_and_collaboration_features"),primaryCta:{type:"button",label:(0,eN.tx)("rcs.launch_nux_modal.show_me_around"),onClick:e.onClickPrimaryCta,ctaTrackingDescriptor:ar.c.SHOW_ME_AROUND},secondaryCta:{type:"button",label:(0,eN.tx)("rcs.launch_nux_modal.no_thanks"),onClick:e.onManualDismiss,ctaTrackingDescriptor:ar.c.NO_THANKS},onClose:e.onManualDismiss})},function(e){return f.createElement(n9.rq,{testId:"ConstraintsOverlay",trackingContextName:"Constraints Onboarding Modal",title:(0,eN.tx)("rcs.constraints.constraints"),media:f.createElement(sU.y,{src:"https://static.figma.com/app/onboarding/page-2.gif",alt:"An animation showing how constraints works in Figma.",aspectRatio:1280/720}),description:f.createElement(f.Fragment,null,(0,eN.tx)("rcs.constraints.setting_precise_constraints_lets_you_build_fluid_layouts_to_support_multiple_device_sizes_and_breakpoints_within_the_same_group"),f.createElement("br",null),f.createElement("br",null),(0,eN.tx)("rcs.constraints.all_of_your_layers_adjust_the_way_you_expect_no_magic_you_get_full_control")),isShowing:e.isShowing,primaryCta:{type:"button",label:(0,eN.tx)("rcs.rcs_shared.next"),onClick:e.onClickPrimaryCta,ctaTrackingDescriptor:ar.c.NEXT},onClose:e.onManualDismiss,targetKey:"frame",secondaryCta:{type:"link",label:(0,eN.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360039957734",ctaTrackingDescriptor:ar.c.LEARN_MORE},stepCounter:{stepNum:e.currentStepIndex+1,totalNumSteps:e.totalNumSteps}})},function(e){return f.createElement(n9.rq,{testId:"VectorNetworksOverlay",trackingContextName:"Vector Networks Onboarding Modal",title:(0,eN.tx)("rcs.vector_networks.vector_networks"),media:f.createElement(sU.y,{src:"https://static.figma.com/app/onboarding/page-1.gif",alt:"An animation showing how to use the pen tool",aspectRatio:1280/720}),description:f.createElement(f.Fragment,null,(0,eN.tx)("rcs.vector_networks.pen_tools_have_always_been_scary_to_use"),f.createElement("br",null),f.createElement("br",null),(0,eN.tx)("rcs.vector_networks.now_they_re_both_simpler_and_more_powerful_paths_finally_work_the_way_they_should")),isShowing:e.isShowing,primaryCta:{type:"button",label:(0,eN.tx)("rcs.rcs_shared.next"),onClick:e.onClickPrimaryCta,ctaTrackingDescriptor:ar.c.NEXT},onClose:e.onManualDismiss,targetKey:"pen",secondaryCta:{type:"link",label:(0,eN.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360040450213",ctaTrackingDescriptor:ar.c.LEARN_MORE},stepCounter:{stepNum:e.currentStepIndex+1,totalNumSteps:e.totalNumSteps}})},function(e){return f.createElement(sZ.h,{testId:"UniversalInsertsOverlay",modalType:s0.q3.DRAGGABLE,trackingContextName:"Universal Inserts Onboarding Modal",element:g8,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:gS.Yl,footerClassName:gQ.ay,title:(0,eN.tx)("rcs.universal_inserts.find_components_plugins_and_widgets"),onboardingKey:"insert",additionalButton:{onClickBehavior:"link",label:(0,eN.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360038510693-Guide-to-Figma-Community"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return f.createElement(sZ.h,{testId:"CommentsOverlayOverlay",modalType:s0.q3.DRAGGABLE,trackingContextName:"Comments Onboarding Modal",element:g1,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:gS.Yl,footerClassName:gQ.ay,title:(0,eN.tx)("rcs.comments.comments"),onboardingKey:"comment",additionalButton:{onClickBehavior:"link",label:(0,eN.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360039825314"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return f.createElement(sZ.h,{testId:"SharingOverlay",modalType:s0.q3.DRAGGABLE,trackingContextName:"Sharing Onboarding Modal",element:g6,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:gS.Yl,footerClassName:gQ.ay,title:(0,eN.tx)("rcs.sharing.sharing_and_permissions"),onboardingKey:at.v4,additionalButton:{onClickBehavior:"link",label:(0,eN.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360039485514"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return f.createElement(sZ.h,{testId:"MultiplayerOverlay",modalType:s0.q3.DRAGGABLE,trackingContextName:"Multiplayer Onboarding Modal",element:g3,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:gS.Yl,footerClassName:gQ.ay,title:(0,eN.tx)("rcs.multiplayer.multiplayer"),onboardingKey:at.v4,additionalButton:{onClickBehavior:"link",label:(0,eN.tx)("rcs.rcs_shared.learn_more"),href:"https://blog.figma.com/multiplayer-editing-in-figma-8f8076c6c3a6"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return f.createElement(sZ.h,{testId:"TeamLibraryOverlay",modalType:s0.q3.DRAGGABLE,trackingContextName:"Team Library Onboarding Modal",element:g7,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:gS.Yl,footerClassName:gQ.ay,title:(0,eN.tx)("rcs.team_library.team_library"),onboardingKey:"library",additionalButton:{onClickBehavior:"link",label:(0,eN.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360041051154"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,userFlagOnShow:"library_modal_onboarded",UNSAFE_disableFocus:!0})},function(e){return f.createElement(sZ.h,{testId:"ExportOverlay",modalType:s0.q3.DRAGGABLE,trackingContextName:"Export Onboarding Modal",element:g5,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:gS.Yl,footerClassName:gQ.ay,title:(0,eN.tx)("rcs.export.export"),additionalButton:{onClickBehavior:"link",label:(0,eN.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360040028114"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return f.createElement(sZ.h,{testId:"LiveDevicePreviewOverlay",modalType:s0.q3.DRAGGABLE,trackingContextName:"Live Device Preview Onboarding Modal",element:g4,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:gS.Yl,footerClassName:gQ.ay,title:(0,eN.tx)("rcs.live_device_preview.live_device_preview"),currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})}];function ht(){return em.eD||(0,E.ce)()?he:[...he,g0]}function hn(){let e=(0,_.wA)(),t=(0,S.md)(ai.qG),n=(0,S.md)(sR.d2),a=(0,S.md)(sR.g5),l=(0,S.md)(sR.NT),r=(0,af.q5)(),i=(0,gq.Vq)(r)&&(0,$.pi)({editorType:r.editorType})===a_._Y.DESIGN,o=(0,gq.Vq)(r)&&r.canEdit,s=(0,n7.e)({overlay:an.LiP,priority:n8.N.OVERRIDING_MODAL},[t,a,n,l]),[c,d]=f.useState([]),u=f.useCallback(e=>{s.show({canShow:(t,n,a,l)=>{let r=(function({userFlags:e,emailValidatedAt:t,userSpace:n,isReset:a,jobTitle:l}){let r=(0,dt._q)(e),i=(0,mk.mW)(e,"editor_community_duplicate_onboarded"),o=(0,mI.d2)({emailValidatedAt:t,jobTitle:l}),s=(0,mk.mW)(e,"claimed_invite_with_pending_user_mention"),c=(0,mk.mW)(e,"has_closed_comment"),d=!!tg.Ay.location.hash,u=n===eQ.qo.ORG,m=(0,dD.XX)(e),p=(0,cM.QL)(uA.pt.KEY)===uA.pt.VALUE;return r&&!a||s&&!c&&d?[]:p||m?i||o?[]:u?m?[]:[g2,...ht()]:m||r&&!a?[]:[g2,...ht()]:ht()})({userFlags:t,emailValidatedAt:n,userSpace:a,isReset:e,jobTitle:l}).filter(e=>!!e);return r.length>0&&(d(r),!0)}})},[s]);f.useEffect(()=>{o&&i&&u(!1)},[u,o,i]),(0,sD.E)(s.uniqueId,"Reset Onboarding",()=>u(!0));let m=f.useCallback(()=>{let t={};for(let e of g9)t[e]=!0;e(j.b(t)),s.complete()},[e,s]);return s.isShowing&&0!==c.length?f.createElement(ha,{steps:c,onComplete:m}):null}function ha(e){let{steps:t,onComplete:n}=e,a=(0,sJ.A)({numSteps:t.length,onComplete:n});return f.createElement(sq.U,{currentStep:a.currentStep,isShowing:!0,children:t.map((e,l)=>f.createElement(e,{onClickPrimaryCta:a.next,onClose:nf.lQ,onManualDismiss:n,isShowing:!0,currentStepIndex:l,totalNumSteps:t.length}))})}var hl=n(168289),hr=n(319008),hi=n(457261),ho=n(988424),hs=n(788256),hc=n(965626);let hd=[hl.wn.CREATE_FRAME,hl.wn.FORMAT_FRAME,hl.wn.CREATE_TEXT,hl.wn.FORMAT_TEXT];var hu=n(568214),hm=n(672715),hp=n(83909),hf=n(279702);let h_=(0,aR.Lg)()?0:300;class hg{constructor(e,t,n,a,l,r,i,o,s,c,d,u,m,p,f,_,g,h,E,v,y){this.setCursorBotX=e,this.setCursorBotY=t,this.setCursorBotChat=n,this.setCursorBotAnimationDuration=a,this.setCursorBotTutorialPhase=l,this.setCursorType=r,this.setCursorDirection=i,this.setToolbarActionWithSimulatedHover=o,this.setCursorBotAnimationLayerPosition=s,this.setCursorBotOverlayType=c,this.setCursorBotTutorialDuration=d,this.hasWaved=u,this.cursorBotX=m,this.cursorBotY=p,this.getViewportInfo=f,this.navigate=_,this.sceneGraph=g,this.infoForSentry=h,this.dispatch=E,this.insertTemplate=v,this.appModel=y,this.waitForDuration=(e,t)=>new Promise(n=>{this.setTimeoutWrapper({callback:n,delay:(0,aR.Lg)()&&!t?0:e,isBlockingTutorialExecution:!0})}),this.unblockUserEventsTimeout=null,this.blockUserEvents=()=>{ei.Ez5.editorState().shouldBlockUserEvents.set(!0),hp.wt.setIsCursorBotEditing(!0),(0,aR.Lg)()||(this.unblockUserEventsTimeout=setTimeout(()=>{this.unblockUserEvents()},6e4))},this.unblockUserEvents=()=>{this.setCursorBotTutorialPhase(hl.h0.AWAITING_PLAYBACK),ei.Ez5.editorState().shouldBlockUserEvents.set(!1),this.unblockUserEventsTimeout&&clearTimeout(this.unblockUserEventsTimeout),this.unblockUserEventsTimeout=null,hp.wt.setIsCursorBotEditing(!1)},this.animateChat=(e,t)=>{if(e>t.length||this.shouldStop)return;let n=t.slice(0,e);this.setCursorBotChat(n),this.setTimeoutWrapper({callback:()=>{this.animateChat(e+1,t)},delay:(0,aR.Lg)()?0:35,isBlockingTutorialExecution:!1})},this.startingStateHubFiles={},this.shouldStop=!1,this.timeoutIds=[],this.pendingCallbacksToRun=[]}runTutorial(e,t){let n=async()=>{for(let t of(await this.setupStateAndCanvas(e),e.steps)){if(this.shouldStop)return;try{await this.transition(t,e.name)}catch(n){this.logErrorAndStopTutorial("Could not execute step",{step:t,err:n,tutorialName:e.name});return}}this.resetStateAndMarkTutorialComplete(e.tutorialPlayedUserFlag,t)};(0,hm.Lk)(gj.tF);let a=window.performance.now();return this.currentTutorialRunningPromise=n(),this.currentTutorialRunningPromise.finally(()=>{(0,hm.Dz)(gj.tF);let t=window.performance.now()-a;(0,o2.Lo)(gj.tF,"Tutorial completed or stopped",{elapsedDuration:t,tutorialName:e.name})}),this.currentTutorialRunningPromise}insertStartingStateFromHubFile({hubFileId:e,nodeWidth:t,nodeHeight:n,tutorialName:a}){if(!e)throw Error("Hub file ID is not provided");let l=async e=>{let l=ei.qmM.findBoundsToCenterNewTopLevelNode(t+88,n),r=l.origin.x+88,i=l.origin.y;await this.centerViewportAroundCanvasRect({x:r,y:i,width:t,height:n}),await this.waitForDuration(this.moveCursorBot({x:r+t/2,y:i+n/2,coordinateType:"canvas",animationDuration:600})),await this.transition({type:hl.HQ.SET_CHAT,message:"Here\u2019s another example..."},a),await this.insertTemplate({template:{type:uO.n.HubFile,template:e},userTriggered:!1,editScopeType:ei.zkO.ONBOARDING,triggeredFrom:"cursor-bot",templateInsertionDirection:ei.hKj.CUSTOM_POSITION,templateCustomPosition:{x:r,y:i},selectTemplateAfterInsertion:!0}),await this.waitForDuration(500)};return this.startingStateHubFiles[e]?l(this.startingStateHubFiles[e]):new Promise((t,n)=>{this.dispatch(G.ts({hubFileId:e,callback:async e=>{try{this.startingStateHubFiles[e.id]=e,await l(e),t()}catch(e){n(e)}}}))})}logSentryError(e,t){(0,o2.x1)(gj.tF,e,t,{reportAsSentryError:!0})}logErrorAndStopTutorial(e,t){this.logSentryError(e,t),this.dispatch(cG.s.error("Could not run tutorial. Please try again later.")),this.stopCurrentTutorial({tutorialName:t.tutorialName,stopTrigger:hl.mf.STATE_MANAGER_ERROR,errorMessage:e,nodeName:t.name})}async stopCurrentTutorial(e){this.shouldStop=!0,this.timeoutIds.forEach(e=>clearTimeout(e)),this.pendingCallbacksToRun.forEach(e=>e()),await this.currentTutorialRunningPromise,this.resetCursorBotStateToDefaults(),this.unblockUserEvents(),e&&(0,Z.sx)("Cursor Bot Tutorial Stopped",{...e})}updatePositionState(e,t){this.cursorBotX=e,this.cursorBotY=t}updateSceneGraphReference(e){this.sceneGraph=e}updateInfoForSentry(e){this.infoForSentry=e}updateAppModel(e){this.appModel=e}updateHasWaved(e){this.hasWaved=e}setTimeoutWrapper({callback:e,delay:t,isBlockingTutorialExecution:n}){this.timeoutIds.push(setTimeout(e,t)),n&&this.pendingCallbacksToRun.push(e)}resetCursorBotStateToDefaults(){this.tutorialParentNode=void 0,this.setCursorBotX(gz.Lw),this.setCursorBotY(gz.WW),this.setCursorBotChat(""),this.setCursorBotAnimationDuration(0),this.setCursorType(ei.z7E.DEFAULT),this.setToolbarActionWithSimulatedHover(void 0),this.setCursorDirection(hl.zu.DEFAULT),this.setCursorBotOverlayType(hl.JJ.CANVAS),this.timeoutIds=[],this.pendingCallbacksToRun=[]}async navigateToPageNodesOrDefaultViewport(){var e;let t=null==(e=this.sceneGraph.getCurrentPage())?void 0:e.childrenGuids;t&&t.length>0?ei.NfO.scrollAndZoomIntoView(t):await this.navigate({centerX:0,centerY:0,scale:3})}getSelectedNodeIfMatches(e){if(""!==ei.glU.getFirstSelectedNodeIdForCurrentPage()){let t=ei.glU.getFirstSelectedNodeIdForCurrentPage(),n=this.sceneGraph.get(t);if(n&&e(n,this.sceneGraph))return n}}computeAndSetTutorialDuration(e){let t=e.duration;if(e.startingState){let{centerNodeMatcher:n,resetStartingState:a}=e.startingState;!(0,ey.cy)(n,this.sceneGraph)&&a&&(t+=3e3)}this.hasWaved||(t+=gj.Y4+gj.YX),this.setCursorBotTutorialDuration(t),(0,o2.Lo)(gj.tF,"Estimated tutorial duration",{tutorialDuration:t,tutorialName:e.name})}async setupStateAndCanvas(e){if(this.blockUserEvents(),this.shouldStop=!1,this.timeoutIds=[],this.computeAndSetTutorialDuration(e),e.startingViewportFrameType&&this.setCursorBotOverlayType(e.startingViewportFrameType),this.setCursorBotTutorialPhase(hl.h0.PLAYING),this.hasWaved||(this.setTimeoutWrapper({callback:()=>{this.hasWaved=!0,this.dispatch(j.b({cursor_bot_v2_has_greeted_with_wave:!0}))},delay:gj.Y4,isBlockingTutorialExecution:!1}),await this.transition({type:hl.HQ.SET_CHAT,message:"Certainly! Here\u2019s how...",additionalDelay:gj.YX,preDelay:gj.Y4},e.name)),void 0!==e.startingState){let t;let{centerNodeMatcher:n,prioritizeSelectedNode:a,resetStartingState:l}=e.startingState;if(a&&(t=this.getSelectedNodeIfMatches(n)),t||(t=(0,ey.WY)(n,this.sceneGraph)),!t&&l)try{await this.insertStartingStateFromHubFile({...l,tutorialName:e.name}),t=(0,ey.cy)(n,this.sceneGraph)}catch(t){this.logErrorAndStopTutorial("Could not insert starting state from hub file for tutorial",{err:t,tutorialName:e.name});return}if(t){this.tutorialParentNode=(0,ey.E6)(this.sceneGraph,t.guid)??void 0;let e={centerX:t.absoluteBoundingBox.x+t.absoluteBoundingBox.w/2,centerY:t.absoluteBoundingBox.y+t.absoluteBoundingBox.h/2,scale:.2},n=ei.NfO.getViewportBounds(),a=(0,gj.dK)(t,{width:n.width,height:n.height,zoom:this.getViewportInfo().zoomScale});null==a||isNaN(a)||(e.scale=a),await this.navigate(e)}else await this.navigateToPageNodesOrDefaultViewport()}else await this.navigateToPageNodesOrDefaultViewport()}resetStateAndMarkTutorialComplete(e,t){setTimeout(()=>{this.dispatch(j.b({[e]:!0})),null==t||t(),this.resetCursorBotStateToDefaults(),this.unblockUserEvents()},h_)}async centerViewportAroundCanvasRect(e,t=!1){let{x:n,y:a,width:l,height:r}=e,i=this.getViewportInfo();if(t&&(0,lb.UN)(e,i))return;let o=i.zoomScale;(l*o>i.width||r*o>i.height)&&(o=Math.min(i.width/l,i.height/r)/1.1),await this.navigate({centerX:n+l/2,centerY:a+r/2,scale:o})}moveCursorBot({x:e,y:t,coordinateType:n,animationDuration:a}){if("canvas"===n){let n=this.getViewportInfo(),a=(0,lb.Z0)(n,{x:e,y:t});e=a.x+n.x,t=a.y+n.y}return a=a||function(e,t,n,a){let l=Math.abs(e-t),r=Math.abs(n-a);return Math.min(Math.round(1.6*Math.sqrt(l*l+r*r)),3e3)}(this.cursorBotX,e,this.cursorBotY,t),this.setCursorBotAnimationDuration(a),this.setCursorBotX(e),this.setCursorBotY(t),a}repositionNode(e,t,n){o4.l7.onboarding("reposition-node",()=>e.relativeTransform={...e.relativeTransform,m02:t,m12:n})}async insertNode(e,t,n,a,l){let r;if("RECTANGLE"===e.nodeType){let t=await (0,gj.mF)({imgSrc:e.imgSrc,desiredWidth:e.width,desiredHeight:e.height});r=t?this.sceneGraph.get(t):null}else r=o4.l7.onboarding("create-node",()=>this.sceneGraph.createNode(e.nodeType));if(!r)return null;if(o4.l7.onboarding("size",()=>{r&&ei.Egt.setSelectedNodeAndCanvas(r.guid,!1)}),l){let e=(0,ey.cy)(l,this.sceneGraph,this.tutorialParentNode);o4.l7.onboarding("append-child",()=>r&&(null==e?void 0:e.appendChild(r)))}if(this.repositionNode(r,n,a),o4.l7.onboarding("rename-node",()=>{r&&(r.name=t)}),"FRAME"===e.nodeType)o4.l7.onboarding("resize-frame",()=>null==r?void 0:r.resizeWithoutConstraints(e.width||100,e.height||100));else if("TEXT"===e.nodeType){ei.glU.triggerAction("set-tool-default",null),this.setCursorType(ei.z7E.DEFAULT);let t=r.parentNode;if(null!==t){let e="CANVAS"===t.type?t.backgroundColor:t.fills[0].color;o4.l7.onboarding("set-text-color",()=>{r&&(r.fills=[{...r.fills[0],color:(0,hu.HD)(e||hu.UE)?hu.UE:hu.Uv}])})}let n=e.text.length,a=e.typingDurationPerCharMs||50,l=500;for(let t=0;t<n;t++)this.setTimeoutWrapper({callback:()=>{o4.l7.onboarding("set-text",()=>{var n,a,l,i;null==r||r.spliceCharacters((null==(a=null==(n=r.textData)?void 0:n.characters)?void 0:a.length)??t,(null==(i=null==(l=r.textData)?void 0:l.characters)?void 0:i.length)??t,e.text[t],"BEFORE")})},delay:l,isBlockingTutorialExecution:!1}),l+=Math.max(a-t,40);e.shouldCenterAlign&&this.setTimeoutWrapper({callback:()=>{o4.l7.onboarding("set-text-horizontal-alignment",()=>{r&&(r.textAlignHorizontal="CENTER",r.textAlignVertical="CENTER")})},delay:l,isBlockingTutorialExecution:!1}),await this.waitForDuration(l)}return r}getCursorBotNodeInsertionLocation(e){var t,n;let a;if(e.locationType===hl.bn.INSIDE_SCENE_NODE){let{parentMatcher:l,useDefaultLocationIfParentNotFound:r}=e.location,i=(0,ey.cy)(l,this.sceneGraph,this.tutorialParentNode);if(!i)return r?this.getCursorBotNodeInsertionLocation({...e,locationType:hl.bn.DEFAULT}):void 0;let o=(null==(t=e.location)?void 0:t.offsetX)??0,s=(null==(n=e.location)?void 0:n.offsetY)??0,{absoluteBoundingBox:{x:c,y:d,w:u,h:m}}=i;e.location.shouldPositionRelativeToCenterOfParent&&(o+=u/2,s+=m/2),a={cursorBotX:c+o,cursorBotY:d+s,insertionX:o,insertionY:s}}else if(e.locationType===hl.bn.CANVAS_COORDINATE)a={cursorBotX:e.location.x,cursorBotY:e.location.y,insertionX:e.location.x,insertionY:e.location.y};else{let t=ei.qmM.findBoundsToCenterNewTopLevelNode(e.payload.width??100,e.payload.height??100);a={cursorBotX:t.origin.x,cursorBotY:t.origin.y,insertionX:t.origin.x,insertionY:t.origin.y}}if(void 0!==e.cursorPosition&&null==e.nodeDrawingAnimationDuration){let t=e.payload.width??100,n=e.payload.height??100;switch(e.cursorPosition){case hl.$2.BOTTOM_LEFT:a.cursorBotY+=n;break;case hl.$2.BOTTOM_RIGHT:a.cursorBotX+=t,a.cursorBotY+=n;case hl.$2.TOP_LEFT:}}return a}async transition(e,t){var n;if(this.shouldStop)return;let a=async()=>{switch(e.type){case hl.HQ.SET_CHAT:{e.preDelay&&await this.waitForDuration(e.preDelay);let{message:t}=e;e.hasBackupMessage&&e.shouldShowBackupMessage(this.sceneGraph)&&(t=e.backupMessage),this.animateChat(1,t);return}case hl.HQ.CLEAR_CHAT:this.setCursorBotChat("");return;case hl.HQ.TARGET_DOM_NODE:{let n=(0,_c.xT)(e.dataOnboardingKey);if(!n){let n={name:e.dataOnboardingKey,tutorialName:t,...this.infoForSentry};e.continueIfNotFound?this.logSentryError("Failed to find DOM node to target",n):this.logErrorAndStopTutorial("Failed to find DOM node to target",n);return}let{targetX:a,targetY:l}=(0,gj.L7)(n,e.position,e.offset);await this.waitForDuration(this.moveCursorBot({x:a,y:l,coordinateType:"dom",animationDuration:e.cursorBotMovementAnimationDuration})),e.triggerHoverOfItemWithName&&this.setToolbarActionWithSimulatedHover(e.triggerHoverOfItemWithName);return}case hl.HQ.TARGET_SCENE_NODE:{let n=(0,ey.cy)(e.meetsConditions,this.sceneGraph,this.tutorialParentNode);if(e.prioritizeSelectedNode&&(n=this.getSelectedNodeIfMatches(e.meetsConditions)??n),!n){e.continueIfNotFound||this.logErrorAndStopTutorial("Failed to find scene node to target",{name:e.nodeNameForLogging,tutorialName:t});return}await this.centerViewportAroundCanvasRect({x:n.absoluteBoundingBox.x,y:n.absoluteBoundingBox.y,width:n.absoluteBoundingBox.w,height:n.absoluteBoundingBox.h},!0);let a=e.position||{x:hl.GF.RIGHT,y:hl.NI.BOTTOM},{targetX:l,targetY:r}=(0,gj.L7)(n,a,e.offset);await this.waitForDuration(this.moveCursorBot({x:l,y:r,coordinateType:"canvas",animationDuration:e.cursorBotMovementAnimationDuration})),e.shouldSelect&&ei.Egt.setSelectedNodeAndCanvas(n.guid,!1);return}case hl.HQ.SELECT_SCENE_NODE:{let n;if(e.prioritizeSelectedNode&&(n=this.getSelectedNodeIfMatches(e.meetsConditions)),n||(n=(0,ey.cy)(e.meetsConditions,this.sceneGraph,this.tutorialParentNode)),!n){this.logErrorAndStopTutorial("Failed to find scene node to select",{name:e.nodeNameForLogging,tutorialName:t});return}ei.Egt.setSelectedNodeAndCanvas(n.guid,!1);return}case hl.HQ.INSERT_NODE:{let n=this.getCursorBotNodeInsertionLocation(e);if(void 0===n){this.logErrorAndStopTutorial("Could not find parent scene node to insert node",{name:e.nodeNameForLogging,tutorialName:t});return}let a=e.payload.height??100,l=e.payload.width??100;await this.centerViewportAroundCanvasRect({x:n.cursorBotX,y:n.cursorBotY,width:l,height:a},!0),await this.waitForDuration(this.moveCursorBot({x:n.cursorBotX,y:n.cursorBotY,coordinateType:"canvas",animationDuration:e.cursorMovementAnimationDuration||600})),e.nodeDrawingAnimationDuration&&"FRAME"===e.payload.nodeType&&(this.setCursorBotAnimationLayerPosition({x:n.cursorBotX,y:n.cursorBotY,width:l,height:a,duration:e.nodeDrawingAnimationDuration}),await this.waitForDuration(this.moveCursorBot({x:n.cursorBotX+l,y:n.cursorBotY+a,coordinateType:"canvas",animationDuration:e.nodeDrawingAnimationDuration})));let r=n.insertionX??n.cursorBotX,i=n.insertionY??n.cursorBotY;await this.insertNode(e.payload,e.nodeName,r,i,e.locationType===hl.bn.INSIDE_SCENE_NODE?e.location.parentMatcher:void 0),this.setCursorBotAnimationLayerPosition(null);return}case hl.HQ.MOVE_CURSOR_TO_CENTER_SCREEN:return this.waitForDuration(this.moveCursorBot({x:this.getViewportInfo().offsetX,y:this.getViewportInfo().offsetY,coordinateType:"canvas",animationDuration:e.cursorBotMovementAnimationDuration}));case hl.HQ.CHANGE_TOOL:[ei.NLJ.FRAME,ei.NLJ.TYPE].includes(e.toolType)?(e.toolType===ei.NLJ.TYPE?ei.glU.triggerAction("set-tool-type",null):e.toolType===ei.NLJ.FRAME&&ei.glU.triggerAction("set-tool-frame",null),this.setCursorType(ei.z7E.CROSSHAIR)):e.toolType===ei.NLJ.HAND?(ei.glU.triggerAction("set-tool-hand",null),this.setCursorType(ei.z7E.HAND)):e.toolType===ei.NLJ.NONE&&(ei.glU.triggerAction("set-tool-default",null),this.setCursorType(ei.z7E.DEFAULT));return;case hl.HQ.MOVE_VIEWPORT:if("displace"===e.movementType)return this.navigate({centerX:this.getViewportInfo().offsetX+e.xDisplacement,centerY:this.getViewportInfo().offsetY+e.yDisplacement,scale:this.getViewportInfo().zoomScale});return this.navigate({centerX:e.centerX,centerY:e.centerY,scale:e.scale||this.getViewportInfo().zoomScale});case hl.HQ.ADJUST_ZOOM_LEVEL:return this.navigate({centerX:this.getViewportInfo().offsetX,centerY:this.getViewportInfo().offsetY,scale:e.scale});case hl.HQ.SET_CURSOR_DIRECTION:this.setCursorDirection(e.direction);return;case hl.HQ.SET_PROPERTIES_PANEL_TAB:(0,aT.NT)(e.tab);return;case hl.HQ.UPDATE_SELECTED_NODE_PROPERTIES:{let t=ei.glU.getFirstSelectedNodeIdForCurrentPage(),n=this.sceneGraph.get(t);if(!n){(0,o2.x1)(gj.tF,"Failed to find selected node to update",void 0,{reportAsSentryError:!0});return}this.appModel.activeCanvasEditModeType===ei.m1T.TEXT&&((0,aT.wr)(),ei.Egt.setSelectedNodeAndCanvas(t,!1)),et.Y5.updateSelectionProperties({..."function"==typeof e.properties?e.properties(n):e.properties},{shouldCommit:hf.zk.YES,editScopeType:ei.zkO.ONBOARDING});return}case hl.HQ.SCROLL_PROPERTIES_PANEL:(0,gj.$1)(e.value);return;case hl.HQ.FOCUS_INPUT:{let t=document.querySelector(e.selector);t?t.focus():(0,o2.x1)(gj.tF,"Failed to find input to focus",{selector:e.selector},{reportAsSentryError:!0});return}case hl.HQ.SET_VIEWPORT_FRAME_TYPE:this.setCursorBotOverlayType(e.viewportFrameType);return}};await a();let l=e.additionalDelay||0;e.type===hl.HQ.SET_CHAT&&(l+=35*e.message.length),l>0&&await this.waitForDuration(l,e.type===hl.HQ.SET_CHAT),await (null==(n=e.callback)?void 0:n.call(e,this.dispatch))}}function hh(){let[e,t]=(0,S.fp)(gz.jr),[n,a]=(0,S.fp)(gz.Sf),l=(0,e2.Xr)(gz.H7),r=(0,e2.Xr)(gz.nG),i=(0,e2.Xr)(gz.Ds),o=(0,e2.Xr)(gz.Dh),s=(0,e2.Xr)(gz.a8),c=(0,e2.Xr)(gz.iB),d=(0,e2.Xr)(gz.oO),u=(0,e2.Xr)(gz.$i),m=(0,e2.Xr)(gz.jE),p=!!(0,eT.f)("cursor_bot_v2_has_greeted_with_wave"),g=f.useContext(fP.kw),h=(0,fL.Z)(),E=(0,_.d4)(e=>e.mirror.sceneGraph),v=(0,_.wA)(),{insertTemplate:y}=(0,uI.Fz)(),b=(0,lh.VW)(),C=(0,aN.J2)((0,aT.aY)()),w=(0,_.d4)(e=>e.mirror.appModel.showUi),T=(0,_.d4)(e=>e.mirror.appModel),x=f.useRef();return x.current||(x.current=new hg(t,a,r,i,s,c,l,d,o,u,m,p,e,n,()=>g.getViewportInfo(),h,E,{selectedNodeType:null==b?void 0:b.type,isUiShown:w,propertiesPanelTab:C},v,y,T)),f.useEffect(()=>{var t;null==(t=x.current)||t.updatePositionState(e,n)},[e,n]),f.useEffect(()=>{var e;null==(e=x.current)||e.updateSceneGraphReference(E)},[E]),f.useEffect(()=>{var e;null==(e=x.current)||e.updateInfoForSentry({selectedNodeType:null==b?void 0:b.type,isUiShown:w,propertiesPanelTab:C})},[b,C,w]),f.useEffect(()=>{var e;null==(e=x.current)||e.updateAppModel(T)},[T]),f.useEffect(()=>{var e;null==(e=x.current)||e.updateHasWaved(p)},[p]),x.current}var hE=n(302245),hv=n(261503);function hy({isReplay:e,props:t}){let n,a,l,r;let i=(0,eT.f)("cursor_bot_v2_make_show_me_primary_cta"),o=()=>{var e;null==(e=t.onClickNext)||e.call(t),ei.glU.triggerActionInUserEditScope("set-tool-default",null)},s=t.isFollowUp?(0,eN.t)("cursor_bot.got_it"):(0,eN.t)("tooltips_plus_onboarding.next"),c=t.isFollowUp?ar.c.GOT_IT:ar.c.NEXT;return i?(n={ctaText:e?(0,eN.t)("cursor_bot.show_me_again"):(0,eN.t)("cursor_bot.show_me"),ctaTrackingDescriptor:e?ar.c.SHOW_ME_AGAIN:ar.c.SHOW_ME},a={ctaText:s,ctaTrackingDescriptor:c},l=t.onClickShowMe,r=o):(n={ctaText:s,ctaTrackingDescriptor:c},a={ctaText:e?(0,eN.t)("cursor_bot.show_me_again"):(0,eN.t)("cursor_bot.show_me"),ctaTrackingDescriptor:e?ar.c.SHOW_ME_AGAIN:ar.c.SHOW_ME},l=o,r=t.onClickShowMe),{primaryCtaProps:n,secondaryCtaProps:a,onPrimaryCtaClick:l,onSecondaryCtaClick:r}}var hb=n(774191);let hC="Watermelon",hw="Cherries",hT={r:1,g:1,b:1,a:1},hx={r:237/255,g:239/255,b:228/255,a:1},hN={r:225/255,g:228/255,b:217/255,a:1},hS={family:"Inter",style:"Regular"},hk="Rainier cherries",hI="$3.99 / lb",hA="Grown in Linden, CA",hO="Semi Bold",hL="Italic",hP="Roboto Serif",hD={r:71/255,g:103/255,b:48/255,a:1},hR={r:116/255,g:121/255,b:109/255,a:1},hM={value:130/1.21,units:"PERCENT"},hF={value:150/1.21,units:"PERCENT"};function hB(e,t){return!(!hG(e)||!(0,ey.cy)(e=>e.name===hC,t,e)||(0,ey.cy)(e=>e.name===hw,t,e))}function hU(e,t){return!!function(e){let t=e.parentNode;return"FRAME"===e.type&&e.name===hw&&395===e.absoluteBoundingBox.w&&416===e.absoluteBoundingBox.h&&!!t&&hG(t)}(e)&&(void 0===t||e.childrenGuids.length===t)}function hH(e,t){var n,a,l,r;return!!(hU(e,t)&&0===e.cornerRadius&&(null==(a=null==(n=e.strokePaints)?void 0:n.data)?void 0:a.length)===0&&(0,hb.Vm)(null==(r=null==(l=e.fillPaints)?void 0:l.data[0])?void 0:r.color,hT))}function hG(e){return!!e&&"FRAME"===e.type&&"Products"===e.name&&1440===e.absoluteBoundingBox.w&&900===e.absoluteBoundingBox.h}function hV(e){return[{type:"SOLID",color:e,blendMode:"NORMAL",opacity:1,visible:!0}]}function hK(e){return"FRAME"===e.type&&e.absoluteBoundingBox.w>=90&&!!e.parentNode&&0===e.childrenGuids.length}let hW="Hello";function hz(e,t){if(void 0!==t&&e.name.toLowerCase()!==t.toLowerCase()||"TEXT"!==e.type||12!==e.fontSize||e.fontName.family!==hS.family||e.fontName.style!==hS.style)return!1;let n=e.parentNode;return!!n&&hH(n,4)}function hj(e,t){var n,a;let l=hl.wn.CREATE_FRAME,{tutorialPlayedUserFlag:r,stepCompletedUserFlag:i}=(0,gj.Of)(l,t);return{name:l,tutorialPlayedUserFlag:r,stepCompletedUserFlag:i,duration:t?8900:5200,startingState:t?{centerNodeMatcher:hB,resetStartingState:{hubFileId:null==(a=null==(n=(0,y.Ay)())?void 0:n.cursor_bot)?void 0:a.product_page_hub_file_id,nodeWidth:1440,nodeHeight:900}}:void 0,steps:function(e,t){let n=[{type:hl.HQ.SET_CHAT,message:"Just click and drag, like this.",additionalDelay:600},{type:hl.HQ.CHANGE_TOOL,toolType:ei.NLJ.FRAME}];return t?n.push({type:hl.HQ.INSERT_NODE,payload:{nodeType:"FRAME",width:395,height:416},nodeName:hw,locationType:hl.bn.INSIDE_SCENE_NODE,location:{parentMatcher:hB,offsetX:523,offsetY:285},nodeNameForLogging:hl.Le.PRODUCT_FRAME_CHERRIES_FRAME,additionalDelay:1200,cursorMovementAnimationDuration:600,nodeDrawingAnimationDuration:1500},{type:hl.HQ.SET_CHAT,message:"Then add elements into frames, like images.",additionalDelay:700},{type:hl.HQ.INSERT_NODE,locationType:hl.bn.INSIDE_SCENE_NODE,location:{parentMatcher:e=>hH(e,0)},payload:{nodeType:"RECTANGLE",fillType:"image",imgSrc:"https://static.figma.com/uploads/eccc694a7069c9cafd11d1b91b27e0a5c5e7a394",width:395,height:310},nodeName:"Image",nodeNameForLogging:hl.Le.CHERRIES_FRAME_CHERRIES_IMAGE,additionalDelay:1e3,cursorMovementAnimationDuration:600,cursorPosition:hl.$2.BOTTOM_RIGHT},{type:hl.HQ.SELECT_SCENE_NODE,meetsConditions:e=>hH(e,1),nodeNameForLogging:hl.Le.PRODUCT_FRAME_CHERRIES_FRAME}):n.push({type:hl.HQ.INSERT_NODE,payload:{nodeType:"FRAME",width:117,height:48},locationType:hl.bn.DEFAULT,nodeName:"Frame 1",nodeNameForLogging:hl.Le.NO_BASICS_FILE_FRAME,additionalDelay:1500,cursorMovementAnimationDuration:500,nodeDrawingAnimationDuration:1500}),n.push({type:hl.HQ.CLEAR_CHAT}),n}(0,t),TooltipElement:t=>{let{primaryCtaProps:n,secondaryCtaProps:a,onPrimaryCtaClick:l,onSecondaryCtaClick:r}=hy({isReplay:e,props:t});return f.createElement(hv.e,{onPrimaryCtaClick:l,onSecondaryCtaClick:r,primaryCtaProps:n,secondaryCtaProps:a,onClose:t.onClickClose,bodyText:(0,eN.t)("cursor_bot.a_frame_will_hold_the_rest_of_your_design"),fromCursorBot:!0})}}}var hJ=n(67350);function hY(e){let t=(0,_.d4)(e=>e.isFullscreenDocumentLoaded);return f.useEffect(()=>{t&&ei.glU.triggerAction("set-tool-type",null)},[t]),f.createElement(hJ.b,{dismissModal:e.onClose,disableHighlight:!0,targetKey:"tool-type-onboarding",title:(0,eN.tx)("cursor_bot.add_words_where_needed"),trackingContextName:"Cursor Bot Create Text Step",lowerLeftText:f.createElement(Y.$z,{onClick:e.onBackCtaClick,className:a8.cx.textInherit__DEPRECATED.bgTransparent.$,trackingProperties:{ctaTrackingDescriptor:ar.c.BACK}},(0,eN.tx)("general.back")),onPrimaryCtaClick:e.onPrimaryCtaClick,primaryCtaProps:e.primaryCtaProps,onSecondaryCtaClick:e.onSecondaryCtaClick,secondaryCtaProps:e.secondaryCtaProps,pointsTo:"toolbar"},(0,eN.tx)("cursor_bot.all_designs_need_words_so_create_a_text_layer_anywhere_and_start_typing_simple_as_that"))}function hX(e,t,n){var a,l;let r=hl.wn.CREATE_TEXT,{tutorialPlayedUserFlag:i,stepCompletedUserFlag:o}=(0,gj.Of)(r,t);return{name:r,tutorialPlayedUserFlag:i,stepCompletedUserFlag:o,duration:t?11400:6600,startingState:t?{centerNodeMatcher:e=>hH(e,1),resetStartingState:{hubFileId:null==(l=null==(a=(0,y.Ay)())?void 0:a.cursor_bot)?void 0:l.ginger_no_text_hub_file_id,nodeWidth:1440,nodeHeight:900}}:{centerNodeMatcher:hK},steps:function({shouldSkipYup:e,isInBasicsFile:t}){let n=[];return t?n.push({type:hl.HQ.SET_CHAT,message:(e?"":"Yup: ")+"Just click into your frame and type.",additionalDelay:500}):n.push({type:hl.HQ.SET_CHAT,message:(e?"":"Yup: ")+"Just click into your frame and type.",additionalDelay:500,hasBackupMessage:!0,shouldShowBackupMessage:e=>void 0===(0,ey.cy)(hK,e),backupMessage:(e?"":"Yup: ")+"Just click to add a text node and type."}),n.push({type:hl.HQ.CHANGE_TOOL,toolType:ei.NLJ.TYPE,additionalDelay:1200}),t?n.push({type:hl.HQ.INSERT_NODE,nodeName:hk,payload:{nodeType:"TEXT",text:hk,height:16},locationType:hl.bn.INSIDE_SCENE_NODE,location:{parentMatcher:e=>hH(e,1),offsetX:24,offsetY:334},cursorPosition:hl.$2.BOTTOM_LEFT,nodeNameForLogging:hl.Le.CHERRIES_FRAME_CHERRIES_TEXT,cursorMovementAnimationDuration:600,additionalDelay:400},{type:hl.HQ.CHANGE_TOOL,toolType:ei.NLJ.TYPE,additionalDelay:300},{type:hl.HQ.INSERT_NODE,nodeName:hI,payload:{nodeType:"TEXT",text:hI,height:16},locationType:hl.bn.INSIDE_SCENE_NODE,location:{parentMatcher:e=>hH(e,2),offsetX:316,offsetY:334},cursorPosition:hl.$2.BOTTOM_LEFT,nodeNameForLogging:hl.Le.CHERRIES_FRAME_PRICE_TEXT,additionalDelay:400},{type:hl.HQ.CHANGE_TOOL,toolType:ei.NLJ.TYPE,additionalDelay:300},{type:hl.HQ.INSERT_NODE,nodeName:hA,payload:{nodeType:"TEXT",text:hA,height:16},locationType:hl.bn.INSIDE_SCENE_NODE,location:{parentMatcher:e=>hH(e,3),offsetX:24,offsetY:368},cursorPosition:hl.$2.BOTTOM_LEFT,nodeNameForLogging:hl.Le.CHERRIES_FRAME_GROWN_TEXT,additionalDelay:1e3}):n.push({type:hl.HQ.INSERT_NODE,nodeName:hW,payload:{nodeType:"TEXT",text:hW,width:29,height:16,shouldCenterAlign:!0,typingDurationPerCharMs:200},cursorPosition:hl.$2.BOTTOM_LEFT,locationType:hl.bn.INSIDE_SCENE_NODE,location:{parentMatcher:hK,offsetX:-14.5,offsetY:-7.5,shouldPositionRelativeToCenterOfParent:!0,useDefaultLocationIfParentNotFound:!0},nodeNameForLogging:hl.Le.NO_BASICS_FILE_TEXT,cursorMovementAnimationDuration:600,additionalDelay:1500}),n}({shouldSkipYup:e||!n,isInBasicsFile:t}),TooltipElement:t=>{let{primaryCtaProps:n,secondaryCtaProps:a,onPrimaryCtaClick:l,onSecondaryCtaClick:r}=hy({isReplay:e,props:t});return f.createElement(hY,{onPrimaryCtaClick:l,onSecondaryCtaClick:r,primaryCtaProps:n,secondaryCtaProps:a,onClose:t.onClickClose,onBackCtaClick:t.onClickBack})}}}var hq=n(460528),hZ=n(493168);function hQ(e,t){var n,a;let l=hl.wn.FORMAT_FRAME,{tutorialPlayedUserFlag:r,stepCompletedUserFlag:i}=(0,gj.Of)(l,t);return{name:l,tutorialPlayedUserFlag:r,stepCompletedUserFlag:i,duration:t?17500:9400,steps:function(e){let t=[];return t.push({type:hl.HQ.SET_PROPERTIES_PANEL_TAB,tab:ei.FAf.DESIGN}),e?t.push({type:hl.HQ.SELECT_SCENE_NODE,meetsConditions:e=>hH(e,4),nodeNameForLogging:hl.Le.PRODUCT_FRAME_CHERRIES_FRAME,additionalDelay:400}):t.push({type:hl.HQ.SELECT_SCENE_NODE,meetsConditions:e=>"FRAME"===e.type,nodeNameForLogging:hl.Le.NO_BASICS_FILE_FRAME,additionalDelay:400,prioritizeSelectedNode:!0}),t.push({type:hl.HQ.SET_CURSOR_DIRECTION,direction:hl.zu.RIGHT},{type:hl.HQ.SET_CHAT,message:"Change how your frames look here.",additionalDelay:500},{type:hl.HQ.TARGET_DOM_NODE,dataOnboardingKey:hq.W,offset:{x:-28,y:132},position:{x:hl.GF.LEFT,y:hl.NI.TOP},cursorBotMovementAnimationDuration:600},{type:hl.HQ.SET_VIEWPORT_FRAME_TYPE,viewportFrameType:hl.JJ.PROPERTIES_PANEL,additionalDelay:1500},{type:hl.HQ.SET_CHAT,message:e?"For example: Add color...":"For example: Their color!",additionalDelay:1e3},{type:hl.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,dt.Lh)(dt.D8.PROPERTIES_PANEL_TITLE,"fill"),position:{x:hl.GF.LEFT,y:hl.NI.CENTER},additionalDelay:500,cursorBotMovementAnimationDuration:1e3},{type:hl.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:()=>({fillPaints:hV(e?hx:function(){let e=["r","g","b"].map(e=>({c:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({c:e})=>e);return{r:0,g:86/255,b:65/255,[e[0]]:0,[e[1]]:86/255,[e[2]]:Math.floor(86*Math.random())/255,a:1}}())}),additionalDelay:0},{type:hl.HQ.FOCUS_INPUT,selector:`[data-onboarding-key="${(0,dt.Lh)(dt.D8.PAINT_PANEL_ROW,"paint-1-0")}"] input`,additionalDelay:1500},{type:hl.HQ.CLEAR_CHAT}),e&&t.push({type:hl.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,dt.Lh)(dt.D8.PROPERTIES_PANEL_TITLE,"stroke"),position:{x:hl.GF.LEFT,y:hl.NI.CENTER},cursorBotMovementAnimationDuration:300,additionalDelay:300},{type:hl.HQ.SET_CHAT,message:"A border...",additionalDelay:500},{type:hl.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{strokePaints:hV(hN),strokeWeight:2},additionalDelay:10},{type:hl.HQ.FOCUS_INPUT,selector:`[data-onboarding-key="${(0,dt.Lh)(dt.D8.PAINT_PANEL_ROW,"paint-2-0")}"] input`,additionalDelay:1500},{type:hl.HQ.SCROLL_PROPERTIES_PANEL,value:0,additionalDelay:500},{type:hl.HQ.CLEAR_CHAT},{type:hl.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,dt.Lh)(dt.D8.SCRUBBABLE_CONTROL,"corner-radius"),offset:{x:-25,y:5},cursorBotMovementAnimationDuration:700,additionalDelay:300},{type:hl.HQ.SET_CHAT,message:"Or rounded corners!",additionalDelay:500},{type:hl.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{cornerRadius:24},additionalDelay:10},{type:hl.HQ.FOCUS_INPUT,selector:`[data-onboarding-key="${(0,dt.Lh)(dt.D8.SCRUBBABLE_CONTROL,"corner-radius")}"] input`,additionalDelay:2500},{type:hl.HQ.CLEAR_CHAT}),t}(t),startingState:t?{centerNodeMatcher:e=>hH(e,4),resetStartingState:{hubFileId:null==(a=null==(n=(0,y.Ay)())?void 0:n.cursor_bot)?void 0:a.ginger_formatted_text_hub_file_id,nodeHeight:900,nodeWidth:1440}}:{centerNodeMatcher:e=>"FRAME"===e.type},TooltipElement:n=>{let{primaryCtaProps:a,secondaryCtaProps:l,onPrimaryCtaClick:r,onSecondaryCtaClick:i}=hy({isReplay:e,props:n});return f.createElement(hZ.Z,{onPrimaryCtaClick:r,primaryCtaProps:a,secondaryCtaProps:l,onSecondaryCtaClick:i,lowerLeftText:n.onClickBack?f.createElement(Y.$z,{onClick:n.onClickBack,className:a8.cx.textInherit__DEPRECATED.bgTransparent.$,trackingProperties:{ctaTrackingDescriptor:ar.c.BACK}},(0,eN.tx)("cursor_bot.back")):void 0,onClose:n.onClickClose,skip:n.skip,frameNodeMatcher:t?e=>(0,ey.WY)(e=>hU(e,4),e)||(0,ey.cy)((e,t)=>(function(e,t){let n=e.parentNode;return"FRAME"===e.type&&e.name===hC&&!!n&&hB(n,t)})(e,t),e):void 0,title:(0,eN.t)("cursor_bot.make_it_look_just_right"),bodyText:t?(0,eN.t)("cursor_bot.design_panel_can_change_objects"):(0,eN.t)("cursor_bot.design_panel_is_key"),fromCursorBot:!0,isFollowUp:n.isFollowUp})}}}var h$=n(258525);function h0(e,t){var n,a;let l=hl.wn.FORMAT_TEXT,{tutorialPlayedUserFlag:r,stepCompletedUserFlag:i}=(0,gj.Of)(l,t);return{name:l,tutorialPlayedUserFlag:r,stepCompletedUserFlag:i,duration:t?10500:8500,steps:function(e){let t=[];return t.push({type:hl.HQ.SET_PROPERTIES_PANEL_TAB,tab:ei.FAf.DESIGN}),e&&t.push({type:hl.HQ.SELECT_SCENE_NODE,meetsConditions:e=>hz(e,hA),prioritizeSelectedNode:!0,nodeNameForLogging:hl.Le.CHERRIES_FRAME_GROWN_TEXT,additionalDelay:1e3},{type:hl.HQ.TARGET_DOM_NODE,dataOnboardingKey:h$.B,offset:{x:-150,y:-50},cursorBotMovementAnimationDuration:800},{type:hl.HQ.SET_CHAT,message:"Change how your text looks here.",additionalDelay:1500}),t.push({type:hl.HQ.SET_CURSOR_DIRECTION,direction:hl.zu.RIGHT},{type:hl.HQ.SET_CHAT,message:"Pick your style, size, alignment, and more.",additionalDelay:1200}),e?t.push({type:hl.HQ.SELECT_SCENE_NODE,meetsConditions:e=>hz(e,hk),nodeNameForLogging:hl.Le.CHERRIES_FRAME_CHERRIES_TEXT,prioritizeSelectedNode:!0},{type:hl.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,dt.Lh)(dt.D8.TEXT_PANEL,"font-style-button"),position:{x:hl.GF.LEFT,y:hl.NI.CENTER},cursorBotMovementAnimationDuration:500,additionalDelay:1e3},{type:hl.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{fontSize:20,fontStyle:hO,lineHeight:hM}},{type:hl.HQ.SELECT_SCENE_NODE,meetsConditions:e=>hz(e,hI),nodeNameForLogging:hl.Le.CHERRIES_FRAME_PRICE_TEXT},{type:hl.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{fillPaints:hV(hD),fontSize:20,fontStyle:hO,lineHeight:hM,textAlignHorizontal:"RIGHT"}},{type:hl.HQ.SELECT_SCENE_NODE,meetsConditions:e=>hz(e,hA),nodeNameForLogging:hl.Le.CHERRIES_FRAME_GROWN_TEXT},{type:hl.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{fillPaints:hV(hR),fontSize:16,lineHeight:hF},additionalDelay:1500}):t.push({type:hl.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,dt.Lh)(dt.D8.TEXT_PANEL,"font-picker-button"),position:{x:hl.GF.LEFT,y:hl.NI.CENTER},cursorBotMovementAnimationDuration:600,additionalDelay:500},{type:hl.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:e=>({fontFamily:e.fontName.family===hP?hS.family:hP}),additionalDelay:300},{type:hl.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,dt.Lh)(dt.D8.TEXT_PANEL,"font-style-button"),position:{x:hl.GF.LEFT,y:hl.NI.CENTER},cursorBotMovementAnimationDuration:600,additionalDelay:500},{type:hl.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:e=>({fontStyle:e.fontName.style===hL?hS.style:hL}),additionalDelay:300},{type:hl.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,dt.Lh)(dt.D8.SCRUBBABLE_CONTROL,"font-size"),position:{x:hl.GF.LEFT,y:hl.NI.CENTER},cursorBotMovementAnimationDuration:600},{type:hl.HQ.FOCUS_INPUT,selector:`[data-onboarding-key="${(0,dt.Lh)(dt.D8.SCRUBBABLE_CONTROL,"font-size")}"] input`,additionalDelay:500},{type:hl.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:e=>({fontSize:16===e.fontSize?12:16}),additionalDelay:1500}),t.push({type:hl.HQ.CLEAR_CHAT}),t}(t),startingViewportFrameType:t?hl.JJ.TEXT_PANEL:hl.JJ.PROPERTIES_PANEL,startingState:t?{centerNodeMatcher:e=>(function(e,t){if(!hH(e,4))return!1;for(let t of e.childrenNodes)if("TEXT"===t.type&&!hz(t))return!1;return!0})(e,0),resetStartingState:{hubFileId:null==(a=null==(n=(0,y.Ay)())?void 0:n.cursor_bot)?void 0:a.ginger_hub_file_id,nodeHeight:900,nodeWidth:1440}}:{centerNodeMatcher:e=>"TEXT"===e.type},TooltipElement:n=>{let a=(0,lh.VW)(),{primaryCtaProps:l,secondaryCtaProps:r,onPrimaryCtaClick:i,onSecondaryCtaClick:o}=hy({isReplay:e,props:n});return f.createElement(h$.P,{onPrimaryCtaClick:i,primaryCtaProps:l,secondaryCtaProps:r,onSecondaryCtaClick:o,lowerLeftText:n.onClickBack?f.createElement(Y.$z,{onClick:n.onClickBack,className:a8.cx.textInherit__DEPRECATED.bgTransparent.$,trackingProperties:{ctaTrackingDescriptor:ar.c.BACK}},(0,eN.tx)("cursor_bot.back")):void 0,onClose:n.onClickClose,getNodeToSelect:t?()=>(0,ey.WY)(e=>"TEXT"===e.type&&(e.name===hA||"Grown in Tracy, CA"===e.name),lE.q.instance):()=>(null==a?void 0:a.type)==="TEXT"?a:(0,ey.WY)(e=>"TEXT"===e.type,lE.q.instance),skip:n.skip,title:t?(0,eN.t)("cursor_bot.pick_the_perfect_font"):(0,eN.t)("cursor_bot.and_pick_the_perfect_font"),bodyText:(0,eN.t)("cursor_bot.use_the_design_panel_to_turn_basic_text_into_titles"),fromCursorBot:!0,isFollowUp:n.isFollowUp})}}}let h1=(0,hE.Mz)([e=>e.userFlags,(e,t)=>t],(e,t)=>t.reduce((t,n)=>({...t,[n.name]:!!e[n.stepCompletedUserFlag]}),{}));var h2=(e=>(e.PanAndZoom="pan_and_zoom",e.YoureAllSet="youre_all_set",e))(h2||{}),h5=n(975378),h4=n(423095),h3=n(246497);let h6=f.memo(({currentTutorial:e,stateManager:t})=>{let n;let a=(0,S.md)(gz.a8),l=(0,S.md)(gz.jE),r=f.useCallback(()=>{let e=s.current;return e?Math.min(Math.round(e/l*100),100):0},[l]);f.useEffect(()=>{let n=n=>{n&&27===n.keyCode&&(0,gj.XC)(a)&&((0,Z.sx)("Cursor Bot Tutorial Canceled via Escape",{tutorialName:e.name}),t.stopCurrentTutorial({timeElapsed:s.current,tutorialPercentageComplete:r(),tutorialName:e.name,stopTrigger:hl.mf.ESC_KEY}))};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[a,t,r,e.name]);let[i,o]=(0,S.fp)(gz.mH),s=f.useRef(0),c=f.useRef();if(f.useEffect(()=>{if(!(0,gj.XC)(a)){s.current=0,clearInterval(c.current),c.current=void 0;return}let e=setInterval(()=>s.current+=17,17);return c.current=e,()=>clearInterval(e)},[a]),(0,gj.XC)(a)){let e=r(),t=(0,h5.keyframes)({from:{backgroundPosition:`${100-e}% center`},to:{backgroundPosition:"left"}}),a=l-s.current;n={animation:`${t} ${a}ms linear`}}let d=(0,lb.ni)(),u=f.useMemo(()=>({top:d.y+hr.hH+4}),[d.y]);return f.createElement("div",{className:h3.CL,style:u},f.createElement("div",{className:nb()({[h4.e]:i}),onAnimationEnd:()=>{o(!1)}},f.createElement("div",{className:h3.KB,style:n},f.createElement(a1.Kz,{multiple:1,direction:"x"}),f.createElement("div",null,e.name),f.createElement(a1.Kz,{multiple:1,direction:"x"}),f.createElement(Y.$z,{className:h3.gd,onClick:()=>{t.stopCurrentTutorial({timeElapsed:s.current,tutorialPercentageComplete:r(),tutorialName:e.name,stopTrigger:hl.mf.STOP_BTN})},"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("cursor_bot.stop_tutorial"),trackingProperties:{trackingDescriptor:ar.c.STOP_TUTORIAL,tutorialName:e.name},"aria-label":(0,eN.t)("cursor_bot.stop_tutorial")},(0,eN.tx)("collaboration.spotlight.bell.presenter.stop")))))}),h7="create_frame_animation--frameCornerSquare--TEcO4";function h8(){let e=(0,lb._X)({subscribeToUpdates_expensive:!1}),t=(0,S.md)(gz.Dh);if(null==t)return null;let{x:n,y:a,width:l,height:r,duration:i}=t,o=(0,lb.Yb)(e,{x:n,y:a,width:l,height:r}),s=e.x+o.x,c=e.y+o.y;return f.createElement("div",{style:{top:c,left:s,width:`${o.width}px`,height:`${o.height}px`,position:"absolute"}},f.createElement("div",{style:{border:"1px solid #4497F7",animationDuration:`${i}ms`},className:"create_frame_animation--animationFrame--4fuzR"},f.createElement("div",{style:{top:-3,left:-3,background:"#ffffff"},className:h7}),f.createElement("div",{style:{top:-3,left:"calc(100% - 3px)",background:"#ffffff"},className:nb()(h7)}),f.createElement("div",{style:{top:"calc(100% - 3px)",left:"calc(100% - 3px)",background:"#ffffff"},className:h7}),f.createElement("div",{style:{top:"calc(100% - 3px)",left:-3,background:"#ffffff"},className:h7})))}function h9(){var e;let{isShowing:t,show:n,complete:a,uniqueId:l}=(0,n7.e)({overlay:an.SyB,priority:n8.N.OVERRIDING_MODAL}),r=(0,_.wA)(),i=(0,_.Pj)(),o=(0,_.d4)(e=>e.isFullscreenDocumentLoaded),s=(0,_.d4)(e=>e.mirror.appModel.multiplayerSessionState===ei.kul.JOINED),c=hh(),d=(0,S.md)(gz.a8),u=(0,eT.f)("has_cursor_bot_onboarding_v2");!function(e,t,n){let a=(0,ew.iZ)(),l=(0,_.wA)(),r=(0,eT.f)("has_cursor_bot_onboarding_v2"),i=(0,af.Cq)({useSinatraType:!0}),o=(0,dt.WO)(null==a?void 0:a.id,i,["exp_cursor_bot_onboarding"]),s=e=>{let a={...function(e){let t={format_text_step_shown:!1,design_panel_step_shown:!1};for(let n of(e?t.cursor_bot_v2__basics_onboarded=!1:(t.has_zoomed_in_design_file=!1,t.has_panned_in_design_file=!1,t.cursor_bot_v2__basics_onboarded=!1,t.cursor_bot_v2__no_basics_onboarded=!1),hd)){let{tutorialPlayedUserFlag:a,stepCompletedUserFlag:l}=(0,gj.Of)(n,e);t[a]=!1,t[l]=!1}return t}(o),cursor_bot_v2__basics_file__started_flow:!1,cursor_bot_v2_has_greeted_with_wave:!1};e&&(a.has_cursor_bot_onboarding_v2=!0),l(j.b(a)),t||n()};(0,sD.E)(e,hc.Wl,()=>{(null==i?void 0:i.editor_type)===a_._Y.DESIGN?s(!0):l(cG.s.error("Cursor Bot can only be run in Figma design."))}),(0,sD.E)(e,"Reset Onboarding",()=>{r&&(null==i?void 0:i.editor_type)===a_._Y.DESIGN&&s()})}(l,t,n);let[m,p]=f.useState(hs.en.FORWARD),g=function(){let e=(0,eT.f)("has_cursor_bot_onboarding_v2"),t=(0,eT.f)("cursor_bot_v2__basics_file__started_flow"),n=(0,dt.Ai)(["exp_cursor_bot_onboarding"]),a=(0,dt.jm)(n),l=function(e){let t=!!(0,eT.f)("cursor_bot_v2_has_greeted_with_wave"),n=!!(0,eT.f)((0,gj.Of)(hl.wn.CREATE_FRAME,e).tutorialPlayedUserFlag),a=!!(0,eT.f)((0,gj.Of)(hl.wn.FORMAT_FRAME,e).tutorialPlayedUserFlag),l=!!(0,eT.f)((0,gj.Of)(hl.wn.CREATE_TEXT,e).tutorialPlayedUserFlag),r=!!(0,eT.f)((0,gj.Of)(hl.wn.FORMAT_TEXT,e).tutorialPlayedUserFlag);return(0,f.useMemo)(()=>e?[hj(n,e),hX(l,e,t),h0(r,e),hQ(a,e)]:[hj(n,e),hQ(a,e),hX(l,e,t),h0(r,e)],[e,t,n,l,r,a])}(n),r=(0,_.d4)(e=>h1(e,l));if(!e||a||!n&&t)return null;let i=0;if(l.forEach(e=>{r[e.name]&&(i+=1)}),i>=l.length)return n?"youre_all_set":"pan_and_zoom";let o={...l[i]};return i>0&&(o.previousTutorialCompleteUserFlag=l[i-1].stepCompletedUserFlag),o}(),h=(0,dt.Ai)(["exp_cursor_bot_onboarding"]),E=(0,dt.Y3)(),v=(0,dt.jm)(h),y=E||v,b=null==(e=(0,af.q5)())?void 0:e.canEdit;f.useEffect(()=>{!y&&!t&&u&&g&&o&&s&&b&&n()},[y,t,n,u,g,o,s,b]),f.useEffect(()=>{t&&(v||!g)&&a()},[t,a,v,g]);let C=(0,eT.f)("cursor_bot_v2__basics_file__started_flow");if(f.useEffect(()=>{t&&h&&!C&&r(j.b({cursor_bot_v2__basics_file__started_flow:!0}))},[r,h,t,C]),!t||!g)return null;let w=()=>{h?r(j.b({cursor_bot_v2__basics_onboarded:!0})):r(j.b({cursor_bot_v2__no_basics_onboarded:!0})),a()};if(g===h2.YoureAllSet)return f.createElement(hi.J,{onPrimaryCtaClick:()=>{let e=(0,eU.xA)(i.getState(),uP.ai.NEW_TAB,"drafts",{from:uP.f6.CURSOR_BOT_END_MODAL,selectedView:i.getState().selectedView},a_._Y.DESIGN,void 0);r(uk.uM(e)),w()},onSecondaryCtaClick:w,onClose:w});if(g===h2.PanAndZoom)return f.createElement(ho.iF,{markComplete:w});if(d===hl.h0.PLAYING)return f.createElement(Ee,{cursorBotStateManager:c,currentTutorial:g});let T=()=>{g.previousTutorialCompleteUserFlag&&(p(hs.en.BACKWARD),r(j.b({[g.previousTutorialCompleteUserFlag]:!1})))},x=()=>{p(hs.en.FORWARD),r(j.b({[g.stepCompletedUserFlag]:!0}))};return f.createElement(g.TooltipElement,{onClickShowMe:()=>c.runTutorial(g),onClickNext:x,onClickClose:w,onClickBack:T,skip:m===hs.en.BACKWARD?T:x})}function Ee({cursorBotStateManager:e,currentTutorial:t}){return f.createElement(f.Fragment,null,f.createElement(hc.Yh,null),f.createElement(h6,{currentTutorial:t,stateManager:e}),f.createElement(h8,null),f.createElement(hr.Qe,null))}function Et(){let{uniqueId:e,show:t,isShowing:n,complete:a}=(0,n7.e)({overlay:an.a9B,priority:n8.N.OVERRIDING_MODAL}),l=(0,_.wA)(),r=(0,eT.f)("cursor_bot_v2__no_basics_file__played_frame_formatting"),i=(0,eT.f)("design_panel_step_shown"),o=(0,eT.f)("cursor_bot_v2__basics_file__started_flow"),s=(0,dt.Ai)(["exp_cursor_bot_onboarding"]),c=hh();(0,sD.E)(e,"create_frame",f.useCallback(()=>{!r||i||o||s||n||t()},[i,o,n,r,t,s]));let d=(0,S.md)(gz.a8),u=!!(0,eT.f)((0,gj.Of)(hl.wn.FORMAT_FRAME,!1).tutorialPlayedUserFlag),m=f.useMemo(()=>hQ(u,!1),[u]);if(!n)return null;if(d===hl.h0.PLAYING)return f.createElement(Ee,{cursorBotStateManager:c,currentTutorial:m});let p=()=>{l(j.b({design_panel_step_shown:!0})),a()};return f.createElement(m.TooltipElement,{onClickNext:p,onClickShowMe:()=>{c.runTutorial(m)},onClickClose:p,skip:p,isFollowUp:!0})}function En(){let{uniqueId:e,show:t,isShowing:n,complete:a}=(0,n7.e)({overlay:an.ENg,priority:n8.N.OVERRIDING_MODAL}),l=(0,_.wA)(),r=(0,eT.f)("cursor_bot_v2__no_basics_file__played_text_formatting"),i=(0,eT.f)("format_text_step_shown"),o=(0,eT.f)("cursor_bot_v2__basics_file__started_flow"),s=hh(),c=(0,dt.Ai)(["exp_cursor_bot_onboarding"]),[d,u]=f.useState(!1),m=(0,lh.VW)(),p=(0,_.d4)(e=>e.mirror.appModel.activeCanvasEditModeType);(0,sD.E)(e,"create_text",()=>{u(!0)}),f.useEffect(()=>{!r||i||o||c||n||!d||(null==m?void 0:m.type)!=="TEXT"||p!==ei.m1T.DESIGN_LAYOUT||n||t()},[m,d,n,t,p,r,i,o,c]);let g=!!(0,eT.f)((0,gj.Of)(hl.wn.FORMAT_TEXT,!1).tutorialPlayedUserFlag),h=f.useMemo(()=>h0(g,!1),[g]),E=(0,S.md)(gz.a8);if(!n)return null;if(E===hl.h0.PLAYING)return f.createElement(Ee,{cursorBotStateManager:s,currentTutorial:h});let v=()=>{l(j.b({format_text_step_shown:!0})),a()};return f.createElement(h.TooltipElement,{onClickNext:v,onClickShowMe:()=>{s.runTutorial(h)},onClickClose:v,skip:v,isFollowUp:!0})}function Ea(){let e=(0,n7.e)({overlay:an.CVA,priority:n8.N.OVERRIDING_MODAL}),t=(0,eT.f)("no_figma_basics_tooltips_design_panel_step"),n=(0,eT.f)("design_panel_step_shown"),a=(0,eT.f)("started_figma_basics_onboarding"),l=(0,_.wA)(),r=t&&!n&&!a;if((0,sD.E)(e.uniqueId,"create_frame",f.useCallback(()=>{r&&!e.isShowing&&e.show()},[e,r])),!e.isShowing)return null;let i=()=>{e.complete(),l(j.b({design_panel_step_shown:!0}))};return f.createElement(n9.rq,{onClose:i,title:(0,eN.tx)("tooltips_plus_onboarding.change_properties_in_the_design_panel"),description:(0,eN.tx)("tooltips_plus_onboarding.design_panel.description"),trackingContextName:"Tooltips+ > Reactive Follow Ups > Frame Formatting",isShowing:e.isShowing,targetKey:hq.W,arrowPosition:dk.F_.RIGHT_BODY,onTargetLost:i,emphasized:!0,disableHighlight:!0})}function El(){let e=(0,n7.e)({overlay:an.IQ,priority:n8.N.OVERRIDING_MODAL}),t=(0,eT.f)("no_figma_basics_tooltips_format_text_step"),n=(0,eT.f)("format_text_step_shown"),a=(0,eT.f)("started_figma_basics_onboarding"),l=(0,_.wA)(),r=!n&&t&&!a;if((0,sD.E)(e.uniqueId,"create_text",f.useCallback(()=>{r&&!e.isShowing&&e.show()},[e,r])),!e.isShowing)return null;let i=()=>{e.complete(),l(j.b({format_text_step_shown:!0}))};return f.createElement(n9.rq,{onClose:i,title:(0,eN.tx)("tooltips_plus_onboarding.text_formatting.title"),description:(0,eN.tx)("tooltips_plus_onboarding.text_formatting.description"),trackingContextName:"Tooltips+ > Reactive Follow Ups > Text Formatting",isShowing:e.isShowing,targetKey:h$.B,arrowPosition:dk.F_.RIGHT_BODY,onTargetLost:i,emphasized:!0,disableHighlight:!0})}var Er=n(502601),Ei=n(841563),Eo=n.n(Ei),Es=n(877645),Ec=n(971646);function Ed(e){let t;let{file:n,org:a,overlay:l}=e,r=(0,Es.B)(n,a.id),i=(0,f.useRef)(void 0),o=l.complete;if((0,f.useEffect)(()=>{var e;r&&i.current&&!Eo()(r.filePermissionsData,null==(e=i.current)?void 0:e.filePermissionsData)&&o(),i.current=r},[r,o]),!r)return null;let s=r.isBranch,c=r.branchMatchesRepo,d=r.linkExpiresAt,u=(0,ua.Ch)(r.filePermissionsData,e.org),m=(0,Ec.M3)((0,cF.A)(d)),p=!c&&s?(0,eN.tx)("link_expired_overlay.different_branch_permissions_header"):(0,eN.tx)("link_expired_overlay.header");return t=c?(0,eN.tx)("link_expired_overlay.same_branch_permissions_body",{formattedTimestamp:m,audience:u}):s?(0,eN.tx)("link_expired_overlay.different_branch_permissions_body",{formattedTimestamp:m,audience:u}):(0,eN.tx)("link_expired_overlay.body",{formattedTimestamp:m,audience:u}),f.createElement(n9.rq,{isShowing:l.isShowing,trackingContextName:"Link Expired Overlay",title:p,description:t,targetKey:at.v4,onClose:l.complete})}let Eu=(0,e3.bt)(e=>e.modalShown);function Em(e){var t;let n=(0,f.useRef)(null),a=(0,n7.e)({overlay:an.K_h,priority:n8.N.SECONDARY_MODAL}),l=(0,cC.sZ)(),r=(0,S.md)(af.yV),i=(null==(t=(0,S.md)(Eu))?void 0:t.type)===ul.jS;return((0,sD.E)(a.uniqueId,[tP.q2],()=>{l&&r&&!a.isShowing&&!i&&a.show()}),(0,f.useEffect)(()=>(a.isShowing?n.current=setTimeout(()=>{n.current=null,a.complete()},45e3):n.current&&clearTimeout(n.current),()=>{n.current&&clearTimeout(n.current)}),[a]),l&&r)?f.createElement(Ed,{overlay:a,org:l,file:r}):null}var Ep=n(453418);function Ef(e){return f.createElement("svg",{width:"64",height:"63",viewBox:"0 0 64 63",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("rect",{x:"16.75",y:"9.75",width:"29.6538",height:"43.5",rx:"14.8269",stroke:"var(--color-icon)",strokeWidth:"1.5"}),f.createElement("rect",{x:"27.1348",y:"18.4043",width:"8.88461",height:"15.8077",rx:"4.44231",fill:"var(--color-icon-brand)",fillOpacity:"whiteboard"===e.editorType?"0.7":"1",stroke:"var(--color-icon)",strokeWidth:"1.5"}),f.createElement("circle",{cx:"52.7863",cy:"7.78613",r:"6.21283",transform:"rotate(-45 52.7863 7.78613)",stroke:"var(--color-icon)",strokeWidth:"1.5"}),f.createElement("path",{d:"M57.1794 12.1797L62.3048 17.305",stroke:"var(--color-icon)",strokeWidth:"1.5"}),f.createElement("path",{d:"M52.7864 4.67871L52.7864 10.8915",stroke:"var(--color-icon)",strokeWidth:"1.5"}),f.createElement("path",{d:"M55.8928 7.78613L49.68 7.78613",stroke:"var(--color-icon)",strokeWidth:"1.5"}))}function E_(e){return f.createElement("svg",{width:"70",height:"63",viewBox:"0 0 70 63",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{clipPath:"url(#clip0_2769_43640)"},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M59.6328 10.3728V13.8403L57.4197 13.8392L60.4724 16.6418L63.523 13.8403H61.3729V10.3728H64.8466L64.8455 12.5395L67.6274 9.48573L64.8466 6.43085V8.63279H61.387V5.13676L63.5393 5.13785L60.4866 2.3418L57.4317 5.13676H59.6328V8.63279H56.1354V6.43085L53.3394 9.48573L56.1365 12.5395L56.1354 10.3728H59.6328Z",fill:"var(--color-icon)"}),f.createElement("rect",{x:"32.7745",y:"5.02452",width:"29.6538",height:"43.5",rx:"14.8269",transform:"rotate(30 32.7745 5.02452)",stroke:"var(--color-icon)",strokeWidth:"1.5"}),f.createElement("path",{d:"M47.1082 13.7744L50.1631 17.2744L52.6631 21.2744L52.9009 29.6727L47.6631 38.2744L38.9208 32.1445L43.6631 24.2744L43.6985 21.9253L42.5477 20.6685L47.1082 13.7744Z",fill:"var(--color-icon-brand)",fillOpacity:"whiteboard"===e.editorType?"0.7":"1"}),f.createElement("rect",{x:"32.7745",y:"5.02452",width:"29.6538",height:"43.5",rx:"14.8269",transform:"rotate(30 32.7745 5.02452)",stroke:"var(--color-icon)",strokeWidth:"1.5"}),f.createElement("rect",{x:"37.4408",y:"17.712",width:"8.88461",height:"15.8077",rx:"4.44231",transform:"rotate(30 37.4408 17.712)",stroke:"var(--color-icon)",strokeWidth:"1.5"})),f.createElement("defs",null,f.createElement("clipPath",{id:"clip0_2769_43640"},f.createElement("rect",{width:"70",height:"64",fill:"var(--color-icon)"}))))}let Eg="existing_user_pan_zoom--instruction--Q3Ost",Eh="existing_user_pan_zoom--instructionText--xoJ8M";function EE({dismissModal:e,onClickPrimaryCta:t}){let n=(0,Q.lg)();return f.createElement("div",null,f.createElement("div",{className:"existing_user_pan_zoom--announcementContent--EUu9P text--fontPos11--2LvXf text--_fontBase--QdLsd"},f.createElement("p",null,(0,eN.tx)("mouse_navigation_preferences_modal.existing_user.body",{filePref:f.createElement("span",{className:a8.cx.font11.fontMedium.lh16.$},(0,eN.tx)("mouse_navigation_preferences.existing_user.body.preferences"))})),f.createElement("div",{className:"existing_user_pan_zoom--zoomPanInstructions--tHKvv"},f.createElement("div",{className:Eg},f.createElement(Ef,{editorType:n}),f.createElement("p",{className:Eh},(0,eN.tx)("mouse_navigation_preferences_modal.existing_user.scroll_to_zoom"))),f.createElement("div",{className:Eg},f.createElement(E_,{editorType:n}),f.createElement("p",{className:Eh},(0,eN.tx)("mouse_navigation_preferences_modal.existing_user.right-click_to_pan")))),f.createElement("div",{className:"existing_user_pan_zoom--ctasRow--gB2IA"},f.createElement("div",{className:"existing_user_pan_zoom--ctas--OA-Ac"},f.createElement(so.nR,{onClick:e},(0,eN.t)("mouse_navigation_preferences_modal.existing_user.dismiss_button")),f.createElement(n5.$,{variant:"primary",onClick:t},(0,eN.t)("mouse_navigation_preferences_modal.existing_user.try_it"))))))}function Ev(e){let t=(0,_.wA)(),n=(0,f.useCallback)(()=>{et.Y5.triggerAction("set-right-click-pan-enabled"),(0,Ep.np)({navigationPreference:Ep.wc.MouseScrollToZoom,enabled:!0,eventOrigin:Ep.H7.Onboarding}),et.Y5.triggerAction("set-scroll-wheel-zoom-enabled"),(0,Ep.np)({navigationPreference:Ep.wc.RightClickDragToPan,enabled:!0,eventOrigin:Ep.H7.Onboarding})},[]);return f.createElement(cf.i,{step:{trackingContextName:"Pan Zoom Existing Onboarding: announcement modal",element:EE,modalType:s0.q3.DRAGGABLE,onboardingKey:at.tO,title:f.createElement("div",{className:a8.cx.font13.fontMedium.pl8.pt16.pb16.$},(0,eN.tx)("mouse_navigation_preferences_modal.existing_user.header")),headerClassName:"existing_user_pan_zoom--announcementModalHeader--si-tX",width:300,disableFooter:!0,hideStepCounter:!0,disableHighlight:!0},onClickPrimaryCta:()=>{e.onClickPrimaryCta(),n()},onClose:nf.lQ,dismissModal:e.onManualDismiss,dispatch:t})}function Ey(e){return f.createElement(n9.rq,{isShowing:e.isShowing,trackingContextName:"pan_zoom_pref_tooltip",onClose:e.onManualDismiss,targetKey:at.tO,emphasized:!0,title:(0,eN.tx)("mouse_navigation_preferences_tooltip.existing_user.header"),description:(0,eN.tx)("mouse_navigation_preferences_tooltip.existing_user.body",{filePref:f.createElement("span",{className:a8.cx.fontMedium.$},(0,eN.tx)("mouse_navigation_preferences.existing_user.body.preferences"))}),arrowPosition:ae.F_.BOTTOM,shouldCenterArrow:void 0})}let Eb=(0,ai.r1)("welcome_onboarded"),EC=(0,ai.r1)("orgs_onboarded");function Ew(){let e=(0,eb.aV)(),t=(0,af.XO)(),n=(0,S.md)(Eb),a=(0,S.md)(EC),l=(0,S.md)(ab.zo),r=(0,dt.jO)(),i=(0,S.md)(sR.Fy),o=(0,S.md)(sR.fu),s=(0,tM.UK)().scrollWheelZoom.getCopy()||(0,tM.UK)().rightClickPan.getCopy(),{complete:c,isShowing:d,show:u}=(0,n7.e)({overlay:an.oLh,priority:n8.N.DEFAULT_MODAL},[n,a,l,i,o]),m=(0,sJ.A)({numSteps:2,onComplete:c}),p=(0,f.useCallback)(()=>{d||(m.reset(),u({canShow:(e,n,a,l,i)=>{let o=t===a_._Y.WHITEBOARD&&a||t===a_._Y.DESIGN&&r,c=!C.Xb&&!C.aR,d=(0,cF.A)("2024-06-15"),u=(0,cF.A)().startOf("day").isBefore(d);return!s&&(e||n)&&o&&l&&c&&u&&i}}))},[t,r,d,m,u,s]);return(0,f.useEffect)(()=>{if(!e){let e=setTimeout(()=>p(),1e3);return()=>clearTimeout(e)}},[p,e]),f.createElement(sq.U,{currentStep:m.currentStep,isShowing:d},f.createElement(Ev,{isShowing:d,onManualDismiss:c,onClickPrimaryCta:m.next}),f.createElement(Ey,{isShowing:d,onManualDismiss:c}))}var ET=n(38329),Ex=n(960884),EN=n(384162),ES=n(385326),Ek=n(501972),EI=n(809073),EA=n(369394),EO=n(187882);function EL(e){return(0,nl.O)()?f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm1 0a4 4 0 1 1-8 0 4 4 0 0 1 8 0ZM7.5 8.5a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3Zm-2 2a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4Zm0 2a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4Zm2 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3Z",clipRule:"evenodd"})):f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 8a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3Zm-2 2a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4Zm0 2a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4Zm2 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3Zm9.5-2.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Zm1 0a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z",clipRule:"evenodd"}))}var EP=n(859905),ED=n(77763),ER=n(96796),EM=n(729074),EF=n(255942),EB=n(575288);function EU(e,t="0px"){let n="IntersectionObserver"in window,[a,l]=(0,f.useState)(!n);return(0,f.useEffect)(()=>{if(!n||!e.current)return;let a=e.current,r=new IntersectionObserver(([e])=>{l(e.isIntersecting)},{rootMargin:t});return r.observe(a),()=>{r.unobserve(a)}},[e,t,n]),a}var EH=n(492554),EG=n(525040),EV=n(313516),EK=n(366501),EW=n(531461),Ez=n(514736),Ej=n(448879);let EJ=(0,e4.eU)(new Map),EY=(0,lf.jz)(lw.LdP);function EX({children:e}){var t,n;let a=(0,aN.ut)(null==(t=ei.Ez5)?void 0:t.singleSlideView().isInSingleSlideView,!1),l=(0,aN.J2)(ei.Ez5.slideDeck().slideGrid),r=(0,EK.rY)(l),i=f.useMemo(()=>r.reduce((e,t,n)=>(e.set(t,n),e),new Map),[r]),o=function(){let e=(0,ay.wq)(),t=(0,e2.Xr)(EJ),[n,a]=f.useState(new Map),[l,r]=f.useState(new Map);return f.useEffect(()=>{let i=new Set,o=new Map;"loaded"===e.status&&e.data.forEach(e=>{let t=e.canvasPosition,n=l.get(e.id),a={commentCount:e.comments.filter(e=>!e.resolved_at).length,threadIds:[],hasUnread:e.comments.some(e=>!e.resolved_at&&e.isUnread)};o.set(e.id,a),t&&(!n||t.x!==n.x&&t.y!==n.y)&&i.add(e)}),i.forEach(e=>{var t,n;let l=null==(n=null==(t=e.comments[0])?void 0:t.client_meta)?void 0:n.node_id;if(!l||!e.canvasPosition)return;let i=lE.q.instance.get(l),o=i?i.findContainingSlideOrSelf():EV.K8;o!==EV.K8&&e.canvasPosition&&(r(t=>new Map(t.set(e.id,e.canvasPosition))),a(t=>new Map(t.set(e.id,o))))});let s=new Map;n.forEach((e,t)=>{let n=o.get(t);if(!n)return;let{commentCount:a,hasUnread:l}=n,r=s.get(e),i={commentCount:((null==r?void 0:r.commentCount)??0)+a,threadIds:[...(null==r?void 0:r.threadIds)??[],t],hasUnread:(null==r?void 0:r.hasUnread)||l};s.set(e,i)}),t(s)},[t,l,n,e.data,e.status]),n}(),s=(0,_.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),c=(0,tM.qw)(),d=!(0,EO.Ye)(),u=(0,tM.dP)(),m=f.useCallback(e=>{var t,n;let a=o.get(e.id);if(a)return a;let l=null==(n=null==(t=e.comments[0])?void 0:t.client_meta)?void 0:n.node_id;if(!l)return EV.K8;let r=lE.q.instance.get(l);return r?r.findContainingSlideOrSelf():EV.K8},[o]),{xDelta:p,yDelta:g}=(0,Ej.m)(),h=f.useMemo(()=>({xDelta:p,yDelta:g}),[p,g]),E=f.useMemo(()=>{let e=[EW.mW.RESOLVED,EW.mW.YOURS];return a&&e.push(EW.mW.CURRENT_SLIDE),e},[a]),v=f.useMemo(()=>[EW.qN.CREATION_DATE,EW.qN.UNREAD,EW.qN.SLIDE],[]),b=(0,_.d4)(e=>e.mirror.appModel.currentPage),C=f.useContext(fP.kw),w=(0,aN.ut)(null==(n=ei.Ez5)?void 0:n.singleSlideView().focusedSlideId,""),T=(0,EK.po)(),x=f.useCallback(e=>{var t;let n=e&&b?null==(t=C.getCommentDestinationForCanvasPosition(e,b))?void 0:t.nodeId:void 0;if(!n)return!1;let a=lE.q.instance.get(n),l=a?a.findContainingSlideOrSelf():EV.K8;return w&&(0,EV.fn)(w)?l!==w:!(0,EV.fn)(l)},[b,w,C]),N=f.useCallback((e,t)=>{let n=t?lE.q.instance.get(t):void 0,a=n?n.findContainingSlideOrSelf():EV.K8,l=a&&(0,EV.fn)(a)?a:ei.glU.getSlideAtPosition(e.x,e.y);return l?ei.Egt.getBoundsForNode(l):null},[]),S=f.useCallback(e=>{let t=m(e),n=i.get(t);return void 0===n||t===EV.K8?(0,eN.t)("comments.slide"):(0,eN.t)("comments.slide_number",{orderNum:n+1})},[m,i]),k=f.useMemo(()=>!!a,[a]),I=f.useCallback(e=>{if(!a)return()=>{};let t=m(e);return t!==EV.K8?()=>{T(t)}:()=>{}},[m,T,a]),A=f.useMemo(()=>({slide:(e,t)=>{let n=1/0,a=m(e),l=m(t),r=i.get(a)??n,o=i.get(l)??n;return r!==o?r-o:Date.parse(t.comments[0].created_at)-Date.parse(e.comments[0].created_at)}}),[m,i]),O=(0,aN.J2)(ei.Ez5.editorPreferences().speakerNotesHeight),L=f.useMemo(()=>{let e=0,t=0,n=0;return s&&(e+=EY,t+=c,a&&(e+=O+ei.Ez5.singleSlideView().dragHandleTotalHeight()),d&&(n+=u)),{maxHeightDelta:-e,minBottomMarginDelta:e,minLeftMarginDelta:n,minRightMarginDelta:t}},[a,c,d,u,s,O]),P=f.useMemo(()=>{if(s)return{paddingRight:c}},[c,s]),D=f.useMemo(()=>({showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,disableZoomViewportOnCommentSelection:k,clusterBy:(0,y.kc)().comments_corner_cluster?"slide":"page",orphanedBy:"non_slide_anchors",filterBy:"non_slide_anchors",sidebarFilters:E,sidebarSorts:v,sidebarModesDisabled:!0,dockPositionAdjustment:h,isCommentingDisabledAtPosition:x,commentDisabledPositionBellMessage:(0,eN.t)("comments.comments_can_only_be_placed_on_slides"),calculateSelectionCommentContainerBounds:N,getParentName:S,getOnCommentSelect:I,sortComparatorOverrides:A,commentPositionPaddingAdjustment:P,draggableModalBoundsAdjustment:L}),[k,E,v,h,x,N,S,I,A,P,L]);return f.createElement(Ez.a.Provider,{value:D},e)}var Eq=n(464560);function EZ(e){let{slideId:t,carouselSlidesBySlideId:n}=e,a=(0,S.md)(EJ),l=a.get(t),r=(0,_.d4)(e=>e.mirror.appModel.showComments),i=(0,EG.Vi)(),o=f.useCallback(()=>{r||et.Y5.triggerAction("toggle-show-comments",{source:"comments_sidebar_setting"}),i||et.Y5.triggerAction("set-tool-comments",{source:"comments_sidebar_setting"})},[r,i]);if(!(t in n))return null;let s=n[t];if(!l&&!s.isCollapsed)return null;let c=(null==l?void 0:l.commentCount)||0,d=(null==l?void 0:l.hasUnread)||!1;if(s.isCollapsed){let e=s.children;for(let t=0;t<e.length;t++){let n=e[t],l=a.get(n.guid);n.children&&e.concat(n.children),l&&(c+=l.commentCount,d=d||l.hasUnread)}}return c?f.createElement("div",{className:d?"carousel_comment--carouselComment--X2WAd":"carousel_comment--carouselCommentRead--ecFSn carousel_comment--carouselComment--X2WAd"},f.createElement("div",{className:"carousel_comment--commentCount--8Fpe6"},c),f.createElement(a2.B,{className:"carousel_comment--carouselCommentPin--yBJwH",svg:Eq.A,onClick:o})):null}var EQ=n(953289),E$=n(491679),E0=n(195601),E1=n(689980);let E2=e=>{try{return Array.from(e.componentControls).find(e=>e.isDragging)}catch(e){(0,o2.$D)(o5.e.SLIDES,e);return}},E5=e=>{try{return e.panSession.history[0]}catch(e){(0,o2.$D)(o5.e.SLIDES,e);return}},E4="carousel--addSlideButton--KLSOp",E3="carousel-add-slide-button";function E6({layersActive:e}){let t="dark"===(0,ga.DP)(),n=["translate(0, 7px) scale(0.91, 0.83)","translate(0, 15px) scale(0.84, 0.79)"],a=1===e?["var(--elevation-100-canvas)"]:["var(--elevation-200-canvas)","var(--elevation-100-canvas)"],l=t?"#5C5C5C":"var(--color-bg, var(--fallback-color-bg))",r=[`linear-gradient(rgba(0,0,0,0) 0%, rgba(0,0,0,0.12) 89%, rgba(0,0,0,0) 98%) ${l}`,l];return f.createElement(f.Fragment,null,[2,1].map(t=>f.createElement("div",{key:"outlineui"+t,className:a8.cx.bRadius3.eventsNone.absolute.zIndexMinus1.elevation100.borderBox.top0.wFull.$,style:dA.sx.add({transitionProperty:"transform, opacity",transitionDuration:"0.1s, 0.001s",transitionDelay:"0s, 0.2s",aspectRatio:"16 / 9",transform:"translate(0, 0) scale(0)",transformOrigin:"center bottom",opacity:0}).if(e>=t,{transform:n[t-1],opacity:1,transitionDelay:"0s, 0s",boxShadow:a[t-1],background:r[t-1]}).$})))}function E7({recordingKey:e}){let t=(0,aN.J2)(ei.Ez5.slideDeck().slideGrid),n=(0,eb.p8)("isReadOnly"),[a,l]=(0,f.useState)(""),r=(0,aN.J2)((0,tM.UK)().showGuids),{carouselSlidesBySlideId:i,slideGuids:o,toggleCollapsed:s,expandParent:c}=(0,EK.WW)(t),{selectedSlideIds:d,onMouseDownSlide:u,onMouseUpSlide:m}=(0,EK.A8)(o);(0,f.useLayoutEffect)(()=>{d.forEach(e=>c(e))},[d,c]);let{scrollerRef:p,onScroll:_,dragControls:g,onDrag:h,onDragStart:E,onDragEnd:v}=function(){let e=(0,E1.m)(),t=(0,f.useRef)(null),n=(0,f.useRef)(),a=(0,f.useRef)(),l=(0,f.useRef)(),r=(0,f.useRef)(),i=(0,f.useRef)(!1),o=(0,f.useCallback)(e=>{if(i.current||!r.current)return;let t=E5(r.current),a=e.target;if(!t||!a||void 0===n.current||void 0===l.current)return;let o=a.scrollTop-n.current;t.y=l.current-o},[]),s=(0,f.useCallback)((e,n)=>{if(i.current)return;let l=t.current;if(!l)return;let r=l.getBoundingClientRect(),o=n.point.y,s=e.target;if(!(s instanceof Element))return;let c=s.closest("[draggable]"),d=null==c?void 0:c.parentElement;o<r.top+50&&(c!==(null==d?void 0:d.firstElementChild)||l.scrollTop>0)?l.scrollTop-=5:o>r.bottom-50&&c!==(null==d?void 0:d.lastElementChild)&&l.scrollTop+l.clientHeight<(a.current??l.scrollHeight)&&(l.scrollTop+=5)},[]),c=(0,f.useCallback)(()=>{let o=t.current,s=E2(e);if(!o||!s){i.current=!0;return}r.current=s,n.current=o.scrollTop,a.current=o.scrollHeight;let c=E5(s);if(!c){i.current=!0;return}l.current=c.y,i.current=!1},[e]);return{scrollerRef:t,onScroll:o,dragControls:e,onDrag:s,onDragStart:c,onDragEnd:(0,f.useCallback)(()=>{n.current=void 0,a.current=void 0,l.current=void 0,r.current=void 0},[])}}(),{onMouseDown:y,onMouseMove:b,onSlideReorder:C,isDraggingSlides:w,isClickingSlides:T,detachedSlideGuids:x,indentSelectionBy:N}=(0,EK.EL)(d,o,a,i,t,n),S=(0,aN.J2)(ei.Ez5.singleSlideView().isCarouselFocused),k=(0,nT.B)(nz.U3),I=e=>{let{clientX:t,clientY:n}=e;k.show({data:{clientX:t,clientY:n}})},A=e=>{var t;let n=(null==(t=i[e])?void 0:t.indent)||0;return(e===a&&w?N+n:n)<=0?0:1},O=ei.Ez5.singleSlideView().singleSlideThumbnailPadding(),L=(0,e2.Xr)(aB.uY),P=(0,f.useCallback)((e,t)=>{e.isIntersecting?L(e=>[...e,t]):L(e=>e.filter(e=>e!==t))},[L]),D=(0,EH.B)(o,P,{threshold:.5}),R=(w?x:o).filter(e=>!!i[e]&&!!D.get(e)),[M,F,B]=(0,EB.J)(!1),U=(0,f.useRef)(S);U.current=S;let H=(0,f.useCallback)(e=>{if(p.current){if(M.current&&U.current)e.scrollIntoView({block:"nearest",inline:"nearest"});else{let t=e.getBoundingClientRect(),n=p.current.getBoundingClientRect();(t.top<n.top||t.bottom>n.bottom)&&(p.current.scrollTop=Math.max(e.offsetTop-1.5*t.height,0)),B(!0)}}},[M,B,p]);return f.createElement(f.Fragment,null,n?null:f.createElement("div",{className:a8.cx.wFull.flex.gap8.py8.bb1.colorBorder.bSolid.borderBox.$,style:{paddingLeft:`${O}px`,paddingRight:`${O}px`}},f.createElement(vn,{recordingKey:e})),f.createElement(EM._.Group,{className:nb()(a8.cx.overflowYScroll.flexGrow1.flex.flexColumn.justifyStart.itemsEnd.pr2.py8.borderBox.wFull.$,"carousel--hideScrollbar--Y-9SW"),style:{paddingLeft:`${O}px`,paddingRight:`${O}px`,overflowAnchor:"none",scrollBehavior:F&&!w?"smooth":void 0},values:w?x:o,onContextMenu:e=>{e.stopPropagation(),e.preventDefault(),I(e)},onMouseUp:e=>{e.ctrlKey&&I(e)},"data-test-id":"slides-carousel",onMouseMove:b,onReorder:C,ref:p,onScroll:_,layoutScroll:!0,axis:"y"},R.map((t,o)=>f.createElement(ve,{key:t,ref:D.get(t),guid:t,reorderScrollerRef:p,carouselSlidesBySlideId:i,isDraggingSlides:w,isHovered:t===a,isCarouselFocused:S,isSelected:d.includes(t),firstOfSelection:!d.includes(R[o-1]),lastOfSelection:!d.includes(R[o+1]),indentAmount:20*A(t),selectedSlideCount:d.length,guidToDisplayForDebugging:r?t:null,onMouseDown:e=>{l(t),u(e,t),y(e)},onMouseUp:e=>m(e,w,T,t),onClickCaret:()=>{ei.Ez5.singleSlideView().isCarouselFocused.set(!0),s(t)},onScrollToSlide:H,disabled:n,recordingKey:n_.Pt(e,"slide",o),dragControls:g,onDrag:h,onDragStart:E,onDragEnd:v}))))}function E8({retryCount:e=0,recordingKey:t}){return f.createElement(l7.tH,{boundaryKey:"SlidesSSVCarousel",fallback:e<3?f.createElement(E8,{retryCount:e+1,recordingKey:t}):f.createElement(E9,null)},f.createElement(E7,{recordingKey:t}))}function E9(){return f.createElement("div",{className:a8.cx.p16.$},f.createElement("div",{className:a8.cx.textBodyMedium.$},(0,eN.tx)("slides.carousel.error")),f.createElement("div",{className:a8.cx.mt4.$},(0,eN.tx)("slides.carousel.error_solution")))}let ve=(0,f.forwardRef)(function({guid:e,carouselSlidesBySlideId:t,isDraggingSlides:n,isHovered:a,isCarouselFocused:l,isSelected:r,firstOfSelection:i,lastOfSelection:o,indentAmount:s,selectedSlideCount:c,guidToDisplayForDebugging:d,onMouseDown:u,onMouseUp:m,onClickCaret:p,onScrollToSlide:_,disabled:g,recordingKey:h,dragControls:E,onDrag:v,onDragStart:y,onDragEnd:b,reorderScrollerRef:C},w){let{number:T,isCollapsed:x,children:N}=t[e],S=(0,f.useRef)(null),k=EU(C);(0,f.useEffect)(()=>{S.current&&k&&r&&_(S.current)},[r,k,_,C,c]);let I=n&&a,A=n&&r&&!a,O=r&&!I,L=r?l?"var(--color-text-design)":"var(--color-text)":"var(--color-text-secondary)",P=0;n&&r&&c>=2?P=c>=3?2:1:x&&N.length>=1&&(P=N.length>1?2:1);let D=N.length&&!I?x?"COLLAPSED":"EXPANDED":void 0,R=ei.Ez5.singleSlideView().singleSlideThumbnailNumberWidth(),M=ei.Ez5.slideAnimationBindings().getSlideTransition(e).type!==ei.v$l.NONE;return f.createElement(f.Fragment,null,I?f.createElement("div",{className:a8.cx.colorBgDesign.h0.p1.bRadius3.mr8.$,style:{width:`calc(100% - 24px - ${s}px - ${R}px)`}}):null,f.createElement(EM._.Item,{ref:(0,EF.A)(w,S),value:e,className:a8.cx.wFull.relative.$,style:dA.sx.add({scrollMargin:"8px"}).$,transition:{type:"spring",duration:.25,bounce:0},dragConstraints:{left:-50,right:50},dragElastic:.1,drag:!g,"data-testid":"ssv-slide",dragControls:E,onDrag:v,onDragStart:y,onDragEnd:b,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":N.length>0&&x?(0,eN.t)("slides.carousel.slide_stack_tooltip",{min:T,max:N[N.length-1].number}):void 0},f.createElement(a7.GG,{className:a8.cx.eventsAuto.bgTransparent.relative.wFull.zIndex0.opacity1.if(I,a8.cx.zIndex1).if(A,a8.cx.opacity0).$,style:dA.sx.relative.if(O,{backgroundColor:l?"var(--color-border-design)":"var(--color-bg-tertiary)"}).if(i,{borderTopLeftRadius:"5px",borderTopRightRadius:"5px"}).if(o,{borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px"}).$,onMouseDown:u,onMouseUp:m,"data-fullscreen-intercept":!0,recordingKey:h},f.createElement("div",{className:a8.cx.inlineFlex.bgTransparent.p8.bRadius5.wFull.borderBox.$,style:{paddingBottom:`${8+7.5*P}px`}},f.createElement("div",{className:a8.cx.flex.flexColumn.itemsStart.gap16.$,style:{...dA.sx.add({width:`${R}px`,marginRight:`${ei.Ez5.singleSlideView().singleSlideThumbnailNumberMargin()}px`,marginLeft:`${s}px`}).$}},f.createElement("span",{className:a8.cx.alignLeft.font13.if(I,a8.cx.opacity0).$,style:{...dA.sx.add({color:L}).if(T>99,{marginLeft:"5px",width:`${R}px`,direction:"rtl"}).$}},T)),f.createElement("div",{className:a8.cx.eventsNone.wFull.flex.relative.$},d?f.createElement("div",{className:a8.cx.absolute.top0.left0.$},d):null,f.createElement(vt,{guid:e}),f.createElement(E6,{layersActive:P}),M?f.createElement("div",{className:nb()(a8.cx.absolute.colorBg.b1.bRadius2.$,"carousel--transitionIndicator--JsSwP")},f.createElement("span",null,f.createElement(EL,null))):null),f.createElement(EZ,{slideId:e,carouselSlidesBySlideId:t}))),D?f.createElement(a7.GG,{onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),p()},className:a8.cx.bgTransparent.absolute.$,style:{justifySelf:"center",transition:"transform 0.25s",transform:"EXPANDED"===D?`rotate(0deg) translateX(${T>9?"2px":"0"})`:"rotate(-90deg) translateX(0)",top:"28px",left:"0"},recordingKey:n_.Pt(h,"caret")},f.createElement(EP.k,{style:{"--color-icon":L}})):null))});function vt({guid:e}){let t=(0,E0.p)(e),n=lE.q.instance.get(e),a=null==n?void 0:n.isSkippedSlide;return f.createElement(f.Fragment,null,a?f.createElement("div",{className:a8.cx.wFull.hFull.flex.bRadius5.justifyCenter.itemsCenter.absolute.zIndex1.bgWhite__DEPRECATED.$},f.createElement(ED.j,null)):null,f.createElement("img",{src:t,alt:"",className:a8.cx.wFull.hAuto.bRadius5.$,style:{background:"var(--color-fsCanvasDefaultFill)",outline:"1px solid var(--color-bordertranslucent)",aspectRatio:"16 / 9"}}))}let vn=f.forwardRef(function({recordingKey:e},t){let{toggleTemplatePicker:n,closeTemplatePicker:a}=(0,E$.uu)(),l=(0,S.md)(EQ.Ei),r=o4.nc.user("ssv-carousel",()=>{a();let e=lE.q.instance;(0,EK.oY)(e,"carousel_add_slide_button")});return f.createElement("div",{"data-element-target":E3,className:a8.cx.wFull.h24.flex.justifyCenter.$},f.createElement(a7.GG,{forwardedRef:t,className:nb()(a8.cx.if(l,a8.cx.colorBgHover,a8.cx.colorBg).flex.justifyCenter.itemsCenter.flexGrow1.borderBox.hFull.eventsAll.colorBorder.b1.pl24.$,E4),style:{borderRadius:"6px 0 0 6px",borderRightWidth:"0"},onClick:n,"data-onboarding-key":aD.MB,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("slides.carousel.add-slide-from-template"),"data-fullscreen-intercept":!0},f.createElement("p",{className:a8.cx.noWrap.$},(0,eN.t)("slides.carousel.new_slide")),f.createElement(ER.O,null)),f.createElement(a7.GG,{className:nb()(a8.cx.colorBorder.b1.flex.itemsCenter.$,E4),style:{borderRadius:"0 6px 6px 0"},onClick:r,"data-testid":"addSlideButton",recordingKey:(0,n_.Pt)(e,"addSlideButton"),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("slides.carousel.add-blank-slide"),"data-tooltip-shortcut-key":"create-slide","data-fullscreen-intercept":!0},f.createElement(nu.e,null)))});var va=n(421757);let vl="toolbar-add-slide-button";function vr(){let e=(0,S.md)(aB.o6),{toggleTemplatePicker:t}=(0,E$.uu)();return e?null:f.createElement(va.$n,{onClick:t,iconPrefix:f.createElement(nu.e,null),variant:"secondary",recordingKey:"toolbar.addSlideButton","data-testid":"addSlideButton","data-element-target":vl,"data-onboarding-key":aD.MB,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("slides.carousel.add-slide-from-template"),"data-fullscreen-intercept":!0},(0,eN.tx)("slides.carousel.new_slide"))}var vi=n(676938),vo=n(347127),vs=n(976999),vc=n(154483),vd=n(864089),vu=n(75224),vm=n(798099),vp=n(128765),vf=n(141123),v_=n(232205),vg=n(825330),vh=n(555207);let vE="slides_template_ui--searchBar--jlYPZ",vv="slides_template_ui--separator--ptcuN",vy="slides_template_ui--startFromScratchIcon--bKGMJ",vb="slides_template_ui--startFromScratchButton--7P1qo",vC="slides_template_ui--footer--4g8kc",vw="slides_template_ui--grid--FCSGf",vT=(0,vc.fv)();function vx({module:e}){let t=(0,E$.r$)(),n=(0,e2.Xr)(EQ.VZ),a=(0,e2.Xr)(EQ.Ei),l=(0,S.md)(aB.v2),r=(0,af.tS)(),i=(0,_.wA)(),o="insert-slide-module",s=o4.nc.user(o,(n,a,l)=>{(0,E$.CH)({module:e,viewType:t,getGridCoord:ei.Ez5.getInsertGridCoord,dispatch:i})(n,a,l)}),{onInsertableResourcePointerDown:c,dragState:d}=(0,v_.j)({resource:e,isList:!1,sourceForTracking:"slides-templates-panel",clickToInsert:!0,insertAsChildOfCanvas:!0,insertedItemsCallback:s,afterSuccessfulInsert:()=>{a(!1),n(!1)},selectAfterInsert:!1}),u=o4.nc.user(o,c);return f.createElement("div",{className:nb()(a8.cx.flex.alignCenter.justifyCenter.gap8.$,{"slides_template_tile--moduleCoverCardPicker--IvByg slides_template_tile--_moduleCoverCard--6hqG0 slides_template_tile--moduleCoverCardPickerSize--AAEPk":t===E$.Ji.PICKER,"slides_template_tile--moduleCoverCardModal--llMPw slides_template_tile--_moduleCoverCard--6hqG0 slides_template_tile--moduleCoverCardModalSize--1-jSe":t===E$.Ji.OVERLAY_MODAL},{"slides_template_tile--gridViewHover--dEaa-":!l})},f.createElement(vf.q,{dragState:t===E$.Ji.PICKER?d:null,isList:!1}),f.createElement(vN,{key:e.node_id,thumbnailUrl:e.thumbnail_url,onPointerDown:u,onClick:()=>(0,$.Cu)({moduleId:e.id,moduleFileKey:vT(e),fileKey:r,name:"slide_template_tile",productType:"slides"})}))}function vN({name:e,thumbnailUrl:t,thumbnailWidth:n,thumbnailHeight:a,onPointerDown:l,onClick:r,showLoadingSpinner:i=!1,disabled:o=!1}){return f.createElement(a7.D8,{className:a8.cx.flex.flexColumn.itemsStart.hFull.wFull.$,onPointerDown:o?void 0:l,onClick:o?void 0:r,"data-testid":"insertableSlideTile"},f.createElement("div",{className:a8.cx.relative.overflowHidden.flex.justifyCenter.itemsCenter.borderBox.b1.bRadius5.colorBorder.$,style:{width:n??"100%",height:a??"100%"}},i&&f.createElement(re.kt,{className:"slides_template_tile--loadingSpinner--i0gem"}),f.createElement(vd.o,{onDragStart:vm.wo,className:"slides_template_tile--tileImage--xQ9Rj",src:t,alt:e,loading:"lazy"})),e&&f.createElement("div",{className:a8.cx.font11.fontInter.colorTextSecondary.$},e))}function vS({text:e,dataTestId:t,onPointerDown:n,imageContainerContent:a,additionalClassname:l,showSelectedState:r=!1}){let i=(0,E$.r$)();return f.createElement("div",{"data-testid":t,className:nb()(a8.cx.p8.$,l)},f.createElement(vg.sU,{image:f.createElement("div",{role:"presentation",onPointerDown:n},f.createElement(vg.WM,{className:nb()({"slides_template_tile--templateCoverCardLarge--aUi8S slides_template_tile--_templateCoverCard--owOUm slides_template_tile--templateCoverCardLargeSize--lWeyZ":i===E$.Ji.PICKER,"slides_template_tile--templateCoverCardMedium--D1xOJ slides_template_tile--_templateCoverCard--owOUm slides_template_tile--templateCoverCardMediumSize--dZ4FH":i===E$.Ji.OVERLAY_MODAL,"slides_template_tile--selectedTemplateTile---grt1":r}),removeBorder:!0,backgroundColor:"none"},a)),bottomRow:f.createElement(vg.dY.MetadataContainer,{onClick:n},f.createElement(vg.dY.TextMetadataLayout,{primaryText:f.createElement("div",{className:a8.cx.font11.colorText.ellipsis.overflowHidden.$},e)})),bottomRowClassName:nb()({"slides_template_tile--templateCoverBottomRowLarge--jYVZ6":i===E$.Ji.PICKER,"slides_template_tile--templateCoverBottomRowMedium--jnOVs":i===E$.Ji.OVERLAY_MODAL})}))}function vk({template:e,parentView:t}){return(0,S.md)(EQ.bY).type===EQ.Vf.TEMPLATE_PICKER?f.createElement(vI,{template:e}):f.createElement(vA,{template:e,parentView:t})}function vI({template:e}){let{name:t,imageUrl:n,libraryKey:a}=(0,vp.fG)()(e),[l,r]=(0,S.fp)(EQ.ux);if(!a)return null;let i=()=>r((0,vu.l)(a));return f.createElement(vS,{text:t,dataTestId:"slidesTemplateCoverTile",onPointerDown:i,imageContainerContent:f.createElement(vN,{key:t,thumbnailUrl:n,onPointerDown:i}),additionalClassname:"slides_template_tile--hoverableTemplateTile--meERX",showSelectedState:l===(0,vu.l)(a)})}function vA({template:e,parentView:t}){let{name:n,imageUrl:a,libraryKey:l}=(0,vp.fG)()(e),r=(0,e2.Xr)(EQ.bY);if(!l)return null;let i=e=>{e.stopPropagation(),l&&((0,$.Cu)({fileKey:l,name:"template_cover_tile",productType:"slides"}),r({type:EQ.Vf.TEMPLATE,libraryKey:l,parentView:t}))};return f.createElement(vS,{text:n,dataTestId:"slidesTemplateCoverTile",onPointerDown:i,imageContainerContent:f.createElement(f.Fragment,null,f.createElement(vg.Wh.Cover,null,f.createElement("div",{className:"slides_template_tile--hoverOverlay--m7upM"})),f.createElement(vg.Wh.Center,null,f.createElement(vh.i,{insertTemplate:nf.lQ,isInsertingTemplate:!1,shouldUseOpaqueBackground:!0},(0,eN.tx)("slides.templates.view_template"))),f.createElement(vN,{key:n,thumbnailUrl:a,onPointerDown:i}))})}function vO(){let{maybeUseLightTemplateOnDismiss:e}=(0,E$.vN)();return f.createElement(vS,{text:(0,eN.t)("slides.templates.start_from.scratch.title"),dataTestId:"startFromScratchCoverTile",onPointerDown:e,imageContainerContent:f.createElement("div",{className:nb()(vb,a8.cx.flex.itemsCenter.justifyCenter.wFull.hFull.borderBox.bRadius5.$)},f.createElement("span",{className:vy},f.createElement(nu.e,null)))})}let vL=(0,vc.fv)();function vP({modules:e}){let{onShowSeparatorScroll:t}=(0,E$.gH)();if(!e.length)return null;let n=(0,y.kc)().ds_use_lib_keys?e[0].library_key:vL(e[0]);return f.createElement(i6.P,{className:a8.cx.px16.hFull.$,onScroll:t},f.createElement(vM,{key:n},e.map(e=>f.createElement(vx,{key:e.id,module:e}))))}function vD({children:e}){return f.createElement("div",{className:a8.cx.flex.flexWrap.pb8.gap0.$},e)}function vR({title:e,children:t,onSeeAllClick:n}){return f.createElement(f.Fragment,null,f.createElement("div",{className:a8.cx.flex.justifyBetween.alignCenter.pt16.pb8.px8.$},f.createElement("div",{className:a8.cx.font13.colorText.fontSemiBold.fontInter.$},e),n&&f.createElement("button",{className:nb()("slides_template_grid--seeAllButton--sShht",a8.cx.font11.fontMedium.fontInter.$),onClick:n},(0,eN.tx)("slides.templates.view_type.see_all"))),f.createElement(vD,null,t))}function vM({children:e}){return f.createElement("div",{className:a8.cx.flex.flexWrap.pb16.gap8.$},e)}let vF="loading_state--container--ouiBF";function vB(){let e=(0,E$.r$)(),t=nb()({"slides_template_tile--templateCoverCardMediumSize--dZ4FH":e===E$.Ji.OVERLAY_MODAL,"slides_template_tile--templateCoverCardLargeSize--lWeyZ":e===E$.Ji.PICKER},a8.cx.m8.$);return f.createElement(vs.Qp,{className:t,animationType:vs.JR.LIGHT_SHIMMER})}function vU(){let e=(0,E$.r$)(),t=nb()({"slides_template_tile--moduleCoverCardPickerSize--AAEPk":e===E$.Ji.PICKER,"slides_template_tile--moduleCoverCardModalSize--1-jSe":e===E$.Ji.OVERLAY_MODAL});return f.createElement(vs.Qp,{className:t,animationType:vs.JR.LIGHT_SHIMMER})}function vH(){return f.createElement(vs.Qp,{className:nb()("loading_state--title--YIpQO",a8.cx.m8.$),animationType:vs.JR.LIGHT_SHIMMER})}function vG(){return f.createElement("div",{className:"loading_state--loadingStateContainer--dcv3D"},f.createElement(vH,null),f.createElement(vD,null,f.createElement(vB,null),f.createElement(vB,null),f.createElement(vB,null),f.createElement(vB,null)),f.createElement(vH,null),f.createElement(vD,null,f.createElement(vB,null),f.createElement(vB,null),f.createElement(vB,null),f.createElement(vB,null)),f.createElement(vH,null),f.createElement(vD,null,f.createElement(vB,null),f.createElement(vB,null),f.createElement(vB,null),f.createElement(vB,null)))}function vV(){return f.createElement("div",{className:vF},f.createElement(vD,null,Array.from({length:14}).map((e,t)=>f.createElement(vB,{key:t}))))}function vK(){return f.createElement("div",{className:vF},f.createElement(vM,null,Array.from({length:16}).map((e,t)=>f.createElement(vU,{key:t}))))}function vW(){return f.createElement("div",{className:nb()(vw,a8.cx.px16.pb16.pt8.gap16.overflowHidden.hFull.$)},f.createElement(vz,null),f.createElement(vz,null),f.createElement(vz,null),f.createElement(vz,null),f.createElement(vz,null),f.createElement(vz,null),f.createElement(vz,null),f.createElement(vz,null),f.createElement(vz,null),f.createElement(vz,null),f.createElement(vz,null))}function vz(){return f.createElement("div",{className:a8.cx.flex.flexColumn.gap4.$},f.createElement(vs.Qp,{className:"loading_state--file--g4dxg",animationType:vs.JR.LIGHT_SHIMMER}),f.createElement(vs.Wi,{className:"loading_state--fileTitle--ATrhd",animationType:vs.JR.LIGHT_SHIMMER}),f.createElement(vs.Wi,{className:"loading_state--fileSubtitle--9Lkb7",animationType:vs.JR.LIGHT_SHIMMER}))}var vj=n(32863),vJ=n(767129),vY=n(13583);function vX({onClick:e}){return f.createElement(vJ.K,{"aria-label":(0,eN.t)("common.close"),onClick:e},f.createElement(vY.L,null))}function vq({searchQuery:e,setSearchQuery:t,showCloseButton:n,placeholder:a}){let{canDismiss:l,maybeUseLightTemplateOnDismiss:r}=(0,E$.vN)();return f.createElement("div",{className:a8.cx.flex.flexRow.itemsCenter.pl8.pr12.py8.gap12.$},f.createElement(vj.IW,{className:nb()(vE,a8.cx.wFull.borderBox.bRadius6.colorBgSecondary.$),query:e,clearSearch:()=>t(""),onChange:t,placeholder:a,focusOnMount:!0,withSmallXIcon:!0}),n&&l&&f.createElement(vX,{onClick:r}))}function vZ({searchQuery:e,setSearchQuery:t,onBack:n,showCloseButton:a,placeholder:l}){let{canDismiss:r,maybeUseLightTemplateOnDismiss:i}=(0,E$.vN)();return f.createElement("div",{className:nb()(a8.cx.flex.flexRow.itemsCenter.pl8.pr12.py8.gap12.$)},f.createElement(vj.RE,{className:nb()(vE,a8.cx.wFull.borderBox.bRadius6.colorBgSecondary.$),query:e,clearSearch:()=>t(""),onChange:t,onBack:n,placeholder:l,focusOnMount:!0,withSmallXIcon:!0}),a&&r&&f.createElement(vX,{onClick:i}))}function vQ({icon:e,title:t,subtitle:n}){return f.createElement(f.Fragment,null,f.createElement("div",{className:a8.cx.flex.flexRow.gap6.lh24.itemsCenter.$},e,f.createElement("h1",{className:a8.cx.colorText.fontInter.font14.fontNormal.fontSemiBold.spacingCompact.$},t)),f.createElement("h2",{className:a8.cx.colorTextSecondary.textBodyMedium.$},n))}function v$({closePicker:e}){let t=t=>{o4.l7.user("create-new-slide-with-default-theme",()=>{l8.Ez5.slideThemeLibBindings().insertDefaultLocalTheme(t)}),e()};return f.createElement(vR,{title:(0,eN.t)("slides.templates.dev_environment_only")},f.createElement(vN,{key:"light",thumbnailWidth:"184px",thumbnailHeight:"101px",name:(0,eN.t)("slides.templates.light"),thumbnailUrl:"https://static.figma.com/uploads/4a01804a5d4ad3a2d38ea604c0d8d63520e9b97b",onPointerDown:()=>t(l8.zMY.LIGHT)}),f.createElement(vN,{key:"dark",thumbnailWidth:"184px",thumbnailHeight:"101px",name:(0,eN.t)("slides.templates.dark"),thumbnailUrl:"https://static.figma.com/uploads/01a1fc814ce18d9da3ba738aef79acc82c752ab7",onPointerDown:()=>t(l8.zMY.DARK)}))}function v0(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M5 6h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1ZM3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-1.982l.945 2.31a.5.5 0 0 1-.926.38l-1.1-2.69H8.063l-1.1 2.69a.5.5 0 1 1-.926-.379L6.982 17H5a2 2 0 0 1-2-2V7Zm4.7 3.2.315-1.26c.126-.505.844-.505.97 0L9.3 10.2l1.26.315c.505.126.505.844 0 .97L9.3 11.8l-.315 1.26c-.126.505-.844.505-.97 0L7.7 11.8l-1.26-.315c-.505-.126-.505-.844 0-.97L7.7 10.2ZM12.5 9a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5Zm0 3a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4Z",clipRule:"evenodd"}))}function v1({onStartFromOutline:e}){let{canDismiss:t,maybeUseLightTemplateOnDismiss:n}=(0,E$.vN)();return f.createElement("div",{className:a8.cx.flex.flexRow.pt8.px8.gap16.$},t&&f.createElement(v2,{onClick:n,icon:f.createElement(nu.e,null),title:(0,eN.t)("slides.templates.start_from.scratch.title"),subtitle:(0,eN.t)("slides.templates.start_from.scratch.subtitle"),buttonStyle:vb,iconStyle:vy}),f.createElement(v2,{onClick:e,icon:f.createElement(v0,null),title:(0,eN.t)("slides.templates.start_from.outline.title"),subtitle:(0,eN.t)("slides.templates.start_from.outline.subtitle"),iconStyle:"slides_template_ui--startFromOutlineIcon--6u3ms"}))}function v2({onClick:e,title:t,subtitle:n,icon:a,buttonStyle:l,iconStyle:r}){return f.createElement("button",{className:nb()(a8.cx.flex.flexRow.itemsCenter.colorBorder.bRadius5.b1.pl16.py12.pr16.gap12.$,"slides_template_ui--startFromRowButton--v3qHJ",l),onClick:e},f.createElement("span",{className:r},a),f.createElement("div",{className:a8.cx.flex.flexColumn.itemsStart.$},f.createElement("p",{className:a8.cx.colorText.textBodyMediumStrong.$},t),f.createElement("p",{className:a8.cx.colorTextSecondary.textBodyMedium.$},n)))}var v5=n(677967);function v4({currentOrg:e}){let t=(0,E$.fK)(),[{data:n}]=(0,r5.IT)((0,v5.QK)(e.id)),a=(0,e2.Xr)(EQ.bY),l=n?n.slice(0,t):[];if(0===l.length)return null;let r=l.map(e=>({type:uO.n.TeamTemplate,template:e}));return f.createElement(v8,{title:(0,eN.tx)("slides.templates.theme_picker.org_template_header",{orgName:e.name}),templates:r,onSeeAllClick:l.length<t?void 0:()=>a({type:EQ.Vf.ORG})})}function v3(){let[{data:e}]=(0,r5.IT)((0,v5._4)()),t=(0,e2.Xr)(EQ.bY),n=(0,E$.fK)();return e&&0!==e.length?f.createElement(f.Fragment,null,e.map(e=>{let a=e.shelf_content.map(t=>({type:uO.n.HubFile,template:t,category:e.id})),l=a.slice(0,n);return 0===l.length?null:f.createElement(v8,{key:e.id,title:e.title,templates:l,onSeeAllClick:a.length>n?()=>t({type:EQ.Vf.HUB_FILE,shelfId:e.id}):void 0})})):null}let v6={type:"START_FROM_SCRATCH"};function v7(){let e=(0,E$.r$)(),t=(0,uI.eE)(EI.$A.Slides),n=(0,E$.fK)();if(0===t.length)return null;let a=((0,vo.Fn)()||e===E$.Ji.PICKER?t:[v6,...t]).slice(0,n);return f.createElement(v8,{title:(0,eN.t)("slides.templates.recents"),templates:a})}function v8({title:e,templates:t,onSeeAllClick:n}){return f.createElement(vR,{title:e,onSeeAllClick:n},t.map(e=>e.type===v6.type?f.createElement(vO,{key:"start-from-scratch"}):f.createElement(vk,{key:(0,vp.NH)(e),template:e,parentView:{type:EQ.Vf.ALL}})))}var v9=n(428322),ye=n(236705);function yt({isSearchQueryLoading:e,trimmedSearchQuery:t,searchQueryResult:n,requestLoadMore:a}){let{onShowSeparatorScroll:l}=(0,E$.gH)();return e&&0===n.length?f.createElement("div",{className:a8.cx.p8.$},f.createElement(vV,null)):0===n.length?f.createElement("div",{className:a8.cx.p10.flex.flexColumn.itemsCenter.alignCenter.textBodyMedium.colorTextDisabled.$},f.createElement(a2.B,{className:a8.cx.h200.$,svg:ye.A,useOriginalSrcFills_DEPRECATED:!0}),f.createElement("div",null,(0,eN.tx)("slides.templates.search.empty",{searchTerm:f.createElement("span",{className:a8.cx.fontBold.$},t)})),f.createElement("div",null,(0,eN.tx)("slides.templates.search.empty.tip"))):f.createElement(i6.P,{className:a8.cx.px8.hFull.$,onScroll:l},f.createElement("div",{className:a8.cx.pt8.$},f.createElement(vD,null,n.map(e=>f.createElement(vk,{key:(0,vp.NH)(e),template:e,parentView:{type:EQ.Vf.ALL}}))),f.createElement(v9.a,{onIntersectionChange:({isIntersecting:e})=>{e&&a()}})))}function yn({closePicker:e}){let t=(0,E$.r$)(),n=(0,cC.sZ)(),a=function(){let e=(0,cC.sZ)(),[{status:t}]=(0,eK.IT)((0,v5.QK)(null==e?void 0:e.id)),[{status:n}]=(0,eK.IT)((0,v5._4)()),a=(0,mV.oh)(EA.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:EI.$A.Slides})),l=(0,mV.oh)(EN.sz.loadingKeyForPayload({shelfType:uL.cS.PIPER_TEMPLATE_MODAL}));return a||l||"loading"===n||"loading"===t}(),{scrollPosition:l,scrollRef:r,onScroll:i,resetScrollTop:o}=(0,E$.d$)(EQ.Vf.ALL),{onShowSeparatorScroll:s}=(0,E$.gH)(),c=(0,S.md)(EQ.F9),d=(0,af.tS)(),u=(0,e2.Xr)(EQ.bY),m=(0,du.hC)();return((0,f.useEffect)(()=>()=>o([EQ.Vf.ALL]),[o]),!a&&(c||d))?f.createElement(i6.P,{className:a8.cx.px8.hFull.$,scrollContainerRef:r,initialScrollTop:l,onScroll:(e,t)=>{i(e,t),s(e,t)}},(0,vo.Fn)()&&t===E$.Ji.OVERLAY_MODAL&&f.createElement(v1,{onStartFromOutline:function(){u({type:EQ.Vf.FILE_PICKER,parentType:EQ.Vf.ALL})}}),f.createElement(v7,null),n&&m&&f.createElement(v4,{currentOrg:n}),f.createElement(v3,null),(0,y.IX)()&&f.createElement(v$,{closePicker:e})):f.createElement("div",{className:a8.cx.px8.$},f.createElement(vG,null))}function ya({closePicker:e,showCloseButton:t}){let{trimmedSearchQuery:n,searchQuery:a,setSearchQuery:l,isSearchQueryLoading:r,searchQueryResult:i,requestLoadMore:o}=(0,E$.$N)(),{showSeparator:s}=(0,E$.gH)();return f.createElement("div",{className:a8.cx.flex.flexColumn.hFull.$},f.createElement("div",{className:nb()({[vv]:s})},f.createElement(vq,{searchQuery:a,setSearchQuery:l,showCloseButton:!!t,placeholder:(0,eN.t)("slides.templates.search_templates")})),n?f.createElement(yt,{isSearchQueryLoading:r,trimmedSearchQuery:n,searchQueryResult:i,requestLoadMore:o}):f.createElement(yn,{closePicker:e}))}var yl=n(647173);function yr(){return f.createElement(f.Fragment,null,f.createElement(yi,{title:"",onClick:nf.lQ}),f.createElement("div",{className:a8.cx.px8.$},f.createElement(vG,null)))}function yi({title:e,onClick:t,children:n,isLoading:a,publisherName:l,showSeparator:r=!0}){return f.createElement("div",{className:nb()(a8.cx.borderBox.flex.flexRow.itemsCenter.p8.h48.$,{[vv]:r})},f.createElement(a7.D8,{className:"slides_template_ui--backIcon--WFPr8","aria-label":(0,eN.t)("slides.templates.back"),onClick:t},f.createElement(a2.B,{className:a8.cx.colorIcon.$,svg:yl.A,"data-not-draggable":!0,"data-does-not-dismiss-modal":!0})),f.createElement("div",{className:"slides_template_ui--titleTextContainer--cH2zw"},a?f.createElement(vH,null):f.createElement(f.Fragment,null,f.createElement(m.TemplateTitle,{title:e}),l&&f.createElement(m.MetadataPublisher,{publisherName:l})),n))}function yo({shelfId:e}){let[{data:t,status:n}]=(0,eK.IT)((0,v5.Qp)(e)),a=(0,e2.Xr)(EQ.bY),{scrollPosition:l,scrollRef:r,onScroll:i}=(0,E$.d$)(EQ.Vf.HUB_FILE);return"loading"===n?f.createElement(yr,null):t?f.createElement("div",{className:a8.cx.flex.flexColumn.hFull.$},f.createElement(yi,{title:(0,eN.Yd)(t.i18n_meta.title,t.title),onClick:()=>a({type:EQ.Vf.ALL})}),f.createElement(i6.P,{className:a8.cx.px8.pt16.hFull.$,scrollContainerRef:r,initialScrollTop:l,onScroll:i},f.createElement(vD,null,t.shelf_content.map(t=>f.createElement(vk,{key:t.id,template:{type:uO.n.HubFile,category:e,template:t},parentView:{type:EQ.Vf.HUB_FILE,shelfId:e}}))))):null}function ys({title:e,templates:t,onRequestMore:n}){return f.createElement(vR,{title:e},t.map(e=>f.createElement(vk,{key:e.id,template:{type:uO.n.TeamTemplate,template:e},parentView:{type:EQ.Vf.ORG}})),f.createElement(v9.a,{onIntersectionChange:n}))}function yc({currentOrg:e}){let{isLoadingTeamTemplates:t,templatesByTeam:n,requestLoadMore:a,requestLoadMoreForTeam:l}=(0,cu.GT)(e,a_._Y.SLIDES),r=(0,e2.Xr)(EQ.bY),i=(0,f.useRef)(null),{scrollPosition:o,scrollRef:s,onScroll:c}=(0,E$.d$)(EQ.Vf.ORG);return t?f.createElement(yr,null):f.createElement("div",{className:a8.cx.flex.flexColumn.hFull.$},f.createElement(yi,{title:e.name,onClick:()=>r({type:EQ.Vf.ALL})}),f.createElement(i6.P,{className:a8.cx.px8.hFull.$,scrollContainerRef:s,initialScrollTop:o,onScroll:c},n.map(t=>f.createElement(ys,{key:t.team_id,title:t.team_name??e.name,templates:t.templates,onRequestMore:()=>l(t.team_id)}))),f.createElement(v9.a,{rootRef:i,onIntersectionChange:a}))}(e=>{e.TemplateTitle=function({title:e}){return f.createElement("div",{className:"slides_template_ui--templateTitleText--lcuqy text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},(0,eN.tx)("slides.templates.templates_modal.templates_title"),f.createElement("span",{className:"slides_template_ui--headerSeparator--Q3-mT"}," / "),e)},e.MetadataPublisher=function({publisherName:e}){return f.createElement("div",{className:"slides_template_ui--publisherTitleText--9DQpU text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},(0,eN.tx)("slides.templates.templates_modal.published_by",{publisherName:e}))}})(m||(m={}));var yd=n(565831);function yu(e){return(0,nl.O)()?f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17 7H7a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1ZM7 16h1.68l-.661 2.365a.5.5 0 0 0 .962.27L9.72 16h4.562l.737 2.635a.5.5 0 0 0 .963-.27L15.32 16H17a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2Zm1.515-6.56-.215.86-.86.215c-.505.126-.505.844 0 .97l.86.215.215.86c.126.505.844.505.97 0l.215-.86.86-.215c.505-.126.505-.844 0-.97L9.7 10.3l-.215-.86c-.126-.505-.844-.505-.97 0ZM12 9.498A.5.5 0 0 1 12.502 9l3 .014a.5.5 0 1 1-.004 1l-3-.014A.5.5 0 0 1 12 9.498ZM12.5 12a.5.5 0 0 0 0 1H15a.5.5 0 0 0 0-1h-2.5Z",clipRule:"evenodd"})):f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7 8h9a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1ZM5 9a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1.409l.39 1.363a.5.5 0 0 1-.962.274L13.551 16H9.45l-.468 1.637a.5.5 0 0 1-.962-.274L8.41 16H7a2 2 0 0 1-2-2V9Zm6 1.498a.5.5 0 0 1 .502-.498l3 .014a.5.5 0 1 1-.004 1l-3-.014a.5.5 0 0 1-.498-.502Zm-3.1.402.115-.46c.126-.505.844-.505.97 0l.115.46.46.115c.505.126.505.844 0 .97l-.46.115-.115.46c-.126.505-.844.505-.97 0L7.9 12.1l-.46-.115c-.505-.126-.505-.844 0-.97l.46-.115Zm3.6 1.114a.5.5 0 1 0 0 1h2a.5.5 0 0 0 0-1h-2Z",clipRule:"evenodd"}))}var ym=n(328849),yp=n(606432),yf=n(55069),y_=n(825871),yg=n(574724),yh=n(378260),yE=n(993789),yv=n(477047);async function yy({fileKey:e,fileVersion:t,selectedGuids:n}){if(!t)throw Error("Missing file version");let a=function({fileKey:e,fileVersion:t,selectedGuids:n}){return`/api/file_proxy/file/${e}/canvas?fv=${t}${n?`&nodes_to_extract=${n.join(",")}`:""}`}({fileKey:e,fileVersion:t,selectedGuids:n});return(await iD.Ay.post(a,{fv:`${t}`},{responseType:"arraybuffer"})).data}var yb=n(742691);async function yC({slidePresetModules:e,insertPreset:t,isGeneratingRef:n}){let a=[];for(let l of(ei.Zdr.createHiddenFrameForPresets(),e)){if(!n.current)return;try{let e=new Promise(e=>{t(l,ei.zkO.USER,"use-slides-ai-preset-selection",e)});a.push(e)}catch(e){rg.k.error("Failed to insert preset",e)}}await Promise.allSettled(a),n.current&&ei.Zdr.selectPresetsFromTemplate()}async function yw({figjamFileKey:e,fileVersion:t,selectedGuids:n=[],pageGuids:a=[]}){let l=await yy({fileKey:e,fileVersion:t,selectedGuids:n});return JSON.parse(ei.Zdr.getCanvasDataJsonFromBuffer(l,a))}class yT{constructor(e,t,n){this.currentItem=void 0,this.hasRenamedFile=!1,this.lastSlideGuid="",this.isGeneratingRef=e,this.showPlaceholderOverlay=t,this.getNextItem=n,this.intervalId=this.start()}start(){return setInterval(()=>this.update(),100)}isActive(){return 0!==this.intervalId}update(){if(!this.isGeneratingRef.current||!S.zl.get(af.ze)){this.cancel();return}if(this.currentItem||(this.currentItem=this.getNextItem(),!this.currentItem))return;let e=ei.Zdr.generateSlides(this.currentItem.slideItem);if(this.showPlaceholderOverlay(ei.Zdr.getPlaceholderNodeId()),e.length>0){e.unshift(this.lastSlideGuid);for(let t=0;t<e.length-1;++t)yS(yN(e[t]));this.lastSlideGuid=e[e.length-1]}this.currentItem.resolve(),this.currentItem=void 0}cancel(){this.isActive()&&(this.cleanUp(),(0,yb.Y)())}completeSuccessfully(){this.cleanUp(),(0,yb.Sk)()}processError(e){this.cleanUp(),(0,yb.D1)(e)}cleanUp(){this.isActive()&&(yS(yN(this.lastSlideGuid)),ei.Zdr.finishDeckGeneration(),clearInterval(this.intervalId),this.intervalId=0)}}async function yx({canvasData:e,processTitle:t,showPlaceholderOverlay:n,isGeneratingRef:a}){var l;let r=[],i=new yT(a,n,()=>r.shift());try{let n=await yg.Ay.slides.createSlides({version:"1.1",data:e},{orgId:S.zl.get(yh._s),teamId:S.zl.get(af.As)||null,fileKey:S.zl.get(af.ze)||null,userId:S.zl.get(dc.kS)||null,trackingSessionId:(0,y_.f)()});if(!a.current||!S.zl.get(af.ze)){n.cancel();return}let o=[],s=n.getReader(),c=!1;for(;;){let{done:e,value:n}=await s.read();if(e)break;if(!i.isActive()){s.cancel();return}c||"TITLE"!==n.slideType||(c=!0,t((null==(l=n.content.find(e=>"h1"===e.type))?void 0:l.content)||"")),o.push(new Promise(e=>{r.push({slideItem:n,resolve:e})}))}await Promise.allSettled(o),i.completeSuccessfully()}catch(e){i.processError(e)}}function yN(e){if(!e)return[];let t=yE.z.instance.get(e);if(!t)return[];let n=[];return t.childrenNodes.forEach(e=>{(function e(t,n){t&&("TEXT"===t.type?n.push(t):t.childrenNodes.forEach(t=>e(t,n)))})(e,n)}),n}function yS(e){o4.l7.user("figjam-to-slide-deck-text-opacity",()=>{e.forEach(e=>{e.opacity>0||e.setOpacityWithAnimation(1,yv._E.forLinear(.5),"slides-ai-animate-slide-text")})}),e.length=0}function yk(){let e="dark"===(0,ga.DP)();return f.createElement("div",{className:nb()("slides_ai_shimmer_overlay--shimmer--R2Ru3",e?"slides_ai_shimmer_overlay--shimmerDark--hd6lU":"slides_ai_shimmer_overlay--shimmerLight--PGzix")})}function yI(){let e=(0,S.md)(EQ.oQ)??void 0,t=(0,_.d4)(e=>e.fileVersion),n=function(){let e=(0,f.useRef)(!1),t=(0,E$.Kp)(),{areSlidePresetsLoaded:n,slidePresetModules:a}=function(){let e=function(){let e=(0,S.md)(EQ.ux),t=(0,E$.WS)(),n=t.data||[],a="loaded"===t.status&&n.length>0,l=(0,E$.S7)();return e||(a?n[0].library_key:l)}(),t=(0,E$.NG)(e),n="loaded"===t.status;return{areSlidePresetsLoaded:n,slidePresetModules:n?t.data:[]}}(),l=function(e){let t=(0,E$.yt)(),n=(0,f.useRef)(!1);return(0,f.useCallback)(()=>{var a;if(!S.zl.get(af.ze))return;let l=S.zl.get(aB.xB);!n.current&&(null==(a=null==l?void 0:l.flat())?void 0:a.length)===0&&e.length>0&&(n.current=!0,t(e[0],{row:0,col:0},ei.zkO.SYSTEM,"figjam-board-to-deck-default-slide",E$.Ji.BOARD_TO_DECK))},[t,e])}(a),r=(0,af.q5)(),i=(0,_.wA)(),o=(0,e2.Xr)(yb.uW),{showPlaceholderOverlay:s,removeAllPlaceholderOverlays:c}=function(){let e=(0,f.useRef)(null),t=(0,f.useRef)(new Set);return{showPlaceholderOverlay:(0,f.useCallback)(n=>{if(n&&n!==lg.AD&&e.current!==n){for(let e of t.current)(0,yf.ks)(e);e.current=n,t.current.add(n),(0,yf.Vm)(n,f.createElement(yk,null))}},[]),removeAllPlaceholderOverlays:(0,f.useCallback)(()=>{for(let e of t.current)(0,yf.ks)(e);t.current.clear(),e.current=null},[])}}(),d=(0,f.useCallback)(()=>{e.current&&(e.current=!1,c(),(null==r?void 0:r.key)!==S.zl.get(af.ze)||l(),ei.Zdr.finishDeckGeneration())},[l,r,c]);return async({figjamFileData:l,fileVersion:c})=>{let{figjamFileKey:u,selectedGuids:m,pageGuids:p}=l,f=!u||!c;if(!e.current&&!f&&n&&r){(null==a?void 0:a.length)||rg.k.warn("No slide preset modules found..."),e.current=!0;try{o(yb.cn.LOADING),ei.Ez5.uiState().leftPanelCollapsedUI3.set(!0),(0,yb.tO)(d),ei.Zdr.showLoadingState();let n=ei.Zdr.getPlaceholderNodeId();s(n);let[l,f]=await Promise.allSettled([yw({figjamFileKey:u,fileVersion:c,selectedGuids:m,pageGuids:p}),yC({slidePresetModules:a,insertPreset:t,isGeneratingRef:e})]);if(!e.current)return;if("rejected"===l.status){rg.k.error("Failed to fetch canvas data from file",l.reason),(0,yb.D0)((0,eN.t)("slides.present_summary.visual_bells.error_unknown"));return}if("rejected"===f.status){rg.k.error("Failed to ingest templates",f.reason),(0,yb.D0)((0,eN.t)("slides.present_summary.visual_bells.error_unknown"));return}await yx({canvasData:l.value,processTitle:e=>{e&&i(gP.Nw({file:r,name:`${e} ${(0,eN.t)("slides.templates.presentation")}`}))},showPlaceholderOverlay:s,isGeneratingRef:e}),S.zl.set(yb.uW,yb.cn.COMPLETE)}catch(e){S.zl.set(yb.uW,yb.cn.ERRORED),(0,yb.D0)((0,eN.t)("slides.present_summary.visual_bells.error_unknown")),rg.k.error("Failed to generate slides",e)}finally{d()}}}}(),a=(0,S.md)(EQ.bY).figjamFileData,l=(null==a?void 0:a.figjamFileKey)||e;return{figjamFileKey:l,fileVersion:t,generateSlides:()=>n({figjamFileData:{...a||{},figjamFileKey:l},fileVersion:t}),hasFigJamEntryData:!!a}}var yA=n(99130);function yO({templateSelected:e}){let{figjamFileKey:t,generateSlides:n}=yI();return f.createElement(yR,null,f.createElement(va.$n,{iconPrefix:f.createElement(yu,null),variant:"primary",onClick:n,disabled:!t},(0,eN.tx)(e?"slides.templates.template_picker.submit.button.with_template":"slides.templates.template_picker.submit.button.without_template")))}function yL({createOutline:e,useTemplate:t,disabled:n}){return f.createElement("div",{className:nb()(a8.cx.flex.itemsCenter.justifyEnd.p8.gap16.$,vC)},(0,vo.Fn)()&&f.createElement(va.$n,{iconPrefix:f.createElement(ym.V,null),variant:"secondary",onClick:e,disabled:n},(0,eN.tx)("slides.templates.outline_with_template.button")),f.createElement(va.$n,{variant:"primary",onClick:t,disabled:n},(0,y.kc)().piper_templates_add_all?(0,eN.tx)("slides.templates.add_all_slides"):(0,eN.tx)("slides.templates.use_template")))}function yP(){let{figjamFileKey:e,generateSlides:t}=yI();return f.createElement(yR,null,f.createElement(va.$n,{iconPrefix:f.createElement(yu,null),variant:"primary",onClick:t,disabled:!e},(0,eN.tx)("slides.templates.file_picker.submit_button.generate")))}function yD(){let e=(0,e2.Xr)(EQ.bY),t=(0,S.md)(EQ.oQ);return f.createElement(yR,null,f.createElement(va.$n,{variant:"primary",onClick:()=>{e({type:EQ.Vf.TEMPLATE_PICKER,isGeneratedFromFigJamEntryPoint:!1})},disabled:!t},(0,eN.tx)("slides.templates.file_picker.submit_button.pick_template")))}function yR({children:e}){return f.createElement("div",{className:nb()(a8.cx.flex.itemsCenter.justifyBetween.pl12.pr8.py8.$,vC)},f.createElement("div",{className:a8.cx.flex.itemsCenter.justifyStart.gap8.$},f.createElement(yp.W,null),f.createElement(yA.f,null)),e)}function yM({libraryKey:e}){let t=(0,E$.NG)(e),[n,a]=(0,S.fp)(EQ.bY),l=null===(0,af.tS)(),r=(0,E$.r$)(),i=(0,E$.S7)(),o=(0,e2.Xr)(EQ.ux),s=(0,e2.Xr)(EQ.oQ);return((0,f.useEffect)(()=>{l||["loading","loaded"].includes(t.status)||(0,o2.Lo)(o5.e.SLIDES,`Query result status has unexpected value: ${t.status}`)},[l,t.status]),"loading"===t.status||l)?f.createElement("div",{className:a8.cx.flex.flexColumn.hFull.$},f.createElement(yi,{title:"",isLoading:!0,onClick:()=>{a(n.type===EQ.Vf.TEMPLATE?n.parentView:{type:EQ.Vf.ALL}),o(null),s(null)}}),f.createElement("div",{className:a8.cx.px16.overflowHidden.$},f.createElement(vK,null)),r===E$.Ji.OVERLAY_MODAL&&!i&&f.createElement(yL,{createOutline:nf.lQ,useTemplate:nf.lQ,disabled:!0})):f.createElement(yF,{libraryKey:e,modules:t.data||[]})}function yF({libraryKey:e,modules:t}){let n=(0,E$.r$)(),[a,l]=(0,S.fp)(EQ.bY),r=(0,e2.Xr)(EQ.ux),i=(0,e2.Xr)(EQ.oQ),{showSeparator:o}=(0,E$.gH)(),s=(0,_.wA)(),c=(0,E$.m4)(),d=(0,E$.yt)(),u=t&&t.length>0,m=(0,yd.FF)();if((0,f.useEffect)(()=>{u||(e?((0,o2.x1)(o5.e.SLIDES,"Expected to find at least one module in slides template",{libraryKey:e},{reportAsSentryError:!0}),s(eS.F.enqueue({type:"slides-template",message:(0,eN.t)("slides.templates.toast.no_longer_available"),error:!0,icon:uN.zX.EXCLAMATION}))):(0,o2.x1)(o5.e.SLIDES,"No library key found for slides template",{},{reportAsSentryError:!0}),l({type:EQ.Vf.ALL}))},[s,u,e,t,l]),!u)return null;let p=t[0],g=()=>{let e=ei.Ez5.getInsertGridCoord({x:-1/0,y:-1/0});if(m&&(0,EV.fn)(m)){let t=ei.Ez5.slideDeck().coordForSlide(m);e={row:t.row,col:t.col+1}}else e={row:ei.Ez5.slideDeck().getLastSlideCoord().row+1,col:0};c(),s((0,W.yy)({modules:t,canvasPosition:new r4.Mi,percentageOffset:new r4.Mi,insertAsChildOfCanvas:!0,insertedItemsCallback:o4.nc.user("add-all-slides",(t,a)=>{t.forEach((t,l)=>{(0,E$.M)({module:t,insertedItems:a[l],viewType:n,getGridCoord:()=>({row:e.row,col:e.col+l}),shouldFocusSlide:0===l})})})})),ei.Ez5.slideThemeLibBindings().setDocumentTemplateLibraryKey(t[0].library_key),p.isHubFile&&s((0,G.k8)({hubFileId:(0,vc.fv)()(p)})),(0,E$.qm)(s,p)},h=p.file_name||"",E=p.publisher_name;return f.createElement("div",{className:a8.cx.flex.flexColumn.hFull.$},f.createElement(yi,{title:h,publisherName:E,onClick:()=>{l(a.type===EQ.Vf.TEMPLATE?a.parentView:{type:EQ.Vf.ALL}),r(null),i(null)},showSeparator:o},(0,y.kc)().piper_templates_add_all&&n===E$.Ji.PICKER?f.createElement("div",{className:a8.cx.mr8.mlAuto.$},f.createElement(va.$n,{variant:"secondary",onClick:g},(0,eN.tx)("slides.templates.add_all_slides"))):null),f.createElement(vP,{modules:t}),n===E$.Ji.OVERLAY_MODAL&&f.createElement(yL,{createOutline:()=>{r(p.library_key),l({type:EQ.Vf.FILE_PICKER,parentType:EQ.Vf.TEMPLATE})},useTemplate:(0,y.kc)().piper_templates_add_all?g:()=>{d(p,{row:0,col:0},ei.zkO.USER,"use-slides-template",n)}}))}var yB=n(190232);function yU({showCloseButton:e}){let[t,n]=(0,S.fp)(EQ.bY),{files:a,searchQuery:l,debouncedSearchQuery:r,setSearchQuery:i,status:o}=(0,E$._8)(a_._Y.WHITEBOARD),[s,c]=(0,S.fp)(EQ.ux),d=(0,e2.Xr)(EQ.oQ),{showSeparator:u}=(0,E$.gH)();return t.type!==EQ.Vf.FILE_PICKER?null:f.createElement("div",{className:a8.cx.flex.flexColumn.hFull.$},f.createElement(vZ,{searchQuery:l,setSearchQuery:i,onBack:function(){t.type===EQ.Vf.FILE_PICKER&&(s&&t.parentType===EQ.Vf.TEMPLATE?n({type:EQ.Vf.TEMPLATE,libraryKey:s,parentView:{type:EQ.Vf.ALL}}):(n({type:EQ.Vf.ALL}),c(null),d(null)))},showCloseButton:!!e,placeholder:(0,eN.t)("slides.templates.file_picker.search_files")}),f.createElement("div",{className:nb()(a8.cx.pt16.pb24.px16.flex.flexColumn.gap2.$,{[vv]:u})},f.createElement(vQ,{icon:f.createElement(tS.oS,{type:tS.y1.WHITEBOARD,size:tS.LE.SMALL}),title:(0,eN.t)("slides.templates.file_picker.title"),subtitle:(0,eN.t)("slides.templates.file_picker.subtitle")})),f.createElement(yH,{status:o,debouncedSearchQuery:r,files:a}),t.parentType===EQ.Vf.TEMPLATE?f.createElement(yP,null):f.createElement(yD,null))}function yH({status:e,debouncedSearchQuery:t,files:n}){let{scrollPosition:a,scrollRef:l,onScroll:r}=(0,E$.d$)(EQ.Vf.FILE_PICKER),{onShowSeparatorScroll:i}=(0,E$.gH)(),o=(0,_.d4)(e=>e.mirror.appModel.multiplayerSessionState===ei.kul.JOINED),s=null===(0,af.tS)();return e===E$.J_.LOADING||!o||s?f.createElement(vW,null):e!==E$.J_.SUCCESS?f.createElement("div",{className:a8.cx.flex.itemsCenter.justifyCenter.hFull.wFull.colorText.textBodyLarge.pre.$},f.createElement(yV,{debouncedSearchQuery:t,status:e})):f.createElement(i6.P,{className:nb()(a8.cx.px8.hFull.$),onScroll:(e,t)=>{r(e,t),i(e,t)},scrollContainerRef:l,initialScrollTop:a},f.createElement("div",{className:nb()(vw,a8.cx.pb12.$),role:"presentation"},n.map(e=>f.createElement(yG,{file:e,key:e.key}))))}function yG({file:e,disabled:t}){let n=(0,ew.iZ)(),[a,l]=(0,S.fp)(EQ.oQ);return f.createElement("div",{className:nb()(a8.cx.pt8.px8.$,"slides_template_ui--fileTile--6wu1g")},f.createElement(yB.GQ,{onClick:n=>{n.stopPropagation(),t||l(e.key)},overrideOnClick:!0,file:e,subtitle:f.createElement(yB.lJ,{file:e}),activeFileUsers:[],currentUser:n,isSelected:!t&&a===e.key,disabled:t,disableIconOverlays:!0,titleFontSize:11}))}function yV({debouncedSearchQuery:e,status:t}){return t===E$.J_.NO_QUERY_RESULTS?(0,eN.tx)("slides.templates.file_picker.no_files_match",{searchQuery:f.createElement("p",{className:a8.cx.colorText.textBodyLargeStrong.$},e)}):t===E$.J_.NO_RECENT_FILES?f.createElement("h1",{className:a8.cx.colorText.textBodyLarge.$},(0,eN.tx)("slides.templates.file_picker.no_recent_files")):null}function yK({showCloseButton:e}){let{searchQuery:t,setSearchQuery:n}=(0,E$.$N)(),[a,l]=(0,S.fp)(EQ.bY),r=a.type===EQ.Vf.TEMPLATE_PICKER&&a.isGeneratedFromFigJamEntryPoint,i=(0,_.d4)(e=>e.mirror.appModel.multiplayerSessionState===ei.kul.JOINED);return f.createElement("div",{className:a8.cx.flex.flexColumn.hFull.$},r?f.createElement(vq,{searchQuery:t,setSearchQuery:n,showCloseButton:!0,placeholder:(0,eN.t)("slides.templates.search_templates")}):f.createElement(vZ,{searchQuery:t,setSearchQuery:n,onBack:function(){l({type:EQ.Vf.FILE_PICKER,parentType:EQ.Vf.TEMPLATE_PICKER})},showCloseButton:!!e,placeholder:(0,eN.t)("slides.templates.template_picker.search_templates")}),i?f.createElement(yW,null):f.createElement("div",{className:a8.cx.px8.$},f.createElement(vG,null)))}function yW(){let{trimmedSearchQuery:e,isSearchQueryLoading:t,searchQueryResult:n,requestLoadMore:a}=(0,E$.$N)(),l=(0,S.md)(EQ.ux),{showSeparator:r}=(0,E$.gH)();return f.createElement(f.Fragment,null,f.createElement("div",{className:nb()(a8.cx.p16.flex.flexColumn.gap2.$,{[vv]:e&&r})},f.createElement(vQ,{icon:f.createElement("div",{style:{"--color-icon":"var(--color-icon-menu-onselected)"},className:a8.cx.colorBgBrand.h14.w14.bRadius2.flex.alignCenter.itemsCenter.$},f.createElement(uB,null)),title:(0,eN.t)("slides.templates.template_picker.title"),subtitle:(0,eN.t)("slides.templates.template_picker.subtitle")})),e?f.createElement(yt,{isSearchQueryLoading:t,trimmedSearchQuery:e,searchQueryResult:n,requestLoadMore:a}):f.createElement(yz,null),f.createElement(yO,{templateSelected:!!l}))}function yz(){let e=(0,cC.sZ)(),[t,n]=f.useState([]),[a,l]=f.useState(null),{scrollPosition:r,scrollRef:i,onScroll:o}=(0,E$.d$)(EQ.Vf.TEMPLATE_PICKER),{showSeparator:s,onShowSeparatorScroll:c}=(0,E$.gH)(),[{data:d}]=(0,r5.IT)((0,v5._4)()),u=(0,uI.eE)(EI.$A.Slides);(0,f.useEffect)(()=>{let t=[];if(u.length>0&&t.push({id:"recents",label:(0,eN.t)("slides.templates.recents"),view:f.createElement(yJ,null)}),e&&t.push({id:"org",label:(0,eN.t)("slides.templates.org_templates"),view:f.createElement(yY,{currentOrg:e})}),d)for(let e of d)t.push({id:`hub-${e.id}`,label:e.title,view:f.createElement(yX,{shelf:e})});n(t),l(t[0].id)},[u,e,d]);let m=e=>()=>{l(e)};return f.createElement(f.Fragment,null,f.createElement("div",{className:nb()(a8.cx.flex.flexRow.gap6.alignCenter.itemsCenter.px16.pb16.$,{[vv]:s})},t.map(e=>f.createElement("button",{key:e.id,className:nb()(a8.cx.textBodyMedium.colorText.spacingWide.alignCenter.px8.h24.$,{"slides_template_ui--tabButton--R1hl1":a===e.id,[a8.cx.textBodyMediumStrong.$]:a===e.id}),onClick:m(e.id)},e.label))),f.createElement(i6.P,{className:a8.cx.px8.hFull.$,scrollContainerRef:i,initialScrollTop:r,onScroll:(e,t)=>{o(e,t),c(e,t)}},f.createElement(yj,{selectedTabId:a,tabs:t})))}function yj({selectedTabId:e,tabs:t}){let n=t.find(t=>t.id===e);return n?n.view:null}function yJ(){let e=(0,uI.eE)(EI.$A.Slides);return 0===e.length?null:f.createElement(vD,null,e.map(e=>f.createElement(vk,{key:(0,vp.NH)(e),template:e,parentView:{type:EQ.Vf.ALL}})))}function yY({currentOrg:e}){let{isLoadingTeamTemplates:t,templatesByTeam:n,requestLoadMoreForTeam:a}=(0,cu.GT)(e,a_._Y.SLIDES);return t?f.createElement(vG,null):f.createElement(f.Fragment,null,n.map(t=>f.createElement(ys,{key:t.team_id,title:t.team_name??e.name,templates:t.templates,onRequestMore:()=>a(t.team_id)})))}function yX({shelf:e}){let[{status:t}]=(0,r5.IT)((0,v5._4)());if("loading"===t)return f.createElement(vG,null);let n=e.id;return f.createElement(vD,null,e.shelf_content.map(e=>{let t={type:uO.n.HubFile,category:n,template:e};return f.createElement(vk,{key:e.id,template:t,parentView:{type:EQ.Vf.ALL}})}))}function yq({showCloseButton:e}){let t=(0,S.md)(EQ.bY),n=(0,e2.Xr)(EQ.VZ),a=(0,e2.Xr)(EQ.Ei),l=(0,e2.Xr)(EQ.OR),r=(0,e2.Xr)(EQ.xw),i=(0,du.hC)(),o=(0,cC.sZ)();switch((0,f.useEffect)(()=>()=>{l(""),r()},[r,l]),t.type){case EQ.Vf.ALL:return f.createElement(ya,{showCloseButton:e,closePicker:()=>{a(!1),n(!1)}});case EQ.Vf.ORG:if(!o)throw Error("Expected current org to be defined when browsing org templates");if(!i)throw Error("User is not allowed to browse org templates");return f.createElement(yc,{currentOrg:o});case EQ.Vf.TEMPLATE:return f.createElement(yM,{libraryKey:t.libraryKey});case EQ.Vf.HUB_FILE:return f.createElement(yo,{shelfId:t.shelfId});case EQ.Vf.FILE_PICKER:return f.createElement(yU,{showCloseButton:e});case EQ.Vf.TEMPLATE_PICKER:return f.createElement(yK,{showCloseButton:e});default:return null}}function yZ({children:e}){let{canDismiss:t,maybeUseLightTemplateOnDismiss:n}=(0,E$.vN)();return f.createElement(cK.aF,{className:"slides_template_modal--templateModal--GmDGm",size:(0,lf.hG)(lw.uRR),onHide:n,tintedModalBackground:!0,disableClickOutsideToHide:!t,enableEscapeToClose:t,"data-testid":"slides-template-modal"},f.createElement("div",{className:a8.cx.overflowHidden.$,style:{height:"600px"}},e))}function yQ(){let[e,t]=(0,S.fp)(EQ.Ei),n=(0,tM.dP)(),a=(0,EO.Ye)(),l=(0,_.wA)(),r=(0,cC.sZ)(),i=f.useRef(null);if((0,vi.Y)(()=>t(!1),{closeOnEsc:!0,ignore:[i,(0,Ek.Tc)("slides-template-button"),(0,Ek.Tc)(E3),(0,Ek.Tc)(vl)]}),(0,f.useEffect)(()=>{l(EA.cd.fetchTemplatesMetadata({key:EI.$A.Slides,orgId:null==r?void 0:r.id})),l(EN.sz({shelfType:uL.cS.PIPER_TEMPLATE_MODAL}))},[null==r?void 0:r.id,l]),!e)return null;let o=(0,dm.J)(),s=a?70+o:(0,lf.jz)(lw.M$q)+o;return f.createElement(Y.fu,{name:"Slides Template Picker"},f.createElement("div",{className:nb()("slides_template_ui--pickerContainer--a3RMS",nz.Dm),style:{top:s,left:a?12:n+24,width:408,height:window.innerHeight-s-72},ref:i,"data-testid":"slides-template-picker"},f.createElement(E$.Jn.Provider,{value:E$.Ji.PICKER},f.createElement(yq,null))))}function y$(){let e=(0,eb.p8)("isReadOnly"),t=(0,tu.jY)(),n=(0,_.d4)(e=>e.isFullscreenDocumentLoaded),a=(0,mP.q)(),l=(0,cp.Fk)(e=>null!==e.get("0:0")),r=(0,S.md)(ES.D),i=(0,S.md)((0,ai.r1)(aD.Kt)).data,o=(0,S.md)(EQ.VZ),s=(0,af.tS)();return(0,aR.Ns)()||(0,aR.nl)()||e||!i||!(n&&a&&l)||t||r&&!o?null:f.createElement(Y.fu,{name:"Slides Template Overlay Modal",properties:{productType:"slides",fileKey:s}},f.createElement(E$.Jn.Provider,{value:E$.Ji.OVERLAY_MODAL},f.createElement(yZ,null,f.createElement(yq,{showCloseButton:!0}))))}function y0(){let e=(0,e2.Xr)(EQ.VZ),t=(0,tu.jY)(),n=aV(),{show:a,isShowing:l,complete:r}=(0,n7.e)({overlay:an.Yqi,priority:n8.N.DEFAULT_MODAL}),i=(0,f.useMemo)(()=>n?[y1,y2,y5,y4,y3,y6]:[y1,y2,y5,y4,y6],[n]),{currentStep:o,next:s}=(0,sJ.A)({numSteps:i.length,onComplete:r}),c=f.useMemo(()=>{let a=()=>{s(),e(!0)},o=i.map((e,i)=>f.createElement(e,{onClickPrimaryCta:t||0!==i?s:a,onClickSecondaryCta:r,isShowing:l,totalSteps:n?5:4,isOnboarding:!0}));return t||o.splice(1,0,f.createElement(y$,null)),o},[i,t,s,e,r,l,n]);return((0,np.h)(()=>{a()}),l&&c)?f.createElement(sq.U,{currentStep:o,isShowing:l,children:c}):null}function y1({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,isOnboarding:a}){let l=(0,e2.Xr)(EQ.VZ),r=(0,S.md)(sR.d2),i=(0,_.wA)(),o=r.data===eQ.qo.ORG,s=S.zl.get(Ex.Z),c=S.zl.get(a9.Me),d=ET.D.getState().openFile,u=!d||!d.canEdit,m=(0,B.lt)(s,c,u),p="/sub-processors/",g="/ssa/",h="ja"===(0,y.mm)()[0]?(0,eN.tx)("slides.onboarding.welcome.title.jp"):(0,eN.tx)("slides.onboarding.welcome.title"),E=o?m?(0,eN.tx)("slides.onboarding.welcome.org.footer.no_ai",{services_agreement:f.createElement(a1.CY,{href:g,target:"_blank",trusted:!0},(0,eN.tx)("slides.onboarding.services_agreement"))}):(0,eN.tx)("slides.onboarding.welcome.org.footer.ai",{subprocessors:f.createElement(a1.CY,{href:p,target:"_blank",trusted:!0},(0,eN.tx)("slides.onboarding.subprocessors")),services_agreement:f.createElement(a1.CY,{href:g,target:"_blank",trusted:!0},(0,eN.tx)("slides.onboarding.services_agreement"))}):m?void 0:(0,eN.tx)("slides.onboarding.welcome.starter.footer",{subprocessors:f.createElement(a1.CY,{href:p,target:"_blank",trusted:!0},(0,eN.tx)("slides.onboarding.subprocessors"))});(0,f.useEffect)(()=>{a&&(null==i||i(j.b({seen_slides_onboarding:!1})))});let v=()=>{null==i||i(nI.$T({view:"recentFiles"})),t()};return f.createElement(_z._l,{isShowing:n,title:f.createElement("div",null,h,f.createElement(iU.Ex,{text:"Beta",color:iU.zE.BRAND,className:"onboard_slides--betaBadge--TpHbJ",subtle:!0})),description:f.createElement("span",{style:{whiteSpace:"pre-line"}},(0,eN.tx)("slides.onboarding.welcome.description",{learn_more:f.createElement(a1.CY,{href:"https://help.figma.com/hc/articles/4406787442711-What-Figma-features-are-in-beta",target:"_blank",trusted:!0},(0,eN.tx)("slides.onboarding.learn_more"))})),primaryCta:{type:"button",label:(0,eN.tx)("slides.onboarding.welcome.primary_cta"),onClick:()=>{e(),null==i||i(j.b({seen_slides_onboarding:!0,agreed_to_slides_ai_terms:!0})),a&&l(!0)},ctaTrackingDescriptor:ar.c.NEXT},secondaryCta:{type:"button",label:(0,eN.tx)("slides.onboarding.welcome.secondary_cta"),onClick:v,ctaTrackingDescriptor:ar.c.CLOSE},media:f.createElement("img",{src:"https://static.figma.com/uploads/b5ff672e289f44685a5e04d3de9f17f154fb2455",alt:"Figma Slides carousel",width:332}),onClose:v,clickOutsideToHide:!1,trackingContextName:"Slides Onboarding > Welcome",disclaimerFooter:E,hideCloseButton:!0})}function y2({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:a}){let l=(0,aN.J2)(ei.Ez5.singleSlideView().isInSingleSlideView);return f.createElement(n9.rq,{isShowing:n,targetKey:aD.MB,trackingContextName:"Slides Onboarding > New Slide",onClose:t,arrowPosition:dk.F_.BOTTOM,title:(0,eN.tx)("slides.onboarding.new_slide.title"),description:(0,eN.tx)("slides.onboarding.new_slide.description"),media:f.createElement(sU.y,{src:"https://static.figma.com/uploads/2811dcf7f07f10fbc8543106336765058bc83266",alt:"slides template picker",aspectRatio:240/135}),stepCounter:{stepNum:1,totalNumSteps:a},primaryCta:{type:"button",label:(0,eN.tx)("slides.onboarding.callout.next"),onClick:()=>{e(),l&&ei.Ez5.singleSlideView().exitSingleSlideView()},ctaTrackingDescriptor:ar.c.NEXT},secondaryCta:{type:"button",label:(0,eN.tx)("slides.onboarding.callout.close"),onClick:t,ctaTrackingDescriptor:ar.c.CLOSE},shouldDisableAnimation:!0})}function y5({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:a}){return f.createElement(n9.rq,{isShowing:n,trackingContextName:"Slides Onboarding > Views",onClose:t,targetKey:aD.b_,title:(0,eN.tx)("slides.onboarding.views.title"),description:(0,eN.tx)("slides.onboarding.views.description"),media:f.createElement(sU.y,{src:"https://static.figma.com/uploads/8ad8b13cac28f9fb6eaaed9cad7c621684fadd6b",alt:"Grid view in Slides",aspectRatio:240/135}),stepCounter:{stepNum:2,totalNumSteps:a},primaryCta:{type:"button",label:(0,eN.tx)("slides.onboarding.callout.next"),onClick:()=>{et.Y5.triggerAction("enter-single-slide-view"),e()},ctaTrackingDescriptor:ar.c.NEXT},secondaryCta:{type:"button",label:(0,eN.tx)("slides.onboarding.callout.close"),onClick:t,ctaTrackingDescriptor:ar.c.CLOSE},shouldDisableAnimation:!0})}function y4({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:a}){let l=aV(),r=aG(ei.EMA.SLIDES);return f.createElement(n9.rq,{isShowing:n,trackingContextName:"Slides Onboarding > Tools",onClose:t,targetKey:aD.hx,shouldHideArrow:!0,shouldCenterArrow:dk.EL.BEST_EFFORT,title:(0,eN.tx)("slides.onboarding.nondesigner.tools.title"),description:(0,eN.tx)("slides.onboarding.nondesigner.tools.description"),media:f.createElement(sU.y,{src:"https://static.figma.com/uploads/aca6af2d36ffc1a4f65a12247f598a7598a530b7",alt:"Apps in Slides",aspectRatio:240/135}),stepCounter:{stepNum:3,totalNumSteps:a},primaryCta:{type:"button",label:(0,eN.tx)("slides.onboarding.callout.next"),onClick:()=>{e(),l&&r()},ctaTrackingDescriptor:ar.c.NEXT},secondaryCta:{type:"button",label:(0,eN.tx)("slides.onboarding.callout.close"),onClick:()=>{t()},ctaTrackingDescriptor:ar.c.CLOSE},shouldDisableAnimation:!0})}function y3({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:a}){let l=aG(ei.EMA.DESIGN);return f.createElement(n9.rq,{isShowing:n,trackingContextName:"Slides Onboarding > Design Mode",onClose:t,targetKey:aD.uy,shouldHideArrow:!0,shouldCenterArrow:dk.EL.BEST_EFFORT,title:(0,eN.tx)("slides.onboarding.designer.tools.title"),description:(0,eN.tx)("slides.onboarding.designer.tools.description"),media:f.createElement(sU.y,{src:"https://static.figma.com/uploads/5064800f3f60febf8b2ad2ad8ba4efdd6167eeaa",alt:"Design tool toggle",aspectRatio:240/135}),stepCounter:{stepNum:4,totalNumSteps:a},primaryCta:{type:"button",label:(0,eN.tx)("slides.onboarding.callout.next"),onClick:()=>{e(),l()},ctaTrackingDescriptor:ar.c.NEXT},secondaryCta:{type:"button",label:(0,eN.tx)("slides.onboarding.callout.close"),onClick:()=>{t()},ctaTrackingDescriptor:ar.c.CLOSE},shouldDisableAnimation:!0})}function y6({onClickSecondaryCta:e,isShowing:t,totalSteps:n}){return f.createElement(n9.rq,{isShowing:t,trackingContextName:"Slides Onboarding > Present",onClose:e,targetKey:aD.J5,title:(0,eN.tx)("slides.onboarding.share.title"),description:(0,eN.tx)("slides.onboarding.share.description"),media:f.createElement(sU.y,{src:"https://static.figma.com/uploads/a3ed241305c3e13d9ec5cab6e9a88db7572695c5",alt:"presenter mode in Slides",aspectRatio:240/135}),stepCounter:{stepNum:n,totalNumSteps:n},primaryCta:{type:"button",label:(0,eN.tx)("slides.onboarding.callout.done"),onClick:e,ctaTrackingDescriptor:ar.c.DONE},shouldDisableAnimation:!0,onTargetLost:e})}function y7(){let e=(0,_.wA)(),t=(0,aq.vh)(),n=(0,ai.r1)(aD.Kt),a=(0,S.md)(n),l=(0,ai.r1)(aD.wl),r=(0,S.md)(l),i=(0,tu.sO)(),o=(0,eb.aV)(),{show:s,isShowing:c,complete:d}=(0,n7.e)({overlay:an.Fff,priority:_M},[a,r]),u=(0,f.useCallback)(()=>{i&&t&&(o||s({canShow:(e,t)=>e&&!t}))},[t,o,i,s]);return(0,f.useEffect)(()=>u(),[u]),y1({onClickPrimaryCta:d,onClickSecondaryCta:()=>{e(j.b({agreed_to_slides_ai_terms:!1}))},isShowing:c,isOnboarding:!1,totalSteps:1})}var y8=n(211041);let y9=f.memo(function({isFigjamEditor:e,isDesignEditor:t,openFile:n}){let a=f.useRef(!t);return(f.useEffect(()=>{a.current=!t},[t]),!function(e){let t=(0,S.md)(gz.a8),n=(0,_.d4)(e=>{var t;return null==(t=e.user)?void 0:t.created_at}),a=!!n&&(0,cF.A)("2023-05-01").isBefore(n);f.useEffect(()=>{if(!a){e.current=!0;return}e.current=e.current||(0,gj.XC)(t)},[e,t,a]);let l=(0,_.wA)();(0,gX.yE)("x",e),(0,gX.yE)("y",e),(0,gX.yE)("width",e),(0,gX.yE)("height",e),(0,gX.yE)("angle",e),(0,gX.yE)("cornerRadius",e),(0,gX.yE)("strokePaints",e),(0,gX.yE)("fillPaints",e),(0,gX.yE)("effects",e),(0,gX.yE)("fontSize",e),(0,gX.yE)("fontFamily",e),(0,gX.yE)("fontStyle",e),(0,gY.g)("has_zoomed_in_design_file",e),(0,gJ.U)("has_panned_in_design_file",e);let r=(0,eT.f)("has_created_text"),i=(0,eT.f)("has_created_frame"),o=(0,eT.f)("has_selected_frame_tool"),s=(0,n7.e)({overlay:an._5$,priority:0});(0,sD.E)(s.uniqueId,"action_set_tool_frame",f.useCallback(()=>{e&&e.current||o||l(j.b({has_selected_frame_tool:!0}))},[e,l,o])),(0,sD.E)(s.uniqueId,"create_frame",f.useCallback(()=>{e&&e.current||i||l(j.b({has_created_frame:!0}))},[e,l,i])),(0,sD.E)(s.uniqueId,"create_text",f.useCallback(()=>{e&&e.current||r||l(j.b({has_created_text:!0}))},[e,l,r])),e.current}(a),!function(e){let t=(0,_.wA)(),n=(0,S.md)(dc.mp),a=null!=n&&(0,cF.A)("2023-10-31").isBefore(n),l=!!(0,eT.f)("has_opened_design_editor"),[r,i]=(0,S.fp)(dd);(0,f.useEffect)(()=>{a&&!l&&e&&(i(!0),t(j.b({has_opened_design_editor:!0})))},[t,l,e,i,a]),(0,f.useEffect)(()=>{r&&!e&&i(!1)},[r,e,i])}(t),sL.z4.getIsExtension()||!n)?null:f.createElement(f.Fragment,null,f.createElement(be,{isFigjamEditor:e,isDesignEditor:t,openFile:n}),!C.Ay.isIpadNative&&f.createElement(bt,{isFigjamEditor:e,isDesignEditor:t,openFile:n}))});function be({isFigjamEditor:e}){return f.createElement(f.Fragment,null,e&&f.createElement(aS.p,null,f.createElement(cQ,null),f.createElement(c1,null)))}function bt({isFigjamEditor:e,isDesignEditor:t,openFile:n}){let a=(0,y8.tG)(),l=(0,B.q8)();return f.createElement(f.Fragment,null,t&&!(0,aR.nl)()&&f.createElement(aS.p,null,f.createElement(cc,null)),e&&!t&&f.createElement(Er.Q,null,f.createElement(aS.p,null,f.createElement(cg,null))),f.createElement(aS.p,null,f.createElement(dS.P,null)),(null==n?void 0:n.teamId)&&f.createElement(Er.Q,null,f.createElement(aS.p,{featureFlag:"pro_trials_v3_ux"},f.createElement(_w,{teamId:n.teamId,isDesignEditor:t,isFigJamEditor:e}))),(null==n?void 0:n.teamId)&&f.createElement(Er.Q,null,f.createElement(aS.p,null,f.createElement(_b,{teamId:n.teamId,isDesignEditor:t,isFigJamEditor:e}))),t&&f.createElement(aS.p,null,f.createElement(dU,null)),f.createElement(aS.p,null,f.createElement(dK.A,null)),f.createElement(aS.p,null,f.createElement(dW.F,null)),f.createElement(aS.p,null,f.createElement(dz.w,null)),!C.Xb&&f.createElement(aS.p,null,f.createElement(dY.$l,null)),(null==n?void 0:n.canEditCanvas)&&e&&!t&&f.createElement(aS.p,null,f.createElement(m8,{openFile:n}),f.createElement(fl,null),f.createElement(mg,null),f.createElement(pa,null),f.createElement(mN,null),f.createElement(mS,null)),e&&!t&&f.createElement(f.Fragment,null,f.createElement(aS.p,{featureFlag:"nux_gen0_overlay_enabled"},f.createElement(dJ.L,null)),f.createElement(aS.p,null,f.createElement(mZ,null))),f.createElement(aS.p,null,f.createElement(r9.KX,null)),e&&f.createElement(aS.p,null,f.createElement(gK,null)),f.createElement(aS.p,null,f.createElement(fh,null)),f.createElement(aS.p,null,f.createElement(fM.Wk,null)),t&&f.createElement(aS.p,null,f.createElement(gL,null)),t&&f.createElement(aS.p,null,f.createElement(hn,null)),t&&f.createElement(aS.p,null,f.createElement(dN,null)),e&&f.createElement(aS.p,null,f.createElement(gH,null)),f.createElement(aS.p,null,f.createElement(Em,null)),f.createElement(aS.p,null,f.createElement(sj,null)),e&&f.createElement(f.Fragment,null,f.createElement(aS.p,null,f.createElement(cD,null))),t&&(null==n?void 0:n.canEdit)&&f.createElement(aS.p,null,f.createElement(gT,null)),t&&(null==n?void 0:n.canEdit)&&f.createElement(aS.p,null,f.createElement(dI,null)),t&&f.createElement(aS.p,null,f.createElement(ds,null)),f.createElement(aS.p,null,f.createElement(cy,null)),!C.Xb&&f.createElement(aS.p,null,f.createElement(dV,null)),f.createElement(aS.p,null,f.createElement(dj.b,null)),t&&f.createElement(aS.p,null,f.createElement(fx,null)),t&&f.createElement(aS.p,null,f.createElement(Ea,null),f.createElement(El,null)),t&&f.createElement(aS.p,{featureFlag:"cursor_bot"},f.createElement(Et,null),f.createElement(En,null)),e&&!l&&!(0,y.kc)().figjam_synthesize_handbrake&&f.createElement(aS.p,null,e&&f.createElement(sO,null)),e&&!l&&!(0,y.kc)().figjam_synthesize_handbrake&&f.createElement(aS.p,null,e&&f.createElement(sf.Cw,null)),e&&f.createElement(aS.p,{featureFlag:"figjam_pages_in_figjam"},e&&f.createElement(cI,null)),e&&f.createElement(aS.p,null,f.createElement(de,null)),a&&f.createElement(aS.p,null,e&&f.createElement(cb.vi,null)),t&&f.createElement(aS.p,null,f.createElement(sK,null)),e&&f.createElement(aS.p,null,f.createElement(_N.rj,null),f.createElement(_L,null)),t&&f.createElement(aS.p,{featureFlag:"rollout_pinned_comments_ff"},f.createElement(fD,null),f.createElement(fR,null)),t&&f.createElement(aS.p,{featureFlag:"ce_outline_mode_shortcut_pref"},f.createElement(fO,null)),f.createElement(aS.p,{featureFlag:"qa_v2"},f.createElement(dP,null)),e&&f.createElement(aS.p,{featureFlag:"figjam_share_to_google_classroom"},f.createElement(_D,null),f.createElement(uE,null)),(0,y.kc)().navigation_mode_scroll_to_pref&&(0,y.kc)().figjam_navigation_mode&&(0,y.kc)().nav_pref_existing_user_overlay&&f.createElement(aS.p,null,f.createElement(Ew,null)),f.createElement(aS.p,{featureFlag:"config_24_feature_carousel"},f.createElement(cd.M,null)),n&&f.createElement(aS.p,{featureFlag:"ui3_and_ai_welcome_modal"},f.createElement(gf,{openFile:n}),f.createElement(_H,null),f.createElement(_B,null)),f.createElement(aS.p,null,f.createElement(y7,null)))}var bn=n(121913),ba=n(37943),bl=n(529906),br=n(630331),bi=n(234945),bo=n(237395),bs=n(538411);function bc({children:e}){let[t,n]=(0,f.useState)(null),a=(0,q.A)(()=>n(!0),500),l=t?nf.lQ:a;return(0,f.useEffect)(l),t&&f.createElement("div",{className:bs.Q,role:"status"},e)}function bd(){let e=(0,_.d4)(e=>e.mirror.appModel.keyboardShortcuts),t=(0,tl.c1)(e,"present-as-prototype");return f.createElement(bc,null,(0,eN.tx)("fullscreen.toolbar.screenreader_notice",{shortcut:t}))}function bu(){let e=(0,_.d4)(e=>e.mirror.appModel.keyboardShortcuts);if((0,_.d4)(e=>e.screenreader.enabled))return null;let t=(0,tl.c1)(e,"open-shortcuts").replace("?",(0,eN.t)("general.question_mark")),n=(0,tl.c1)(e,"toggle-menu");return f.createElement(bc,null,(0,eN.tx)("fullscreen.toolbar.screenreader_notice_figjam",{shortcut:t,quickActionsShortcut:n}))}var bm=n(448211),bp=n(681816);function bf({accessibilityScope:e,isDebugMode:t,navigate:n}){let a=(0,_.d4)(e=>{let t=e.mirror.appModel.currentPage;return Object.keys(e.mirror.sceneGraphSelection)[0]||t||"-1:-1"}),l=(0,bo.A)(a,e);return(null==l?void 0:l.transformProperties)?f.createElement(bp.cH,{isDebugMode:t,navigate:n,accessibilityScope:e,...l,size:l.childIds.length,parentId:"",nodeId:a,setSize:0,headingLevel:0,setPosition:0}):null}var b_=n(531664),bg=n(842164);class bh{constructor(e){this.store=e}get graph(){return this.store.getState().mirror.sceneGraph}children(e){return(0,bm.dl)(this.graph,e)?[]:ei.glU.getSortedChildGuids(e.guid).map(e=>this.graph.get(e)).filter(gq.Vq)}id(e){return e.guid}isRoot(e){let t=this.parent(e);return!t||"DOCUMENT"===t.type}parent(e){let t=e.parentNode;return t&&"DOCUMENT"!==t.type?t:void 0}interpret(e){if(!e||"SECTION_OVERLAY"===e.type)return{inclusion:bg.v.OMIT};if("CANVAS"===e.type)return{inclusion:bg.v.INCLUDE};if(e.resizeToFit)return{inclusion:bg.v.CHILDREN};let t=(0,bm.xR)(ei.Egt.getNodeTransformProperties(e.guid)),n=(0,bm.U3)(e),a=(0,bm.sh)({type:e.type,name:e.name}),l=(0,bm.q4)(e),r=(0,bm.q4)(e.textSublayer),i=ei.Egt.getStickableFrequencies(e.guid)||{},o=e.accessibleLabel,s="TABLE"===e.type?(0,bm.qJ)(this.graph,e):null,c="SECTION"===e.type&&e.sectionContentsHidden;return{guid:e.guid,inclusion:bg.v.INCLUDE,type:e.type,author:e.authorVisible&&e.authorName?e.authorName:null,directTextContent:l,innerTextContent:r,tableCells:s,transformProperties:t,ariaRole:n,name:e.name,headerLabel:a,shapeType:"SHAPE_WITH_TEXT"===e.type?e.shapeWithTextType:null,stampFrequencies:i,accessibleLabel:o,contentsHidden:c}}comparePayloads({transformProperties:e,directTextContent:t,innerTextContent:n,stampFrequencies:a,accessibleLabel:l,...r},{transformProperties:i,directTextContent:o,innerTextContent:s,stampFrequencies:c,accessibleLabel:d,...u}){return(0,_.bN)(r,u)&&(0,_.bN)(e,i)&&(0,_.bN)(a,c)&&(0,_.bN)(l,d)&&(0,b_.c2)(t,o)&&(0,b_.c2)(n,s)}}let bE=f.createContext({getLastEventWasTab:()=>!1});function bv({children:e}){let t=(0,f.useRef)(!1);(0,f.useEffect)(()=>{let e=()=>{t.current=!1},n=({key:e})=>{t.current="Tab"===e};return document.addEventListener("pointerdown",e),document.addEventListener("pointermove",e),document.addEventListener("keydown",n),()=>{document.removeEventListener("pointerdown",e),document.removeEventListener("pointermove",e),document.removeEventListener("keydown",n)}},[]);let n=(0,f.useCallback)(()=>t.current,[]),a=(0,f.useMemo)(()=>({getLastEventWasTab:n}),[n]);return f.createElement(bE.Provider,{value:a},e)}var by=n(274071),bb=n(913964);let bC="textInputRegistered";var bw=n(420711);let bT=new Map([[eq.nT.Whiteboard,{loadAction:bn.h.FIGJAM_INITIAL_TREE_LOAD,updateAction:bn.h.FIGJAM_UPDATE_NODE,navigateAction:"figjam_navigate",nodeMapping:ei.Zbk.FIGJAM,render:(e,t,n,a)=>f.createElement(bp.cU,{nodeId:e,navigate:t,isDebugMode:n,accessibilityScope:a})}]]),bx=new Map([...bT,[eq.nT.Design,{loadAction:bn.h.DESIGN_INITIAL_TREE_LOAD,updateAction:bn.h.DESIGN_UPDATE_NODE,navigateAction:"design_navigate",nodeMapping:ei.Zbk.FIGJAM,render:(e,t,n,a)=>f.createElement(bf,{accessibilityScope:a,navigate:t,isDebugMode:n})}]]),bN=(0,f.memo)(function(){return f.createElement(bv,null,f.createElement(bS,null))});function bS(){let e=(0,_.d4)(e=>e.selectedView.editorType);!function({loggerEvent:e}){var t;let n=(0,fL.Z)(e),{getLastEventWasTab:a}=(0,f.useContext)(bE),l=(0,_.d4)(e=>1===Object.keys(e.mirror.sceneGraphSelection).length?Object.keys(e.mirror.sceneGraphSelection)[0]:null),r=ei.CUU&&ei.CUU.exists(ei.Sie.REDUX)?null==(t=ei.CUU.getSelectedTextRange(ei.Sie.REDUX))?void 0:t.textNodeId:null,i=l||r;f.useEffect(()=>{i&&a()&&n((0,lb.QZ)({nodeId:i,...bp.B5}),bp.tp)},[n,a,i])}({loggerEvent:function(e){switch(e){case eq.nT.Whiteboard:return"figjam_navigate";case eq.nT.Design:return"design_navigate";case eq.nT.DevHandoff:return"dev_handoff_navigate";case eq.nT.Sites:return"sites_navigate";case eq.nT.Slides:return"slides_navigate";case void 0:return"uninit_navigate"}}(e)});let t=(0,bl.e)();(0,by.of)(e);let n=(0,_.wA)(),a=(0,_.d4)(e=>!!e.modalShown);(0,f.useEffect)(()=>{t&&C.Xb&&(a||n(eS.F.enqueue({message:(0,eN.t)("fullscreen.accessibility.platform_error"),role:"alert",type:"accessibility-dom-react-error"})),n((0,ba.mC)({errorType:"platform_error"})))},[n,a,t]);let l=!C.Xb,r=(0,y.u4)("a11y_design_dom_mirror",bx,bT).get(e);if(!l)return null;if(!(r&&t))return f.createElement(bu,null);{let{loadAction:e,updateAction:t,navigateAction:l,nodeMapping:i,render:o}=r;return f.createElement(l7.tH,{onError:()=>{a||n(eS.F.enqueue({message:(0,eN.t)("fullscreen.accessibility.dom_error"),role:"alert",type:"accessibility-dom-react-error"})),n((0,ba.mC)({errorType:"render_error"}))},fallback:f.createElement("div",null),boundaryKey:"FigjamAccessibilityTreeInnerWithViewport"},f.createElement(bk,{loadAction:e},f.createElement(bI,{logAction:t,navigateAction:l,nodeMapping:i,render:o})))}}function bk({children:e,loadAction:t}){let n=(0,lb._X)({subscribeToUpdates_expensive:!0});!function(){let e=(0,f.useRef)(),t=(0,f.useRef)(!1),n=(0,f.useRef)({value:null}),a=et.Y5&&et.Y5.isReady()&&ei.VDs.getFocusElementsRegistered(),l=(0,_.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),r=(0,_.d4)(e=>e.mirror.sceneGraphSelection),i=(0,_.d4)(e=>e.mirror.sceneGraph),{textValue:o,selectionRange:s}=(0,N.R)(e=>{let t=e.mirror.appModel.activeCanvasEditModeType,n=e.mirror.sceneGraph,a=e.mirror.sceneGraphSelection;if(t!==ei.m1T.TEXT)return{textValue:null,selectionRange:null};let l=Object.keys(a);if(0===l.length)return{textValue:null,selectionRange:null};let r=n.get(l[l.length-1]);if(null==r)return{textValue:null,selectionRange:null};let i=null!=r.containingCanvas?n.get(r.containingCanvas):null,o=null==i?void 0:i.getSelectedTextRange();return{textValue:null==r?void 0:r.textContent,selectionRange:o}});n.current.value=o,n.current.selectionStart=null==s?void 0:s.start,n.current.selectionEnd=null==s?void 0:s.end;let c=(0,f.useCallback)((n,a,l)=>{t.current||null==e.current||null==n||(e.current.value=n),t.current||null==e.current||null==a||null==l||e.current.setSelectionRange(a,l)},[]);(0,f.useEffect)(()=>{c(o,null==s?void 0:s.start,null==s?void 0:s.end)},[o,null==s?void 0:s.end,null==s?void 0:s.start,null==s?void 0:s.textNodeId,c]);let d=()=>{t.current=!1},u=()=>{t.current=!0},m=(0,f.useCallback)(()=>{c(n.current.value,n.current.selectionStart,n.current.selectionEnd),t.current=!1},[c]);(0,f.useEffect)(()=>{var t,n,l,r,i,o;if(a){if(e.current=function(){var e;let t=null==(e=document.getElementById("fullscreen-root"))?void 0:e.getElementsByClassName("focus-target"),n=null==t?null:Array.from(t).filter(e=>"textarea"===e.tagName.toLowerCase()&&!e.hasAttribute("readonly")).map(e=>e);return(null==n?void 0:n.length)===1?n[0]:null}(),null==(t=e.current)?void 0:t.hasAttribute(bC)){rg.k.error("Input mirror hook registered multiple times");return}return null==(n=e.current)||n.setAttribute(bC,"true"),null==(l=e.current)||l.addEventListener("compositionend",d),null==(r=e.current)||r.addEventListener("compositionstart",u),null==(i=e.current)||i.addEventListener("focus",m),null==(o=e.current)||o.addEventListener("input",d),()=>{var t,n,a,l,r;null==(t=e.current)||t.removeAttribute(bC),null==(n=e.current)||n.removeEventListener("compositionend",d),null==(a=e.current)||a.removeEventListener("compositionstart",u),null==(l=e.current)||l.removeEventListener("focus",m),null==(r=e.current)||r.removeEventListener("input",d)}}},[a,m]);let p=l===ei.m1T.TEXT?function(e,t){let n=Object.keys(t),a=n.length>0?e.get(n[0]):null,{guid:l,type:r,shapeWithTextType:i}=a??{guid:void 0,type:void 0,shapeWithTextType:void 0};if(null==l)return"";if("SHAPE_WITH_TEXT"===r)return(0,bm.ZG)(i);if("TABLE"===r){let t=e.get(n[n.length-1]);if(null==t)return(0,bb.r)(r);{let{tableCellRowIndex:e,tableCellColumnIndex:n}=t;return(0,eN.t)("fullscreen.accessibility_dom.node_name_table_cell",{r:e,c:n})}}return(null==a?void 0:a.isSymbolSublayer)||(null==a?void 0:a.isInstanceSublayer)?(0,eN.t)("fullscreen.accessibility_dom.node_name_instance"):(0,bb.r)(r)}(i,r):"";(0,f.useEffect)(()=>{e.current&&(e.current.ariaLabel=p)},[p])}();let[a]=(0,o1.A)(n,500,{trailing:!0}),l=(0,aN.J2)((0,tM.UK)().accessibilityDomDebug),r=(0,uv.Td)();(0,br.gf)();let i=(0,_.wA)();(0,f.useEffect)(()=>{i((0,ba.mC)({errorType:null}))},[i]),(0,f.useEffect)(()=>{(0,bn.f)(t)},[t]);let o=f.useRef(null),s=(0,bm.it)(a),c=nb()(bw.kL,{[bw.Qg]:!l});return f.createElement("div",{className:c,ref:e=>{(0,ea.QP)("canvas",e),o.current=e},id:by.Gl,"aria-label":r?(0,i3.Yx)([(0,eN.t)("fullscreen.accessibility.main_region"),(0,eN.t)("fullscreen.filename_view.view-only")],"unit"):(0,eN.t)("fullscreen.accessibility.main_region"),role:"main",tabIndex:0,"data-fullscreen-intercept-dangerously-include-tab":!0,onFocusCapture:()=>{var e;null==(e=o.current)||e.setAttribute("aria-hidden","false")}},f.createElement("div",{style:s},e))}let bI=f.memo(function({logAction:e,navigateAction:t,nodeMapping:n,render:a}){let l=(0,_.d4)(e=>e.mirror.appModel.currentPage),r=(0,eo.g)(),i=(0,_.Pj)(),o=f.useMemo(()=>new bh(i),[i]),s=(0,bo._)(o,e),c=(0,fL.Z)(t),d=(0,aN.J2)((0,tM.UK)().accessibilityDomDebug),u=(0,_.d4)(bi.dK);(0,_.d4)(bi.Xt);let m=(0,q.A)(()=>{if(!r)return;let e=ei.AlE.getActiveDocument(),t=ei.yGz.flushChangedNodes(e);if(t.length){let e=t.map(e=>u.get(e)).filter(gq.Vq);s.updateDirtyNodes(e)}},500,{leading:!0,trailing:!0,maxWait:1e3});(0,f.useEffect)(m);let p=r?ei.AlE.getActiveDocument():void 0;return(0,f.useEffect)(()=>{if(void 0!==p)return ei.yGz.setMapping(p,n),()=>{ei.yGz.flushChangedNodes(p),ei.yGz.setMapping(p,ei.Zbk.NONE)}},[p,n]),(0,f.useEffect)(()=>{if(!r)return;let e=i.getState().mirror.sceneGraph.get(l);e&&s.updateDirtyNodes([e])},[l,r,i,s]),a(l,c,d,s)});var bA=n(227952),bO=n(326069),bL=n(874560),bP=n(57289),bD=n(883211),bR=n(194792);let bM=bR.zS;function bF(){let[e,t]=(0,S.fp)(bD.ph),n=(0,S.md)(bD.KG),a=(0,S.md)(bD.kh),l=(0,lb._X)({subscribeToUpdates_expensive:!0}),[r,i]=(0,f.useState)(null),o="whiteboard"===(0,Q.lg)(),s=f.useCallback(()=>{if(e){let{emojis:t,index:n}=e;if(t&&n>=0&&n<t.length){let e=(0,bO._Q)(t[n]);e&&o4.l7.user("insert-emoji",()=>{(0,Z.sx)("inserted_editor_emoji",{emoji:e}),ei.SmY.replaceCurrentShortcodeWithEmoji(e)})}}},[e]),c=f.useCallback(()=>{t(null)},[t]);if(!a||!e||null===n)return null;let d=(0,lb.Yb)(l,a);if(!(0,lb.ZT)(d,l))return null;let u={top:d.y+l.y-8,bottom:d.y+l.y+d.height+8,left:d.x+l.x,right:d.x+l.x+d.width,height:d.height,width:d.width},m=r&&u.height>0&&u.bottom>l.height-r&&u.top>l.height-u.bottom?{positionFromBottom:{left:u.left,bottom:l.height+l.y-u.top},direction:bP.ri.UPWARDS}:{targetRect:u,direction:bP.ri.DOWNWARDS};return f.createElement("div",null,f.createElement(bL.j,{dispatchTypeahead:t,typeahead:e,onInsert:s,onClear:c,width:168,...m,setMaxTypeaheadHeight:i,zIndex:bM,isFigJam:o,recordingKey:"emojiTypeaheadView",emojiImageSet:n}))}var bB=n(666930),bU=n(786013);let bH="dev_handoff_seen_config_wizard",bG=(0,ai.Fu)(bH);var bV=n(570809),bK=n(620722),bW=n(146935);let bz="paywall_redesign_blocking_modal--secondaryButtonHover--IjN6A",bj="paywall_redesign_blocking_modal--title--4gS3G text--fontPos20--Bcz97 text--_fontBase--QdLsd",bJ="paywall_redesign_blocking_modal--textContent--BrFtf text--fontPos13--xW8hS text--_fontBase--QdLsd",bY="paywall_redesign_blocking_modal--buttonLabel--qYvux text--fontPos13--xW8hS text--_fontBase--QdLsd",bX="paywall_redesign_blocking_modal--upsellListItem--27Su- text--fontPos13--xW8hS text--_fontBase--QdLsd";function bq(){let e=lE.q.instance.getCurrentPage(),t=(null==e?void 0:e.backgroundColor)?(0,hu.YU)({...e.backgroundColor,a:.9}):"var(--color-modalbackdrop)";return f.createElement(f.Fragment,null,f.createElement("div",{className:a8.cx.fixed.top0.left0.right0.bottom0.wFull.hFull.zIndexModal.$,style:dA.sx.add({backgroundColor:"var(--color-modalbackdrop)"}).$}),f.createElement("div",{className:a8.cx.fixed.bottom0.$,style:dA.sx.add({backgroundColor:t,left:0,right:0,top:0,bottom:0,zIndex:bW.sidePanelZ-1}).$}))}function bZ({onScrimClick:e=nf.lQ,imgSrc:t,content:n,modalType:a,primaryButtonLabel:l,primaryButtonOnClick:r,primaryButtonType:i,secondaryButtonLabel:o,secondaryButtonOnClick:s,secondaryButtonType:c}){let d="light"===(0,ga.DP)(),u=(0,al.bZ)(),m={type:a,text:i,...u},p={type:a,text:c,...u},_="ui3"===(0,h.DP)().version;return f.createElement(cK.Nb,{size:_?392:400,className:a8.cx.bRadius6.cursorDefault.selectNone.$,tintedModalBackground:!1,hide:e,enableEscapeToClose:!1,"data-testid":"dev-mode-paywall-modal"},f.createElement("div",{className:a8.cx.p8.flex.flexColumn.gap24.$},f.createElement("div",{className:a8.cx.h150.bRadius4.overflowHidden.if(d,a8.cx.b1.colorBorder).$},f.createElement(bK.J,{src:t,alt:"",width:328})),f.createElement("div",{className:a8.cx.flex.flexColumn.gap6.$},n),f.createElement("div",{className:nb()(a8.cx.flex.flexColumn.gap8.$,"paywall_redesign_blocking_modal--buttonContainer--ngmo0")},l&&r&&i&&f.createElement(b$,{label:l,onClick:r,trackingProperties:m,isUI3:_}),o&&s&&c&&f.createElement(b0,{label:o,onClick:s,trackingProperties:p,isUI3:_}))))}let bQ=(0,Y.tf)(va.Pw);function b$({label:e,isUI3:t,onClick:n,trackingProperties:a={}}){return t?f.createElement(bQ,{variant:"primary",onClick:n,trackingProperties:a,"data-testid":"primary-button"},f.createElement("span",{"data-testid":"primary-button-label"},e)):f.createElement(so.vd,{className:a8.cx.py8.px32.h40.maxWFull.cursorPointer.$,onClick:n,"data-testid":"primary-button",trackingProperties:a},f.createElement("div",{className:bY,"data-testid":"primary-button-label"},e))}function b0({label:e,isUI3:t,onClick:n,trackingProperties:a={}}){return t?f.createElement("div",{className:bz},f.createElement(bQ,{variant:"secondary",onClick:n,trackingProperties:a,"data-testid":"secondary-button"},f.createElement("span",{"data-testid":"secondary-button-label"},e))):f.createElement(so.tM,{className:nb()(a8.cx.py8.px32.h40.maxWFull.cursorPointer.$,bz),style:dA.sx.add({outline:"none"}).$,onClick:n,"data-testid":"secondary-button",trackingProperties:a},f.createElement("div",{className:bY,"data-testid":"secondary-button-label"},e))}var b1=n(755594),b2=n(760824);let b5="dev_mode_has_seen_trial_success_modal",b4=(0,ai.Fu)(b5);function b3(){var e;let t=(0,b1.J)(),n=(0,_.d4)(e=>e.userTeamFlags),a=(0,S.md)(b4),l=(0,af.q5)(),r=null==l?void 0:l.teamId,i=null==l?void 0:l.parentOrgId,o=(0,_.wA)(),s=r&&!i?null==(e=null==n?void 0:n[r])?void 0:e[b5]:null==a?void 0:a.data,c=(0,f.useCallback)(e=>{t&&!!s!==e&&(r&&!i?o(b2.bE({all_team_flags:[{team_id:r,flags:{[b5]:e}}]})):o(j.b({[b5]:e})))},[o,s,t,i,r]);return[s,c]}function b6(){let e=(0,S.md)(bG),[t,n]=b3(),a=(0,af.tS)()??"",l=(0,eW.Rs)(eJ.oBY,{key:a}),r=(0,al.bZ)(),{isShowing:i,show:o,complete:s}=(0,n7.e)({overlay:an.VjY,priority:n8.N.HIGH_PRIORITY_MODAL},[e,l]);return(0,np.h)(()=>{t||o({canShow:(e,t)=>{var n;return!!e&&!!(null==(n=null==t?void 0:t.file)?void 0:n.hasPermission)}})}),(0,f.useEffect)(()=>{i&&n(!0)},[i,n]),f.createElement(sZ.h,{modalType:s0.q3.WELCOME,isShowing:i,onClickPrimaryCta:nf.lQ,onClose:s,onManualDismiss:s,trackingContextName:"Dev Mode Trial Start Modal",trackingProperties:r,trackingEnabled:(null==r?void 0:r.gracePeriod)!==void 0,element:function({dismissModal:e}){let t=(0,bV.M)();return f.createElement(bZ,{imgSrc:"https://static.figma.com/uploads/5e9bfbdf1ce7c02544ebc1a89e0245c520a8c796",content:f.createElement(f.Fragment,null,f.createElement("div",{className:bj},(0,eN.tx)("dev_handoff.paywall.success_modal.grace_period.title")),f.createElement("div",{className:bJ},(0,eN.tx)("dev_handoff.configuration_wizard.welcome_step.description_grace_period",{numDays:(null==t?void 0:t.totalGraceDays)??bU.Hw9}))),modalType:"trial start modal",primaryButtonLabel:(0,eN.tx)("dev_handoff.paywall.success_modal.grace_period.button"),primaryButtonOnClick:e,primaryButtonType:"get started"})}})}var b7=n(344780),b8=n(785315);function b9({doReport:e}){let t=(0,S.md)(b8.H),{commentsActive:n,isNodeSelected:a}=(0,N.R)(e=>({commentsActive:e.mirror.appModel.currentTool===lc.ec.tool,isNodeSelected:Object.keys(e.mirror.sceneGraphSelection).length>0})),l=(0,lh.VW)();(0,np.h)(()=>{let t=b7.sn.tryStop("switch_to_inspect_mode.right_panel_tti");e&&t&&(0,Z.sx)("switch_to_inspect_mode.right_panel_tti",{elapsedMs:t,isNodeSelected:a},{forwardToDatadog:!0}),b7.sn.tryStop("dev_handoff.select_node_tti")}),f.useEffect(()=>{l&&!n&&requestAnimationFrame(()=>{let n=b7.sn.tryStop("dev_handoff.select_node_tti");e&&n&&(0,Z.sx)("dev_handoff.select_node_tti",{elapsedMs:n,isTopLevelFrame:l.isTopLevelFrame(),activeTab:t},{forwardToDatadog:!0})})},[l,t,n,e])}var Ce=n(911826),Ct=n(471340),Cn=n(225699),Ca=n(752207),Cl=n(324666),Cr=n(764257),Ci=n(816626),Co=n(369870),Cs=n(459343),Cc=n(267850),Cd=n(860142);function Cu(e){var t,n;let a=(0,_.wA)(),l=(0,nT.U)(),r=(null==l?void 0:l.type)===sQ.eg;return(0,_.d4)(e=>e.isRenaming)?null:f.createElement("div",null,f.createElement(Cs.c,{className:"file_menu--chevron--55jNJ",isUI3:!0,dropdownKey:sQ.eg,showingDropdown:r,tabIndex:0,ariaLabel:(0,eN.t)("fullscreen.filename_view.edit_file_menu"),dataTestId:"filename-menu-chevron",recordingKey:n_.Pt(e.recordingKey,"chevron"),dataOnboardingKey:sQ.O0,dispatch:a,toggleOnClick:!0}),(0,Co.MP)()&&f.createElement(Cd.e,{isUI3:!0,targetKey:sQ.O0}),f.createElement(Cc.G,{dropdownTargetRect:null==(t=null==l?void 0:l.data)?void 0:t.targetRect,dispatch:a,dropdownVisible:r,recordingKey:e.recordingKey,activatePathOnMount:null==(n=null==l?void 0:l.data)?void 0:n.activatePathOnMount,trackEvent:Z.sx}))}var Cm=n(697322),Cp=n(388809),Cf=n(857766),C_=n(52570);let Cg="filename_view--renaming--cVUNf";function Ch(e){let t=(0,ew.iZ)(),n=(0,af.q5)(),a=null==n?void 0:n.repo,l=!!(n&&a&&(0,Cf.Ns)(n,a)),r=!!(n&&(0,Cf.Kz)(n)),i=(0,_.d4)(e=>e.mirror.appModel.isReadOnly),o=!!n&&(0,le.DF)(n,t),s=(0,_.d4)(e=>e.isRenaming),c=(0,_.d4)(e=>e.mergingStatus),d=(0,_.d4)(e=>e.openFileMerge),u=(0,_.d4)(e=>e.mirror.appModel.topLevelMode),m=(0,_.d4)(e=>e.modalShown),p=(0,_.wA)();return f.createElement("div",{className:nb()("filename_view--filenameView--b0c-Y",{[Cg]:s})},r&&f.createElement("span",{className:nb()("filename_view--branchIcon--0Svod",{[Cg]:s})},f.createElement(Cm.L,null)),f.createElement("span",{className:nb()("filename_view--filenameText--YXXQf",{[Cg]:s})},l&&a?f.createElement(sQ.IS,{dispatch:p,user:t,repo:a,canRename:o,isRenaming:s,viewOnly:!!(t&&n&&i),dataTestId:"repo_name_data_test_id"}):f.createElement(sQ.o3,{recordingKey:n_.Pt(e.recordingKey,"fileName")})),(null==n?void 0:n.fileRepoId)&&(null==t?void 0:t.id)&&f.createElement(f.Fragment,null,f.createElement(Cp.aY,{openFile:n,modalShown:m,topLevelMode:u,dispatch:p}),f.createElement(C_.jQ,{repoId:n.fileRepoId,openFileKey:n.key,currentUserId:t.id,appMergingStatus:c,openFileMerge:d})))}var CE=n(670915),Cv=n(377747),Cy=n(525060);function Cb(){let e=(0,af.q5)(),t=null==e?void 0:e.repo,n=!!(t&&(0,Cf.Ns)(e,t)),a=!!(e&&(0,Cf.Kz)(e)),l=(0,_.wA)();return a&&t?f.createElement(Cy.o,{repo:t,dispatch:l,trackingContextName:eQ.e0.EDITOR_TOOLBAR_ACTION}):n&&e.fileRepoId?f.createElement(CC,{repoId:e.fileRepoId}):null}function CC({repoId:e}){let t=(0,_.wA)(),n=(0,Cv.Yj)(e);if(!n||"loaded"!==n.status)return null;let a=n.data.activeBranches.length;return a<1?null:f.createElement(rd.E,{className:"repo_info--button--3ej13",onClick:()=>t(CE.o5({trackingContextName:eQ.e0.EDITOR_TOOLBAR_ACTION}))},(0,eN.tx)("fullscreen.filename_view.branch-count",{BRANCHES:a}))}let Cw="leftPanelHeader";function CT(){let e=(0,af.q5)(),t=null==e?void 0:e.key,n=(0,ew.iZ)(),a=(0,n6.GS)(),l=(0,aA.cJ)(),r=(0,EO.Ye)(),i=(0,tR.l7)(),o=(0,tR.X0)();return a&&t?((0,Cr.IU)(t).replace(/^https:\/\//,""),f.createElement("div",{className:nb()("left_panel_header--leftPanelHeader--o6fb0",{"left_panel_header--noBorder--7ckj3":o})},!r&&f.createElement("div",{className:"left_panel_header--fileControls--0Q7aC"},f.createElement(Ch,{recordingKey:Cw}),!i&&f.createElement(Cu,{recordingKey:Cw})),f.createElement(Cb,null),f.createElement("div",{className:"left_panel_header--folderRow--GBzFM"},f.createElement(sQ.ur,{openFile:e,user:n}),e&&f.createElement(Ci.s,{openFile:e})),l&&(0,y.kc)().sts_pub_middleware&&null,l&&f.createElement("div",{className:"left_panel_header--publishRow--7joWm"},f.createElement(Cl.go,null)))):null}function Cx(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6.5 6a.5.5 0 0 1 .5.5v.42l.99-.15a12.426 12.426 0 0 1 3.687 0c.994.15 2.005.167 3.004.052l2.424-.28A.803.803 0 0 1 18 7.34v7.385c0 .41-.308.756-.715.803l-2.49.287a12.424 12.424 0 0 1-3.267-.055 11.427 11.427 0 0 0-3.39 0L7 15.93v2.57a.5.5 0 0 1-1 0v-12a.5.5 0 0 1 .5-.5Zm.5 8.92.99-.15a12.424 12.424 0 0 1 3.687 0c.994.15 2.005.167 3.004.052L17 14.554V7.561l-2.205.254a12.425 12.425 0 0 1-3.267-.055 11.425 11.425 0 0 0-3.39 0L7 7.93v6.99Zm6.854-5.474a.5.5 0 0 1 0 .707L12.707 11.3l1.147 1.146a.5.5 0 0 1-.708.707L12 12.007l-1.146 1.146a.5.5 0 0 1-.708-.707l1.147-1.146-1.147-1.147a.5.5 0 0 1 .708-.707L12 10.593l1.146-1.147a.5.5 0 0 1 .708 0Z",clipRule:"evenodd"}))}var CN=n(140838);let CS=f.forwardRef(function({children:e,...t},n){return f.createElement(rd.E,{...t,ref:n,className:"icon_button_32--iconButton--gFcI9"},f.createElement("span",{"aria-hidden":!0,className:"icon_button_32--icon--8SoTm"},e))});var Ck=n(818),CI=n(213190),CA=n(227944),CO=n(316081);let CL=(0,e4.eU)(!1),CP=(0,e4.eU)(null,()=>{});var CD=n(45623),CR=n(488983);function CM(){return null}var CF=n(811027);function CB(){var e;let t=(0,aN.J2)(null==(e=ei.Ez5)?void 0:e.uiState().showMissingFontsButton),n=(0,a6.U)();return t?f.createElement(CS,{onClick:()=>{n("missing_fonts_button_clicked"),ei.glU.findMissingFontsAndShowPopover()},recordingKey:"toolbarView.missingFontsButton","aria-label":(0,eN.t)("fullscreen.toolbar.missing_fonts"),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("fullscreen.toolbar.missing_fonts")},f.createElement(CF.z,null)):null}function CU(e,t){let[n,a]=(0,f.useState)(null);return(0,f.useLayoutEffect)(()=>{if(!e||!e.current||!t)return;a(e.current.getBoundingClientRect().width);let n=new ResizeObserver(e=>{e.forEach(e=>{var t;let n=null==(t=e.borderBoxSize)?void 0:t[0];a(n?n.inlineSize:e.contentRect.width)})});return n.observe(e.current),()=>n.disconnect()},[e,t]),n}function CH(){let e=(0,e2.Xr)(CP);return f.createElement(CS,{"aria-label":(0,eN.t)("sites.panel.see_unsupported_properties"),onClick:e,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("sites.panel.see_unsupported_properties")},f.createElement(Cx,null))}function CG(){let e=(0,af.q5)(),t=(0,CA.Zr)("toggle-sidebar"),n=(0,aA.cJ)(),{isLeftPanelCollapsed:a}=(0,f.useContext)(tD.t),l=(0,CI.q)(),r=t&&f.createElement(CS,{"aria-label":l?(0,eN.t)("fullscreen_actions.expand-ui"):(0,eN.t)("fullscreen_actions.minimize-ui"),onClick:()=>et.Y5.triggerAction("toggle-sidebar",{source:"left_panel"}),"data-onboarding-key":ak.ue,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":l?(0,eN.t)("fullscreen_actions.expand-ui"):(0,eN.t)("fullscreen_actions.minimize-ui"),"data-tooltip-shortcut-key":"toggle-sidebar",recordingKey:"left-panel-island.toggle-minimize-ui"},f.createElement(CN.C,null));if(!a)return f.createElement("div",{className:"left_panel_island--toggleMinimizeUITargetInactive--LNKFx"},f.createElement(tr.n8,null),f.createElement(CM,null),n&&f.createElement(CH,null),f.createElement(CB,null),r);{let t=(0,eN.t)("fullscreen_actions.expand-ui");return f.createElement("button",{onClick:()=>et.Y5.triggerAction("toggle-sidebar",{source:"left_panel"}),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":t,"aria-label":t,className:"left_panel_island--toggleMinimizeUITarget--pk9db left_panel_island--toggleMinimizeUITargetInactive--LNKFx"},f.createElement("div",{className:"left_panel_island--fileControls--SDe2O"},f.createElement(Ch,null),e&&f.createElement(Ci.s,{openFile:e})),f.createElement(tr.n8,null),r)}}function CV(){let e=(0,aA.cJ)(),t=(0,_.d4)(e=>e.isRenaming),n=(0,n6.GS)(),a=(0,Ck.b)(),{isLeftPanelCollapsed:l}=(0,f.useContext)(tD.t),r=(0,EO.GQ)(),i=(0,eb.aV)(),o=(0,_.d4)(e=>e.mirror.appModel.showUi),s=f.useRef(null),c=n&&!i&&o,d=CU(s,l&&!t&&c),u=(0,nW.U1)(),m=(0,f.useCallback)(e=>{(0,CO.cZ)(s,e),u(l?e:null)},[u,l]);if(!c)return null;let p=e&&!l;return f.createElement("div",{className:nb()(nz.Dm,"left_panel_island--islandContainer--Sowsa",{"left_panel_island--collapsed--pmqBr":l,"left_panel_island--withShadow--oSo1W":l,"left_panel_island--withInsetEditorEnabled--wIkJu":a}),style:l?t&&"number"==typeof d?{width:Math.max((0,EO.bV)(),d)}:{maxWidth:(0,EO.JX)()}:{width:r},ref:m},p?f.createElement("div",{className:"left_panel_island--fileControlsAlphaGroup---rBDZ"},f.createElement(tr.xG,null),f.createElement(iU.Ex,{className:"left_panel_island--alphaBadgeHover--GJq0e",text:(0,eN.t)("file_browser.creation_buttons.alpha"),color:iU.zE.DEFAULT,size:iU.vj.SMALL})):f.createElement(tr.xG,null),f.createElement(CG,null))}function CK(){return f.createElement("div",{className:"left_panel_island_spacer--islandSpacer--5ynLJ"})}let CW=f.forwardRef(({shouldAnimate:e=!0,ignoreRulers:t,children:n},a)=>{let l=(0,aN.J2)((0,tM.UK)().renderRulers),r=(0,Ck.b)();return f.createElement("div",{ref:a,className:nb()("left_panel_positioner--leftPanelPositioner--8Yehe",{"left_panel_positioner--withShowingRulers--xB1lD":l&&!t,"left_panel_positioner--withAnimation--pFRuR":e,"left_panel_positioner--withInsetEditorEnabled--GYcUX":r})},n)});var Cz=n(949207);let Cj=[0,1,2,3,4];function CJ(){let e="ui3"===(0,h.DP)().version;return f.createElement(CW,null,f.createElement(Cn.$,{width:240,disableResizing:!0},f.createElement("div",{className:nb()(nz.Dm,"paywall_redesign_left_panel--nodesPanel--qHo6x dev_handoff_nodes_panel--nodesPanel--4Pea0"),"data-testid":"devHandoffLimitedLeftPanel"},f.createElement(CV,null),e&&f.createElement(f.Fragment,null,f.createElement(CK,null),f.createElement(CT,null)),f.createElement("div",{className:"paywall_redesign_left_panel--panelTitle--ya0HF dev_handoff_nodes_panel--panelTitle--wcEcM text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,eN.tx)("dev_handoff.tag.ready_for_development")),f.createElement("div",{className:"paywall_redesign_left_panel--loadingParentRow--GdLwv"},f.createElement(a2.B,{className:"paywall_redesign_left_panel--chevron--vDc15",svg:Cz.A}),f.createElement(vs.Wi,{animationType:vs.JR.NO_SHIMMER,primary:!0})),Cj.map(e=>f.createElement("div",{className:"paywall_redesign_left_panel--loadingThumbnailRow--VH8Hr",key:e},f.createElement(vs.Qp,{animationType:vs.JR.NO_SHIMMER,className:"paywall_redesign_left_panel--loadingThumbnail--XfODE"}),f.createElement("div",{className:"paywall_redesign_left_panel--loadingThumbnailTexts--iBq47"},f.createElement(vs.Wi,{animationType:vs.JR.NO_SHIMMER,primary:!0}),f.createElement(vs.Wi,{animationType:vs.JR.NO_SHIMMER,primary:!0})))),f.createElement("div",{className:"paywall_redesign_left_panel--transparentPanelScrim--trKi0"}))))}var CY=n(972457),CX=n(750293);let Cq=null;function CZ(){let[e,t]=f.useState(0),n=(0,a6.U)(),a=(0,a3.U)("blocking_modal"),l=(0,al.bZ)(),r=(0,CY.B)(),i=(0,al.lb)(),o=(0,n3.ru)(),s=(0,aM.n)(),c=(0,S.md)(ao.R),d=!!(0,tR.hA)(),u=(0,_.wA)(),m=(0,N.R)(e=>({...e.selectedView,editorType:eq.nT.Design,showOverview:!0,focusViewBackNavigation:void 0,devModeFocusId:void 0}));f.useEffect(()=>()=>{Cq&&(clearTimeout(Cq),Cq=null)},[]);let p=f.useCallback(()=>{n("Dev Mode Paywall clicked",{type:"Blocking Modal scrim",...l});let r=e+1;r>=5?(n("Dev Mode Paywall clicked",{type:"Blocking Modal scrim redirection",...l}),a("design")):t(r),Cq||(Cq=setTimeout(()=>{t(0),Cq=null},1500))},[n,l,e,a]),g=f.createElement(f.Fragment,null,f.createElement("div",{className:bj},c?(0,eN.tx)("dev_handoff.paywall.blocking_modal.title.direct_link"):i?(0,eN.tx)("dev_handoff.paywall.blocking_modal.title.starter"):(0,eN.tx)("dev_handoff.paywall.blocking_modal.title")),f.createElement("ul",null,f.createElement("li",{className:bX},(0,eN.tx)("dev_handoff.paywall.blocking_modal.content.code")),f.createElement("li",{className:bX},(0,eN.tx)("dev_handoff.paywall.blocking_modal.content.inspection")),f.createElement("li",{className:bX},(0,eN.tx)("dev_handoff.paywall.blocking_modal.content.plugins")))),h=f.useCallback(()=>{r.hidden||r.onClick(CX.i$.BlockingModal)},[r]),E=f.useCallback(()=>{a("design")},[a]),v=f.useCallback(()=>{u(nI.$T(m))},[m,u]),y=f.useCallback(()=>{tg.Ay.unsafeRedirect("https://help.figma.com/hc/en-us/articles/15023124644247-Guide-to-Dev-Mode","_blank")},[]),b=(0,eN.tx)("dev_handoff.paywall.blocking_modal.button.start_your_free_trial"),C=r.hidden?void 0:o()?b:r.label,w=d?(0,eN.tx)("dev_handoff.paywall.blocking_modal.button.back_to_summary"):s?(0,eN.tx)("dev_handoff.paywall.blocking_modal.button.learn_more"):c?(0,eN.tx)("dev_handoff.paywall.blocking_modal.button.not_now"):(0,eN.tx)("dev_handoff.paywall.blocking_modal.button.back_to_design");return f.createElement(Y.fu,{name:"Blocking modal",properties:l,enabled:(null==l?void 0:l.gracePeriod)!==void 0},f.createElement(bZ,{onScrimClick:p,imgSrc:"https://static.figma.com/uploads/6d5e9cb0e9ec7fd5dd58425c5527dc8a78143a19",content:g,modalType:"blocking modal",primaryButtonLabel:C,primaryButtonOnClick:h,primaryButtonType:"upgrade",secondaryButtonLabel:w,secondaryButtonOnClick:d?v:s?y:E,secondaryButtonType:"back to design"}))}function CQ(){var e,t,n,a,l;let r=(0,a3.U)("blocking_modal"),i=(0,al.bZ)(),o=(0,af.tS)()??"",s=(0,eW.Rs)(eJ.D2i,{key:o}),c=(0,eW.Rs)(eJ.oBY,{key:o}),d=(null==(e=s.data)?void 0:e.file.status)!=="error"&&(null==(n=null==(t=s.data)?void 0:t.file.data)?void 0:n.hasPermission)&&(null==(l=null==(a=c.data)?void 0:a.file)?void 0:l.hasPermission)===!1,u=f.createElement(f.Fragment,null,f.createElement("div",{className:bj},d?(0,eN.tx)("dev_handoff.paywall.pending_modal.grace_period_end.title"):(0,eN.tx)("dev_handoff.paywall.pending_modal.no_grace_period.title")),f.createElement("div",{className:bJ},d?(0,eN.tx)("dev_handoff.paywall.pending_modal.grace_period.description"):(0,eN.tx)("dev_handoff.paywall.pending_modal.no_grace_period.description"))),m=(0,f.useCallback)(()=>{r("design")},[r]);return f.createElement(Y.fu,{name:"Pending modal",properties:i,enabled:(null==i?void 0:i.gracePeriod)!==void 0},f.createElement(bZ,{onScrimClick:nf.lQ,imgSrc:"https://static.figma.com/uploads/4d633d6262a8b5f838196a652d687dd1c9123fda",content:u,modalType:"request pending modal",primaryButtonLabel:(0,eN.tx)("dev_handoff.paywall.blocking_modal.button.back_to_design"),primaryButtonOnClick:m,primaryButtonType:"back to design"}))}function C$(){let e=(0,a3.U)("blocking_modal"),t=(0,al.bZ)(),n=(0,f.useCallback)(()=>{e("design")},[e]);return f.createElement(Y.fu,{name:"Request sent modal",properties:t},f.createElement(bZ,{imgSrc:"https://static.figma.com/uploads/9a55aebf20fd5e927f609cc0e256f6e782b20d78",content:f.createElement(f.Fragment,null,f.createElement("div",{className:bj},(0,eN.tx)("dev_handoff.paywall.success_modal.no_grace_period.title")),f.createElement("div",{className:bJ},(0,eN.tx)("dev_handoff.paywall.success_modal.no_grace_period.description"))),modalType:"request sent modal",primaryButtonLabel:(0,eN.tx)("dev_handoff.paywall.blocking_modal.button.back_to_design"),primaryButtonOnClick:n,primaryButtonType:"back to design"}))}function C0(){var e,t,n;!function(){var e,t,n,a,l,r;let[i,o]=(0,S.fp)(Ct.qI),s=(0,b1.J)(),c=(0,af.tS)()??"",d=(0,eW.Rs)(eJ.Fol,{key:c}),u=(0,eW.Rs)(eJ.Pns,{key:c}),m=(null==(e=d.data)?void 0:e.file.status)!=="error"&&!!(null==(n=null==(t=d.data)?void 0:t.file.data)?void 0:n.hasPermission),p="loading"===d.status,_=(null==(a=u.data)?void 0:a.file.status)!=="error"&&!!(null==(r=null==(l=u.data)?void 0:l.file.data)?void 0:r.hasPermission),g=(0,f.useRef)(!1);f.useEffect(()=>{if(!s)return;m&&!g.current&&(g.current=!0);let e=g.current;!p&&e&&!m&&_&&i===Ct.cI.REQUESTED&&(o(Ct.cI.DEFAULT),g.current=!1)},[i,_,m,p,s,o])}();let a=(0,S.md)(Ct.qI),l=(0,af.tS)()??"",r=(0,b1.J)(),i=(0,eW.Rs)(eJ.D2i,{key:l}),o=(0,eW.Rs)(eJ.Fol,{key:l}),s=r&&(null==(e=o.data)?void 0:e.file.status)!=="error"&&(null==(n=null==(t=o.data)?void 0:t.file.data)?void 0:n.hasPermission);return r&&("loading"===i.status||"loading"===o.status)?f.createElement(C1,null):r&&a===Ct.cI.REQUESTED&&s?f.createElement(C$,null):r&&a===Ct.cI.DEFAULT&&s?f.createElement(CQ,null):a===Ct.cI.DEFAULT?f.createElement(CZ,null):null}function C1(){let e=lE.q.instance.getCurrentPage(),t=(0,hu.HD)((null==e?void 0:e.backgroundColor)??"");return f.createElement("div",{className:t?"paywall_redesign_blocking_modal--spinnerOnDarkCanvas--H713o paywall_redesign_blocking_modal--spinner--gT54g":"paywall_redesign_blocking_modal--spinnerOnLightCanvas--O4yHJ paywall_redesign_blocking_modal--spinner--gT54g"},f.createElement(re.kt,{size:"large"}))}function C2(){return f.createElement(f.Fragment,null,f.createElement(bq,null),f.createElement(C0,null))}var C5=n(615925),C4=n(203264),C3=n(348425),C6=n(378958),C7=n(717068),C8=n(560945);let C9={trackWidth:0,trackLeft:0,scrollWidth:0,scrollLeft:0,canScroll:!0,scrollbarLeft:0,scrollbarWidth:0,startDragX:void 0,startDragScrollLeft:void 0},we=(e,t)=>{let n={...e};if(n.trackWidth=t.clientWidth,n.scrollWidth=t.scrollWidth,n.trackLeft=t.getBoundingClientRect().left,n.scrollLeft=t.scrollLeft,n.scrollbarWidth=Math.max(n.trackWidth*(n.trackWidth/n.scrollWidth),42),n.canScroll=n.scrollWidth>n.trackWidth,n.canScroll){let e=n.scrollWidth-n.trackWidth,t=n.trackWidth-n.scrollbarWidth;n.scrollbarLeft=t*(n.scrollLeft/e)}return(0,_.bN)(e,n)?e:n};var wt=(e=>(e[e.DOM_DELTA_PIXEL=0]="DOM_DELTA_PIXEL",e[e.DOM_DELTA_LINE=1]="DOM_DELTA_LINE",e[e.DOM_DELTA_PAGE=2]="DOM_DELTA_PAGE",e))(wt||{});let wn=e=>{let t=0;return 0===e.deltaMode?t=e.deltaX:1===e.deltaMode?t=10*e.deltaX:2===e.deltaMode&&(t=100*e.deltaX),t},wa=(e,t,n,a)=>{let{startDragX:l,startDragScrollLeft:r,scrollWidth:i,trackWidth:o,trackLeft:s}=n;if(void 0!==l&&void 0!==r){let n=e-l;(n>0&&e>=s||n<0&&e<=s+o)&&(t.scrollLeft=r+n/o*i,a())}},wl=({scrollContainerRef:e,clipContainerRef:t,onCanScrollChanged:n,childRef:a})=>{let[l,r]=f.useState(C9),i=f.useRef(),[o,s]=f.useState(null),c=void 0!==l.startDragX&&void 0!==l.startDragScrollLeft,d=f.useCallback(()=>{let t=e.current;t&&r(e=>we(e,t))},[e,r]);f.useLayoutEffect(()=>{i.current!==l.canScroll&&(null==n||n(l.canScroll)),i.current=l.canScroll},[l.canScroll,n]);let u=f.useCallback(t=>{let n=t.clientX,a=e.current;a&&(C.Ay.safari?null===o&&s(requestAnimationFrame(()=>{wa(n,a,l,d),s(null)})):wa(n,a,l,d),d())},[d,o,e,l]),m=f.useCallback(t=>{e.current&&(e.current.scrollLeft+=wn(t),d())},[e,d]),p=f.useCallback(t=>{if(!e.current)return;t.stopPropagation(),t.preventDefault();let{clientX:n}=t,{trackLeft:a,scrollbarWidth:i,trackWidth:o,scrollWidth:s,scrollbarLeft:c}=l,u=n-a;if(!(u>=c&&u<=c+i)){let t=Math.min(Math.max(0,u-i/2),o);e.current.scrollLeft=t/o*s,d()}r(e=>({...e,startDragX:n,startDragScrollLeft:e.scrollLeft}))},[e,l,r,d]),_=f.useCallback(()=>{r(e=>({...e,startDragScrollLeft:void 0,startDragX:void 0}))},[]);return(0,C8.w)(t,d),(0,C8.w)(a,d),f.useEffect(()=>{if(c)return document.addEventListener("mousemove",u),()=>document.removeEventListener("mousemove",u)},[u,c]),f.useEffect(()=>{if(c)return document.addEventListener("mouseup",_),()=>document.removeEventListener("mouseup",_)},[_,c]),f.useLayoutEffect(d,[d]),{reconcileStateWithDom:d,onTrackWheel:m,onTrackMouseDown:p,scrollState:l,isDragging:c}},wr=e=>{if(!e.canScroll)return"none";let t=e.scrollLeft,n=e.trackWidth-e.scrollbarWidth-e.scrollLeft+25,a=1-Math.min(t/50,1),l=1-Math.min(n/50,1),r=`rgba(0, 0, 0, ${a})`,i="rgba(0, 0, 0, 1)",o=`rgba(0, 0, 0, ${l})`,s=[`${r} 0%`,`${r} 5px`,`${i} 50px`,`${i} calc(100% - 50px)`,`${o} calc(100% - 5px)`,`${o} 100%`];return`linear-gradient(to right, ${s.join(", ")})`};function wi({className:e,scrollBarAlways:t,fadeEdges:n,children:a,onCanScrollChanged:l,childRef:r,hideScrollBar:i}){let o=f.useRef(null),s=f.useRef(null),{reconcileStateWithDom:c,onTrackWheel:d,onTrackMouseDown:u,scrollState:m,isDragging:p}=wl({scrollContainerRef:o,clipContainerRef:s,childRef:r,onCanScrollChanged:l}),_={transform:`translate3d(${m.scrollbarLeft}px, 0px, 0)`,width:m.scrollbarWidth};return f.createElement("div",{ref:s,className:nb()("horizontal_scroll_container--clipContainer--5E1FP",e)},m.canScroll&&!i&&f.createElement("div",{className:p?"horizontal_scroll_container--trackDragging---EmpF horizontal_scroll_container--track--NB72q":"horizontal_scroll_container--track--NB72q",onMouseDown:u,onWheel:d},f.createElement("div",{className:t?"horizontal_scroll_container--scrollBarAlways---9ddQ horizontal_scroll_container--scrollBar--2cVcj":"horizontal_scroll_container--scrollBar--2cVcj",style:_})),f.createElement("div",{ref:o,className:"horizontal_scroll_container--scrollContainer--IkUqe",onScroll:()=>c(),style:{WebkitMaskImage:n?wr(m):void 0}},a))}var wo=n(717421);let ws=/_INTERNAL_INSTANCE_KEY_[0-9]+_/g;var wc=n(31225),wd=n(970516),wu=n(788612),wm=n(962645),wp=n(419902);function wf({hint:e,inCodeWell:t,hidden:n}){return f.createElement(iy.K0,{svg:wp.A,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":e,"data-tooltip-show-immediately":!0,"data-tooltip-offset-x":t?-5:0,className:nb()({"code_hints--hintButton--Zdf0R":!0,"code_hints--codeLineHintButton--8Gasg":t,"code_hints--hidden\xa0--OV345":n})})}var w_=n(830313),wg=n(733334);let wh=/Color\((0x[0-9a-fA-F]{8})\)/gi,wE=/(Color\(red: (\d*\.?\d*), green: (\d*\.?\d*), blue: (\d*\.?\d*)\)(\.opacity\((\d*\.?\d*)\))?)/gi,wv=/(#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})|rgba?\(\d+,\s*\d+,\s*\d+,\s*\d+(?:\.\d+)?\)|color\(\s*(srgb|srgb-linear|display-p3|a98-rgb|prophoto-rgb|rec2020|xyz|xyz-d50|xyz-d65)\s+((\d+|\d*\.\d+|%|none)\s*){3}(\/\s*(\d+|\d*\.\d+|%|none)\s*)?\))/gi;var wy=n(565358);let wb="code_panel--codeWell--9P6tu",wC="code_panel--codeWellWithLeftGutter--Tp2Pe",ww="code_panel--connected--RdXFD",wT="code_panel--manual--h-0IX";var wx=n(522157);let wN=(0,e4.eU)(!1),wS=(e,t={})=>(0,C7.WI)(e.map(e=>e.lines.length>0?(0,wm.kt)(e.lines,!0):null)).join("\n\n").replace(ws,e=>{let n=t[e];return n?`/* ${n.name} */`:"/* unknown instance */"});function wk(e){return f.createElement(rd.E,{...e,className:nb()("code_panel--buttonReset--dOY7G","code_panel--copyButton--u-358"),as:"button"})}function wI(e){var t;let{code:n,section:a,hasCodeDiff:l,collapseLongSections:r=!0,bottomPadding:i=!1,copyActionEnabled:o=!0,copyAllActionEnabled:s=!0,hideHints:c=!1,recordingKey:d,additionalHeaderActions:u=null,footerActions:m=null,type:p="default",leftHeaderActions:g=null}=e;a.collapseAfterIndex||(a={...a,collapseAfterIndex:15});let h=(0,_.d4)(e=>Object.keys(e.mirror.sceneGraphSelection)[0]),E=(0,_.wA)(),v=(t=a,f.useMemo(()=>(function(e,t,n={}){let a={},l=function(e){switch(e){case"kotlin":return wh;case"swift":return wE;default:return wv}}(t),r=function(e){switch(e){case"kotlin":return e=>e.replace(/0x([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/,"#$2$3$4$1");case"swift":let t=e=>Math.round(255*e).toString(16).padStart(2,"0");return e=>e.replace(wE,(e,...n)=>{let[a,l,r,i,o,s=1]=n;return`#${t(l)}${t(r)}${t(i)}${t(s)}`});default:return e=>e}}(t),i=0,o=(0,wm.kt)(e).replace(l,(e,n)=>e?(a[`${i}`]={highlightedColor:(0,w_.g)(t,n),cssColor:r(n)},e.replace(n,`INTERNALCHITID${i++}_`)):""),s=(0,w_.g)(t,o);return(0,wg.p)(s).split("\n").map((t,l)=>{let r=t.replace(/INTERNALCHITID([0-9]*)_/g,(e,t)=>{let n=a[t];return n?`<span class="chit-container"><span class="token chit" style="background-color: ${(0,wg.p)(n.cssColor)}"></span>${(0,wg.p)(n.highlightedColor)}</span>`:""}).replace(ws,e=>{if(!e||!Object.keys(n).includes(e))return"<span>INSTANCE_NOT_FOUND</span>";let{name:t,id:a}=n[e];return`<span class="token instance-pill" data-tooltip-type="${nx.Ib.TEXT}" data-tooltip="${(0,eN.t)("dev_handoff.inspect_panel.inspect_nested_component")}" data-id="${a}">${(0,wg.p)(t)}</span>`});return{...e[l],code:r}})})(t.lines,t.language,t.instances),[t])),[y,b]=f.useState(r),[C,w]=f.useState(!1),[T,x]=(0,S.fp)(wN),N=s&&T;f.useEffect(()=>{b(r)},[h,r]);let k=f.useMemo(()=>y&&a.collapseAfterIndex?v.slice(0,a.collapseAfterIndex):v,[v,a.collapseAfterIndex,y]),I=a.collapseAfterIndex?v.length-a.collapseAfterIndex:0,A=e.codeToCopy||n,O=e.sectionToCopy||a,L=f.useCallback(()=>{if(!N)return wS([O],O.instances);{let e=A.reduce((e,t)=>Object.assign(e,t.instances),{});return wS(A,e)}},[A,O,N]),P=f.useCallback(()=>{let e=L();e&&E(wd.lW({stringToCopy:e,ignoreLineBreaks:!1}))},[E,L]),D=n_.rf(n_.Pt(d,"copy"),"click",P),R=f.useCallback(()=>{var e;E(wd.lW({stringToCopy:(null==(e=window.getSelection())?void 0:e.toString())||L(),ignoreLineBreaks:!1}))},[E,L]),M=f.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:t,clientY:n}=e;E(nI.j7({type:nz.Sl,data:{clientX:t,clientY:n,onCopyText:R}}))},[R,E]),F=f.useCallback(e=>{s&&x(e.shiftKey),w(!0)},[x,s]),B=n_.rf(n_.Pt(d,"copy"),"mouseenter",F),U=f.useCallback(e=>{x(!1),w(!1)},[x]),H=f.useCallback(e=>{x(C&&s&&e.shiftKey)},[C,x,s]);f.useEffect(()=>(document.addEventListener("keydown",H),document.addEventListener("keyup",H),()=>{document.removeEventListener("keydown",H),document.removeEventListener("keyup",H)}),[H]);let G=function(e){switch(e){case"Modifier":return(0,eN.t)("inspect_panel.code.modifier");case"Code":return(0,eN.t)("inspect_panel.code.code");case"Style":return(0,eN.t)("inspect_panel.code.style");case"Variables":return(0,eN.t)("inspect_panel.code.variables");case"Layout":return(0,eN.t)("inspect_panel.properties.layout");case"Position":return(0,eN.t)("inspect_panel.code.position");case"Other":return(0,eN.t)("inspect_panel.code.other");case"Typography":return(0,eN.t)("inspect_panel.typography.title");default:return e}}(a.name),V=C||N;return f.createElement(wu.VZ,{hideHeader:!0,padding:i?wu.UZ.DEFAULT:wu.UZ.NONE,noBorder:!0,recordingKey:`code:${a.name}`},f.createElement(wD,{type:p,header:f.createElement(wL,{type:p,muted:a.isTextSegment,actions:f.createElement(f.Fragment,null,u||f.createElement(fy.M,null),o&&f.createElement(wk,{onMouseEnter:B,onMouseLeave:U,onClick:D,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":s?(0,eN.t)("inspect_panel.code.copy_all_shift"):"","aria-label":(0,eN.t)("inspect_panel.copy")},f.createElement(ry.U,{svg:wx.A},f.createElement(C5.X,null)))),title:G,leftActions:g}),content:f.createElement(wO,{code:a,lines:k,hideHints:c||V,hasCodeDiff:l,isCopyHighlightActive:V,onInstancePillClick:e.onInstancePillClick}),shouldShowMore:y&&I>0,showMoreLinesCount:I,onShowMore:()=>b(!1),copyHoverClassName:o&&V?"code_panel--codeWellSelected--tyhKE":void 0,leftGutter:l?function(e,t=!1){return f.createElement("div",{className:nb()("code_panel--diffIndicatorColumn--I8lZt code_panel--diffIndicatorBase--F3GaS",{"code_panel--hidden--tLzAD":t})},e.map((e,t)=>f.createElement("div",{className:nb()({"code_panel--diffIndicator--yVnUR code_panel--diffIndicatorBase--F3GaS":!0,"code_panel--diffIndicatorAdded--LZbgl code_panel--diffIndicator--yVnUR code_panel--diffIndicatorBase--F3GaS":e.diff===wm.j5.ADDED,"code_panel--diffIndicatorRemoved--y5BTV code_panel--diffIndicator--yVnUR code_panel--diffIndicatorBase--F3GaS":e.diff===wm.j5.REMOVED}),key:t},e.diff===wm.j5.ADDED?"+":e.diff===wm.j5.REMOVED?"-":null)))}(k,V):wA(k),onContextMenu:M,footer:m?f.createElement(wP,{type:p},m):void 0}))}function wA(e){return f.createElement("div",{className:"code_panel--lineNumbersColumn--MYlJR"},e.map((e,t)=>f.createElement("div",{className:"code_panel--lineNumber--qBF2J code_panels_shared--code--VPQ05",key:t},t+1)))}function wO({code:e,lines:t,hideHints:n,hasCodeDiff:a,isCopyHighlightActive:l=!1,onInstancePillClick:r}){let i=f.useCallback(e=>{var t;let n;let a=e.target;a.classList.contains("instance-pill")?n=a:(null==(t=a.parentElement)?void 0:t.classList.contains("instance-pill"))&&(n=a.parentElement),n&&(null==r||r(n.dataset.id||""))},[r]),o=({index:r})=>{var o;let s=t[r],c=8*(0,wm.Gj)(s).length+16+8,d=f.createElement("span",{style:{display:"inline-block",paddingLeft:c,paddingRight:8,textIndent:-16,flexGrow:1},key:"code",dangerouslySetInnerHTML:{__html:s.code+"\n"},"data-testid":`${e.name}${r}`,role:"none",onClick:i}),u=s.hint,m=void 0!==u&&u.type===wc.bv.Tooltip?f.createElement(wf,{hint:function(e){switch(e.id){case wc.eo.NoStyleForColor:return(0,eN.t)("dev_handoff.code.hints.color_missing_style");case wc.eo.VariableNotResolved:return(0,eN.t)("dev_handoff.code.hints.variable_not_resolved");case wc.eo.VariableSuggested:return(0,eN.t)("dev_handoff.variables.inferred_value",{value:e.value});case wc.eo.MultipleVariables:return(0,eN.t)("dev_handoff.code.hints.multiple_variables",{value:e.value});case wc.eo.AbsolutePosition:return(0,eN.t)("dev_handoff.code.hints.absolute_position",{name:e.name});case wc.eo.BordersDontTakeUpSpace:return(0,eN.t)("dev_handoff.code.hints.borders_dont_take_up_space");case wc.eo.SinglePaint:return(0,eN.t)("dev_handoff.code.hints.single_paint");case wc.eo.UnsupportedPaint:return(0,eN.t)("dev_handoff.code.hints.unsupported_paint");case wc.eo.UnsupportedGradientPaint:return(0,eN.t)("dev_handoff.code.hints.unsupported_gradient_paint");case wc.eo.LeadingTrim:return(0,eN.t)("dev_handoff.code.hints.leading_trim");case wc.eo.BackgroundBlendModePlusLighterDarker:return(0,eN.t)("dev_handoff.code.hints.background_blend_mode_plus_lighter_darker",{value:e.value});case wc.eo.PlusDarker:return(0,eN.t)("dev_handoff.code.hints.plus_darker");case wc.eo.SwiftUISeparateBorderWidth:return(0,eN.t)("dev_handoff.code.hints.swift_ui_separate_border_width");case wc.eo.SwiftUIBlurNoSpread:return(0,eN.t)("dev_handoff.code.hints.swift_ui_blur_no_spread");case wc.eo.SwiftUIOnlySingleFillForShapes:return(0,eN.t)("dev_handoff.code.hints.swift_ui_only_single_fill_for_shapes");case wc.eo.SwiftUISeparateCornerRadius:return(0,eN.t)("dev_handoff.code.hints.swift_ui_separate_corner_radius");case wc.eo.SwiftUISpacersForSpaceBetween:return(0,eN.t)("dev_handoff.code.hints.swift_ui_spacers_for_space_between");case wc.eo.ComposeSeparateBorderWidth:return(0,eN.t)("dev_handoff.code.hints.compose_separate_border_width");case wc.eo.ComposeShadowIncompatibility:return(0,eN.t)("dev_handoff.code.hints.compose_shadow_incompatibility");case wc.eo.ComposeBlurTip:return(0,eN.t)("dev_handoff.code.hints.compose_blur_tip");case wc.eo.DisplayP3Fallback:return(0,eN.t)("dev_handoff.code.hints.display_p3_fallback")}}(u),inCodeWell:!0,hidden:n}):null,p=null==(o=e.lines[r])?void 0:o.diff;return f.createElement("div",{key:r,className:nb()({"code_panel--line--bGKOg":!0,"code_panel--added--VL9y5":p===wm.j5.ADDED&&!l,"code_panel--removed--MFSlT":p===wm.j5.REMOVED&&!l,"code_panel--nonDiffLine--MnQtc":a&&p!==wm.j5.ADDED&&p!==wm.j5.REMOVED&&!l,"code_panel--disabled--uXTT4":a&&p===wm.j5.REMOVED&&l})},d,m)};return f.createElement("code",{className:nb()("code_panel--generatedCode--XGoAV code_panels_shared--code--VPQ05",wy.y),"data-lang":e.language,style:{minWidth:"100%",whiteSpace:"normal"}},t.map((e,t)=>o({index:t})))}function wL({title:e,muted:t,actions:n,type:a,leftActions:l}){return f.createElement("div",{className:"code_panel--codePanelHeader--lCUOK"},f.createElement("div",{className:nb()({"code_panel--codePanelHeaderWrapper--yzBFb":!0,[ww]:"connected"===a,[wT]:"manual"===a})},l,f.createElement(iy.xw,{className:t?"code_panel--mutedCodePanelTitle--F27k- text--fontPos11--2LvXf text--_fontBase--QdLsd":"code_panel--codePanelTitle--00tOe text--fontPos11--2LvXf text--_fontBase--QdLsd","data-testid":"devHandoffFocusPanelTitle"},e),f.createElement("div",{className:"code_panel--codePanelActions--aWYEs text--fontPos11--2LvXf text--_fontBase--QdLsd"},n)))}function wP({children:e,type:t}){return f.createElement("div",{className:"code_panel--codePanelFooter--NsRyh"},f.createElement("div",{className:nb()({"code_panel--codePanelFooterWrapper--hHhIS":!0,[ww]:"connected"===t,[wT]:"manual"===t})},e))}function wD({header:e,content:t,leftGutter:n,footer:a,type:l,shouldShowMore:r,showMoreLinesCount:i,onShowMore:o,onContextMenu:s,copyHoverClassName:c}){let[d,u]=f.useState(null),m=d&&d.value?"code_panel--codeSectionWithScrollBar--TQtKZ code_panel--codeSection--Mb2CO":"code_panel--codeSection--Mb2CO",p=f.useCallback(e=>{u({value:e})},[]),_=!!n,g=!!a,h=f.useRef(null);return f.createElement("div",{className:nb()("code_panel--codeSectionContainer--1FOYa")},e,f.createElement("div",{className:nb()(wb,c,{[wC]:_,"code_panel--codeWellWithFooter--VMsGl":g,[ww]:"connected"===l,[wT]:"manual"===l})},_&&n,f.createElement("div",{className:"code_panel--codeWellContent--OYA-P"},f.createElement(wi,{onCanScrollChanged:p,className:nb()(m),scrollBarAlways:!0,childRef:h},f.createElement("div",{onContextMenu:s,style:{width:"fit-content",minWidth:"100%"},ref:h},t)),r&&f.createElement("div",{className:"code_panel--showMoreContainer--CD0sl"},f.createElement(wo.d,{label:(0,eN.t)("dev_handoff.code.show_more",{count:i}),onClick:o})))),g&&a)}var wR=n(308977),wM=n(626217);let wF=(0,e4.eU)({});var wB=n(395900),wU=n(539130),wH=n(680001),wG=n(387019),wV=n(370934),wK=n(945099),wW=n(544818),wz=n(92597),wj=n(598393),wJ=n(786110),wY=n(681655),wX=n(484387),wq=n(694517),wZ=n(117837),wQ=n(455057),w$=n(468794),w0=n(60088),w1=n(564092),w2=n(712685);let w5="content_panel--textContentSelected--7ms8o",w4={format:()=>(0,eN.t)("inspect_panel.copy_as")};function w3(){let{content:e,numSelected:t,numSelectedByType:n}=(0,N.R)(e=>({content:e.mirror.selectionProperties.nodeText,numSelected:e.mirror.selectionProperties.numSelected,numSelectedByType:e.mirror.selectionProperties.numSelectedByType}));return 1===t&&(null==n?void 0:n.TEXT)===1&&e?f.createElement(w7,{content:e,contentToCopy:e}):null}function w6(e){let{basisContent:t="",changeContent:n=""}=e,a=f.useMemo(()=>(0,w$.pR)(t,n).map(e=>{let t=e.added?"content_panel--addedContent--uOvhd":e.removed?"content_panel--deletedContent--9h3wk":"";return f.createElement("span",{key:e.value,className:t},e.value)}),[t,n]);return f.createElement(w7,{content:f.createElement(f.Fragment,null,a),contentToCopy:n,showVariable:!1})}function w7({content:e,contentToCopy:t,showVariable:n=!0}){let{value:a,eventHandlers:l,isHovered:r}=(0,wu.ZQ)(w5,w5),i=(0,_.wA)(),{Dropdown:o,toggleDropdown:s,dropdownTargetRef:c,isDropdownShown:d}=(0,w0.B)("CONTENT_COPY_DROPDOWN"),u=(0,wu.SV)("inspection_panel_copy_text_variable"),m=(0,w1.oU)("TEXT_DATA",{type:ei.Z_n.STRING,resolvedType:ei.rXF.STRING,value:t}),p=m.variableDisplayName,g=!!p&&n,h=(e,t)=>{i(wd.lW({stringToCopy:e,ignoreLineBreaks:!1})),u({value:e,valueType:t})},E=[{displayText:(0,eN.t)("inspect_panel.copy_variable_name"),callback:()=>{p&&h(p,"name")}},{displayText:(0,eN.t)("inspect_panel.copy_variable_content"),callback:()=>{h(t,"value")}}],v=g?f.createElement(f.Fragment,null,f.createElement(ow.uQ,{ref:c,containerClassName:nb()("content_panel--copyDropdown--yV1PF",d&&"content_panel--copyDropdownVisible--SijP0"),formatter:w4,property:null,onClick:s}),f.createElement(o,{items:E,showPoint:!0})):f.createElement("span",{...l,className:"content_panel--copyButton--fESrV blue_link--blueLink--9rlnd",onClick:()=>h(t,"value"),role:"button",tabIndex:0},(0,eN.tx)("inspect_panel.copy"));return f.createElement(wu.VZ,{title:(0,eN.t)("inspect_panel.property.content"),hideHeader:!0,padding:wu.UZ.NONE,recordingKey:"content"},f.createElement("div",{className:"content_panel--contentPanel--mOfKM"},f.createElement(wu.SH,{title:(0,eN.t)("inspect_panel.property.content"),isHovered:r||d,recordingKey:"contentHeader",additionalHeaders:v}),f.createElement("div",{className:"content_panel--contentPanelContents--efLaM text--fontPos11--2LvXf text--_fontBase--QdLsd"},g&&f.createElement(w2.w,{text:p,isInferred:m.isSuggested,disableHover:!0,dataTestId:"textVariableName",tooltip:m.isSuggested?(0,eN.t)("dev_handoff.variables.inferred_text"):t}),f.createElement("div",{className:nb()("content_panel--textContent--uGoXz common--well--J0WtH",a),dir:"auto","data-testid":"textContent"},e))))}var w8=n(746893),w9=n(561004),Te=n(554294),Tt=n(691651),Tn=n(978527),Ta=n(252828);function Tl({plugin:e}){let[t,n]=(0,S.fp)(b8.H),a=(0,_.wA)(),l=(0,S.md)(Te.vT);return f.createElement(a7.D8,{role:"button",recordingKey:n_.Pt("activePluginTab","tab"),onMouseDown:()=>{n(b8._.PLUGIN),a(j.b({[w8.xb]:!0}))},tabIndex:0},f.createElement(fy.Y,{width:"fill-parent",horizontalAlignItems:"space-between",verticalAlignItems:"center",padding:{left:16,right:8,top:4,bottom:4}},f.createElement("div",{className:a8.cx.minW0.$},f.createElement(fy.Y,{direction:"horizontal",verticalAlignItems:"center",spacing:8},f.createElement(Tn.d,{plugin:e}),f.createElement(sc.E,{fontWeight:"bold",truncate:!0,showTooltipWhenTruncated:!0},e.name))),f.createElement(tN.Jn,{className:a8.cx.flexShrink0.$,onClick:()=>{(function(e){switch(e){case"related-link-click":case"related-link-auth":case"codegen":case"related-link-preview":case"auto-run":return!0;default:return!1}})(l)&&n(b8._.PRIMARY),(0,w9.wY)()}})))}function Tr({text:e,isActive:t,onClick:n,recordingKey:a}){return f.createElement(a7.D8,{role:"button",recordingKey:n_.Pt(a,"tab"),onMouseDown:n,tabIndex:0,className:t?"dev_handoff_panel_tab_group--tabActive--Ex7NX pages_panel--tabActive--BitzC pages_panel--tab--Uge5B":"dev_handoff_panel_tab_group--tab--Y0iYX pages_panel--tab--Uge5B","data-label":e},e)}function Ti(){let[e,t]=(0,S.fp)(b8.H),n=(0,_.wA)();return f.createElement(Tr,{text:(0,eN.t)("dev_handoff.tab.plugins"),isActive:"plugin"===e,recordingKey:"pluginsTab",onClick:()=>{t(b8._.PLUGIN),n(j.b({[w8.xb]:!0}))}})}function To(){let[e,t]=(0,S.fp)(b8.H);return f.createElement(Tr,{text:(0,eN.t)("dev_handoff.tab.inspect"),isActive:e===b8._.PRIMARY,recordingKey:"inspectTab",onClick:()=>{t(b8._.PRIMARY)}})}function Ts(){return(0,n6.GS)()?f.createElement("div",{className:a8.cx.wFull.bb1.bSolid.colorBorder.$},f.createElement("div",{className:"dev_handoff_panel_tab_group--tabsHeaderSingle--G5OnU dev_handoff_panel_tab_group--tabsHeader--Tv3Sg pages_panel--tabsHeader--ez-pH"},f.createElement(Tr,{text:(0,eN.t)("dev_handoff.tab.comment"),isActive:!0,onClick:nf.lQ,recordingKey:"commentTab"}))):null}function Tc(){let e="ui3"===(0,h.DP)().version;return f.createElement("div",{className:a8.cx.wFull.flex.flexRow.flexShrink0.itemsCenter.borderBox.bSolid.bb1.pr8.colorBorder.justifyBetween.colorBg.$},e?f.createElement("div",{className:a8.cx.flex.flexRow.itemsStart.hFull.$},f.createElement("div",{className:"dev_handoff_panel_tab_group--tabsHeader--Tv3Sg pages_panel--tabsHeader--ez-pH"},f.createElement(To,null),f.createElement(Ti,null))):f.createElement("div",{className:a8.cx.flex.flexRow.itemsStart.hFull.$},f.createElement(To,null),f.createElement(Ti,null)),f.createElement(Tt.qs,null),e&&f.createElement(Ta.HT,null))}function Td(){let e=(0,S.md)(Te.be),[t,n]=(0,S.fp)(b8.H),{commentsActive:a,versionHistoryActive:l}=(0,N.R)(e=>({commentsActive:e.mirror.appModel.currentTool===lc.ec.tool,versionHistoryActive:e.mirror.appModel.activeCanvasEditModeType===ei.m1T.DEV_HANDOFF_HISTORY}));if(l)return null;if(a)return f.createElement(Ts,null);let r=e&&t===b8._.PLUGIN?f.createElement(Tl,{plugin:e}):null;return f.createElement("div",null,f.createElement(Tc,null),r)}var Tu=n(470669),Tm=n(581250),Tp=n(999918);function Tf(e){let t=(0,Tm.Q)();return f.createElement(T_,{dropdownPrefix:e.dropdownPrefix,inspectionModeLayout:e.inspectionModeLayout,preferencesApi:t})}function T_({dropdownPrefix:e,inspectionModeLayout:t="drop-down",preferencesApi:n}){let a=(0,U._I)(),l=e?`${e}_DEV_HANDOFF_PREFERENCES_DROPDOWN`:"DEV_HANDOFF_PREFERENCES_DROPDOWN",r=e?`${e}_DEV_HANDOFF_LANGUAGE_DROPDOWN`:"DEV_HANDOFF_LANGUAGE_DROPDOWN",i=(0,_.wA)(),{inspectionMode:o,setInspectionMode:s,supportsAlternativeUnits:c,preferenceOptions:d,preferences:u,codeLanguageApi:m,inspectionModes:p}=n,g=(0,nT.U)(),E=f.useRef(null),v=(null==g?void 0:g.type)===l,y=sL.z4.getIsExtension(),b=p.includes("code"),C=(y||"code"===o)&&b,w=f.useMemo(()=>p.map(e=>f.createElement(ow.c$,{key:e,value:e})),[p]),T="ui3"===(0,h.DP)().version;return f.createElement(f.Fragment,null,f.createElement(wu.VZ,{hideHeader:!0,padding:wu.UZ.NONE,noBorder:!0,recordingKey:"preferences"},f.createElement("div",{className:"preferences--preferencesRow--uJxcE"},!y&&("drop-down"===t?f.createElement(ow.l6,{id:`${e}_dev_handoff_inspection_mode`,property:o,formatter:wK.a9,onChange:s,dispatch:i,dropdownShown:g,className:"preferences--preferencesTitle--Hnoyt",dropdownWidth:T?"120px":"auto",onShowDropdownOverride:a?void 0:nf.lQ},w):f.createElement(Tg,{onTabClick:s,selectedTabKey:o,tabs:p.map(e=>({key:e,label:wK.a9.format(e)})),recordingKey:"preferences-tabs"})),f.createElement("div",{className:"preferences--preferencesRight--UCEaD"},C&&f.createElement(Tu.ls,{dropdownId:r,codeLanguageApi:m}),f.createElement("div",{ref:E},f.createElement(iG.YW,{svg:Tp.A,className:"preferences--preferencesDropdown--n0hD3",onClick:()=>{v?i(nI.oB()):a&&i(nI.j7({type:l}))},"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.inspect_settings"),"data-tooltip-show-above":!0,selected:v,disabled:!C||0===d.length,recordingKey:"preferencesDropdownButton"}))))),v&&E.current&&(0,oQ.createPortal)(f.createElement(iV.j,{items:d,onSelectItem:e=>{e.callback&&e.callback("",null,i)},recordingKey:"preferencesDropdown",dispatch:i,parentRect:E.current.getBoundingClientRect(),showPoint:!1,alwaysShowCheckMarkOffset:!0,activatePathOnMount:c?u.unit===ei.tKW.PIXEL?[d[1].displayText]:[d[2].displayText]:void 0}),document.getElementById("dev-handoff-inspect-panel")))}function Tg({tabs:e,onTabClick:t,selectedTabKey:n,recordingKey:a}){return f.createElement("div",{className:nb()(a8.cx.flex.flexRow.$,"preferences--preferencesInnerRow--o6o3N")},e.map(e=>f.createElement(Tr,{key:e.key,text:e.label,isActive:n===e.key,onClick:()=>t(e.key),recordingKey:n_.Pt(a,e.key)||""})))}var Th=n(723081),TE=n(979385),Tv=n(880854),Ty=n(358171);let Tb=(0,e4.eU)(lE.q.instance);var TC=n(349719),Tw=n(249436),TT=n(147206),Tx=n(960628),TN=n(829632),TS=n(376485),Tk=n(638311);let TI=class{async generateCode({plugin:e,nodeId:t,handoffLanguage:n,canRunCodegenArgs:a}){var l;let r=n.pluginLanguage;if((0,wV.dW)(e,r?(0,Tk.X)(e,r):null),!(0,TT.Pq)(a))throw Error("Not allowed to run codegen");try{return await TN.R.instance.enqueue({runPluginArgs:{plugin:e,command:"generate",queryMode:!1,runMode:"codegen",triggeredFrom:"codegen",openFileKey:(null==(l=ET.D.getState().openFile)?void 0:l.key)||"",isWidget:!1},onStart:async()=>await (0,Tx.o5)(t),mode:"run-forever"})??[]}catch(e){console.error(e)}return[]}async maybeTerminatePlugin(e){let t=(0,w9.hw)();if(t)switch(e.type){case"local-plugin":(0,TS.ZQ)(t)&&e.id===String(t.localFileId)&&((0,Tx.f$)(),await (0,w9.wY)());return;case"published-plugin":e.id===t.plugin_id&&((0,Tx.f$)(),await (0,w9.wY)());return;case"first-party":return;default:(0,nm.xb)(e)}}};TI.instance=new TI;var TA=n(921199);function TO(e,t){(0,Z.sx)("dev_handoff.codegen",{elapsedMs:e,languageType:t.type},{forwardToDatadog:!0})}function TL({selectedNodeID:e,extensionLanguage:t,onFinish:n=nf.lQ,sceneGraph:a,selectedVersion:l,preferences:r,plugin:i}){let o=(0,Tw.R)(),s=(0,_.d4)(e=>e.versionHistory.activeId),c=(0,S.md)(Tb),d=(0,TE.zL)(),[{code:u,error:m},p]=f.useState({code:[],error:void 0}),[g,h]=f.useState(!1),E=f.useRef(null),v=(0,Ty.px)(a),y=(0,_.d4)(Tv.S,b_.c2);return f.useEffect(()=>{v.rebuildNodeCache()},[v,s,l]),f.useEffect(()=>{let a=!1;return(async()=>{if(!e||e===lg.AD)return;let l=b7.sn.start("dev_handoff.codegen");if("local-plugin"===t.type||"published-plugin"===t.type){if(i){let r=[],o=null,s=t,c=(0,Tk.m)(i).map(({value:e})=>e);c.includes(s.pluginLanguage??"")||(s=d({...s,pluginLanguage:c[0]??""}));try{if(E.current&&(await E.current,a))return;h(!0),r=await TI.instance.generateCode({plugin:i,nodeId:e,handoffLanguage:s,canRunCodegenArgs:y})}catch(e){o=e}finally{a||h(!1)}if(a)return;let u={code:(0,TA.Z0)(r),error:o};p(u),n(u.code),TO(l.stop(),s),TC.le(r.map(e=>({code:e.code,language:e.language})))}return}let{code:o,error:s}=await v.runExtension({selectedNodeId:e,codegenPluginID:t.id,preferences:r,canRunCodegenArgs:y});a||(p({code:o,error:s}),n(o),TO(l.stop(),t))})(),()=>{a=!0}},[n,e,o,t,r,i,s,d,a,c,l,v,y]),f.useEffect(()=>()=>{E.current=TI.instance.maybeTerminatePlugin(t)},[t]),{code:u,error:m,isLoading:g&&"first-party"!==t.type}}var TP=n(625599),TD=n(286723);let TR="compare_changes_right_panel--sidePanel--wHvM4";function TM(e){let{header:t,changedKeys:n,oldValueMap:a,newValueMap:l}=e,r=(0,_.wA)(),i=new Th._r,o=e=>e&&"Variables"===t?i.format(e):e;return f.createElement("div",{className:"compare_changes_right_panel--propertiesTable--eA09s"},t&&f.createElement(wu.I7,{title:t}),n.map(e=>{var t,n,i,s;return f.createElement(wu.M6,{key:e,name:o((null==(t=a[e])?void 0:t.displayName)||(null==(n=l[e])?void 0:n.displayName)),basis:{value:(null==(i=a[e])?void 0:i.displayValue)||(0,eN.t)("collaboration.branching_node_treatments.value.empty_dash"),onClick:()=>{var t;return(0,TD.WD)(null==(t=a[e])?void 0:t.displayValue,r)}},change:{value:(null==(s=l[e])?void 0:s.displayValue)||(0,eN.t)("collaboration.branching_node_treatments.value.empty_dash"),onClick:()=>{var t;return(0,TD.WD)(null==(t=l[e])?void 0:t.displayValue,r)}}})}))}function TF({layerChangeNodeId:e,layerBasisNodeId:t,layerChangeSceneGraph:n,layerBasisSceneGraph:a,selectedVersion:l,displayableChanges:r,preferencesApi:i}){let o=(0,eb.eY)(),s=(null==a?void 0:a.get(t??""))??o.get(t??""),c=(null==n?void 0:n.get(e??""))??o.get(e??""),d=(null==s?void 0:s.type)==="TEXT"||(null==c?void 0:c.type)==="TEXT",u=!t||t===lg.AD,m=!e||e===lg.AD,p=u?(0,eN.t)("dev_handoff.compare_changes.banner.added_layer"):(0,eN.t)("dev_handoff.compare_changes.banner.removed_layer"),_="code"===i.inspectionMode,{setInspectionMode:g}=i,h=(0,f.useCallback)(()=>{g("properties")},[g]);return f.createElement("div",{className:TR},(u||m)&&f.createElement("div",{className:"compare_changes_right_panel--banner--lsWBi"},f.createElement(wQ._,{dataTestId:"cc-code-panel-banner",color:u?wQ.S.INFORMATION:wQ.S.ERROR,text:p})),f.createElement(T_,{dropdownPrefix:"COMPARE_CHANGES",inspectionModeLayout:"tabs",preferencesApi:i}),f.createElement("div",{className:"compare_changes_right_panel--dividerBottom--FmR5V"}),f.createElement(i6.P,{key:`${e}-${t}`},_?f.createElement(TU,{layerChangeNodeId:e,layerBasisNodeId:t,layerChangeSceneGraph:n,layerBasisSceneGraph:a,selectedVersion:l,key:`${e||""}-${t||""}`,preferences:i.preferences,codeLanguage:i.codeLanguageApi.codeLanguage,plugin:i.codeLanguageApi.activeCodegenPlugin,onSwitchToPropertiesMode:h}):r&&!u&&!m&&f.createElement(TB,{displayableChanges:r,layerBasisNodeId:t,layerChangeNodeId:e}),d?f.createElement(w6,{basisContent:null==s?void 0:s.characters,changeContent:null==c?void 0:c.characters}):null))}function TB({displayableChanges:e,layerChangeNodeId:t,layerBasisNodeId:n}){var a;let l=(0,_.wA)(),r=null==(a=(0,TP.lE)(e,e=>(0,lg.dI)(e.basis.guid)===n||(0,lg.dI)(e.change.guid)===t))?void 0:a.changesToDisplay;if(!r)return null;let i=r.filter(e=>"textData"!==e.identifier),o=i.filter(e=>"lego-table"!==e.oldValue()),s=i.filter(e=>"lego-table"===e.oldValue());return i&&i.length>0?f.createElement(f.Fragment,null,o.length>0&&f.createElement("div",{className:"compare_changes_right_panel--propertiesTableCompareChanges--NnOU6"},o.map(e=>{let t=e.oldValue(),n=e.newValue();return f.createElement(wu.M6,{name:e.name(),basis:{value:t,onClick:()=>(0,TD.WD)(t,l)},change:{value:n,onClick:()=>(0,TD.WD)(n,l)}})})),s.map(e=>e.newValue())):null}let TU=f.memo(({layerChangeNodeId:e,layerBasisNodeId:t,layerChangeSceneGraph:n,layerBasisSceneGraph:a,selectedVersion:l,codeLanguage:r,preferences:i,plugin:o,onSwitchToPropertiesMode:s})=>{let{code:c,codeToCopy:d,hasDiffs:u}=function({layerChangeNodeId:e,layerBasisNodeId:t,layerChangeSceneGraph:n,layerBasisSceneGraph:a,selectedVersion:l,codeLanguage:r,preferences:i,plugin:o}){let s=f.useMemo(()=>r.id===wR.uz&&"first-party"===r.type?{id:Ty.qZ.CSS,type:"first-party"}:r,[r]);return function({codeForBasisNode:e,codeForChangeNode:t}){let n=performance.now(),a={};t.code.forEach(t=>{let n=e.code.find(e=>e.name===t.name);a[t.name]={changed:t,basis:n||{...t,lines:[]}}}),e.code.forEach(e=>{a[e.name]||(a[e.name]={changed:{...e,lines:[]},basis:e})});let l=Object.values(a).map(e=>(function(e,t){let n=e.lines.map(e=>e.code).join("\n"),a=t.lines.map(e=>e.code).join("\n"),l=(0,w$.Pp)(a,n),r=0,i=0,o=[];return l.forEach(n=>{let a=n.count??0;for(let l=0;l<a;l++){let a;n.added?(a={...e.lines[r],diff:wm.j5.ADDED},r++):(n.removed?a={...t.lines[i],diff:wm.j5.REMOVED}:(a=e.lines[r],r++),i++),o.push(a)}}),{...e,lines:o}})(e.changed,e.basis)),r=l.some(e=>e.lines.some(e=>void 0!==e.diff)),i=Math.trunc(performance.now()-n);return(0,Z.sx)("dev_mode.compare_changes.diffing",{type:"code",durationMs:i},{forwardToDatadog:!0}),{code:l,codeToCopy:t.code,hasDiffs:r}}({codeForBasisNode:TL({selectedNodeID:t??void 0,extensionLanguage:s,sceneGraph:a,selectedVersion:l,preferences:i,plugin:o}),codeForChangeNode:TL({selectedNodeID:e??void 0,extensionLanguage:s,sceneGraph:n,preferences:i,plugin:o})})}({selectedVersion:l,layerChangeNodeId:e,layerBasisNodeId:t,layerChangeSceneGraph:n,layerBasisSceneGraph:a,codeLanguage:r,plugin:o,preferences:i});return f.createElement("div",{className:a8.cx.pb8.$},!u&&f.createElement("div",{className:a8.cx.pt16.pl16.pr16.pb8.$},f.createElement(wQ._,{color:wQ.S.PLAIN,text:f.createElement(f.Fragment,null,f.createElement("p",null,(0,eN.t)("dev_handoff.compare_changes.banner.no_changes")),f.createElement("div",{className:"compare_changes_right_panel--bannerLink--pPJYo",onClick:s,role:"button",tabIndex:0},(0,eN.t)("dev_handoff.compare_changes.banner.no_changes_link")))})),c.map(e=>{let t=d.find(t=>t.name===e.name);return e.lines.length>0?f.createElement("div",{className:"compare_changes_right_panel--codeWellWrapper--IIgCk",key:e.name},f.createElement(wI,{code:c,codeToCopy:d,section:e,sectionToCopy:t,collapseLongSections:!1,copyActionEnabled:!!t,hasCodeDiff:!0,hideHints:!0,recordingKey:n_.Pt("styles_code_panel",e.name)})):null}))});function TH({text:e}){return f.createElement("div",{className:TR},f.createElement("div",{className:"compare_changes_right_panel--selectLayerText--bQQTr text--fontPos11--2LvXf text--_fontBase--QdLsd"},e))}var TG=n(499597),TV=n(928229),TK=n(125798),TW=n(754369),Tz=n(23318),Tj=n(236192),TJ=n(292404);let TY="overlay_highlight--added--28SgH",TX="overlay_highlight--removed--9BsT-",Tq="overlay_highlight--edited---lnVX",TZ="overlay_highlight--interactive--f4-mM",TQ="overlay_highlight--invisible--GGcha",T$=(0,lf.jz)("2px"),T0=(0,lf.jz)("1px"),T1=(0,lf.jz)("8px"),T2=(0,lf.jz)("16px"),T5=(0,f.createContext)(null);function T4({children:e,value:t}){return f.createElement(T5.Provider,{value:t},e)}let T3=f.memo(function({node:e,rect:t,borderStyle:n,borderSize:a,renderTag:l,renderOverlay:r,tagValue:i,interactive:o,invisible:s,onBoxClicked:c,onBoxHovered:d,recordingKey:u}){let m=e.value,p=1===a?T0:T$,_=!!i,g=_?T2:T1,h=_&&i>99,E=_&&(i>99?"99+":i),v=(0,f.useCallback)(t=>{t.stopPropagation(),null==c||c(e)},[c,e]),y=n_.rf(u,"click",v),b=(0,f.useCallback)(()=>{null==d||d(m)},[m,d]),C=(0,f.useCallback)(()=>{null==d||d(null)},[d]);return f.createElement(f.Fragment,null,f.createElement("div",{role:"button",tabIndex:0,className:nb()("overlay_highlight--highlight--x-16k",{"overlay_highlight--thin--t8yeW":1===a,"overlay_highlight--dashed--Z34AW":0===n,"overlay_highlight--solid--XkPFI":1===n,"overlay_highlight--none--poZGj":2===n,[TY]:"added"===m.state,[TX]:"removed"===m.state,[Tq]:"changed"===m.state,[TZ]:o,[TQ]:s}),style:{transform:`translate(${t.x-p}px, ${t.y-p}px)`,width:t.width,height:t.height},onMouseEnter:b,onMouseLeave:C,onClick:y},r&&f.createElement("div",{className:"overlay_highlight--highlightOverlay--QsoQT"})),l&&m.state&&f.createElement("div",null,f.createElement("span",{onClick:y,onMouseEnter:b,onMouseLeave:C,tabIndex:0,role:"button","data-preferred-theme":"added"!==m.state?"light":"dark",className:nb()("overlay_highlight--actionTag--osNjG",{[TY]:"added"===m.state,[TX]:"removed"===m.state,[Tq]:"changed"===m.state,"overlay_highlight--large--DPhJK":_,"overlay_highlight--wideText--lXSz9":h,[TZ]:o,[TQ]:s}),style:{transform:`translate(${t.x-g/2-T0}px, ${t.y-g/2-T0}px)`}},E)))});var T6=(e=>(e[e.DASHED=0]="DASHED",e[e.SOLID=1]="SOLID",e[e.NONE=2]="NONE",e))(T6||{}),T7=(e=>(e[e.WIDE=0]="WIDE",e[e.THIN=1]="THIN",e))(T7||{});let T8=e=>e.beforeNodeId+":"+e.afterNodeId,T9=e=>!e.parent&&!e.value,xe=e=>{var t;return!e.parent||T9(e.parent)||!!(null==(t=e.parent.value)?void 0:t.isRootFrame)},xt=e=>e.descendantsCount>0?e.descendantsCount:void 0,xn=e=>{var t,n;return e.value&&!e.value.isSelected&&!!(null==(n=null==(t=e.parent)?void 0:t.value)?void 0:n.directParentToSelection)},xa=(e,t,n)=>{if(!e.value)return!1;let a=e.value;return!t||a.isSelected||a.ancestorOfSelectedNode||n||xe(e)||xn(e)},xl=(e,t)=>{let n=e.transformRect(new su.r(new TJ.M(t.x,t.y),new TJ.M(t.width,t.height)));return{x:n.left(),y:n.top(),width:n.width(),height:n.height()}},xr=(e,t)=>{var n;return t&&t===(null==(n=e.value)?void 0:n.state)};function xi({node:e,onBoxClicked:t,onBoxHovered:n,selectedNodeId:a,expandedLayers:l,transform:r,ignoreState:i,interactive:o,hoveredNodeIdAtom:s,recordingKey:c}){var d,u;let m=T9(e),p=xr(e,i),_=!!(e.value&&e.value.isSelected),g=(0,f.useMemo)(()=>(0,e4.eU)(t=>{let n=t(s);return!!(e.value&&xs(e.value,n))}),[e,s]),h=(0,S.md)(g),E=!p&&((null==(d=e.value)?void 0:d.ancestorOfSelectedNode)||_||!!(null==(u=e.value)?void 0:u.isRootFrame)||m),v=!!a&&a!==lg.AD,y=(0,f.useMemo)(()=>{var t,n;if((0,TP.aR)(e)&&e.value.rect){let a=e.value,l=e.value.rect,i=xe(e),s=xn(e),c=!!(null==(n=null==(t=e.parent)?void 0:t.value)?void 0:n.isSelected),d=_?1:h||s||c||a.ancestorOfSelectedNode||i&&!a.ancestorOfSelectedNode?0:2,u=_||h?0:1,m=!_&&!E&&(c||h||i&&!v),f=h&&!_&&!E,g=xl(r,l),y=o&&(h||_);if(!p)return{rect:g,renderTag:m,borderStyle:d,borderSize:u,renderOverlay:f,tagValue:xt(a),invisible:y,node:e}}},[e,v,E,_,r,h,o,p]);return f.createElement(f.Fragment,null,y&&f.createElement(T3,{key:(T8(y.node.value),"inactive"),recordingKey:n_.Pt(c,T8(y.node.value)),isSelected:_,interactive:o,node:y.node,invisible:y.invisible,rect:y.rect,renderTag:y.renderTag,borderStyle:y.borderStyle,borderSize:y.borderSize,renderOverlay:y.renderOverlay,tagValue:y.tagValue,onBoxClicked:t,onBoxHovered:n}),E&&e.children&&e.children.map(d=>{var u;return d.value&&xa(d,v,!!(null==(u=e.value)?void 0:u.isSelected))&&f.createElement(xi,{onBoxClicked:t,onBoxHovered:n,key:T8(d.value),node:d,selectedNodeId:a,expandedLayers:l,transform:r,ignoreState:i,interactive:o,hoveredNodeIdAtom:s,recordingKey:c})}))}let xo=({box:e,isSelected:t})=>({...e,ancestorOfSelectedNode:!1,directParentToSelection:!1,isSelected:t,descendantsCount:0}),xs=(e,t)=>!!t&&t!==lg.AD&&!!e&&(t===e.afterNodeId||t===e.beforeNodeId),xc=(e,t)=>!!t&&t!==lg.AD&&!!e&&(t===e.afterNodeId||t===e.beforeNodeId);function xd(e){let{rootBox:t,expandedLayers:n,selectedNodeId:a,transform:l,ignoreState:r,hoveredNodeIdAtom:i,recordingKey:o}=e,s=(0,S.md)(i),c=(0,f.useMemo)(()=>{if(!t||!s)return;let e=(0,TP.lE)(t,e=>xs(e,s)&&!xc(e,a));return e&&{value:e,children:void 0}},[t,s,a]),d=(0,f.useMemo)(()=>{if(!t||!a)return;let e=(0,TP.lE)(t,e=>xc(e,a));return e&&{value:e,children:void 0}},[t,a]);return f.createElement(f.Fragment,null,d&&f.createElement(xi,{node:d,selectedNodeId:a,expandedLayers:n,transform:l,ignoreState:r,interactive:!1,hoveredNodeIdAtom:i,recordingKey:o}),c&&f.createElement(xi,{node:c,selectedNodeId:a,expandedLayers:n,transform:l,ignoreState:r,interactive:!1,hoveredNodeIdAtom:i,recordingKey:o}))}let xu=f.memo(function(e){let{rootBox:t,expandedLayers:n,onBoxClicked:a,onBoxHovered:l,selectedNodeId:r,transform:i,ignoreState:o,interactive:s,hoveredNodeIdAtom:c,recordingKey:d}=e,u=(0,f.useMemo)(()=>t?function e(t,n,a,l){var r;let i=!!t.value&&(t.value.afterNodeId===n||t.value.beforeNodeId===n),o={parent:l,value:t.value?xo({box:t.value,isSelected:i}):void 0};return o.children=t.children?null==(r=t.children)?void 0:r.map(t=>{var l,r;let i=e(t,n,a,o);return i.value&&(!a||i.value.state!==a)&&o.value&&(o.value.descendantsCount+=i.value.descendantsCount+1),(null==(l=i.value)?void 0:l.ancestorOfSelectedNode)&&o.value&&(o.value.ancestorOfSelectedNode=!0),(null==(r=i.value)?void 0:r.isSelected)&&o.value&&(o.value.directParentToSelection=!0,o.value.ancestorOfSelectedNode=!0),i}):void 0,o}(t,r,o):void 0,[t,r,o]),m=(0,f.useRef)(void 0),p=(0,f.useCallback)(e=>{m.current=e},[]),_=(0,f.useCallback)(()=>{void 0!==m.current&&(null==l||l(m.current),m.current=void 0)},[l]);return f.createElement("div",{className:"overlay_highlight--overlayContainer--XMr11",role:"group",onMouseMove:_},s&&u&&f.createElement(xi,{node:u,onBoxClicked:a,onBoxHovered:p,selectedNodeId:r,expandedLayers:n,transform:i,ignoreState:o,interactive:!0,hoveredNodeIdAtom:c,recordingKey:n_.Pt(d,"overlays","highlight")}),f.createElement(xd,{rootBox:u,expandedLayers:n,selectedNodeId:r,transform:i,ignoreState:o,hoveredNodeIdAtom:c,recordingKey:n_.Pt(d,"overlays","highlight","hovered-or-selected")}))});function xm(e){let t=(0,f.useContext)(T5);return t?f.createElement(xu,{...e,...t}):null}var xp=n(630171);let xf=[2,3,6,13,25,50,75,100,200,300,1e3];function x_(e,t,n){if(!n)return!1;let a=t.get((0,lg.dI)(e));if(!a)return!1;let l=a.absoluteBoundingBox;return!!l&&l.x<n.x+n.w&&l.x+l.w>n.x&&l.y<n.y+n.h&&l.y+l.h>n.y}function xg(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.w,height:e.h}}function xh(e,t,n=!1){if(!t)return null;let a=e.get(t);return a?n?a.absoluteRenderBounds:a.absoluteBoundingBox:null}function xE(e){var t,n;return null!=(t=null==e?void 0:e.basis)&&!!t.styleType||null!=(n=null==e?void 0:e.change)&&!!n.styleType}function xv(e,t,n){var a;let l=(null==(a=null==e?void 0:e.basis)?void 0:a.guid)?(0,lg.dI)(e.basis.guid):lg.AD,r=xE(e)?null:xh(t.scene,l,!1),i=(null==e?void 0:e.change.guid)?(0,lg.dI)(e.change.guid):lg.AD,o=(null==e?void 0:e.state)==="removed"||xE(e)?null:xh(n.scene,i,!1);return{before:{id:l,box:r&&t.baseBox?xg(r,t.baseBox):null},after:{id:i,box:o&&n.baseBox?xg(o,n.baseBox):null}}}function xy({frameId:e,historyFrameId:t,historySceneGraph:n,chunkChanges:a,discreteDiffing:l,setChunkChanges:r}){let i=(0,eb.eY)(),[o,s]=(0,S.fp)(wJ.Ib),c=f.useMemo(()=>l?ei.Egt.getLayerGUIDMapping(t,n.scene,e,i.scene):void 0,[l,e,t,n.scene,i.scene]);return f.useEffect(()=>{if(a)return;let o=ei.egF.getNodeTree(t,n.scene,!l),d=ei.egF.getNodeTree(e,i.scene,!l);if(!o||!d){s(new Map),r({});return}b7.sn.reset("dev_mode.compare_changes.diffing",t),b7.sn.start("dev_mode.compare_changes.diffing",{key:t});let{deltaTree:u,deltaNodeMap:m}=function(e,t,n,a,l,r,i=!0){let o;let s=new Map,c=wU.w.decodeMessage(e.nodeChanges).nodeChanges,d=wU.w.decodeMessage(t.nodeChanges).nodeChanges;if(!c||!d)return{deltaTree:{},deltaNodeMap:s};let u=new Map,m=0;!function e(t){if(m>=c.length)return(0,o2.$D)(o5.e.DEVELOPER_TOOLS,Error("History node index out of bounds")),null;for(let n of(u.set(t.id,{change:c[m],node:t}),m++,t.children))e(n)}(e.tree);let p=i?n.get((0,lg.dI)(d[0].guid)):null,f=c[0]&&i?a.get((0,lg.dI)(c[0].guid)):null,_=(null==p?void 0:p.absoluteBoundingBox)||null,g=(null==f?void 0:f.absoluteBoundingBox)||null;function h(e,t,n){s.set(e,t.value),(0,TP.NI)(n,t)}let E=0,v=function e(t,o={}){var c,m,p;let f,v;if(E>=d.length)return(0,o2.$D)(o5.e.DEVELOPER_TOOLS,Error("Node index out of bounds")),{};let y=d[E],b=0===E;E++;let C=r?r.get(t.id)??lg.AD:t.id,w=u.get(C),T={previousChange:null==w?void 0:w.change,currentChange:y,isRootNode:b};if(w){let e=function(e,t,n,a,l){var r,i,o,s;let c=new Map;for(let[d,u]of TV.AW){let m=null,p=null;if((0,wZ.Z7)(d)&&(e[d]&&(m=(0,lg.dI)(e[d])),t[d]&&(p=(0,lg.dI)(t[d]))),(0,wZ.ar)(d)&&(e[d]&&e[d].guid&&(m=(0,lg.dI)(e[d].guid)),t[d]&&t[d].guid&&(p=(0,lg.dI)(t[d].guid))),m||p){let f=function(e,t){if(t){if("styleIdForStrokeFill"===d){e.strokePaints=t.fillPaints;return}for(let n of u)e[n]=t[n]}},_=p?null==(r=ei.egF.getNodeTree(p,a.scene,l))?void 0:r.nodeChanges:null,g=m?null==(i=ei.egF.getNodeTree(m,n.scene,l))?void 0:i.nodeChanges:null,h=_?null==(o=wU.w.decodeMessage(_).nodeChanges)?void 0:o[0]:null,E=g?null==(s=wU.w.decodeMessage(g).nodeChanges)?void 0:s[0]:null;if(f(t,h),f(e,E),h&&!E)c.set(d,{state:"removed",previousChange:h,currentChange:{phase:"REMOVED"}});else if(!h&&E)c.set(d,{state:"added",previousChange:{phase:"REMOVED"},currentChange:E});else if(h&&E){for(let e of["name",...u])if(!(0,b_.cF)(h[e],E[e])){c.set(d,{state:"changed",previousChange:h,currentChange:E});break}}}}return c}(y,null==w?void 0:w.change,n,a,l);for(let e of TV.cs)if(!(0,b_.cF)(w.change[e],y[e])&&("textData"!==e||(null==(c=w.change[e])?void 0:c.characters)!==(null==(m=y[e])?void 0:m.characters))){if("transform"===e&&b||i&&!x_(w.change.guid,a,_)&&!x_(y.guid,n,_))continue;T.state="changed";break}e.size>0&&(T.changedStyles=e)}else(!i||x_(y.guid,n,_))&&(T.state="added");for(let n of(y.guid&&(T.state||T.changedStyles)&&(v={value:T}),f=v||o,v&&h((0,lg.dI)(y.guid),v,o),t.children.forEach(t=>e(t,f)),(null==(p=null==w?void 0:w.node)?void 0:p.children)||[]))u.has(n.id)&&function({checkOverlap:e,parent:t,nodeId:n}){var l;let r=u.get(n);if(e&&!x_(null==r?void 0:r.change.guid,a,g))return;let i={value:{state:"removed",previousChange:null==r?void 0:r.change,currentChange:{phase:"REMOVED"}}};s.has((0,lg.dI)(null==(l=u.get(n))?void 0:l.change.guid))&&(0,o2.$D)(o5.e.DEVELOPER_TOOLS,Error("Error generating deleted nodes"));let o=(0,lg.dI)(null==r?void 0:r.change.guid);h(o,i,t),u.delete(o)}({checkOverlap:i,nodeId:n.id,parent:f});return u.delete(C),o}(t.tree);if(!v.value&&v.children&&1===v.children.length){let e=v.children[0];delete e.parent,o=e}else o=v;return{deltaTree:o,deltaNodeMap:s}}(o,d,i,n,!l,c,!0);s(m),r((0,TP.X$)(u,function(e){let t=e.value,n=null,a=t.state;return("added"===t.state||"changed"===t.state)&&(n={isRootNode:!!t.isRootNode,basis:t.previousChange?t.previousChange:{phase:"REMOVED"},change:t.currentChange,state:a}),"removed"===t.state&&t.previousChange&&(n={isRootNode:!!t.isRootNode,basis:t.previousChange,change:{phase:"REMOVED"},state:a}),t.changedStyles&&(n||(n={isRootNode:!!t.isRootNode,basis:t.previousChange,change:t.currentChange,state:a}),n.changedStyles=t.changedStyles),{result:n}}));let p=b7.sn.tryStop("dev_mode.compare_changes.diffing",t);p&&(0,Z.sx)("dev_mode.compare_changes.diffing",{type:"node_changes",durationMs:p},{forwardToDatadog:!0})},[e,s,a,r,t,n.scene,i.scene,c,n,i,l]),f.useEffect(()=>()=>{s(new Map)},[s]),null}function xb(e,t,n){let a=ET.D.getState().selectedView;t(nI.$T({...a,compareChangesVersionId:e,filterStatusVersions:n}))}function xC(e,t){var n;if(e.isState){let t=null==(n=e.parentNode)?void 0:n.name;return t?`${t}/${e.name}`:e.name}if(t.singleBackingSymbol&&t.singleBackingStateGroup){let n=t.singleBackingSymbol.name;return n?`${e.name}/${n}`:e.name}return e.name}function xw(e){return{node:(0,lh.mJ)(e),backingSymbolData:(0,TW.$)([e])}}function xT({nodeId:e,detachedComponentsScene:t,documentIndex:n,showError:a}){var l;let r=n===EV.x1?EV.ju.HISTORY:t?EV.ju.DETACHED_COMPONENTS:EV.ju.CURRENT,i=(null==(l=new lE.q(r).get(e))?void 0:l.absoluteRenderBounds)||{x:0,y:0,w:0,h:0},o=0,s=!0;return()=>({nodeBounds:{x:i.x,y:i.y,width:i.w,height:i.h},getImage:({scale:a,clipRect:l})=>{var i;let c;let d=Date.now();d-o>1e4&&(o=d,(c=new wB.jk("performance.dev_mode.compare_changes.get_image",{})).start());let u=(0,Tz.L6)(e,n,t,a,l);if(c){let e=c.stop(),t=(null==(i=null==u?void 0:u.image)?void 0:i.length)??0;e&&t&&(0,Z.sx)("performance.dev_mode.compare_changes.get_image",{elapsedMs:e,imageBytes:t,sceneType:r,isFirstImage:s},{forwardToDatadog:!0})}return s=!1,u&&{data:u.image,width:u.width,height:u.height,scale:u.width/u.canvasSpaceBounds.width,canvasSpaceBounds:u.canvasSpaceBounds}},showError:a})}function xx({version:e,isSection:t}){let n=new Date(e.touched_at?e.touched_at:e.created_at),a=e.label;e.frameCreated?a=t?(0,eN.tx)("collaboration.feedback.compare_changes_modal.section_created"):(0,eN.tx)("collaboration.feedback.compare_changes_modal.frame_created"):e.lastViewed&&(a=(0,eN.tx)("collaboration.feedback.compare_changes_modal.last_viewed_by_you"));let l=a?f.createElement(Tj.Cr,{time:n}):null;return f.createElement("div",{className:xp.sh},f.createElement("div",{className:xp.dp},a||f.createElement(Tj.Cr,{time:n})),f.createElement("div",{className:xp.m7},l))}let xN=(0,e4.eU)(null);function xS(e){var t,n;let{nodeId:a,onCloseModal:l,modalTitle:r,currentImage:i,historicImage:o,historicHeader:s,currentHeader:c,versions:d,selectedVersion:u,setSelectedVersion:m,renderLoadingBar:p,modalError:g,discreteDiffingInput:h,initialSelectedNodeId:E,origin:v}=e,b=(0,_.wA)(),C=(0,af.tS)(),w=null==(t=(0,ew.iZ)())?void 0:t.id,[T,x]=f.useState(wH.Ss.SIDE_BY_SIDE),[N,k]=f.useState(TD.q0),[I,A]=f.useState(!0),[O,L]=f.useState(null),[P,D]=f.useState(null),[R,M]=f.useState(!0),[F,B]=f.useState(!0),U=null==(n=(0,wj.VI)())?void 0:n.isSection,[H,G]=f.useState(()=>E?{id:E,zoomToSelection:!0}:null),[V,K]=(0,S.fp)(xN),[W,z]=f.useState(void 0),j=(0,S.fp)(wG.w1)[1],J=(0,TD.t$)(u||null,a)||!!h,Y=f.useMemo(()=>(null==h?void 0:h.sceneGraph)?h.sceneGraph:new lE.q(EV.ju.HISTORY),[null==h?void 0:h.sceneGraph]);f.useEffect(()=>{H&&H.id!==a&&(0,Z.sx)("Diff Modal New Layer Selected",{userId:w,fileKey:C,frameId:a,versionId:null==u?void 0:u.id,layer_id:H.id})},[H]);let X=f.useRef(u);f.useEffect(()=>{X.current!==u&&(X.current=u,z(void 0),G(null))},[u,X]);let q=void 0!==i,Q=void 0!==o,$=f.useCallback(e=>{"Escape"===e.key&&(H?(G(null),e.stopPropagation(),e.preventDefault()):l())},[l,H]);f.useEffect(()=>(document.addEventListener("keydown",$),()=>{document.removeEventListener("keydown",$)}),[b,$]),f.useEffect(()=>{if("cc_versions"===v&&W&&!F){(0,TP.mf)(W)?(0,Z.sx)("Diff Modal No Changes Between Versions",{userId:w,fileKey:C,frameId:a,versionId:null==u?void 0:u.id,initialVersion:R,versionMetadata:!1},{forwardToDatadog:!0}):(0,Z.sx)("dev_mode.compare_changes.version_has_changes",{userId:w,fileKey:C,frameId:a,versionId:null==u?void 0:u.id,initialVersion:R,versionMetadata:!1},{forwardToDatadog:!0});let e=b7.sn.tryStop("dev_mode.compare_changes.switch_versions",null==u?void 0:u.id);e&&(0,Z.sx)("dev_mode.compare_changes.switch_versions",{elapsedMs:e},{forwardToDatadog:!0})}},[v,R,F,W,u,a,C,w]),f.useEffect(()=>{u&&null===o&&(0,Z.sx)("dev_mode.compare_changes.no_image",{userId:w,fileKey:C,frameId:a,versionId:null==u?void 0:u.id},{forwardToDatadog:!0})},[o,u,a,C,w]);let ee=()=>f.createElement(wH.BL,{isPreviewAvailable:q,showOptions:q,view:T,onSideBySideClick:()=>{x(wH.Ss.SIDE_BY_SIDE)},onOverlayClick:()=>{x(wH.Ss.OVERLAY)},additionalStyles:xp.tH}),[et,en]=f.useState(new Set),ea=f.useCallback((e,t)=>{t?en(t=>new Set([...t,...e])):en(t=>{let n=new Set(e);return new Set([...t].filter(e=>!n.has(e)))})},[en]),el=(0,f.useCallback)(e=>{let t=null==e?void 0:e.value;if(t){let n="removed"===t.state?t.beforeNodeId:t.afterNodeId;G({id:n,zoomToSelection:!1}),L(t.beforeNodeId),D(t.afterNodeId);let a=[n],l=null==e?void 0:e.parent;for(;l;){let e=l.value;if(e){let t="removed"===e.state?e.beforeNodeId:e.afterNodeId;a.push(t)}l=l.parent}ea(a,!0)}else G(null),L(null),D(null)},[ea]),er=(0,f.useCallback)(e=>{e?K("removed"===e.state?e.beforeNodeId:e.afterNodeId):K(lg.AD)},[K]),ei=(0,f.useCallback)(e=>K(e),[K]),eo=(0,f.useCallback)((e,t)=>{e===(null==H?void 0:H.id)?(G(null),L(null),D(null)):(G({id:e,zoomToSelection:!0}),K(e),L((0,lg.dI)(t.basis.guid)),D((0,lg.dI)(t.change.guid)))},[null==H?void 0:H.id,K]),es=(0,f.useMemo)(()=>W&&(0,TG.kF)(W,TV.FO.LEGO,void 0,TM)||{},[W]),ec=!(0,TP.mf)(es),ed=h?h.nodeId:a,{beforeBoxes:eu,afterBoxes:em}=function(e){let{frameId:t,historyFrameId:n,view:a,displayableChanges:l,historySceneGraph:r}=e;return(0,f.useMemo)(()=>{if(!t||!n)return{};let e=function(e,t,n,a){let l=new lE.q,r=xh(t,n,!0),i=xh(l,e,!0);return(0,TP.X$)(a,e=>{let n=xv(e.value,{scene:t,baseBox:r},{scene:l,baseBox:i});return{result:{beforeBox:n.before.box,afterBox:n.after.box,afterBoxNodeId:n.after.id,beforeBoxNodeId:n.before.id}}})}(t,r,n,l);return{beforeBoxes:(0,TP.X$)(e,e=>{let a=e.value,l=a.beforeBoxNodeId===n||a.afterBoxNodeId===t;return a.afterBox?a.beforeBox?{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"changed",isRootFrame:l}}:{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"added",isRootFrame:l}}:{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"removed",isRootFrame:l}}}),afterBoxes:(0,TP.X$)(e,e=>{let a=e.value,l=a.beforeBoxNodeId===n||a.afterBoxNodeId===t;return a.afterBox?a.beforeBox?{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"changed",isRootFrame:l}}:{result:{rect:a.afterBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"added",isRootFrame:l}}:{result:{rect:a.beforeBox,beforeNodeId:a.beforeBoxNodeId,afterNodeId:a.afterBoxNodeId,state:"removed",isRootFrame:l}}})}},[t,n,a,l])}({frameId:a,historyFrameId:ed,historySceneGraph:Y,view:T,displayableChanges:es,activeNode:V,selectedNode:H});f.useEffect(()=>{if(!(null==H?void 0:H.id)||!(null==H?void 0:H.zoomToSelection)||!a||!ed)return;let{baseBeforeBox:e,baseAfterBox:t,resultBoxes:n}=function(e,t,n,a,l){let r=new lE.q,i=xh(t,n,!0),o=xh(r,e,!0),s=[];for(let e of a){let n=(0,TP.lE)(l,t=>(0,lg.dI)(t.change.guid)===e||(0,lg.dI)(t.basis.guid)===e);if(n){let e=xv(n,{scene:t,baseBox:i},{scene:r,baseBox:o});s.push({beforeBox:e.before.box,afterBox:e.after.box,beforeBoxNodeId:e.before.id,afterBoxNodeId:e.after.id})}}return{baseBeforeBox:i,baseAfterBox:o,resultBoxes:s}}(a,Y,ed,[H.id],es),{beforeBox:l,afterBox:r}=n[0]??{},i=1/0,o=1/0,s=-1/0,c=-1/0;l&&e&&(l.x-=e.w/2,l.y-=e.h/2,i=Math.min(i,l.x),o=Math.min(o,l.y),s=Math.max(s,l.x+l.width),c=Math.max(c,l.y+l.height)),r&&t&&(r.x-=t.w/2,r.y-=t.h/2,i=Math.min(i,r.x),o=Math.min(o,r.y),s=Math.max(s,r.x+r.width),c=Math.max(c,r.y+r.height)),i!==1/0&&j({x:i,y:o,width:s-i,height:c-o})},[H,j,a,es]),f.useEffect(()=>()=>{j(void 0)},[j]);let ep=eu?{rootBox:eu,onBoxClicked:el,onBoxHovered:er,selectedNodeId:null==H?void 0:H.id,expandedLayers:et,ignoreState:"added",interactive:T===wH.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:xN,recordingKey:"before"}:null,ef=em?{rootBox:em,onBoxClicked:el,onBoxHovered:er,selectedNodeId:null==H?void 0:H.id,expandedLayers:et,ignoreState:"removed",interactive:T===wH.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:xN,recordingKey:"after"}:null,e_=!p&&!g;return f.createElement(TD.aF,{title:r,onClose:l},f.createElement("div",{className:xp.xZ},f.createElement("div",{className:xp.f},p&&!g&&f.createElement("div",{className:xp.Lq},f.createElement(TK.G,{hasLoadedDiffs:!1})),e_&&f.createElement("div",{className:xp.ND},(d||ec)&&f.createElement("div",{className:nb()(xp._H,"devHandoffLeftPanel")},m&&f.createElement("div",{className:xp.b6},f.createElement("div",{className:nb()(xp.Zl)},(0,eN.tx)("collaboration.feedback.compare_changes_modal.history"),(0,y.kc)().dt_compare_changes_debug_helpers&&f.createElement(xI,{fileKey:C,setSelectedVersion:m})),f.createElement(Tj.aS,{versions:d||[],selectedVersion:u,setVersion:e=>{e.id!==(null==u?void 0:u.id)&&(0,Z.sx)("Diff Modal Selected Version Changed",{userId:w,fileKey:C,frameId:a,versionId:e.id}),b7.sn.reset("dev_mode.compare_changes.switch_versions",e.id),b7.sn.start("dev_mode.compare_changes.switch_versions",{key:e.id}),B(!0),R&&M(!1),m(e)}})),f.createElement(TG.zg,{changesToDisplay:es,selectedNode:null==H?void 0:H.id,expandedLayers:et,setLayerExpanded:ea,onHover:ei,onClick:eo})),f.createElement("div",{className:xp.vF},T===wH.Ss.SIDE_BY_SIDE&&f.createElement("div",{className:xp.m_},f.createElement("div",{className:xp.ZJ},s?f.createElement("div",{className:xp.K9},f.createElement("div",{className:xp.gO},s)):u&&f.createElement(xx,{version:u,isSection:U})),f.createElement("div",{className:xp.t4}),f.createElement("div",{className:xp.ZJ},c?f.createElement("div",{className:xp.K9},f.createElement("div",{className:xp.gO},c)):f.createElement("div",{className:xp.K9},(0,eN.tx)("collaboration.feedback.compare_changes_modal.current_image_header")))),T===wH.Ss.SIDE_BY_SIDE&&f.createElement("div",{className:xp.Ik},f.createElement(wH.qW,{zoomPercentageOptions:xf,resetStateOnChangeValue:a,compareThumbnailSource:TV.FO.LEGO,zoomOnMousePointer:!0},f.createElement("div",{className:xp.bV},Q?f.createElement(T4,{value:ep},f.createElement(TD.R$,{image:o,view:T,Overlay:xm})):f.createElement(TD.Qp,null),f.createElement("div",{className:xp.mq}),q?f.createElement(T4,{value:ef},f.createElement(TD.R$,{image:i,view:T,Overlay:xm})):f.createElement(TD.Qp,null)),q&&ee())),T===wH.Ss.OVERLAY&&f.createElement("div",{className:xp.Ik},f.createElement(wH.xY,{zoomPercentageOptions:xf,resetStateOnChangeValue:a,zoomOnMousePointer:!0},f.createElement("div",{className:xp.Kk},Q?f.createElement(T4,{value:ep},f.createElement(TD.R$,{image:o,view:T,hideNoImageText:!0,Overlay:xm})):f.createElement(TD.Qp,null),I&&(q?f.createElement(T4,{value:ef},f.createElement(TD.R$,{image:i,view:T,hideNoImageText:!0,opacity:N,Overlay:xm})):f.createElement(TD.Qp,null))),q&&f.createElement(wH.u,{opacity:N,isAfterImageShown:I,onToggleClick:()=>A(!I),onOpacityChange:e=>k(e.a)}),q&&ee())),J&&a&&ed&&f.createElement(xy,{frameId:a,historyFrameId:ed,historySceneGraph:Y,chunkChanges:W,discreteDiffing:!!h,setChunkChanges:e=>{B(!1),z(e)}}))),g&&f.createElement("div",{className:xp.Q9},(0,eN.tx)("collaboration.feedback.compare_changes_modal.error")),f.createElement("div",null)),e_&&(J?W&&(0,TP.mf)(W)?f.createElement(TH,{text:(0,eN.t)("collaboration.feedback.compare_changes_modal.no_changes")}):f.createElement(xk,{layerChangeNodeId:P,layerBasisNodeId:O,layerBasisSceneGraph:Y,selectedVersion:u||void 0,displayableChanges:es,showSelectLayerHint:!H}):f.createElement(TH,{text:""}))))}function xk({layerChangeNodeId:e,layerBasisNodeId:t,layerBasisSceneGraph:n,selectedVersion:a,displayableChanges:l,showSelectLayerHint:r}){let i=function(){let[e]=(0,wK.$h)(),[t,n]=(0,f.useState)(e),a=(0,wR.v4)(),[l,r]=(0,f.useState)({...a}),i=(0,wz.aq)(l),o=(0,wV.ZA)(l,i),s=(0,f.useCallback)(e=>{n(e),(0,Z.sx)("dev_mode.compare_changes.change_inspection_mode",{mode:e})},[]);(0,f.useLayoutEffect)(()=>{"first-party"!==l.type&&(r(wR.S8[wR.uz]),"properties"!==t&&n("properties"))},[l,t]);let c=(0,_.d4)(e=>e.mirror.appModel.devHandoffPreferences),[d,u]=(0,f.useState)({...c}),m=(0,wz.wA)(l),p=(0,f.useMemo)(()=>{var e;return(null==(e=d.codeExtensionPreferences)?void 0:e[l.id])??{}},[d,l]),g=(0,f.useMemo)(()=>{let e=[];if(!o)return e;let t=(null==p?void 0:p.unit)||ei.tKW.PIXEL;return e.push({displayText:(0,eN.t)("dev_handoff.alternative_units.dimension_unit"),header:!0},...wV.zq.map(e=>{let n=e===ei.tKW.PIXEL?(0,eN.t)("dev_handoff.alternative_units.pixel_unit"):m;return{name:e.toString(),displayText:n,isChecked:t===e,callback:()=>{var t;u({...d,codeExtensionPreferences:{...d.codeExtensionPreferences,[l.id]:{...(null==(t=d.codeExtensionPreferences)?void 0:t[l.id])||{},unit:e}}})},recordingKey:e===ei.tKW.PIXEL?"pixel":"scaled"}})),e},[o,d,p,m,l]),h=(0,wR.AC)(l),E=(0,wR.Pt)(h),v=(0,wW.Z)({codeLanguage:l,onChange:r,shouldHideLanguagesWithNoAltUnitSupport:!1,onlyShowFirstPartyLanguages:!0,formatter:E}),y={codeLanguage:l,codeLanguageOptions:v,activeCodegenPlugin:h,formatter:E,onCodeLanguageChange:nf.lQ},b=(0,wK.Ar)();return{inspectionMode:b.find(e=>e===t)||b[0],setInspectionMode:s,supportsAlternativeUnits:o,preferenceOptions:g,preferences:p,codeLanguageApi:y,inspectionModes:b}}();return r?f.createElement(TH,{text:(0,eN.t)("collaboration.feedback.compare_changes_modal.select_a_layer")}):f.createElement(TF,{layerChangeNodeId:e,layerBasisNodeId:t,layerBasisSceneGraph:n,selectedVersion:a,displayableChanges:l,preferencesApi:i})}function xI({fileKey:e,setSelectedVersion:t}){let n=(0,f.useRef)(null),[a,l]=(0,f.useState)("Upload local file");return f.createElement("label",{className:xp.$8},a,f.createElement("input",{style:{display:"none"},ref:n,type:"file",accept:".fig",onChange:async()=>{var a,r;let i=null==(r=null==(a=n.current)?void 0:a.files)?void 0:r[0];if(i&&wY.F){let n=await (0,wX._G)(ET.D,(0,y.kc)(),wY.F,i),a=ET.D.getState().mirror.appModel.currentPage,r=`${e}-${a}-debug`;wq.Ht.set(r,Promise.resolve({key:r,canvas:n.bytes})),l(i.name),t({id:"debug"})}}}))}let xA=(0,cV.Ju)(function(e){var t;let{nodeId:n,layerName:a}=e,l=(0,_.wA)(),r=(0,_.d4)(e=>"fullscreen"===e.selectedView.view?e.selectedView.editorType:null),i=(0,_.d4)(e=>e.versionHistory.activeId),{Sprig:o}=(0,aP.A)(),s=(0,af.tS)(),c=null==(t=(0,C4.E1)())?void 0:t.toISOString(),d=(0,S.fp)(wJ.Ib)[1],{versions:u,versionsQueryLoaded:m}=(0,TD.DS)(n),p=(0,_.d4)(e=>e.selectedView.compareChangesVersionId??null),g=(0,f.useMemo)(()=>p?u.find(e=>e.id===p)??null:null,[u,p]),h=f.useCallback(e=>{!e&&(x(void 0),xb(e,l,!1),i&&i!==wq.V_&&(l(K.Y6({mode:ei.Oin.KEEP_UI,type:uP.lF.SPINNER})),requestAnimationFrame(()=>{l((0,wq.Nb)({id:i,nodeId:n??void 0,eventType:"LOAD_NEW_VERSION",versions:u}))}))),e!==p&&(x(void 0),function(e,t){let n=ET.D.getState().selectedView;t(nI.$T({...n,compareChangesVersionId:e}))}(e,l))},[l,p,i,u,n]),[E,v]=(0,S.fp)(wq.tP),[y,b]=f.useState(!0),[C,w]=f.useState(!1),[T,x]=f.useState(void 0),N=void 0!==T,[k,I]=f.useState(void 0),A=void 0!==k,O=(0,TD.t$)(g,n);f.useEffect(()=>{if(!y||!N||!A||!m)return;b(!1);let e=b7.sn.tryStop("dev_handoff.view_history",n);e&&(0,Z.sx)("dev_handoff.view_history",{elapsedMs:e,origin:"cc_versions"},{forwardToDatadog:!0}),o("track","open_compare_changes",{origin:"cc_versions"})},[o,y,N,A,m,n]);let L=(0,_.d4)(e=>{var t;return(null==(t=e.modalShown)?void 0:t.type)===xA.type});f.useEffect(()=>{var e;if(L&&m&&!g){if(0===u.length){x(null),h(void 0);return}if(c){for(let e of u)if(e.lastViewed){h(null==e?void 0:e.id);return}}h(null==(e=u[0])?void 0:e.id)}},[L,c,g,h,u,m]),f.useEffect(()=>{var e;if(O||!g)return;let t=performance.now();null==(e=(0,wq._t)(g,n))||e.then(({canvas:e,key:n})=>{let a=performance.now();if(n===E)return;if(!ei.glU.loadPartialHistoryScene(e))throw Error("Error loading history canvas");v(n);let l=performance.now(),r=Math.trunc(a-t),i=Math.trunc(l-a);(0,Z.sx)("version_diffing_performance_metrics",{name:"historic_nodes_load_time",fileKey:s,fetchBytesDurationMs:r,loadNodesDurationMs:i,canvasBytesLength:e.byteLength,fetchMode:"node",entrypoint:"lego_layer"})}).catch(e=>{(0,o2.$D)(o5.e.DEVELOPER_TOOLS,Error(`Error fetching history canvas: ${e}`)),(0,wq.w_)(g),w(!0)})},[O,g,E,v,r,s,n]),f.useEffect(()=>{let e=setTimeout(()=>{if(!O){x(void 0);return}x(xT({nodeId:n,documentIndex:EV.x1,showError:()=>{x(null)}}))},TD._W);return()=>clearTimeout(e)},[n,g,O]),f.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{I(void 0),(0,o2.$D)(o5.e.DEVELOPER_TOOLS,Error("Current image loading error")),w(!0)},t=xT({nodeId:n,showError:e});if(!t){e();return}I(t)},TD._W);return()=>clearTimeout(e)},[n]);let P=f.useCallback(()=>{d(new Map),h(void 0),l(ty.Ce())},[d,h,l]);return f.createElement(xS,{nodeId:n,onCloseModal:P,modalTitle:a?(0,eN.t)("collaboration.feedback.compare_changes_modal.layer_name_header",{layerName:a}):(0,eN.t)("collaboration.feedback.compare_changes_modal.header"),currentImage:k,historicImage:T,versions:u,selectedVersion:g,setSelectedVersion:e=>{h(e.id)},renderLoadingBar:y,modalError:C,origin:"cc_versions"})},"LegoCompareChangesVersionsModal",cV.ZU.YES),xO=(0,cV.Ju)(function(e){let{nodeId:t,detachedInfoStatus:n,origin:a}=e,l=(0,_.wA)(),{Sprig:r}=(0,aP.A)(),[i,o]=f.useState(!0),[s,c]=f.useState(!1),[d,u]=f.useState(void 0),[m,p]=f.useState(void 0),g=void 0!==d,h=void 0!==m,E="loaded"===n.status,v=E?n.result:void 0;f.useEffect(()=>{if(!i||!g||!h||!E)return;o(!1);let e=b7.sn.tryStop("dev_handoff.view_history",t);e&&(0,Z.sx)("dev_handoff.view_history",{elapsedMs:e,origin:a},{forwardToDatadog:!0}),r("track","open_compare_changes",{origin:"cc_detached_component"})},[r,i,g,h,t,E,a]),f.useEffect(()=>{let e=setTimeout(()=>{if(!E||!(null==v?void 0:v.dataComponentId)){u(void 0);return}u(xT({nodeId:null==v?void 0:v.dataComponentId,detachedComponentsScene:(null==v?void 0:v.dataLocation)==="temp-scene",showError:()=>{u(null)}}))},TD._W);return()=>clearTimeout(e)},[E,v]),f.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{p(void 0),c(!0)},n=xT({nodeId:t,showError:e});if(!n){e();return}p(n)},TD._W);return()=>clearTimeout(e)},[t]);let y=f.useCallback(()=>{l(ty.Ce())},[l]),b=(0,eN.t)("collaboration.feedback.compare_changes_modal.header"),C=(0,eN.tx)("inspect_panel.node_type.main_component"),w={nodeId:(null==v?void 0:v.dataComponentId)??lg.AD,sceneGraph:new lE.q((null==v?void 0:v.dataLocation)==="temp-scene"?EV.ju.DETACHED_COMPONENTS:EV.ju.CURRENT)};return f.createElement(xS,{nodeId:t,onCloseModal:y,modalTitle:b,currentImage:m,historicImage:d,historicHeader:C,renderLoadingBar:i,modalError:s,discreteDiffingInput:w})},"LegoCompareChangesDetachedModal",cV.ZU.YES),xL=(0,cV.Ju)(function(e){let{changeNodeId:t,basisNodeId:n,initialSelectedNodeId:a,isComparingOverrides:l=!1}=e,r=(0,_.wA)(),{Sprig:i}=(0,aP.A)(),o=xw(t),s=xw(n),[c,d]=f.useState(!1),[u,m]=f.useState(void 0),[p,g]=f.useState(void 0),h=void 0!==u,E=void 0!==p;f.useEffect(()=>{if(!h||!E)return;let e=b7.sn.tryStop("dev_handoff.view_history",t),n=l?"cc_overrides":"cc_nodes";e&&(0,Z.sx)("dev_handoff.view_history",{elapsedMs:e,origin:n},{forwardToDatadog:!0}),i("track","open_compare_changes",{origin:n})},[i,l,h,E,t]),f.useEffect(()=>{m(xT({nodeId:n,showError:()=>m(null)}))},[n]),f.useEffect(()=>{let e=()=>{g(void 0),d(!0)},n=xT({nodeId:t,showError:e});if(!n){e();return}g(n)},[t]);let v=f.useCallback(()=>{r(ty.Ce())},[r]),y=(0,eN.t)("collaboration.feedback.compare_changes_modal.header"),b={nodeId:n,sceneGraph:new lE.q(EV.ju.CURRENT)};return o.node&&s.node?f.createElement(xS,{nodeId:t,onCloseModal:v,modalTitle:y,currentImage:p,historicImage:u,currentHeader:xC(o.node,o.backingSymbolData),historicHeader:xC(s.node,s.backingSymbolData),renderLoadingBar:!1,modalError:c,discreteDiffingInput:b,initialSelectedNodeId:a}):null},"LegoCompareChangesForNodesModal",cV.ZU.YES);var xP=n(32067);function xD(e){let t=(0,bB.wS)(),n=(0,lh.uQ)(),a=(0,_.wA)(),l=(0,a6.U)();return f.useCallback(()=>{n&&"loaded"===t.status&&(l("Diff Modal Compare Changes Clicked",{nodeId:n,origin:"cc_detached_component"}),b7.sn.reset("dev_handoff.view_history",n),b7.sn.start("dev_handoff.view_history",{key:n}),a(ty.to({type:xO,data:{nodeId:n,detachedInfoStatus:t,origin:e}})))},[n,t,l,a,e])}function xR(e,t){var n,a;let l=null==(n=(0,ew.iZ)())?void 0:n.id,r=null==(a=(0,xP.VW)())?void 0:a.name.trim(),i=(0,af.tS)(),o=(0,_.wA)(),s=(0,S.md)(wF),c=(0,eb.eY)();return f.useCallback(()=>{if(b7.sn.reset("dev_handoff.view_history",e||void 0),b7.sn.start("dev_handoff.view_history",{key:e||void 0}),(0,Z.sx)("Diff Modal Compare Changes Clicked",{userId:l,fileKey:i,frameId:e,entrypoint:"lego_layer",analyticsEventOrigin:t}),e){let t=(0,C4.BJ)(c,e,!0);if(t){let n=t.lastEditedAt;s[e]=new Date(n),S.zl.set(wF,{...s})}}o(ty.to({type:xA,data:{nodeId:e,layerName:r}}))},[t,o,i,e,r,c,s,l])}var xM=n(848661),xF=n(555074),xB=n(611978),xU=n(798558),xH=n(559184),xG=n(753630),xV=n(843245),xK=n(696673),xW=n(416095),xz=n(343827),xj=n(640783),xJ=n(835808),xY=n(812115);function xX({description:e,emptyStateText:t}){let n=f.useRef(null),a=f.useRef(void 0),[l,r]=f.useState(!0);f.useLayoutEffect(()=>{let t=a.current;a.current=e,n.current&&t!==e&&r(n.current.scrollHeight>96)},[e]);let i=!!e&&l;return f.createElement("div",{className:"asset_documentation_panel--documentationSection--Uiw1f"},e?f.createElement("div",{className:nb()("asset_documentation_panel--documentationRt--dqAKD")},f.createElement(xY.R,{fallback:null,errorFallback:null,value:e,quillClassName:nb()("asset_documentation_panel--quill--ARHQQ",{"asset_documentation_panel--quillCollapsed--ezPrQ":l}),quillInnerRef:n}),l&&f.createElement("div",{className:"asset_documentation_panel--quillCollapsedOverlay--UlWJU"})):t?f.createElement("div",{className:"asset_documentation_panel--documentationDescriptionDefault--vxlbl asset_documentation_panel--documentationDescription--la2iI text--fontPos11--2LvXf text--_fontBase--QdLsd",dir:"auto",ref:n},t):null,i&&f.createElement("div",{className:"asset_documentation_panel--showMoreButtonContainer--ZkHWJ"},f.createElement(wo.d,{label:(0,eN.t)("dev_handoff.docs.show_full"),onClick:()=>r(!1)})))}var xq=n(846627),xZ=n(677664),xQ=n(285334);n(661743);var x$=n(877432);let x0=(0,e4.eU)({});var x1=n(215822),x2=n(227712),x5=n(208186);let x4=class{async generateLinkPreview({plugin:e,link:t}){var n;try{let a=await TN.R.instance.enqueue(this.createEnqueueArgs({command:"linkpreview",plugin:e,onStart:()=>(0,Tx.se)({name:t.linkName,url:t.linkUrl,isInherited:t.isInherited,nodeId:t.nodeId})}));if((null==a?void 0:a.type)==="PLAIN_TEXT")(0,x5.n7)({link:t,linkPreviewJson:a});else if((null==a?void 0:a.type)==="AUTH_REQUIRED"){let a=S.zl.get(x0),l=(null==(n=a[e.plugin_id])?void 0:n.links)??[];S.zl.set(x0,n=>({...n,[e.plugin_id]:{plugin:e,links:[...l,t]}}))}return a??null}catch(e){console.error(e)}return null}async runAuth({plugin:e,links:t}){S.zl.set(b8.H,b8._.PLUGIN);try{return await TN.R.instance.enqueue(this.createEnqueueArgs({command:"auth",plugin:e,onStart:()=>(0,Tx.Ut)(t)}))??null}catch(e){console.error(e)}return null}createEnqueueArgs({command:e,plugin:t,onStart:n}){var a;return{runPluginArgs:{plugin:t,command:"linkpreview",queryMode:!1,runMode:"linkpreview"===e?"linkpreview":"auth",triggeredFrom:"linkpreview"===e?"related-link-preview":"related-link-auth",openFileKey:(null==(a=ET.D.getState().openFile)?void 0:a.key)||"",isWidget:!1},onStart:n,mode:"run-and-terminate"}}};x4.instance=new x4;let x3=(0,xQ.Up)();function x6(e,t){if((0,TS.ZQ)(t)&&!(0,y.kc)().plugins_related_links_local||!x3.has(t.plugin_id))return!1;let n=t.manifest.relatedLinkDomains||t.manifest.devResourceDomains;if(!n)return!1;for(let t of n){let n=(0,x1.tk)(t);if(!n)continue;let a=e.split("?")[0];if(n.exec(a))return!0}if((0,xQ.P8)(t.plugin_id)){if(x7(e)&&e.match(/selectedIssue=[A-Z]+-[0-9]+/))return!0;x7(e)&&e.match(/[A-Z]+-[0-9]+/)&&(0,Z.sx)("Jira Issue Url Not Matched",{url:e})}return!1}function x7(e){return!!e.match(/https?:\/\/[a-zA-Z0-9-]+\.(atlassian\.net|jira\.com)/)}var x8=(e=>(e.OPEN="open",e.PREVIEW="preview",e))(x8||{});function x9(e){let t=function(e){let t=(0,e_.$1)(),n=(0,e_.cW)(),a=(0,_.d4)(e=>e.mirror.appModel.useLocalRelatedLinkPlugin),l=f.useMemo(()=>0===x3.size?null:Object.values(t).find(t=>!!x6(e,t)),[e,t]),r=f.useMemo(()=>0===x3.size?null:Object.values(n).map(e=>(0,x1.uF)(e)).find(t=>!!x6(e,t)),[e,n]),i=f.useMemo(()=>Array.from(x3),[]),o=(0,e_.uf)(i,{enabled:!r}),s=f.useMemo(()=>o.find(t=>!!x6(e,t))??null,[e,o]);return a&&l?l:r||s||null}(e),n=(0,e_.YN)();return t&&n(t)?t:null}function Ne(e){var t,n;let a=x9(e),l=(0,S.md)(x0);if(!a||!(null==(t=a.manifest.capabilities)?void 0:t.includes("linkpreview")))return null;if(null==(n=l[a.plugin_id])?void 0:n.links.some(t=>t.linkUrl===e))return;let r=async({link:e})=>{await x4.instance.generateLinkPreview({plugin:a,link:e})};return{plugin:a,genPreview:r}}var Nt=n(155497),Nn=n(728859),Na=n(313888);function Nl({isEditable:e,link:t,onOpenDeleteModal:n,onOpenEditModal:a}){let l=(0,_.wA)(),r=!(0,Nt.G)(t.linkUrl),i=(0,eb.eY)(),o=(0,xV.Nf)()??"",s=i.get(o),c=t.isInherited||t.isVariant,d=(0,a6.U)(),u=(0,xz.d)(!t.isVariant),m=f.useCallback(()=>{l(wd.lW({stringToCopy:t.linkUrl})),d("Dev Handoff Related Links Copy Hyperlink",{nodeId:o,nodeType:null==s?void 0:s.type,source:"web"})},[l,o,t.linkUrl,null==s?void 0:s.type,d]),p=r?t.linkUrl:new URL(t.linkUrl).host;p.startsWith("www.")&&(p=p.slice(4));let{Dropdown:g,toggleDropdown:h,dropdownTargetRef:E,isDropdownShown:v}=(0,w0.B)(t.id),y=function(e){let t=x9(e),n=(0,af.tS)(),a=(0,wR.v4)(),l=(0,e2.Xr)(b8.H);if(!t||!n||!(0,x1.$u)(t.manifest.capabilities))return null;let r=async({link:e})=>{var r;await TI.instance.maybeTerminatePlugin(a),await (0,x$.yQ)();let i=(0,x2.D)(),o=(null==(r=t.manifest.editorType)?void 0:r.includes(TS.FW.DEV))?"open-dev-resource":"open-related-link",s={mode:"run-forever",runPluginArgs:{plugin:t,command:o,queryMode:!1,openFileKey:n,isWidget:!1,runMode:"default",triggeredFrom:"related-link-click"}},c={url:e.linkUrl,name:e.linkName,isInherited:e.isInherited,nodeId:e.nodeId},d=TN.R.instance.isCurrentlyRunning(s);return(l(b8._.PLUGIN),d&&(0,Tx.Jc)())?TN.R.instance.enqueue({...s,onStart:async()=>await (0,Tx.xG)({devResource:c})}):TN.R.instance.enqueue({...s,reuseExistingRunState:!1,onStart:async()=>((0,Tx.r2)(5e3,{devResource:c}),(await i).triggerRunEvent({command:o,link:c}))})};return{plugin:t,callback:r}}(t.linkUrl),b=c?Na.A:Nn.A,C=f.createElement("div",{ref:E},f.createElement(iy.K0,{onClick:h,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":c?(0,eN.t)("dev_handoff.developer_related_links.main_component_tooltip"):(0,eN.t)("dev_handoff.developer_related_links.additional_options"),svg:b,className:c?"developer_related_link_row--iconButtonInherited--l69ho":void 0})),w=[{displayText:(0,eN.t)("dev_handoff.developer_related_links.copy_link"),callback:()=>m()}];y&&w.unshift({displayText:(0,eN.t)("dev_handoff.developer_related_links.open_in_new_tab"),callback:()=>{O()}}),c&&u&&w.unshift({displayText:(0,eN.t)("dev_handoff.developer_related_links.go_to_main_component"),callback:()=>{u()}}),t.isNested&&w.push({displayText:(0,eN.t)("dev_handoff.developer_related_links.select_layer"),callback:()=>{ei.w3z.selectAndFocusOnNode(t.nodeId,!0)}}),e&&w.push({displayText:(0,eN.t)("dev_handoff.developer_related_links.edit_link"),callback:()=>a(t)},{displayText:"",separator:!0},{displayText:(0,eN.t)("dev_handoff.developer_related_links.delete_link"),callback:()=>n(t.id,t.linkUrl)});let[T,x]=f.useState(!1),[N,S]=f.useState(!1),k=t.linkPreview,I=k&&"PLAIN_TEXT"===k.type&&k.text,A=I&&!t.isUserOverride&&y,O=()=>{(0,xq.e)(t.linkUrl)||l((0,xZ.RK)({rawInput:t.linkUrl})),d("Dev Handoff Related Links Open Hyperlink",{nodeId:o,nodeType:null==s?void 0:s.type,source:"web"})},L=f.createElement(Nr,{name:t.linkName,url:y?y.plugin.name:p,isHovering:T}),P=A&&y?f.createElement(Nr,{name:I,url:y.plugin.name,isHovering:T}):null,D=(0,n_.Pt)("developerRelatedLinkRow",t.id);return f.createElement("div",{className:"developer_related_link_row--link--fvcCC text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},f.createElement(a7.GG,{className:nb()("developer_related_link_row--linkInfo--214Y7"),onClick:()=>{let e={action:x8.OPEN,link:t};if(y&&(0,xQ.Zl)(y.plugin.plugin_id,sL.z4.getIsExtension())){t.isNested&&ei.w3z.selectAndFocusOnNode(t.nodeId,!0),y.callback(e),d("Dev Handoff Related Links Run Plugin From Hyperlink",{nodeId:o,nodeType:null==s?void 0:s.type,source:"web",pluginId:y.plugin.plugin_id}),l(j.b({[w8.xb]:!0}));return}sL.z4.getIsExtension()?(0,TC.mz)(t.linkUrl):(l((0,xZ.RK)({rawInput:t.linkUrl})),d("Dev Handoff Related Links Open Hyperlink",{nodeId:o,nodeType:null==s?void 0:s.type,source:"web"}))},onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),recordingKey:(0,n_.Pt)(D,"button")},f.createElement("div",{className:"developer_related_link_row--favicon--ZrNbB"},f.createElement(C6.v,{url:t.linkUrl})),P??L),f.createElement("div",{className:nb()("developer_related_link_row--additionalButtons--tKT0M",T||N||c||v?a8.cx.opacity1.$:a8.cx.opacity0.$),onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1)},C,v&&f.createElement("div",{onMouseEnter:()=>S(!1)},f.createElement(g,{items:w,showPoint:!1}))))}function Nr({name:e,url:t,isHovering:n}){return f.createElement(fy.Y,{direction:"horizontal",spacing:4,padding:{right:32}},f.createElement("p",{className:"developer_related_link_row--linkName--p0e0K ellipsis--ellipsis--Tjyfa",style:n?dA.sx.add({maxWidth:"50%"}).$:void 0},e),n&&f.createElement(f.Fragment,null,f.createElement("p",{className:"developer_related_link_row--linkDivider--20WA5"},"\xb7"),f.createElement("p",{className:"developer_related_link_row--linkURL--eaX2b ellipsis--ellipsis--Tjyfa blue_link--blueLink--9rlnd"},t)))}var Ni=n(937456);function No(e){return f.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},f.createElement("path",{stroke:"var(--color-icon)",strokeLinejoin:"round",d:"M2.646 7.646a.5.5 0 0 0 0 .708l5 5a.5.5 0 0 0 .708 0l5-5a.5.5 0 0 0 0-.708l-5-5a.5.5 0 0 0-.708 0l-5 5Z"}))}var Ns=n(77437),Nc=n(971612),Nd=n(265241),Nu=n(449124),Nm=n(132361),Np=n(159553);let Nf=(0,e4.eU)([]);function N_(e,t,n){let a=t.get(e),l=t.get((null==a?void 0:a.symbolId)??"");if(null==l?void 0:l.componentKey){let e=n.getInternalCanvas();for(let t of(null==e?void 0:e.childrenNodes)??[]){if(t.componentKey===(null==l?void 0:l.componentKey))return t.guid;if(t.isStateGroup){for(let e of t.childrenNodes)if(e.componentKey===(null==l?void 0:l.componentKey))return e.guid}}}return null==l?void 0:l.publishID}var Ng=n(832637),Nh=n(503457);let NE=new(n(554630)).b({name:"code-connect",dependencies:[],routeHints:[],exports:["figmadoc.ts*","typings.ts*","code_connect_view.ts*","preload_code_connect.ts*"],friendFiles:[]}).createLazyComponent(()=>Promise.all([n.e(1920),n.e(7199)]).then(n.bind(n,692678)).then(e=>e.CodeConnectSection),{loading:()=>null,error:Nh.H4.NONE,componentName:"CodeConnectSection"});var Nv=n(37112),Ny=n(151283);let Nb="code_connect_modal--selectedTab--KlRSR",NC="code_connect_modal--unSelectedTab--LnDy3",Nw="code_connect_modal--stepWrapper--2Jt3f",NT="code_connect_modal--circleNumber--j-DIh",Nx="code_connect_modal--circleNumberText--WCfy1",NN="code_connect_modal--title--eSJ5C",NS="code_connect_modal--stepContent--WMmuq",Nk="code_connect_modal--stepText--i8GgM",NI="code_connect_modal--command--XnF2h",NA="code_connect_modal--copyButton--Hecf7",NO="code_connect_modal--copyButtonMultiline--pesTb code_connect_modal--copyButton--Hecf7",NL="code_connect_modal--commandText--mYtNV",NP="code_connect_modal--commandTextMultiLine--N2swX";var ND=(e=>(e[e.REACT=0]="REACT",e[e.SWIFTUI=1]="SWIFTUI",e[e.COMPOSE=2]="COMPOSE",e))(ND||{});function NR({language:e}){switch(e){case 0:return f.createElement(NM,null);case 1:return f.createElement(NF,null);case 2:return f.createElement(NB,null);default:return null}}function NM(){let e=(0,_.wA)();return f.createElement(f.Fragment,null,f.createElement("div",{className:NN},(0,eN.t)("dev_handoff.code.lang_react")),f.createElement("div",{className:Nw}," ",f.createElement("div",{className:NT},f.createElement("div",{className:Nx},"1")),f.createElement("div",{className:NS},f.createElement("div",{className:Nk},(0,eN.tx)("dev_handoff.code_connect.modal_install_package")),f.createElement("div",{className:NI},f.createElement("div",{className:NL},"npm install @figma/code-connect"),f.createElement("div",{className:NA},f.createElement(wk,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inspect_panel.copy"),"aria-label":(0,eN.t)("inspect_panel.copy"),onClick:()=>e(wd.lW({stringToCopy:"npm install @figma/code-connect"}))},f.createElement(ry.U,{svg:wx.A},f.createElement(C5.X,null))))))),f.createElement("div",{className:Nw}," ",f.createElement("div",{className:NT},f.createElement("div",{className:Nx},"2")),f.createElement("div",{className:NS},f.createElement("div",{className:Nk},(0,eN.tx)("dev_handoff.code_connect.modal_run_command")),f.createElement("div",{className:NI},f.createElement("div",{className:NL},"npx figma connect"),f.createElement("div",{className:NA},f.createElement(wk,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inspect_panel.copy"),"aria-label":(0,eN.t)("inspect_panel.copy"),onClick:()=>e(wd.lW({stringToCopy:"npx figma connect"}))},f.createElement(ry.U,{svg:wx.A},f.createElement(C5.X,null))))))),f.createElement("div",{className:Nw}," ",f.createElement("div",{className:NT},f.createElement("div",{className:Nx},"3")),f.createElement("div",{className:NS},f.createElement("div",{className:Nk},(0,eN.tx)("dev_handoff.code_connect.modal_publish")),f.createElement("div",{className:NI},f.createElement("div",{className:NL},"npx figma connect publish "),f.createElement("div",{className:NA},f.createElement(wk,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inspect_panel.copy"),"aria-label":(0,eN.t)("inspect_panel.copy"),onClick:()=>e(wd.lW({stringToCopy:"npx figma connect publish"}))},f.createElement(ry.U,{svg:wx.A},f.createElement(C5.X,null))))))))}function NF(){let e=(0,_.wA)();return f.createElement(f.Fragment,null,f.createElement("div",{className:NN},(0,eN.t)("dev_handoff.code.lang_swiftui")),f.createElement("div",{className:Nw}," ",f.createElement("div",{className:NT},f.createElement("div",{className:Nx},"1")),f.createElement("div",{className:NS},f.createElement("div",{className:Nk},(0,eN.tx)("dev_handoff.code_connect.modal_install")),f.createElement("div",{className:NI},f.createElement("div",{className:NL},"npm install -g @figma/code-connect"),f.createElement("div",{className:NO},f.createElement(wk,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inspect_panel.copy"),"aria-label":(0,eN.t)("inspect_panel.copy"),onClick:()=>e(wd.lW({stringToCopy:"npm install -g @figma/code-connect"}))},f.createElement(ry.U,{svg:wx.A},f.createElement(C5.X,null))))))),f.createElement("div",{className:Nw}," ",f.createElement("div",{className:NT},f.createElement("div",{className:Nx},"2")),f.createElement("div",{className:NS},f.createElement("div",{className:Nk},(0,eN.tx)("dev_handoff.code_connect.swift.add_snippet")),f.createElement("div",{className:NI},f.createElement("div",{className:NP},'dependencies: [\n\u2003\u2003...,\n\u2003\u2003.package(url: "https://github.com/figma/code-connect", from: "1.0.0"),\n]'),f.createElement("div",{className:NO},f.createElement(wk,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inspect_panel.copy"),"aria-label":(0,eN.t)("inspect_panel.copy"),onClick:()=>e(wd.lW({stringToCopy:`dependencies: [
		...,
		.package(url:"https://github.com/figma/code-connect", from: "1.0.0"),
]`,ignoreLineBreaks:!1}))},f.createElement(ry.U,{svg:wx.A},f.createElement(C5.X,null))))))),f.createElement("div",{className:Nw}," ",f.createElement("div",{className:NT},f.createElement("div",{className:Nx},"3")),f.createElement("div",{className:NS},f.createElement("div",{className:Nk},(0,eN.tx)("dev_handoff.code_connect.modal_run_command")),f.createElement("div",{className:NI},f.createElement("div",{className:NL},'figma connect create "<url_to_node>"'),f.createElement("div",{className:NA},f.createElement(wk,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inspect_panel.copy"),"aria-label":(0,eN.t)("inspect_panel.copy"),onClick:()=>e(wd.lW({stringToCopy:"figma connect create"}))},f.createElement(ry.U,{svg:wx.A},f.createElement(C5.X,null))))))),f.createElement("div",{className:Nw}," ",f.createElement("div",{className:NT},f.createElement("div",{className:Nx},"4")),f.createElement("div",{className:NS},f.createElement("div",{className:Nk},(0,eN.tx)("dev_handoff.code_connect.modal_publish")),f.createElement("div",{className:NI},f.createElement("div",null,"figma connect publish "),f.createElement("div",{className:NA},f.createElement(wk,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inspect_panel.copy"),"aria-label":(0,eN.t)("inspect_panel.copy"),onClick:()=>e(wd.lW({stringToCopy:"figma connect publish"}))},f.createElement(ry.U,{svg:wx.A},f.createElement(C5.X,null))))))))}function NB(){let e=(0,_.wA)();return f.createElement(f.Fragment,null,f.createElement("div",{className:NN},(0,eN.t)("dev_handoff.code.lang_compose")),f.createElement("div",{className:Nw}," ",f.createElement("div",{className:NT},f.createElement("div",{className:Nx},"1")),f.createElement("div",{className:NS},f.createElement("div",{className:Nk},(0,eN.tx)("dev_handoff.code_connect.modal_install")),f.createElement("div",{className:NI},f.createElement("div",{className:NL},"npm install -g @figma/code-connect"),f.createElement("div",{className:NO},f.createElement(wk,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inspect_panel.copy"),"aria-label":(0,eN.t)("inspect_panel.copy"),onClick:()=>e(wd.lW({stringToCopy:"npm install -g @figma/code-connect"}))},f.createElement(ry.U,{svg:wx.A},f.createElement(C5.X,null))))))),f.createElement("div",{className:Nw}," ",f.createElement("div",{className:NT},f.createElement("div",{className:Nx},"2")),f.createElement("div",{className:NS},f.createElement("div",{className:Nk},(0,eN.tx)("dev_handoff.code_connect.compose.add_plugin_snippet")),f.createElement("div",{className:NI},f.createElement("div",{className:NP},'plugins { \n\u2003\u2003...\n\u2003\u2003id("com.figma.code.connect") version "1.0.0"\n} \n\ndependencies { \n\u2003\u2003...\n\u2003\u2003implementation("com.figma.code.connect:plugin:1.0.0")\n}'),f.createElement("div",{className:NO},f.createElement(wk,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inspect_panel.copy"),"aria-label":(0,eN.t)("inspect_panel.copy"),onClick:()=>e(wd.lW({stringToCopy:`plugins {
		...
		id("com.figma.code.connect") version "1.0.0"
}

dependencies {
		...
		implementation("com.figma.code.connect:plugin:1.0.0")
}`,ignoreLineBreaks:!1}))},f.createElement(ry.U,{svg:wx.A},f.createElement(C5.X,null))))))),f.createElement("div",{className:Nw}," ",f.createElement("div",{className:NT},f.createElement("div",{className:Nx},"3")),f.createElement("div",{className:NS},f.createElement("div",{className:Nk},(0,eN.tx)("dev_handoff.code_connect.modal_run_command")),f.createElement("div",{className:NI},f.createElement("div",{className:NL},'figma connect create "<url_to_node>"'),f.createElement("div",{className:NA},f.createElement(wk,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inspect_panel.copy"),"aria-label":(0,eN.t)("inspect_panel.copy"),onClick:()=>e(wd.lW({stringToCopy:"figma connect create"}))},f.createElement(ry.U,{svg:wx.A},f.createElement(C5.X,null))))))),f.createElement("div",{className:Nw}," ",f.createElement("div",{className:NT},f.createElement("div",{className:Nx},"4")),f.createElement("div",{className:NS},f.createElement("div",{className:Nk},(0,eN.tx)("dev_handoff.code_connect.modal_publish")),f.createElement("div",{className:NI},f.createElement("div",null,"figma connect publish "),f.createElement("div",{className:NA},f.createElement(wk,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inspect_panel.copy"),"aria-label":(0,eN.t)("inspect_panel.copy"),onClick:()=>e(wd.lW({stringToCopy:"figma connect publish"}))},f.createElement(ry.U,{svg:wx.A},f.createElement(C5.X,null))))))))}let NU=(0,cV.Ju)(function(){let[e,t]=(0,f.useState)(0),n=(0,_.wA)(),a=()=>{n(ty.Lo())};return f.createElement(cK.Nb,{className:"code_connect_modal--modal--K8M-q",hide:a,size:800,"data-testid":"upgrade_choose_plan_modal"},f.createElement("div",{className:nb()("code_connect_modal--container--gdZJZ",nz.Dm),tabIndex:-1},f.createElement(tN.Jn,{className:"code_connect_modal--closeButton--lC3YZ",onClick:a}),f.createElement("div",{className:"code_connect_modal--sidebar--B46--"},f.createElement("h1",{className:"code_connect_modal--sidebarHeading--bQvXS"},(0,eN.tx)("dev_handoff.code_connect.title")),f.createElement("h2",{className:"code_connect_modal--sidebarSubheading--DNWUs"},(0,eN.tx)("dev_handoff.code_connect.modal_text")),f.createElement("div",{className:0===e?Nb:NC,onClick:()=>t(0),role:"none"},(0,eN.t)("dev_handoff.code.lang_react")),f.createElement("div",{className:1===e?Nb:NC,onClick:()=>t(1),role:"none"},(0,eN.t)("dev_handoff.code.lang_swiftui")),f.createElement("div",{className:2===e?Nb:NC,onClick:()=>t(2),role:"none"},(0,eN.t)("dev_handoff.code.lang_compose")),f.createElement("div",{className:"code_connect_modal--spacer--zHdi3"}),f.createElement(so.$$,{onClick:()=>n((0,xZ.RK)({rawInput:"https://github.com/figma/code-connect"})),className:"code_connect_modal--bottomButton--OnRXO"},f.createElement("div",{className:"code_connect_modal--githubIcon--PlOpd"},f.createElement(C6.f,null)),(0,eN.tx)("dev_handoff.code_connect.modal_github_button"))),f.createElement("div",{className:"code_connect_modal--content--xlswn"},f.createElement(NR,{language:e}))))},"CodeConnectModal",cV.ZU.YES),NH=new class{createSnippet(e,t,n){var a;let l=iD.Ay.post("/api/figmadocs/snippet",{node_id:e,file_key:t,snippet:n});null==(a=(0,mH.WB)())||a.optimisticallyCreate({Figmadoc:{[`optimistic-snippet-${(0,ez.g)()}`]:{figmadoc:JSON.stringify(n),instanceFigmadocs:null,fileKey:t,nodeId:e,createdAt:new Date,updatedAt:new Date,label:"",type:"snippet"}}},l)}updateSnippet(e,t,n,a){var l;let r=iD.Ay.put("/api/figmadocs/snippet",{node_id:t,file_key:n,snippet:a});null==(l=(0,mH.WB)())||l.optimisticallyUpdate({Figmadoc:{[e]:{figmadoc:JSON.stringify(a),fileKey:n,nodeId:t}}},r)}};var NG=n(296210),NV=n.n(NG);class NK{constructor(e){let{selectionStart:t,selectionEnd:n}=e;this.elm=e,this.start=t,this.end=n,this.value=this.elm.value}position(e,t){let{selectionStart:n,selectionEnd:a}=this.elm;return this.start="number"!=typeof e||isNaN(e)?n:e,this.end="number"!=typeof t||isNaN(t)?a:t,this.elm.selectionStart=this.start,this.elm.selectionEnd=this.end,this}insertText(e){return this.elm.focus(),this.elm.setRangeText(e),this.value=this.elm.value,this.position(),this}getSelectedValue(e,t){let{selectionStart:n,selectionEnd:a}=this.elm;return this.value.slice("number"!=typeof e||isNaN(e)?n:e,"number"!=typeof t||isNaN(t)?a:e)}getLineStartNumber(){let e=this.start;for(;e>0;)if(e--,"\n"===this.value.charAt(e)){e++;break}return e}getIndentText(){let e=this.getLineStartNumber(),t=this.getSelectedValue(e),n="";return t.replace(/(^(\s)+)/,(e,t)=>n=t),n}lineStarInstert(e){if(e){let t=this.start,n=this.getLineStartNumber(),a=this.getSelectedValue(n);this.position(n,this.end).insertText(a.split("\n").map(t=>e+t).join("\n")).position(t+e.length,this.end)}return this}lineStarRemove(e){if(e){let t=this.start,n=this.getLineStartNumber(),a=this.getSelectedValue(n),l=RegExp(`^${e}`,"g"),r=t-e.length;l.test(a)||(r=t),this.position(n,this.end).insertText(a.split("\n").map(e=>e.replace(l,"")).join("\n")).position(r,this.end)}}notifyChange(){let e=new Event("input",{bubbles:!0,cancelable:!1});this.elm.dispatchEvent(e)}}function NW(e){e.stopPropagation(),e.preventDefault()}let Nz={position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},Nj={position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",opacity:.8,overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},NJ={margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word",outline:0},NY=f.forwardRef((e,t)=>{let{prefixCls:n="w-tc-editor",value:a,padding:l=10,minHeight:r=16,placeholder:i,language:o,className:s,style:c,onChange:d,...u}=e,[m,p]=(0,f.useState)(e.value||"");(0,f.useEffect)(()=>p(e.value||""),[e.value]);let _=(0,f.useRef)(null);(0,f.useImperativeHandle)(t,()=>_.current);let g={paddingTop:l,paddingRight:l,paddingBottom:l,paddingLeft:l},h=(0,f.useMemo)(()=>`<pre aria-hidden=true><code>${NV().sanitize((0,w_.g)(o,String(m||"")))}</code><br /></pre>`,[m,o]),E=(0,f.useMemo)(()=>f.createElement("div",{style:{...NJ,...g,minHeight:r},className:nb()(wy.y,`${n}-preview`,{[`language-${o}`]:!!o}),dangerouslySetInnerHTML:{__html:h}}),[n,o,h]);return f.createElement("div",{style:{...Nz,...c},className:nb()("code_panels_shared--code--VPQ05",n,s)},f.createElement("textarea",{autoComplete:"off",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",...u,placeholder:i,onKeyDown:e=>{u.onKeyDown&&!1===u.onKeyDown(e)||function(e){let t=new NK(e.target),n=e.nativeEvent.code.toLocaleLowerCase();if("tab"===n)NW(e),t.start===t.end?t.insertText("  ").position(t.start+2,t.end+2):t.getSelectedValue().indexOf("\n")>-1&&e.shiftKey?t.lineStarRemove("  "):t.getSelectedValue().indexOf("\n")>-1?t.lineStarInstert("  "):t.insertText("  ").position(t.start+2,t.end),t.notifyChange();else if("enter"===n){NW(e);let n=`
${t.getIndentText()}`;t.insertText(n).position(t.start+n.length,t.start+n.length),t.notifyChange()}else if("escape"===n)t.elm.blur();else if(n&&/^(quote|backquote|bracketleft|digit9|comma)$/.test(n)&&t.getSelectedValue()){NW(e);let a=t.getSelectedValue(),l="";switch(n){case"quote":l=`'${a}'`,e.shiftKey&&(l=`"${a}"`);break;case"backquote":l=`\`${a}\``;break;case"bracketleft":l=`[${a}]`,e.shiftKey&&(l=`{${a}}`);break;case"digit9":l=`(${a})`;break;case"comma":l=`<${a}>`}t.insertText(l),t.notifyChange()}}(e)},style:{...NJ,...Nj,...g,minHeight:r,...i&&!m?{WebkitTextFillColor:"inherit"}:{}},ref:_,onChange:e=>{p(e.target.value),d&&d(e)},className:`${n}-text`,value:m}),E)});function NX({doc:e,docId:t}){let n=(0,_.wA)(),[a,l]=f.useState(e?e.snippet:"// Write your snippet here"),r=(0,af.tS)(),i=(0,lh.uQ)(),o=f.useCallback(()=>{if(!i||!r)return;let e={type:"snippet",snippet:a};t?NH.updateSnippet(t,i,r,e):NH.createSnippet(i,r,e),n(ty.Ce())},[a,r,i,t,n]);return f.createElement(cK.aF,{className:tk.yl,tintedModalBackground:!0},f.createElement("div",{className:tk.DD},(0,eN.tx)("dev_handoff.figmadocs.edit_sample_code")),f.createElement("div",{className:tk.jE},f.createElement("div",{className:nb()(wb,wC)},f.createElement(NY,{value:a,language:"jsx",onChange:e=>{l(e.target.value)},padding:1})," ")),f.createElement("div",{className:tk.v0},f.createElement(so.nR,{className:tk.Lu,onClick:nf.lQ},(0,eN.tx)("general.cancel")),f.createElement(so.$$,{className:tk.pL,onClick:o},(0,eN.tx)("general.save"))))}let Nq=(0,cV.Ju)(function(){return f.createElement(NX,null)},"AddManualSnippetModal"),NZ=(0,cV.Ju)(function({doc:e,docId:t}){return f.createElement(NX,{doc:e,docId:t})},"EditManualSnippetModal"),NQ="figmadocs--figmadocWrapper--4SMJB",N$="figmadocs--fileLink--gVeAA utilities--bodySmall--JyKR1";var N0=n(752442),N1=n(126815);let N2={Swift:"swift",TypeScript:"jsx"};function N5({height:e}){return f.createElement("div",{style:{height:e}})}function N4(){return f.createElement("a",{href:"https://www.figma.com/developers/code-connect",target:"_blank"},f.createElement(iU.Ex,{color:iU.zE.DEFAULT,text:(0,eN.t)("general.beta"),className:"figmadocs--betaBadge--Wauhf text--fontPos9--naThA text--_fontBase--QdLsd",dataTooltipType:nx.Ib.TEXT,dataTooltip:(0,eN.t)("dev_handoff.figmadoc.beta_badge_tooltip"),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50}))}function N3({updatedAt:e}){let t=f.useMemo(()=>e?(0,cF.A)(e).fromNow():"",[e]);return f.createElement(iU.Ex,{color:iU.zE.DEFAULT,text:(0,eN.t)("dev_handoff.figmadocs.connected"),icon:f.createElement(Nm.x,null),className:"figmadocs--connectedBadge--5NAUO",dataTooltipType:nx.Ib.TEXT,dataTooltip:(0,eN.t)("dev_handoff.figmadocs.connected_last_published_at",{lastPublishedAt:t}),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50})}function N6(e){try{let{url:t}=e,n=new URL(t).pathname.split("/"),a=n.indexOf("blob");-1===a&&(a=n.indexOf("tree"));let l=n.slice(a+2).join("/"),r=l.length>0?l:n[n.length-1];return f.createElement("span",{className:"figmadocs--linkFilePath--DBTZW"},r)}catch(e){return null}}function N7(){let e=(0,_.wA)(),t=f.useCallback(()=>{e(ty.to({type:Nq}))},[e]);return f.createElement("div",{className:"figmadocs--connectToCodeCard--Kde90 common--well--J0WtH"},f.createElement("div",null,(0,eN.t)("dev_handoff.figmadoc.connect_to_code")),f.createElement("div",null,(0,eN.t)("dev_handoff.figmadoc.connect_to_code.body")),f.createElement("div",{className:"figmadocs--connectToCodeCardButtonWrapper--Z2ict"},f.createElement(so.nR,null,(0,eN.t)("dev_handoff.figmadoc.connect_to_code")),f.createElement(so.nR,{onClick:t},(0,eN.t)("dev_handoff.figmadoc.add_manual_snippet"))))}function N8(){let e=(0,_.wA)();return f.createElement("div",{className:"figmadocs--emptyCodeConnectCard--UrWur"},f.createElement("div",{className:"figmadocs--emptyCodeConnectCardHeader--S8h2p"},(0,eN.t)("dev_handoff.code_connect.title")),f.createElement("div",{className:"figmadocs--emptyCodeConnectCardHeaderRight--vUyRn",onClick:()=>{e(ty.to({type:NU}))},role:"none"},(0,eN.t)("dev_handoff.code_connect.entrypoint_text")))}function N9({doc:e,docId:t}){let n=(0,Nv.vp)(e),a=(0,_.wA)(),l=f.useCallback(()=>{a(ty.to({type:NZ,data:{docId:t,doc:e}}))},[a,e,t]);return f.createElement(wu.VZ,{title:(0,eN.t)("inspect_panel.code.code"),recordingKey:"figmadoc",additionalHeaders:f.createElement("button",{onClick:l},"EDIT")},f.createElement("div",{className:NQ},f.createElement(wI,{code:[n],section:n,key:n.name,copyAllActionEnabled:!1})))}function Se({doc:e,updatedAt:t,additionalHeaderActions:n,instanceFigmadocs:a,isPlayground:l,onInstancePillClick:r}){var i;let o=(0,ew.iZ)(),s=(0,af.q5)(),c=(0,lh.VW)(),d=(0,eb.eY)(),{backingFileKey:u,backingNodeId:m,backingComponentKey:p,backingStateGroupKey:_,backingLibraryKey:g}=(0,Nv.HX)((null==c?void 0:c.guid)??"",d,(null==s?void 0:s.key)??null),h=(0,eb.T3)();l&&(d=h);let E=(0,Np.N)((0,y.kc)().dt_code_connect_js_templates?e.template:void 0,a,l);!function({backingFileKey:e,result:t}){var n;let a=(0,Ny.X)(e);(0,np.h)(()=>{a&&(0,y.kc)().dt_code_connect_preset_libraries&&Z.az.trackDefinedEvent("code_connect.code_connect_rendered",{partnerType:a})});let l=(null==t?void 0:t.result)==="ERROR"&&(null==(n=null==t?void 0:t.data)?void 0:n.error)?t.data.error.type:null,r=(0,v.ZC)(l);f.useEffect(()=>{l!==r&&l&&a&&(0,y.kc)().dt_code_connect_preset_libraries&&Z.az.trackDefinedEvent("code_connect.code_connect_error",{partnerType:a,errorType:l})},[l,r,a])}({backingFileKey:u,result:E});let b=f.useCallback(e=>{r?r(e):ei.w3z.selectAndPanToNode(e)},[r]),C=f.useCallback(()=>{(0,Z.sx)("code_connect_clicked",{user_id:null==o?void 0:o.id,is_playground:l,node_id:m,file_key:u,...(null==s?void 0:s.key)===u?{file_team_id:null==s?void 0:s.teamId,file_org_id:null==s?void 0:s.parentOrgId}:{},label:e.label,component_key:p,state_group_key:_,library_key:g})},[null==o?void 0:o.id,l,m,u,null==s?void 0:s.key,null==s?void 0:s.teamId,null==s?void 0:s.parentOrgId,e.label,p,_,g]);if((0,y.kc)().dt_code_connect_js_templates){if(!E)return null;if((null==E?void 0:E.result)==="SUCCESS"){let{code:r,language:o,instances:s}=function(e,t){let{sections:n,language:a}=e.data,l=0,r={};return{language:a,code:n.map(e=>{if("CODE"===e.type)return e.code;if("INSTANCE"===e.type){let n=`_INTERNAL_INSTANCE_KEY_${l++}_`,a=t.get(e.guid);return r[n]={id:e.guid,name:(null==a?void 0:a.name)??""},n}return console.error("Unknown section type",e),""}).join(""),instances:r}}(E,d),c=e.source,u=new Set([...(null==(i=e.templateData)?void 0:i.imports)??[],...Object.entries(a).map(([e,t])=>t.map(e=>{var t;return r.includes(`<${e.component}`)?(null==(t=null==e?void 0:e.templateData)?void 0:t.imports)??[]:[]}).flat()).flat()]),m=r;return u.size>0&&(m=Array.from(u).join("\n")+"\n\n"+r),f.createElement(NE,{code:m,language:o,instances:s,fallback:null,errorFallback:null,reformatOnInstanceChange:l},([e,a])=>e&&f.createElement(wu.VZ,{hideHeader:!0,noBorder:!0,recordingKey:"figmadoc",padding:wu.UZ.NONE,onClick:C},f.createElement("div",{className:NQ},f.createElement(wI,{collapseLongSections:!1,code:[e],section:e,sectionToCopy:a,key:e.name,copyAllActionEnabled:!1,onInstancePillClick:b,additionalHeaderActions:n,footerActions:f.createElement(f.Fragment,null,c?f.createElement("a",{href:c,target:"_blank",className:N$},f.createElement(C6.v,{url:c}),f.createElement(N6,{url:c})):null,f.createElement(fy.M,null),f.createElement(N3,{updatedAt:t})),type:"connected"}))))}{(0,y.b5)()&&console.error("Error evaluating code connect template",E);let e=null==E?void 0:E.data.error,t=(0,eN.t)("dev_handoff.figmadocs.error_unknown");(null==e?void 0:e.type)==="PROPERTY_NOT_FOUND"&&(t=(0,eN.t)("dev_handoff.figmadocs.error_property_not_found",{propertyName:e.propertyName})),(null==e?void 0:e.type)==="PROPERTY_TYPE_MISMATCH"&&(t=(0,eN.t)("dev_handoff.figmadocs.error_property_type_mismatch",{propertyName:e.propertyName,propertyType:e.expectedType??"unknown"}));let n=(0,y.kc)().dt_code_connect_updated_error_banner?(0,eN.t)("dev_handoff.figmadocs.error_title"):(0,eN.t)("dev_handoff.code_connect.title");return f.createElement("div",{className:"figmadocs--errorBannerWrapper--eemEO utilities--bodySmall--JyKR1"},f.createElement(Nu.z,{variant:"danger",title:n,orientation:"vertical",iconSrc:N1.A},t))}}return f.createElement(St,{doc:e,updatedAt:t})}function St({doc:e,updatedAt:t}){var n,a;let l=e?(0,Nv.bE)(e):void 0,r=N2[e.language||"default"]||"jsx",i=e.template;return(null==(n=e.templateData)?void 0:n.imports)&&e.templateData.imports.length>0&&(i=[...(null==(a=e.templateData)?void 0:a.imports)??[]].join("\n")+"\n\n"+i),f.createElement(NE,{code:i,language:r,fallback:null,errorFallback:null},e=>e&&f.createElement(wu.VZ,{hideHeader:!0,noBorder:!0,recordingKey:"figmadoc",padding:wu.UZ.NONE},f.createElement("div",{className:NQ},e.map(e=>f.createElement(wI,{code:[e],section:e,key:e.name,copyAllActionEnabled:!1,footerActions:f.createElement(f.Fragment,null,l?f.createElement("a",{href:l,target:"_blank",className:N$},f.createElement(C6.v,{url:l}),f.createElement(N6,{url:l})):null,f.createElement(fy.M,null),f.createElement(N3,{updatedAt:t})),type:"connected"})))))}function Sn({isPlayground:e,onInstancePillClick:t}){let n=(0,eb.eY)(),a=(0,eb.T3)(),l=ei.glU.getPlaygroundNodeData(),r=(0,_.d4)(bi.qd)[0],i=function(e){switch(e){case wR.uz:case wR.A0:return"React";case wR.p:case wR.Ap:return"SwiftUI";default:return}}((0,wR.v4)().id),[o,s]=f.useState(i);e&&(r=N_(l.playgroundGUID,a,n)??r);let{id:c,updatedAt:d,doc:u,instanceFigmadocs:m,availableLabels:p,loaded:g,disabled:E,willHaveCodeConnect:v,isCommunityKey:b}=(0,Nv._3)(r,n,o,a.get(l.playgroundGUID)),C=n.get(r),w=(0,_.d4)(e=>e.userFlags.dev_mode_has_dismissed_code_connect_instance_entrypoint),T=(0,_.wA)(),x=(0,nT.U)(),N="ui3"===(0,h.DP)().version;if(e){if(!u)return null}else if((0,y.kc)().dt_figmadoc_manual_snippets&&!E){if(!u)return f.createElement(N7,null);if("type"in u&&"snippet"===u.type&&null!==c)return f.createElement(N9,{doc:u,docId:c})}else if(u&&"type"in u&&"snippet"===u.type)return null;else if(!u){if(v||!g)return null;if((0,y.kc)().dt_code_connect_entrypoints&&!b&&!E){if(!w&&((null==C?void 0:C.type)==="INSTANCE"||(null==C?void 0:C.type)==="SYMBOL"))return f.createElement(f.Fragment,null,f.createElement(Ng.u,{className:"figmadocs--hintPanel--9oFTP",idForTests:"hintCodeConnectInstanceForFigma",userFlag:"dev_mode_has_dismissed_code_connect_instance_entrypoint",title:(0,eN.t)("dev_handoff.code_connect.entrypoint_title"),iconComponent:f.createElement(a2.B,{svg:N0.A,className:"figmadocs--codeConnectIcon--Lm4ab"}),hintText:(0,eN.t)("dev_handoff.code_connect.entrypoint_body_text"),hintLinkText:(0,eN.t)("dev_handoff.code_connect.entrypoint_text"),hintLinkOnClick:()=>{T(ty.to({type:NU}))},hintLinkOnNewLine:!0,codeConnectTweaks:!0}),f.createElement(N5,{height:16}));if((null==C?void 0:C.type)==="SYMBOL")return f.createElement(f.Fragment,null,f.createElement(N8,null),f.createElement(N5,{height:16}))}return null}let S="figmadoc-label-select";return e&&(S+="-playground"),f.createElement(f.Fragment,null,f.createElement(Se,{doc:u,updatedAt:d,instanceFigmadocs:m,onInstancePillClick:t,additionalHeaderActions:f.createElement(f.Fragment,null,(0,y.kc)().dt_code_connect_hide_beta_badge?null:f.createElement(N4,null),f.createElement(fy.M,null),f.createElement(ow.l6,{className:"figmadocs--labelSelect--C-SIX",id:S,onChange:e=>s(e),dropdownShown:x,dispatch:T,property:u.label,formatter:{format:e=>e},dropdownWidth:N?"120px":"auto",dropdownAlignment:"right",onDropdownHidden:nf.lQ},p.map(e=>f.createElement(ow.c$,{key:e,value:e})))),isPlayground:e}),f.createElement(N5,{height:16}))}var Sa=n(275725),Sl=n(286954),Sr=n(273226),Si=n(637913),So=n(44892),Ss=n(927657),Sc=n(931770),Sd=n(173454),Su=(e=>(e.GENERIC="GENERIC",e.OFFLINE="OFFLINE",e.THUMBNAIL_TIMEOUT="THUMBNAIL_TIMEOUT",e))(Su||{});let Sm=(0,e4.eU)(!1);function Sp(e){let[t,n]=f.useState(),[a,l]=f.useState(),[r,i]=f.useState(!1),[o,s]=f.useState(!1),[c,d]=f.useState(!1),[u,m]=(0,S.fp)(Sm),p=f.useCallback(()=>{var t;let a=ei.glU.generatePlaygroundThumbnail(e??null),r=ei.glU.getPlaygroundNodeData();(null==(t=a.pixels)?void 0:t.length)>0?(n({src:(0,Sc.Pv)(a.pixels,new r4.Mi(a.width,a.height)),width:a.width/a.scale,height:a.height/a.scale}),l(r),s(!1),(0,y.kc)().dt_component_bg_improvements&&m(!0)):s(!0)},[m,e]),_=f.useCallback(e=>{i(e),d(!0)},[d]),{onSetPercentImagesLoaded:g,onResetTracker:h}=function(e){let[t,n]=f.useState(0),[a,l]=f.useState(0),[r,i]=f.useState(null),o=f.useCallback(()=>{n(0),l(0),i(null)},[]);return f.useEffect(()=>{function n(n,o){if(t>n&&t<o&&a<=n){let n=Date.now();(null===r||n-r>1e3)&&(i(n),l(t),e())}}n(.25,.5),n(.5,.75),n(.75,1)},[a,r,e,t]),f.useEffect(()=>{1===t&&(e(),l(1))},[e,t]),f.useMemo(()=>({onSetPercentImagesLoaded:n,onResetTracker:o}),[n,o])}(p);return f.useEffect(()=>(0,Ss.k)(_),[_]),f.useEffect(()=>()=>ei.glU.clearPlaygroundScene(),[]),f.useEffect(()=>{c&&setTimeout(()=>{p(),d(!1)},0)},[c,d,p]),f.useMemo(()=>({setPlaygroundNodeData:l,onSetPercentImagesLoaded:g,onResetTracker:h,thumbnailData:t,playgroundNodeData:a,hasChangesToReset:r,hasThumbnailErrors:o,setHasChangesToReset:i}),[l,g,h,t,a,r,o,i])}let Sf=(0,vc.fv)();var S_=n(563438);function Sg(){let e=(0,xV.lA)(),t=(0,_.wA)(),n=(0,af.tS)(),a=(0,xW.yW)(e),l=!!a&&a!==n,r=f.useMemo(()=>!!e&&ei.Egt.nodeIsSoftDeleted(e.guid),[e]),i=f.useCallback(()=>{if(e){if(l){if(!e.publishID)return;let n=(0,xW.xl)(a,e.publishID);t(iH.V3({url:n}))}else t(ty.AS()),ei.glU.goToSymbolOrStateGroupById(e.guid,!1)}},[e,t,a,l]);return!e||r||l&&(0,xK.wJ)(a)?null:f.createElement(iG.K0,{svg:S_.A,onClick:i,"data-tooltip":e.isState?(0,eN.t)("design_systems.playground.open_variant_in_library"):(0,eN.t)("design_systems.playground.open_component_in_library"),"data-tooltip-type":nx.Ib.TEXT})}var Sh=n(90013);function SE({fill:e,modes:t,recordingKey:n}){let a=(0,aN.J2)((0,tM.UK)().showGuids),l=Object.entries(t).map(([e,t])=>({...t,setKey:e})).filter(e=>e.modeOptions.length>1).sort((e,t)=>e.collectionName.toLocaleLowerCase().localeCompare(t.collectionName.toLocaleLowerCase()));return 0===l.length?null:f.createElement(f.Fragment,null,f.createElement("div",{className:"playground_modes_section--title--wPRzF text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,eN.tx)("design_systems.playground.variable_modes_title")),l.map(t=>f.createElement(Sh.yj,{fill:e,key:t.setKey,onChange:e=>{e!==w1.Mo&&e!==w1.Yn&&((0,b_.c2)(t.explicitMode||t.inheritMode,e)||(e===w1.Ws||e===w1.UE?ei.glU.setVariableModeForPlayground(t.setKey,e):ei.glU.setVariableModeForPlayground(t.setKey,e.guid)))},showExplicitOnly:!1,variableSetName:t.collectionName,variableSetKey:t.setKey,modeOptions:t.modeOptions,explicitModeID:t.explicitMode,inheritedModeID:t.inheritMode,isShowingGuids:a,showInheritedModeOption:!1,recordingKey:n_.Pt(n,`mode-${t.setKey}`)})))}var Sv=n(552048),Sy=n(467302),Sb=n(721478);let SC="playground_props_section--divider--I23uK";var Sw=n(132208);function ST({componentProps:e,bubbledComponentId:t,productComponentGUID:n,sceneGraph:a,instanceSwapPickerInitialHeight:l,instanceSwapPickerInitialPosition:r,recordingKey:i,containerWidth:o}){let s=(0,eb.T3)(),{typedPropDefsExcludingHidden:c,variantPropDefs:d,assignmentValuesByDefId:u,allStateVariantProps:m,backingStateVariantProps:p,statePropertyValues:_}=(0,Sy.n)(t,e,n,s);return c.length||d.length?f.createElement(Sv.S,{titleClassName:"playground_props_section--bubbledPropsTitle--8SBPC",isInitiallyOpen:c.length<Si.qC,title:f.createElement(Sb.iN,{canCollapse:!0,shouldHideButtons:!0,isInComponentPlayground:!0,instanceAndSublayerGUIDs:[t],containerWide:o===Sr.O2.WIDE,recordingKey:i})},f.createElement(Si.tO,{typedPropDefs:c,variantPropDefs:d,assignmentValues:u,allStateVariantProps:m,backingStateVariantProps:p,statePropertyValues:_,productComponentGUID:n,propDimension:Sr.OE.ASSIGNMENT,guids:[t],forBubbledProps:!0,splitVariantAndTypedProps:!1,instanceSwapPickerInitialHeight:l,instanceSwapPickerInitialPosition:r,sceneGraph:a,inPlayground:!0,recordingKey:i,containerWidth:o,hideIcon:!0})):null}function Sx({componentProps:e,moduleProps:t,moduleFrameData:n,label:a,playgroundGUID:l,productComponentGUID:r,sceneGraph:i,viewOnlyMode:o,instanceSwapPickerInitialHeight:s,instanceSwapPickerInitialPosition:c,recordingKey:d,containerWidth:u,errorData:m,shouldShowDividerAboveProps:p}){let _=(0,eb.T3)(),g=l&&e,{typedPropDefsExcludingHidden:h,variantPropDefs:E,assignmentValuesByDefId:v,allStateVariantProps:y,backingStateVariantProps:b,statePropertyValues:C}=(0,Sy.n)(l??"",e??{},r,_),w=f.useMemo(()=>{var a,r,i;if(!g)return[];let o=null==(a=e[l])?void 0:a.bubbledNestedInstanceGUIDs;if(o)return o;let s=null==(r=null==t?void 0:t[l])?void 0:r.bubbledNestedInstanceGUIDs;if(s)return s;if(null==n?void 0:n.selectedFrameGUID){let e=null==(i=null==t?void 0:t[n.selectedFrameGUID])?void 0:i.bubbledNestedInstanceGUIDs;if(e)return e}return[]},[e,g,n,t,l]);return m?m.shouldHideError?null:f.createElement(f.Fragment,null,f.createElement("div",{className:SC}),f.createElement("div",{className:"playground_props_section--errorBannerContainer--d3nQO"},f.createElement(Nu.z,{orientation:"vertical",iconSrc:Sw.A,onClose:()=>m.setShouldHideError(!0),variant:"warning",title:function(e){switch(e){case"GENERIC":return(0,eN.t)("design_systems.playground.unable_to_load");case"OFFLINE":return(0,eN.t)("design_systems.playground.unable_to_load_while_offline");case"THUMBNAIL_TIMEOUT":return(0,eN.t)("design_systems.playground.unable_to_load_thumbnail")}}(m.errorType)},function(e){switch(e){case"GENERIC":return(0,eN.t)("design_systems.playground.unable_to_load_help_text");case"OFFLINE":return(0,eN.t)("design_systems.playground.unable_to_load_while_offline_help_text");case"THUMBNAIL_TIMEOUT":return(0,eN.t)("design_systems.playground.unable_to_load_thumbnail_help_hext")}}(m.errorType)))):g&&(h.length||E.length||w.length)?f.createElement(f.Fragment,null,p&&f.createElement("div",{className:SC}),a,f.createElement(Si.tO,{typedPropDefs:h,variantPropDefs:E,assignmentValues:v,allStateVariantProps:y,backingStateVariantProps:b,statePropertyValues:C,productComponentGUID:r,propDimension:Sr.OE.ASSIGNMENT,guids:[l],viewOnlyMode:o,forBubbledProps:!1,splitVariantAndTypedProps:!!o,instanceSwapPickerInitialHeight:s,instanceSwapPickerInitialPosition:c,sceneGraph:i,inPlayground:!0,recordingKey:d,containerWidth:u,hideIcon:!0}),w.map(t=>{var n,a;let l=(null==(n=e[t])?void 0:n.backingSymbol)||"",r=(null==(a=e[l])?void 0:a.containingStateGroupGUID)||l;return r?f.createElement(ST,{key:t,componentProps:e,bubbledComponentId:t,productComponentGUID:r,sceneGraph:i,instanceSwapPickerInitialHeight:s,instanceSwapPickerInitialPosition:c,recordingKey:d,containerWidth:u}):null})):null}var SN=n(658850),SS=n(97670),Sk=n(798415);let SI=f.memo(({guid:e})=>{let t;f.useEffect(()=>{e&&S.zl.set(Nf,[e])},[e]);let n=(0,_.wA)(),a=(0,_.d4)(bi.AF),l=(0,bB.wS)(),r="loaded"===l.status&&"temp-scene"===l.result.dataLocation?l.result:void 0,i=f.useRef(null),o=function(){let e=(0,_.d4)(bi.AF),t=null==e?void 0:e.guid,n=(0,bB.wS)(),a="loaded"===n.status?n.result:void 0,{setPlaygroundNodeData:l,thumbnailData:r,playgroundNodeData:i,hasChangesToReset:o}=Sp(),s=f.useCallback(()=>{let e=!1;a?e=ei.glU.setPlaygroundSceneFromDetachedInfo(a.dataComponentId,"temp-scene"===a.dataLocation):t&&(e=ei.glU.setPlaygroundSceneFromSelection()),e||(ei.glU.clearPlaygroundScene(),l(void 0))},[t,a,l]);return f.useEffect(()=>{s()},[s]),f.useMemo(()=>i&&r?{hasChangesToReset:o,refetchAndResetScene:s,nodeData:i,thumbnailData:r}:null,[i,r,o,s])}(),s=f.useMemo(()=>new lE.q(r?EV.ju.DETACHED_COMPONENTS:EV.ju.PLAYGROUND),[r]),c=(0,eb.eY)(),d=f.useMemo(()=>{var e;if(!o)return"";if("loaded"===l.status)return l.result.isVariant?l.result.dataStateGroupId??l.result.dataComponentId:l.result.dataComponentId;let t=null==(e=o.nodeData)?void 0:e.playgroundGUID;return t?((0,Sr.Yi)([t],s)||(0,Sr.k4)([t],s))??"":""},[o,s,l]),u=f.useMemo(()=>{var e;return(null==(e=s.get(d))?void 0:e.name)??""},[d,s]),{theme:m,setTheme:p}=function(e,t){let n=(0,Sa.IO)(e,t,!0),a=f.useRef(n()),[l,r]=f.useState(a.current),[i,o]=(0,S.fp)(Sm),s=f.useCallback(()=>{let e=n();return a.current=e,e},[n]);return(f.useEffect(()=>{i&&(r(e=>{let t=a.current,n=s();return"light"===t&&"dark"===n||"dark"===t&&"light"===n?"light"===e?"dark":"light":e}),o(!1))},[s,o,r,i]),(0,y.kc)().dt_component_bg_improvements)?{theme:l??a.current,setTheme:r}:{theme:a.current,setTheme:nf.lQ}}(e??d,s),g=(0,_.d4)(e=>e.userFlags.dismissed_playground_banner),h=f.useCallback(()=>{n(j.b({dismissed_playground_banner:!0}))},[n]),E=f.useCallback(()=>{n((0,Sl.vq)())},[n]),v=f.useCallback(()=>{null==o||o.refetchAndResetScene()},[o]),[b,C]=f.useState(void 0),w=f.useCallback(()=>{var e;C(null==(e=i.current)?void 0:e.offsetHeight)},[i]);f.useLayoutEffect(()=>{C(void 0),requestAnimationFrame(w)},[w]);let T=f.useCallback(e=>{w();let t=N_(e,s,c),n=S.zl.get(Nf);S.zl.set(Nf,[...n,t]),ei.glU.setPlaygroundSceneFromGuid(t??"")},[c,s,w]);if(!o||!a)return null;let{thumbnailData:x,nodeData:N}=o;if(!N)return null;let{playgroundGUID:k,componentProps:I,moduleProps:A,modeData:O}=N,L=s.get(k);if(!x)return null;let P=S.zl.get(Nf);return P.length>1&&(t=f.createElement(iG.K0,{onClick:()=>{let e=P[P.length-2];ei.glU.setPlaygroundSceneFromGuid(e);let t=P.slice(0,-1);S.zl.set(Nf,t)},"data-not-draggable":!0,"data-does-not-dismiss-modal":!0,"data-tooltip":(0,eN.t)("dev_handoff.playground.select_parent_instance"),"data-tooltip-type":nx.Ib.TEXT,className:"playground_modal--backButton--Sivbf"},f.createElement(Nd.E,null))),f.createElement(cK.aF,{size:"fitContent",title:f.createElement(SA,null),titleClassName:"playground_modal--modalTitleContainer--M7mdu",className:"playground_modal--modal--3F6xP",useModalViewScroll:!1,onHide:()=>(0,Z.sx)("Playground closed"),onModalClick:E,modalRef:i,height:b},f.createElement("div",{className:nb()("playground_modal--container--oiCFH",b?"playground_modal--hasHeight--HGbkD":null)},f.createElement("div",{className:"playground_modal--thumbnailContainer--ZaF9V",style:(0,Sa.CU)(m)},f.createElement("img",{src:x.src,className:"playground_modal--thumbnail--JPv2M",width:x.width,height:x.height,alt:(0,eN.t)("design_systems.playground.thumbnail_alt")}),(0,y.kc)().dt_component_bg_improvements&&f.createElement("div",{className:"playground_modal--themeButton---BLzd","data-preferred-theme":m},f.createElement(iG.K0,{svg:"light"===m?SS.A:SN.A,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("design_systems.playground.change_background"),onClick:()=>p(e=>"light"===e?"dark":"light")}))),f.createElement("div",{className:"playground_modal--propsContainer--CAA9y"},f.createElement("div",{className:"playground_modal--propsContainerHeader--oGDtk"},f.createElement("div",{className:"playground_modal--propsContainerName--ZCWzH"},t,f.createElement("div",{className:"playground_modal--productComponentName--NaHb9 ellipsis--ellipsis--Tjyfa"},u)),f.createElement("div",{className:"playground_modal--propsContainerHeaderButtons--MPFZ-"},"INSTANCE"===a.type&&f.createElement(Sg,null),f.createElement(iG.K0,{className:"playground_modal--resetButton--ZUesP",svg:Sk.A,onClick:v,"data-tooltip":(0,eN.t)("design_systems.playground.reset_properties"),"data-tooltip-type":nx.Ib.TEXT,disabled:!o.hasChangesToReset,recordingKey:"resetPlaygroundProps"}))),!g&&f.createElement("div",{className:"playground_modal--bannerContainer--rQy3f playground_modal--_propsContainerElement--F1mOU"},f.createElement(Nu.z,{orientation:"vertical",iconSrc:Sw.A,variant:"dev",title:(0,eN.t)("design_systems.playground.banner_header"),onClose:h},(0,eN.tx)("design_systems.playground.banner_content"))),f.createElement(i6.P,null,f.createElement(eb.q0.Provider,{value:s},f.createElement("div",{className:"playground_modal--propsSectionContainer--3xF-J playground_modal--_propsContainerElement--F1mOU"},f.createElement(Sx,{containerWidth:Sr.O2.UNBOUNDED,componentProps:I,moduleProps:A,moduleFrameData:void 0,playgroundGUID:k,productComponentGUID:d,sceneGraph:s,viewOnlyMode:(null==L?void 0:L.isState)?Si.BK.VARIANT_PROPS:void 0,recordingKey:"playgroundPicker"})),f.createElement("div",{className:"playground_modal--modesSectionContainer--NaZ-S"},f.createElement(SE,{fill:!0,modes:O||{}}))),(0,y.kc)().dt_code_connect_playground&&f.createElement("div",{className:"playground_modal--codeConnectPanel--A4E9s"},f.createElement(l7.tH,{boundaryKey:"Figmadoc",fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(Sn,{isPlayground:!0,onInstancePillClick:T})))))))});function SA(){let e=(0,_.wA)();return f.createElement("div",{className:"playground_modal--modalTitle--e4b41"},f.createElement("strong",null,(0,eN.tx)("design_systems.playground.component_playground")),f.createElement(tN.Jn,{onClick:()=>e(ty.Ce())}))}let SO=(0,cV.Ju)(SI,"PlaygroundModal");var SL=n(869156),SP=n(25888),SD=n(673867),SR=n(603689);let SM="component_preview_panel--componentPreviewContainer--aKLR0 common--well--J0WtH",SF="component_preview_panel--componentPreviewImage--AZj5d",SB=(0,lf.jz)(bW.devHandoffComponentPreviewMaxHeight);function SU({overPropTable:e,overPlaygroundButton:t}){let n=(0,SR.rL)(),a=(0,xV.ro)(),l=n-64,r=function(e,t=SB){let n=(0,bB.wS)(),a=(0,xV.lA)(),l="loaded"===n.status&&n.result.dataComponentId?n.result.dataComponentId:null==a?void 0:a.guid,r=(0,Sa.c6)(l),i="loaded"===n.status&&"temp-scene"===n.result.dataLocation,o=4*e,s=4*t;return f.useMemo(()=>{if(!l)return;let e=ei.glU.getDefaultStateForLocalStateGroup(l)||l;if(!(0,lg.fn)((0,lg.sH)(e)))return;let[t,n]=ei.Vzr.generateThumbnailForNode(e,o,s,4,{forceContentsOnly:!0,inDetachedComponentsScene:i});if(!n||0===n.length||!t)return;let{width:a,height:c}=t;return{url:URL.createObjectURL(new Blob([n])),backgroundStyle:r,renderWidth:a/4,renderHeight:c/4}},[r,i,l,s,o])}(l);if(!a)return null;let i=(null==r?void 0:r.renderWidth)??l,o=(null==r?void 0:r.renderHeight)??SB;return f.createElement(a7.D8,{className:nb()(SM,{"component_preview_panel--overPropTable--c8HQR":e,"component_preview_panel--overPlaygroundButton--cn0Sd":t}),style:null==r?void 0:r.backgroundStyle,role:"button",tabIndex:0},(null==r?void 0:r.url)&&f.createElement(bK.J,{className:SF,src:r.url,style:{maxWidth:i,maxHeight:o}}))}function SH(){return f.createElement("span",{className:"component_props_list--propertyNameSpacer--FdkL0"})}function SG(e){let t=(0,wu.SV)("inspection_property_copy_click"),n=(0,xP.Cj)(`${e.name}: ${e.value}`,()=>{t({property:e.name,value:e.value})}),[a,l]=f.useState(!1),r=(0,SD.X)(e.name),i=(0,SD.X)(e.value),o={[ei.J0O.BOOL]:"component_props_list--propertyValueTypeBool--9q87D",[ei.J0O.VARIANT]:"component_props_list--propertyValueTypeVariant--GNz6Z",[ei.J0O.TEXT]:"component_props_list--propertyValueTypeText--noD0E",[ei.J0O.INSTANCE_SWAP]:"component_props_list--propertyValueTypeInstanceSwap--Ckcm4",[ei.J0O.NONE]:void 0},s={[ei.J0O.BOOL]:Ni.X,[ei.J0O.VARIANT]:No,[ei.J0O.TEXT]:Ns.I,[ei.J0O.INSTANCE_SWAP]:Nc.M,[ei.J0O.NONE]:No}[e.type],c=f.createElement(s,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("design_systems.component_properties.property_icon_tooltip",{propertyType:(0,Sr.xb)(e.type===ei.J0O.NONE?ei.J0O.VARIANT:e.type)})}),d=nb()("component_props_list--propertyValue--eu4vE sf_pro--uiFontWithSFProFallback--m-p9V ellipsis--ellipsis--Tjyfa text--fontPos10--s1PI5 text--_fontBase--QdLsd",o[e.type]);return f.createElement("div",{className:nb()("component_props_list--copyableRow--N-YSu ellipsis--ellipsis--Tjyfa"),onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)}},f.createElement(a7.D8,{className:"component_props_list--propertyRow--lpbBb",onClick:n,"data-testid":"inspectionPropertyRow"},e.name?f.createElement("span",{className:"component_props_list--propertyName--o49U9 sf_pro--uiFontWithSFProFallback--m-p9V text--fontPos10--s1PI5 text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa","data-testid":"inspectionPropertyName",...r,"data-tooltip-tip-align-left":!0},e.name):f.createElement(SH,null),f.createElement("span",{className:d,"data-testid":"inspectionPropertyValue",...i,"data-tooltip-tip-align-left":!0},c,f.createElement(wu.lN,{valueProps:{...e,copyValue:e.value},isHovered:a}))))}function SV(){let e=(0,_.wA)(),t=(0,xV.M4)(),n=f.useCallback(()=>{e(ty.to({type:SO,data:{guid:null==t?void 0:t.guid}})),(0,Z.sx)("Playground opened")},[e,null==t?void 0:t.guid]);return f.createElement("div",{className:"component_props_list--propsPlaygroundButtonContainer--JYmvM","data-test-id":"openInPlaygroundButton"},f.createElement(va.IK,{variant:"secondary",onClick:n,recordingKey:"openInPlayground"},(0,eN.tx)("dev_handoff.playground.open_in_playground")))}function SK(e){let t=e.variables&&e.variables.value[e.name],n=t&&t.type===ei.Z_n.ALIAS?t.value:void 0,a=(0,SL.u)(n);return f.createElement(SG,{type:e.type,name:e.name,value:e.value,variable:null==a?void 0:a.name})}function SW(){let e=(0,_.d4)(bi.qd),t=f.useMemo(SP.z4,[]),{consumedVariable:n}=(0,w1.u3)(["VARIANT_PROPERTIES"]),a=function(e){if(!e||(0,xM.gl)(e)||e.type!==ei.Z_n.EXPRESSION||e.value.expressionFunction!==ei.JTp.RESOLVE_VARIANT)return null;let t=e.value.expressionArguments[0];return t.type!==ei.Z_n.MAP?null:t}(n),l=(0,_.d4)(n=>t(n,e)),r=Object.entries((0,w1.kN)()).filter(([e,t])=>t.modeOptions.length>1),i=l.length>0,o=i||r.length>0;return f.createElement(f.Fragment,null,f.createElement(SU,{overPropTable:i,overPlaygroundButton:o}),i&&f.createElement("div",{className:"component_props_list--propsList--VRadV"},l.map(({name:e,value:t,type:n})=>f.createElement(SK,{type:n,key:e,name:e,value:t,variables:a}))),!sL.z4.getIsExtension()&&o&&f.createElement(SV,null))}var Sz=n(335691),Sj=n(215440),SJ=n(958317),SY=n(731262);let SX="legacy_component_props_list--propsList--IO9sr text--fontPos11--2LvXf text--_fontBase--QdLsd",Sq="legacy_component_props_list--heading--xuytG";function SZ({propDef:e}){let{type:t,name:n}=e,a=e.kind===Sz.u.TYPED?e.defaultValue:void 0,l=(0,lh.mJ)(a),r=(0,lh.mJ)(null==l?void 0:l.parentGuid);if(function(e){if(e.type===ei.J0O.BOOL)return!0;if(e.type!==ei.J0O.VARIANT)return!1;let t=e.values.map(e=>e.toLowerCase());if(2===t.length)for(let e of SY.NE){let n=t.indexOf(e[0]),a=t.indexOf(e[1]);if(-1!==n&&-1!==a)return!0}return!1}(e))return void 0===a?f.createElement(wu._p,{name:n,value:(0,eN.t)("dev_handoff.docs.prop_boolean")}):f.createElement(wu._p,{name:n,value:"true"===a?(0,eN.t)("dev_handoff.docs.prop_boolean_default_true"):(0,eN.t)("dev_handoff.docs.prop_boolean_default_false")});switch(t){case ei.J0O.VARIANT:return f.createElement(wu._p,{key:e.name,name:e.name,value:(0,eN.t)("dev_handoff.docs.prop_variant",{values:e.values.join(", ")})});case ei.J0O.TEXT:return f.createElement(wu._p,{name:n,value:(0,eN.t)("dev_handoff.docs.prop_string",{defaultValue:a})});case ei.J0O.INSTANCE_SWAP:let i=(null==l?void 0:l.isState)?null==r?void 0:r.name:null==l?void 0:l.name,o=i?` (${i})`:"";return f.createElement(wu._p,{name:n,value:`${(0,eN.t)("dev_handoff.docs.prop_instance")}${o}`})}return null}function SQ({component:e}){let t=(0,_.d4)(bi.qd),n=(0,bB.wS)(),a=(0,_.d4)(SP.$F),l=f.useMemo(SJ.Cu,[]),r=(0,_.d4)(e=>l(e,t)),i=(0,eb.eY)(),{detachedCompPropsDefs:o,detachedVariantProps:s}=(0,bB.t7)(n,i),c=e.isState||"loaded"===n.status&&n.result.isVariant,d=[...a,...o],u=[...r,...s],m=((0,_.d4)(Sj.K4)||[]).filter(e=>e.isBubbled),p=Object.entries((0,w1.kN)()).filter(([e,t])=>t.modeOptions.length>1);if(!(d.length>0||p.length>0||m.length>0))return null;let g=c?d.filter(e=>e.kind!==Sz.u.VARIANT):d;return f.createElement("div",{className:SX},f.createElement("div",{className:Sq},f.createElement("strong",null,(0,eN.tx)("dev_handoff.docs.props"))),c&&u.map(({name:e,value:t})=>f.createElement(wu._p,{key:e,name:e,value:t})),g.map(e=>f.createElement(SZ,{key:e.name,propDef:e})),!sL.z4.getIsExtension()&&f.createElement(S$,null))}function S$(){let e=(0,_.wA)(),t=(0,xV.M4)(),n=f.useCallback(()=>{e(ty.to({type:SO,data:{guid:null==t?void 0:t.guid}})),(0,Z.sx)("Playground opened")},[e,null==t?void 0:t.guid]);return f.createElement("div",{className:"legacy_component_props_list--propsPlaygroundButtonContainer--WlFqT"},f.createElement(n5.$,{width:"fill-parent",onClick:n,recordingKey:"openInPlayground",dataTestId:"openInPlaygroundButton"},(0,eN.tx)("dev_handoff.playground.open_in_playground")))}function S0(e){let t=e.variables&&e.variables.value[e.name],n=t&&t.type===ei.Z_n.ALIAS?t.value:void 0,a=(0,SL.u)(n);return f.createElement(wu._p,{name:e.name,value:e.value,variable:null==a?void 0:a.name})}function S1(){let e=(0,_.d4)(bi.qd),t=f.useMemo(SP.z4,[]),{consumedVariable:n}=(0,w1.u3)(["VARIANT_PROPERTIES"]),a=function(e){if(!e||(0,xM.gl)(e)||e.type!==ei.Z_n.EXPRESSION||e.value.expressionFunction!==ei.JTp.RESOLVE_VARIANT)return null;let t=e.value.expressionArguments[0];return t.type!==ei.Z_n.MAP?null:t}(n),l=(0,_.d4)(n=>t(n,e)),r=Object.entries((0,w1.kN)()).filter(([e,t])=>t.modeOptions.length>1);return l.length>0||r.length>0?f.createElement("div",{className:SX},f.createElement("div",{className:Sq},(0,eN.tx)("dev_handoff.docs.props")),l.map(({name:e,value:t})=>f.createElement(S0,{key:e,name:e,value:t,variables:a})),!sL.z4.getIsExtension()&&f.createElement(S$,null)):null}function S2(){let e=(0,xV.M4)();return e?"INSTANCE"===e.type?f.createElement(S1,null):f.createElement(SQ,{component:e}):null}function S5(){return f.createElement(f.Fragment,null,f.createElement(SU,null),f.createElement(S2,null))}function S4(){(0,xP.jY)();let e=(0,xV.lA)(),[t,n]=(0,bB.XX)(),a=(0,xJ.AK)(t,n),l=(null==e?void 0:e.isState)?null==e?void 0:e.parentNode:null,{backingSymbolDescription:r,parentDescription:i}=(0,bB.iX)(null==e?void 0:e.description,null==l?void 0:l.description),o=r&&i?i+"\n\n"+r:r||i;return f.useMemo(()=>({links:a,description:o}),[a,o])}function S3(){let{links:e=[]}=S4();return 0===e.length?null:f.createElement("div",{className:"component_documentation_panel--documentationLinks--UtNIi text--fontPos11--2LvXf text--_fontBase--QdLsd"},f.createElement("div",{className:"component_documentation_panel--heading--x-ri2"},f.createElement("strong",null,(0,eN.tx)("dev_handoff.docs.links_title"))),f.createElement("div",null,e.map(e=>{let t=(0,xj.Gw)(e.uri),n=t?(0,i3.Zr)(t):(0,eN.t)("dev_handoff.docs.links_default"),a={id:e.uri,nodeId:"",fileKey:"",linkName:n,linkUrl:e.uri,linkPreviewJson:"",isUserOverride:!1,isInherited:!1,linkPreview:null};return f.createElement(Nl,{key:e.uri,link:a,isEditable:!1,onOpenDeleteModal:nf.lQ,onOpenEditModal:nf.lQ})})))}function S6(){let{description:e}=S4();return f.createElement(f.Fragment,null,(0,y.kc)().dt_code_connect_ui_update?f.createElement(SW,null):f.createElement(S5,null),f.createElement(xX,{description:e}),f.createElement(S3,null))}var S7=n(911578),S8=n(665150);function S9(){let e;let t=(0,xV.lA)(),n=(0,bB.wS)(),a=(0,_.d4)(af.sS),l=(0,lh.uQ)(),r=(0,a6.U)(),i="loaded"===n.status?n.result:void 0,o=(0,xW.yW)(t),s=i&&i.isExternal?i.fileKey:o&&o!==a?o:a,c=s!==a,d=i?i.nodeId:c?null==t?void 0:t.publishID:null==t?void 0:t.guid,u=(0,xz.d)(!1,()=>{r("Dev Mode Navigated To Main Component",{selectedNodeId:l,external:c,detached:!!i})});if(!d||!u||!s)return null;let m=(0,xK.wJ)(s),p=!1;return c?n&&(p="loading"===n.status||"errors"===n.status):p=ei.Egt.nodeIsSoftDeleted(d),e=m?S8.A:c?S7.A:Na.A,f.createElement(iG.K0,{svg:e,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":m?(0,eN.t)("design_systems.instance_panel.view_library_in_community"):(0,eN.t)("dev_handoff.instance_navigation.go_to_main_component"),onClick:u,disabled:p,recordingKey:"devHandoffNavigateInstanceButton"})}function ke(){let e=(0,lh.VW)(),t=(0,bB.wS)();return(null==e?void 0:e.isLooseComponent)||(null==e?void 0:e.isState)||(null==e?void 0:e.isStateGroup)||(null==e?void 0:e.type)==="INSTANCE"||"disabled"!==t.status?f.createElement(wu.VZ,{recordingKey:"componentPanel",hideHeader:!0,padding:wu.UZ.EXTRA_TOP_PADDING_FOR_UI2},(0,y.kc)().dt_figmadoc&&f.createElement(l7.tH,{boundaryKey:"Figmadoc",fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(Sn,null)),f.createElement(S6,null)):null}var kt=n(413145);let kn=e=>e.includes("prototype")||e.includes("user")||e.includes("prop")?null:e.includes("stroke")||e.includes("border")||e.includes("corner")?"border":e.includes("fill")||e.includes("background")?"color":e.includes("text")||e.includes("font")||e.includes("paragraph")||e.includes("ot-features")||"letter-spacing"===e||"line-height"===e?"text":e.includes("effect")?"effect":e.includes("size")||e.includes("stack")?"layout":"count"===e||e.includes("vector")?"shape":"opacity"===e||"visible"===e||"blend-mode"===e?"style":null;function ka(e,t){return kl.indexOf(e)-kl.indexOf(t)}let kl=["color","border","text","effect","layout","shape","style"],kr=(0,cV.Ju)(function(){return f.createElement(cK.Rw,{destructive:!0,confirmationTitle:(0,eN.tx)("inspect_panel.detached_component.remove_attachment"),confirmText:(0,eN.tx)("dev_handoff.detached_component.remove_attachment_confirm"),onConfirm:()=>{aC.VU.get("remove-detached-symbol-id","menu")()}},f.createElement("p",null,(0,eN.tx)("dev_handoff.detached_component.remove_attachment_text_body")))},"RemoveDetachmentStatusModal");var ki=n(812505);let ko="dev_handoff_nodes_panel--nodesPanel--4Pea0",ks="dev_handoff_nodes_panel--item--FYINO",kc="dev_handoff_nodes_panel--itemSelectedReadySections--Wladq dev_handoff_nodes_panel--item--FYINO",kd="dev_handoff_nodes_panel--timestamp--5sWkT text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",ku="dev_handoff_nodes_panel--readySectionsEmptyStateRow--3qQXK",km="dev_handoff_nodes_panel--readySectionsIcon--gNtWg",kp="dev_handoff_nodes_panel--readySectionsContent--3ilof text--fontPos11--2LvXf text--_fontBase--QdLsd",kf="header--headerContents--0Pvld",k_="header--layerRowContainer--qqv5Y",kg="header--headerButtons--Lt3iE",kh="header--layerNameRow--tsuuh header--layerRowContainer--qqv5Y",kE="header--layerRowSpacer--qrODv",kv="header--layerName--s4pA8 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",ky="header--layerIcon--uDEQt header--icon--IGzM0",kb="header--layerIconSymbol--irpWG header--icon--IGzM0",kC="header--layerType--vaDds text--fontPos11--2LvXf text--_fontBase--QdLsd",kw="header--layerTypeSymbol--cMeH3 text--fontPos11--2LvXf text--_fontBase--QdLsd",kT="header--layerCompareLink--pHd1V text--fontPos11--2LvXf text--_fontBase--QdLsd",kx="header--layerCompareLinkNoTimestamp--FnSP9 text--fontPos11--2LvXf text--_fontBase--QdLsd",kN="header--layerCompareLinkText--frP7M text--fontPos11--2LvXf text--_fontBase--QdLsd",kS="header--timestamp--zWQD3 text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",kk="header--chevron--0Wf28",kI="header--chevronActive--sp6Xw";var kA=n(873619),kO=n(757510),kL=n(432616),kP=n(437527),kD=n(362679),kR=n(844127),kM=n(842232);function kF(){let e=(0,_.wA)(),t=(0,bB.wS)(),n=(0,uv.Td)(),{Dropdown:a,dropdownTargetRef:l,toggleDropdown:r,isDropdownShown:i}=(0,w0.B)("DEV_HANDOFF_DETACHED_COMPONENT_DROPDOWN"),o=[{displayText:(0,eN.t)("inspect_panel.detached_component.remove_attachment"),disabled:n,callback:()=>{e(ty.to({type:kr}))}},{displayText:(0,eN.t)("inspect_panel.detached_component.compare_to_source"),disabled:"loaded"!==t.status,callback:xD("cc_detached_component")}];return f.createElement(f.Fragment,null,f.createElement(a7.D8,{className:"header--detachedDropdownContainer--msmKV",forwardedRef:l,onClick:r},(0,eN.tx)("inspect_panel.node_type.detached_component"),f.createElement(a2.B,{className:i?kI:kk,svg:op.A})),f.createElement(a,{items:o,showPoint:!1}))}function kB({state:e,backgroundState:t}){return f.createElement("div",{className:"dev_handoff_nodes_panel--historyIconContainer--QkDx6"},f.createElement(C3.t,{className:nb()("dev_handoff_nodes_panel--historyIcon--dprKz"),svg:kO.A}),e===C4.Uy.RECENTLY_EDITED&&f.createElement("div",{className:nb()("dev_handoff_nodes_panel--editedDot--8NIiF",{"dev_handoff_nodes_panel--editedDotSelected--95Nsq":"selected"===t,"dev_handoff_nodes_panel--editedDotHover--P8nA3":"hovered"===t})}))}function kU({frameId:e,label:t,disabled:n,compareVersions:a,compareDetachedComponent:l,compareOverrides:r,overridesText:i}){let o=(0,n6.GS)(),s=(0,U._I)(),c=!n&&s,d=xR(e,"cc_versions"),u=xD("cc_dropdown_detached_component"),m=(0,lh.VW)(),p=!!(m&&m.isAlive())&&"INSTANCE"===m.type,g=(0,xF.kl)("overrides"),h=function(e){let t=(0,xP.VW)(),n=(0,lh.mJ)(e),{singleBackingSymbol:a}=(0,TW.$)([e??""]),l=(0,_.wA)();return f.useCallback(()=>{n&&a&&(b7.sn.reset("dev_handoff.view_history",n.guid),b7.sn.start("dev_handoff.view_history",{key:n.guid}),(0,Z.sx)("Diff Modal Compare Changes Clicked",{nodeId:n.guid,mainComponentNodeId:a.guid,origin:"cc_overrides"}),l(ty.to({type:xL,data:{changeNodeId:n.guid,basisNodeId:a.guid,initialSelectedNodeId:(null==t?void 0:t.guid)&&(null==t?void 0:t.guid)!==n.guid?t.guid:void 0,isComparingOverrides:!0}})))},[l,t,n,a])}(g&&!(0,xM.gl)(g)?g.instanceGuid:null),{Dropdown:E,dropdownTargetRef:v,toggleDropdown:y,isDropdownShown:b}=(0,w0.B)("DEV_HANDOFF_COMPARE_CHANGES_DROPDOWN"),C=f.useMemo(()=>({displayText:(0,eN.t)("dev_handoff.compare_changes.entrypoint.compare_versions"),disabled:n||!s||!a,callback:s?d:nf.lQ,recordingKey:"compareChanges.entrypoint.dropdown.compareVersions"}),[a,n,s,d]),w=f.useMemo(()=>l?{displayText:(0,eN.t)("dev_handoff.compare_changes.entrypoint.compare_main_component"),disabled:n||!s,callback:s?u:nf.lQ,recordingKey:"compareChanges.entrypoint.dropdown.compareDetachedComponent"}:null,[l,n,s,u]),T=f.useMemo(()=>r||p?{displayText:(0,eN.t)("dev_handoff.compare_changes.entrypoint.compare_main_component"),disabled:!r||n||!s,callback:s?h:nf.lQ,recordingKey:"compareChanges.entrypoint.dropdown.compareOverrides"}:null,[r,p,n,s,h]),x=f.useMemo(()=>[C,w,T,{separator:!0,displayText:""},{displayText:i??(0,eN.t)("dev_handoff.compare_changes.entrypoint.multiselect_comparison_hint"),icon:f.createElement("div",{className:a8.cx.if(i,a8.cx.mt6,a8.cx.mt4).mr8.minW16.minH16.itemSelfStart.flex.justifyCenter.alignCenter.$},f.createElement(a2.B,{className:a8.cx.colorTextMenuSecondary.colorIconMenuSecondary.$,svg:i?N1.A:kM.A})),displayTextClassName:"header--multilineText--iK4P2",disabled:!0}].filter(gq.Vq),[C,w,T,i]);return c?f.createElement(f.Fragment,null,f.createElement(a7.D8,{className:"header--dropdownContainer--4czE1",forwardedRef:v,onClick:y,recordingKey:"compareChanges.entrypoint"},!!i&&f.createElement("div",{className:"header--overridesDot--31BuQ"},f.createElement(a2.B,{svg:kL.A})),f.createElement("div",{className:kN,"data-testid":"compare-changes-entry-with-dropdown"},t),o?f.createElement(nE.r,null):f.createElement("div",{className:b?kI:kk},f.createElement(a2.B,{svg:op.A}))),f.createElement(E,{rootAndSubmenuMaxWidth:240,items:x,showPoint:!1,recordingKey:"compareChanges.entrypoint.dropdown"})):f.createElement("div",{className:nb()(kN,{"header--layerCompareLinkTextDisabled----eEQ text--fontPos11--2LvXf text--_fontBase--QdLsd":n}),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.compare_changes.entrypoint.multiselect_comparison_hint"),"data-testid":"compare-changes-entry-without-dropdown"},t)}function kH(){var e;let t=(0,U._I)(),n=null==(e=(0,ew.iZ)())?void 0:e.id,a=(0,xP.Tv)(),l=(0,af.tS)(),r=(0,_.wA)();if((null==a?void 0:a.length)!==2)return null;let i=a[1],o=a[0];return f.createElement(a1.u4,{defaultClass:nb()(kx,"header--buttonContainer--WqqDf"),onClick:()=>{t&&((0,Z.sx)("Diff Modal Compare Changes Clicked",{userId:n,fileKey:l,nodeId:i,otherNodeId:o,entrypoint:"lego_layer",origin:"cc_nodes"}),b7.sn.reset("dev_handoff.view_history",i),b7.sn.start("dev_handoff.view_history",{key:i}),r(ty.to({type:xL,data:{changeNodeId:i,basisNodeId:o}})))},disabled:!t,recordingKey:"compareChanges.entrypoint.nodes"},f.createElement("span",{className:"header--layerCompareLinkTextNoDropdown--LWQWY text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,eN.tx)("inspect_panel.history.compare_changes")))}function kG(e,t=""){let{backingSymbolName:n}=e,a=(null==t?void 0:t.trim())||(0,eN.t)("fullscreen.layer_panel.layer"),l=!(null==t?void 0:t.trim());return f.createElement("span",{className:nb()({"header--fallbackLayerName--mPaXg":l})},n&&n!==t?(0,eN.tx)("inspect_panel.components.name",{instance:a,component:f.createElement("span",{className:"header--backingSymbolName--get70"},n.trim())}):a)}function kV(){let e=(0,U._I)(),t=(0,af.q5)(),n=(0,xB._6)(),{Dropdown:a,toggleDropdown:l,dropdownTargetRef:r,isDropdownShown:i}=(0,w0.B)("INSPECT_PANEL_HEADER_DROPDOWN");if(!e)return null;let o=[{displayText:(0,eN.t)("dev_handoff.inspect_panel.open_in_vs_code.link"),callback:function(){t&&"fullscreen"===n.view&&n.nodeId&&(window.location.href=`vscode://figma.figma-vscode-extension/open/${t.key}/${t.name}/${n.nodeId}`)},icon:f.createElement("div",{className:"header--optionsDropdownIcon--sWjMu"},f.createElement(ki.M,null))}];return f.createElement(f.Fragment,null,f.createElement("div",{ref:r},f.createElement(iG.YW,{svg:kD.A,onMouseDown:e=>e.stopPropagation(),onClick:l,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.code.options"),selected:i})),f.createElement(a,{items:o,showPoint:!0}))}function kK(){let e=(0,lh.NM)();return e?f.createElement(wu.VZ,{title:(0,eN.t)("inspect_panel.property.mixed"),recordingKey:"layerName"},f.createElement("div",{className:"header--mixedRow--PIOSy header--layerRowContainer--qqv5Y"},f.createElement("span",{className:kC},(0,eN.tx)("inspect_panel.property.selected",{numberOfItems:e.length})),f.createElement("div",{className:kE}),f.createElement(kH,null))):null}function kW({lastViewTimestamp:e,isDetached:t}){let n=(0,wj.VI)(),a=(0,C4.ei)(null==n?void 0:n.id),l=(0,S.md)(wF),r=(0,C4.L)(null==n?void 0:n.id,e,l),{versions:i,versionsQueryLoaded:o}=(0,TD.DS)(null==n?void 0:n.id),s=!o||0===i.length||!a,c=(0,wM.i)(n),d=function(){let e;let t=(0,xF.kl)("overrides");if(!t||(0,xM.gl)(t))return null;let n=t.isPrimary,a=t.overriddenProperties,l=new Set;if(a.forEach(e=>{let t=kn(e);t&&l.add(t)}),0===l.size)return null;let r=Array.from(l).sort(ka).map(e=>{switch(e){case"color":return(0,eN.t)("dev_handoff.overrides.color");case"border":return(0,eN.t)("dev_handoff.overrides.border");case"text":return(0,eN.t)("dev_handoff.overrides.text");case"effect":return(0,eN.t)("dev_handoff.overrides.effect");case"layout":return(0,eN.t)("dev_handoff.overrides.layout");case"shape":return(0,eN.t)("dev_handoff.overrides.shape");case"style":return(0,eN.t)("dev_handoff.overrides.style")}}).filter(kt.t),i=n?(0,eN.t)("dev_handoff.overrides.instance"):(0,eN.t)("dev_handoff.overrides.layer");switch(r.length){case 1:return(0,eN.t)("dev_handoff.overrides.hint_one",{property:r[0],layerType:i});case 2:e=(0,eN.t)("dev_handoff.overrides.properties2",{prop1:r[0],prop2:r[1]});break;case 3:e=(0,eN.t)("dev_handoff.overrides.properties3",{prop1:r[0],prop2:r[1],prop3:r[2]});break;default:e=(0,eN.t)("dev_handoff.overrides.properties_more",{prop1:r[0],prop2:r[1],prop3:r[2],count:r.length-3})}return(0,eN.t)("dev_handoff.overrides.hint",{layerType:i,properties:e})}();if(!n||!c)return null;let u=!!(null==a?void 0:a.lastEditedAt)&&(!s||s&&!!(null==a?void 0:a.createdAt)),m=!!d,p=t||!s||m;return f.createElement("div",{className:"header--timestampContainer--ppFUv dev_handoff_nodes_panel--timestampContainer--dGH49"},f.createElement(f.Fragment,null,f.createElement(kB,{state:r,backgroundState:null}),u?s?f.createElement("span",{className:kS},(0,eN.tx)("dev_handoff.nodes_panel.created",{at:(0,cF.A)(null==a?void 0:a.createdAt).fromNow()})):f.createElement("span",{className:kS},(0,eN.tx)("dev_handoff.nodes_panel.edited",{at:(0,cF.A)(null==a?void 0:a.lastEditedAt).fromNow()})):f.createElement("span",{className:kS},"-"),f.createElement("div",{className:kE})),f.createElement(kU,{disabled:!p,frameId:n.id,label:p?(0,eN.t)("inspect_panel.history.compare_changes"):(0,eN.t)("inspect_panel.history.no_changes"),compareVersions:!s,compareDetachedComponent:t,compareOverrides:m,overridesText:d}))}function kz(e){var t;let n=(0,wj.T1)(),a=(0,bB.wS)(),l=(0,_.wA)(),r=(0,N.R)(e=>e.mirror.appModel.activeCanvasEditModeType),i=null==(t=null==n?void 0:n.name)?void 0:t.trim(),o=(0,xP.Cj)(i),s=(0,nS.R)(),{getMaybeEnabledItem:c}=(0,xH.nq)();if(!n)return null;let d=n.isSymbol||n.isDetached,u=kG(n,i);return f.createElement(wu.VZ,{recordingKey:"layerName",formattedHeader:f.createElement("div",{className:kh},f.createElement(a7.D8,{dir:"auto",className:nb()(kv,{"header--copyableLayerName--oMhyj":!!i}),onPointerDown:o},u),f.createElement("div",{className:kg},f.createElement(S9,null),s&&(0,lc.Te)().filter(c).map(e=>f.createElement(xG.QE,{key:e.action,item:e,numUnreadComments:0})),f.createElement(kV,null)))},f.createElement("div",{className:kf},f.createElement("div",{className:k_},n.isReadyForDev||n.isCompleted?f.createElement(f.Fragment,null,f.createElement(a2.B,{svg:kA.A,className:"header--codeIcon--c8n9I header--icon--IGzM0"}),f.createElement("span",{className:kC},n.isCompleted?(0,eN.tx)("dev_handoff.status.completed"):(0,eN.tx)("dev_handoff.status.ready_for_dev"))):f.createElement(f.Fragment,null,f.createElement(xU.Bf,{className:d?kb:ky,guid:n.id,editModeType:r,detachedInfo:a}),f.createElement("span",{className:d?kw:kC,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":n.typeTooltip},n.isDetached?f.createElement(kF,null):n.type))),n.link&&f.createElement("button",{className:"header--linkRow--QPcNR text--fontPos11--2LvXf text--_fontBase--QdLsd header--layerRowContainer--qqv5Y",onClick:()=>{l(wd.S({url:n.link}))}},f.createElement(a2.B,{svg:kR.A,className:"header--linkIcon--9v4Qb"}),f.createElement("span",{className:"header--link--qUrbC text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},n.link)),!!n.libraryName&&f.createElement("div",{className:"header--libraryNameRow--DjJXj text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa header--layerRowContainer--qqv5Y"},f.createElement(a2.B,{svg:kP.A}),f.createElement("span",{className:"header--libraryName---uTzg"},n.libraryName)),f.createElement(kW,{lastViewTimestamp:e.lastViewTimestamp,isDetached:n.isDetached})))}var kj=n(704513),kJ=n.n(kj),kY=n(444736),kX=n(187796),kq=n(594901),kZ=n(297281);let kQ="box_model--imageBox--XoIJh box_model--_border--PCElt box_model--_layoutFlex--pL0jp text--fontPos11--2LvXf text--_fontBase--QdLsd",k$="box_model--variableValueContainer--oxu-X box_model--_valueContainerBase--pMK2K",k0="box_model--valueNonValid--H7q6F",k1="box_model--value--1jh75 ellipsis--ellipsis--Tjyfa",k2="box_model--innerSizeBoxValue--l-qDX ellipsis--ellipsis--Tjyfa",k5="box_model--variable--GK5G3",k4="box_model--innerSizeBoxVariable--Lw6dO",k3="box_model--gapLine--BM-H0",k6="box_model--gapVertical--t9aDg box_model--gap--YPdKC box_model--_layoutFlex--pL0jp",k7="box_model--gapHorizontal--gLY-T box_model--gap--YPdKC box_model--_layoutFlex--pL0jp",k8="box_model--gapValueContainer--GsVpn box_model--_layoutFlex--pL0jp",k9="box_model--gapValue--sE-2O",Ie=f.createContext(!1),It=()=>f.useContext(Ie);function In({fillContainer:e=!1,loadingState:t=!1}){let{distance:n,border:a,radius:l,padding:r,width:i,height:o}=(0,kX.$G)(),s=(0,kY.aI)(),c=!t&&(0,kY.fk)(s);return f.createElement(wu.VZ,{hideHeader:!0,padding:wu.UZ.NONE,noBorder:!0,recordingKey:"boxModel"},f.createElement(Ie.Provider,{value:t},f.createElement(Ia,{topDistance:n.top,bottomDistance:n.bottom,fillContainer:e},f.createElement(I_,null),f.createElement(Iu,{position:"vertical",value:n.top,dataTestIndex:0}),f.createElement(I_,null),f.createElement(Iu,{position:"horizontal",value:n.left,dataTestIndex:0}),f.createElement(Il,{radius:l},f.createElement(Ip,{value:l.topLeft,vertical:"top",horizontal:"left",variableConsumptionField:"RECTANGLE_TOP_LEFT_CORNER_RADIUS"}),f.createElement(Ic,null,f.createElement(Id,null,(0,eN.tx)("dev_handoff.box_model.border")),f.createElement(If,{value:a.top,dataTestId:"layoutBorderTop"})),f.createElement(Ip,{value:l.topRight,vertical:"top",horizontal:"right",variableConsumptionField:"RECTANGLE_TOP_RIGHT_CORNER_RADIUS"}),f.createElement(If,{value:a.left,isVertical:!0,dataTestId:"layoutBorderLeft"}),c?f.createElement(Ir,{width:i,height:o,assetType:s}):f.createElement(Io,null,f.createElement(I_,null),f.createElement("div",{className:"box_model--paddingTopMiddle--GiNbR"},f.createElement("div",{className:"box_model--paddingLabel--MsGiF"},f.createElement(Id,null,(0,eN.tx)("dev_handoff.box_model.padding"))),t?f.createElement(I_,null):f.createElement(If,{value:r.top,dataTestId:"layoutPaddingTop",variableConsumptionField:"STACK_PADDING_TOP"})),f.createElement(I_,null),t?f.createElement(I_,null):f.createElement(If,{value:r.left,isVertical:!0,dataTestId:"layoutPaddingLeft",variableConsumptionField:"STACK_PADDING_LEFT"}),f.createElement(Is,{width:i,height:o}),t?f.createElement(I_,null):f.createElement(If,{value:r.right,isVertical:!0,dataTestId:"layoutPaddingRight",variableConsumptionField:"STACK_PADDING_RIGHT"}),f.createElement(I_,null),t?f.createElement(I_,null):f.createElement(If,{value:r.bottom,dataTestId:"layoutPaddingBottom",variableConsumptionField:"STACK_PADDING_BOTTOM"}),f.createElement(I_,null)),f.createElement(If,{value:a.right,dataTestId:"layoutBorderRight",isVertical:!0}),f.createElement(Ip,{value:l.bottomLeft,vertical:"bottom",horizontal:"left",variableConsumptionField:"RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS"}),f.createElement(If,{value:a.bottom,dataTestId:"layoutBorderBottom"}),f.createElement(Ip,{value:l.bottomRight,vertical:"bottom",horizontal:"right",variableConsumptionField:"RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS"})),f.createElement(Iu,{position:"horizontal",value:n.right,dataTestIndex:1}),f.createElement(I_,null),f.createElement(Iu,{position:"vertical",value:n.bottom,dataTestIndex:1}),f.createElement(I_,null),f.createElement(Ig,null))))}function Ia({topDistance:e,bottomDistance:t,children:n,fillContainer:a}){let l=!It()&&(!e||!e.distance)&&(!t||!t.distance);return f.createElement("div",{className:nb()("box_model--gapBox--6aFgq common--well--J0WtH",l&&"box_model--gapBoxNoVertical--WqZQf",a&&"box_model--fillContainer--TZUSv")},n)}function Il({radius:e,children:t}){let n=It();return f.createElement("div",{className:"box_model--borderBox--Ta011 box_model--_border--PCElt",style:n?{borderRadius:16}:(0,kX.F9)(e)},t)}function Ir({width:e,height:t,assetType:n}){let a=(0,kX.lK)();return a?f.createElement(Ii,{image:a}):f.createElement("div",{className:kQ},f.createElement(kY.B7,{assetType:n,pxWidth:e,pxHeight:t,shouldShowTypeLabel:!0,dataTestId:"boxModelAssetDetails"}))}function Ii({image:e}){let t=(0,af.tS)(),[n,a]=f.useState(null),l=(0,kq.h)();f.useEffect(()=>{l||(0,kZ.tW)({paint:e,fileKey:t}).then(e=>{a(e)})},[e,t,l]);let r=f.createElement(f.Fragment,null,f.createElement("span",{className:"box_model--imageFileName--uK9h5 ellipsis--ellipsis--Tjyfa"},(0,kZ.Rh)(e),"."),f.createElement("span",{className:"box_model--imageFileType--SYUTK"},(0,kZ.x$)(e)));return n?f.createElement("div",{className:kQ},f.createElement("a",{className:"box_model--imageLink--4kUYb text--fontPos11--2LvXf text--_fontBase--QdLsd blue_link--blueLink--9rlnd",href:n,target:"_blank",rel:"noopener"},r)):f.createElement("div",{className:kQ},r)}function Io({children:e}){let t=It();return f.createElement("div",{className:nb()("box_model--paddingBox--x3ddV box_model--_borderStrong--VLX4w",{"box_model--paddingBoxGrayscale--SAsVz":t})},e)}function Is({width:e,height:t}){let n=Ih(e)??0,a=Ih(t)??0,{variable:l,variableDisplayName:r}=(0,w1.xp)("WIDTH",e),{variable:i,variableDisplayName:o}=(0,w1.xp)("HEIGHT",0),s=(0,xP.Cj)(n),c=(0,xP.Cj)(a);return It()?f.createElement("div",{className:"box_model--innerSizeBoxGrayscale--geDzo box_model--innerSizeBox--fFq-v box_model--_layoutFlex--pL0jp"}):f.createElement("div",{className:"box_model--innerSizeBox--fFq-v box_model--_layoutFlex--pL0jp"},f.createElement("span",{"data-testid":"layoutWidth",className:nb()(k2,{[k4]:!!l,[k5]:!!l||!!i}),onClick:s,role:"button",tabIndex:0},l?f.createElement(w2.w,{isNarrow:!0,text:n.toString(),tooltip:r}):n),f.createElement("span",{className:"box_model--innerSizeBoxX--pxeFw"},"\xd7"),f.createElement("span",{"data-testid":"layoutHeight",className:nb()(k2,{[k4]:!!i,[k5]:!!l||!!i}),onClick:c,role:"button",tabIndex:0},i?f.createElement(w2.w,{isNarrow:!0,text:a.toString(),tooltip:o}):a))}function Ic({children:e}){return f.createElement("div",{className:"box_model--labelAndValue--tkNzd"},e)}function Id({children:e}){return f.createElement("div",{className:"box_model--label--A5RBK text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},e)}function Iu({position:e,dataTestIndex:t,value:n}){let a=Ih(null==n?void 0:n.distance),l=(null==n?void 0:n.type)??"distance",r=(0,xP.Cj)(a);return It()?f.createElement("div",{className:nb()({[k6]:"vertical"===e,[k7]:"horizontal"===e,"box_model--unrealGap--XhkPS":!0})},f.createElement("div",{className:k3}),f.createElement("div",{className:k8},f.createElement("span",{className:k9},"\xa0"))):(0,kX.u9)(a)?f.createElement("div",{className:nb()({[k6]:"vertical"===e,[k7]:"horizontal"===e,"box_model--paddingGap--Ca1Vq":"padding"===l,"box_model--spacingGap--PWtB6":"spacing"===l,"box_model--distanceGap--ophi6":"distance"===l})},f.createElement("div",{className:k3}),f.createElement("div",{className:k8,"data-testid":`layoutGap${kJ()(e)}${t}`,onClick:r,role:"button",tabIndex:0},f.createElement("span",{className:k9},a))):f.createElement(I_,null)}function Im({value:e,variableConsumptionField:t}){let n=Ih(e),a=(0,kX.u9)(n),{variable:l,variableDisplayName:r,isSuggested:i}=(0,w1.xp)(t,e),o=(0,xP.Cj)(n),s=n;return l&&n&&(a||!i)&&(s=f.createElement(w2.w,{isNarrow:!0,text:a?n:"0",tooltip:r})),{isValid:a,valueElement:s,displayValue:n,copyValue:o}}function Ip({vertical:e,horizontal:t,value:n,variableConsumptionField:a}){let l;let r=(0,wR.v4)(),i=(0,wz.QO)(r,n),{isValid:o,valueElement:s,displayValue:c}=Im({value:n,variableConsumptionField:a}),d=It();"top"===e&&"left"===t&&(l="box_model--borderTopLeft--Yitgl"),"top"===e&&"right"===t&&(l="box_model--borderTopRight--Jtfzn"),"bottom"===e&&"left"===t&&(l="box_model--borderBottomLeft--aRpWV"),"bottom"===e&&"right"===t&&(l="box_model--borderBottomRight--Rkq3s");let u=r.id===wR.uz||r.id===wR.MT?n:i,m=c?(0,kX.EN)(e,t,u):{},p=(0,xP.Cj)(u),_=k5?k$:"box_model--rawValueContainer---osq- box_model--_valueContainerBase--pMK2K",g=Math.min(n??0,kX.Tk-4);return f.createElement("div",{style:{"--temp-border-radius":`${g}px`},className:nb()(_,l),"data-testid":`layoutBorderRadius${kJ()(e)}${kJ()(t)}`,onClick:o?p:void 0,role:"button",tabIndex:0},f.createElement("span",{className:nb()(o?k1:k0,o&&"box_model--borderRadiusValue--tDyKD ellipsis--ellipsis--Tjyfa")},d?" ":s),f.createElement("div",{className:o?"box_model--borderRadiusHighlight--bd9Sc":"box_model--borderRadiusNonValid--qTtSU",style:m,"data-testid":`layoutBorderRadius${kJ()(e)}${kJ()(t)}Highlight`}))}function If({value:e,dataTestId:t,variableConsumptionField:n,isVertical:a}){let{isValid:l,valueElement:r,copyValue:i}=Im({value:e,variableConsumptionField:n??"MISSING"}),o=k5?k$:a?"box_model--valueContainerVertical--AtQ8B box_model--rawValueContainer---osq- box_model--_valueContainerBase--pMK2K":"box_model--valueContainerHorizontal--BqOkd box_model--rawValueContainer---osq- box_model--_valueContainerBase--pMK2K";return f.createElement("div",{className:o,onClick:l?i:void 0,role:"button",tabIndex:0},f.createElement("span",{className:l?k1:k0,"data-testid":t},r))}function I_(){return f.createElement("div",null)}function Ig(){let e=(0,xP.Cj)("box-sizing: border-box"),t=(0,wR.v4)();return It()||t.id!==wR.uz?null:f.createElement("div",{className:"box_model--borderBoxMessage--2jJc- text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:e,role:"button",tabIndex:0,"data-tooltip":(0,eN.t)("dev_handoff.box_model.border-box-tooltip"),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip-show-above":!0},(0,eN.tx)("dev_handoff.box_model.border-box"))}function Ih(e){let t=(0,wR.v4)(),n=(0,wz.QO)(t,e,kX.B5);return void 0===e?"-":n}var IE=n(194400),Iv=n(456363),Iy=n(284321);n(207584);var Ib=n(428877);let IC=(e,t)=>e.name.localeCompare(t.name);function Iw(e){let{styles:t}=(0,S.md)(Iv.gq),{library:n,sceneGraph:a}=(0,N.R)(e=>({library:e.library,sceneGraph:e.mirror.sceneGraph})),l=t.map(e=>{let t=(0,xW.Gp)(e.key,e.guids,n);if(!t||t.kind===Sd.AT.DANGLING)return null;let l=(0,lh.Zl)(a,e.guids[0]);return l?{...e,...t.value,styleNodeId:null==l?void 0:l.guid}:null}).filter(kt.t).filter(t=>(null==t?void 0:t.style_type)===e).sort((e,t)=>e.styleName.localeCompare(t.styleName));return(0,IE.y)({items:l,getShowMoreLabel:e=>(0,eN.t)("dev_handoff.styles.show_more",{count:e})})}var IT=n(750029),Ix=n(56285),IN=n(836283),IS=n(910544);function Ik(){let{selectionVariables:e,selectionStyles:t,selectionValues:n}=function(){let{selectedColors:e,childrenColors:t,selectedStyles:n,childrenStyles:a,library:l,sceneGraph:r}=(0,N.R)(e=>({selectedColors:e.mirror.selectionPaints.paintsDirectlyOnSingleNode,childrenColors:e.mirror.selectionPaints.paints,selectedStyles:e.mirror.selectionPaints.stylesDirectlyOnSingleNode,childrenStyles:e.mirror.selectionPaints.styles,library:e.library,sceneGraph:e.mirror.sceneGraph})),i=(0,lh.NM)(),o=(0,lh.VW)(),s=(0,Ib.Ig)(),c=(0,xP.uQ)(),d=(0,Tm.Q)(),u=(0,wR.v4)(),m=(0,ag.ks)(),p=f.useCallback((e,t)=>{let{styleKey:n,styleGUIDs:a}=e,i=(0,xW.Gp)(n,a,l);if(!i||a.length<1)return null;let o=(0,lh.Zl)(r,a[0]);if(!o)return null;let s=o.fills.map(e=>(0,Ib.dc)(e,t));return(0,Ib.rP)((0,xW.uH)(i,r),i,s,a)},[l,r]);return f.useMemo(()=>{let l=(null==o?void 0:o.childrenGuids)&&(null==o?void 0:o.childrenGuids.length)>0&&(null==o?void 0:o.visibleChildren)||[],r=i||l.length>0,f=r?t:e,_=f.filter(({paint:e})=>!!e.colorVar&&!!e.colorVar.value).map(({paint:e})=>(0,Ib.dc)(e,s)),g=f.filter(({paint:e})=>!e.colorVar||!e.colorVar.value).map(({paint:e})=>(0,Ib.dc)(e,s)),h=(r?a:n).map(e=>p(e,s)).filter(kt.t).sort(IC);return{selectionVariables:_,selectionStyles:(0,w1.QT)(h,c,d.inspectionMode,u,m),selectionValues:g}},[null==o?void 0:o.childrenGuids,null==o?void 0:o.visibleChildren,i,t,e,a,n,c,d.inspectionMode,u,m,s,p])}(),a=(0,_.d4)(af.sS),l=(0,_.d4)(e=>e.mirror.selectionPaints.emptyDueToLimitExceeded),{visibleItems:r,showMoreButton:i}=(0,IE.y)({items:[...e,...t,...n],getShowMoreLabel:e=>(0,eN.t)("dev_handoff.styles.show_more_colors",{count:e})});return l||r.length?f.createElement(wu.VZ,{title:(0,eN.t)("dev_handoff.selection_colors"),recordingKey:"handoffColorStyles",additionalHeaders:f.createElement(Ix.Af,{id:"handoffColorStyles"})},l&&f.createElement(iy.fI,{className:"selection_colors_panel--ignoreLimitButtonRow--loF8J"},f.createElement(so.nR,{className:"selection_colors_panel--ignoreLimitButton--US3qr",onClick:()=>{(0,Z.sx)("Show Selection Paints For Large Selection",{fileKey:a||""}),ei.Osy.ignoreLimitWhenCollectingPaints()}},(0,eN.tx)("dev_handoff.selection_colors.show_colors"))),r.map((e,t)=>e.type===IN.q.STYLE?f.createElement(IA,{key:t,colorStyle:e}):f.createElement(IO,{key:t,colorValue:e})),i):null}function II(e,t,n,a=1){let{a:l=1}=e;return(0,Ix.qe)({...e,a:l*a},t,n,{alphaInPercent:!0})}function IA({colorStyle:e}){let{name:t,dsStyle:n,styleGUIDs:a,paints:l}=e;(0,xW.w$)(n);let r=()=>ei.Osy.highlightOnlySameStyleInSublayers(a),i=()=>ei.Osy.highlightOnlySameStyleInSublayers([]),o=n.value;n.kind===Sd.AT.DANGLING&&(o.style_type="FILL",o.node_id=n.value.node_id);let s=(0,tM.Ku)();if(1===l.length&&"SOLID"===l[0].paint.type&&l[0].paint.color&&!l[0].paint.colorVar){let{value:e,copyValue:n}=II(l[0].paint.color,s,l[0].valueFormatter,l[0].paint.opacity);return f.createElement(IL,{displayValueLeft:t,copyValueLeft:t,displayValueRight:e,copyValueRight:n,icon:f.createElement(IS.zi,{dsStyle:o,hideNameInTooltip:!0}),onMouseEnter:r,onMouseLeave:i,dataTestId:"selectionStyleRow"})}return f.createElement("div",{onMouseEnter:r,onMouseLeave:i},f.createElement(Ix.Gz,{color:e,format:s}))}function IO({colorValue:e}){let{paint:t,encodedPaint:n,valueFormatter:a}=e,l=(0,tM.Ku)(),{variable:r,variableDisplayName:i,isSuggested:o}=(0,w1._B)(t),s=()=>{ei.Osy.highlightOnlySamePaintInSublayers(n)},c=()=>ei.Osy.highlightOnlySamePaintInSublayers("");if(r&&i&&t.color){let e="LOCAL"===r.subscriptionStatus&&r.isSoftDeleted,{value:n,copyValue:d}=II(t.color,l,a,t.opacity);return f.createElement(IL,{isVariable:!o,isSuggestedVariable:o,isDeletedVariable:e,displayValueLeft:i,copyValueLeft:i,displayValueRight:n,copyValueRight:d,icon:f.createElement(IT.J,{paint:t,tooltip:r.description}),onMouseEnter:s,onMouseLeave:c})}return f.createElement("div",{onMouseEnter:s,onMouseLeave:c},f.createElement(Ix.DP,{formattableColor:e,format:l}))}function IL(e){let{icon:t,isVariable:n,isSuggestedVariable:a,isDeletedVariable:l,onMouseEnter:r,onMouseLeave:i}=e,o=(0,xP.Cj)(e.copyValueLeft),s=(0,xP.Cj)(e.copyValueRight),[c,d]=f.useState(!1);return f.createElement("div",{onMouseEnter:r,onMouseLeave:i,className:"selection_colors_panel--styleRow--X7gbD","data-fullscreen-intercept":!0,"data-testid":e.dataTestId},f.createElement(a7.D8,{className:"selection_colors_panel--styleNameAndIcon--stVO4 text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:o,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),role:"button",tabIndex:0},t&&f.createElement("div",{className:"selection_colors_panel--styleIcon--eaifW"},t),n||a?f.createElement(w2.w,{text:e.displayValueLeft,isDeleted:l,containerClassName:"selection_colors_panel--variablePill--0dLco",disableHover:!0,isHovered:c,isInferred:a,tooltip:a?(0,eN.t)("dev_handoff.variables.inferred_color"):void 0}):f.createElement("div",{className:"selection_colors_panel--styleName--Nny-W text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},e.displayValueLeft)),e.displayValueRight&&f.createElement(f.Fragment,null,f.createElement("div",{className:"selection_colors_panel--spacer---6Fvk"}),f.createElement(a7.D8,{className:"selection_colors_panel--styleValue--BvNuA text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:s,role:"button",tabIndex:0},e.displayValueRight)))}var IP=n(73163);let ID="paywall_redesign_right_panel--rowWithIcon--KN1dV",IR="paywall_redesign_right_panel--layerIcon--rAdrH";var IM=n(968109),IF=n(501191);let IB=[{prefix:"display:",width:35},{prefix:"height:",width:35},{prefix:"padding:",width:145},{prefix:"justify-content:",width:100},{prefix:"align-items:",width:47},{prefix:"gap:",width:47},{prefix:"flex:",width:47}];function IU(){return f.createElement("code",{className:"paywall_redesign_right_panel--generatedCode--l3bLO code_panel--generatedCode--XGoAV code_panels_shared--code--VPQ05",style:{minWidth:"100%",whiteSpace:"normal"}},IB.map(({prefix:e,width:t},n)=>f.createElement("div",{key:n,className:"paywall_redesign_right_panel--codeLine--upXx8"},f.createElement("div",null,e),f.createElement(vs.Wi,{animationType:vs.JR.NO_SHIMMER,style:{width:t,height:10}}))))}let IH=[{width:97,color:500},{width:80,color:400},{width:120,color:200}],IG=[{width:97},{width:80},{width:120}],IV={inspectionMode:"code",inspectionModes:["code"],setInspectionMode:nf.lQ,supportsAlternativeUnits:!0,preferenceOptions:[],preferences:{},codeLanguageApi:{codeLanguage:{type:"first-party",id:wR.uz},onCodeLanguageChange:nf.lQ,activeCodegenPlugin:null,codeLanguageOptions:[],formatter:{format:e=>(0,eN.t)("dev_handoff.code.lang_css")}}};function IK(){let e="dark"===(0,ga.DP)()?"dark":"light",t="ui3"===(0,h.DP)().version;return f.createElement("div",{className:"paywall_redesign_right_panel--drillDownContainer--kLzE5 properties_panel--drillDownContainer--VaNDa"},f.createElement("div",{className:"paywall_redesign_right_panel--panelPosition--MtRQm properties_panel--panelPosition--oppQ8"},f.createElement("div",{className:`paywall_redesign_right_panel--panelContainer--Judvj dev_handoff_right_panel_container--panelContainer--XcbIk dev_handoff_right_panel_container--panelContainerBase--npHfL properties_panel--panelContainer--cKjqh ${nz.Dm}`},t&&f.createElement(IP.v2,null),f.createElement("div",{className:a8.cx.wFull.flex.flexRow.flexShrink0.itemsCenter.borderBox.bSolid.bb1.pr8.colorBorder.justifyBetween.colorBg.$},f.createElement("div",{className:a8.cx.flex.flexRow.itemsStart.hFull.$},f.createElement("div",{className:"paywall_redesign_right_panel--tabsHeader--AOhTE pages_panel--tabsHeader--ez-pH"},f.createElement("div",{className:"paywall_redesign_right_panel--tabActive--fvCNe pages_panel--tabActive--BitzC pages_panel--tab--Uge5B","data-label":(0,eN.t)("dev_handoff.tab.inspect")},(0,eN.tx)("dev_handoff.tab.inspect")),f.createElement("div",{className:"paywall_redesign_right_panel--tab--GpaFD pages_panel--tab--Uge5B","data-label":(0,eN.t)("dev_handoff.tab.plugins")},(0,eN.tx)("dev_handoff.tab.plugins"))))),f.createElement("div",{className:"paywall_redesign_right_panel--inspectPanelContainer--jYbwb inspect_panel--inspectPanelContainer--SZhfY"},f.createElement(wu.VZ,{recordingKey:"paywall-header",formattedHeader:f.createElement("div",{className:kh},f.createElement("div",{dir:"auto",className:kv},(0,eN.tx)("dev_handoff.paywall.panel.button")),f.createElement("div",{className:kg}))},f.createElement("div",{className:kf},f.createElement("div",{className:a8.cx.flex.flexColumn.gap8.wFull.$},f.createElement("span",{className:a8.cx.flex.flexRow.gap8.itemsCenter.wFull.$},f.createElement("span",{className:IR},f.createElement(C3.t,{svg:IM.A})),f.createElement(vs.Wi,{animationType:vs.JR.NO_SHIMMER,primary:!0,style:{width:97,height:8}})),f.createElement("span",{className:a8.cx.flex.flexRow.justifyBetween.itemsCenter.wFull.$},f.createElement("span",{className:a8.cx.flex.flexRow.gap8.itemsCenter.$},f.createElement("span",{className:IR},f.createElement(kB,{state:C4.Uy.RECENTLY_EDITED,backgroundState:null})),f.createElement(vs.Wi,{animationType:vs.JR.NO_SHIMMER,primary:!0,style:{width:68,height:8}})),f.createElement(a1.u4,{defaultClass:nb()(kT,kx),onClick:nf.lQ},f.createElement("span",{className:nb()(kN)},(0,eN.tx)("inspect_panel.history.compare_changes"))))))),f.createElement(wu.VZ,{recordingKey:"paywall-devresources",title:(0,eN.t)("dev_handoff.developer_related_links.links"),headerChildren:f.createElement(iy.K0,{className:"paywall_redesign_right_panel--addButton--VWvZ7 draggable_list--addButton--D0q--","data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.developer_related_links.add_link_button"),svg:IF.A})},f.createElement("div",{className:"paywall_redesign_right_panel--devResourcesColumn--Fiwy8"},f.createElement("div",{className:ID},f.createElement("img",{alt:"",src:"https://static.figma.com/uploads/ae3807b6d650b52da20879078b85a0df23ee056a"}),f.createElement(vs.Wi,{animationType:vs.JR.NO_SHIMMER,primary:!0,style:{width:97,height:8}})),f.createElement("div",{className:ID},f.createElement(C6.f,null),f.createElement(vs.Wi,{animationType:vs.JR.NO_SHIMMER,primary:!0,style:{width:97,height:8}})))),f.createElement("div",{className:a8.cx.wFull.h4.$}),f.createElement(T_,{preferencesApi:IV}),f.createElement(In,{loadingState:!0}),f.createElement(wu.VZ,{hideHeader:!0,recordingKey:"paywall-code"},f.createElement(wD,{header:f.createElement(wL,{type:"default",actions:f.createElement(wk,{"aria-label":(0,eN.t)("inspect_panel.copy")},f.createElement(ry.U,{svg:wx.A},f.createElement(C5.X,null))),title:(0,eN.t)("inspect_panel.properties.layout")}),content:f.createElement(IU,null),shouldShowMore:!1,showMoreLinesCount:0,onShowMore:nf.lQ,leftGutter:wA(IB)})),f.createElement(wu.VZ,{title:(0,eN.t)("dev_handoff.selection_colors"),recordingKey:"paywall-selection-colors",additionalHeaders:f.createElement("div",{className:"paywall_redesign_right_panel--colorHeader--R7I83"},"Hex",f.createElement(a2.B,{svg:op.A}))},IH.map(({width:t,color:n},a)=>f.createElement(IL,{key:a,icon:f.createElement("div",{className:"paywall_redesign_right_panel--colorThumbnail--XN-rp",style:{backgroundColor:bW[`grey_${n}_${e}`]}}),displayValueLeft:f.createElement(vs.Wi,{animationType:vs.JR.NO_SHIMMER,style:{width:t}}),displayValueRight:f.createElement(vs.Wi,{animationType:vs.JR.NO_SHIMMER,style:{width:50}})}))),f.createElement(wu.VZ,{title:(0,eN.t)("dev_handoff.assets"),recordingKey:"paywall-assets"},IG.map(({width:e},t)=>f.createElement("div",{key:t,className:"paywall_redesign_right_panel--assetRow--V7xL2 asset_panel--assetRow--0VUJr text--fontPos11--2LvXf text--_fontBase--QdLsd"},f.createElement(vs.Qp,{animationType:vs.JR.NO_SHIMMER,className:"paywall_redesign_right_panel--assetLoadingPreview--pBwFu"}),f.createElement("div",{className:"paywall_redesign_right_panel--assetDetails--RwZkm asset_panel--assetDetails--xfCbP"},f.createElement(vs.Wi,{animationType:vs.JR.NO_SHIMMER,style:{width:e,height:8}}),f.createElement(vs.Wi,{animationType:vs.JR.NO_SHIMMER,style:{width:60,height:8}})))))))),f.createElement("div",{className:"paywall_redesign_right_panel--transparentPanelScrim--TG58O"}))}var IW=n(463420);function Iz(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6 5h6a1 1 0 0 1 1 1v2h-3a2 2 0 0 0-2 2v3H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1Zm8 1v2h2a2 2 0 0 1 2 2v4.432l2.351.882a1 1 0 0 1-.108 1.906l-2.418.605-.605 2.418a1 1 0 0 1-1.906.108L14.432 18H10a2 2 0 0 1-2-2v-2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2Zm.057 11-.993-2.649a1 1 0 0 1 1.287-1.287l2.649.993V10a1 1 0 0 0-1-1h-6a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h4.057Zm4.234-.323L17 17l-.323 1.291L16.25 20l-.618-1.65-1.166-3.107L14 14l1.243.466 3.108 1.166L20 16.25l-1.709.427Z",clipRule:"evenodd"}))}var Ij=n(554322),IJ=n(448169),IY=n(331972),IX=n(693897),Iq=n(40987);function IZ(){var e;let t=(0,ag.ks)(),n=(0,tR.l7)(),a=(0,_.wA)(),l=(0,S.md)(Iq.d),r=(0,S.md)(Iq.cR),i=null==(e=(0,S.md)(Iq.hv))?void 0:e.data,{show:o,isShowing:s,complete:c}=(0,n7.e)({overlay:an.xjb,priority:n8.N.DEFAULT_MODAL});(0,np.h)(()=>{n&&!i&&(0,ak.nT)(a),!n&&!i&&(l||r)&&o()});let d={label:(0,eN.tx)("dev_handoff.workflows.overview.onboarding.primary_cta"),type:"button",onClick:c,ctaTrackingDescriptor:ar.c.GOT_IT},u={label:(0,eN.tx)("dev_handoff.workflows.overview.onboarding.secondary_cta"),type:"link",href:"https://help.figma.com/hc/en-us/articles/23918228264855",ctaTrackingDescriptor:ar.c.LEARN_MORE};return f.createElement(n9.rq,{title:l?(0,eN.tx)("dev_handoff.workflows.overview.onboarding.first_rfd.title"):(0,eN.tx)("dev_handoff.workflows.overview.onboarding.has_rfd.title"),description:l?(0,eN.tx)("dev_handoff.workflows.overview.onboarding.first_rfd.description"):t?(0,eN.tx)("dev_handoff.workflows.overview.onboarding.has_rfd.dev_mode.description"):(0,eN.tx)("dev_handoff.workflows.overview.onboarding.has_rfd.design.description"),trackingContextName:"Dev Mode Overview Onboarding",targetKey:ak.o5,isShowing:s,onClose:c,arrowPosition:dk.F_.LEFT_TITLE,primaryCta:d,secondaryCta:u,disableHighlight:!0})}let IQ=(0,t_.Wh)(()=>(0,e4.eU)(!1),{preserveValue:!1}),I$=(0,e4.eU)(""),I0=(0,e4.eU)("");var I1=(e=>(e.ALL="ALL",e.RECENTLY_VIEWED="RECENTLY_VIEWED",e.BUILD="BUILD",e.COMPLETED="COMPLETED",e))(I1||{}),I2=(e=>(e.RECENT="RECENT",e.PAGE="PAGE",e.ALPHABETICAL="ALPHABETICAL",e))(I2||{});let I5="pages_panel--pagesHeaderContainer--i92Ni",I4="pages_panel--chevron--VmSv1",I3="pages_panel--pagesHeaderContainerWithShadow--sVSKu pages_panel--pagesHeaderContainer--i92Ni",I6="pages_panel--pagesHeaderText--4UIwl",I7="pages_panel--pagesHeaderTextDimmed--GsBV9",I8="pages_panel--hoverByMouse---pkjS",I9="pages_panel--tab--Uge5B",Ae="pages_panel--tabActive--BitzC pages_panel--tab--Uge5B",At="pages_panel--pageTab--hc8gz",An="pages_panel--pageTabViewOnly--ZH2yx",Aa="pages_panel--pageTabViewOnlySearch--4XmZl",Al="pages_panel--pageTabText--ujePC ellipsis--ellipsis--Tjyfa",Ar="pages_panel--tabsHeaderBordered--f-Lhn pages_panel--tabsHeader--ez-pH",Ai="pages_panel--assetsTab--OKgP1",Ao="pages_panel--hidden--dmcG8",As="overview_entry--isSelected--E6mSl";function Ac({count:e,isInTab:t,isActive:n}){return f.createElement(iU.Ex,{className:nb()("overview_entry--countBadge---5UQw",t&&"overview_entry--isInTab--J7wAV",n&&a8.cx.colorText.$),text:`${e}`,size:iU.vj.SMALL,color:iU.zE.DEFAULT,subtle:!0})}function Ad(){var e;let t=(0,a6.U)(),n=(0,tR.X0)(),a=!(0,U.U4)(),[l,r]=(0,S.fp)(Iq.gk),i=(0,_.wA)(),o=(0,N.R)(e=>"fullscreen"===e.selectedView.view?{...e.selectedView,showOverview:!0}:e.selectedView),s=(0,_.d4)(e=>a?void 0:(0,f1.Np)(e,o)),c=(0,tR.l7)(),d=(0,tR.ZI)(),u=null==(e=(0,S.md)(Iq.hv))?void 0:e.data,[m,p]=(0,S.fp)(Iq.cR),g=(0,S.md)(Iq.d),h=(0,_.d4)(e=>e),E=(0,Q.ow)(),v=(0,f.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),a)return;let{clientX:t,clientY:n}=e;i((0,nI.j7)({type:nz.bx,data:{clientX:t,clientY:n}}))},[a,i]),[,y]=(0,S.fp)(I$);return!n||E?null:0===d?null:(c||u||m||g||p(!0),f.createElement("div",{className:nb()(Ar,"overview_entry--wrapper--qBXOx")},f.createElement("a",{className:nb()("overview_entry--entryRow--l-Ofr",c&&As,a&&"overview_entry--isDisabled--OAHeM"),onClick:function(e){a||(t("Dev Mode Overview Entry Clicked"),"editorType"in h.selectedView&&h.selectedView.editorType===eq.nT.Design&&(0,IX.Ym)(h,eq.nT.DevHandoff,"overview_entry"),y("entry_clicked"),e.preventDefault(),r(void 0),i((0,nI.$T)(o)))},onContextMenu:v,href:s,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":a?(0,eN.t)("dev_handoff.paywall.org_not_member_hint"):void 0,"data-tooltip-text-left":!0},f.createElement("div",{className:nb()("overview_entry--entryRowInner--fPECV",c&&As)},f.createElement("div",{className:"overview_entry--leftSide--0zNy- text--fontPos11--2LvXf text--_fontBase--QdLsd"},f.createElement(a2.B,{className:"overview_entry--readyIcon--QwDeG",svg:kA.A}),(0,eN.tx)("dev_handoff.workflows.overview.title")),f.createElement("div",{"data-onboarding-key":ak.o5},f.createElement(Ac,{count:d})))),f.createElement(aS.p,null,f.createElement(IZ,null))))}var Au=n(678340),Am=n(479118),Ap=n(729064),Af=n(782683),A_=n(622422),Ag=n(316082),Ah=n(735536),AE=n(80161),Av=n(659838),Ay=n(772167),Ab=n(478556),AC=n(541524),Aw=n(283942),AT=n(967409),Ax=n(173292),AN=n(493862),AS=n(776726),Ak=n(179536),AI=n(908968);let AA="canvas_search--searchInput--aCP6B canvas_search--input--aPqLZ",AO="canvas_search--icon32--bmz-L",AL="canvas_search--searchBarContainer--rxvLi",AP="canvas_search--selected--Ng41y",AD="canvas_search--disabled--dMwG7",AR="canvas_search--symbol--614fP",AM="canvas_search--resultRow--xX8wI",AF="canvas_search--multiline--1gb-l",AB="canvas_search--loadingSpinner--Y5hDC",AU="canvas_search--loadingSpinnerDelay--Rk3MX";function AH({innerRef:e,value:t,placeholder:n,onChange:a,onFocus:l,onKeyDown:r,onKeyUp:i,shiftEnterInsertsNewline:o,dataTestId:s,recordingKey:c,onPasteCapture:d}){let u=(0,f.useCallback)(t=>{e&&(e.current=(null==t?void 0:t.textarea)??null)},[e]),m=t.includes("\n");return f.createElement(AI.v,{className:nb()(AA,{"canvas_search--searchInputSingleLine--DUHFr":!m}),ref:u,focusOnMount:!0,placeholder:n,value:t,spellCheck:!1,recordingKey:c,dataTestId:s,onEscape:nf.lQ,disableBorderStyles:!0,onFocus:l,onPasteCapture:d,onKeyDown:e=>{switch(e.keyCode){case b.Uz.ENTER:if(e.preventDefault(),o&&(e.shiftKey||C.Ay.mac&&e.ctrlKey)){let{selectionStart:t,selectionEnd:n}=e.currentTarget;e.currentTarget.setRangeText("\n",t,n,"end"),e.currentTarget.scrollLeft=0,e.stopPropagation(),a(e.currentTarget.value);return}break;case b.Uz.UP_ARROW:case b.Uz.DOWN_ARROW:if(m)return}r(e)},onKeyUp:i,onChange:e=>a(e.currentTarget.value)})}var AG=n(81804);let AV=f.createContext(!1);function AK({onChange:e,query:t,focusedByButtons:n,innerRef:a,onKeyDown:l,onKeyUp:r,onPasteCapture:i,onFocus:o,editorType:s}){return f.createElement(AH,{innerRef:a,value:t,placeholder:(0,eN.t)("canvas_search.search_placeholder"),onFocus:e=>{o&&o(e),n.current||e.target.select(),n.current=!1},onPasteCapture:i,onKeyDown:e=>{e.keyCode===b.Uz.F?(0,b.Te)(e)?(e.currentTarget.select(),e.preventDefault()):(0,Aw.jr)(e,Aw.W0.NO,Aw.VA.NO)&&e.stopPropagation():l(e)},onKeyUp:r,onChange:e,dataTestId:"canvas-search-input",recordingKey:`${s}.canvas_search.search`})}function AW(e,t,n){let a=(0,f.useCallback)(({direction:a,shouldSelectInput:l})=>{var r,i;l?null==(i=e.current)||i.select():(n.current=!0,null==(r=e.current)||r.focus()),a&&t(a,"keyboard")},[n,e,t]);(0,Ax.p)(Ab.r.FocusEvent,a)}function Az(){let e=(0,f.useRef)(!1),[t,n]=(0,f.useState)(!0),{query:a}=(0,_.d4)(e=>e.canvasSearch),{total:l}=(0,S.md)(Iv.Fk);return{focusedByButtons:e,hidden:t,setHidden:n,inputRef:f.useRef(null),navDisabled:!a||l<=1,showUi:(0,eb.p8)("showUi")}}function Aj(){var e;let t=(0,fL.Z)("canvas_search_navigate"),{query:n,scope:a,filters:l,mode:r}=(0,_.d4)(e=>e.canvasSearch),i=(0,_.wA)(),o=(0,f.useRef)(!1),s=(0,eb.p8)("currentPage"),c=(0,aN.J2)(ei.Ez5.uiState().showCanvasSearch),d=(0,eb.p8)("pagesList"),[u,m]=(0,f.useState)(!1),[p,g]=(0,f.useState)(ei.Ez5.uiState().isRecovery.getCopy()),[h,E]=(0,f.useState)(!1),v=AJ(),y=(0,a6.am)(),b=(0,Ag.y)(),C=(0,f.useMemo)(()=>b&&(0,Am.lH)(d),[b,d])||b&&(null==(e=ei.h3O)?void 0:e.isValidatingIncremental()),w=(0,f.useMemo)(()=>!b&&(0,Am.lH)(d),[b,d]);(0,f.useLayoutEffect)(()=>{a!==ei.Lov.ALL_PAGES||h||!C&&p?ei.YEY.setSearchScope(a):(E(!0),scheduler.postTask(async()=>{C&&await (0,AN.qd)(ei._em.FIND_AND_REPLACE),ei.YEY.setSearchScope(a),g(!0)},{priority:"user-blocking"}))},[p,d,a,h,C]);let T=(0,f.useCallback)(async(e,n=!0)=>{b7.sn.start("canvas_search_time_to_results"),E(!0);let{nav:l,resultsByPage:r}=await v(e,n);Object.keys(r).filter(e=>e!==s&&e!==lg.Xy).length?m(!0):m(!1),E(!1),n&&t(l,{additionalTrackEventParams:{searchScope:ei.Lov[a]}});let i=b7.sn.tryStop("canvas_search_time_to_results");i&&y("canvas_search_time_to_results",{timeElapsedMs:i,searchScope:ei.Lov[a],resultCount:Object.values(r).reduce((e,t)=>e+=t.length,0)})},[s,t,a,v,y]),x=(0,q.A)(T,300),N=(0,f.useCallback)((e,t=!0)=>{i(Ay.NY(e)),E(!!e&&!(0,i3.jN)(e)),x(e,t)},[i,x]);return(0,f.useEffect)(()=>{c&&n&&(a!==ei.Lov.ALL_PAGES||!C&&p)&&T(n,!1)},[l,r,a,c,d,p,C]),{query:n,showSearch:c,resultsOnOtherPages:u,search:N,next:(0,f.useCallback)((e,n)=>{(0,aT.Uc)(""),ei.YEY.setHoveredResult(lg.AD,-1);let a=!o.current;o.current=!1,t(ei.YEY.setNextSearchResultAndGetViewportSettings(e,a),{additionalTrackEventParams:{source:n}})},[t]),exit:(0,f.useCallback)(()=>{var e;null==(e=ei.YEY)||e.exitSearchMode(ei.dNx.NONE)},[]),setNavigateNearestOnce:function(){o.current=!0},mode:r,isLoading:h,allInstancesExpanded:p,missingResultsOnSomePages:w}}function AJ(){let{scope:e,filters:t,mode:n}=(0,_.d4)(e=>e.canvasSearch),a=(0,eb.p8)("currentPage"),l=(0,a6.am)(),r=(0,Q.lg)(),i=(0,_.d4)(e=>e.mirror.appModel.pagesList);return(0,f.useCallback)(async(o,s=!0,c)=>{let d=c??a;if(!o||(0,i3.jN)(o)){let{nav:e}=ei.YEY.setSearchResultsAndGetViewportSettings([],d,"",{categories:[],mode:n});return{nav:e,resultsByPage:{}}}let u=!!t[Ak.kM.MatchCase],m=!!t[Ak.kM.WholeWords],{resultsByPage:p,metrics:f}=await AS.H1.search(o,{searchLayerNames:"design"===r,matchCase:u,wholeWords:m}),_=(0,AG.kH)(t),g=e===ei.Lov.ACTIVE_PAGE?p[d]?[{pageId:d,results:p[d]}]:[]:Object.keys(p).map(e=>({pageId:e,results:p[e]}));if(e===ei.Lov.ACTIVE_PAGE&&p[lg.Xy]){let e=p[lg.Xy];e.length&&g.push({pageId:lg.Xy,results:e})}if(1===o.length){let e=0,t=[],n=g.findIndex(e=>e.pageId===lg.Xy);for(let a of(n>-1&&t.push(g[n]),i)){let n=g.findIndex(e=>e.pageId===a.nodeId);if(-1===n)continue;let l=g[n];if(l.results.length>1e3-e){t.push({results:l.results.slice(0,1e3-e),pageId:l.pageId});break}e+=l.results.length,t.push(l)}g=t}let{nav:h,...E}=ei.YEY.setSearchResultsAndGetViewportSettings(g,d,o,{categories:_,mode:n}),v=_.map(e=>Ak.kM[e]);return l("canvas_search_results",{...f,...E,nodeTypes:v,searchScope:ei.Lov[e],matchCase:u,wholeWords:m}),{nav:h,resultsByPage:p}},[a,r,t,n,i,e,l])}function AY(e){return!e.clientX&&!e.clientY}function AX(){let{query:e,scope:t}=(0,_.d4)(e=>e.canvasSearch),n=AJ();return(0,f.useCallback)(a=>{let l=ei.YEY.getActiveResult(),r=l.type===ei.Z6A.CANVAS,i=a||r&&l.guid;return!!i&&(lE.q.instance.setCurrentPageAsync(i).then(()=>{t===ei.Lov.ACTIVE_PAGE?n(e,!1,i):ei.YEY.setActiveResultAndGetViewportSettings(i,0)}),!0)},[e,t,n])}var Aq=n(130715);function AZ({onClick:e}){return"ui3"===(0,h.DP)().version?f.createElement(vJ.K,{"data-onboarding-key":"canvas-search","data-tooltip-type":nx.Ib.LOOKUP,"data-tooltip":"canvas-search",onClick:e,recordingKey:"canvas_search.search_icon_button","aria-label":(0,eN.t)("fullscreen_actions.find")},f.createElement(Af.h,null)):f.createElement(iG.K0,{"data-onboarding-key":"canvas-search","data-tooltip-type":nx.Ib.LOOKUP,"data-tooltip":"canvas-search",onClick:e,recordingKey:"canvas_search.search_icon_button",isBackgroundTransparent:!0,className:"canvas_search--searchIconButton--lg-V8"},f.createElement(a2.B,{svg:Aq.A,className:AO}))}var AQ=n(193212),A$=n(969893);function A0({query:e,value:t,onChange:n,onFocus:a,recordingKey:l,hasMultipleSelections:r}){let i=(0,_.wA)(),o=(0,AQ.aq)(),s=(0,fL.Z)("canvas_search_navigate"),c=(0,_.d4)(e=>e.canvasSearch.scope),{total:d}=(0,S.md)(Iv.Fk),u="whiteboard"===(0,Q.lg)(),[m,p]=(0,f.useState)(!1),g=e.toLocaleLowerCase()!==t.toLocaleLowerCase(),h=(0,a6.am)(),E=!e||!d,v=o4.nc.user("canvas-search-replace",n=>{if(r){let{numReplaced:a,timeMs:l}=ei.YEY.replaceInMultipleResults(t,{preserveCase:g},ei.rpt.ONLY_ACTIVE);h("canvas_search_multi_replace",{source:n,timeMs:l,numReplaced:a,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),p(!0);return}let a=ei.YEY.replaceInActiveResult(t,{preserveCase:g});p(!0),h("canvas_search_replace",{source:n,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),s(a,{delay:300,additionalTrackEventParams:{searchScope:ei.Lov[c]}})});return f.createElement("div",null,f.createElement("div",{className:"canvas_search--replaceInput--TmEDS canvas_search--searchBarRow--9aFwa canvas_search--input--aPqLZ"},!u&&f.createElement("div",{className:AO},f.createElement(a2.B,{svg:A$.A})),f.createElement(AH,{value:t,placeholder:(0,eN.t)("canvas_search.replace_placeholder"),recordingKey:n_.Pt(l,"replace_input"),onChange:n,onFocus:e=>{null==a||a(e,!o())},onKeyDown:e=>{e.keyCode===b.Uz.ENTER?(v("enter"),e.stopPropagation()):m&&(0,b.Fo)(e)&&(0,Aw.jr)(e,Aw.W0.YES)&&e.stopPropagation()},shiftEnterInsertsNewline:!0})),f.createElement("div",{className:"canvas_search--replaceButtons--1sbwP"},f.createElement(n5.$,{disabled:E,onClick:()=>v("button"),recordingKey:n_.Pt(l,"replace_one")},(0,eN.tx)("canvas_search.replace_one")),f.createElement(n5.$,{disabled:E,onClick:o4.nc.user("canvas-search-replace-all",()=>{b7.sn.start("canvas_search_replace_all");let{numReplaced:n,timeMs:a}=ei.YEY.replaceInMultipleResults(t,{preserveCase:g},ei.rpt.ALL);n>0&&(p(!0),i(eS.F.enqueue({type:"canvas-search-replace-all",message:(0,eN.t)(u?"canvas_search.replace_all_message_figjam":c===ei.Lov.ACTIVE_PAGE?"canvas_search.replace_all_message":"canvas_search.replace_all_message_all_pages",{count:n})}))),h("canvas_search_replace_all",{source:"button",timeMs:a,numReplaced:n,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),b7.sn.tryStop("canvas_search_replace_all")}),recordingKey:n_.Pt(l,"replace_all")},(0,eN.tx)("canvas_search.replace_all"))))}var A1=n(77499),A2=n(170379),A5=n(638496),A4=n(142284),A3=n(931493),A6=n(970823),A7=n(785496);function A8({lean:e,minWidth:t,recordingKey:n}){let a=(0,_.wA)(),l=(0,nT.B)("CANVAS_SEARCH_FILTER_DROPDOWN"),r=f.useRef(null),i=(0,eb.p8)("isReadOnly"),o=(0,S.md)(Iv.yo),s=(0,_.d4)(e=>e.canvasSearch.filters),c=(0,_.d4)(e=>e.canvasSearch.mode),d="whiteboard"===(0,Q.lg)(),u=f.useMemo(()=>{let e=i?[]:[f.createElement(nC.W.CheckableTwoColumnOption,{key:"find",primaryText:(0,eN.t)("canvas_search.search"),checked:c===ei.EW4.FIND,onClick:()=>{a(Ay.sV(ei.EW4.FIND)),l.hide()},recordingKey:n_.Pt(n,"settings.find")}),f.createElement(nC.W.CheckableTwoColumnOption,{key:"replace",primaryText:(0,eN.t)("canvas_search.replace"),checked:c===ei.EW4.REPLACE,onClick:()=>{a(Ay.sV(ei.EW4.REPLACE)),l.hide()},recordingKey:n_.Pt(n,"settings","replace")}),f.createElement(nC.W.Separator,{key:"sep1"})],t=(t,r=!1)=>{let i=!!s[t];e.push(f.createElement(A9,{key:t,option:t,checked:i,counts:o,onClick:e=>{r||e.ctrlKey||C.Ay.mac&&e.metaKey?(a(Ay.DI(t)),r&&l.hide()):(a(Ay.zx(t)),l.hide())},recordingKey:n}))};if(c===ei.EW4.FIND&&!d){let r=!Ak.b4.some(e=>!!s[e]),i=Object.values(o).reduce((e,t)=>e+t,0);e.push(f.createElement(Oe,{checked:r,icon:A2.A,label:(0,eN.t)("canvas_search.filter.all"),count:i,onClick:()=>{a(Ay.dY()),l.hide()},recordingKey:n_.Pt(n,"settings","All")})),Ak.b4.forEach(e=>t(e)),e.push(f.createElement(nC.W.Separator,{key:"sep2"}))}return Ak._V.forEach(e=>t(e,!0)),e},[a,l,s,d,i,c,o,n]);return(0,f.useEffect)(()=>{i&&c===ei.EW4.REPLACE&&a(Ay.sV(ei.EW4.FIND))},[a,i,c]),f.createElement("div",{role:"none",onClick:vm.dG,onMouseUp:vm.dG},f.createElement("div",{ref:r},f.createElement(iG.YW,{svg:Tp.A,selected:l.showing,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("canvas_search.settings"),onClick:e=>l.showing&&e.stopPropagation(),onMouseDown:l.toggle,recordingKey:n_.Pt(n,"settings")})),l.showing&&r.current&&f.createElement(nN.Jz,{showPoint:!0,targetRect:r.current.getBoundingClientRect(),options:u,hideDropdown:l.hide,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,autofocusPrevElementOnTab:!1,lean:e,minWidth:t,recordingKey:n_.Pt(n,"settings"),propagateCloseClick:!0}))}function A9(e){let t=e.counts[e.option],n=function(e){switch(e){case Ak.kM.Text:return A4.A;case Ak.kM.FrameOrGroup:return A1.A;case Ak.kM.Component:return Na.A;case Ak.kM.Instance:return IM.A;case Ak.kM.Image:return A6.A;case Ak.kM.Shape:return A5.A;case Ak.kM.Other:return A3.A;case Ak.kM.MatchCase:case Ak.kM.WholeWords:return null}}(e.option),a=Oa(e.option);return f.createElement(Oe,{checked:e.checked,icon:n,label:a,count:t,onClick:e.onClick,buttonRef:e.buttonRef,recordingKey:n_.Pt(e,"settings",Ak.kM[e.option])})}function Oe({checked:e,icon:t,label:n,count:a,onClick:l,buttonRef:r,recordingKey:i}){return f.createElement(nC.W.CheckableOption,{checked:e,onClick:l,recordingKey:i,buttonRef:r},f.createElement("div",{className:"canvas_search_settings--optionRow--KS01b"},t&&f.createElement(a2.B,{className:"canvas_search_settings--optionIcon---0QYX",svg:t}),f.createElement("span",{className:"canvas_search_settings--optionLabel--Ygpmi"},n),!!a&&f.createElement("span",{className:"canvas_search_settings--optionCount--BzzTP"},a)))}function Ot({short:e,mode:t,recordingKey:n}){let a=(0,_.wA)(),l=(0,_.d4)(e=>e.canvasSearch.filters),r=t===ei.EW4.FIND?AG.D4:AG.IM,i=(0,C7.RP)(r,e=>l[e]?f.createElement(On,{key:e,option:e,onClose:()=>{a(Ay.DI(e))},recordingKey:n}):null);return 0===i.length?null:f.createElement("div",{className:nb()("canvas_search_settings--filterPills--tbdih",{"canvas_search_settings--filterPillsShort--GX-Rn":e})},i)}function On({option:e,onClose:t,recordingKey:n}){return f.createElement("div",{className:"canvas_search_settings--filterPill--hjIaF"},Oa(e),f.createElement(iG.K0,{className:"canvas_search_settings--pillRemove--Om1tg",svg:A7.A,onClick:t,isBackgroundTransparent:!0,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("canvas_search.filter.remove"),tooltipForScreenReadersOnly:!0,recordingKey:n_.Pt(n,Ak.kM[e],"remove")}))}function Oa(e){switch(e){case Ak.kM.Text:return(0,eN.t)("canvas_search.filter.text");case Ak.kM.FrameOrGroup:return(0,eN.t)("canvas_search.filter.frame_or_group");case Ak.kM.Component:return(0,eN.t)("canvas_search.filter.component");case Ak.kM.Instance:return(0,eN.t)("canvas_search.filter.instance");case Ak.kM.Image:return(0,eN.t)("canvas_search.filter.image");case Ak.kM.Shape:return(0,eN.t)("canvas_search.filter.shape");case Ak.kM.Other:return(0,eN.t)("canvas_search.filter.other");case Ak.kM.MatchCase:return(0,eN.t)("canvas_search.filter.match_case");case Ak.kM.WholeWords:return(0,eN.t)("canvas_search.filter.whole_words")}}var Ol=n(432023),Or=n(247245),Oi=n(370903),Oo=n(995382),Os=n(761070),Oc=n(593701),Od=n(289298),Ou=(e=>(e[e.NONE=0]="NONE",e[e.SINGLE=1]="SINGLE",e[e.MULTI=2]="MULTI",e))(Ou||{}),Om=(e=>(e[e.NONE=0]="NONE",e[e.TOP=1]="TOP",e[e.MIDDLE=2]="MIDDLE",e[e.BOTTOM=3]="BOTTOM",e[e.ALL=4]="ALL",e))(Om||{});let Op=(0,e4.eU)(!1),Of=f.memo(function(e){let{onFocus:t}=e;return f.createElement("div",{className:"canvas_search--searchSidebarMinimal--I1hwg canvas_search--searchSidebarContainer--1tcxd"},f.createElement("div",{className:AL},f.createElement("div",{className:"canvas_search--searchBarRowMinimal--dEN6B canvas_search--searchBarRow--9aFwa"},f.createElement(AZ,{onClick:e.onFocus}),f.createElement(Av.L,{className:AA,onFocus:t,placeholder:(0,eN.t)("canvas_search.search_placeholder")}))))}),O_=f.memo(function({showFilter:e}){let{query:t,resultsOnOtherPages:n,next:a,exit:l,setNavigateNearestOnce:r,search:i,showSearch:o,mode:s,isLoading:c,allInstancesExpanded:d,missingResultsOnSomePages:u}=Aj(),[m,p]=(0,f.useState)(""),{focusedByButtons:_,inputRef:g}=Az(),E=(0,f.useRef)(null),v=(0,fL.Z)("canvas_search_navigate"),y=(0,S.md)(Iv.Wy),C=(0,S.md)(Iv.ml),w=(0,f.useContext)(AV),T=(0,S.md)(Op),[x,N]=(0,f.useState)(null),[k,I]=(0,f.useState)(0),[A,O]=(0,f.useState)(!1);(0,f.useLayoutEffect)(()=>{if(w){if(C.size>1||y.size>1){O(!0);return}for(let e of y.values())e.size>1&&O(!0)}},[y,w,C]);let L=(e,t)=>{O(!1),a(e,t)},P=function(e,t,n){if(!n)return!1;if(t.size>1||e.size>1)return!0;for(let t of e.values())return t.size>1;return!1}(y,C,w),D=function(e,t,n,a,l){let r=OT(e,n,e=>{var n;let a=(e.keyCode===b.Uz.D||e.keyCode===b.Uz.F)&&(0,b.Fo)(e)&&e.shiftKey;ON(e)&&!a&&(null==(n=t.current)||n.focus())},l);return(0,f.useCallback)(e=>{var l;let i=OS(e);switch(e.keyCode){case b.Uz.RIGHT_ARROW:case b.Uz.LEFT_ARROW:(0,b.Te)(e)||r(e);break;case b.Uz.C:case b.Uz.X:(0,b.Te)(e)&&window.getSelection&&!window.getSelection().toString()&&(et.Y5.triggerAction(e.keyCode===b.Uz.C?"copy":"cut"),e.preventDefault(),e.stopPropagation(),e.keyCode===b.Uz.X&&(null==(l=t.current)||l.focus()));break;case b.Uz.V:case b.Uz.Z:break;default:r(e)}n||i===lg.AD||a(ei.YEY.setActiveResultAndGetViewportSettings(i,0),{delay:300})},[n,r,t,a])}(L,E,P,v,I),R=Ox(I);AW(g,a,_);let M="ui3"===(0,h.DP)().version;if(!o)return null;let F=f.createElement(f.Fragment,null,f.createElement("div",{className:nb()(AO,{"canvas_search--searchIconPlaceholderFill--MohCt":M&&""===t})},f.createElement(ry.U,{svg:Aq.A},f.createElement(Af.h,null))),f.createElement(AK,{onChange:e=>{O(!1),i(e)},query:t,focusedByButtons:_,onKeyDown:D,onKeyUp:R,innerRef:g,onPasteCapture:e=>{var t;(0,AC.gk)(e)&&(et.Y5.triggerActionInUserEditScope("paste"),e.preventDefault(),null==(t=E.current)||t.focus())},editorType:AT._Y.DESIGN}));return f.createElement(ux.i,null,f.createElement("div",{className:"canvas_search--searchSidebarContainer--1tcxd",onBlurCapture:e=>{e.relatedTarget&&!e.currentTarget.contains(e.relatedTarget)&&(ei.YEY.setOverlayVisible(!1),r(),I(0))}},f.createElement("div",{className:AL},f.createElement("div",{className:"canvas_search--searchBarRow--9aFwa"},M?f.createElement("div",{className:"canvas_search--searchIconAndInput--3tdWb"},F):F,e&&f.createElement(A8,{lean:"right",recordingKey:"figma_design_search"}),f.createElement(iG.K0,{svg:dM.default,onClick:l,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("canvas_search.close"),tooltipForScreenReadersOnly:!0,recordingKey:"figma_design_search.close"})),f.createElement(Ot,{mode:s,short:s===ei.EW4.REPLACE,recordingKey:"figma_design_search.filterPills"}),s===ei.EW4.REPLACE&&f.createElement(A0,{query:t,value:m,onChange:p,onFocus:(e,n)=>{var a;!t&&n&&(null==(a=g.current)||a.focus())},hasMultipleSelections:P,recordingKey:"figma_design_search"})),c||T?f.createElement("div",{className:nb()(AB,AU)},f.createElement(re.dW,{size:"medium",testId:"canvas-search-loading-spinner"})):t&&!(0,i3.jN)(t)&&f.createElement(Og,{onNext:L,navigate:v,replacement:s===ei.EW4.REPLACE?m:void 0,resultsOnOtherPages:n,allInstancesExpanded:d,resultInputHandlerRef:E,hoveredResult:x,hasMultipleSelections:P,isInMultiselectMode:A,hoverSelectMode:k,missingResultsOnSomePages:u,setIsInMultiselectMode:O,setHoverSelectMode:I,setHoveredResult:N})))});function Og({onNext:e,navigate:t,replacement:n,resultsOnOtherPages:a,resultInputHandlerRef:l,hoveredResult:r,hasMultipleSelections:i,isInMultiselectMode:o,missingResultsOnSomePages:s,hoverSelectMode:c,setIsInMultiselectMode:d,setHoverSelectMode:u,setHoveredResult:m,allInstancesExpanded:p}){let g=(0,_.wA)(),h=function(){let e=(0,aN.J2)(ei.Ez5.uiState().showCanvasSearch),t=ei.YEY.hasDirtyPrimaryInstances(),n=(0,S.md)(Iv.Fk),a=(0,f.useRef)([]),l=t&&a.current.length,r=(0,f.useMemo)(()=>{if(!e||!n.total||l)return[];let t=ei.YEY.getSearchResults(),r=[];return t.forEach(e=>{let t=e.results.map(e=>{let t=lE.q.instance.get(e.guid);return t?{...e,textContent:t.textContent,name:t.name}:e});r.push({results:t,pageId:e.pageId})}),a.current=r,r},[n,e,l]);return l?a.current:r}(),E=AX(),v=(0,eb.p8)("currentPage"),y=(0,f.useRef)(null),C=(0,_.d4)(e=>e.canvasSearch.scope),w=ei.YEY.hasDirtyPrimaryInstances(),T=(0,S.md)(Iv.Fk),x=(0,S.md)(Iv.Ch),N=(0,S.md)(Iv.Wy),k=(0,S.md)(Iv.ml),I=(0,S.md)(Iv.hw),A=(0,f.useContext)(AV),O=!o,L=null==n,P=function(){let e=(0,fL.Z)("canvas_search_navigate"),t=(0,_.d4)(e=>e.canvasSearch.scope);return(0,f.useCallback)((n,a)=>{e(ei.YEY.setActiveResultAndGetViewportSettings(n,a),{additionalTrackEventParams:{searchScope:ei.Lov[t]}})},[e,t])}(),D=function(e,t){let n=(0,fL.Z)("canvas_search_navigate"),a=(0,_.d4)(e=>e.canvasSearch.scope),l=(0,a6.am)(),r=(0,f.useContext)(AV),i=(0,f.useCallback)((r,i,o)=>{let{nav:s,numNewNodes:c,numNewTextMatches:d}=ei.YEY.addActiveResultAndGetViewportSettings(r,i,o);e&&l("canvas_search_enter_multi_select",{numberOfNodes:c,numberOfTextMatches:d,source:"cmd/ctrl+click",mode:t?"find":"replace"}),n(s,{additionalTrackEventParams:{searchScope:ei.Lov[a]}})},[t,n,a,l,e]);return r?i:nf.lQ}(O,L),R=function(e,t){let n=(0,fL.Z)("canvas_search_navigate"),a=(0,_.d4)(e=>e.canvasSearch.scope),l=(0,a6.am)(),r=(0,f.useContext)(AV),i=(0,f.useCallback)(r=>{let{nav:i,numNewNodes:o,numNewTextMatches:s}=ei.YEY.addActiveResultsAndGetViewportSettings(r);e&&l("canvas_search_enter_multi_select",{numberOfNodes:o,numberOfTextMatches:s,source:"shift+click",mode:t?"find":"replace"}),n(i,{additionalTrackEventParams:{searchScope:ei.Lov[a]}})},[t,n,a,l,e]);return r?i:nf.lQ}(O,L),M=function(){let e=(0,fL.Z)("canvas_search_navigate"),t=(0,_.d4)(e=>e.canvasSearch.scope),n=(0,f.useContext)(AV),a=(0,f.useCallback)((n,a,l)=>{e(ei.YEY.removeActiveResultAndGetViewportSettings(n,a,l),{additionalTrackEventParams:{searchScope:ei.Lov[t]}})},[e,t]);return n?a:nf.lQ}(),[F,B]=function(...e){let[t,n]=(0,f.useState)(()=>e.reduce((e,t)=>(e[t]=!0,e),{}));return[t,(0,f.useCallback)((e,t=!0)=>{n(n=>n[e]!==t?{...n,[e]:t}:n)},[])]}(lg.Xy,v),U=(0,f.useRef)({}),H=(0,f.useMemo)(()=>{let e=[],t=h.find(e=>e.pageId===lg.Xy),n=C===ei.Lov.ALL_PAGES||!!t,a=h.find(e=>e.pageId===v),l=h;C===ei.Lov.ACTIVE_PAGE&&(l=[],t&&l.push(t),a&&l.push(a));let r=0;for(let{pageId:t,results:a}of(U.current={},l)){if(0===a.length)continue;let l=!!F[t];if(n&&(e.push({type:"header",data:{pageId:t,open:l,numResults:a.reduce((e,t)=>e+=t.textMatches.length,0)}}),++r),n&&!l)continue;U.current[t]=r;let i=0;for(let n of a){let{textMatches:a,...l}=n;a.forEach((n,a)=>{e.push({type:"result",data:{...l,matchIndex:a,textMatch:n,index:i,pageId:t}}),++i,++r})}}return e},[v,F,C,h]);(0,f.useEffect)(()=>{null!=x&&B(x.pageId)},[x,B]);let G=(0,Ap.z)({size:H.length,parentRef:y,overscan:10}),V=e=>{if(null==x||null==x.index)return[];let t=U.current[x.pageId];if(null==t)return[];let n=t+x.index;if(n===e)return[];let a=[],l=Math.min(n,e),r=Math.max(n,e);if("header"===H[e].type)return a;for(let e=l;e<=r;e++)"result"===H[e].type&&a.push(H[e].data);return a},K=(0,f.useCallback)(e=>!!A&&"header"!==e.type&&(!!o||0!==c)&&(e.data.textMatch.matchType===ei.Ifi.TEXT_MATCH&&k.has(e.data.resultGuid)&&!N.has(e.data.resultGuid)||I.has(e.data.resultGuid)),[N,A,k,c,I,o]),W=(0,f.useCallback)(e=>{var t;return"header"!==e.type&&(A?e.data.textMatch.matchType===ei.Ifi.PAGE_MATCH?e.data.index===(null==x?void 0:x.index)&&e.data.pageId===(null==x?void 0:x.pageId):e.data.textMatch.matchType===ei.Ifi.LAYER_MATCH?k.has(e.data.resultGuid)&&!N.get(e.data.resultGuid):(null==(t=N.get(e.data.resultGuid))?void 0:t.has(e.data.matchIndex))??!1:e.data.index===(null==x?void 0:x.index)&&e.data.pageId===(null==x?void 0:x.pageId))},[null==x?void 0:x.index,null==x?void 0:x.pageId,N,A,k]),z=(0,f.useCallback)((e,t,n)=>{let a=e+n,l=t+n,r=e=>"result"===e.type&&(W(e)||K(e));for(;a>0&&a<=H.length&&r(H[a-1]);)a-=1;for(;l<H.length&&r(H[l]);)l+=1;return[a-n,l-n]},[K,W,H]),j=(0,f.useCallback)((e,t)=>{if(e+t>=H.length)return!1;let n=H[e+t];return!W(n)&&!K(n)},[K,W,H]),J=(0,f.useCallback)((e,t,n)=>{let a=!1;for(let l=e;l<=t&&!(l+n>=H.length);l+=1){let e=H[l+n];if(!W(e)&&!K(e)){a=!0;break}}return a},[K,W,H]),[Y,X]=(0,f.useMemo)(()=>{let e=(null==r?void 0:r.nodeGuid)??lg.AD,t=(null==x?void 0:x.pageId)!=null?U.current[x.pageId]:null;if(A&&0!==c&&r&&e!==lg.AD&&r.pageId===(null==x?void 0:x.pageId)&&null!=t){let n=r.index,a=r.matchIndex;if((1===c||(null==x?void 0:x.index)==null)&&j(n,t))return[n,ei.YEY.getSingleHoveredSelectionEndIndex(e,a)];if(2===c&&(null==x?void 0:x.index)!=null&&x.index!==r.index){let l=n>x.index?x.index:n;return J(l,n>x.index?n:x.index,t)?z(l,ei.YEY.getMultiHoveredSelectionEndIndex(e,a),t):[null,null]}}return[null,null]},[null==x?void 0:x.index,null==x?void 0:x.pageId,A,z,c,r,J,j]),q=(0,f.useCallback)(e=>!A||null==Y||null==X||e<Y||e>=X?0:e===Y&&e===X-1?4:e===Y?1:e===X-1?3:2,[A,Y,X]),Z=(0,A_.$)(x);(0,f.useEffect)(()=>{if(o||0!==c||null==x||null==x.index||0===H.length||!Z)return;let e=U.current[x.pageId];if(null==e)return;let t=e+x.index,n=t>=G.virtualItems[0].index&&t<=G.virtualItems[G.virtualItems.length-1].index,a=!1;if(n){let e=G.virtualItems.find(e=>e.index===t);if(e){let{start:t,size:n}=e;a=function(e,t){if(!t)return!0;let n=t.scrollTop,a=n+t.clientHeight;return e.top>=n&&e.bottom<=a}({top:t,bottom:t+n},y.current)}}a||w||G.scrollToIndex(t,{align:"center"})},[x,Z,l,o,H,w,G,c]);let Q=(e,t,n,a)=>{let l=()=>{a?M(t.resultGuid,t.matchIndex,t.textMatch.matchType):D(t.resultGuid,t.matchIndex,t.textMatch.matchType)};t.pageId===lg.Xy?(E(t.guid),B(t.guid),d(!1)):A&&t.pageId===(null==x?void 0:x.pageId)?e.shiftKey&&(null==x?void 0:x.index)==null?(a||l(),d(!0)):e.shiftKey?((()=>{let e=V(n),t=[];e.forEach(e=>{let n=t.length?t[t.length-1]:void 0;(null==n?void 0:n.nodeId)===e.resultGuid&&(null==n?void 0:n.searchResultType)===ei.Ifi.TEXT_MATCH?n.matchIndices.push(e.matchIndex):t.push({nodeId:e.resultGuid,matchIndices:[e.matchIndex],searchResultType:e.textMatch.matchType})}),R(t)})(),d(!0)):(0,b.Fo)(e)&&t.textMatch.matchType!==ei.Ifi.PAGE_MATCH?(l(),d(!0)):(P(t.resultGuid,t.matchIndex),d(!1)):(P(t.resultGuid,t.matchIndex),d(!1))},$=function(e,t,n,a,l,r,i){let o=function(e,t){let n=(0,fL.Z)("canvas_search_navigate"),a=(0,_.d4)(e=>e.canvasSearch.scope),l=(0,a6.am)(),r=(0,f.useContext)(AV),i=(0,f.useCallback)(()=>{let{nav:r,numNewNodes:i,numNewTextMatches:o}=ei.YEY.setAllResultsAsActiveAndGetViewportSettings();e&&l("canvas_search_enter_multi_select",{numberOfNodes:i,numberOfTextMatches:o,source:"cmd/ctrl+A",mode:t?"find":"replace"}),n(r,{additionalTrackEventParams:{searchScope:ei.Lov[a]}})},[t,n,a,l,e]);return r?i:nf.lQ}(n,a),s=(0,f.useContext)(AV),c=OT(e,l,ON,r);return(0,f.useCallback)(e=>{let n=OS(e);switch(e.keyCode){case b.Uz.UP_ARROW:case b.Uz.DOWN_ARROW:case b.Uz.RIGHT_ARROW:case b.Uz.LEFT_ARROW:l?(function(){var e;let t=null==(e=document.getElementById("fullscreen-root"))?void 0:e.getElementsByClassName("focus-target");if(null!=t&&0!==t.length){for(let e of t)if(e.hasAttribute("readonly")&&"application"===e.getAttribute("role")){null==e||e.focus();break}}}(),ON(e,!0)):c(e);break;case b.Uz.A:if(s&&(0,b.Te)(e)){o(),i(!0),e.stopPropagation(),e.preventDefault();break}ON(e);break;case b.Uz.C:(0,b.Te)(e)?(et.Y5.triggerActionInUserEditScope("copy"),e.stopPropagation()):ON(e);break;case b.Uz.V:(0,b.Te)(e)?(et.Y5.triggerActionInUserEditScope("paste"),e.stopPropagation()):ON(e);break;case b.Uz.X:(0,b.Te)(e)?(et.Y5.triggerActionInUserEditScope("cut"),e.stopPropagation()):ON(e);break;case b.Uz.DELETE:case b.Uz.BACKSPACE:ON(e,!0);break;default:c(e)}l||n===lg.AD||t(ei.YEY.setActiveResultAndGetViewportSettings(n,0),{delay:300})},[l,s,c,o,i,t])}(e,t,O,L,i,u,d),ee=Ox(u);return f.createElement("div",{className:"canvas_search--resultsContainer--b0olz"},f.createElement("div",{className:"canvas_search--resultInfoHeader--GM1gm"},f.createElement(OE,{totalOnActivePage:T.total,resultsOnOtherPages:a,allInstancesExpanded:p}),0!==H.length&&f.createElement(f.Fragment,null,f.createElement(iG.K0,{svg:Oo.A,onClick:t=>{e(AG.OP.PREV,"button")},"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("canvas_search.previous"),"data-tooltip-shortcut-key":"canvas-search-prev",recordingKey:"figma_design_search.previous",disabled:T.total<=1}),f.createElement(iG.K0,{svg:Oi.A,onClick:t=>{e(AG.OP.NEXT,"button")},"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("canvas_search.next"),"data-tooltip-shortcut-key":"canvas-search-next",recordingKey:"figma_design_search.next",disabled:T.total<=1}))),f.createElement(i6.P,{className:"canvas_search--resultsList--Hciv7",scrollContainerRef:y},f.createElement(a7.D8,{style:{height:G.totalSize,position:"relative"},tabIndex:0,role:"listbox",recordingKey:"figma_design_search.results_list",onKeyDown:$,onKeyUp:ee,forwardedRef:l},G.virtualItems.map(e=>{let t=H[e.index];if(!t)return null;let a=W(t),s="result"===t.type&&t.data.pageId===(null==x?void 0:x.pageId)?q(t.data.index):0;return f.createElement("div",{key:"header"===t.type?t.data.pageId:`${t.data.pageId}#${t.data.index}`,ref:e.measureRef,className:nb()({"canvas_search--hoverSelectedTop--mA-fk canvas_search--_hoverSelectedBase--JOTSs":1===s,"canvas_search--hoverSelectedMiddle--OBw7k canvas_search--_hoverSelectedBase--JOTSs":2===s,"canvas_search--hoverSelectedBottom--zH7Va canvas_search--_hoverSelectedBase--JOTSs":3===s,[AR]:(1===c||(null==x?void 0:x.index)==null)&&(null==r?void 0:r.isPurple)}),style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`}},"header"===t.type?f.createElement(Ov,{...t.data,setOpen:e=>B(t.data.pageId,e)}):f.createElement(Oy,{activePageId:null==x?void 0:x.pageId,onSelect:n=>Q(n,t.data,e.index,a),onDoubleClick:()=>{ei.YEY.exitSearchMode(ei.dNx.SELECT_ACTIVE)},resultInputHandlerRef:l,result:t.data,replacement:n,selected:a,indirectlySelected:K(t),singletonHoverSelected:4===s,isInMultiselectMode:o,isInHoveredSelectMode:0!==c&&!!r,hasMultipleSelections:i,setHoveredResult:m}))})),w&&f.createElement("div",{className:AB},f.createElement(re.dW,{size:"medium"})),a&&C===ei.Lov.ACTIVE_PAGE&&f.createElement(a7.GG,{recordingKey:"figma_design_search.other_pages_button",className:nb()("canvas_search--otherResults--G94fM",AM),onClick:()=>{g(Ay.V2(ei.Lov.ALL_PAGES))}},(0,eN.tx)("canvas_search.results_other_pages")),s&&C===ei.Lov.ALL_PAGES&&f.createElement("div",{className:"canvas_search--resultsFooterText--rPxEh"},(0,eN.tx)("canvas_search.results_unavailable_offline"))))}let Oh={[ei.Lov.ACTIVE_PAGE]:()=>(0,eN.tx)("canvas_search.this_page"),[ei.Lov.ALL_PAGES]:()=>(0,eN.tx)("canvas_search.all_pages")};function OE({totalOnActivePage:e,resultsOnOtherPages:t,allInstancesExpanded:n}){let a=(0,_.wA)(),l=(0,tu.sO)(),r=(0,nT.B)("CANVAS_SEARCH_PAGE_SCOPE_DROPDOWN"),i=(0,f.useRef)(null),o=(0,_.d4)(e=>e.canvasSearch.scope),s=(0,_.d4)(e=>e.mirror.appModel.pagesList),c=(0,e2.Xr)(Op),d="";d=0===e?(0,Am.lH)(s)||!n?l?(0,eN.t)("canvas_search.no_results_in_this_deck"):(0,eN.t)("canvas_search.no_results_on_page"):t?(0,eN.t)("canvas_search.no_results"):(0,eN.t)("canvas_search.no_results_in_file"):(0,eN.t)("canvas_search.results_count",{total:e});let u=(!l||(0,y.kc)().interop_pages)&&(e>0||t||(0,Am.lH)(s)||!n);return f.createElement("div",{className:"canvas_search--resultInfo--PKQiZ"},f.createElement("span",{"data-testid":"canvas-search-info",className:"canvas_search--resultsText--ubMAu"},d),u&&f.createElement(f.Fragment,null,f.createElement("span",{className:"canvas_search--dotDivider--zvIFp"},"\xb7"),f.createElement("div",{role:"none",onClick:e=>e.stopPropagation()},f.createElement(a7.GG,{forwardedRef:i,recordingKey:"figma_design_search_page_scope_dropdown",className:"canvas_search--searchScopeButton--Grrvz","data-testid":"figma-design-search-scope-dropdown",onClick:e=>r.showing&&e.stopPropagation(),onMouseDown:()=>r.toggle(),onKeyDown:e=>{(e.keyCode===b.Uz.ENTER||e.keyCode===b.Uz.SPACE)&&(e.preventDefault(),r.toggle())}},f.createElement(f.Fragment,null,Oh[o](),f.createElement(a2.B,{svg:Od.A}))),i.current&&r.showing&&f.createElement(nN.Jz,{showPoint:!1,maxWidth:160,minWidth:160,className:"canvas_search--pageScopeDropdown--K5y-7",autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,lean:"right",leanPadding:0,targetRect:i.current.getBoundingClientRect(),hideDropdown:r.hide,recordingKey:"figma_design_search_page_scope",propagateCloseClick:!0,options:[ei.Lov.ACTIVE_PAGE,ei.Lov.ALL_PAGES].map(e=>f.createElement(nC.W.CheckableOption,{recordingKey:`figma_design_search_page_scope.${e}`,key:e,checked:e===o,onClick:()=>{r.hide(),e===ei.Lov.ALL_PAGES&&((0,Am.lH)(s)||!n)?(c(!0),requestAnimationFrame(()=>{a(Ay.V2(e)),c(!1)})):a(Ay.V2(e))}},f.createElement("div",{className:"canvas_search--dropdownOption--dQRr3"},Oh[e]())))}))))}function Ov({pageId:e,open:t,setOpen:n,numResults:a}){let l=(0,eb.eY)().get(e),r=e===lg.Xy?(0,eN.t)("fullscreen.canvas_search.pages"):l.name;return f.createElement(a7.GG,{className:"canvas_search--collapsableHeaderToggle--kHXh8",onClick:()=>n(!t)},f.createElement(a2.B,{className:"canvas_search--expandIcon--6eieV",svg:t?Cz.A:Ol.A}),f.createElement("span",{className:"canvas_search--collapsableHeaderName---qij5"},r),f.createElement("span",{className:"canvas_search--collapsableHeaderCount---NL3l"},a))}function Oy({result:e,replacement:t,activePageId:n,resultInputHandlerRef:a,selected:l,indirectlySelected:r,singletonHoverSelected:i,onSelect:o,onDoubleClick:s,isInMultiselectMode:c,isInHoveredSelectMode:d,hasMultipleSelections:u,setHoveredResult:m}){var p;let g=(0,eb.eY)(),h=(0,eb.p8)("currentPage"),E=e.textMatch.matchType===ei.Ifi.TEXT_MATCH,v=null!=t&&E&&((null==(p=g.get(e.guid))?void 0:p.hasMissingFont)||!1),y=!(0,Ag.y)(),b=(0,_.d4)(e=>e.mirror.appModel.pagesList),w=y&&e.textMatch.matchType===ei.Ifi.PAGE_MATCH&&ei.h3O.isIncrementalSession()&&(0,Am.Fy)(b,e.resultGuid)!==ei.xal.LOADED,T=(0,_.wA)(),x=nb()("canvas_search--layerIcon--RpNZF",{[AR]:e.isPurple,[AP]:l,[AD]:w}),N=f.createElement(xU.Bf,{className:x,guid:e.guid});return v?N=f.createElement("div",{className:AO+" "+x},f.createElement(a2.B,{svg:Oc.A})):e.guid===h&&(N=f.createElement("div",{className:AO+" "+x},f.createElement(a2.B,{svg:Or.A}))),f.createElement(a7.GG,{className:nb()({[AM]:!0,[AP]:l,"canvas_search--indirectlySelected--2E-TI":!l&&r,"canvas_search--singletonHoverSelected--pCLSM":i,"canvas_search--isHoverSelecting--LlQSE":d,[AR]:e.isPurple,[AD]:w}),onMouseDown:e=>{e.preventDefault()},onClick:t=>{var n;w?T(eS.F.enqueue({type:"offline-page-switch",message:(0,eN.t)("fullscreen.pages_panel.unavailable_offline")})):(null==(n=a.current)||n.focus(),c||!l||(C.Ay.mac?t.metaKey:t.ctrlKey)||e.textMatch.matchType===ei.Ifi.PAGE_MATCH?o(t):u||ei.YEY.setOverlayVisible(!0)),t.preventDefault(),t.stopPropagation()},onDoubleClick:c||w?nf.lQ:s,onMouseEnter:()=>{e.pageId===lg.Xy||e.pageId!==n?m(null):m({nodeGuid:e.resultGuid,pageId:e.pageId,index:e.index,matchIndex:e.matchIndex,isPurple:e.isPurple}),E?ei.YEY.setHoveredResult(e.resultGuid,e.matchIndex):e.textMatch.matchType===ei.Ifi.LAYER_MATCH&&(0,aT.Uc)(e.resultGuid)},onMouseLeave:()=>{(0,aT.Uc)(""),m(null),ei.YEY.setHoveredResult(lg.AD,-1)},recordingKey:n_.Pt("figma_design_search","result",e.pageId,e.index)},f.createElement("div",{className:"canvas_search--layerIconContainer--IuQxq"},N),f.createElement("div",{className:nb()("canvas_search--resultText--RXqeC",{[AF]:E})},e.textContent&&E?f.createElement(OC,{text:e.textContent,match:e.textMatch,replacement:v?void 0:t,multiline:!0}):f.createElement(Ob,{result:e})),w&&f.createElement("div",{className:"canvas_search--offlineIconContainer--qVbhY","data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"},f.createElement(a2.B,{className:"canvas_search--offlineIcon--F0sbc",svg:Os.A})))}function Ob({result:e}){var t;let{query:n}=(0,_.d4)(e=>e.canvasSearch),a=e.name&&e.stateGroupName?(0,Ah.w)(e.name):e.name;if(!a)return null;let l=e.stateGroupName||e.containerName,r=-1;e.textContent&&(a=e.textContent,r=(null==(t=e.name)?void 0:t.toLowerCase().indexOf(n))??-1,l=e.name);let i=a.toLowerCase().indexOf(n)??-1;return f.createElement("div",null,a&&i>-1?f.createElement(OC,{text:a,match:{start:i,end:i+n.length,matchType:ei.Ifi.LAYER_MATCH},multiline:!0}):f.createElement(AE.ph,{text:a}),l&&f.createElement("div",{className:"canvas_search--resultSubheading--XCt-Z"},r>-1?f.createElement(OC,{text:l,match:{start:r,end:r+n.length,matchType:ei.Ifi.LAYER_MATCH}}):f.createElement(AE.ph,{text:l})))}function OC({text:e,match:t,replacement:n,multiline:a}){let[l,r]=(0,f.useState)(e),[i,o]=(0,f.useState)(!1);(0,f.useEffect)(()=>{r(e)},[e]),(0,f.useEffect)(()=>{if(!i||l!==e)return;let n=t.start,a=0;for(let t=n-1;t>=0;--t)if(/\s/.test(e[t])&&a++,3===a){n=t;break}a<3&&(n=0),r(e.slice(n))},[i,l,e,t.start]);let s=(0,f.useMemo)(()=>f.createElement(Ow,{text:l,replacement:n,fullString:e,match:t}),[l,t,n,e]);return f.createElement(AE.ph,{className:a?AF:"",text:s,multiline:a,onTruncationChange:o})}function Ow({text:e,replacement:t,fullString:n,match:a}){let l=0;n&&e!==n&&(l=n.length-e.length);let r=a.start-l,i=a.end-l,o=e.substring(0,r),s=e.substring(r,i),c=e.substring(i);if(t&&s.toLocaleLowerCase()!==t.toLocaleLowerCase()){let e=Ab.r.detectTextTransform(s);t=Ab.r.applyTextTransform(t,e)}return f.createElement(f.Fragment,null,l?"\u2026":"",o,t?f.createElement(f.Fragment,null,f.createElement("span",{className:"canvas_search--strikethrough--0xsma"},s),f.createElement("b",null,t)):f.createElement("b",null,s),c)}function OT(e,t,n,a){let l=AX(),r=function(){let e=(0,fL.Z)("canvas_search_navigate"),t=(0,_.d4)(e=>e.canvasSearch.scope),n=(0,a6.am)(),a=(0,f.useContext)(AV),l=(0,f.useCallback)(()=>{n("canvas_search_multi_hierarchy",{order:"down"}),e(ei.YEY.moveActiveResultsDownOneLevelAndGetViewportSettings(),{additionalTrackEventParams:{searchScope:ei.Lov[t]}})},[e,t,n]);return a?l:nf.lQ}(),i=function(){let e=(0,fL.Z)("canvas_search_navigate"),t=(0,_.d4)(e=>e.canvasSearch.scope),n=(0,a6.am)(),a=(0,f.useContext)(AV),l=(0,f.useCallback)(()=>{n("canvas_search_multi_hierarchy",{order:"up"}),e(ei.YEY.moveActiveResultsUpOneLevelAndGetViewportSettings(),{additionalTrackEventParams:{searchScope:ei.Lov[t]}})},[e,t,n]);return a?l:nf.lQ}(),o=(0,f.useContext)(AV);return(0,f.useCallback)(s=>{switch(o?(0,b.Fo)(s)&&!s.shiftKey?a(1):s.shiftKey?a(2):a(0):a(0),s.keyCode){case b.Uz.P:case b.Uz.UP_ARROW:(s.keyCode!==b.Uz.P||C.Ay.mac&&(0,b.vN)(s,b.xH.CONTROL))&&(e(AG.OP.PREV,"keyboard"),s.stopPropagation(),s.preventDefault());break;case b.Uz.N:case b.Uz.DOWN_ARROW:(s.keyCode!==b.Uz.N||C.Ay.mac&&(0,b.vN)(s,b.xH.CONTROL))&&(e(AG.OP.NEXT,"keyboard"),s.stopPropagation(),s.preventDefault());break;case b.Uz.ENTER:if((0,b.Fo)(s)){ei.YEY.exitSearchMode(ei.dNx.SELECT_ACTIVE);break}if(l())break;s.shiftKey?t?i():e(AG.OP.PREV,"keyboard"):t?r():e(AG.OP.NEXT,"keyboard"),s.stopPropagation(),s.preventDefault();break;case b.Uz.ESCAPE:ei.YEY.exitSearchMode(ei.dNx.NONE),s.preventDefault(),s.stopPropagation();break;default:n(s)}},[o,a,l,n,e,t,i,r])}function Ox(e){return(0,f.useCallback)(t=>{if(t.keyCode===b.Uz.SHIFT){(!C.Ay.mac||t.metaKey)&&(C.Ay.mac||t.ctrlKey)||e(0);return}let n=C.Ay.mac&&"Meta"===t.key,a=!C.Ay.mac&&t.keyCode===b.Uz.CTRL;(n||a)&&!t.shiftKey&&e(0)},[e])}function ON(e,t=!1){if(t||(0,Aw.U5)(e,Aw.W0.YES)){let t=(0,Aw.f7)(e);return t&&e.stopPropagation(),t}return!1}function OS(e){switch(e.keyCode){case b.Uz.DELETE:case b.Uz.BACKSPACE:return ei.YEY.getNextResultForActiveResultRemoval();case b.Uz.X:if((0,b.Te)(e))return ei.YEY.getNextResultForActiveResultRemoval();break;case b.Uz.H:case b.Uz.R:if((0,b.Fo)(e)&&e.shiftKey)return ei.YEY.getNextResultForActiveResultRemoval()}return lg.AD}var Ok=n(999251),OI=n(723325),OA=n(395281),OO=n(999881),OL=n(298527);function OP(){let e=(0,_.wA)(),t=f.useRef(!1),n=(0,_.d4)(e=>e.loadingState),a=(0,_.d4)(e=>e.fileVersion),l=(0,OL.n1)(),r=(0,v.qd)(l),i=(0,S.md)((0,eJ.fy7)({group:(0,OO.M)()})),o=(0,eG.je)();f.useEffect(()=>{var s,c;if(!t.current&&!0===l&&!1===r&&"loaded"===i.status){t.current=!0;let l=new Set((null==(s=null==o?void 0:o.data)?void 0:s.map(e=>e.fileKey))??[]);for(let t of(null==(c=null==i?void 0:i.data)?void 0:c.libraryPresetSubscriptionsV2)??[])l.has(t.hubFileId)&&(0,xW.Fz)(t.hubFileId,n,a,e)}},[e,l,a,r,n,i,o])}var OD=n(435011),OR=n(693223),OM=n(378762),OF=n(799943),OB=n(781525),OU=n(756159),OH=n(715762),OG=n(26328),OV=n(140796),OK=n(48515);function OW({searchOptions:e,keyboardNavigationPath:t,keyboardNavigationColumn:n}){let a=(0,_.wA)(),l=(0,_.d4)(OG.UQ),{activeTab:r,shouldFocusSearchBar:i}=(0,_.d4)(e=>e.leftPanel),o=r===ei.xae.ASSETS,s=f.useRef(null),c=(0,_.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),d=(0,OV.vb)({isVisible:o,autofocus:!0,selectOnFocus:!0,ref:s});f.useEffect(()=>{let e=e=>{(C.Ay.chromeos?e.altKey&&e.shiftKey&&e.keyCode===b.Uz.KEY_2:e.altKey&&e.keyCode===b.Uz.KEY_2)&&c!==ei.m1T.TEXT&&(d(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[c,d]);let u=f.useCallback(t=>{let n;e&&((0,OG.eu)(e.type)?n=e.type:(n={type:OK.I.ALL},e.onSetAssetType(n))),a(OA.ku({query:t,searchOptions:n,entryPoint:"asset_panel"}))},[a,e]),m=nb()("component_sidebar_search--searchWithViewModeToggle--nKJ2-","component_sidebar_search--negMargin--QTfpB");return null!=t?f.createElement(OV.E1,{query:l.query,onChange:u,isVisible:o,className:m,recordingKey:"componentsLibrarySearch",placeholder:(0,eN.t)("design_systems.assets_panel.search"),autofocus:i,selectOnFocus:!0,hideSearchIcon:!0,entryPointForTracking:"editor:assets_panel",path:t,column:n,forwardedRef:s}):f.createElement(OV.aU,{query:l.query,onChange:u,isVisible:o,className:m,recordingKey:"componentsLibrarySearch",placeholder:(0,eN.t)("design_systems.assets_panel.search"),autofocus:i,selectOnFocus:!0,hideSearchIcon:!0,forwardedRef:s,entryPointForTracking:"editor:assets_panel"})}var Oz=n(535904),Oj=n(183686),OJ=n(663767),OY=n(57392),OX=n(142232),Oq=n(951864),OZ=n(337987);function OQ({entrypoint:e,onSetKeyboardNavigationElement:t,hideIfNoUpdates:n,recordingKey:a}){let l="ui3"===(0,h.DP)().version,r=(0,S.md)(OY.Lc),i=(0,_.d4)(Iy.ao),{isLibraryModalShown:o,onToggleLibraryModal:s}=(0,OJ.u)({entrypoint:e,modalType:"editor",openToUpdatesTab:l&&r}),c=f.useMemo(()=>r?(0,eN.t)("fullscreen.libraries_button.tooltip.updates_to_pull"):i?(0,eN.t)("fullscreen.libraries_button.tooltip.updates_to_push"):(0,eN.t)("fullscreen.libraries_button.tooltip.no_updates"),[r,i]),d=r||i;return((0,OX.Pf)({showBadge:d,hasChangesToPull:r,disabled:!l}),!n||r||i)?f.createElement("div",{className:"library_modal_button--teamLibraryIcon--EBc7q","data-onboarding-key":"library"},l?f.createElement(O$,{"aria-label":c,toggled:o,ref:t,recordingKey:n_.Pt(a,"teamLibrary"),"data-onboarding-key":n8.D,onClick:s},f.createElement(Oj.l,null),d&&f.createElement("div",{className:"library_modal_button--badgeContainer--ebOHQ"},f.createElement("span",{className:"library_modal_button--updatesBadge--B4nW-","data-testid":"library-button-badge"})," ")):f.createElement(iG.o5,{ref:t,recordingKey:n_.Pt(a,"teamLibrary"),selected:o,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("fullscreen.libraries_button.tooltip.no_updates"),"data-onboarding-key":n8.D,svg:Oq.A,fallbackSvg:OZ.A,onClick:s,innerText:"Team Library"})):null}let O$=(0,Y.tf)(Oz.d);var O0=n(35645),O1=n.n(O0),O2=n(708389),O5=n(788744),O4=n(756317),O3=n(680681),O6=n(957987),O7=n(765489),O8=n(776018);function O9(e){var t;let{assetType:n,libraryNameByFileKey:a,onSetAssetType:l,onSetKeyboardNavigationElement:r,validAssetTypeOptions:i}=e,o=(0,_.wA)(),s=(0,_.d4)(e=>e.modalShown),c=(0,_.d4)(e=>e.dropdownShown),d=(0,_.d4)(af.tB),u=n.type===OK.I.FILE?n.fileKey:void 0,m=(0,O5.Fl)(),p=f.useCallback(()=>{(null==s?void 0:s.type)===O8.V&&o(ty.AS()),Z.az.trackDefinedEvent("assets_panel.asset_type_dropdown_opened",{fileKey:null==d?void 0:d.key,assetsPanelVersion:2})},[o,s,null==d?void 0:d.key]),g=f.useMemo(()=>{if((0,O3.NX)(m)){let e=Object.entries(a??{}).map(([e,t])=>({key:e,name:t}));return(0,O3.k9)({libraries:e,approvedLibraryKeysByResourceType:m}),e.map(({key:e})=>e)}return Object.keys(a??{}).sort((e,t)=>O2.f.LEXICOGRAPHICALLY(a[e],a[t]))},[a,m]),h=(0,OL.Ck)(),[E,v]=O1()(g,e=>!(0,xK.wJ)(e)),C=v.length>0&&h(),w=f.useMemo(()=>({format:e=>{switch(e.type){case OK.I.RECENT:return(0,eN.t)("design_systems.assets_panel.dropdown_type_recents");case OK.I.ALL:return(0,eN.t)("design_systems.assets_panel.dropdown_type_all_libraries");case OK.I.LOCAL:return(0,y.kc)().dse_editor_templates_v1?(0,eN.t)("design_systems.assets_panel.dropdown_type_local_assets"):(0,eN.t)("design_systems.assets_panel.dropdown_type_local");case OK.I.FILE:return a[e.fileKey]}},isEqual:Le}),[a]);return f.createElement(ow.l6,{className:"sidebar_asset_type_select--select--PTmwH",id:"component-sidebar-asset-type-select",property:n,formatter:w,onChange:l,dropdownAlignment:"left",openOnKeyPressed:[b.Uz.SPACE,b.Uz.ENTER],inputRef:r,dispatch:o,chevronClassName:"sidebar_asset_type_select--chevron--xyZLx",inputClassName:"sidebar_asset_type_select--input--sSEn2",dropdownShown:e.useLocalState?e.dropdownShown:c,dropdownWidth:260,onShowDropdown:p,onShowDropdownOverride:e.useLocalState?e.onShowDropdownOverride:void 0,onHideDropdownOverride:e.useLocalState?e.onHideDropdownOverride:void 0,rightIcon:f.createElement(O6.P,{resourceId:u})},!!i[OK.I.ALL]&&f.createElement(ow.c$,{value:{type:OK.I.ALL}}),!!i[OK.I.RECENT]&&f.createElement(ow.c$,{value:{type:OK.I.RECENT}}),!!i[OK.I.LOCAL]&&f.createElement(ow.c$,{value:{type:OK.I.LOCAL}}),E.length>0?f.createElement(ow.sK,null):null,E.length>0&&!(0,y.kc)().dse_preset_libraries?f.createElement(ow.c$,{isHeader:!0,formattedValue:(null==(t=null==d?void 0:d.org)?void 0:t.name)?(0,eN.t)("design_systems.assets_panel.dropdown_org_libraries",{orgName:d.org.name}):(0,eN.t)("design_systems.assets_panel.dropdown_libraries")}):null,E.map(e=>(0,O3.vR)(e)?f.createElement(ow.c$,{key:e,value:{type:OK.I.FILE,fileKey:e},removeTextRightPadding:!0,rightSettingsIcon:f.createElement(O4.FX,null)}):f.createElement(ow.c$,{key:e,value:{type:OK.I.FILE,fileKey:e},fullWidth:!0})),C&&!(0,y.kc)().dse_preset_libraries?f.createElement(ow.sK,null):null,C&&!(0,y.kc)().dse_preset_libraries?f.createElement(ow.c$,{isHeader:!0,formattedValue:(0,eN.t)("design_systems.assets_panel.dropdown_curated_libraries")}):null,C&&v.map(e=>f.createElement(ow.c$,{key:e,value:{type:OK.I.FILE,fileKey:e},removeTextRightPadding:!0,rightSettingsIcon:f.createElement(O7.t,null)})))}function Le(e,t){return e.type===OK.I.FILE&&t.type===OK.I.FILE?e.fileKey===t.fileKey:e.type===t.type}var Lt=n(280999),Ln=n(731719);function La({disabled:e,isList:t,onSetKeyboardNavigationElement:n,onToggleViewMode:a,recordingKey:l}){let r=t?(0,eN.t)("design_systems.assets_panel.show_as_grid"):(0,eN.t)("design_systems.assets_panel.show_as_list");return f.createElement(iG.K0,{ref:n,recordingKey:n_.Pt(l,"toggleComponentsSidebarViewMode"),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":r,svg:t?Lt.A:Ln.A,onClick:a,disabled:e})}var Ll=n(135076),Lr=n(895235),Li=n(452246),Lo=n(146817),Ls=n(875387),Lc=n(914214);function Ld(e){var t,n;let a=(0,_.d4)(mK.getPermissionsState),l=(0,af.Cq)({useSinatraType:!0});return n=null==(t=(0,_.d4)(Lc.x))?void 0:t.id,!!l&&!!n&&(!!(a.currentUserOrgId&&(0,mK.canGuestOrg)(a.currentUserOrgId,a)||(0,mK.hasProTeamPaidStatus)(a,a_._Y.DESIGN,n)||(0,mK.hasActiveEduTeam)(a,n))||!!((0,y.kc)().dse_preset_libraries&&(0,xK.wJ)(e))&&S.zl.get(Ls.q).has((0,vu.l)(e)))}var Lu=n(473744),Lm=n(534804),Lp=n(267931),Lf=n(447381),L_=n(837324),Lg=n(733169),Lh=n(830445),LE=n(132135),Lv=n(321487),Ly=n(421234);let Lb="asset_file_path--path---PrgD text--fontPos11--2LvXf text--_fontBase--QdLsd",LC="asset_file_path--pathLink--lvFH3",Lw="asset_file_path--skeletonText--PIxni";function LT({assetFileKey:e,assetNodeId:t}){var n,a,l,r,i,o,s,c;let d=(0,a9.ol)(),u=(0,cC.sZ)(),m=!!u||(0,cw.w5)(d),p=null==u?void 0:u.id,g=eK.M4.useFile(e),h=(0,eW.Rs)(eJ.epW,{fileKey:e},{enabled:m}),E=null==(n=null==h?void 0:h.data)?void 0:n.file,v=function(e,t){let n=(0,_.d4)(e=>e.hubFiles)[e];return(0,xK.wJ)(e)&&n?(0,L_.qD)(n).name:t}(e,null==(a=null==g?void 0:g.data)?void 0:a.name),b=function(e,t){let n=(0,xK.wJ)(e),a=(0,Lg.Sw)(e).unwrapOr(!1),l=(0,_.d4)(af.tB),r=eK.M4.useFile(e).data;return f.useMemo(()=>{if(!a||n||!r||!l||r.key===l.key)return null;let e=(0,LE.to)(r);return(0,r_.dR)(e,{"node-id":encodeURIComponent((0,Lv.E)(t))})},[t,a,r,l,n])}(e,t),C=(null==h?void 0:h.status)==="loading",w=(0,Lh.E_)(e),T=null==(l=null==E?void 0:E.team)?void 0:l.id,x=T?function(e,t){let n=location.origin;return t?`${n}/files/${t}/team/${e}`:`${n}/files/team/${e}`}(T,p):void 0,N=null==(r=null==E?void 0:E.team)?void 0:r.name,S=T&&N&&m,k=null==(o=null==(i=null==E?void 0:E.team)?void 0:i.workspace)?void 0:o.id,I=k&&p?Ly.fO(k,p):void 0,A=null==(c=null==(s=null==E?void 0:E.team)?void 0:s.workspace)?void 0:c.name,O=k&&A&&m;return m&&C?f.createElement("div",{className:Lb,"data-testid":"asset-file-path-loader"},f.createElement(vs.Wi,{className:Lw,opacity:50}),"/",f.createElement(vs.Wi,{className:Lw,opacity:50})):f.createElement("div",{className:Lb},O&&f.createElement(f.Fragment,null,f.createElement(Lf.q,{tooltipText:A},f.createElement("a",{href:I,target:"_blank",className:LC},A)),"/"),S&&f.createElement(f.Fragment,null,f.createElement(Lf.q,{tooltipText:N},f.createElement("a",{href:x,target:"_blank",className:LC},N)),"/"),f.createElement(Lf.q,{tooltipText:v},b?f.createElement("a",{href:b,target:"_blank",className:LC},v):f.createElement("span",null,v)),(0,y.kc)().dse_preset_libraries&&w&&f.createElement("div",{className:a8.cx.flex.alignCenter.justifyCenter.ml2.$},f.createElement(O7.S,{hubFileId:e,showTooltip:!0})))}var Lx=n(237929),LN=n(986231),LS=n(564577),Lk=n(67294),LI=n(296045);function LA({user:e,communityProfile:t,updatedAt:n}){let a=null!=e&&!!e.img_url&&!!e.handle,l=null,r=null;return(null!=t?(l=f.createElement(LI.e,{entity:t,size:Lk.Pf.SMALL}),r=t.name):a&&(l=f.createElement(Lk.H8,{user:e,size:Lk.Pf.SMALL}),r=e.handle),l&&r)?f.createElement("div",{className:"asset_updated_details--updatedAtAvatar--uf4Gy"},l,f.createElement("span",{className:"asset_updated_details--handle--63B8y"},r),n?f.createElement(f.Fragment,null,f.createElement("span",{className:"asset_updated_details--dot--SoliI"},"\xb7"),f.createElement(LS.h1,{date:n})):null):n?f.createElement("div",{className:"asset_updated_details--updatedAt--eam-d"},(0,eN.tx)("design_systems.assets_panel.updated_at",{updatedAt:f.createElement(LS.h1,{date:n})})):null}var LO=n(790429);function LL({renderedAssetData:e}){var t,n,a,l;let r=(0,_.wA)(),i=(0,_.d4)(e=>e.dropdownShown),o=f.useMemo(()=>{var t,n;let a=null==(n=null==(t=null==e?void 0:e.nodeData)?void 0:t.moduleFrameData)?void 0:n.selectedFrameGUID;return null==a||a===lg.AD?{type:"all"}:{type:"guid",guid:a}},[null==(n=null==(t=null==e?void 0:e.nodeData)?void 0:t.moduleFrameData)?void 0:n.selectedFrameGUID]),s=f.useCallback(e=>{let t="all"===e.type?lg.AD:e.guid;ei.glU.setPlaygroundSelectedNode(t)},[]),{nodeData:c}=e,d=f.useMemo(()=>({format:t=>{var n,a,l;return"all"===t.type?"All frames":(null==(l=((null==(a=null==(n=null==e?void 0:e.nodeData)?void 0:n.moduleFrameData)?void 0:a.frames)??{})[t.guid])?void 0:l.name)??""}}),[null==(l=null==(a=null==e?void 0:e.nodeData)?void 0:a.moduleFrameData)?void 0:l.frames]);if(null==c)return null;let{playgroundGUID:u,moduleFrameData:m}=c;if(!u||null==m)return null;let p=Object.keys(m.frames??{});return p.length<2?null:f.createElement("div",{className:"playground_module_frame_section--wrapper--65QB6"},f.createElement("div",{className:"playground_module_frame_section--title--PCfEU"},(0,eN.tx)("design_systems.assets_panel.frames")),f.createElement(ow.l6,{id:"playground-module-frame-select",property:o,formatter:d,dispatch:r,onChange:s,dropdownShown:i},f.createElement(ow.c$,{value:{type:"all"}}),f.createElement(ow.sK,null),p.map(e=>f.createElement(ow.c$,{key:e,value:{type:"guid",guid:e}}))))}let LP=(0,lf.jz)(bW.figmaComponentFlyoutTextMaxCollapsedHeight);function LD({description:e,description_rt:t}){let n=f.useRef(null),[a,l]=f.useState(!0),[r,i]=f.useState(!1),o=(0,v.ZC)(e);f.useEffect(()=>{e&&n.current&&o!==e&&l(n.current.scrollHeight>LP)},[e,o]);let s=f.useCallback(()=>{a&&i(!0),l(!a)},[a]);if(!e&&!t)return null;let c=!!e&&(a||r);return f.createElement("div",{className:"truncated_component_description--documentationSection--87RCO"},t?f.createElement("div",null,f.createElement(xY.R,{fallback:f.createElement(re.kt,null),errorFallback:null,value:t,quillClassName:nb()("truncated_component_description--quill--yYiwV",{"truncated_component_description--quillCollapsed--3DiWp":a}),quillInnerRef:n})):f.createElement("div",{ref:n,className:nb()({"truncated_component_description--collapsed--VXZTS ellipsis--ellipsisAfter6Lines--2UA7M ellipsis--_ellipsisAfterNLines--LzI7k":a},"truncated_component_description--documentationDescription--C090D text--fontPos11--2LvXf text--_fontBase--QdLsd"),dir:"auto"},e),c&&f.createElement("button",{className:"truncated_component_description--showMore--brfX6",onClick:s},a?(0,eN.tx)("design_systems.assets_panel.show_more"):(0,eN.tx)("design_systems.assets_panel.show_less")))}let LR=(0,vc.fv)();function LM({renderedAssetData:e,errorType:t,canViewPlayground:n,onInsert:a,shouldHideError:l,onSetShouldHideError:r}){var i,o,s,c,d;let u=(0,_.d4)(e=>e.hubFiles),m=(0,eb.T3)(),[p,g]=f.useState(!1);f.useEffect(()=>{g(!1),r(!1)},[e.asset,r]);let h=(0,LO.S)(e.asset),E=(0,LN.Y)(e.asset),v=f.useMemo(()=>(0,Lx.kH)(e.asset.name??""),[e.asset.name]),b=f.useRef(null),C=(0,AE.NG)({text:v,textRef:b}),w=f.useMemo(()=>LR(e.asset),[e.asset]),T=(0,xK.wJ)(w),x=T?u[w]:null,N=e.asset,S=f.useMemo(()=>{var t;let n=null==(t=e.nodeData)?void 0:t.playgroundGUID;if(!n)return"";let a=m.get(n);if(!a)return"";let l=m.get(a.symbolId??"");return l?(l.isState?l.parentGuid:l.guid)??"":""},[e,m]),k=f.useMemo(()=>{if(t)return{errorType:t,shouldHideError:l,setShouldHideError:r}},[t,l,r]),I=T&&(0,y.kc)().presets_baseline?(0,eN.tx)("design_systems.assets_panel.insert"):e.asset.type===Sd.PW.MODULE&&(0,y.kc)().dse_editor_templates_v1?(0,eN.tx)("design_systems.assets_panel.insert_template"):(0,eN.tx)("design_systems.assets_panel.insert_instance");return f.createElement("div",{className:"component_flyout_body--bodyWrapper--CoGX-"},h&&!p&&f.createElement("div",{className:"component_flyout_body--updateBanner--ETDK5 component_flyout_body--_bodyPadding--KrB6p text--fontPos11--2LvXf text--_fontBase--QdLsd"},f.createElement(Nu.z,{orientation:"vertical",iconSrc:Sw.A,onClose:()=>g(!0),variant:"design"},(0,eN.tx)("design_systems.assets_panel.update_banner"))),f.createElement("div",{className:"component_flyout_body--headerFileNameWrapper--MH4jz component_flyout_body--_bodyPadding--KrB6p"},f.createElement("h2",{className:"component_flyout_body--header--3LXSQ text--fontPos14--OL9Hp text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa","data-tooltip":C?v:void 0,"data-tooltip-type":nx.Ib.TEXT,ref:b},v),!!E&&E>1&&f.createElement("div",{className:"component_flyout_body--numVariants--nureW"},(0,eN.tx)("design_systems.assets_panel.variant_count",{numVariants:E}))),f.createElement("div",{className:"component_flyout_body--descriptionWrapper--wFyRa component_flyout_body--_bodyPadding--KrB6p"},f.createElement(LD,{description:N.description,description_rt:N.description_rt})),f.createElement("div",{className:"component_flyout_body--updatedWrapper--q4V48 component_flyout_body--_bodyPadding--KrB6p"},f.createElement(LA,{user:N.user,communityProfile:null==x?void 0:x.publisher,updatedAt:N.updated_at})),f.createElement("div",{className:"component_flyout_body--buttonWrapper--Sb1Mq component_flyout_body--_bodyPadding--KrB6p"},f.createElement(a1.$$,{onClick:a,fullWidth:!0},I)),n&&!(null==e?void 0:e.nodeData)&&!k&&f.createElement("div",{className:"component_flyout_body--skeletonWrapper--urKH5"},f.createElement(vs.Wi,{className:"component_flyout_body--skeletonHeader--VoEY3",opacity:50}),f.createElement(vs.Wi,{className:"component_flyout_body--skeletonBody--pINXr",opacity:50})),n&&((null==e?void 0:e.nodeData)||k)&&f.createElement(eb.q0.Provider,{value:m},(0,y.kc)().dse_editor_templates_v1&&(0,y.kc)().dse_editor_templates_frames&&f.createElement(LL,{renderedAssetData:e}),f.createElement("div",{className:"component_flyout_body--propsContainer--w8pmU"},f.createElement(Sx,{componentProps:null==(i=e.nodeData)?void 0:i.componentProps,moduleProps:null==(o=e.nodeData)?void 0:o.moduleProps,moduleFrameData:(null==(s=e.nodeData)?void 0:s.moduleFrameData)??void 0,label:f.createElement(LF,{renderedAssetData:e}),playgroundGUID:null==(c=e.nodeData)?void 0:c.playgroundGUID,productComponentGUID:S,sceneGraph:m,instanceSwapPickerInitialHeight:200,instanceSwapPickerInitialPosition:"right-center",containerWidth:Sr.O2.UNBOUNDED,errorData:k,shouldShowDividerAboveProps:!0})),f.createElement("div",{className:"component_flyout_body--modeContainer--8n5p5"},f.createElement(SE,{fill:!0,modes:(null==(d=e.nodeData)?void 0:d.modeData)||{}}))))}function LF({renderedAssetData:e}){let t=f.useCallback(()=>{e.refetchAndResetScene()},[e]);return f.createElement("div",{className:"component_flyout_body--playgroundHeader--lQfDc"},f.createElement("div",{className:"component_flyout_body--flyoutLabel--6Y6lR text--fontPos11--2LvXf text--_fontBase--QdLsd"},f.createElement(a2.B,{className:"component_flyout_body--headerIcon--FHdrw",svg:Na.A}),(0,eN.tx)("design_systems.assets_panel.playground_label")),f.createElement(iG.K0,{className:"component_flyout_body--resetButton--wVXDQ",svg:Sk.A,onClick:t,"data-tooltip":(0,eN.t)("design_systems.playground.reset_properties"),"data-tooltip-type":nx.Ib.TEXT,disabled:!e.hasChangesToReset,recordingKey:"resetPlaygroundProps"}))}var LB=n(428654),LU=n(186380),LH=n(886571);let LG="component_flyout_thumbnail--thumbnail--p3jV2";function LV({canViewPlayground:e,renderedAssetData:t,onCloseIfHidden:n,setFlyoutHidden:a,sectionPosition:l,sectionNameForTracking:r,sectionDepth:i}){let o=f.useCallback(()=>{a(!0)},[a]),{onInsertableResourcePointerDown:s,dragState:c}=(0,v_.j)({resource:t.asset,isList:!1,clickToInsert:!1,sourceForTracking:"asset-description-preview",fromPlayground:e,recomputeCancelRectsOnPointerUp:!0,onDragStart:o,onPointerUpWithoutInsert:n,sectionPosition:l,sectionNameForTracking:r,sectionDepth:i}),d=f.useMemo(()=>{let e=(0,So.zR)(t.asset,null);if(null!=e)return LB.F.format(e)},[t.asset]);return f.createElement("div",{className:"component_flyout_thumbnail--thumbnailWrapper--P38Qq",onPointerDown:s,role:"button",style:d?{backgroundColor:d}:void 0},e&&(null==t?void 0:t.thumbnailData)&&t.hasChangesToReset?f.createElement("img",{className:LG,src:t.thumbnailData.src,alt:(0,eN.t)("design_systems.playground.thumbnail_alt"),draggable:!1}):f.createElement(LU.M,{className:LG,draggable:!1,key:(0,Lo.V)(t.asset),item:t.asset,shouldGenerateLocalThumbnail:!1}),f.createElement(vf.q,{dragState:c,isList:!1,thumbnailOverrideSrc:e&&(null==t?void 0:t.thumbnailData)?t.thumbnailData.src:void 0}))}let LK={maxWidth:640,maxHeight:480},LW=(0,vc.fv)();function Lz({asset:e,onInsert:t,onLoaded:n,flyoutHidden:a,onCloseIfHidden:l,setFlyoutHidden:r,sectionPosition:i,sectionNameForTracking:o,sectionDepth:s}){let c=Ld(LW(e)),[d,u]=f.useState(!1),m=function({canViewPlayground:e,canvasAsset:t,onLoaded:n,onError:a,thumbnailOptions:l}){let[r,i]=f.useState(t),{setPlaygroundNodeData:o,onSetPercentImagesLoaded:s,onResetTracker:c,thumbnailData:d,playgroundNodeData:u,hasChangesToReset:m,hasThumbnailErrors:p,setHasChangesToReset:_}=Sp(l),g=(0,af.tS)(),h=r!==t||!u,[E,v]=f.useState(null),y=f.useCallback(()=>{ei.glU.clearPlaygroundScene(),o(void 0)},[o]),b=f.useCallback(async(e=!0)=>{let n;if(t.type!==Sd.PW.COMPONENT&&t.type!==Sd.PW.STATE_GROUP&&t.type!==Sd.PW.MODULE){y();return}let a=Date.now();if(v(null),t.isLocal)n=null;else try{let e=So.Eo.getCanvas({canvas_url:t.canvas_url});await Promise.race([e,(0,x$.fm)(100)])||(i(t),o(void 0),_(!1)),n=await e}catch(e){0===e.status?v("OFFLINE"):v("GENERIC"),y(),i(t),(0,o2.$D)(o5.e.DESIGN_SYSTEMS_ECOSYSTEM,e,{tags:{openFileKey:g,fileKey:Sf(t),libraryKey:t.library_key,isCommunityLibrary:(0,xK.wJ)(Sf(t)),type:t.type}});return}let l=t.type!==Sd.PW.STATE_GROUP||t.isLocal?null:t.default_state_key;if(n?ei.glU.setPlaygroundSceneFromBuffer(t.node_id,n,e,l,Sf(t)):ei.glU.setPlaygroundSceneFromLocalAsset(t.node_id)){_(!1),o(ei.glU.getPlaygroundNodeData()),i(t),Z.az.trackDefinedEvent("playground.set_scene",{duration:Date.now()-a,assetType:t.type,isLocal:t.isLocal??!1,assetKey:(0,eV.u2)(t)}),c(),(0,ri.Jr)().loadAllImagesUnder(["0:0"],ei.MoD.NON_ANIMATED_ONLY,"playground.initialLoad",(e,t)=>{s((t-e)/t)},ei.glU.getPlaygroundScene());return}if(e){i(t),o(void 0),_(!1),setTimeout(()=>{b(!1)},50);return}v("GENERIC"),y()},[g,y,c,s,t,o,_]);return f.useEffect(()=>{e?b():i(t)},[e,o,t,y,b]),f.useMemo(()=>{let e=p?"THUMBNAIL_TIMEOUT":E;return!e&&h?{state:"LOADING",previousAssetData:{thumbnailData:d,hasChangesToReset:m,refetchAndResetScene:b,nodeData:u,asset:r}}:(n(),e)?(a(),{state:"ERROR",errorType:e,previousAssetData:{thumbnailData:d,hasChangesToReset:m,refetchAndResetScene:b,nodeData:u,asset:r}}):{state:"LOADED",currentAssetData:{hasChangesToReset:m,refetchAndResetScene:b,nodeData:u,thumbnailData:d,asset:r}}},[h,n,p,E,u,d,a,m,b,r])}({canvasAsset:e,canViewPlayground:c,onLoaded:n,onError:f.useCallback(()=>u(!1),[]),thumbnailOptions:LK}),p=(0,Lp.H)(),g=(0,_.d4)(e=>e.fileVersion),h=(0,v.ZC)(g);if(f.useEffect(()=>{var e,t;(null==m?void 0:m.state)==="LOADED"&&(null==(t=null==(e=null==m?void 0:m.currentAssetData)?void 0:e.nodeData)?void 0:t.playgroundGUID)&&null!=h&&h!==g&&(p(),ei.glU.clearPlaygroundScene())},[g,h,p,e.type,m]),!m)return f.createElement(re.kt,{className:"component_flyout--spinner--c-wap"});let E="LOADED"===m.state?m.currentAssetData:m.previousAssetData,y="ERROR"===m.state?m.errorType:void 0;return f.createElement("div",{className:"component_flyout--wrapper--96Jih"},f.createElement(LV,{renderedAssetData:E,canViewPlayground:c,onCloseIfHidden:l,setFlyoutHidden:r,sectionPosition:i,sectionNameForTracking:o,sectionDepth:s}),!a&&f.createElement(LM,{renderedAssetData:E,errorType:y,canViewPlayground:c,onInsert:t,onSetShouldHideError:u,shouldHideError:d}))}var Lj=n(180715);let LJ=(0,lf.jz)(lw.LdP),LY=(0,lf.jz)(lw.wkK),LX=(0,vc.fv)(),Lq=(0,cV.Ju)(function({asset:e,searchSessionId:t,query:n,sectionPosition:a,sectionNameForTracking:l,assetTypeDropdownSelection:r,sectionDepth:i,containerWidth:o,onGetKeyboardNavigationItemById:s}){let c=f.useRef(null),d=(0,e2.Xr)(Lj.T),u=f.useMemo(()=>LX(e),[e]),m=Ld(u),p=(0,O5.cm)(u),g=(0,af.q5)(),h=(0,_.wA)(),E=(0,_.d4)(e=>(0,Iy.e_)(e).local.thumbnails),v=(0,Lp.H)(),y=(0,_.d4)(e=>e.instanceSwapPickerShown),C=(0,eF.k)();(0,np.h)(()=>{Z.az.trackDefinedEvent("assets_panel.flyout_opened",{assetKey:(0,Lo.V)(e),assetType:(0,Lo.q)(e.type),fileKey:u,isLocal:e.isLocal,fileParentOrgId:(null==g?void 0:g.parentOrgId)??void 0,fileTeamId:(null==g?void 0:g.teamId)??void 0,assetsPanelVersion:C,partnerType:(0,Ny.X)(u)})}),(0,np.h)(()=>()=>{h((0,Sl.vq)()),d(!1)}),f.useEffect(()=>{if(!(0,xW.dx)(e)||!e.isLocal)return;let t=e.node_id?E[e.node_id]:null,n=e.type===Sd.PW.COMPONENT?e.content_hash:e.version;(null==t?void 0:t.content_hash)!==n&&requestAnimationFrame(()=>{let t=(0,So.r2)(e.node_id);null!=t&&h(Li.T1({thumbnails:[{nodeId:e.node_id,url:t,type:e.type}],source:Sd.$1.LOCAL}))})},[e,h,E]);let w=f.useCallback(()=>{requestAnimationFrame(()=>{var e;return null==(e=null==c?void 0:c.current)?void 0:e.ensureModalOnScreen()})},[]),T=f.useCallback(()=>{(null==y?void 0:y.isShown)&&h((0,Sl.vq)())},[h,y]),x=(0,Lm.Hu)(u),N=(0,aq.Nv)(),S=f.useCallback(()=>{let o=et.Y5.getViewportInfo(),s={canvasPosition:{x:o.offsetX,y:o.offsetY},insertAsChildOfCanvas:!0,percentageOffset:new r4.Mi(.5,.5),storeInRecentsKey:EI.$A.Design,useSmartPositioning:!0,fromPlayground:m,insertedItemsCallback:()=>{h(ty.ES({type:O8.V}))}};e.type===Sd.PW.COMPONENT?h((0,W.Yf)({item:e,...s})):e.type===Sd.PW.STATE_GROUP?h((0,W.b$)({item:e,...s})):e.type===Sd.PW.MODULE&&h((0,W.Bs)({item:e,...s})),Z.az.trackDefinedEvent("assets_panel.flyout_insert",{assetKey:(0,xW.Av)(e),assetType:(0,Lo.q)(e.type),assetTypeDropdownSelection:r,fileKey:(null==g?void 0:g.key)??void 0,fileParentOrgId:(null==g?void 0:g.parentOrgId)??void 0,fileTeamId:(null==g?void 0:g.teamId)??void 0,libraryType:x,searchSessionId:t??void 0,searchQuery:n,sectionPosition:a,sourceSection:l??void 0,sectionDepth:i,assetsPanelVersion:C,scoreAi:e.ai_score??void 0,scoreLexical:e.lexical_score??void 0,aiResultsEnabled:N&&(0,aI.am)(),partnerType:(0,Ny.X)(u),libraryKey:e.library_key,isExample:(0,Lu.o)(e)})},[m,e,u,h,r,null==g?void 0:g.key,null==g?void 0:g.parentOrgId,null==g?void 0:g.teamId,x,t,n,a,l,i,C,N]);f.useEffect(()=>{let e=e=>{var t;let n=oQ.findDOMNode(null==(t=c.current)?void 0:t.getEl());if(n){if(!n.contains(e.target)){if(d(!1),(0,Lr.NX)(e.target,"data-does-not-dismiss-component-flyout"))return;h(ty.ES({type:O8.V}));return}d(!0)}};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[h,d]);let k=f.useCallback(t=>{var n,a,l,r;let i=t.event.code??t.event.key,o=(0,Lo.V)(e),c=null==s?void 0:s(o);if(!c)return;let d=t.event.keyCode===b.Uz.TAB,u=t.event.shiftKey;if((0,OI.c2)(t.event,!1)){null==(n=c.getItemAbove())||n.focus(),t.accept();return}if((0,OI.Nt)(t.event,!1)){null==(a=c.getItemBelow())||a.focus(),t.accept();return}if((0,OI.yn)(i,!1)||d&&u){null==(l=c.getItemToTheLeft())||l.focus(),t.accept();return}if((0,OI.lv)(i,!1)||d&&!u){null==(r=c.getItemToTheRight())||r.focus(),t.accept();return}if("Enter"===i){S(),t.accept();return}},[e,S,s]);var I=f.createElement("div",{className:a8.cx.minW0.flex1.$},f.createElement("div",null,(0,eN.t)("design_systems.assets_panel.details")),f.createElement(fy.Y,{spacing:0,direction:"horizontal"},e&&f.createElement(LT,{assetFileKey:u,assetNodeId:e.node_id}),p&&f.createElement("div",{className:a8.cx.pr4.$},f.createElement(O4.KP,{fileKey:u,variant:"secondary",tooltipLocation:"below"}))));let[A,O,L]=(0,EB.J)(!1),P=f.useCallback(()=>{A.current&&v()},[A,v]);return f.createElement(ae.vx,{alwaysEnsureModalOnScreen:!0,allowAutoExpanding:!0,canRenderBelowViewport:!1,headerSize:"large",initialPosition:new r4.Mi(o+1,LJ),onClick:T,onClose:v,onKeyDown:k,title:I,truncateTitleText:!0,initialWidth:LY,ref:c,dataTestId:"component-flyout-modal",hidden:O,noCancelDragAndDrop:!0},f.createElement("div",{"data-not-draggable":!0},f.createElement(Lz,{asset:e,onLoaded:w,onInsert:S,flyoutHidden:O,onCloseIfHidden:P,setFlyoutHidden:L,sectionPosition:a,sectionNameForTracking:l,sectionDepth:i})))},O8.V);var LZ=n(811529);function LQ(e,t,n){return null!=e&&(t[e.type]||e.type===OK.I.FILE&&n[e.fileKey])?e:{type:OK.I.ALL}}var L$=n(670494),L0=n(875847),L1=n(532888),L2=n(372291),L5=n(238837),L4=n(233333);let L3="searchResults";function L6(e,t){return`${t}:${e.key}`}function L7(e){return`${e}:${L3}:templates`}function L8(e){return`${e}:recentlyUsed`}function L9(e){return`${e}:stickySection`}var Pe=n(734013),Pt=n(607283),Pn=n(739212),Pa=n(603396),Pl=n(969504),Pr=n(938720),Pi=n(734017),Po=n(448406),Ps=n(659265),Pc=n(408938);let Pd=(0,vc.fv)();function Pu({asset:e,fileName:t,sourceForTracking:n,thumbHeight:a,thumbLayout:l,thumbWidth:r,viewMode:i,sectionNameForTracking:o,sectionPosition:s,noFlyout:c,preventDrag:d,disableContextMenu:u}){var m,p;let g=(0,_.wA)(),h=(0,_.d4)(e=>e.dropdownShown),E=(0,_.d4)(bi.dK),b=(0,_.d4)(Iy.F9),C=(0,_.d4)(Iy.e_),w=(0,S.md)(Lj.T),T=(null==(m=C.assetsPanelSearch.searchOptions)?void 0:m.type)===OK.I.ALL,x=f.useMemo(()=>Pd(e),[e]),N=(0,O5.cm)(x),k=(0,Lh.E_)(x),I=T&&(N||k),A=f.useRef(null),O=(0,Lx.kH)(e.name),L=(0,AE.NG)({text:O,textRef:A}),P=f.useRef(null),D=(0,AE.NG)({text:t??"",textRef:P}),R=(null==h?void 0:h.type)===Pi.K.ASSETS_PANEL?null==(p=null==h?void 0:h.data)?void 0:p.component:void 0,M=(null==R?void 0:R.node_id)===e.node_id,F=i===LZ.Bk.List,B=F?"list-no-padding":"grid",U=!!C.assetsPanelSearch.query,H=(0,Pl.F)(e,Pi.K.ASSETS_PANEL,s,o),G=(0,Pa.n)(e),V=(0,v.ZC)(G),K=!c;f.useEffect(()=>{G&&!V&&g(nq.jD())},[G,g,V]);let W=e.isLocal&&(0,aR.PN)()?(0,Pn.eT)(e.node_id,E).join("-"):e.node_id,z="Local components"===o||"Local private components"===o||e.isLocal,{handleClick:j,handleDoubleClick:J}=function(e,t){let n=(0,af.q5)(),a=f.useRef(null),{searchSessionId:l}=(0,eV.Gq)(),r=f.useCallback(a=>{Z.az.trackDefinedEvent("assets_panel.component_clicked",{isDoubleClick:a,isLocalComponent:t,assetKey:(0,Lo.V)(e),fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0,searchSessionId:l??void 0,assetsPanelVersion:2})},[e,t,null==n?void 0:n.key,null==n?void 0:n.parentOrgId,null==n?void 0:n.teamId,l]);return{handleClick:f.useCallback(()=>{a.current||(a.current=setTimeout(()=>{r(!1),a.current=null},500))},[r]),handleDoubleClick:f.useCallback(()=>{a.current&&(clearTimeout(a.current),a.current=null),r(!0)},[r])}}(e,z??!1),Y=l!==Po.rp.SMALL&&!F,X=!F&&(0,y.kc)().api_asset_search_with_scores,q=(0,LN.Y)(e),Q=F?a:a-2,$=F?r:r-2,ee=f.useMemo(()=>d?void 0:{sourceForTracking:n,clickToInsert:!1,afterSuccessfulInsert:by.$z,sectionNameForTracking:o},[d,o,n]),et=z?f.createElement(Pr.MT,{item:e,height:Q,width:$,draggable:ee,onContextMenu:u?void 0:H,shouldHideTooltip:K||M||G,isFilePublished:b,recordingNodePath:W,isSearch:U,useBaseTile:!0,hideNameOverlay:Y,numVariants:q,displayType:B,sectionPosition:s,shouldUseDescriptionTooltip:!0,showTooltipImmediately:!1,fileName:L||D?t:void 0,alwaysShowBorder:!0}):f.createElement(Pr.lX,{item:e,showName:!0,height:Q,width:$,draggable:ee,onContextMenu:u?void 0:H,shouldHideTooltip:K||M||G,recordingNodePath:W,isSearch:U,useBaseTile:!0,hideNameOverlay:Y,numVariants:q,displayType:B,sectionPosition:s,shouldUseDescriptionTooltip:!0,showTooltipImmediately:!1,fileName:L||D?t:void 0,alwaysShowBorder:!0});return f.createElement("div",{className:F?Ps.AD:Ps.iE,onClick:j,onDoubleClick:J},F?et:f.createElement("div",{className:nb()(Ps.QX,{[Ps.Gr]:G,[Ps.HR]:G&&w})},et),Y&&f.createElement("div",{role:"button",className:Ps.Bm,style:{width:r}},f.createElement("span",{className:Ps.UU,ref:A},O),K&&f.createElement(a2.B,{ariaHidden:!0,className:Ps.OW,svg:Pc.A})),Y&&!!t&&f.createElement(fy.Y,{spacing:0,direction:"horizontal"},f.createElement("div",{className:nb()(Ps.Md,Ps.Rm),ref:P,style:I?{maxWidth:r-O6.J}:{width:r}},t),I&&f.createElement(O6.P,{resourceId:x,showPresetTooltip:!0,tooltipDelay:500,tooltipLocation:"below",compact:!0})),X&&f.createElement(f.Fragment,null,f.createElement("div",{className:nb()(Ps.Md,Ps.Rm),style:I?{maxWidth:r-O6.J}:{width:r}},"AI: "+(e.ai_score??"N/A")),f.createElement("div",{className:nb()(Ps.Md,Ps.Rm),style:I?{maxWidth:r-O6.J}:{width:r}},"Lex: "+(e.lexical_score??"N/A"))),K&&F&&f.createElement(a2.B,{ariaHidden:!0,className:Ps.Ki,svg:Pc.A}))}var Pm=n(10648),Pp=n(230997);let Pf="library_section_header--sectionHeaderH1--P70zQ ellipsis--ellipsis--Tjyfa",P_="library_section_header--sectionHeader3_redesign--TGISe ellipsis--ellipsis--Tjyfa",Pg="library_section_header--sectionHeaderH3--5VrMz ellipsis--ellipsis--Tjyfa",Ph=e=>"isExpandable"in e&&e.isExpandable,PE=(e,t)=>{switch(e){case Pf:return t?"library_section_header--sectionHeaderDivider--SdrS5 ellipsis--ellipsis--Tjyfa":"library_section_header--sectionHeader1_redesign--cWZaj ellipsis--ellipsis--Tjyfa";case Pg:return P_;default:return"library_section_header--sectionHeader3_normal--bf4ra"}},Pv=e=>{let t=[];if(e&&e.length){t.push(f.createElement("div",{className:"library_section_header--sectionHeader1_sticky--mZ4QY ellipsis--ellipsis--Tjyfa",key:e[0]},e[0]+" / ","\xa0"));let n=e.slice(1).join(" / ");t.push(f.createElement("div",{className:P_,key:n},n,"\xa0"))}return t};class Py extends f.Component{componentDidUpdate(e){Ph(this.props)&&Ph(e)&&e.isExpanded!==this.props.isExpanded&&"h1"===this.props.size&&(0,n2.YQ)({id:"library_section_header_toggled"})}render(){let e="h1"===this.props.size?Pf:Pg,t=Ph(this.props)?"library_section_header--sectionHeaderExpandable--hHEFq":"",n=PE(e,this.props.shouldShowDividerLine),a=Ph(this.props)&&this.props.isFixed?"library_section_header--isFixed--eVHns":"";return f.createElement(Y.fu,{name:"Section Header",properties:{title:this.props.title,isExpanded:!!Ph(this.props)&&this.props.isExpanded},trackingTargets:Pm.K.RCS},f.createElement("div",{className:nb()(n,e,t,a)},Ph(this.props)&&f.createElement(a2.B,{className:this.props.isExpanded?"library_section_header--expandCaretOpen--083vU library_section_header--expandCaret--20Tzs object_row--expandCaret--f1MjE object_row--indent--uZlad":"library_section_header--expandCaret--20Tzs object_row--expandCaret--f1MjE object_row--indent--uZlad",svg:this.props.isExpanded?Cz.A:Ol.A}),Ph(this.props)&&this.props.breadcrumbPath&&!this.props.isFixed&&f.createElement("div",{className:"library_section_header--breadcrumbPath--Jevbg"},this.props.breadcrumbPath,"\xa0"),Ph(this.props)&&this.props.isFixed&&this.props.stickyHeadertokens&&this.props.stickyHeadertokens.length?Pv(this.props.stickyHeadertokens):f.createElement("div",{className:n},this.props.title),(0,O3.vR)(this.props.subscribedFileKey)&&f.createElement("div",{className:a8.cx.flex.alignCenter.justifyCenter.ml4.$},f.createElement(O4.KP,{fileKey:this.props.subscribedFileKey})),(0,y.kc)().dse_preset_libraries&&(0,Lh.TX)(this.props.subscribedFileKey)&&f.createElement("div",{className:a8.cx.flex.alignCenter.justifyCenter.ml4.$},f.createElement(O7.S,{hubFileId:this.props.subscribedFileKey,showTooltip:!0,redirectToHubFile:!0}))))}}Py.H1_HEIGHT=(0,lf.hG)(Pp.BS),Py.H3_HEIGHT=(0,lf.hG)(Pp.T);class Pb extends f.Component{render(){return f.createElement("div",{className:12===this.props.size?"library_section_header--spacer12--0h1Dt":"library_section_header--spacer16--iPkYc"})}}Pb.HEIGHT=(0,lf.hG)(Pp.FX);let PC="component_sidebar--stickyHeaderSpacer--SaKsM",Pw=(0,lf.hG)(Pp.FX),PT=(0,lf.hG)(Pp.FX)/2,Px=(0,lf.hG)(Pp.Nz),PN=(0,lf.hG)(Pp.cP),PS=(0,vc.fv)();function Pk({parent:e,outputElements:t,libraryNameByResourceId:n,items:a,keyPrefix:l,sharedOptions:r,sectionNameForTracking:i}){let o=(0,Po.PI)(a,!0),s={layout:o,...r},c=(0,Po.A5)(s),{width:d,height:u}=(0,Po.rj)(s,c),m=r.isList?1:0,p=r.isList?0:Px,_=r.isList||!n?0:PN,g=u+(r.isList?PT:Pw)+p+_+m+(r.isList?0:-2);(0,y.kc)().api_asset_search_with_scores&&(g+=2*(0,lf.hG)(Pp.uY));let h=d+(r.isList?PT:Pw)+(r.isList?0:-2),E=0,v=Pt.oz.getNextRenderedElementTop(t)+PT;for(let[s,m]of a.entries()){let a=r.isList?v+E*g:v+Math.floor(E/c)*g,p=r.isList?0:3+E%c*h,_=(0,Lo.V)(m),y=PS(m);t.push({parent:e,type:Pt.zq.TILE,top:a,left:p,height:g,key:`${l}:${_}`,element:function({item:e,fileName:t,sourceForTracking:n,sectionNameForTracking:a,thumbLayout:l,thumbHeight:r,thumbWidth:i,isList:o,sectionPosition:s}){return f.createElement(Pu,{asset:e,fileName:t,sourceForTracking:n,sectionNameForTracking:a,thumbLayout:l,thumbHeight:r,thumbWidth:i,viewMode:o?LZ.Bk.List:LZ.Bk.Grid,sectionPosition:s})}({containerWidth:r.containerWidth,fileName:y?null==n?void 0:n[y]:void 0,sourceForTracking:r.sourceForTracking,sectionNameForTracking:i,thumbLayout:o,thumbHeight:u,thumbWidth:d,isList:r.isList,item:m,isExpanded:r.isExpanded,sectionPosition:s}),item:m,numCols:c,containerWidth:r.containerWidth,sectionNameForTracking:i,sectionPosition:s}),E+=1}}let PI=(e,t,n)=>{let a=L9(n.keyPrefix),l=Pt.oz.getNextRenderedElementTop(t),r={parent:e,type:Pt.zq.ROW,top:l,height:"h1"==n.size?Py.H1_HEIGHT:Py.H3_HEIGHT,key:a,element:f.createElement(Py,{size:n.size,isExpandable:!0,isExpanded:n.isExpanded,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,isFixed:!1,subscribedFileKey:n.subscribedFileKey}),isSticky:!0,isFixed:!1,children:[],isExpandable:!0,isExpanded:n.isExpanded,getExpandableElement:e=>f.createElement(Py,{size:n.size,isExpandable:!0,isExpanded:e,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,subscribedFileKey:n.subscribedFileKey}),sectionNameForTracking:n.sectionNameForTracking,rowType:n.rowType,fixedElement:f.createElement(f.Fragment,null,f.createElement("div",{className:PC}),f.createElement(Py,{size:"h1",isExpandable:!0,isExpanded:n.isExpanded,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,isFixed:!0,subscribedFileKey:n.subscribedFileKey}))};return t.push(r),r};function PA({sectionHeaderText:e,isFixed:t}){return f.createElement("div",{className:nb()("component_sidebar--sectionHeader--v0N1h",t?"component_sidebar--isFixed--orinE":"")},f.createElement("div",{className:"component_sidebar--sectionHeaderText--hDKu5"},e))}function PO(e,t,n){let a=Pt.oz.getNextRenderedElementTop(e),l={key:`${n.keyPrefix}:sectionHeader:${t}`,isSticky:!0,parent:null,isFixed:!1,type:Pt.zq.ROW,top:a,height:40,element:f.createElement(PA,{sectionHeaderText:t,isFixed:!1}),fixedElement:f.createElement(f.Fragment,null,f.createElement("div",{className:PC}),f.createElement(PA,{sectionHeaderText:t,isFixed:!0})),isStaticRow:!0,sectionNameForTracking:n.sectionNameForTracking};return e.push(l),l}function PL({outputElements:e,results:t,moreResults:n,showMoreResults:a,keyPrefix:l,overallOptions:r,libraryNameByResourceId:i,toggleShowMoreResults:o,parent:s}){if(t.length>0&&Pk({parent:s??null,outputElements:e,items:t,keyPrefix:`${l}:results`,sharedOptions:r,libraryNameByResourceId:i,sectionNameForTracking:"Primary search results"}),n.length>0){let t=Pt.oz.getNextRenderedElementTop(e);e.push({parent:s??null,type:Pt.zq.ROW,top:t,height:40,key:`${l}:moreResultsLink`,element:f.createElement("div",{className:"component_sidebar--text--g20jk"},a&&(0,eN.tx)("design_systems.assets_panel.showing_results_from_all_libraries"),!a&&f.createElement("a",{className:"component_sidebar--link--I-ane blue_link--blueLink--9rlnd",onClick:o},(0,eN.tx)("design_systems.assets_panel.more_results_in_all_libraries",{results:n.length}))),sectionNameForTracking:"More search results"}),a&&Pk({parent:null,outputElements:e,items:n,keyPrefix:`${l}:moreResults`,sharedOptions:r,libraryNameByResourceId:i,sectionNameForTracking:"More search results"})}}function PP({prevParent:e,outputElements:t,inputSubtree:n,inputParentTree:a,keyPrefix:l,sharedOptions:r,sectionNameForTracking:i,hideTitle:o}){let s=L6(n,l),c=!o&&function(e,t){switch(e.type){case"FILE":return""!==e.name;case"PAGE":return t.subtrees.length>1;case"NAME_GROUP":return!e.skipElementsInRendering;case"ASSET_TYPE":return e.items.length>0||e.subtrees.length>0}}(n,a),d=function(e,t,n,a,l,r){if(!e)return null;let i=L6(a,l),o=L9(i),s=r.isExpanded(o,(0,Pe.pR)(a.type,a.sectionNameForTracking));switch(a.type){case"FILE":return PI(null,n,{keyPrefix:i,size:"h1",title:a.name,isExpanded:s,stickyHeaderTokens:a.stickyHeaderTokens?a.stickyHeaderTokens:void 0,subscribedFileKey:a.subscribedFileKey,sectionNameForTracking:a.sectionNameForTracking,rowType:Pt.l$.LIBRARY});case"PAGE":return PI(t,n,{keyPrefix:i,title:a.name,size:"h3",isExpanded:s,stickyHeaderTokens:a.stickyHeaderTokens?a.stickyHeaderTokens:void 0,sectionNameForTracking:a.sectionNameForTracking,rowType:Pt.l$.PAGE});case"NAME_GROUP":return PI(t,n,{keyPrefix:i,size:"h3",title:a.flattenedPath?a.flattenedPath:a.name,isExpanded:s,breadcrumbPath:a.breadcrumbPath?a.breadcrumbPath:void 0,stickyHeaderTokens:a.stickyHeaderTokens?a.stickyHeaderTokens:void 0,sectionNameForTracking:a.sectionNameForTracking,rowType:Pt.l$.NAME_GROUP});case"ASSET_TYPE":let c=PD(a.sectionNameForTracking);return PI(t,n,{keyPrefix:i,size:"h3",title:a.name,isExpanded:!0,sectionNameForTracking:a.sectionNameForTracking,rowType:c})}}(c,e,t,n,l,r),u=d?d.children:t,m=d||e;if((0,y.kc)().dse_templates_proto){let e=n.subtrees.find(L5.Qe);null!=e&&PP({prevParent:null,outputElements:u,inputSubtree:e,inputParentTree:n,keyPrefix:l,sharedOptions:r,sectionNameForTracking:e.sectionNameForTracking})}switch(n.type){case"PAGE":case"ASSET_TYPE":case"FILE":Pk({parent:m,outputElements:u,items:n.items,keyPrefix:s,sharedOptions:r,sectionNameForTracking:i});break;case"NAME_GROUP":n.skipElementsInRendering||Pk({parent:m,outputElements:u,items:n.items,keyPrefix:s,sharedOptions:r,sectionNameForTracking:i});break;default:(0,nm.xb)(n.type)}for(let e of n.subtrees)(0,y.kc)().dse_templates_proto&&(0,L5.Qe)(e)||PP({prevParent:m,outputElements:u,inputSubtree:e,inputParentTree:n,keyPrefix:s,sharedOptions:r,sectionNameForTracking:i});"FILE"===n.type&&c&&function(e,t,n){let a=Pt.oz.getNextRenderedElementTop(t);t.push({parent:e,type:Pt.zq.SEPARATOR,top:a,height:n.size,key:`${n.keyPrefix}:spacer${n.size}`,element:f.createElement(Pb,{size:n.size})})}(m,u,{keyPrefix:s,size:16})}let PD=e=>{let t=null==e?void 0:e.toLowerCase().includes("local");return(null==e?void 0:e.toLowerCase().includes("templates"))?t?Pt.l$.LOCAL_TEMPLATES:Pt.l$.TEMPLATES:t?Pt.l$.LOCAL_COMPONENTS:Pt.l$.COMPONENTS},PR="root";var PM=n(545816);let PF=[];function PB(e,t,n){let a=[];return e&&PP({prevParent:null,outputElements:a,inputSubtree:e,inputParentTree:t,keyPrefix:PR,sharedOptions:n,sectionNameForTracking:e.sectionNameForTracking,hideTitle:!0}),a}let PU="library-section-asset-type";function PH(e){switch(e){case"all":return{type:OK.I.ALL};case"recent":return{type:OK.I.RECENT};case"local":return{type:OK.I.LOCAL};default:return{type:OK.I.FILE,fileKey:e}}}var PG=n(56063),PV=n(639318),PK=n(705129);function PW(e){let t=(0,_.d4)(e=>e.loadingState),n=(0,_.d4)(e=>e.fileVersion),a=(0,_.d4)(e=>e.openFile),l=(0,eF.k)(),r=a&&null!=n&&(0,PK.yD)(a.key)||null,i=!(null!=r&&(0,mV.D2)(t,r));f.useEffect(()=>{i||function(e,t,n){if(Pz)return;let{numLibraries:a,numComponents:l,numComponentsWithLimit:r}=e();(0,Z.sx)("Assets Panel Initial Load",{numLibraries:a,numComponents:l,numComponentsWithLimit:r,assetsPanelVersion:t,fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0}),Pz=!0}(e,l,a)},[e,i,a,l])}let Pz=!1;function Pj(){let e=(0,_.wA)(),t=(0,_.d4)(e=>e.openFile),n=(0,_.d4)(e=>{var t;return null==(t=e.user)?void 0:t.id});if(!t)return null;let a=t.teamId,l=f.createElement(a1.Us,{className:"library_upsell_banner--blueLink--bt6GX blue_link--blueLink--9rlnd",onClick:function(){(0,Z.sx)("library_upsell_badge_clicked",{fileKey:null==t?void 0:t.key,teamId:a,userId:n}),e((0,ty.to)({type:sP.V,data:{upsellSource:sM.b.LIBRARY_UPSELL_BADGE,teamId:a??void 0,openCheckoutInNewTab:!0}}))},trackingProperties:{trackingDescriptor:ar.c.UPGRADE_TO_PROFESSIONAL},trusted:!0,role:"button"},(0,eN.tx)("design_systems.assets_panel.library_upsell_upgrade"));return f.createElement(l7.tH,{boundaryKey:"LibraryUpsellBanner",fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:o5.e.MONETIZATION_UPGRADES}},f.createElement(Y.fu,{name:"library upsell badge",properties:{fileKey:null==t?void 0:t.key,teamId:null==t?void 0:t.teamId}},f.createElement("div",{className:"library_upsell_banner--bannerBackground--WlTVY"},f.createElement("div",{className:"library_upsell_banner--bannerContainer--SqSHa"},f.createElement(tN.Jn,{className:"library_upsell_banner--closeButton--U1sPN",onClick:function(){(0,Z.sx)("library_upsell_badge_dismissed",{fileKey:null==t?void 0:t.key,teamId:a,userId:n}),e(j.b({has_dismissed_component_sidebar_library_upsell_banner:!0}))}}),f.createElement("div",{className:"library_upsell_banner--bannerContent--SUcpT"},f.createElement("div",{className:"library_upsell_banner--bannerHeader--Lbg8d"},f.createElement(ry.U,{svg:Oq.A,className:"library_upsell_banner--bannerIcon--n5IGN"},f.createElement(Oj.l,null))),f.createElement("p",{className:"library_upsell_banner--bannerTitle--AN3mP"},(0,eN.tx)("design_systems.assets_panel.library_upsell_header")),f.createElement("p",{className:"library_upsell_banner--bannerBody--GSg3l"},(0,eN.tx)("design_systems.assets_panel.library_upsell_body",{upgradeToProfessionalPlanLink:l})))))))}let PJ=(0,lf.hG)(lw.gNA),PY={improved:{search:{path:[0,0],column:0},libraryModal:{path:[0,0],column:1},dropdown:{path:[0,1],column:0},viewToggle:{path:[0,1],column:1}}};function PX({initialScrollTop:e,onScroll:t,viewMode:n,toggleViewMode:a,containerSizingOptions:l,recordingKey:r}){return f.createElement(OI.dP,{recordingKey:"localComponents",className:"component_sidebar--container--Wxtr4",dataTestId:"component-sidebar","data-does-not-dismiss-component-flyout":!0},f.createElement(Pq,{initialScrollTop:e,onScroll:t,viewMode:n,toggleViewMode:a,containerSizingOptions:l,recordingKey:r}))}function Pq({initialScrollTop:e,onScroll:t,viewMode:n,toggleViewMode:a,containerSizingOptions:l,recordingKey:r}){var i;let o=(0,_.wA)(),s=(0,_.d4)(e=>e.dropdownShown),c=(0,_.d4)(Iy.e_),d=(0,_.d4)(OD.hK),u=(0,_.d4)(bi.dK),m=(0,_.d4)(bi.Xt),p=(0,_.d4)(OR.P),g=(0,_.d4)(e=>e.userFlags.has_dismissed_component_sidebar_library_upsell_banner),h=(0,_.d4)(e=>e.isFreeUser),E=(0,_.d4)(e=>e.user),v=(0,Ij.Av)(),b=(0,_.d4)(e=>e.openFile),C=(0,mK.usePermissionsState)(),w=(0,L4.D)(),{query:T,searchSessionId:x}=(0,eV.Gq)();(0,PG.y)(),OP();let k=(0,OI.q_)();f.useEffect(()=>{o(OA.cr({shouldSearchDefaultLibraries:!1}))},[o]);let{assetType:I,libraryNameByFileKey:O,onSetAssetType:L,scrollContent:P,validAssetTypeOptions:D}=function({containerSizingOptions:e,viewMode:t}){var n;let a=function(){let e=(0,_.d4)(Iy.e_),t=(0,_.d4)(af.tB),n=(0,_.d4)(L1.t_),a=(0,_.d4)(e=>e.hubFiles),l=(0,_.d4)(Iy.MH),r=(0,_.d4)(Iy.dM),i=(0,_.d4)(Iy.h3),o=(0,_.d4)(OR.P),s=(0,OL.Ck)(),c=(0,O5.Fl)(),d=(null==t?void 0:t.teamId)?o[t.teamId]:null,u=!!d&&(0,cw.w5)(d),m=(0,L0.T9)(null==t?void 0:t.project),p=f.useMemo(()=>(0,LZ.Sg)(l,r),[l,r]),g=f.useMemo(()=>(0,LZ.ND)(i),[i]),h=f.useMemo(()=>(0,LZ.ff)(e,t,n,m),[e,t,n,m]),E=(0,L2.Lm)(),v=f.useMemo(()=>(0,LZ.sJ)(E,n,t,e,m),[n,m,e,t,E]),y=f.useMemo(()=>s()?(0,LZ.o6)(e,t,a,m):null,[s,e,t,a,m]);return(0,L$.jP)(y),f.useMemo(()=>(0,L5.Nx)({localLibraryItemsInfo:p,localTemplatesInfo:g,subscribedItemsInfo:h,subscribedTemplatesInfo:v,subscribedCommunityItemsInfo:y,defaultSubscribedItemsInfo:(0,LZ.Mt)(),canPublish:u,currentFileKeyForPublish:t?(0,Cf.Kz)(t)?t.sourceFileKey:t.key:null,approvedLibraryKeysByResourceType:c}),[p,g,h,v,y,u,t,c])}(),{productComponents:l,templates:r}=(0,eC.g5)(EI.$A.Design),i=(0,_.d4)(OG.q5),o=(0,L4.D)(),s=f.useMemo(()=>({productComponents:l,templates:(0,y.u4)("dse_editor_templates_v1",r,[])}),[l,r]),c=f.useMemo(()=>i?OK.v:function(e,t,n,a=[]){let l=!!((0,y.kc)().dse_editor_templates_v1&&n&&(n.items.length>0||t.subtrees.length>0));return{[OK.I.ALL]:!0,[OK.I.RECENT]:!!(e.length+(0,y.u4)("dse_editor_templates_v1",a.length,0)),[OK.I.LOCAL]:t.items.length>0||t.subtrees.length>0||l,[OK.I.FILE]:!1}}(l,a.localSubtree,a.localTemplateSubtree,r),[i,l,r,a.localSubtree,a.localTemplateSubtree]),d=(n=a.subscribedFileSubtrees,f.useMemo(()=>{let e={};for(let[t,a]of Object.entries(n))a&&(e[t]=a.name);return e},[n])),{assetType:u,onSetAssetType:m}=function(e,t){let[n,a]=f.useState(!1),[l,r]=f.useState({type:OK.I.ALL}),i=(0,_.wA)(),o=(0,_.d4)(OG.q5),s=(0,af.q5)();f.useEffect(()=>{n||"loading"===e||(r(LQ(function(){if(A.x4)try{let e=A.x4.getItem(PU);if(!e)return;return PH(e)}catch(e){return}}(),e,t)),a(!0))},[n,e,t]);let c=f.useCallback(e=>{var t;(!o||(0,OG.eu)(e))&&(r(e),null==(t=A.x4)||t.setItem(PU,function(e){switch(e.type){case OK.I.ALL:return"all";case OK.I.RECENT:return"recent";case OK.I.LOCAL:return"local";case OK.I.FILE:return e.fileKey}}(e)),o&&i(OA.gP({searchOptions:e})),Z.az.trackDefinedEvent("assets_panel.asset_type_changed",{assetType:e.type,isSearching:!!o,fileKey:e.type===OK.I.FILE?e.fileKey:void 0,openFileKey:null==s?void 0:s.key,fileTeamId:(null==s?void 0:s.teamId)??void 0,fileOrgId:(null==s?void 0:s.parentOrgId)??void 0,assetsPanelVersion:2}))},[o,i,null==s?void 0:s.key,null==s?void 0:s.parentOrgId,null==s?void 0:s.teamId]),d=f.useCallback(e=>e.key===PU&&null!=e.newValue,[]),u=f.useCallback(n=>{if(!n)return;let a=PH(n);"loading"!==e&&r(LQ(a,e,t))},[e,t]);return(0,A.tl)({onSync:u,shouldSyncValue:d}),{assetType:l,onSetAssetType:c}}(o?"loading":c,d),p=function({assetType:e,containerSizingOptions:t,recentlyUsedItems:n,treeWithSubtrees:a,viewMode:l}){let{library:r}=(0,N.R)(e=>({library:e.library})),i=(0,PM.O)(),[o,s]=f.useState(!1),c=l===LZ.Bk.List,d=f.useMemo(()=>({isList:c,isExpanded:Pe.xO,sourceForTracking:LZ.mZ,...t}),[t,c]),u=f.useMemo(()=>{let e,t;let{query:n,normalizedSearchResults:a,unsubscribedSearchResults:l}=r.assetsPanelSearch;if(!n)return PF;(0,y.kc)().dse_editor_templates_v1?[t,e]=(0,OG._2)(a):e=a;let c=e,u=c.length+l.length;if(0===u&&(!t||0===t.length))return PF;!o&&0===c.length&&l.length>0&&s(!0);let m=[];if(t&&t.length>0&&(0,y.kc)().dse_editor_templates_v1){let e=PO(m,(0,eN.t)("design_systems.assets_panel.templates"),{keyPrefix:L7(PR),sectionNameForTracking:"Templates search results"});PL({outputElements:m,results:t,moreResults:[],showMoreResults:!1,keyPrefix:L7(PR),overallOptions:d,libraryNameByResourceId:i,toggleShowMoreResults:()=>{},parent:e})}if(u>0){let e=(0,y.kc)().dse_editor_templates_v1?PO(m,(0,eN.t)("design_systems.assets_panel.components"),{keyPrefix:`${PR}:${L3}`,sectionNameForTracking:"Primary search results"}):null;PL({outputElements:m,results:c,moreResults:l,showMoreResults:o,keyPrefix:`${PR}:${L3}`+((0,y.kc)().dse_editor_templates_v1?"1":""),overallOptions:d,libraryNameByResourceId:i,toggleShowMoreResults:()=>{s(e=>!e)},parent:e})}return m},[i,r.assetsPanelSearch,d,o]),{productComponents:m,templates:p}=n,_=f.useMemo(()=>{if(!m.length&&!p.length)return PF;let e=[];return(0,y.kc)().dse_editor_templates_v1?(p.length>0&&Pk({parent:PO(e,(0,eN.t)("design_systems.assets_panel.templates"),{keyPrefix:L8(PR+":templates"),sectionNameForTracking:"Recently used templates"}),outputElements:e,items:p,keyPrefix:L8(PR+":templates"),sharedOptions:d}),m.length>0&&Pk({parent:PO(e,(0,eN.t)("design_systems.assets_panel.components"),{keyPrefix:L8(PR+":components"),sectionNameForTracking:"Recently used"}),outputElements:e,items:m,keyPrefix:L8(PR+":components"),sharedOptions:d})):Pk({parent:null,outputElements:e,items:m,keyPrefix:L8(PR),sharedOptions:d}),e},[m,p,d]),g=f.useMemo(()=>(0,y.kc)().dse_editor_templates_v1?function(e,t,n){let a=[];return e.forEach(e=>{e&&PP({prevParent:null,outputElements:a,inputSubtree:e,inputParentTree:t,keyPrefix:PR,sharedOptions:n,sectionNameForTracking:e.sectionNameForTracking,hideTitle:!1})}),a}([a.localTemplateSubtree,a.localSubtree],a.tree,d):PB(a.localSubtree,a.tree,d),[d,a.localSubtree,a.localTemplateSubtree,a.tree]),h=f.useMemo(()=>PB(e.type===OK.I.FILE?a.subscribedFileSubtrees[e.fileKey]:void 0,a.tree,d),[e,d,a.subscribedFileSubtrees,a.tree]),E=f.useMemo(()=>{let e=[];return!function(e,t,n,a){if((0,y.kc)().dse_templates_proto){let l=t.subtrees.find(L5.Qe);null!=l&&PP({prevParent:null,outputElements:e,inputSubtree:l,inputParentTree:t,keyPrefix:n,sharedOptions:a,sectionNameForTracking:l.sectionNameForTracking})}for(let l of(t.items.length>0&&Pk({parent:null,outputElements:e,items:t.items,keyPrefix:n,sharedOptions:a}),t.subtrees))(0,y.kc)().dse_templates_proto&&(0,L5.Qe)(l)||PP({prevParent:null,outputElements:e,inputSubtree:l,inputParentTree:t,keyPrefix:n,sharedOptions:a,sectionNameForTracking:l.sectionNameForTracking})}(e,a.tree,PR,d),e},[d,a.tree]);return r.assetsPanelSearch.query?u:e.type===OK.I.RECENT?_:e.type===OK.I.LOCAL?g:e.type===OK.I.FILE?h:E}({assetType:u,containerSizingOptions:e,recentlyUsedItems:s,treeWithSubtrees:a,viewMode:t});return{assetType:u,libraryNameByFileKey:d,onSetAssetType:m,scrollContent:p,validAssetTypeOptions:c}}({viewMode:n,containerSizingOptions:l}),[R,M]=(0,S.fp)(OU.Cl);(0,np.h)(()=>{R&&(L({type:OK.I.FILE,fileKey:R}),M(null))});let F=(0,ax.LR)(),B=(0,_.d4)(e=>e.universalInsertModal.showing),U=f.useCallback(()=>{B&&F()},[F,B]),H=f.useCallback((e,t,n)=>{U(),o((0,ty.to)({type:Lq,data:{asset:e,searchSessionId:x??void 0,query:T??void 0,sectionPosition:t,sectionNameForTracking:n,assetTypeDropdownSelection:null==I?void 0:I.type,containerWidth:l.containerWidth,onGetKeyboardNavigationItemById:k}}))},[I,l.containerWidth,o,U,k,x,T]),G=f.useMemo(()=>({onOpenFlyout:H,assetTypeDropdownSelection:null==I?void 0:I.type}),[I,H]);!function({allElements:e}){PW(f.useCallback(()=>{let t=e.length,n=0,a=0;for(let t of e)if(!t.key.includes("localComponents")){let e=function e(t){if(t.type===Pt.zq.TILE)return 1;if(!(0,Pt.We)(t)||!t.isExpanded)return 0;{let n=0;for(let a of t.children)n+=e(a);return n}}(t);n+=e,a+=Math.min(e,20)}return{numLibraries:t,numComponents:n,numComponentsWithLimit:a}},[e]))}({allElements:P});let V=n===LZ.Bk.List,K=c.assetsPanelSearch,W=0===P.length,z=(null==s?void 0:s.type)===Pi.K.ASSETS_PANEL,j=z&&(null==(i=null==s?void 0:s.data)?void 0:i.component)||null,J=(0,PV.K)(!0),Y=f.useCallback(()=>{z||(0,aT.wr)()},[z]),[X,q]=(0,A.Vc)("has-auto-expanded-component-libraries-for-nux",!1),Q=(0,OL.Ck)(),$=f.useRef(null);f.useEffect(()=>{let e=$.current;e&&0!==P.length&&Q()&&!X&&e.expandAllComponentLibraries(308)>0&&q(!0)},[X,Q,P.length,q]);let ee=f.useCallback(()=>{let e=!!c.assetsPanelSearch.query,t=0===P.length;return f.createElement("div",null,e&&t&&f.createElement(OB.Wq,null),!e&&t&&f.createElement(OB.od,null))},[c.assetsPanelSearch,P.length]),et=w||K.isLoading,en=(0,dt.jO)(),ea=(null==b?void 0:b.teamId)?p[b.teamId]:null,el=!g&&h&&(!ea||!(0,cw.w5)(ea)&&(0,mK.canEditTeam)(ea.id,C))&&(null==b?void 0:b.canEdit)&&en&&Object.keys(c.local.components).length>0&&(0,dD.Hz)(null==E?void 0:E.id),er=function(e,t){let n=f.useMemo(()=>e.find(e=>e.key.includes("subscribedCommunityComponents")&&e.key.includes("stickySection")),[e]);return f.useCallback(()=>{var e;n&&(null==(e=t.current)||e.scrollToElement(n.key))},[n,t])}(P,$);return f.createElement(Ll.U.Provider,{value:G},f.createElement(PZ,{assetType:I,componentsEmpty:W,isList:V,isSearching:!!K.query,isComponentSidebarInitialLoading:w,libraryNameByFileKey:O,onSetAssetType:L,onToggleViewMode:a,recordingKey:r,validAssetTypeOptions:D}),et?f.createElement("div",{className:"component_sidebar--loadingSpinnerContainerWithDropdown--9b8ZI"},f.createElement(re.kt,null)):f.createElement("div",{className:"component_sidebar--assetPanelSection--mYuo2"},f.createElement(Ok.O,{ref:$,scrollContent:P,recordingKey:"componentsListContainer",isList:V,getViewportHeight:e=>e-2*v,topOffset:PJ,isTileSelected:e=>!!e.item.isLocal&&m&&(0,OM.sp)(u,m,e.item.node_id),onMouseUp:Y,renderEmptyState:ee,width:l.containerWidth,className:"component_sidebar--scrollContainerFullHeight---DTUM component_sidebar--_scrollContainerBase--1rakD",initialScrollTop:e,onScroll:t,enableKeyboardNavigation:!0,shouldRefocusAfterKeyboardInsert:I.type===OK.I.RECENT,fileKey:null==b?void 0:b.key,teamId:(null==b?void 0:b.teamId)??void 0,orgId:(null==b?void 0:b.parentOrgId)??void 0}),!!j&&f.createElement(Pi.h,{selectedView:d,dropdownShown:s,defaultFileKeys:c.defaultPublished.fileKeys,onJumpToLocalComponent:J,onOpenFlyout:H,usePortal:!0}),el&&f.createElement(Pj,null),f.createElement(OF.Mw,{width:l.containerWidth,scrollToPreset:er})))}function PZ({assetType:e,componentsEmpty:t,isList:n,isSearching:a,isComponentSidebarInitialLoading:l,libraryNameByFileKey:r,onSetAssetType:i,onToggleViewMode:o,validAssetTypeOptions:s,recordingKey:c}){let d=PY.improved,{setKeyboardNavigationElement:u}=(0,OI.M3)({path:d.libraryModal.path,column:d.libraryModal.column}),{setKeyboardNavigationElement:m}=(0,OI.M3)({path:PY.improved.dropdown.path,column:PY.improved.dropdown.column}),{setKeyboardNavigationElement:p}=(0,OI.M3)({path:d.viewToggle.path,column:d.viewToggle.column});return f.createElement("div",null,f.createElement("div",{className:"component_sidebar--searchHeader--yTD7D component_sidebar--_header--nHN39"},f.createElement(OW,{searchOptions:{type:e,onSetAssetType:i},keyboardNavigationPath:d.search.path,keyboardNavigationColumn:d.search.column}),f.createElement(OQ,{entrypoint:OH.r6.ASSETS_PANEL_BUTTON,onSetKeyboardNavigationElement:u,recordingKey:c})),l||t&&!a?null:f.createElement("div",{className:"component_sidebar--pageHeader--m9FWc component_sidebar--_header--nHN39"},f.createElement(O9,{assetType:e,libraryNameByFileKey:r,onSetAssetType:i,onSetKeyboardNavigationElement:m,validAssetTypeOptions:s}),f.createElement(La,{isList:n,onToggleViewMode:o,onSetKeyboardNavigationElement:p,recordingKey:c})))}var PQ=n(44160),P$=n(267460),P0=n(656147),P1=n(447402);let P2="memory_warning--memoryUsageContainer--CWdMy";var P5=n(450147),P4=n(967063),P3=n(586599),P6=n(890666),P7=n(612325);function P8(e){let t,n,a,l,r;let i=(0,_.d4)(e=>{var t;return!(null==(t=e.openFile)?void 0:t.canEdit)}),o=ei.Ez5.uiState().isRecovery.getCopy(),s=(0,_.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===ei.m1T.HISTORY&&e.versionHistory.activeId&&"current_version"!==e.versionHistory.activeId),c=e.warningLevel,d=(c===Au.Wy.WARNING?(r=(0,eN.tx)("fullscreen.pages_panel.memory_usage_try_removing_unneeded_content"),o?r=(0,eN.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_high_content"):i&&!s?r=(0,eN.tx)("fullscreen.pages_panel.memory_usage_warning_edit_access_needed"):i&&s?r=(0,eN.tx)("fullscreen.pages_panel.memory_usage_read_only_view_version_history"):!i&&s&&(r=(0,eN.tx)("fullscreen.pages_panel.memory_usage_warning_edit_view_version_history"))):c===Au.Wy.ERROR?(r=(0,eN.tx)("fullscreen.pages_panel.memory_usage_to_avoid_losing_file_access"),o?r=(0,eN.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_high_content"):i&&!s?r=(0,eN.tx)("fullscreen.pages_panel.memory_usage_error_contact_file_owner"):i&&s?r=(0,eN.tx)("fullscreen.pages_panel.memory_usage_read_only_view_version_history"):!i&&s&&(r=(0,eN.tx)("fullscreen.pages_panel.memory_usage_error_edit_view_version_history"))):c===Au.Wy.SAFE&&e.previousWarningLevelUnsafe&&(r=(0,eN.tx)("fullscreen.pages_panel.memory_usage_this_file_has_enough_memory"),o&&(r=(0,eN.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_low_content"))),r);if(c===Au.Wy.WARNING)t="memory_warning--warningMemoryContentContainerWarning--SUOy5 memory_warning--warningMemoryContentContainer--xajq3",n="memory_warning--memoryWarningContentIconWarning--7lQhY",a=o?P6.A:P4.A,l=o?(0,eN.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_high"):(0,eN.tx)("fullscreen.pages_panel.memory_usage_memory_running_low");else if(c===Au.Wy.ERROR)t="memory_warning--warningMemoryContentContainerError---AmhI memory_warning--warningMemoryContentContainer--xajq3",n="memory_warning--memoryWarningContentIconError--iWcmQ",a=o?P6.A:P7.A,l=o?(0,eN.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_high"):(0,eN.tx)("fullscreen.pages_panel.memory_usage_almost_out_of_memory");else{if(c!==Au.Wy.SAFE||!e.previousWarningLevelUnsafe)return null;t="memory_warning--warningMemoryContentContainerSafe--KUmYN memory_warning--warningMemoryContentContainer--xajq3",n="memory_warning--memoryWarningContentIconSafe--BHw5o",a=P5.A,l=o?(0,eN.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_low"):(0,eN.tx)("fullscreen.pages_panel.memory_usage_youre_good_to_go")}return f.createElement("div",{className:"memory_warning--memoryWarningContentBetaContainer--xcDgj"},f.createElement("div",{className:t},f.createElement("div",{className:"memory_warning--memoryWarningContentIconContainer--CeqsI"},f.createElement(a2.B,{className:n,svg:a})),f.createElement("div",{className:"memory_warning--memoryWarningContentBodyHeader--HRmSt"},f.createElement("div",{className:"memory_warning--memoryWarningContentHeader--b9El-"},l),f.createElement("p",null,d,(c===Au.Wy.ERROR||c===Au.Wy.WARNING)&&f.createElement(a1.Us,{className:c===Au.Wy.ERROR?"memory_warning--learnMoreLinkError--JsmPQ":"memory_warning--learnMoreLinkWarning--AHB-S",href:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files",target:"_blank",trusted:!1,trackingEventName:"memory_warning_learn_more_clicked"}," ",(0,eN.tx)("fullscreen.pages_panel.memory_usage_learn_more"))))))}function P9(e){let t=e.showSidePercentage,n=e.warningLevel&&e.warningLevel>=Au.Wy.ERROR;return f.createElement(f.Fragment,null,f.createElement("div",{className:"memory_warning--usageBarContainer--F67OB"},f.createElement(a2.B,{style:{left:`${Au.xk}%`},className:"memory_warning--icon--HcqCK",svg:P3.A}),f.createElement("div",{className:t&&n?"memory_warning--usageBarBorderDanger--3tbol memory_warning--usageBarBorder--RmhaH":"memory_warning--usageBarBorder--RmhaH"},f.createElement("div",{className:t&&n?"memory_warning--usageBarFillDanger--Ew9Tl memory_warning--usageBarFill--ximmI":"memory_warning--usageBarFill--ximmI",style:{width:`${e.memoryUsagePercent}%`}}))),t&&f.createElement("div",{className:n?"memory_warning--usageBarTextDanger--d9-gr memory_warning--usageBarText--6Z1O9":"memory_warning--usageBarText--6Z1O9"},`${Math.trunc(e.memoryUsagePercent).toString()}%`))}function De(e){let t=(0,_.wA)(),[n,a]=(0,f.useState)(!1),{warningLevel:l,memoryUsedPercent:r,usingTestMemory:i,previousWarningLevel:o,previousWarningLevelUnsafe:s,warningTracked:c,setWarningTracked:d}=(0,Au.Mk)(),u=(0,_.d4)(e=>e.mirror.appModel.topLevelMode),m=(0,_.d4)(e=>{var t;return!(null==(t=e.openFile)?void 0:t.canEdit)}),p=(0,_.d4)(e=>{var t;return null==(t=e.user)?void 0:t.id}),g=(0,_.d4)(e=>e.selectedView),h=(0,Q.XE)(g),[E,v]=(0,f.useState)(ei.Ez5.uiState()&&ei.Ez5.uiState().isRecovery.getCopy());(0,f.useEffect)(()=>{var t,n,a;l===o||c||(null==(t=ei.glU)||t.setMemoryWarningLevel(l),i)||(d(!0),n={warningEvent:"BANNER_LEVEL_CHANGE",fileKey:e.fileKey},a={warningLevel:Au.Wy[l],memoryUsedPercent:r,topLevelMode:u,isReadOnly:m},(0,P1.$w)(n,{warningOnPct:Au.xk,errorOnPct:Au.pl,...a}))},[l,o,r,i,e.fileKey,u,m,c,d]),(0,f.useEffect)(()=>{if(l===Au.Wy.SAFE){let e=()=>{"hidden"===document.visibilityState&&a(!1)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}ei.Ez5.uiState().showMemoryUsage.set(!0),ei.Ez5.uiState().showInFileMemoryPercentage.set(!0),a(!0)},[l,t,p]);let y=(0,aN.J2)(ei.Ez5.uiState().showMemoryUsage);return y||n||ei.Ez5.uiState().isRecovery.getCopy()?f.createElement(Dt,{fileKey:e.fileKey,warningLevel:l,previousWarningLevelUnsafe:s,memoryUsedPct:r,showMemoryUsage:y,dispatch:t,closeManageMemoryModal:e.closeManageMemoryModal,toggleManageMemoryModal:e.toggleManageMemoryModal,topLevelMode:u,editorType:h,recoveryMemDisplay:E,setRecoveryMemDisplay:v}):null}class Dt extends f.Component{constructor(e){super(e),this.renderManageMemoryButton=()=>{let e=(0,eN.t)("manage_memory_modal.manage_memory_button"),t=()=>{this.props.toggleManageMemoryModal()};return f.createElement("div",{className:"memory_warning--memoryWarningButtonContainer--GkcGB"},f.createElement(a1.tM,{onClick:()=>t(),trackingProperties:{buttonContext:e}},e))},this.onExitRecoveryMode=e=>{var t,n;let a={view:"fullscreen",editorType:e===eq.nT.Design?eq.nT.Design:eq.nT.Whiteboard,fileKey:this.props.fileKey,isRecoveryMode:!1};(0,Z.sx)("exit_recovery_mode",{currentAllocatedBytes:null==(t=ei.hMR)?void 0:t.getTotalUsedHeapMemory(),maxAllocatedBytes:null==(n=ei.hMR)?void 0:n.getMaxUsedHeapMemory(),fileKey:this.props.fileKey}),this.props.dispatch(nI.$T(a)),tg.Ay.reload("Memory warning panel")}}render(){let{warningLevel:e,previousWarningLevelUnsafe:t,memoryUsedPct:n,showMemoryUsage:a,editorType:l}=this.props,r=e===Au.Wy.ERROR;return f.createElement(f.Fragment,null,(a||this.props.recoveryMemDisplay)&&f.createElement("div",{className:P2,id:P2},f.createElement("div",{className:"memory_warning--memoryUsageHeader--WNS5R"},f.createElement("div",{className:"memory_warning--memoryUsageHeaderTitle--65Nsp"},(0,eN.tx)("fullscreen.pages_panel.memory_usage")),f.createElement("div",{className:"memory_warning--memoryUsageCloseIcon--6rw0p"},f.createElement(tN.Jn,{onClick:()=>{var e,t;(0,Z.sx)("manage_memory_modal_closed",{currentAllocatedBytes:null==(e=ei.hMR)?void 0:e.getTotalUsedHeapMemory(),maxAllocatedBytes:null==(t=ei.hMR)?void 0:t.getMaxUsedHeapMemory(),fileKey:this.props.fileKey}),ei.Ez5.uiState().showMemoryUsage.set(!1),ei.Ez5.uiState().showInFileMemoryPercentage.set(!1),this.props.closeManageMemoryModal(),this.props.setRecoveryMemDisplay(!1)},disabled:r,className:r?"memory_warning--memoryUsageCloseButtonError--m6jl7":""}))),f.createElement("div",{className:r?"memory_warning--memoryUsageBodyContainerError--6oxZX":"memory_warning--memoryUsageBodyContainer--NE4lJ"},f.createElement(P9,{memoryUsagePercent:n,showSidePercentage:!0,warningLevel:e})),f.createElement(P8,{warningLevel:e,previousWarningLevelUnsafe:t,topLevelMode:this.props.topLevelMode}),this.renderManageMemoryButton(),ei.Ez5.uiState().isRecovery.getCopy()&&n<Au.im&&f.createElement("div",{className:a?"memory_warning--recoveryModeBannerExitButtonContainer--7A1pw":"memory_warning--recoveryModeExitButtonContainer--Y21eB"},f.createElement(a1.vd,{onClick:()=>this.onExitRecoveryMode(l)},(0,eN.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_exit")))))}}var Dn=n(265746),Da=n(696808),Dl=n(732156);function Dr(){let e=(0,_.wA)(),[t,n]=f.useState(!1),a=(0,_.d4)(e=>!!e.modalShown),l=(0,_.d4)(e=>e.versionHistory.compareId),r=ei.AWq.getChunkChangeCount(),i=(0,fL.Z)("chunk_change_navigator_navigate"),o=(0,Dl.E)(),s=f.useCallback(e=>{ei.Egt.setSelectedNodeAndCanvas(e,!0),i((0,lb.QZ)({nodeId:e,...TD.Mf})),o(e)},[i,o]),c=f.useCallback(t=>{a||r<=1||("ArrowUp"===t.key||"ArrowLeft"===t.key||t.shiftKey&&"Tab"===t.key?s(ei.glU.navigateToNextChange(-1)):"ArrowDown"===t.key||"ArrowRight"===t.key||"Tab"===t.key?s(ei.glU.navigateToNextChange(1)):"Escape"===t.key&&(e((0,wq.Eg)()),(0,Z.sx)("Version History Compare Stop",{fromVersionId:l})))},[e,a,l,r,s]);return f.useEffect(()=>{e(Da.Q.dequeue({type:Dn._.SEE_WHATS_CHANGED}))},[e]),f.useEffect(()=>{t||0===r||(s(ei.glU.navigateToFirstVisibleOrClosestChange()),n(!0))},[t,r,s]),f.useLayoutEffect(()=>{if(!(r<=1))return document.addEventListener("keydown",c),()=>{e(eS.F.dequeue({matchType:"view_changes"})),document.removeEventListener("keydown",c)}},[e,r,c]),f.createElement(f.Fragment,null,f.createElement("div",{className:"chunk_change_navigator--chunkChangeCount--ZFnfP"},(0,eN.tx)("collaboration.feedback.change_count",{changeCount:r})),f.createElement("div",{className:"chunk_change_navigator--chunkChangeNavigator--82303"},f.createElement(iG.K0,{svg:Oo.A,onClick:e=>{e.stopPropagation(),0!==r&&s(ei.glU.navigateToNextChange(-1))},"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("collaboration.feedback.previous_change"),recordingKey:"change_stepper.previous",disabled:r<=1}),f.createElement(iG.K0,{svg:Oi.A,onClick:e=>{e.stopPropagation(),0!==r&&s(ei.glU.navigateToNextChange(1))},"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("collaboration.feedback.next_change"),recordingKey:"change_stepper.next",disabled:r<=1})))}var Di=n(819229),Do=n(721910);function Ds(e){return f.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M4 4h3v1H4V4ZM3 5V4a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v1h4a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V5Zm5 1H4v5h8V6H8Z",clipRule:"evenodd"}))}function Dc(e){return f.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},f.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"m6 12 3.5-3.5L6 5"}))}var Dd=n(981354),Du=n(776615);let Dm="32px",Dp="74px",Df="32px",D_="17px",Dg=(0,lf.jz)("5px");function Dh({height:e,width:t,keyPrefix:n,preview:a}){let l=f.useMemo(()=>a.name.split("/").pop(),[a.name]),r=f.useMemo(()=>(0,So.zR)(a,null),[a]),i=f.useMemo(()=>r?LB.F.format(r):void 0,[r]),o=f.useContext(Du.uW),s=(0,Dd.H)(),c=f.useMemo(()=>!!r&&!!(0,Du.pw)(o,r,s),[o,r,s]);return f.createElement("div",{className:"asset_panel_preview--previewThumbnailWrapper--g6zU5","data-tooltip-type":nx.Ib.TEXT,"data-tooltip":l,style:{height:e-2*Dg,width:t-2*Dg,backgroundColor:i,boxShadow:c?"inset 0px 0px 0px 0.5px var(--color-border)":void 0}},f.createElement(LU.M,{key:`${n}:${(0,Lo.V)(a)}`,className:"asset_panel_preview--previewThumbnail--kSmwd",item:a,shouldGenerateLocalThumbnail:!0,draggable:!1}))}let DE=(0,lf.jz)("58px"),Dv=(0,lf.jz)("44px"),Dy=f.forwardRef(function({keyPrefix:e,name:t,onClick:n,onContextMenu:a,previewAsset:l,recordingKey:r,disabled:i,isList:o,variant:s},c){let d=f.useMemo(()=>o?{height:Dv,width:Dv}:{height:DE,width:DE},[o]);return f.createElement("div",{className:"asset_panel_folder--folderContainer--UPeR-"},f.createElement(a7.GG,{"aria-label":t,className:"asset_panel_folder--folderButton---mVgX",onClick:n,onContextMenu:a,forwardedRef:c,recordingKey:r,disabled:i},"preview"===s?f.createElement("div",{className:"asset_panel_folder--folderPreview--0ezgC"},l?f.createElement(Dh,{keyPrefix:e,preview:l,...d}):f.createElement("div",{className:"asset_panel_folder--blankThumbnail--6v5uo",style:d})):f.createElement("div",{className:"asset_panel_folder--folderIcon--FnZdp"},f.createElement(Ds,null)),f.createElement("div",{className:"asset_panel_folder--folderName--CPNC8 ellipsis--ellipsis--Tjyfa"},t),f.createElement("div",{className:nb()("asset_panel_folder--folderNextIcon--ZYH9z",{"asset_panel_folder--adjustMargin--uitBT":"icon"===s})},f.createElement(Dc,null))))});var Db=n(718242),DC=n(623680);let Dw="asset_panel--container--v0GR6",DT=(e,t,n,a)=>({path:[...e,Math.floor(t/n)+(a?1:0)],column:t%n});function Dx({onBoth:e,onClick:t,onKeyDown:n}){return f.useCallback(a=>{null==e||e(a),0!==a.detail?null==t||t(a):null==n||n(a)},[e,t,n])}function DN({onBoth:e,onClick:t,onKeyDown:n}){return f.useCallback((...a)=>l=>{null==e||e(...a)(l),0!==l.detail?null==t||t(...a)(l):null==n||n(...a)(l)},[e,t,n])}function DS({children:e}){let t=f.useRef(null),{clickBackButton:n,focusBackButton:a,focusSearchBar:l}=DR(),r=(0,Db.sN)(),{forwardSwipe:i,onBack:o,currentView:s}=(0,DC.wV)(),c=f.useCallback(e=>{if((0,Db.Qk)(e.target)||e.keyCode!==b.Uz.BACKSPACE){if(e.altKey&&[b.Uz.KEY_1,b.Uz.KEY_2,b.Uz.KEY_3].includes(e.keyCode)&&et.Y5.isWebContextReady())return(0,Aw.f7)(e,!0)}else n(),a()},[n,a]),d=f.useCallback(e=>{s!==DC.S5.Search&&("left"===e?(r("backwardsSwipe",o(!0)),l()):"right"===e&&(r("forwardsSwipe",i()),l()))},[s,l,i,r,o]);return(0,Db.t7)(t,d),f.createElement("div",{onKeyDown:c,className:Dw,ref:t,"data-testid":"asset-panel-event-capture"},e)}let Dk=()=>{let{setKeyboardNavigationElement:e,keyboardNavigationItem:t,isFocused:n}=(0,OI.M3)({path:[Do.ON.BREADCRUMB],column:Do.Yv.BACK}),a=f.useRef(!1),l=f.useCallback(()=>{t&&!n?t.focus():a.current=!0},[t,n]);return f.useEffect(()=>{t&&a.current&&!n&&(t.focus(),a.current=!1)},[t,n]),{setBackButtonKeyboardItem:e,focusBackButton:l,clickBackButton:f.useCallback(()=>{null==t||t.simulateClick()},[t])}},DI=()=>{let e=f.useRef(null);return{focusSearchBar:f.useCallback(()=>{var t;null==(t=e.current)||t.focus(!0)},[]),inputRef:e}},DA=()=>{let[e,t]=f.useState(null),[n,a,l]=function(e){let[t,n]=f.useState(e);return[t,f.useCallback(()=>n(!0),[]),f.useCallback(()=>n(!1),[]),f.useCallback(()=>n(e=>!e),[])]}(!1),r=f.useCallback(()=>{t(null),a()},[a]);return f.useEffect(()=>{e&&n&&(e.focus({preventScroll:!0}),l())},[e,l,n]),{enqueueFocus:r,setKeyboardItem:t}};function DO(e,t){let n=f.useContext(DP),a=null==n?void 0:n.trackFirstItem;f.useEffect(()=>{e&&t&&(null==a||a(e))},[n,t,e,a])}function DL({children:e,className:t}){return f.createElement(OI.dP,{className:t,dataTestId:"component-sidebar"},f.createElement(DD,null,e))}let DP=f.createContext(null);function DD({children:e}){let{setBackButtonKeyboardItem:t,focusBackButton:n,clickBackButton:a}=Dk(),{enqueueFocus:l,setKeyboardItem:r}=DA(),{focusSearchBar:i,inputRef:o}=DI(),s=f.useMemo(()=>({clickBackButton:a,focusBackButton:n,focusFirstItem:l,focusSearchBar:i,inputRef:o,trackFirstItem:r,setBackButtonKeyboardItem:t}),[a,n,l,i,o,r,t]);return f.createElement(DP.Provider,{value:s},f.createElement(DS,null,e))}function DR(){let e=f.useContext(DP);return f.useMemo(()=>{if(!e)return{clickBackButton:()=>{},focusBackButton:()=>{},focusFirstItem:()=>{},focusSearchBar:()=>{},inputRef:{current:null},setBackButtonKeyboardItem:()=>{}};let{trackFirstItem:t,...n}=e;return n},[e])}var DM=n(799550);function DF({subtree:e,index:t,keyPrefix:n,depth:a}){let l=(0,Db.sN)(),{folderPath:r,currentView:i}=(0,DC.wV)(),[o]=(0,DM.MA)(),{previewAsset:s}=e,{navigateToFolder:c}=(0,DC.wV)(),d=f.useCallback(()=>{l("folderRow",c(e.name))},[l,c,e.name]),u=f.useMemo(()=>[Do.ON.CONTENTS,Do.lM.ASSETS+a,Do.tM.FOLDERS,t],[a,t]),{keyboardNavigationItem:m,setKeyboardNavigationElement:p}=(0,OI.M3)({path:u,id:e.key,disabled:((null==r?void 0:r.length)??0)>a}),{focusFirstItem:_,focusSearchBar:g}=DR();DO(m,0===t&&a===((null==r?void 0:r.length)??0)&&i===DC.S5.Assets);let h=Dx({onBoth:d,onKeyDown:_,onClick:g}),E=f.useMemo(()=>r&&r.length>a,[r,a]);return f.createElement(Dy,{name:e.name,onClick:h,keyPrefix:`${n}${e.name}`,previewAsset:s,recordingKey:`assetsFolder.${e.name}`,ref:p,disabled:E,variant:"list"===o?"icon":"preview"})}var DB=n(905485),DU=n(977144),DH=n(179220),DG=n(736174),DV=n(543817);let DK="asset_panel_tile--fileName--Skyao ellipsis--ellipsis--Tjyfa",DW="asset_panel_tile--secondary--6CWeS",Dz=(0,vc.fv)();function Dj({asset:e,fileName:t,sourceForTracking:n,thumbLayout:a,thumbHeight:l,thumbWidth:r,displayType:i,viewMode:o,sectionNameForTracking:s,sectionPosition:c,sectionDepth:d,hideInlineName:u,keyboardPosition:m,isFirstTile:p=!1,isExample:g=!1,keyboardPanelDepth:h=0}){let E=f.useContext(Ll.U),v=(0,_.d4)(e=>e.modalShown),y=(0,af.tS)(),{currentView:b}=(0,DC.wV)(),C=f.useMemo(()=>Dz(e),[e]),w=f.useMemo(()=>g??(0,Lu.Nz)(e,{isPreset:(0,xK.wJ)(C)}),[e,C,g]),T=(0,LO.J)(e,c,s),x=(0,Pa.n)(e),N=(0,DV.u)({canSwap:!w,openFileKey:y??"",sourceForTracking:"Asset Panel",insertAsChildOfCanvas:!0}),S=f.useCallback(()=>{(null==v?void 0:v.type)!==O8.V||x||T()},[x,null==v?void 0:v.type,T]),k=f.useCallback(()=>{(null==v?void 0:v.type)!==O8.V&&(null==E||E.onOpenFlyout(e,c,s,d))},[null==v?void 0:v.type,E,e,c,s,d]),I=f.useMemo(()=>({...m,path:[Do.ON.CONTENTS,Do.lM.ASSETS+h,...m.path]}),[m,h]),{folderPath:A}=(0,DC.wV)(),[O]=(0,DM.ye)(),L=b===DC.S5.Assets&&A&&O&&((null==A?void 0:A.length)??0)>h,{setKeyboardNavigationElement:P,keyboardNavigationItem:D}=(0,OI.M3)({...I,id:(0,Lo.V)(e),onFocus:S,disabled:L});DO(D,p&&b===DC.S5.Assets&&!L);let R=(0,DG.N)({colIndex:I.column,rowIndex:I.path[I.path.length-1],isList:!1,keyboardNavigationItem:D,onComponentInsertSwap:N,onOpenFlyout:k,item:e,sectionNameForTracking:s,sectionPosition:c,shouldRefocusAfterKeyboardInsert:b===DC.S5.Recents,sourceForTracking:LZ.mZ});return f.createElement("button",{onClick:k,className:"asset_panel_tile--focusableElementWrapper--YzHK7",ref:P,onKeyDown:R},f.createElement(DY,{asset:e,fileName:t,sourceForTracking:n,thumbLayout:a,thumbHeight:l,thumbWidth:r,displayType:i,viewMode:o,sectionNameForTracking:s,sectionPosition:c,sectionDepth:d,hideInlineName:u}))}let DJ=(0,vc.fv)();function DY({asset:e,fileName:t,sourceForTracking:n,thumbHeight:a,thumbWidth:l,sectionNameForTracking:r,sectionPosition:i,sectionDepth:o,hideInlineName:s,displayType:c}){var d;let u=(0,_.wA)(),m=(0,_.d4)(bi.dK),p=(0,_.d4)(Iy.F9),g=(0,_.d4)(Iy.e_),h=(0,S.md)(Lj.T),E=(null==(d=g.assetsPanelSearch.searchOptions)?void 0:d.type)===OK.I.ALL,b=f.useMemo(()=>DJ(e),[e]),C=(0,O5.cm)(b),w=(0,Lh.E_)(b),T=E&&(C||w),x=f.useRef(null),N=(0,Lx.kH)(e.name),k=(0,AE.NG)({text:N,textRef:x}),I=f.useRef(null),A=(0,AE.NG)({text:t??"",textRef:I}),O=!!g.assetsPanelSearch.query,L=(0,Pl.F)(e,Pi.K.ASSETS_PANEL,i,r),P=(0,Pa.n)(e),D=(0,v.ZC)(P);f.useEffect(()=>{P&&!D&&u(nq.jD())},[P,u,D]);let R=e.isLocal&&(0,aR.PN)()?(0,Pn.eT)(e.node_id,m).join("-"):e.node_id,M="Local components"===r||"Local private components"===r||e.isLocal,{handleClick:F,handleDoubleClick:B}=function(e,t){let n=(0,af.q5)(),a=f.useRef(null),{searchSessionId:l}=(0,eV.Gq)(),r=f.useCallback(a=>{Z.az.trackDefinedEvent("assets_panel.component_clicked",{isDoubleClick:a,isLocalComponent:t,assetKey:(0,Lo.V)(e),fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0,searchSessionId:l??void 0,assetsPanelVersion:3})},[e,t,null==n?void 0:n.key,null==n?void 0:n.parentOrgId,null==n?void 0:n.teamId,l]);return{handleClick:f.useCallback(()=>{a.current||(a.current=setTimeout(()=>{r(!1),a.current=null},500))},[r]),handleDoubleClick:f.useCallback(()=>{a.current&&(clearTimeout(a.current),a.current=null),r(!0)},[r])}}(e,M??!1),U="grid"===c,H=!s&&U,G=(0,y.kc)().api_asset_search_with_scores,V=(0,LN.Y)(e),K={showName:!0,height:a,width:l,draggable:f.useMemo(()=>({sourceForTracking:n,clickToInsert:!1,afterSuccessfulInsert:by.$z,sectionNameForTracking:r,sectionDepth:o}),[o,r,n]),onContextMenu:L,shouldHideTooltip:!0,recordingNodePath:R,isSearch:O,useBaseTile:!0,hideNameOverlay:H,numVariants:V,displayType:U?"grid":"list-no-padding",sectionPosition:i,shouldUseDescriptionTooltip:!0,showTooltipImmediately:!1,fileName:k||A?t:void 0,alwaysShowBorder:!1,thumbWrapperClassName:"asset_panel_tile--thumbWrapper--bNG-Y"},W=M?f.createElement(Pr.MT,{item:e,isFilePublished:p,...K}):f.createElement(Pr.lX,{item:e,...K});return f.createElement("div",{className:U?"asset_panel_tile--gridWrapper--tUJe5 asset_panel_tile--wrapper--8uDli asset_panel_tile--_wrapperBase--ngLpF library_item_tile--_variantHover--xfLPt":"asset_panel_tile--wrapper--8uDli asset_panel_tile--_wrapperBase--ngLpF library_item_tile--_variantHover--xfLPt",onClick:F,onDoubleClick:B},f.createElement("div",{className:nb()(U?"asset_panel_tile--tileWrapper--7OwtG asset_panel_tile--_tileWrapperBase--OAJqM":"asset_panel_tile--tileWrapperList--VMlzj asset_panel_tile--_tileWrapperBase--OAJqM",{"asset_panel_tile--shownInFlyout--7Luo3":P,"asset_panel_tile--selectedFlyoutFocus--GGV8E":P&&h})},W),H&&f.createElement("div",{className:"asset_panel_tile--nameWrapper--6O-iS",style:{width:l-2}},f.createElement("span",{className:"asset_panel_tile--name--FG9hg ellipsis--ellipsis--Tjyfa",ref:x},N),f.createElement("div",{className:"asset_panel_tile--caret--x-Vya asset_panel_tile--_caretBase--IZ44d"},f.createElement(lm.e,{"aria-hidden":!0}))),H&&!!t&&f.createElement(fy.Y,{spacing:0,direction:"horizontal",height:"hug-contents"},f.createElement("div",{className:nb()(DK,DW),ref:I,style:T?{maxWidth:l-O6.J-2}:{width:l-2}},t),T&&f.createElement(O6.P,{resourceId:b,showPresetTooltip:!0,tooltipDelay:500,tooltipLocation:"below",compact:!0})),G&&f.createElement(f.Fragment,null,f.createElement("div",{className:nb()(DK,DW),style:T?{maxWidth:l-O6.J-2}:{width:l-2}},"AI: "+(e.ai_score??"N/A")),f.createElement("div",{className:nb()(DK,DW),style:T?{maxWidth:l-O6.J-2}:{width:l-2}},"Lex: "+(e.lexical_score??"N/A"))))}function DX(){let e=f.useContext(Ll.U);return(null==e?void 0:e.isUi3)?e:{...e,width:0}}function Dq({width:e,children:t}){let n=function(e){let t=(0,_.wA)(),{query:n,searchSessionId:a}=(0,eV.Gq)(),l=(0,Db.ht)(),r=(0,OI.q_)(),i=(0,ax.LR)(),o=(0,_.d4)(e=>e.universalInsertModal.showing),s=f.useCallback(()=>{o&&i()},[i,o]),c=f.useCallback((i,o,c,d)=>{s(),t((0,ty.to)({type:Lq,data:{asset:i,searchSessionId:a??void 0,query:n??void 0,sectionPosition:o,sectionNameForTracking:c,assetTypeDropdownSelection:l,containerWidth:e,onGetKeyboardNavigationItemById:r,sectionDepth:d}}))},[s,t,a,n,l,e,r]);return f.useMemo(()=>({onOpenFlyout:c,assetTypeDropdownSelection:l,isUi3:!0,width:e}),[c,l,e])}(e);return f.createElement(Ll.U.Provider,{value:n},t)}let DZ=(0,lf.jz)(Pp.Nz),DQ=(0,lf.jz)(Pp.cP),D$=(0,lf.jz)(Pp.FX),D0=(0,lf.jz)("4px"),D1=(0,lf.jz)("8px"),D2=(0,lf.jz)(Pp.ZI),D5=(0,e4.eU)(!1),D4=(e,t,n,a,l)=>{if("list"===l)return D2;let r=e+DZ;return t&&(r+=DQ),n&&(r+=D$),a&&(r+=2*(0,lf.jz)(Pp.uY)),r};function D3(e,t,n,a,l,r,i){let o=[];for(let s=0;s<e.length;s+=t){let c=e.slice(s,s+t),d=[];c.forEach((e,o)=>{var c;if(e){let u=s+o;d.push(f.createElement(Dj,{key:`${n}-${(0,Lo.V)(e)}`,asset:e,fileName:null==(c=null==i?void 0:i.getFileName)?void 0:c.call(i,e),sectionDepth:null==i?void 0:i.depth,sectionNameForTracking:l,sectionPosition:s+o,keyboardPosition:DT(r,u,t,null==i?void 0:i.hasHeader),isFirstTile:(null==i?void 0:i.includesFirstTile)&&0===u,keyboardPanelDepth:null==i?void 0:i.keyboardPanelDepth,isExample:null==i?void 0:i.isExample,...a}))}}),o.push({element:f.createElement("div",{className:"list"===a.displayType?"asset_panel_virtualization--virtualRowList--COnhA":0===s?"asset_panel_virtualization--virtualRowFirst--mdR2j asset_panel_virtualization--virtualRow--TxsS-":"asset_panel_virtualization--virtualRow--TxsS-",role:"row"},d),key:`${n}:row-${s/t}`,keys:c.map(e=>(0,Lo.V)(e)),height:D4(a.thumbHeight,!!(null==i?void 0:i.getFileName),0!==s,!!(0,y.kc)().api_asset_search_with_scores,a.displayType)})}return o.length>0&&(o.unshift({element:f.createElement(DU.hK,{height:D0}),key:`${n}:spacer-top`,height:D0}),o.push({element:f.createElement(DU.hK,{height:D1}),key:`${n}:spacer-bottom`,height:D1})),o}function D6({elements:e,hideScrollbar:t,initialScrollTop:n,onScroll:a,anchorScroll:l,role:r}){let i=f.useRef(null),o=(0,DH.Te)({count:e.length,getScrollElement:()=>i.current,estimateSize:t=>e[t].height,getItemKey:t=>e[t].key,paddingEnd:8,overscan:6,initialOffset:n}),s=function({scrollContainerRef:e,initialScrollTop:t,onScroll:n,enabled:a,virtualizer:l,getKeys:r}){var i,o;let[s,c]=f.useState(t??(null==(i=e.current)?void 0:i.scrollTop)),[d,u]=f.useState(null==(o=e.current)?void 0:o.scrollHeight),{width:m}=DX(),p=(0,v.ZC)(m),_=f.useCallback((e,t)=>{if(!t)return{keys:[],offset:void 0};let n=e.getVirtualItems().find(e=>e.start>=t);return n?{keys:r(n),offset:n.start-t}:{keys:[],offset:void 0}},[r]),[g,h]=f.useState(()=>{var n;return _(l,t??(null==(n=e.current)?void 0:n.scrollTop))}),E=f.useCallback((e,t)=>{null==n||n(e,t),a&&(c(e),h(_(l,e)))},[a,_,n,l]);return f.useEffect(()=>{var t,n,i;let o=p&&m&&p!==m,c=(null==(t=e.current)?void 0:t.scrollHeight)&&d&&(null==(n=e.current)?void 0:n.scrollHeight)!==d;if(o&&u(null==(i=e.current)?void 0:i.scrollHeight),void 0!==s&&void 0!==g.offset&&a&&o&&c){let t=l.getVirtualItems().find(e=>r(e).some(e=>g.keys.includes(e)));if(t)l.scrollToOffset(t.start-g.offset);else{let t=s/d,n=e.current.scrollHeight*t;l.scrollToOffset(n)}}},[g.keys,g.offset,a,r,p,e,d,s,l,m]),E}({enabled:l,scrollContainerRef:i,initialScrollTop:n,onScroll:a,virtualizer:o,getKeys:f.useCallback(t=>{let n=e[t.index];return n?n.keys??[n.key]:[]},[e])}),[c,d]=(0,S.fp)(D5);return f.useEffect(()=>{if(!c)return;let t=e.findIndex(e=>"preset_libraries_header"===e.key);-1!==t&&(o.scrollToIndex(t,{align:"start"}),d(!1))},[e,o,d,c]),f.createElement(DU.xU,{scrollContainerRef:i,hideScrollbar:t,initialScrollTop:n,onScroll:s},f.createElement("div",{style:{height:`${o.getTotalSize()}px`,width:"100%",position:"relative"},role:r},o.getVirtualItems().map(t=>f.createElement("div",{key:t.key,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${t.start}px)`}},e[t.index].element))))}var D7=n(366508),D8=n(606624);let D9=(0,S.Iz)(()=>(0,t_.rt)(0));function Re({libraryKey:e,pageId:t,folderPath:n}={}){let{lastNavAction:a}=(0,D8.ZX)(),l=a===D8.r6.Back||a===D8.r6.Mount||a===D8.r6.ToggleView&&!n,[r,i]=(0,S.fp)(D9("libraries")),[o,s]=(0,S.fp)(D9(`pages-${e}`)),[c,d]=(0,S.fp)(D9(`assets-${e}-${t}-${(n??[]).join("-")}`));return{librariesScrollTop:l?r:0,pagesScrollTop:l?o:0,assetsScrollTop:l?c:0,handleScrollLibraries:f.useCallback(e=>{i(e)},[i]),handleScrollPages:f.useCallback(t=>{e&&s(t)},[s,e]),handleScrollAssets:f.useCallback(n=>{e&&t&&d(n)},[d,e,t])}}function Rt({elementMinSize:e,spaceAvailable:t,gap:n}){return Math.floor((t+n)/(e+n))}function Rn({numElements:e,spaceAvailable:t,gap:n}){return Math.floor((t-(e-1)*n)/e)}function Ra({width:e,widthToHeightRatio:t=1,maxHeight:n}){let a=Math.floor(e/t);return void 0===n?Math.max(0,a):Math.max(0,Math.min(n,a))}let Rl=(0,lf.jz)("16px"),Rr=2*(0,lf.jz)("16px"),Ri={NORMAL:115,WIDE:void 0,SMALL:72},Ro={minColumns:2,maxColumns:3,aspectRatio:1,maxHeight:Ri.NORMAL},Rs={minColumns:1,maxColumns:1,aspectRatio:3.25,maxHeight:Ri.WIDE},Rc={minColumns:3,maxColumns:5,aspectRatio:1,maxHeight:Ri.SMALL},Rd=e=>{switch(e){case Po.rp.WIDE:return Rs;case Po.rp.SMALL:return Rc;default:return Ro}};function Ru(){let{componentLayouts:e,exampleLayout:t}=function({sidebarWidth:e}){let t=f.useMemo(()=>e-Rr,[e]),n=f.useMemo(()=>{let e={};for(let n of[Po.rp.NORMAL,Po.rp.WIDE,Po.rp.SMALL]){let{minColumns:a,maxColumns:l,aspectRatio:r,maxHeight:i}=Rd(n),o=Math.max(Math.min(l,Rt({elementMinSize:i??t,gap:Rl,spaceAvailable:t})),a),s=Rn({numElements:o,gap:Rl,spaceAvailable:t}),c=Ra({width:s,maxHeight:i,widthToHeightRatio:r});e[n]={width:s,height:c,columns:o}}return e},[t]),a=f.useMemo(()=>Math.max(Rt({elementMinSize:200,gap:Rl,spaceAvailable:t}),1),[t]),l=f.useMemo(()=>Rn({numElements:a,gap:Rl,spaceAvailable:t}),[a,t]),r=f.useMemo(()=>Ra({width:l,widthToHeightRatio:1.5,maxHeight:200}),[l]);return f.useMemo(()=>({componentLayouts:n,exampleLayout:{width:l,height:r,columns:a}}),[n,a,l,r])}({sidebarWidth:(0,EO.GQ)()}),[n,a]=f.useMemo(()=>{let t={},n={};for(let[a,l]of Object.entries(e))t[a]={thumbHeight:l.height,thumbWidth:l.width,viewMode:LZ.Bk.Grid,thumbLayout:a,sourceForTracking:LZ.mZ,displayType:"grid"},n[a]=l.columns;return[t,n]},[e]),l=f.useMemo(()=>({thumbHeight:t.height,thumbWidth:t.width,viewMode:LZ.Bk.Grid,thumbLayout:Po.rp.NORMAL,sourceForTracking:LZ.mZ,displayType:"grid"}),[t.height,t.width]),r=f.useMemo(()=>({thumbHeight:40,thumbWidth:40,viewMode:LZ.Bk.List,thumbLayout:Po.rp.NORMAL,sourceForTracking:LZ.mZ,displayType:"list"}),[]);return f.useMemo(()=>({componentTilePropsByLayout:n,numColumnsByLayout:a,listProps:r,exampleTileProps:l,numExampleColumns:t.columns}),[n,a,r,l,t.columns])}function Rm(e,t,n,a=!1){return"list"===t?{props:e.listProps,numColumns:1}:a?{props:e.exampleTileProps,numColumns:e.numExampleColumns}:{props:e.componentTilePropsByLayout[n],numColumns:e.numColumnsByLayout[n]}}function Rp({children:e,index:t,width:n}){let a=(0,S.md)(Db.h),l=f.useMemo(()=>e.flat().filter(e=>!!e),[e]),r=f.useMemo(()=>{let e=Rf(-Math.min(t,l.length-1)),n=`translateX(${e})`;return{transform:n,WebkitTransform:n}},[l.length,t]),i=nb()("slide_carousel--container--1f4th",{"slide_carousel--noTransition--0heGr":a});return f.createElement("div",{style:r,"data-testid":"slide-carousel",className:i},l.map((e,a)=>f.createElement("div",{className:"slide_carousel--item--w20ND",style:{width:n},key:a,"data-testid":"slide-carousel-item","aria-hidden":a!==t},e)))}let Rf=e=>`${100*e}%`,R_=(0,lf.jz)(Dm),Rg=(0,lf.jz)(Dp),Rh=(0,lf.jz)(Df),RE=(0,lf.jz)(D_);function Rv({page:e,width:t}){let{libraryKey:n,currentView:a}=(0,DC.wV)(),{getPage:l}=(0,DB.G)(),[r]=(0,DM.ye)(),{previousPageId:i}=(0,DC.RR)(),o=f.useMemo(()=>a===DC.S5.Pages?l(n,i):e,[a,l,n,e,i]);return n&&o?r?f.createElement(Rb,{page:o,width:t}):f.createElement(Ry,{page:o,libraryKey:n}):f.createElement("div",{style:{width:t}})}function Ry({page:e,libraryKey:t}){let{assetsScrollTop:n,handleScrollAssets:a}=Re({libraryKey:t,pageId:e.id}),[l]=(0,DM.MA)(),r=Ru(),{componentSectionNameForTracking:i,templateSectionNameForTracking:o}=(0,Db.zf)(),s=f.useMemo(()=>{let t=[];if(e.templates){let n=(0,D7.r)(e.templates),{props:a,numColumns:i}=Rm(r,l,Po.rp.NORMAL,!0);t.push({element:f.createElement(DU.X3,{title:(0,eN.t)("design_systems.assets_panel.templates")}),key:"templates:header",height:Rh}),t.push(...D3(n,i,"templates",a,o,[Do.tM.TEMPLATES],{includesFirstTile:!0}))}if(e.examples){let n=(0,D7.r)(e.examples),{props:a,numColumns:o}=Rm(r,l,Po.rp.NORMAL,!0);t.push(...D3(n,o,"examples",a,i,[Do.tM.EXAMPLES],{includesFirstTile:!0,isExample:!0}))}if(e.components){e.templates&&t.push({element:f.createElement(DU.X3,{title:(0,eN.t)("design_systems.assets_panel.components")}),key:"components:header",height:Rh});let n=(0,D7.r)(e.components),{props:a,numColumns:o}=Rm(r,l,(0,Po.PI)(n,!0));t.push(...D3(n,o,"components",a,i,[Do.tM.COMPONENTS],{includesFirstTile:!e.templates&&!e.examples}))}return t},[e.templates,e.examples,e.components,r,l,o,i]);return f.createElement(D6,{elements:s,initialScrollTop:n,onScroll:a,anchorScroll:!0,role:l})}function Rb({page:e,width:t}){let{libraryKey:n,pageId:a,folderPath:l}=(0,DC.wV)(),{getFolder:r}=(0,DB.G)(),{previousFolderPath:i,previousPageId:o}=(0,DC.RR)(),[s,c]=f.useMemo(()=>{let t=[],s=i??l??[],c=0;for(let i=-1;i<s.length;i++){let d=s.slice(0,i+1),u=r(n,a??o,d);if(u){if((0,DC.xc)(u))continue;t.push(f.createElement(RC,{parentSubtree:e.assets,currentFolderPath:d,key:`components-${d?d.join("/"):"root"}`})),i===(l??[]).length-1&&(c=t.length-1)}}return[t,c]},[l,r,n,e.assets,a,i,o]);return f.createElement(Rp,{index:c,width:t},s)}function RC({parentSubtree:e,currentFolderPath:t}){let[n]=(0,DM.MA)(),a=f.useMemo(()=>{let n=e;for(let e of t){let t=n.subtrees.get(e);if(!t)return null;n=t}return n},[e,t]),{folderPath:l,pageId:r,libraryKey:i}=(0,DC.wV)(),o=!!i&&(0,xK.wJ)(i),s=t.length,c=(null==l?void 0:l.length)??0,{assetsScrollTop:d,handleScrollAssets:u}=Re({libraryKey:i,pageId:r,folderPath:t}),m=Rw({subtree:a,currentFolderPath:t,isPreset:o});return f.createElement(D6,{elements:m,hideScrollbar:s<c,onScroll:u,initialScrollTop:d,role:n})}let Rw=({subtree:e,currentFolderPath:t,isPreset:n})=>{let a=Ru(),{componentSectionNameForTracking:l}=(0,Db.zf)(),{folderPath:r}=(0,DC.wV)(),[i]=(0,DM.MA)(),o=t.join("/"),s=t.length,c=(null==r?void 0:r.length)??0,d=f.useMemo(()=>!!n&&!!(0,y.kc)().dse_preset_libraries&&null!=e&&!!e.items&&(null==e?void 0:e.items.every(e=>(0,Lu.Nz)(e,{isPreset:n}))),[n,null==e?void 0:e.items]),u=f.useCallback(e=>{let t=e.subtrees.values().next().value;return t&&(0,Lu.dS)(t.name,{isPreset:n})},[n]),m=f.useCallback(({subtree:e,elements:t})=>{let n=e.items.length>0,r=u(e);if(n){let n=[Do.tM.COMPONENTS],{props:r,numColumns:o}=Rm(a,i,(0,Po.PI)(e.items,!0),d);t.push(...D3(e.items,o,e.key,r,l,n,{hasHeader:!1,includesFirstTile:s===c,keyboardPanelDepth:s,isExample:d}))}let m=Array.from(e.subtrees.values());n&&m.length>0&&!r&&t.push({element:f.createElement(DU.cG,null),key:"divider",height:RE}),m.forEach((n,a)=>{t.push({element:f.createElement(DF,{subtree:n,index:a+e.items.length,keyPrefix:o,depth:s}),key:n.key,height:"list"===i?R_:Rg}),0===a&&r&&m.length>1&&t.push({element:f.createElement(DU.cG,null),key:"examples_divider",height:RE})})},[u,a,i,d,l,s,c,o]);return f.useMemo(()=>{let t=[];return e&&m({subtree:e,elements:t}),t},[m,e])};var RT=n(13678),Rx=n(611964),RN=n(18339);let RS="asset-panel-library-context-menu",Rk=n_.Pt("assetsLibrary","contextMenu"),RI=nC.W.Dropdown,RA=nC.W.Option,RO=f.memo(({dropdownShown:e,usePortal:t})=>{if(!e||e.type!==RS)return null;let{data:n}=e;if(!n)return null;let{libraryHref:a,position:l,isLocalLibrary:r,onGoToLibrary:i,onPublish:o,onUnsubscribe:s}=n;if(!l)return null;let c=f.createElement(RI,{style:dA.sx.add({top:`${l.top}px`,right:`${l.right}px`,bottom:`${l.bottom}px`,left:`${l.left}px`}).add(dA.sx.fixed).$},r?f.createElement(RA,{onClick:o,recordingKey:n_.Pt(Rk,"publishLibrary")},(0,eN.tx)("design_systems.assets_panel.publish_library")):f.createElement(f.Fragment,null,f.createElement(RA,{onClick:s,recordingKey:n_.Pt(Rk,"unsubscribe")},(0,eN.tx)("design_systems.assets_panel.remove_library_from_file")),f.createElement(RA,{href:a,target:"_blank",recordingKey:n_.Pt(Rk,"goToLibrary"),onClick:i},(0,eN.tx)("design_systems.assets_panel.go_to_library"))));return t?oQ.createPortal(c,document.body):c}),RL="asset-panel-page-context-menu",RP=n_.Pt("assetsLibrary","contextMenu"),RD=nC.W.Dropdown,RR=nC.W.Option,RM=f.memo(({dropdownShown:e,usePortal:t})=>{if(!e||e.type!==RL)return null;let{data:n}=e;if(!n)return null;let{libraryPageHref:a,position:l,isLocalLibrary:r,onClickLocalPage:i,onClickSubscribedPage:o}=n;if(!l)return null;let s=f.createElement(RD,{style:dA.sx.add({top:`${l.top}px`,right:`${l.right}px`,bottom:`${l.bottom}px`,left:`${l.left}px`}).add(dA.sx.fixed).$},r?f.createElement(RR,{recordingKey:n_.Pt(RP,"goToLibrary"),onClick:i},(0,eN.tx)("design_systems.assets_panel.go_to_page")):f.createElement(RR,{href:a,target:"_blank",recordingKey:n_.Pt(RP,"goToLibrary"),onClick:o},(0,eN.tx)("design_systems.assets_panel.go_to_page")));return t?oQ.createPortal(s,document.body):s});function RF(){var e,t,n;let a=(0,_.d4)(e=>e.dropdownShown),l=(0,_.d4)(OD.hK),r=(0,_.d4)(Iy.e_),i=(null==a?void 0:a.type)===Pi.K.ASSETS_PANEL&&!!(null==(e=null==a?void 0:a.data)?void 0:e.component),o=(null==a?void 0:a.type)===RL&&!!(null==(t=null==a?void 0:a.data)?void 0:t.pageId),s=(null==a?void 0:a.type)===RS&&!!(null==(n=null==a?void 0:a.data)?void 0:n.libraryHref),c=(0,PV.K)(!0),d=f.useContext(Ll.U);return f.createElement(f.Fragment,null,i&&f.createElement(Pi.h,{selectedView:l,dropdownShown:a,defaultFileKeys:r.defaultPublished.fileKeys,onJumpToLocalComponent:c,onOpenFlyout:null==d?void 0:d.onOpenFlyout,usePortal:!0}),o&&f.createElement(RM,{dropdownShown:a,usePortal:!0}),s&&f.createElement(RO,{dropdownShown:a,usePortal:!0}))}let RB=(0,lf.jz)("40px"),RU=(0,lf.jz)("71px");function RH({library:e,previewHeight:t,cardWidth:n,keyboardSection:a,rowIndex:l,columnIndex:r=0}){let{focusFirstItem:i,focusSearchBar:o}=DR(),{navigateToLibrary:s}=(0,DC.wV)(),c=(0,af.q5)(),[d]=(0,DM.MA)(),u="list"===d,m=(0,Db.sN)(),p=f.useCallback(()=>{m("libraryCard",s(e.fileKey))},[e.fileKey,m,s]),{currentView:g}=(0,DC.wV)(),h=g!==DC.S5.Libraries,{setKeyboardNavigationElement:E}=(0,OI.M3)({path:[Do.ON.CONTENTS,Do.lM.LIBRARIES,a,l],column:r,id:e.fileKey,disabled:h}),v=Dx({onBoth:p,onKeyDown:i,onClick:o}),y=function(e){let t=(0,af.q5)(),n=(0,_.wA)(),a=e.fileKey===(null==t?void 0:t.key),l=(0,xK.wJ)(e.fileKey),r=(0,LZ._9)(e.fileKey,l,"assets_panel_library_context_menu"),i=f.useCallback(()=>r(!1),[r]),o=function(){let e=(0,_.wA)(),t=(0,af.q5)(),n=(0,_.d4)(e=>e.teams),a=(0,_.d4)(Iy.fA),l=f.useCallback(()=>{e(ty.to({type:RT.dD,data:{entrypoint:Rx.RR.ASSET_PANEL_LIBRARY_CONTEXT_MENU}}))},[e]),r=(null==t?void 0:t.teamId)&&n[t.teamId],i=f.useCallback(()=>{e(ty.to({type:RN.$3,data:{afterFileMove:l,team:r||null}}))},[e,l,r]);return f.useCallback(()=>{a?l():i()},[a,l,i])}(),s=f.useMemo(()=>(0,xK.wJ)(e.fileKey)?(0,LE.X$)(e.fileKey):(0,LE.jN)({file:{key:e.fileKey,editor_type:a_._Y.DESIGN}}),[e.fileKey]),c=f.useCallback(()=>{Z.az.trackDefinedEvent("assets_panel.go_to_library",{libraryKey:e.fileKey,fileKey:null==t?void 0:t.key,fileTeamId:(null==t?void 0:t.teamId)??void 0,fileOrgId:(null==t?void 0:t.parentOrgId)??void 0,entryPoint:"library_context_menu"})},[e.fileKey,t]),d=f.useCallback(()=>{Z.az.trackDefinedEvent("assets_panel.open_library_context_menu",{libraryKey:e.fileKey,fileKey:null==t?void 0:t.key,fileTeamId:(null==t?void 0:t.teamId)??void 0,fileOrgId:(null==t?void 0:t.parentOrgId)??void 0})},[e.fileKey,t]);return f.useCallback(e=>{e.preventDefault(),e.stopPropagation(),n((0,nI.j7)({type:RS,data:{libraryHref:s,isLocalLibrary:a,onGoToLibrary:c,onPublish:o,onUnsubscribe:i,position:{top:e.clientY,left:e.clientX}}})),d()},[s,o,i,a,n,c,d])}(e),b=f.useMemo(()=>{let t=e.fileKey===(null==c?void 0:c.key)?"localLibrary":e.fileKey;return n_.Pt("assetsLibrary",t)},[null==c?void 0:c.key,e.fileKey]);return f.createElement(a7.GG,{className:"asset_panel_library--library--5bw5-","aria-label":e.name,onClick:v,onContextMenu:y,forwardedRef:E,tabIndex:h?-1:0,style:{width:u?"100%":n},recordingKey:b},f.createElement(RG,{library:e,previewHeight:t,isList:u}))}function RG({library:e,previewHeight:t,isList:n}){let{thumbnailUrl:a}=e,[l,r]=f.useState(a),i=f.useMemo(()=>{if(l)return`url(${l})`},[l]),o=f.useCallback(()=>{r(a)},[a]),s=f.useMemo(()=>n?{height:RB,width:RU}:{height:t},[n,t]);return f.createElement("div",{className:n?"asset_panel_library--libraryCardList--qG5I1 asset_panel_library--libraryCard--l0q0e":"asset_panel_library--libraryCard--l0q0e"},f.createElement("div",{className:"asset_panel_library--libraryPreviewSection--fRTrr"},f.createElement("div",{style:{backgroundImage:i,...s},className:e.thumbnailShouldCover?"asset_panel_library--libraryPreviewCover---Jx5R asset_panel_library--libraryPreview--jl-5n":"asset_panel_library--libraryPreview--jl-5n"}),a&&f.createElement("img",{src:a,onLoad:o,className:"asset_panel_library--hiddenImage--a-LoJ",alt:""})),f.createElement(RV,{library:e,isList:n}))}function RV({library:e,isList:t}){let n=(0,y.kc)().dse_editor_templates_v1,a=f.useMemo(()=>{let t=[];return e.numComponents>0&&t.push((0,eN.t)("design_systems.assets_panel.num_components",{numComponents:e.numComponents})),n&&e.numTemplates>0&&t.push((0,eN.t)("design_systems.assets_panel.num_templates",{numTemplates:e.numTemplates})),t.join(", ")},[e.numComponents,e.numTemplates,n]);return f.createElement("div",{className:t?"asset_panel_library--libraryFooterList--x3M2r asset_panel_library--libraryFooter--jXcDc":"asset_panel_library--libraryFooter--jXcDc"},f.createElement("div",{className:"asset_panel_library--libraryNameAndStats--uiY8T"},f.createElement("div",{className:"asset_panel_library--nameAndIconForList--UCm5F"},f.createElement("h3",{className:"asset_panel_library--libraryName--aege1 ellipsis--ellipsis--Tjyfa"},e.name),f.createElement(RK,{libraryKey:e.fileKey})),f.createElement("div",{className:"asset_panel_library--libraryStats--JL9eF ellipsis--ellipsis--Tjyfa"},a)))}function RK({libraryKey:e}){let t=(0,O5.cm)(e),n=(0,xK.wJ)(e);return t||n?f.createElement("div",{className:n?"asset_panel_library--presetIcon--PE3Tx asset_panel_library--libraryIcon--6s19b":"asset_panel_library--approvedIcon---0q6C asset_panel_library--libraryIcon--6s19b"},n?f.createElement(O7.S,{hubFileId:e,showTooltip:!0}):f.createElement(O4.KP,{fileKey:e,tooltipDelay:500,tooltipLocation:"below",size:"small"})):null}let RW=(0,lf.jz)("8px")+1,Rz=(0,lf.jz)("8px"),Rj=16/9;var RJ=n(287213);function RY(){let e=(0,af.tS)(),{getLibrary:t}=(0,DB.G)(),[n,a]=(0,RJ.g)(),l=f.useMemo(()=>t(e??""),[t,e]),r=!l||0===l.numComponents&&0===l.numTemplates,i=0===n.length,o=0===a.length;return f.useMemo(()=>r&&i&&o,[r,i,o])}let RX="asset_panel_libraries--row--nHi0j",Rq=(0,lf.jz)("56px"),RZ=(0,lf.jz)(D_),RQ=(0,lf.jz)(Df),R$=(0,lf.jz)("58px"),R0=(0,lf.jz)("44px");function R1({width:e,hideScrollbar:t,assetPanelItems:n}){let a=n.localAssets,[l,r]=(0,RJ.g)();return RY()?f.createElement("div",{style:{width:e}},f.createElement(OB.od,null)):f.createElement(R2,{localAssets:a,subscribedLibraries:l,presetLibraries:r,hideScrollbar:t,width:e})}function R2({localAssets:e,subscribedLibraries:t,presetLibraries:n,width:a,hideScrollbar:l}){let{librariesScrollTop:r,handleScrollLibraries:i}=Re(),{currentView:o}=(0,DC.wV)(),[s]=(0,DM.MA)(),{cardWidth:c,previewHeight:d,numColumns:u}=function({sidebarWidth:e,minCardWidth:t=180,previewPadding:n=RW,widthToHeightRatio:a=Rj,rowPadding:l=Rz}){let r=e-2*l,i=f.useMemo(()=>Rt({elementMinSize:t,spaceAvailable:r,gap:0}),[t,r]),o=f.useMemo(()=>Rn({numElements:i,spaceAvailable:r,gap:0}),[i,r]),s=f.useMemo(()=>o-2*n,[o,n]),c=f.useMemo(()=>Ra({width:s,widthToHeightRatio:a}),[s,a]);return f.useMemo(()=>({cardWidth:o,previewWidth:s,previewHeight:c,numColumns:i}),[o,s,c,i])}({sidebarWidth:a}),m="grid"===s?u:1,p="grid"===s?Rq+d+2:R$,_=t.length>0&&!(0,y.kc)().dse_hide_local_and_subscribed_libraries,g=e.numComponents+e.numTemplates>0&&!(0,y.kc)().dse_hide_local_and_subscribed_libraries,h=n.length>0&&(_||g),E=f.useMemo(()=>{let a=[],l=[];g&&l.push(e),_&&l.push(...t);for(let e=0;e<l.length;e+=m){let t=l.slice(e,e+m);a.push({element:f.createElement("div",{className:RX},t.map((t,n)=>f.createElement(RH,{key:t.fileKey,library:t,keyboardSection:Do.gP.LOCAL_AND_SUBSCRIBED,rowIndex:e,columnIndex:n,cardWidth:c,previewHeight:d}))),key:t.map(e=>e.fileKey).join("-"),keys:t.map(e=>e.fileKey),height:p})}h&&(a.push({element:f.createElement(DU.cG,null),key:"divider",height:RZ}),a.push({element:f.createElement(DU.X3,{title:(0,y.kc)().dse_preset_libraries?(0,eN.t)("design_systems.assets_panel.ui_kits"):(0,eN.t)("design_systems.assets_panel.curated_libraries")}),key:"preset_libraries_header",height:RQ}));for(let e=0;e<n.length;e+=m){let t=n.slice(e,e+m);a.push({element:f.createElement("div",{className:RX},t.map((t,n)=>f.createElement(RH,{key:t.fileKey,library:t,keyboardSection:Do.gP.PRESETS,rowIndex:e,columnIndex:n,cardWidth:c,previewHeight:d}))),key:t.map(e=>e.fileKey).join("-"),keys:t.map(e=>e.fileKey),height:p})}return a.push({element:f.createElement(R5,null),key:"add_more_libraries_button",height:R0}),a},[m,c,d,g,t,h,n,p,e,_]);return f.createElement(D6,{elements:E,hideScrollbar:l,initialScrollTop:r,onScroll:i,anchorScroll:o===DC.S5.Libraries})}function R5(){let{onToggleLibraryModal:e}=(0,OJ.u)({entrypoint:OH.r6.ASSETS_PANEL_ADD_MORE_LIBRARIES,modalType:"editor"});return f.createElement("div",{className:"asset_panel_libraries--addMoreLibraries--Jy-l7"},f.createElement(va.$n,{variant:"secondary",onClick:e,recordingKey:"assetsLibrary.addMoreLibraries"},(0,eN.tx)("design_systems.assets_panel.add_more_libraries")))}function R4({page:e,index:t}){let n=(0,Db.sN)(),[a]=(0,DM.MA)(),{previewAsset:l}=e,{navigateToPage:r,libraryKey:i,currentView:o}=(0,DC.wV)(),s=f.useCallback(()=>{n("pageRow",r(e.id))},[n,r,e.id]),c=e.id,d=o!==DC.S5.Pages,{keyboardNavigationItem:u,setKeyboardNavigationElement:m}=(0,OI.M3)({path:[Do.ON.CONTENTS,Do.lM.PAGES,t],id:e.id,disabled:d}),{focusFirstItem:p,focusSearchBar:g}=DR();DO(u,o===DC.S5.Pages&&0===t);let h=Dx({onBoth:s,onKeyDown:p,onClick:g}),E=function(e,t){let n=(0,af.q5)(),a=(0,_.wA)(),l=e===(null==n?void 0:n.key),r=!!e&&!!t,i=f.useMemo(()=>(0,LE.jN)({file:{key:e??"",editor_type:a_._Y.DESIGN},nodeId:t}),[e,t]),o=f.useCallback(()=>lE.q.instance.setCurrentPageAsync(t??""),[t]),s=f.useCallback(()=>{Z.az.trackDefinedEvent("assets_panel.go_to_page",{libraryKey:e,pageId:t,fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0,isLocal:l})},[l,e,null==n?void 0:n.key,null==n?void 0:n.parentOrgId,null==n?void 0:n.teamId,t]),c=f.useCallback(()=>{o(),s()},[o,s]),d=f.useCallback(()=>{Z.az.trackDefinedEvent("assets_panel.open_page_context_menu",{libraryKey:e,pageId:t,fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0})},[e,null==n?void 0:n.key,null==n?void 0:n.parentOrgId,null==n?void 0:n.teamId,t]);return f.useCallback(n=>{!r||(0,xK.wJ)(e)||(n.preventDefault(),n.stopPropagation(),a((0,nI.j7)({type:RL,data:{libraryPageHref:i,pageId:t,isLocalLibrary:l,onClickLocalPage:c,onClickSubscribedPage:s,position:{top:n.clientY,left:n.clientX}}})),d())},[e,r,a,i,t,l,c,s,d])}(i,e.id),v="list"===a;return f.createElement(Dy,{keyPrefix:c,name:e.name,onClick:h,onContextMenu:E,previewAsset:l,recordingKey:`assetsPage.${e.id}`,ref:m,disabled:d,isList:v,variant:v?"icon":"preview"})}let R3="performance.ds_eco.asset_panel_pages_view_loading",R6=new wB.jk(R3,{});function R7({didFinishLoading:e}){let t=R6.stop();(0,Z.sx)(R3,{elapsedMs:t,isNewAssetPanelFetch:!!(0,y.kc)().dse_new_asset_panel_fetch,didFinishLoading:e},{forwardToDatadog:!0})}let R8=(0,lf.jz)(D_),R9=(0,lf.jz)(Dp),Me=(0,lf.jz)(Dm);function Mt({library:e,width:t,hideScrollbar:n,isLoading:a}){!function({isLoading:e}){let{currentView:t}=(0,DC.wV)(),n=(0,v.ZC)(t);f.useEffect(()=>(n===DC.S5.Libraries&&t===DC.S5.Pages&&R6.start(),t===DC.S5.Pages&&!e&&R6.isRunning&&R7({didFinishLoading:!0}),()=>{n===DC.S5.Pages&&t!==DC.S5.Pages&&R6.isRunning&&R7({didFinishLoading:!1})}),[e,t,n])}({isLoading:a});let[l]=(0,DM.MA)(),{pagesScrollTop:r,handleScrollPages:i}=Re({libraryKey:null==e?void 0:e.fileKey}),o=f.useMemo(()=>e?Array.from(e.pages):[],[e]),s=(0,Lh.E_)((null==e?void 0:e.fileKey)??""),c=f.useMemo(()=>{let e=[];return o.forEach(([t,n],a)=>{e.push({element:f.createElement(R4,{page:n,index:a}),height:"list"===l?Me:R9,key:t}),0===a&&(0,Lu.dS)(n.name,{isPreset:s})&&e.push({element:f.createElement(DU.cG,null),key:"examples_divider",height:R8})}),e},[l,o,s]);return a?f.createElement("div",{className:"asset_panel_pages--loadingContainer--fyofJ",style:{width:t},"data-testid":"asset-panel-pages-spinner"},f.createElement(re.kt,null)):0===o.length?f.createElement("div",{style:{width:t}}):f.createElement(D6,{elements:c,hideScrollbar:n,initialScrollTop:r,onScroll:i})}let Mn="asset_panel_recents--resultsWrapper--k79Vy",Ma="asset_panel_recents--resultsWrapperList--peuzW",Ml=(0,vc.fv)();function Mr(){let{productComponents:e,templates:t}=(0,eC.g5)(EI.$A.Design),{getLibrary:n}=(0,DB.G)(),a=(0,y.kc)().dse_editor_templates_v1,[l]=(0,DM.MA)(),r="list"===l,i=f.useCallback(e=>{let t=n(e);return(null==t?void 0:t.name)||""},[n]),o=Ru(),{props:s,numColumns:c}=f.useMemo(()=>Rm(o,l,Po.rp.NORMAL),[o,l]),{props:d}=f.useMemo(()=>Rm(o,l,Po.rp.NORMAL,!0),[o,l]),{componentSectionNameForTracking:u,templateSectionNameForTracking:m}=(0,Db.zf)(),p=e.length>0,_=t.length>0;return f.createElement(DU.xU,null,a&&_&&f.createElement(f.Fragment,null,f.createElement(DU.X3,{title:(0,eN.t)("design_systems.assets_panel.templates")}),f.createElement("div",{className:r?Ma:Mn},t.map((e,t)=>f.createElement(Dj,{key:`assetPanelRecents:template:${(0,Lo.V)(e)}`,asset:e,fileName:i(Ml(e)),sectionNameForTracking:m,sectionPosition:t,keyboardPosition:DT([Do.tM.TEMPLATES],t,1),...d})))),a&&_&&p&&f.createElement("div",{className:"asset_panel_recents--buffer--URYGQ"}),p&&f.createElement(f.Fragment,null,a&&_&&f.createElement(DU.X3,{title:(0,eN.t)("design_systems.assets_panel.components")}),f.createElement("div",{className:r?Ma:Mn},e.map((e,t)=>f.createElement(Dj,{key:`assetPanelRecents:component:${(0,Lo.V)(e)}`,asset:e,fileName:i(Ml(e)),sectionNameForTracking:u,sectionPosition:t,keyboardPosition:DT([Do.tM.COMPONENTS],t,c),...s})))),f.createElement("div",{className:"asset_panel_recents--bottomPadding--9BTkl"}))}var Mi=n(453681),Mo=n(396462),Ms=n(858855),Mc=n(527735);let Md=function({isLoading:e,children:t}){return e?f.createElement("div",{className:"maybe_loading--loadingContainer--Wfq03"},f.createElement(re.kt,null)):f.createElement(f.Fragment,null,t)},Mu="asset_panel_search_results--empty--72Hqc",Mm="asset_panel_search_results--showMoreLink--3-Ww3 asset_panel_search_results--showMore--yo9-j blue_link--blueLink--9rlnd",Mp=(0,lf.jz)(Df),Mf=(0,lf.jz)("40px"),M_=(0,vc.fv)(),Mg=({moreResults:e,query:t,assetType:n,showMoreDefault:a})=>{let[l,r]=f.useState(!1),i=a||l,o=f.useCallback(()=>r(!0),[]);f.useEffect(()=>{r(!1)},[t]);let s=(0,eB.ud)(),c=(0,S.md)(Mi.qp),d=f.useCallback(e=>{var t,n;return((0,y.kc)().ds_use_lib_keys?null==(t=c[e.library_key])?void 0:t.name:null==(n=s[M_(e)])?void 0:n.name)??""},[s,c]),[u]=(0,DM.MA)(),m=Ru(),p="templates"===n,{props:_,numColumns:g}=f.useMemo(()=>Rm(m,u,Po.rp.NORMAL,p),[m,u,p]),{componentSectionNameForTracking:h,templateSectionNameForTracking:E}=(0,Db.zf)({moreSearchResults:!0}),v=f.useMemo(()=>D3(e,g,`${n}:moreResults`,_,p?E:h,[p?Do.tM.TEMPLATES:Do.tM.COMPONENTS,1],{getFileName:d}),[e,g,n,_,p,E,h,d]);return f.useMemo(()=>{if(0===e.length)return[];let t=[];return t.push({element:f.createElement("div",{className:"asset_panel_search_results--showMoreText--mEcU5 asset_panel_search_results--showMore--yo9-j"},i&&(0,eN.tx)("design_systems.assets_panel.showing_results_from_all_libraries"),!i&&f.createElement("button",{className:Mm,onClick:o},(0,eN.tx)("design_systems.assets_panel.more_results_in_all_libraries",{results:e.length}))),key:`${n}:showMoreText`,height:Mf}),i&&t.push(...v),t},[n,e.length,i,o,v])},Mh=(0,vc.fv)();function ME({components:e,moreComponents:t,templates:n,moreTemplates:a,query:l,getLibraryNameFromKey:r}){let i=(0,y.kc)().dse_editor_templates_v1,o=e.length+t.length>0,s=n.length+a.length>0,c=f.useCallback(e=>r(Mh(e)),[r]),[d]=(0,DM.MA)(),u=Ru(),{props:m,numColumns:p}=f.useMemo(()=>Rm(u,d,Po.rp.NORMAL),[u,d]),{componentSectionNameForTracking:_,templateSectionNameForTracking:g}=(0,Db.zf)(),h=f.useMemo(()=>D3(e,p,"components",m,_,[Do.tM.COMPONENTS,0],{getFileName:c}),[e,p,m,_,c]),{props:E,numColumns:v}=f.useMemo(()=>Rm(u,d,Po.rp.NORMAL),[u,d]),b=f.useMemo(()=>D3(n,v,"templates",E,g,[Do.tM.TEMPLATES,0],{getFileName:c}),[n,v,E,g,c]),C=Mg({moreResults:t,query:l,assetType:"components",showMoreDefault:0===e.length&&t.length>0}),w=Mg({moreResults:a,query:l,assetType:"templates"}),T=f.useMemo(()=>{let e=[];return(0,y.kc)().asset_search_feedback_text&&e.push({element:f.createElement("a",{href:"https://figma.enterprise.slack.com/archives/C06NDBA1LQM",className:Mm,tabIndex:-1,style:dA.sx.block.$},"#feedback-asset-search"),key:"assetSearchFeedback",height:32}),i&&s&&(e.push({element:f.createElement(DU.X3,{title:(0,eN.t)("design_systems.assets_panel.templates")}),key:"templatesHeader",height:Mp}),e.push(...b),e.push(...w)),o&&(s&&e.push({element:f.createElement(DU.X3,{title:(0,eN.t)("design_systems.assets_panel.components")}),key:"componentsHeader",height:Mp}),e.push(...h),e.push(...C)),e},[i,s,o,b,w,h,C]);return f.createElement(D6,{elements:T,anchorScroll:!0})}let Mv=(0,vc.fv)();function My(){let{query:e,normalizedSearchResults:t,unsubscribedSearchResults:n,isLoading:a}=(0,_.d4)(OG.UQ),l=(0,Ms.U)(),{libraryKey:r}=(0,DC.wV)(),{getLibrary:i}=(0,DB.G)(),{isLoading:o,libraryNameByResourceId:s}=function(e){let{hubFileIds:t,fileKeys:n}=f.useMemo(()=>{let t=Array.from(e),{pass:n,fail:a}=(0,Mc.j)(t,xK.wJ);return{hubFileIds:n,fileKeys:a}},[e]),a=f.useMemo(()=>n.map(e=>({fileKey:e})),[n]),l=f.useMemo(()=>t.map(e=>({hubFileId:e})),[t]),r=(0,eW.p)(eJ.NSA,a,{enabled:a.length>0}),i=(0,eW.p)(eJ.a9b,l,{enabled:l.length>0});return{isLoading:f.useMemo(()=>r.some(e=>"loading"===e.result.status)||i.some(e=>"loading"===e.result.status),[r,i]),libraryNameByResourceId:f.useMemo(()=>{var e;let t={};for(let e of r)"loaded"===e.result.status&&e.result.data.file&&(t[e.args.fileKey]=e.result.data.file.name);for(let n of i)"loaded"===n.result.status&&(null==(e=n.result.data.hubFile)?void 0:e.currentHubFileVersion)&&(t[n.args.hubFileId]=n.result.data.hubFile.currentHubFileVersion.name);return t},[r,i])}}(f.useMemo(()=>new Set(t.map(e=>Mv(e))),[t])),c=Mb(e),d=f.useCallback(e=>{var t;return s[e]??(null==(t=i(e))?void 0:t.name)??""},[s,i]),u=f.useMemo(()=>{var e;return r?null==(e=i(r))?void 0:e.name:void 0},[i,r]),[m,p]=f.useMemo(()=>(0,OG._2)(t.filter(e=>d(Mv(e)))),[t,d]),[g,h]=f.useMemo(()=>(0,OG._2)(n),[n]),E=p.length+h.length>0,v=m.length+g.length>0;return e?f.createElement(Md,{isLoading:o&&c||a||l},E||v?f.createElement(ME,{components:p,moreComponents:h,templates:m,moreTemplates:g,query:e,getLibraryNameFromKey:d}):f.createElement("div",{className:Mu},u?(0,eN.tx)("design_systems.assets_panel.no_results_for_query_in_library",{searchQuery:e,libraryName:u}):(0,eN.tx)("design_systems.assets_panel.no_results_for_query",{searchQuery:e}))):f.createElement("div",{className:Mu},"Search keywords and filter results by specific libraries, templates, and components.")}let Mb=e=>{let t=(0,v.ZC)(e),{isActive:n,start:a}=(0,Mo.Z)(nf.lQ);return f.useEffect(()=>{e!==t&&a(1e4)},[e,t,a]),n},MC=(e,t)=>e===DC.S5.Libraries?0:e===DC.S5.Pages||t?1:2;function Mw({assetPanelItems:e,width:t}){let{libraryKey:n,pageId:a,currentView:l}=(0,DC.wV)(),{previousLibraryKey:r}=(0,DC.RR)(),i=MT(),{getPage:o,getLibrary:s}=(0,DB.G)(),c=(0,Ms.q)()(n);PW(f.useCallback(()=>{let t=0,n=0,a=0;for(let[l,r]of e.allLibrariesUnsorted){if(l===e.localAssets.fileKey){r.numComponents>=0&&(t+=1);continue}t+=1,n+=r.numComponents,a+=Math.min(r.numComponents,20)}return{numLibraries:t,numComponents:n,numComponentsWithLimit:a}},[e])),Mx(),OP();let d=f.useMemo(()=>s(n??r),[s,n,r]),u=f.useMemo(()=>o(n,a),[o,n,a]),m=MC(l,i),[p,g]=(0,RJ.g)();return!function(e,t,n){let a=(0,_.d4)(e=>e.openFile),[l,r]=(0,S.fp)(PQ.GT),i=t.length+n.length;e.numComponents+e.numTemplates>0&&(i+=1),f.useEffect(()=>{if(!l){r(!0);let e=PQ._o.stop();e&&(0,Z.sx)(PQ.YS,{elapsedMs:e,fileKey:null==a?void 0:a.key,teamId:null==a?void 0:a.teamId,orgId:null==a?void 0:a.parentOrgId,isUi3RedesignedAssetPanel:!0,numLibraries:i,numComponents:0,numComponentsShown:0,numSectionsShown:i},{forwardToDatadog:!0})}},[l,r,i,a])}(e.localAssets,p,g),f.createElement(f.Fragment,null,f.createElement(RF,null),l===DC.S5.Search?f.createElement(My,null):l===DC.S5.Recents?f.createElement(Mr,null):f.createElement(Rp,{index:m,width:t},f.createElement(R1,{width:t,hideScrollbar:0!==m,assetPanelItems:e}),!i&&f.createElement(Mt,{library:d,width:t,isLoading:c,hideScrollbar:1!==m}),f.createElement(Rv,{page:u,width:t})))}let MT=()=>{let{getLibrary:e}=(0,DB.G)(),{libraryKey:t}=(0,DC.wV)(),n=(0,Ms.q)()(t),a=e(t);return!!a&&!n&&!!(0,DC.Cg)(a)},Mx=()=>{let{libraryKey:e}=(0,DC.wV)(),t=(0,Di.R)(),n=(0,A_.$)(e);f.useEffect(()=>{e&&(0,xK.wJ)(e)&&n&&t({updateSource:"ui3_library_expand"})},[n,e,t])};var MN=n(900956),MS=n.n(MN);let Mk="asset_panel_collapsible_breadcrumb--buttonStub--4S8VP asset_panel_collapsible_breadcrumb--_buttonStubBase--aj18P",MI="asset_panel_collapsible_breadcrumb--libraryStubStatic--VAyz1 asset_panel_collapsible_breadcrumb--_buttonStubBase--aj18P asset_panel_collapsible_breadcrumb--_libraryStubBase--y4862";function MA({stubs:e}){let{collapsibleStubs:t,lastStub:n,numHiddenStubs:a,breadcrumbRef:l,ellipsisRef:r,stubRefs:i}=MO(e),o=f.useCallback(()=>r.current?{top:r.current.getBoundingClientRect().bottom,left:r.current.getBoundingClientRect().left}:{top:0,left:0},[r]),s=a===t.length;return f.createElement("div",{className:a8.cx.flex.itemsCenter.overflowHidden.flexShrink1.flexGrow1.$,style:dA.sx.add({flexBasis:"content"}).$,ref:l,role:"navigation"},f.createElement(MD,{shouldEllipsize:s}),a>0&&f.createElement(MP,{allStubs:t,numHiddenStubs:a,getDropdownTarget:o,ref:r}),t.map((e,t)=>t<a?null:f.createElement(MR,{key:t,i:t,name:e,ref:e=>i.current[t]=e})),e.length>0?f.createElement(MM,{name:n,firstSlash:0===t.length,shouldEllipsize:s}):null)}let MO=e=>{let[t,n]=f.useMemo(()=>0===e.length?[[],void 0]:[e.slice(0,-1),e[e.length-1]],[e]),[a,l]=f.useState([]),r=f.useRef([]);f.useEffect(function(){r.current.length>t.length&&(r.current=r.current.slice(0,t.length)),a.length>t.length&&l(e=>e.slice(0,t.length))},[t,a.length,e.length]);let i=f.useRef(null),o=f.useRef(null),{width:s}=DX();return f.useLayoutEffect(function(){let e=i.current;if(!e)return;let t=e.children,n=e.offsetWidth-MS()(Array.from(t).map(e=>e.scrollWidth));if(n<0){let e=r.current[a.length];e&&l(t=>[...t,e.scrollWidth])}else if(a.length>0){let e=a.length-1;n>a[e]-(o.current&&1===a.length?o.current.scrollWidth:0)&&l(e=>e.slice(0,-1))}},[a,r,e,s]),{collapsibleStubs:t,lastStub:n,numHiddenStubs:a.length,breadcrumbRef:i,ellipsisRef:o,stubRefs:r}},ML="asset-panel-ellipsis-menu",MP=f.forwardRef(({numHiddenStubs:e,allStubs:t,getDropdownTarget:n},a)=>{var l;let r=(0,Db.sN)(),i=(0,nT.U)(),o=(null==i?void 0:i.type)===ML,s=(0,_.wA)(),c=f.useCallback(()=>s((0,nI.oB)()),[s]),d=f.useCallback(()=>s((0,nI.j7)({type:ML,data:{position:n()}})),[s,n]),{isCurrentlySkippingPage:u,isCurrentlySkippingFirstFolder:m,navigateBackToPathIndex:p}=(0,DC.wV)(),g=f.useMemo(()=>t.slice(0,e),[t,e]),h=f.useMemo(()=>g.join(" / "),[g]),E=f.useMemo(()=>{var e;if(o)return null==(e=i.data)?void 0:e.position},[null==(l=null==i?void 0:i.data)?void 0:l.position,o]),v=f.useCallback(e=>{r("breadcrumb",p(MB(e,u,m)))},[m,u,r,p]),{focusBackButton:y,focusSearchBar:b}=DR(),C=DN({onBoth:e=>()=>{v(e)},onKeyDown:()=>()=>{setTimeout(()=>y(),0)},onClick:()=>b}),{setKeyboardNavigationElement:w}=(0,OI.M3)({path:[Do.ON.BREADCRUMB],column:Do.Yv.ELLIPSIS}),T=nb()(Mk,{"asset_panel_collapsible_breadcrumb--dropdownOpen--YMRPh":o});return f.createElement("div",null,f.createElement("div",{ref:a,className:a8.cx.flex.itemsCenter.$},f.createElement(MF,null),f.createElement("button",{ref:w,className:T,onClick:d,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":h,"aria-label":h,"aria-haspopup":"listbox","aria-expanded":o},"\u2026")),o&&oQ.createPortal(f.createElement(nC.W.DropdownWithAutofocus,{className:nz.Dm,positionAbsolute:!0,style:E,id:"asset-panel-ellipsis-menu",hideDropdown:c,autofocusPrevElementOnEsc:!0},g.map((e,t)=>f.createElement(nC.W.Option,{key:e,onClick:C(t)},e))),document.body))});function MD({shouldEllipsize:e}){let t=(0,af.tS)(),[,,n]=(0,RJ.g)(),{currentView:a,libraryKey:l,navigateToLibrary:r,isCurrentlySkippingPage:i,isCurrentlySkippingFirstFolder:o,folderPath:s}=(0,DC.wV)(),{setLastNavAction:c}=(0,D8.ZX)(),{focusBackButton:d,focusSearchBar:u}=DR(),m=f.useMemo(()=>{var e;return l?l===t?(0,eN.t)("design_systems.assets_panel.local_assets"):null==(e=n.get(l))?void 0:e.name:void 0},[n,l,t]),p=(0,Db.sN)(),_=a===DC.S5.Libraries,g=a===DC.S5.Pages,h=a===DC.S5.Recents,E=f.useMemo(()=>!!g||!!i&&(!s||!!o&&1===s.length),[s,o,i,g]),v=f.useCallback(e=>{let t=r(e);c(D8.r6.Back),p("breadcrumb",t)},[p,r,c]),b=Dx({onBoth:()=>v(l??""),onKeyDown:d,onClick:u}),{setKeyboardNavigationElement:C}=(0,OI.M3)({path:[Do.ON.BREADCRUMB],column:Do.Yv.LIBRARY}),w=nb()(g?MI:"asset_panel_collapsible_breadcrumb--libraryStub--PU1iu asset_panel_collapsible_breadcrumb--buttonStub--4S8VP asset_panel_collapsible_breadcrumb--_buttonStubBase--aj18P asset_panel_collapsible_breadcrumb--_libraryStubBase--y4862",{"asset_panel_collapsible_breadcrumb--ellipsized--vFJ6x ellipsis--ellipsis--Tjyfa":e});return _?f.createElement("div",{className:"asset_panel_collapsible_breadcrumb--allLibraries--6vL0- asset_panel_collapsible_breadcrumb--libraryStubStatic--VAyz1 asset_panel_collapsible_breadcrumb--_buttonStubBase--aj18P asset_panel_collapsible_breadcrumb--_libraryStubBase--y4862",style:{marginLeft:3}},(0,y.kc)().dse_hide_local_and_subscribed_libraries?(0,eN.tx)("design_systems.assets_panel.ui_kits"):(0,eN.tx)("design_systems.assets_panel.dropdown_type_all_libraries")):h?f.createElement("div",{className:MI,style:{marginLeft:3}},(0,eN.tx)("design_systems.assets_panel.dropdown_type_recents")):f.createElement("div",{className:a8.cx.flex.overflowHidden.$},f.createElement("button",{onClick:b,className:w,disabled:E,ref:C,type:"button"},m))}let MR=f.forwardRef(({name:e,i:t},n)=>{let{isCurrentlySkippingPage:a,isCurrentlySkippingFirstFolder:l,navigateBackToPathIndex:r}=(0,DC.wV)(),i=(0,Db.sN)(),o=f.useCallback(e=>{i("breadcrumb",r(e))},[i,r]),s=f.useMemo(()=>MB(t,a,l),[t,l,a]),{setKeyboardNavigationElement:c}=(0,OI.M3)({path:[Do.ON.BREADCRUMB],column:Do.Yv.STUBS+t}),{focusBackButton:d,focusSearchBar:u}=DR(),m=Dx({onBoth:()=>o(s),onKeyDown:d,onClick:u});return e?f.createElement("div",{ref:n,className:a8.cx.flex.itemsCenter.$},f.createElement(MF,null),f.createElement("button",{ref:c,onClick:m,className:Mk},e)):null});function MM({name:e,shouldEllipsize:t}){let n=f.useRef(null),{pageId:a,folderPath:l}=(0,DC.wV)(),{width:r}=DX(),[i,o]=f.useState(!1);return(f.useEffect(()=>{o(!!(0,AE._C)({text:e??"",textRef:n}))},[e,r]),f.useEffect(()=>{setTimeout(()=>o(!!(0,AE._C)({text:"",textRef:n})),0)},[a,l]),e)?f.createElement("div",{className:a8.cx.noWrap.flex.itemsCenter.if(t,a8.cx.overflowHidden).$},f.createElement(MF,null),f.createElement("div",{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":i?e:void 0,ref:n,className:a8.cx.mx4.px2.if(t,a8.cx.overflowHidden.noWrap.ellipsis).$,"aria-current":"location"},e)):null}function MF(){return f.createElement("div",{className:"asset_panel_collapsible_breadcrumb--breadcrumbSlash--XWfHn","aria-hidden":!0}," / ")}let MB=(e,t,n)=>{let a=e;return t&&a++,n&&a++,a-1};var MU=n(882316);function MH({libraryName:e}){let t=(0,_.wA)(),{currentView:n,startSearch:a,onBack:l,libraryKey:r}=(0,DC.wV)(),i=n===DC.S5.Search,{inputRef:o,focusSearchBar:s}=DR(),c=(0,_.d4)(e=>e.leftPanel.shouldFocusSearchBar),{query:d}=(0,_.d4)(OG.UQ),u=(0,af.tS)(),m=f.useCallback(()=>{i&&l()},[i,l]),p=f.useMemo(()=>r?r===u?{type:OK.I.LOCAL}:{type:OK.I.FILE,fileKey:r}:{type:OK.I.ALL},[r,u]),g=f.useCallback(e=>{t(OA.ku({query:e,searchOptions:p,entryPoint:"asset_panel"})),""===e?m():i||a()},[t,i,m,p,a]),h=f.useRef(void 0);f.useEffect(()=>{i&&(d&&h.current!==r&&t(OA.gP({searchOptions:p})),h.current=r)},[t,i,r,d,p]);let E=f.useCallback(()=>{""===d&&m()},[m,d]),v=f.useCallback(()=>{g(""),s(),m()},[g,s,m]),y=(0,_.d4)(e=>e.mirror.appModel.activeCanvasEditModeType);f.useEffect(()=>{let e=e=>{let t=C.Ay.chromeos?e.altKey&&e.shiftKey&&e.keyCode===b.Uz.KEY_2:e.altKey&&e.keyCode===b.Uz.KEY_2,n=!(0,aI.AL)()&&e.shiftKey&&e.keyCode===b.Uz.I&&!(0,Db.Qk)(e.target);(t||n)&&y!==ei.m1T.TEXT&&(s(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[y,s]);let w=f.useMemo(()=>e?(0,eN.t)("design_systems.assets_panel.search_library"):(0,eN.t)("design_systems.assets_panel.search_all_libraries"),[e]);return f.createElement("div",{className:"asset_panel_search--container--u0qoH asset_panel_search--horizontalFlex---CG1k"},f.createElement(Af.h,null),f.createElement(OV.E1,{path:[Do.ON.HEADER,Do.my.SEARCH_AND_FILTER],column:Do.Wy.SEARCH,isNewAssetsPanel:!0,query:d,onChange:g,onFocus:nf.lQ,onBlur:E,onClearSearch:v,forwardedRef:o,isVisible:!0,entryPointForTracking:"editor:assets_panel",autofocus:c,recordingKey:"componentsLibrarySearch",placeholder:w,selectOnFocus:!0}))}function MG({library:e}){let{navigateToTop:t}=(0,DC.wV)(),{focusSearchBar:n}=DR(),a=(0,Db.sN)(),l=f.useCallback(()=>{a("searchFilterChip",t()),n()},[n,a,t]),{setKeyboardNavigationElement:r}=(0,OI.M3)({path:[Do.ON.HEADER,Do.my.LIBRARY_SEARCH_CHIP]});return e?f.createElement("div",{className:"asset_panel_search--libraryChip--1nfYR asset_panel_search--horizontalFlex---CG1k","data-testid":"asset-panel-search-chip"},f.createElement("span",{className:"asset_panel_search--libraryChipText--3TsfE ellipsis--ellipsis--Tjyfa"},e.name),f.createElement(a7.GG,{className:"asset_panel_search--libraryChipRemove--kJiJn",onClick:l,recordingKey:"asset-panel-search-chip","aria-label":(0,eN.t)("design_systems.assets_panel.search_chip_label"),forwardedRef:r},f.createElement(MU.f,null))):null}var MV=n(221768),MK=n(18991),MW=n(343427),Mz=n(270133);let Mj="assets-panel-settings";function MJ({includeFolderSetting:e=!0}){var t;let n=f.useRef(null),{setKeyboardNavigationElement:a}=(0,OI.M3)({path:[Do.ON.HEADER,Do.my.SEARCH_AND_FILTER],column:Do.Wy.SETTINGS}),l=(0,af.tS)(),r=(0,nT.U)(),i=(null==r?void 0:r.type)===Mj,o=(0,_.wA)(),s=f.useCallback(()=>{var e,t;i?o((0,nI.oB)()):(o((0,nI.j7)({type:Mj,data:{position:{top:null==(e=n.current)?void 0:e.getBoundingClientRect().bottom,left:null==(t=n.current)?void 0:t.getBoundingClientRect().left}}})),Z.az.trackDefinedEvent("assets_panel.asset_type_dropdown_opened",{fileKey:l??void 0,assetsPanelVersion:3}))},[o,l,i]),c=f.useMemo(()=>{var e;if(i)return null==(e=r.data)?void 0:e.position},[null==(t=null==r?void 0:r.data)?void 0:t.position,i]);return f.createElement(f.Fragment,null,f.createElement(Oz.d,{onClick:s,toggled:i,ref:(0,EF.A)(n,a),"aria-haspopup":"listbox","aria-expanded":i,"aria-label":(0,eN.t)("design_systems.assets_panel.settings_label"),"data-testid":"asset-panel-settings-button"},f.createElement(MV.A,null)),i&&f.createElement(MY,{position:c,includeFolderSetting:e,buttonRef:n}))}function MY({position:e,includeFolderSetting:t,buttonRef:n}){let a=(0,_.wA)(),l=f.useCallback(()=>{a((0,nI.oB)())},[a]),r=(0,Db.R2)("number"==typeof(null==e?void 0:e.top)?e.top:void 0),{productComponents:i,templates:o}=(0,eC.g5)(EI.$A.Design),[s]=(0,DM.MA)(),[c]=(0,DM.ye)(),{currentView:d,libraryKey:u}=(0,DC.wV)(),{getLibrary:m}=(0,DB.G)(),p=(0,af.tS)(),g=f.useMemo(()=>d!==DC.S5.Search&&(i.length>0||o.length>0),[d,i.length,o.length]),h=f.useMemo(()=>p?m(p):void 0,[m,p]),E=!!h&&(h.numComponents>0||h.numTemplates>0),[v,y]=(0,RJ.g)(),{goToLibrary:b,goToAll:C,goToRecents:w,changeAssetsView:T,toggleShowFolders:x}=function(e){let t=(0,af.q5)(),n=(0,Db.sN)(),{navigateToLibrary:a,navigateToTop:l,navigateToRecents:r}=(0,DC.wV)(),{setLastNavAction:i}=(0,D8.ZX)(),[,o]=(0,DM.MA)(),[,s]=(0,DM.ye)(),{focusSearchBar:c}=DR(),d=f.useCallback(e=>{n("settingsMenu",e)},[n]),u=f.useCallback(e=>{d(a(e)),c()},[c,a,d]),m=f.useCallback(()=>{d(l()),c()},[c,l,d]),p=f.useCallback(()=>{d(r()),c()},[c,r,d]),_=f.useCallback(()=>{var t;return null==(t=e.current)?void 0:t.focus()},[e]),g=f.useCallback(e=>{Z.az.trackDefinedEvent("assets_panel.view_mode_changed",{viewMode:e,fileKey:null==t?void 0:t.key,fileTeamId:(null==t?void 0:t.teamId)??void 0,fileOrgId:(null==t?void 0:t.parentOrgId)??void 0}),o(e),i(D8.r6.ToggleView)},[null==t?void 0:t.key,null==t?void 0:t.parentOrgId,null==t?void 0:t.teamId,o,i]),h=DN({onBoth:e=>()=>g(e),onKeyDown:()=>_}),E=f.useCallback(e=>{Z.az.trackDefinedEvent("assets_panel.folder_toggle",{showFolders:e,fileKey:null==t?void 0:t.key,fileTeamId:(null==t?void 0:t.teamId)??void 0,fileOrgId:(null==t?void 0:t.parentOrgId)??void 0}),s(e)},[null==t?void 0:t.key,null==t?void 0:t.parentOrgId,null==t?void 0:t.teamId,s]);return{goToLibrary:u,goToAll:m,goToRecents:p,changeAssetsView:h,toggleShowFolders:DN({onBoth:e=>()=>E(e),onKeyDown:()=>_})}}(n),N=f.useMemo(()=>{let e=[];return e.push(MX({text:(0,eN.t)("design_systems.assets_panel.dropdown_type_all_libraries"),checked:d===DC.S5.Libraries||d===DC.S5.Search&&!u,onClick:C})),g&&e.push(MX({text:(0,eN.t)("design_systems.assets_panel.dropdown_type_recents"),checked:d===DC.S5.Recents&&i.length>0,onClick:w})),E&&e.push(MX({text:h.name,checked:d!==DC.S5.Recents&&u===h.fileKey,onClick:()=>b(h.fileKey)})),(v.length>0||y.length>0)&&e.push(f.createElement(nC.W.Separator,null)),e.push(...v.map(({name:e,fileKey:t})=>MX({text:e,isApproved:(0,O3.vR)(t),checked:d!==DC.S5.Recents&&u===t,onClick:()=>b(t)}))),e.push(...y.map(({name:e,fileKey:t})=>MX({text:e,isApproved:(0,O3.vR)(t),isPreset:!0,checked:d!==DC.S5.Recents&&u===t,onClick:()=>b(t)}))),e.push(f.createElement(nC.W.Separator,null)),e.push(MX({text:(0,eN.t)("design_systems.assets_panel.view_toggle_grid"),checked:s===DM.$H.GRID,onClick:T(DM.$H.GRID),icon:f.createElement(MK.t,null)})),e.push(MX({text:(0,eN.t)("design_systems.assets_panel.view_toggle_list"),checked:s===DM.$H.LIST,onClick:T(DM.$H.LIST),icon:f.createElement(MW.Z,null)})),t&&e.push(MX({text:(0,eN.t)("design_systems.assets_panel.view_toggle_show_folders"),checked:c,onClick:x(!c),icon:f.createElement(Mz.e,null)})),e},[s,T,u,d,C,b,w,E,g,t,null==h?void 0:h.fileKey,null==h?void 0:h.name,y,i.length,c,v,x]),S=f.useMemo(()=>({...e,maxHeight:r}),[r,e]);return oQ.createPortal(f.createElement(nC.W.DropdownWithAutofocus,{className:nb()(nz.Dm,"asset_panel_settings--dropdown--gs7K3"),positionAbsolute:!0,style:S,id:Mj,hideDropdown:l,autofocusPrevElementOnEsc:!0},N),document.body)}function MX({text:e,isApproved:t,isPreset:n,checked:a,onClick:l,icon:r}){return f.createElement(nC.W.CheckableOption,{className:"asset_panel_settings--dropdownOption--kJ-6M",checked:!!a,onClick:l,key:e},f.createElement("div",{className:"asset_panel_settings--optionContentContainer--iAJ6X"},f.createElement("div",{className:"asset_panel_settings--optionContent---2nCX ellipsis--ellipsis--Tjyfa"},r?f.createElement("div",{className:"asset_panel_settings--optionWithLeftIconContainer--QP3Gm"},r,f.createElement("span",null,e)):e),f.createElement("div",{className:"asset_panel_settings--optionRightIcon--zi-2v"},t?f.createElement(O4.FX,null):n?f.createElement("div",{className:a8.cx.ml2.$},f.createElement(O7.S,{hubFileId:void 0})):null)))}function Mq(){let{getPage:e,getLibrary:t}=(0,DB.G)(),{libraryKey:n,pageId:a}=(0,DC.wV)(),l=f.useMemo(()=>e(n,a),[e,n,a]),r=f.useMemo(()=>t(n),[t,n]);return f.createElement("div",{className:"asset_panel_header--assetPanelHeader--ZWb-Q"},f.createElement(MZ,{library:r}),f.createElement(MQ,{page:l}))}function MZ({library:e}){let{currentView:t}=(0,DC.wV)();return f.createElement("div",{className:a8.cx.grid.gap4.itemsCenter.ml8.$,style:dA.sx.add({gridTemplateColumns:"1fr auto",gridTemplateRows:"32px",gridAutoRows:"auto"}).$},f.createElement("div",{style:dA.sx.add({gridRow:1,gridColumn:1}).$},f.createElement(MH,{libraryName:null==e?void 0:e.name})),f.createElement("div",{style:dA.sx.flex.itemsCenter.add({gridRow:1,gridColumn:2}).$},f.createElement(MJ,{includeFolderSetting:[DC.S5.Libraries,DC.S5.Pages,DC.S5.Assets].includes(t)})),t===DC.S5.Search&&e&&f.createElement("div",{style:dA.sx.flex.minW0.add({gridRow:2,gridColumn:1}).$},f.createElement(MG,{library:e})))}function MQ({page:e}){let{currentView:t,folderPath:n,onBack:a,libraryKey:l,isCurrentlySkippingPage:r,isCurrentlySkippingFirstFolder:i}=(0,DC.wV)(),o=(0,Db.sN)(),s=(0,_.d4)(e=>e.modalShown),c=(0,_.wA)(),{setBackButtonKeyboardItem:d,focusSearchBar:u}=DR(),m=Dx({onBoth:f.useCallback(()=>{o("backButton",a()),(null==s?void 0:s.type)===O8.V&&c(ty.AS())},[a,o,null==s?void 0:s.type,c]),onKeyDown:f.useCallback(()=>{t===DC.S5.Recents?l||u():t===DC.S5.Pages?u():t===DC.S5.Assets&&r&&!n&&u()},[t,u,n,r,l]),onClick:u}),p=f.useMemo(()=>{if(t===DC.S5.Search||t===DC.S5.Recents)return[];let a=(null==e?void 0:e.name)&&!r?[e.name]:[],l=n??[];return[...a,...i?l.slice(1):l]},[t,n,r,i,null==e?void 0:e.name]),g=RY(),h=t!==DC.S5.Libraries&&t!==DC.S5.Search;return g?null:f.createElement(f.Fragment,null,t!==DC.S5.Search&&f.createElement("div",{className:"asset_panel_header--breadcrumbWrapper--NC2Ps asset_panel_header--horizontalFlex--k99PA"},h&&f.createElement(vJ.K,{"aria-label":(0,eN.t)("design_systems.assets_panel.back"),onClick:m,ref:d,recordingKey:"assetsPanelBack"},f.createElement(lu.C,null)),f.createElement(MA,{stubs:p})))}var M$=n(285272);let M0=e=>f.useCallback(t=>{t()||e()},[e]);function M1({width:e}){let t=(0,M$.j)(),n=function(e){var t,n;let a=(0,ew.iZ)(),l=(0,af.q5)(),r=(0,dt.jO)(),i=(0,eT.f)("has_dismissed_component_sidebar_library_upsell_banner"),o=(0,_.d4)(e=>e.isFreeUser),s=(0,_.d4)(OR.P),c=(null==l?void 0:l.teamId)?s[l.teamId]:null,d=(0,eW.Rs)(eJ.GyZ,{teamId:(null==l?void 0:l.teamId)??""},{enabled:!!(null==l?void 0:l.teamId)}),u=(null==l?void 0:l.canEdit)??!1,m=(null==(n=null==(t=null==d?void 0:d.data)?void 0:t.team)?void 0:n.canEdit)??!1,p=e.numComponents>0||e.numTemplates>0;return f.useMemo(()=>!i&&o&&(!c||!(0,cw.w5)(c)&&m)&&u&&r&&p&&(0,dD.Hz)(null==a?void 0:a.id),[i,o,c,m,u,r,p,a])}(t.localAssets),a="loading"===(0,eG.je)().status,l=(0,e2.Xr)(D5),r=f.useCallback(()=>l(!0),[l]);return f.createElement(M2,{assetPanelItems:t,width:e},f.createElement(Mq,null),f.createElement(Md,{isLoading:a},f.createElement(Mw,{assetPanelItems:t,width:e})),n&&f.createElement(Pj,null),f.createElement(OF.Mw,{width:e,scrollToPreset:r}))}function M2({children:e,width:t,assetPanelItems:n}){return f.createElement(D8.P3,null,f.createElement(DB.K,{assetPanelItems:n},f.createElement(DL,{className:Dw},f.createElement(M5,null,f.createElement(Dq,{width:t},e)))))}function M5({children:e}){return!function(){let{libraryKey:e,pageId:t,folderPath:n,navigateToTop:a,navigateToPage:l,navigateToPath:r,navigateToLibrary:i,currentView:o,onBack:s}=(0,DC.wV)(),c=(0,Ms.q)(),d=c(e),{getLibrary:u,getPage:m,getFolder:p}=(0,DB.G)(),{setLastNavAction:_}=(0,D8.ZX)(),g=M0(a),[,,h]=(0,RJ.g)(),[E,v]=(0,S.fp)(OU.Cl);f.useEffect(()=>{E&&h.size>0&&((0,Db.hB)(()=>i(E)),v(null))},[E,i,v,h]),(0,DC.sH)(),f.useEffect(function(){if(o!==DC.S5.Assets&&o!==DC.S5.Pages)return;let i=u(e),d=h.get(e);if(!i){if(c(e)&&d&&o!==DC.S5.Assets)return;g(a);return}if(t){if(!(null==i?void 0:i.pages.get(t))){let e=(0,DC.Cg)(i);e?g(()=>l(e.id)):g(s);return}if(n&&!p(e,t,n)){let a=n.slice(0,-1),i=p(e,t,a);for(;!i&&a.length>0;)i=p(e,t,a=a.slice(0,-1));if(!i)return g(()=>l(t));let o=parent?(0,DC.xc)(i):void 0;return void(o?g(()=>r([...a,o.name])):(g(()=>r(a)),_(D8.r6.Back)))}}},[s,d,e,o,t,n,a,l,u,p,r,_,g,h,c]),f.useEffect(function(){let a=u(e);if(!a||d)return;let i=(0,DC.Cg)(a);if(o===DC.S5.Pages&&i)l(i.id);else if(o===DC.S5.Assets){let a=p(e,t,n);if(!a)return;let l=(0,DC.xc)(a);l&&r([...n??[],l.name])}},[d,o,n,p,u,m,e,l,r,s,t])}(),f.createElement(f.Fragment,null,e)}function M4(){return f.createElement("div",{className:a8.cx.colorTextSecondary.my8.mx16.$},(0,eN.tx)("design_systems.assets_panel.error"))}var M3=n(737433),M6=n(668876),M7=n(13379),M8=n(149374);class M9{constructor(e,t,n,a,l={}){this.component=e,this.onMouseDown=t,this.onMouseMove=n,this.onMouseUp=a,this.options=l,this.oldTouch=null,this.draggingID=null,this.deferredDragStart=null,this.onTouchStart=e=>{if(e.stopPropagation(),null===this.draggingID&&e.touches.length>0&&this.shouldAdaptTouch(e.touches[0])){let t=e.touches[0];if(this.draggingID=t.identifier,document.addEventListener("touchmove",this.onTouchMove,{passive:!1}),document.addEventListener("touchend",this.onTouchEndOrCancel),document.addEventListener("touchcancel",this.onTouchEndOrCancel),this.options.delayInMS){let n=!1;if(this.deferredDragStart=a=>{if(n)return!1;let l=a.clientX-t.clientX,r=a.clientY-t.clientY;return!(10>Math.sqrt(l*l+r*r))&&(n=!0,!this.options.delayInMS&&(this.onMouseDown(this.mouseEvent("mousedown",e,t)),!0))},this.options.delayInMS){let a=this.deferredDragStart;setTimeout(()=>{this.deferredDragStart!==a||n||(this.deferredDragStart=null,this.onMouseDown(this.mouseEvent("mousedown",e,t)))},this.options.delayInMS)}}else this.deferredDragStart=null,this.onMouseDown(this.mouseEvent("mousedown",e,t))}},this.onTouchMove=e=>{if(e.stopPropagation(),null!==this.draggingID){for(let t of e.touches)if(t.identifier===this.draggingID){if(this.deferredDragStart){if(!this.deferredDragStart(t))break;this.deferredDragStart=null}e.preventDefault(),this.onMouseMove(this.mouseEvent("mousemove",e,t));break}}},this.onTouchEndOrCancel=e=>{e.stopPropagation(),null!==this.draggingID&&(this.draggingID=null,document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEndOrCancel),document.removeEventListener("touchcancel",this.onTouchEndOrCancel),this.deferredDragStart?this.deferredDragStart=null:this.onMouseUp(this.mouseEvent("mouseup",e,this.oldTouch)))}}mouseEvent(e,t,n){this.oldTouch=n;let a=new MouseEvent(e,{altKey:t.altKey,metaKey:t.metaKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});return Object.defineProperty(a,"target",{value:t.target}),Object.defineProperty(a,"currentTarget",{value:t.currentTarget}),a}shouldAdaptTouch(e){if(!this.options.observeInsideOverflowScroll){let t=oQ.findDOMNode(this.component);for(let n=e.target;n;n=n.parentElement){let a=getComputedStyle(n).overflowY;if("scroll"===a||"auto"===a){let t=n.getBoundingClientRect();if(e.clientX>=t.left&&e.clientX<t.right&&e.clientY>=t.top&&e.clientY<t.bottom)return!1}if(n===t)break}}return!0}}var Fe=n(752353);function Ft(){let{show:e,isShowing:t,complete:n,uniqueId:a}=(0,n7.e)({overlay:an.xtb,priority:n8.N.SECONDARY_MODAL}),l=dE.y.isApple(),r=f.useMemo(()=>f.createElement(nw.S,{shortcut:l?"\u2303\u21E7A":"Ctrl+Alt+Shift+A"}),[l]);return(0,sD.E)(a,Fe.in,()=>{e({canShow:()=>!!(0,y.kc)().ce_al_show_msal_onboarding})}),f.createElement(n9.rq,{isShowing:t,targetKey:xU.vx,arrowPosition:ae.F_.LEFT_TITLE,trackingContextName:"MSAL Onboarding Overlay",title:f.createElement("p",{"data-testid":"msal-onboarding-title"},(0,eN.tx)("fullscreen.msal_onboarding.header_with_shortcut",{msalShortcut:r})),description:(0,eN.tx)("fullscreen.msal_onboarding.body"),primaryCta:{label:(0,eN.tx)("general.got_it"),type:"button",onClick:n,variantOverride:"primary",ctaTrackingDescriptor:ar.c.GOT_IT},secondaryCta:{label:(0,eN.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/en-us/articles/5731482952599#suggest",ctaTrackingDescriptor:ar.c.LEARN_MORE},onClose:n,onTargetLost:n,emphasized:!0,disableHighlight:!0})}var Fn=n(36127),Fa=n(741944),Fl=n(668092);function Fr(e){let{top:t,width:n,guid:a,level:l,onMouseEnter:r,recordingKey:i}=e,o=n_.rf(i,"click",e=>{aT.bd([a])}),s={transform:`translate3d(0px, ${t}px, 0)`,width:n,height:Fa.FL},c={width:Pn.iy*l*2,marginRight:1===l?Pn.iy/2:0};return f.createElement("div",{className:"layer_expansion_row--layerExpansionRow--G8Twa object_row--row--HIYa5",style:s,onMouseDown:e=>e.stopPropagation(),onClick:o,onMouseEnter:r,role:"button",tabIndex:0},f.createElement("span",{className:"layer_expansion_row--layerExpansionIndent--Bg5Df object_row--indent--uZlad",style:c}),f.createElement("span",{className:"layer_expansion_row--iconWrapper--J3NJb object_row--iconWrapper--ivRSW"},f.createElement(a2.B,{svg:Fl.A})),f.createElement("span",{className:"layer_expansion_row--rowText--yhMnt object_row--rowText--3qo7Q ellipsis--ellipsis--Tjyfa"},(0,eN.tx)("design_systems.component_properties.see_all_layers")))}var Fi=n(357864);let Fo="objects_panel--dropTargetBox--4SX8i",Fs=new M6.V;function Fc(e){return"object"===e.rowType?e.guid:"layer-expansion"===e.rowType?`expand-${e.containingPrimaryInstanceGUID}`:e.sectionId}class Fd extends n_.o6{constructor(e){super(e),this.state={scrollTop:0,scrollLeft:0,mouseDown:null,dropTarget:null,needsScrollLine:!1},this.AIRenameScrollEventListener=null,this.cachedAllRowData=[],this.topByGuid=Object.create(null),this.totalHeight=0,this.setNeedsScrollLine=e=>{this.setState({needsScrollLine:e>0})},this.rangeSelectAnchorNodeId=null,this.getScene=()=>this.props.sceneGraph||lE.q.instance,this.initializeRows=e=>{let t=this.getScene(),n=e.customRowBuilder?e.customRowBuilder():(0,Fi.Sk)(t,e.topNodeFields,e.showImmutableFrameSublayers,e.temporarilyExpandedInstanceLayers,e.includeTopNode);this.topByGuid=n.topByGuid,this.sectionById=n.sectionById,this.totalHeight=n.totalHeight,this.cachedAllRowData=n.rowData},this.justToggledExpandedGuid=null,this.anchorNodeId=null,this.topNodeDelta=0,this.lastCollapsedScrollPosition=null,this.scrollAfterNodeExpanded=!1,this.lastCollapsedGuid=null,this.hasCrossedDragThreshold=!1,this.onLeftPanelCollapsedChange=e=>{if(!e){let e=this.getTopSelectedNodeId();e&&this.scrollToNode({nodeId:e})}},this.scrollToNodeIdAfterUpdate=null,this.scrollToNode=({nodeId:e,forStackInsertion:t})=>{let n=this.topByGuid[e];if(null==n){let t=this.getScene().get(e);t&&t.parentGuid&&aT.hq(t.parentGuid),this.scrollToNodeIdAfterUpdate=e;return}this.isVisible(n,n+Fa.FL)||this.scrollNodeIntoView(e,{forStackInsertion:t})},this.onAIRenameScrollToNode=({guid:e})=>{S.zl.get(Fn.uK).autoScroll&&this.scrollNodeIntoView(e,{fromAIRename:!0})},this.recalculateLayout=()=>{this.windowInnerHeight=window.innerHeight,this.recalculateRequested=!1},this.recalculateRequested=!1,this.requestRecalculateLayout=()=>{this.recalculateRequested||requestAnimationFrame(this.recalculateLayout)},this.isScrolling=!1,this.scrollingTimeout=null,this.handleMouseEnterAfterScroll=null,this.onScroll=e=>{this.isScrolling=!0,this.nextScrollTop=e,null==this.frameRequestY&&(this.frameRequestY=requestAnimationFrame(this.setScrollTopState)),null!=this.scrollingTimeout&&clearTimeout(this.scrollingTimeout),this.scrollingTimeout=setTimeout(this.doneScrolling,50),this.props.onScroll(e),this.setNeedsScrollLine(e),S.zl.set(Fn.uK,{autoScroll:!1})},this.onScrollLeftChanged=e=>{this.props.horizontalScrollEnabled&&(this.nextScrollLeft=e,null==this.frameRequestX&&(this.frameRequestX=requestAnimationFrame(this.setScrollLeftState)))},this.doneScrolling=()=>{this.isScrolling=!1,this.scrollingTimeout=null,this.handleMouseEnterAfterScroll&&(this.handleMouseEnterAfterScroll(),this.handleMouseEnterAfterScroll=null)},this.computeScrollDelta=e=>{let t=e/Fa.FL;return Fa.FL*t*t},this.frameRequestY=null,this.frameRequestX=null,this.nextScrollTop=0,this.nextScrollLeft=0,this.setScrollTopState=()=>{this.setState({scrollTop:this.nextScrollTop}),this.frameRequestY=null},this.setScrollLeftState=()=>{this.setState({scrollLeft:this.nextScrollLeft}),this.frameRequestX=null},this.isNodeSticky=e=>((0,o2.xO)(o5.e.FIGJAM_CORE,this.props),e.parentGuid===this.props.currentPage&&("SYMBOL"===e.type||"FRAME"===e.type&&!e.resizeToFit)),this.isAncestorSticky=e=>{let t=this.getScene(),n=e.parentGuid?t.get(e.parentGuid):null;for(;n&&n.guid!==this.props.currentPage;){if(this.isNodeSticky(n))return!0;n=n.parentGuid?t.get(n.parentGuid):null}return!1},this.stickyHeaderGuid=null,this.lastStickyHeaderGuid=null,this.lastExpansionTarget=null,this.findStickyHeaderRowAndReplaceInVisibleRows=e=>{if(this.stickyHeaderGuid=null,(this.state.scrollTop>0||this.scrollAfterNodeExpanded)&&e.length>0){let t;let n=this.state.scrollTop,a=(e,t,n)=>{if("object"!==e.rowType)return!1;let a=this.findStickyHeader(e,t,n);if(a){let t=this.renderedVisibleRowProps.indexOf(e);t>=0?this.renderedVisibleRowProps[t]=a:this.renderedVisibleRowProps.push(a)}return!!a},l=null;for(let r=0;r<e.length;r++)if(0===(t=e[r]).level){if(l&&a(l,l.top,t.top)||t.top>n)return;l=t}(0,nm.KF)(!!l,"has at least one top level section"),a(l,l.top,Number.POSITIVE_INFINITY)}},this.scrollNodeIntoView=(e,t)=>{let n=t&&t.fromAIRename||!1,a=t&&t.forStackInsertion||!1;if(null==this.topByGuid[e]||!this.scrollContainerEl||!this.scrollContainer)return;let l=this.topByGuid[e],r=this.state.scrollTop,i=this.scrollContainerHeight();if(this.stickyHeaderGuid===e){a&&this.scrollContainer.scrollTo(l-1);return}let o=this.getScene().get(e);if(!o)return;n||S.zl.set(Fn.uK,{autoScroll:!1});let s=this.isAncestorSticky(o);s&&l<r+Fa.FL?this.scrollContainer.scrollTo(l-Fa.FL):!s&&l<r?this.scrollContainer.scrollTo(l):l+Fa.FL>r+i&&this.scrollContainer.scrollTo(l-i/2)},this.rowContextMenu=(e,t)=>{if(this.props.onRowContextMenu){this.props.onRowContextMenu(e,t);return}let n=this.getScene().get(e);if(!n)return;(0,OM.sp)(this.getScene(),this.props.sceneGraphSelection,n.guid)||this.updateSelection(n.guid);let{clientX:a,clientY:l}=t;this.props.dispatch(nI.j7({type:nz.Rb,data:{clientX:a,clientY:l}}))},this.rowContainerMouseDown=n_.cZ(this,"mousedown",e=>{let t=this.guidAtMousePosition(e.clientY);if(!t)return;if(e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&!this.props.renamingGuid&&document.activeElement.blur(),(this.props.allowToggleSelection??!0)&&(0,b.Fo)(e)){this.toggleSelected(t);return}(0,y.kc)().version_diffing&&this.props.editModeType===ei.m1T.COMPARE_CHANGES&&ei.glU.setActiveChange(t)&&this.props.showViewChangesNotification(t);let n=(0,i$.IL)(this.props.sceneGraphSelection),a=null;if(n?a=n:this.rangeSelectAnchorNodeId&&(0,OM.K3)(this.props.sceneGraphSelection,this.rangeSelectAnchorNodeId)&&(a=this.rangeSelectAnchorNodeId),(this.props.allowSelectRange??!0)&&e.shiftKey&&a){aT.GL(a,t),et.Y5.commit();return}(0,OM.sp)(this.getScene(),this.props.sceneGraphSelection,t)||(this.updateSelection(t),this.rangeSelectAnchorNodeId=t),(0,M7.i)(e)||this.setState({mouseDown:new r4.Mi(e.clientX,e.clientY)})},{recordMetadata:e=>{let t=this.guidAtMousePosition(e.clientY);return(0,nm.KF)(!!t,"interaction test does not support rare case of no guid under mouse (empty layers panel?)"),{path:(0,Pn.eT)(t,this.getScene()),clientX:e.clientX}},playbackMetadata:e=>{let t=this.topByGuid[(0,Pn.g2)(e.path,this.getScene(),this.props.currentPage)]+Fa.FL/2;return{clientY:this.clientY(t),clientX:e.clientX}}}),this.onMouseMove=e=>{if(this.scrollContainer&&this.scrollContainerEl&&this.state.mouseDown&&!this.props.renamingGuid){this.state.mouseDown.distanceTo({x:e.clientX,y:e.clientY})>3&&(this.hasCrossedDragThreshold=!0);let t=this.relativeY(e.clientY),n=this.state.scrollTop,a=this.scrollContainerHeight();if(a>0){if(t<n){this.scrollContainer.scrollTo(n-this.computeScrollDelta(n-t));return}if(t>n+a){this.scrollContainer.scrollTo(n+this.computeScrollDelta(t-n-a));return}}let l=(0,Pn.OL)(this.getScene(),this.props.sceneGraphSelection,this.topByGuid,this.sectionById,e.clientX-this.state.mouseDown.x,t,this.mouseOverStickyHeaderGuid(e.clientY),this.props.panelType??Pn.g$.Object,this.props.topNodeFields);this.state.dropTarget&&l&&this.state.dropTarget.index!==l.index&&M3.H.trigger(ei.JA.SNAP),(this.hasCrossedDragThreshold||!l)&&(this.expandDropTargetIfNeeded(l,t),this.setState({dropTarget:l}))}},this.onMouseUp=n_.cZ(this,"mouseup",e=>{let t=this.getScene(),n=!1;if(this.hasCrossedDragThreshold=!1,this.state.mouseDown&&!this.props.renamingGuid){if(n=!0,3>=this.state.mouseDown.distanceTo(new r4.Mi(e.clientX,e.clientY))){if(!(0,M7.i)(e)){let t=this.guidAtMousePosition(e.clientY);t?this.updateSelection(t):n=!1}}else if(!this.props.isReadOnly){let n=(0,Pn.OL)(t,this.props.sceneGraphSelection,this.topByGuid,this.sectionById,e.clientX-this.state.mouseDown.x,this.relativeY(e.clientY),this.mouseOverStickyHeaderGuid(e.clientY),this.props.panelType??Pn.g$.Object,this.props.topNodeFields);if(!n)return;let{parentGuid:a,index:l,section:r}=n,i=t.get(a);if(!i||void 0===l)return;let o=e.altKey,s=(0,Pn.Lc)(i,l);o?o4.l7.user("duplicate-selection",()=>aT.kH(i.guid,s,r)):o4.l7.user("reparent-selection",()=>aT.Yu(i.guid,s,r)),aT.hq(i.guid),ei.Egt.clearTemporarilyExpanded(),et.Y5.commit()}}if(this.setState({mouseDown:null,dropTarget:null}),this.isDraggingToToggle&&(n=!0,this.isDraggingToToggle=null,et.Y5.commit()),!n)return n_.aH},{recordMetadata:e=>{let t=this.getScene(),n=this.guidAtMousePosition(e.clientY),a=this.relativeY(e.clientY);(0,nm.KF)(!!n,"interaction test does not support rare case of no guid under mouse (empty layers panel?)");let l=this.topByGuid[n];return{path:(0,Pn.eT)(n,t),treatAsEndOfClick:!!(this.state.mouseDown&&5>this.state.mouseDown.distanceTo(new r4.Mi(e.clientX,e.clientY))),belowAll:a>l+Fa.FL,clientX:e.clientX}},playbackMetadata:e=>{if(e.treatAsEndOfClick)return{clientX:this.state.mouseDown.x,clientY:this.state.mouseDown.y};{let t=this.topByGuid[(0,Pn.g2)(e.path,this.getScene(),this.props.currentPage)]+Fa.FL/2;return e.belowAll&&(t+=Fa.FL),{clientY:this.clientY(t),clientX:e.clientX}}}}),this.onScrollContainerMouseDown=()=>{aT.wr(),et.Y5.commit()},this.scrollContainerRef=e=>{this.scrollContainer=e,this.scrollContainerEl=oQ.findDOMNode(e)},this.containerMouseLeave=e=>{aT.Uc(""),null!=this.hoverToExpandGroupTimeout&&clearTimeout(this.hoverToExpandGroupTimeout)},this.expandMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n)return;t.stopPropagation(),(0,Z.sx)("objects_panel_expand",{nonInteraction:0});let a=!n.isExpanded;t.altKey?aT.sK(n.guid,a):(0,b.Fo)(t)&&!(0,i$.Im)(this.props.sceneGraphSelection)?aT.yF(n.guid,a):aT.sq(n.guid,a),this.justToggledExpandedGuid=n.guid},this.isDraggingToToggle=null,this.lockMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n||this.props.isReadOnly)return;t.stopPropagation();let a=!n.locked;this.isDraggingToToggle={locked:a},o4.l7.user("set-locked__LEGACY_UNBILLED",()=>{aT.tU(n.guid,a,t.altKey)})},this.visibleMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n||this.props.isReadOnly)return;t.stopPropagation();let a=!n.visible;this.isDraggingToToggle={visible:a},o4.l7.user("set-visible__LEGACY_UNBILLED",()=>{aT.pr(n.guid,a,t.altKey)})},this.hoverToExpandGroupTimeout=null,this.rowMouseEnter=(e,t)=>{let n=this.getScene().get(e);if(!n)return;let a=()=>{if(this.isDraggingToToggle){let{locked:e,visible:t}=this.isDraggingToToggle;null!=e&&o4.l7.user("set-locked",()=>(function(e,t,n){if(!e)return;let a=!1;Fm(e,n,e=>{a=a||e.locked!==t,e.locked=t}),a&&hp.wt.reportAnyPropertyChange(["locked"])})(n,e,!1)),null!=t&&o4.l7.user("set-visible",()=>(function(e,t,n){if(!e)return;let a=!1;Fm(e,n,e=>{a=a||e.visible!==t,e.visible=t}),a&&hp.wt.reportAnyPropertyChange(["visible"])})(n,t,!1))}this.state.mouseDown||aT.Uc(n.guid)};C.Ay.firefox&&this.isScrolling?this.handleMouseEnterAfterScroll=a:a()},this.onDragDrop=(e,t)=>{this.onMouseUp(t.nativeEvent)},this.onDragOver=(e,t)=>{this.onMouseMove(t.nativeEvent)},this.onDragEnter=(e,t)=>{this.onMouseMove(t.nativeEvent),this.rowMouseEnter(e,t)},this.onDragLeave=(e,t)=>{this.onMouseMove(t.nativeEvent)},this.renderedVisibleRowProps=[],this.touchAdapter=new M9(this,this.rowContainerMouseDown,this.onMouseMove,this.onMouseUp,{delayInMS:500,observeInsideOverflowScroll:!0}),this.recalculateLayout(),this.initializeRows(this.props)}componentDidMount(){super.componentDidMount(),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),window.addEventListener("resize",this.requestRecalculateLayout),et.Y5.fromFullscreen.on("scrollToNode",this.scrollToNode),this.AIRenameScrollEventListener=M8.uK.subscribe(this.onAIRenameScrollToNode);let e=ei.glU&&ei.glU.getFirstSelectedNodeIdForCurrentPage();e&&this.scrollToNode({nodeId:e})}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("resize",this.requestRecalculateLayout),et.Y5.fromFullscreen.removeListener("scrollToNode",this.scrollToNode)}updateSelection(e){(0,lC.S)("panel"),aT.tJ([e]),et.Y5.commit(),this.props.onSelectionUpdated&&this.props.onSelectionUpdated(e)}UNSAFE_componentWillUpdate(e,t){e.renamingGuid&&e.renamingGuid!==this.props.renamingGuid&&(this.scrollToNodeIdAfterUpdate=e.renamingGuid);let n=this.props.objectsPanelRowRebuildCounter!==e.objectsPanelRowRebuildCounter,a=this.props.customRowBuilder!==e.customRowBuilder;if((n||a||this.props.currentPage!==e.currentPage||this.props.showImmutableFrameSublayers!==e.showImmutableFrameSublayers||!Eo()(this.props.temporarilyExpandedInstanceLayers,e.temporarilyExpandedInstanceLayers)||!Eo()(this.props.temporarilyHoveredNodes,e.temporarilyHoveredNodes))&&this.initializeRows(e),this.anchorNodeId=null,this.topNodeDelta=0,n){if(null!==this.justToggledExpandedGuid)this.justToggledExpandedGuid===this.stickyHeaderGuid?(this.lastCollapsedScrollPosition=this.state.scrollTop,this.lastCollapsedGuid=this.justToggledExpandedGuid,this.scrollToNodeIdAfterUpdate=this.stickyHeaderGuid):this.justToggledExpandedGuid===this.lastCollapsedGuid&&this.justToggledExpandedGuid===this.lastStickyHeaderGuid&&this.topByGuid[this.lastStickyHeaderGuid]===this.state.scrollTop&&(this.scrollAfterNodeExpanded=!0),this.justToggledExpandedGuid=null;else{let e=!1;for(let t of this.renderedVisibleRowProps)if("object"===t.rowType&&this.scrollContainer&&(0,Pn.U$)(t,0,this.scrollContainer.getTrackHeight(),this.state.scrollTop)&&this.props.sceneGraphSelection[t.guid]){e=!0;break}let t=null,n=null;for(let a of this.renderedVisibleRowProps)"object"===a.rowType&&this.scrollContainer&&(0,Pn.U$)(a,0,this.scrollContainer.getTrackHeight(),this.state.scrollTop)&&((!e||this.props.sceneGraphSelection[a.guid])&&(null===t||t>a.top)&&(t=a.top,this.anchorNodeId=a.guid),(null===n||n>a.top)&&(n=a.top,this.topNodeDelta=this.topByGuid[a.guid]-a.top))}}}componentDidUpdate(e,t){if(super.componentDidUpdate(e,t),this.scrollContainer){if(this.scrollToNodeIdAfterUpdate)this.scrollNodeIntoView(this.scrollToNodeIdAfterUpdate),void 0!==this.topByGuid[this.scrollToNodeIdAfterUpdate]&&(this.scrollToNodeIdAfterUpdate=null);else if(this.scrollAfterNodeExpanded)null!=this.lastCollapsedScrollPosition&&this.scrollContainer.scrollTo(this.lastCollapsedScrollPosition),this.scrollAfterNodeExpanded=!1,this.lastCollapsedScrollPosition=null,this.lastCollapsedGuid=null;else{let e=this.scrollContainer.getScrollTop()+this.topNodeDelta,t=!1;for(let n of this.renderedVisibleRowProps)if("object"===n.rowType&&n.guid===this.anchorNodeId){t=(0,Pn.U$)(n,0,this.scrollContainer.getTrackHeight(),e);break}t?this.scrollContainer.scrollTo(e):this.anchorNodeId&&this.scrollNodeIntoView(this.anchorNodeId)}}}getTopSelectedNodeId(){let e;let t=Object.keys(this.props.sceneGraphSelection),n=1/0;for(let a of t){let t=this.topByGuid[a];t<n&&(n=t,e=a)}return e}findStickyHeader(e,t,n){let a=this.state.scrollTop,l=this.getScene().get(e.guid);if(!l)return null;if(this.isNodeSticky(l)&&e.hasChildren&&(e.isExpanded||e.isTemporarilyExpanded)){if(t<=a&&n>a+Fa.FL)return this.stickyHeaderGuid=e.guid,this.lastStickyHeaderGuid=this.stickyHeaderGuid,{...e,fixed:!0};if(n>a&&n<=a+Fa.FL)return{...e,top:n-Fa.FL,layerAbove:!0};if(this.scrollAfterNodeExpanded&&e.guid===this.lastStickyHeaderGuid)return this.stickyHeaderGuid=e.guid,this.lastStickyHeaderGuid=this.stickyHeaderGuid,{...e,fixed:!0}}return null}expandDropTargetIfNeeded(e,t){let n=null;if(e&&"sticky"!==e.parentTop){let a=this.getScene().get(e.parentGuid);(0,nm.KF)(!!a,"parentGuid should point to a valid node");let l=t>e.parentTop+Fa.FL/3&&t<e.parentTop+2*Fa.FL/3;a.uiOrderedChildren.length&&l&&(n=a.guid)}this.lastExpansionTarget!==n&&(this.lastExpansionTarget&&null!=this.hoverToExpandGroupTimeout&&clearTimeout(this.hoverToExpandGroupTimeout),n&&(this.hoverToExpandGroupTimeout=setTimeout(()=>{this.state.mouseDown&&aT.Ir(n,!0)},1e3)),this.lastExpansionTarget=n)}toggleSelected(e){this.props.sceneGraphSelection[e]?aT.D$([e]):(aT.Dh([e]),this.rangeSelectAnchorNodeId=e),et.Y5.commit()}relativeY(e){let t=(0,Ij.bG)();return this.scrollContainerEl&&(t=this.scrollContainerEl.getBoundingClientRect().top),e-t+this.state.scrollTop}clientY(e){let t=(0,Ij.bG)();return this.scrollContainerEl&&(t=this.scrollContainerEl.getBoundingClientRect().top),e+t-this.state.scrollTop}isVisible(e,t){if(!this.scrollContainerEl)return!0;let n=this.state.scrollTop,a=this.scrollContainerEl.getBoundingClientRect().height+this.state.scrollTop;return n<e&&t<a}guidAtMousePosition(e){return this.mouseOverStickyHeaderGuid(e)||(0,Pn.GN)(this.getScene(),this.props.sceneGraphSelection,this.topByGuid,this.relativeY(e))}mouseOverStickyHeaderGuid(e){return this.scrollContainerEl&&e-this.scrollContainerEl.getBoundingClientRect().top<Fa.FL?this.stickyHeaderGuid:null}computeStackOutlineHeight(e,t,n,a){return"sticky"===e?Math.min(t-n,a):Math.min(t-e,a-(e-n))}scrollContainerHeight(){return this.scrollContainerEl?this.scrollContainerEl.clientHeight:0}renderDropTarget(e){let t=null;if(null!=e.parentTop){let n=this.scrollContainerHeight(),a=e.bottomForCanvasStackReparenting,l=Fa.FL,r="sticky"===e.parentTop||this.stickyHeaderGuid===e.parentGuid;a&&n&&(l=this.computeStackOutlineHeight(r?"sticky":e.parentTop,a,this.state.scrollTop,n)),t=r?f.createElement("div",{key:"drop-target-box",className:Fo,style:{position:"sticky",width:this.props.width,height:l,zIndex:bR.Wb}}):f.createElement("div",{key:"drop-target-box",className:Fo,style:{transform:`translate3d(0px, ${e.parentTop}px, 0)`,height:l}})}let n=null;return null!=e.lineTop&&(n=f.createElement("div",{key:"drop-target-line",className:"objects_panel--dropTargetLine--vmN9u",style:{marginLeft:`${e.lineIndent?e.lineIndent:0}px`,transform:`translate3d(0px, ${0===e.lineTop?0:e.lineTop-1}px, 0)`,transition:"margin-left 150ms 0ms"}})),[t,n]}onContextMenu(e){e.stopPropagation(),e.preventDefault()}hasAtLeastOneRefToHoveredDefId(e){var t;if(!this.props.hoveredPropDef||!(null==(t=this.props.hoveredPropDef.nodeIDs)?void 0:t.length)||!this.props.hoveredPropDef.defID)return!1;let n=e.containingSymbolId;if(!n||!this.props.hoveredPropDef.nodeIDs.includes(n))return!1;for(let t of Object.values(e.propRefs))if(t.isLinked&&t.explicitDefID===this.props.hoveredPropDef.defID)return!0;return!1}renderObjectRow(e,t,n){var a;let l=t.getNode(e.guid);if(!l||!l.parentGuid)return null;let r=t.getAncestorInfo(l.parentGuid),i=t.getMaskInfo(e.guid),o=(0,OM.K3)(this.props.sceneGraphSelection,e.guid);if(!r||!i)return null;let s=(r.isAncestorSelected||o)&&!r.isAncestorHidden&&this.hasAtLeastOneRefToHoveredDefId(l);return f.createElement(xU.oo,{key:Fs.getKeyForId(e.guid),isReadOnly:this.props.isReadOnly,...e,renderResourceUse:this.props.renderResourceUse,showMemoryUsage:this.props.showMemoryUsage,showInFileMemoryPercentage:this.props.showInFileMemoryPercentage,nodeMemoryUsage:l.nodeMemoryUsage,rootMemoryUsage:l.rootMemoryUsage,isAncestorHidden:r.isAncestorHidden,isAncestorLocked:r.isAncestorLocked,isAncestorSelected:r.isAncestorSelected,displayOrder:r.childrenDisplayOrder,isMaskedAtLevels:i.isMaskedAtLevels,isLastMaskedAtLevels:i.isLastMaskedAtLevels,panelWidth:this.props.width,scrollLeft:this.state.scrollLeft,name:l.name,abbreviatedStateName:l.isState?l.stateAbbreviatedName:null,nodeType:l.type,isStamp:(0,ey.GI)(l),visible:l.visible,mask:l.mask,locked:l.locked,resizeToFit:l.resizeToFit,stackMode:l.stackMode,isStateGroup:l.isStateGroup,isState:l.isState,scrollDirection:l.scrollDirection,booleanOperation:l.booleanOperation,isStaticImage:l.hasEnabledStaticImagePaint,isGIF:l.hasEnabledAnimatedPaint,cornerRadius:l.cornerRadius,objectsPanelThumbnailId:l.objectsPanelThumbnailId,isWidgetSublayer:!!l.isInWidget,hasChildren:l.isExpandable||e.hasChildren||(0,Sr.vo)(l,this.getScene()),isExpanded:e.isExpanded||e.isTemporarilyExpanded,isHovered:this.props.hoveredNode===e.guid||this.props.temporarilyHoveredNodes.includes(e.guid)||s,isSelected:o,isRenaming:this.props.renamingGuid===e.guid,isDragging:!!this.state.dropTarget,startRenaming:this.props.startRenaming,stopRenaming:this.props.stopRenaming,onContextMenu:this.rowContextMenu,expandMouseDown:this.expandMouseDown,lockMouseDown:this.lockMouseDown,visibleMouseDown:this.visibleMouseDown,onMouseEnter:this.rowMouseEnter,dispatch:this.props.dispatch,shouldShowGuids:this.props.shouldShowGuids,currentPage:this.props.currentPage,onDragDropCallback:this.onDragDrop,onDragOverCallback:this.onDragOver,onDragEnterCallback:this.onDragEnter,onDragLeaveCallback:this.onDragLeave,isThumbnail:this.props.thumbnailGuid===e.guid,layerChangeStatus:l.nodeChangeStatus,versionHistory:this.props.versionHistory,userId:this.props.userId,hideRowActions:this.props.hideRowActions,isDefaultResponsiveSet:(null==(a=this.props.topNodeFields)?void 0:a.defaultResponsiveSetId)===e.guid,isResponsiveSet:l.isResponsiveSet,panelType:this.props.panelType??Pn.g$.Object,isRowInView:t=>{if(!n)return!0;let a=n.getClipContainer().getBoundingClientRect(),l=t.current;if(!l)return!0;let r=l.getBoundingClientRect();return e.fixed&&0!==this.props.width||r.top>=a.top&&r.bottom<=a.bottom}})}renderLayerExpansionRow(e){let t=Fs.getKeyForId(Fc(e));return f.createElement(Fr,{key:t,top:e.top,width:this.props.width,guid:e.containingPrimaryInstanceGUID,level:e.level,onMouseEnter:()=>aT.Uc(""),dispatch:this.props.dispatch,recordingKey:n_.Pt(this.props,"layerExpansion",e.containingPrimaryInstanceGUID)})}renderSectionHeader(e){let t=this.sectionById[e.sectionId]&&(0,OM.sp)(this.getScene(),this.props.sceneGraphSelection,this.sectionById[e.sectionId].parentGuid);return f.createElement(xU.O,{key:Fs.getKeyForId(e.sectionId),...e,width:this.props.width,isParentSelected:t,dispatch:this.props.dispatch})}render(){let e=this.renderedVisibleRowProps,t=this.cachedAllRowData||[];for(let n of(this.renderedVisibleRowProps=(0,Pn.Uw)(t,this.windowInnerHeight,this.state.scrollTop),this.findStickyHeaderRowAndReplaceInVisibleRows(t),e))(0,Pn.Mq)(n,this.windowInnerHeight,this.state.scrollTop)||Fs.freeKeyForId(Fc(n));this.renderedVisibleRowProps.sort((e,t)=>Fs.getKeyForId(Fc(e))-Fs.getKeyForId(Fc(t)));let n=new Fi.nV(this.getScene(),this.props.sceneGraphSelection),a=[];for(let e of this.renderedVisibleRowProps)"object"===e.rowType?a.push(this.renderObjectRow(e,n,this.scrollContainer)):"layer-expansion"===e.rowType?a.push(this.renderLayerExpansionRow(e)):a.push(this.renderSectionHeader(e));if(this.props.reparentIntoStackInfo&&this.props.sceneGraph){let e=this.props.reparentIntoStackInfo.indexInParent,t=this.props.reparentIntoStackInfo.parentGuid,n=this.props.sceneGraph.get(t);n&&a.push(...this.renderDropTarget((0,Pn.Gs)(n,this.topByGuid,this.props.sceneGraph,this.totalHeight,e)))}else!this.props.isReadOnly&&this.state.dropTarget&&a.push(...this.renderDropTarget(this.state.dropTarget));let l=this.stickyHeaderGuid||!this.state.needsScrollLine?"objects_panel--scrollContainer--h6khG":"objects_panel--scrollContainerWithBorder--SR2sm objects_panel--scrollContainer--h6khG";return f.createElement(f.Fragment,null,f.createElement(Pn.M3,{selection:this.props.sceneGraphSelection,getNode:function(e){return n.getNode(e)??null}}),f.createElement(i6.P,{enableOverscroll:!0,recordingKey:n_.Pt(this.props,"scrollContainer"),className:nb()(l,{"objects_panel--hasPending--0IO3j":this.props.hasPending}),width:this.props.width,onScroll:this.onScroll,onScrollLeftChanged:this.onScrollLeftChanged,initialScrollTop:this.props.initialScrollTop,onMouseDown:this.onScrollContainerMouseDown,onContextMenu:this.onContextMenu,ref:this.scrollContainerRef,horizontalScrollBarEnabled:this.props.horizontalScrollEnabled,minContentWidth:this.props.horizontalScrollEnabled?this.props.width:void 0},f.createElement(EO.jq,{onLeftPanelCollapsedChange:this.onLeftPanelCollapsedChange}),f.createElement(IJ.V,null,f.createElement("div",{className:nb()("objects_panel--rowContainer--03VQD",{"objects_panel--horizontalScrollBarPadding--JfnK4":this.props.horizontalScrollEnabled}),style:{height:this.totalHeight},onMouseDown:this.rowContainerMouseDown,onTouchStart:this.touchAdapter.onTouchStart,onMouseLeave:this.containerMouseLeave,"data-testid":"objects-panel"},a))))}}function Fu({currentPage:e,...t}){var n;let a=(0,n6.GS)(),l=(0,_.wA)(),r=(0,aN.J2)((0,tM.UK)().showImmutableFrameSublayers),i=(0,aN.J2)(null==(n=ei.Ez5)?void 0:n.uiState().reparentIntoStackInfo),o=(0,aN.J2)(ei.Ez5.uiState().renderResourceUse),s=(0,aN.J2)(ei.Ez5.uiState().showMemoryUsage),c=(0,aN.J2)(ei.Ez5.uiState().hoveredComponentPropDef),d=(0,aN.J2)(ei.Ez5.uiState().showInFileMemoryPercentage),u=(0,aN.J2)(ei.Ez5.canvasViewState().temporarilyHoveredNodes),m=(0,ew.TA)(),p=(0,_.d4)(e=>e.mirror.sceneGraphSelection),g=(0,_.d4)(e=>e.mirror.objectsPanelRowRebuildCounter),h=(0,_.d4)(e=>e.mirror.appModel.hoveredNode),E=(0,_.d4)(e=>e.mirror.appModel.temporarilyExpandedInstanceLayers),v=(0,_.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),b=(0,ag.ks)(),C=(0,U._I)(),w=(0,Dl.E)(),T=(0,S.md)(Tb),x=(0,cp.Fk)((e,t)=>{let n=e.get(t);return n?{guid:n.guid,children:n.uiOrderedChildren,defaultResponsiveSetId:n.defaultResponsiveSetId}:null},e);if(b&&!C)return null;let N=void 0===t.topNodeFields?x:t.topNodeFields,k=a&&(0,y.kc)().ui3_layers_panel;return f.createElement(f.Fragment,null,f.createElement(Fd,{...t,currentPage:e,sceneGraphSelection:p,objectsPanelRowRebuildCounter:g,hoveredNode:h,temporarilyExpandedInstanceLayers:E,editModeType:v,sceneGraph:T,topNodeFields:N,recordingKey:"objectsPanel",showViewChangesNotification:w,hoveredPropDef:c,showImmutableFrameSublayers:r,reparentIntoStackInfo:i,temporarilyHoveredNodes:u,dispatch:l,renderResourceUse:o,showMemoryUsage:s,showInFileMemoryPercentage:d,userId:m??void 0,horizontalScrollEnabled:k}),f.createElement(aS.p,{featureFlag:"auto_auto_layout"},f.createElement(Ft,null)))}function Fm(e,t,n){if(n(e),t)for(let t of e.uiOrderedChildren)Fm(lE.q.instance.get(t),!0,n)}Fd.displayName="ObjectsPanelView";var Fp=n(544403);function Ff(){return(0,EO.Ye)()?f.createElement(CN.C,null):f.createElement(_X.O,null)}var F_=n(16633),Fg=n(455263);function Fh(){var e;let{hasAnyUiKit:t}=(0,xK.I7)(),n=(0,eT.f)("ui_kits_assets_title_blue_dot_dismissed"),a=(0,dt.jO)(),l=(0,Fg.t)(),r=null==(e=(0,af.q5)())?void 0:e.canEdit,i=(0,_.d4)(e=>e.leftPanel.activeTab===ei.xae.ASSETS),o=(0,_.wA)(),s=(0,nS.R)();return(f.useEffect(()=>{t&&!n&&i&&o(j.b({ui_kits_assets_title_blue_dot_dismissed:!0}))},[i,n,o,t]),a&&!l&&r&&t&&!n)?s?f.createElement(F_.C,{"data-testid":"assets-panel-blue-dot",className:"assets_panel_blue_dot--blueDotUi3--VR9bW"}):f.createElement("span",{"data-testid":"assets-panel-blue-dot",className:"assets_panel_blue_dot--blueDot--s7hOi"}):null}function FE(e){let t=(0,_.wA)(),n=(0,_.d4)(e=>e.selectedView);return f.createElement("div",{className:Ar},f.createElement(Of,{onFocus:()=>{(0,IY._)(t,n,"overview_search_clicked"),et.Y5.triggerAction("canvas-search",{source:"toolbar"})}}),!e.isOverview&&f.createElement(a7.D8,{className:"pages_panel--pageTabDevHandoff--Bq1-h pages_panel--pageTab--hc8gz",onClick:e.togglePagesExpanded,onContextMenu:e.onContextClick},f.createElement("span",{className:Al},e.currentPageName||""),f.createElement(a2.B,{className:I4,svg:e.pageTabChevron})))}var Fv=n(397863),Fy=n(660164);let Fb=(0,Y.tf)(vJ.K);function FC({recordingKey:e}){let t=(0,cm.rE)();return f.createElement(Fb,{recordingKey:e,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("fullscreen.pages_panel.add_new_page"),"data-tooltip-show-above":!0,"aria-label":(0,eN.t)("fullscreen.pages_panel.add_new_page"),onClick:()=>t(null),trackingProperties:{text:"Add new page"}},f.createElement(ry.U,{svg:IF.A,fallbackSvg:Fy.A},f.createElement(Fv.x,null)))}function Fw(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17 7H7a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1ZM7 6a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1.289l-.722 1.25a.5.5 0 1 0 .866.5L9.443 16h5.114l1.01 1.75a.5.5 0 1 0 .866-.5L15.711 16H17a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H7Zm4.514 2.776A1 1 0 0 0 10 9.633v2.734a1 1 0 0 0 1.514.857l2.279-1.367a1 1 0 0 0 0-1.714l-2.278-1.367ZM11 9.633 13.278 11 11 12.367V9.633Z",clipRule:"evenodd"}))}let FT="new_page_dropdown--newPageIcon--R2RXS";var Fx=n(561071);function FN({recordingKey:e}){let{Dropdown:t,toggleDropdown:n,isDropdownShown:a,dropdownTargetRef:l}=(0,w0.B)("newPageDropdown"),r=(0,Q.lg)(),i=(0,af.Te)(),o=(0,cm.rE)();if(!i)return null;let s=[{displayText:(0,eN.t)("fullscreen.pages_panel.page_dropdown_new"),optionHeight:24,editorType:null,disabled:!0},{displayText:(0,eN.t)("fullscreen.pages_panel.design_page"),optionHeight:24,editorType:a_._Y.DESIGN,icon:f.createElement("div",{className:FT},f.createElement(nt.k,null)),callback:()=>o(ei._YF.DESIGN)},{displayText:(0,eN.t)("fullscreen.pages_panel.figjam_page"),optionHeight:24,editorType:a_._Y.WHITEBOARD,icon:f.createElement("div",{className:FT},f.createElement(a2.B,{svg:Fx.A})),callback:()=>o(ei._YF.WHITEBOARD)},{displayText:(0,eN.t)("fullscreen.pages_panel.slide_deck"),optionHeight:24,editorType:a_._Y.SLIDES,icon:f.createElement("div",{className:FT},f.createElement(Fw,null)),callback:()=>o(ei._YF.SLIDES)}],c=48;for(let e=0;e<s.length;e++)if(s[e].editorType===r){c+=24*e;break}return f.createElement(f.Fragment,null,f.createElement("div",{className:a8.cx.absolute.w8.h8.$,ref:l,style:{bottom:`${c}px`,right:"42px"}}),f.createElement(iG.K0,{className:"new_page_dropdown--newPageChevron--N0hv3",recordingKey:n_.Pt(e,"newPageDropdown"),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("fullscreen.pages_panel.add_new_page_dropdown"),"data-tooltip-show-above":!0,svg:op.A,onMouseDown:n}),a&&f.createElement(t,{minWidth:160,items:s,showPoint:!0}))}function FS(e){let t=(0,_.wA)(),n=(0,af.q5)(),a=(0,kq.FC)(),l=(0,eb.p8)("pagesList").length,r=f.useRef(),i=(0,ag.ks)(),o=(0,n3.Fr)();r.current=e.setUpsellHeightCallback;let s=f.useCallback(e=>{r.current&&r.current((null==e?void 0:e.getBoundingClientRect().height)||0)},[l]);if(l<=0||!n||i)return null;let c=n.team;if(!(c&&(0,mK.canEditTeam)(c.id,a)&&!(0,cw.XX)(c)))return null;let d=(0,cw.Lj)(n);if((d<=1||d>=1/0)&&!o(n))return null;let u=()=>{let e=sM.b.PAGE_TRACKER_UPSELL;t((0,ty.to)({type:sP.V,data:{upsellSource:e,teamId:c.id,openCheckoutInNewTab:!0}}))},m=f.createElement(a1.Us,{onClick:u,trusted:!0,"data-testid":"page_tracker_upsell_link"},(0,eN.tx)("fullscreen.pages_panel.see_plans_that_offer_more")),p=f.createElement(a1.Us,{onClick:u,trusted:!0,"data-testid":"page_tracker_upsell_link"},(0,eN.tx)("fullscreen.pages_panel.get_unlimited_pages_and_more")),g=l/cw.LF[n.editorType??a_._Y.DESIGN],h=nb()({"page_tracker_upsell--progressPartial--guOiP":g<1,"page_tracker_upsell--progressCompleteWarning--06IlO page_tracker_upsell--progressComplete--ilmev":1===g,"page_tracker_upsell--progressCompleteDanger--lCunz page_tracker_upsell--progressComplete--ilmev":g>1}),E=`${Math.trunc(100*Math.min(g,1))}%`,v={fileTeamId:c.id,numPages:l};return f.createElement(Y.fu,{name:"Page Tracker Upsell",properties:v},f.createElement("div",{className:"page_tracker_upsell--upsellContainer--ZEwXz",ref:s,"data-testid":"page_tracker_upsell"},f.createElement("div",{className:"page_tracker_upsell--upsellBody--yUAjd"},f.createElement("div",{className:"page_tracker_upsell--progressBar--fDCBY"},f.createElement("div",{className:h,style:{width:E},"data-testid":"page_tracker_progress_bar"})),f.createElement("p",{className:"page_tracker_upsell--upsellText--Ng-u0"},(()=>{let e=cw.LF[n.editorType??a_._Y.DESIGN]-l;return e>=2?f.createElement(f.Fragment,null,(0,eN.tx)("fullscreen.pages_panel.n_free_pages_left",{numPagesRemaining:e}),f.createElement("br",null),m):1===e?f.createElement(f.Fragment,null,(0,eN.tx)("fullscreen.pages_panel.n_free_pages_left",{numPagesRemaining:e}),f.createElement("br",null),p):0===e?f.createElement(f.Fragment,null,(0,eN.tx)("fullscreen.pages_panel.all_n_free_pages_used",{maxFreePages:cw.LF[n.editorType??a_._Y.DESIGN]}),f.createElement("br",null),p):f.createElement(f.Fragment,null,(0,eN.tx)("fullscreen.pages_panel.all_free_pages_used"),f.createElement("br",null),p)})()))))}var Fk=n(929715),FI=n(523679),FA=n(442325);function FO({nodeId:e,width:t,height:n,shouldSkip:a,updateOnSceneGraphChange:l=!1}){let[r,i]=(0,f.useState)(null);return(0,f.useEffect)(()=>{if(a){i(null);return}let r=null,o=()=>{r&&(r.abort(),r=null)},s=()=>{let a=(0,Sc._G)(new r4.Mi(t,n),e,!0);a&&a.pixels&&a.pixelSize&&a.displaySize&&i({src:(0,Sc.Pv)(a.pixels,a.pixelSize),displaySize:a.displaySize})};i(null);let c=()=>{o(),r=new TaskController({priority:"user-visible"}),scheduler.postTask(s,{signal:r.signal})},d=e1()(c,200,{trailing:!0,leading:!1});return c(),l&&et.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",d),()=>{o(),d.cancel(),l&&et.Y5.fromFullscreen.removeListener("sceneGraphMirrorUpdate",d)}},[e,t,n,a,l]),r}let FL={};function FP({nodeId:e,width:t,height:n,version:a,reason:l,shouldSkip:r,regenerateAfterImagesLoaded:i,isDevModeBlendedSection:o=!1}){let[s,c]=(0,f.useState)(!1),d=function({nodeId:e,width:t,height:n}){return`${e}-${t}x${n}`}({nodeId:e,width:t,height:n}),[u,m]=(0,f.useState)(FL[d]),p=(null==u?void 0:u.hasUnresolvedImages)||!1;return(0,f.useEffect)(()=>{if(r)return;let t=!0;return i&&!s&&p&&(0,ri.Jr)().waitForImagesUnder([e],ei.MoD.LOW_RES_ONLY,l).then(()=>{t&&c(!0)}),()=>{t=!1}},[s,d,e,l,p,i,r]),(0,f.useEffect)(()=>{if(r)return;let l=null;(!u||u.version!==a||!u.imagesLoaded&&s&&u.hasUnresolvedImages)&&(l&&(l.abort(),l=null),l=new TaskController({priority:"user-visible"}),scheduler.postTask(()=>{let l=!!i&&(0,ri.Jr)().unresolvedImagesUnder([e],ei.MoD.LOW_RES_ONLY).length>0,r=(0,Sc._G)(new r4.Mi(t,n),e,!0,ei.tvY.TRANSPARENT,o);if(r&&r.pixels&&r.pixelSize&&r.displaySize){let e={thumbnail:{src:(0,Sc.Pv)(r.pixels,r.pixelSize),displaySize:r.displaySize},imagesLoaded:s,hasUnresolvedImages:l,version:a};FL[d]=e,m(e)}},{signal:l.signal}))},[e,t,n,d,u,a,r,s,i,o]),u?u.thumbnail:null}var FD=n(40092);function FR({nodeId:e,pageRowRef:t,pagesListRef:n}){let a=(0,y.kc)().figjam_pages_summary_preview,l=(0,n6.GS)(),r=(0,af.q5)(),[i,o]=f.useState(cB.r.INIT),s=(0,f.useMemo)(()=>a&&l&&(null==r?void 0:r.editorType)===a_._Y.WHITEBOARD,[a,l,null==r?void 0:r.editorType]),c=FO({nodeId:e,width:350,height:350,updateOnSceneGraphChange:!0,shouldSkip:!s}),d=(0,LS.Ak)(Date.now()-36e4);if(!s||!r||!n.current||!t.current)return null;let u=n.current.getBoundingClientRect().left+n.current.getBoundingClientRect().width,m=u-16,p=`calc(${u}px + var(--spacer-2, 0.5rem))`,_=t.current.getBoundingClientRect().top,g=t.current.getBoundingClientRect().height;return f.createElement(f.Fragment,null,f.createElement("div",{style:{position:"fixed",zIndex:10,left:m+"px",top:_+"px",height:g+"px",width:"32px"}}),f.createElement("div",{"data-testid":"PageSummaryPreview",className:"page_summary_preview--previewContainer--kx2Uy",style:{left:p,top:_+g/2}},f.createElement("div",{className:"page_summary_preview--thumbnailContainer--a-jPQ"},i===cB.r.LOADING?f.createElement(re.kt,null):c?f.createElement(FA.N,{editor_type:r.editorType,thumbnail_url:c.src,client_meta:r.clientMeta,isLocked:!1,noBorder:!0}):f.createElement("div",{"data-testid":"FigjamLogo"},f.createElement(FD.CS,null)),f.createElement(rd.E,{"aria-label":(0,eN.t)("pages_panel.summary_preview.update_preview"),"data-tooltip":i===cB.r.LOADING?null:(0,eN.t)("pages_panel.summary_preview.update_preview"),"data-tooltip-type":"text",className:nb()("page_summary_preview--refreshButton--XAvPe",{"page_summary_preview--disabled--EZSd-":i===cB.r.LOADING}),disabled:i===cB.r.LOADING,onClick:()=>{r&&(o(cB.r.LOADING),rb.S.updatePageCheckpointThumbnails({fileKey:r.key}).catch(e=>{o(cB.r.FAILURE),alert(`Error refreshing preview: ${e}`)}).then(()=>o(cB.r.SUCCESS)))}},f.createElement(FI.o,null))),c&&f.createElement("div",{className:"page_summary_preview--lastUpdatedTextContainer--YItNU"},(0,eN.tx)("pages_panel.summary_preview.last_updated",{time:d}))))}var FM=n(135317);function FF({value:e,setValue:t,recordingKey:n,isDisabled:a,stopRenaming:l}){let r=(0,f.useRef)(null);(0,f.useEffect)(()=>{var e;null==(e=r.current)||e.select()},[]);let i=n_.v_(n,"keydown",e=>{if(e.keyCode===b.Uz.ESCAPE)l(!1);else if(e.keyCode===b.Uz.ENTER)l(!0);else{if(e.keyCode!==b.Uz.TAB)return(0,Aw.jr)(e,Aw.W0.NO),n_.aH;e.preventDefault(),l(!0)}}),o=n_.AF(n,"change",e=>{a||t(e.currentTarget.value)}),s=n_.iQ(n,"blur",()=>{l(!0)});return f.createElement(iy.ks,{className:"page_rename_input--input--s2o7Q",innerRef:r,value:e,onChange:o,onKeyDown:i,onBlur:s,spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",autoFocus:!0})}function FB({editorType:e}){switch(e){case ei._YF.DESIGN:return f.createElement(nt.k,null);case ei._YF.WHITEBOARD:return f.createElement(a2.B,{svg:Fx.A});case ei._YF.SLIDES:return f.createElement(Fw,null);default:return null}}function FU(e){let{isActive:t,isDivider:n,pageType:a,hasMultiplePageTypes:l}=e;return n||!l?null:f.createElement("div",{className:nb()("pages_panel_row--pageIcon--W2UMl",{"pages_panel_row--active--VZG5v":t})},f.createElement(FB,{editorType:a}))}function FH({pageType:e,hasMultiplePageTypes:t,nodeId:n,nodeName:a,isRenaming:l,startRenaming:r,stopRenaming:i,renamingPagePendingName:o,setRenamingPagePendingName:s,isActive:c,shouldShowGuids:d,onMouseDownCallback:u,onMouseUpCallback:m,onMouseMoveCallback:p,onClickCallback:g,reorderingPageGuids:h,selectedPageGuids:E,onContextMenuCallback:v,showMemoryUsage:b,showInFileMemoryPercentage:C,isOffline:w,isComparingChanges:T,pageToNumChanges:x,versionHistory:N,isDivider:S,pagesList:k,index:I,activePageShouldUseBrandColor:A}){let O=(0,_.wA)(),L=(0,n6.GS)(),P=(0,cp.Fk)((e,t)=>{var n;return null==(n=e.get(t))?void 0:n.nodeMemoryUsage},n),D=(0,cp.Fk)((e,t)=>{var n;return null==(n=e.get(t))?void 0:n.rootMemoryUsage},n),R=f.useMemo(()=>(0,Am.Fy)(k,n)===ei.xal.LOADED,[n,k]),M=ei.h3O.getSessionState()===ei.kul.JOINED,F=f.useMemo(()=>w&&!M&&!R&&ei.h3O.isIncrementalSession(),[w,R,M]),B=n_.Pt("pagesPanel","row",I)||"",U=n_.rf(B,"contextmenu",e=>{e.preventDefault(),!F&&v&&v(n,e)}),H=n_.rf(B,"dblclick",e=>{F||(r(n),ei.glU.triggerActionInUserEditScope("page-rename",{nodeId:n}))}),G=n_.rf(B,"click",e=>{if(!S&&!l){if(F){O(eS.F.enqueue({type:"offline-page-switch",message:(0,eN.t)("fullscreen.pages_panel.unavailable_offline")}));return}g(n,e)}}),V=f.useCallback(e=>{F||l||u(n,e)},[l,n,u,F]),K=f.useCallback(e=>{l||p(n,e)},[l,n,p]),W=f.useCallback(e=>{l||m(n,e)},[l,n,m]),z=f.useCallback(()=>(0,gq.uy)(P)||(0,gq.uy)(D)?"":(0,Au.pr)(P,D,!0),[P,D]),j=T&&(null==x?void 0:x.get(n))||0,J=(null==N?void 0:N.activeId)&&"current_version"===N.activeId,Y=b&&C&&!l&&J,X=!T&&!l,q=S&&!c&&!l;return f.createElement("div",{className:nb()({"pages_panel--pageRowDividerContainer--NyNS9 pages_panel--pageRowBase--d4OsN":q,"pages_panel--pageRow--7h-Lv pages_panel--pageRowBase--d4OsN":!q,"pages_panel--pageRowActive--OASeZ":c,"pages_panel--activePageBrand--p3348":A,[I8]:0===h.length&&0===E.length},0!==h.length||0!==E.length?E.includes(n)?"pages_panel--selected--bUeWb":h.includes(n)?"pages_panel--hoverState--FXSo2":0===h.length?I8:"":""),onContextMenu:U,onClick:G,draggable:!1,onMouseDown:V,onMouseMove:K,onMouseUp:W,onDoubleClick:H},!q&&!L&&f.createElement(a2.B,{className:nb()(c?"pages_panel--pageRowSvgV2--y3cIV pages_panel--pageRowSvg--lKPoU":"pages_panel--pageRowSvgV2Unselected--zlmq5 pages_panel--pageRowSvgV2--y3cIV pages_panel--pageRowSvg--lKPoU",{"pages_panel--flipVertically--O5Tht":!1}),svg:Or.A}),l&&f.createElement(FF,{value:o||"",setValue:s,stopRenaming:i,recordingKey:B,isDisabled:F}),q?f.createElement("span",{className:"pages_panel--pageRowDivider--NO0-i","data-testid":"pageDivider"}):!l&&f.createElement("div",{className:"pages_panel--renameableNode--Rl1H1"},f.createElement("span",{className:F?"pages_panel--disabledNodeText--Gar5X pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa":"pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa"},d?`${a} (${n})`:a)),f.createElement("div",{className:"pages_panel--pageRowRight--RYgWA"},X&&f.createElement(FG,{pageGuid:n,fallback:f.createElement(FU,{isActive:c,isDivider:S,pageType:e,hasMultiplePageTypes:t}),hideBackground:!0}),F&&!q&&f.createElement("div",{className:"pages_panel--offlineContainer--M4S1E","data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"},f.createElement(a2.B,{className:"pages_panel--offlineIcon--pf66o",svg:Os.A,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"})),Y&&f.createElement("span",{className:F?"pages_panel--renameableNodeTextEndDisabled--TLJxp pages_panel--renameableNodeTextEnd--pdvNO pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa":"pages_panel--renameableNodeTextEnd--pdvNO pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa",dir:"auto"},z()),(0,y.kc)().version_diffing&&T&&j>0&&f.createElement("div",{className:"pages_panel--pageChangesCount--ZXLpV"},j)))}function FG({pageGuid:e,margin:t,fallback:n=null,hideBackground:a=!1}){let l=(0,aN.J2)(ei.Ez5.currentSceneState().numReadyNodesByPage),r=(0,aN.J2)(ei.Ez5.currentSceneState().numCompletedNodesByPage),i=(0,n6.GS)(),o=l.has(e)?l.get(e)>0:ei.glU.nodeStatusesOnPage(e).includes(ei.zIx.BUILD),s=r.has(e)?r.get(e)>0:ei.glU.nodeStatusesOnPage(e).includes(ei.zIx.COMPLETED);return s&&!o&&i?f.createElement(FM.g,{className:"pages_panel_row--pageCompleted--gzdWd","data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.status.completed"),"data-testid":"pageCompletedIndicator"}):o||s?f.createElement(a2.B,{className:nb()("pages_panel_row--pageReady--XaDiG",{"pages_panel_row--hideBackground--22Ike":a}),svg:kA.A,style:t?{[t]:"8px"}:void 0,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.tag.ready_to_build"),"data-testid":"pageReadyIndicator"}):n}var FV=n(653671),FK=(e=>(e.RANGE="range",e.INDIVIDUAL="individual",e))(FK||{});function FW(e){return(0,b.Fo)(e)?"individual":e.shiftKey?"range":null}function Fz(e){let t=(0,cm.dh)(),[n,a]=(0,S.fp)(FV.l7),[l,r]=(0,S.fp)(FV.oZ),i=(0,af.q5)(),o=(0,_.wA)(),s=(0,cm.rE)(),c=(0,_.d4)(e=>e.versionHistory),d=(0,a6.am)(),u=(0,f.useCallback)(e=>a(e),[a]),m=(0,f.useCallback)(()=>a(null),[a]),p=(0,f.useCallback)(async()=>{if(!n)return;let r=lE.q.instance.get(n),u=null==r?void 0:r.name,m=l||"",p=await (0,cm.zO)({openFile:i,pageNode:r,pageName:m});if((0,cm.CQ)({openFile:i,pageId:n,newName:m,oldName:u,trackRenamePage:()=>d("page_commit_rename",{nodeId:t,isDivider:p},{forwardToDatadog:!0})}),p&&t===n){let n=e.findIndex(e=>e.nodeId===t),a=n+1,l=e[a];for(;l&&l.isDivider;)a+=1,l=e[a];if(l)(0,Fk.J)(()=>(0,cm.$P)(l.nodeId,t,c,o,(0,Am.Fy)(e,l.nodeId)===ei.xal.LOADED,d));else{let a=n-1,l=e[a];for(;l&&l.isDivider;)a-=1,l=e[a];l?(0,Fk.J)(()=>(0,cm.$P)(l.nodeId,t,c,o,(0,Am.Fy)(e,l.nodeId)===ei.xal.LOADED,d)):s(null)}}a(e=>e===n?null:e)},[e,s,n,a,l,i,t,c,d,o]);return{renamingPageId:n,startRenaming:u,cancelRenaming:m,commitRenaming:p,pendingPageName:l,setPendingPageName:r}}function Fj({pages:e,isReadOnly:t,onContextMenu:n,onPageSwitch:a,isComparingChanges:l,pageToNumChanges:r,shouldHighlightActivePage:i=!0,activePageShouldUseBrandColor:o}){var s;let c=(0,aN.J2)(null==(s=ei.Ez5)?void 0:s.currentPageState().requestedPageChange),d=(0,aN.J2)(ei.Ez5.uiState().showInFileMemoryPercentage),u=(0,cm.dh)(),m=!(0,Ag.w)(),p=(0,a6.U)(),g=(0,tR.l7)(),h=(0,f.useRef)(null),E=(0,aN.J2)(ei.Ez5.uiState().showMemoryUsage),v=(0,_.d4)(e=>e.versionHistory),y=(0,aN.J2)((0,tM.UK)().showGuids),{selectedPageIds:C,handleMultiselectClick:w,cancelMultiselect:T}=function(e){let[t,n]=(0,S.fp)(FV.cE),a=(0,cm.dh)(),l=(0,f.useCallback)(()=>{n(e=>e.length?[]:e)},[n]),r=(0,f.useCallback)((r,i)=>{let o=FW(i);switch(o&&((0,aT.tJ)([]),et.Y5.commit()),o){case"individual":return n(t.includes(r)?t.filter(e=>e!==r):0===t.length&&a!==r?[a,r]:[...t,r]),!0;case"range":{let l=0===t.length?a:t[t.length-1],i=e.findIndex(e=>e.nodeId===l),o=e.findIndex(e=>e.nodeId===r),s=Math.min(i,o),c=Math.max(i,o),d=new Set(t),u=e.slice(s,c+1).map(e=>e.nodeId);return d.has(u[0])&&d.has(u[u.length-1])?n(t.filter(e=>!u.includes(e))):n([...t,...u.filter(e=>!d.has(e))]),!0}case null:return l(),!1}},[l,e,a,t,n]);return{selectedPageIds:t,handleMultiselectClick:r,cancelMultiselect:l}}(e),{isReordering:x,reorderingPageIds:N,startReordering:k,cancelReordering:I,commitReordering:A,draggingState:O,updateDraggingState:L}=function(e){let[t,n]=(0,f.useState)([]),a=(0,f.useRef)(null),[l,r]=(0,f.useState)(null),i=t.length>0,o=(0,a6.U)(),s=(0,f.useCallback)(e=>{n(e),r(null),a.current=null},[]),c=(0,f.useCallback)(()=>{n(e=>e.length?[]:e),r(null),a.current=null},[]),d=(0,f.useCallback)((e,n)=>{if(t.includes(e)){r(null);return}let i=n.target;l&&l.dragOverPageId===e&&a.current||(a.current=i.getBoundingClientRect());let o=n.clientY-a.current.top<a.current.height/2?"before":"after";r(t=>t&&t.dragOverPageId===e&&t.insertPosition===o?t:{dragOverPageId:e,insertPosition:o})},[l,t]),u=(0,f.useCallback)(()=>!l||!i||t.includes(l.dragOverPageId)?(c(),!1):(o4.l7.user("reorder-pages",()=>{let n=(0,EO.Pe)(e);"before"===l.insertPosition?[...t].sort((e,t)=>n[e]-n[t]).forEach(e=>{ei.Egt.pageMoveBeforePage(e,l.dragOverPageId)}):[...t].sort((e,t)=>n[t]-n[e]).forEach(e=>{ei.Egt.pageMoveAfterPage(e,l.dragOverPageId)})}),c(),o("page_reorder",{reorderedPageIds:t,dragOverPageId:l.dragOverPageId,insertPosition:l.insertPosition},{forwardToDatadog:!0}),!0),[e,i,t,c,l,o]);return{isReordering:i,reorderingPageIds:t,startReordering:s,cancelReordering:c,commitReordering:u,draggingState:l,updateDraggingState:d}}(e),{renamingPageId:P,startRenaming:D,cancelRenaming:R,commitRenaming:M,pendingPageName:F,setPendingPageName:B}=Fz(e),U=function({pagesList:e,isComparingChanges:t}){let n=(0,fL.Z)("page_change_navigator_navigate"),a=(0,Dl.E)(),l=(0,a6.U)(),r=(0,_.wA)(),i=(0,xB._6)(),o=(0,cm.dh)(),s=(0,_.d4)(e=>e.versionHistory);return(0,f.useCallback)(c=>{(0,cm.$P)(c,o,s,r,(0,Am.Fy)(e,c)===ei.xal.LOADED,l,n,a,t,i)},[e,n,a,l,r,i,o,s,t])}({pagesList:e,isComparingChanges:l});!function({pagesList:e,isDisabled:t,selectedPageIds:n,startRenaming:a,cancelMultiselect:l,cancelReordering:r}){(0,f.useEffect)(()=>{if(t)return;let i=t=>{let i=(0,EO.Pe)(e),o=n.filter(t=>{let n=i[t];return void 0!==n&&!e[n].isDivider}).sort((e,t)=>i[e]-i[t]);if(0!==o.length)switch(t.keyCode){case b.Uz.ESCAPE:l(),r();break;case b.Uz.R:(0,b.Fo)(t)&&(1===o.length?a(o[0]):et.Y5.triggerActionInUserEditScope("batch-page-rename",{args:{nodeIds:o}}))}};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t,e,n,l,r,a])}({pagesList:e,isDisabled:t,selectedPageIds:C,startRenaming:D,cancelMultiselect:T,cancelReordering:I}),(0,f.useEffect)(()=>{let e=()=>{T(),I()};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[T,I]),(0,f.useEffect)(()=>{if(!x)return;let e=e=>{e.stopPropagation(),t?I():A()};return document.addEventListener("mouseup",e),()=>document.removeEventListener("mouseup",e)},[x,t,I,A]);let H=(e,n)=>{I(),t||(0,M7.i)(n)||FW(n)||(C.includes(e)?k(C):(T(),k([e])))},G=(e,n)=>{x&&!t&&(L(e,n),n.preventDefault(),n.stopPropagation())},V=(e,n)=>{if(t||FW(n)){I();return}A()&&(n.preventDefault(),n.stopPropagation())},K=(e,n)=>{n.stopPropagation(),!t&&w(e,n)||(0,Fk.J)(()=>{g&&p("Dev Mode Overview Page Clicked",{pageId:e}),U(e),null==a||a(e)})},W=(e,t)=>{t.preventDefault(),t.stopPropagation(),n({nodeId:e,clientX:t.clientX,clientY:t.clientY})},z=e=>{t||D(e)},j=e=>{P&&(t||!e?R():M())},J=e=>!!i&&(c?e===c:e===u),Y=(0,f.useMemo)(()=>e.some(t=>t.pageType!==e[0].pageType),[e]);return f.createElement("div",{ref:h},e.map((t,n)=>f.createElement("div",{key:t.nodeId},f.createElement(FJ,{nodeId:t.nodeId,isDivider:t.isDivider,isFirstRow:0===n,isLastRow:n===e.length-1,draggingState:O,pagesListRef:h,previewSummaryEnabled:0===N.length&&!t.isDivider},f.createElement(FH,{nodeId:t.nodeId,nodeName:t.name,pageType:t.pageType,hasMultiplePageTypes:Y,shouldShowGuids:y,isRenaming:P===t.nodeId,renamingPagePendingName:P===t.nodeId?F:null,startRenaming:z,stopRenaming:j,setRenamingPagePendingName:B,isActive:J(t.nodeId),isDivider:t.isDivider,onMouseDownCallback:H,onMouseUpCallback:V,onMouseMoveCallback:G,onClickCallback:K,reorderingPageGuids:N,selectedPageGuids:C,onContextMenuCallback:W,showMemoryUsage:E,showInFileMemoryPercentage:d,versionHistory:v,isComparingChanges:l,pageToNumChanges:r,index:n,isOffline:m,pagesList:e,activePageShouldUseBrandColor:o})))))}function FJ({nodeId:e,isDivider:t,isFirstRow:n,isLastRow:a,children:l,draggingState:r,pagesListRef:i,previewSummaryEnabled:o}){let s=(0,f.useRef)(null),[c,d]=f.useState(!1),u=r&&r.dragOverPageId===e?"before"===r.insertPosition?n?"pages_list--withInsertBeforeTop--IQT63":"pages_list--withInsertBefore---ui-o":a?"pages_list--withInsertAfterBottom--yG3xD":"pages_list--withInsertAfter--7QoMA":null;return f.createElement(f.Fragment,null,f.createElement("div",{className:nb()("pages_list--pagesRowWrapper--Plig-",u,{"pages_list--divider--idUOu":t}),ref:s,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1)},l,c&&o&&f.createElement(FR,{pagesListRef:i,pageRowRef:s,nodeId:e})))}var FY=n(866206),FX=n(625651),Fq=n(140871);function FZ(){let e=(0,af.q5)(),t=window.FigmaMobile,n=(0,cm.rE)(),a=(0,Fq.C3)(),l=(0,_.wA)(),r=(0,a6.am)(),i=a?(0,FY.oA)(a.pageNodeId):void 0;(0,f.useEffect)(()=>{t&&(t._select_page=async e=>{i===e&&l(FX.au({})),await lE.q.instance.setCurrentPageAsync(e)})},[l,t,i]),(0,f.useEffect)(()=>{t&&(t._rename_page=(t,n)=>{(0,cm.CQ)({openFile:e,pageId:t,newName:n,trackRenamePage:()=>r("page_commit_rename",{nodeId:t},{forwardToDatadog:!0})})})},[t,e,r]),(0,f.useEffect)(()=>{t&&(t._delete_page=e=>{et.Y5.triggerActionInUserEditScope("page-delete",{args:{nodeId:e}}),et.Y5.commit()})},[t]),(0,f.useEffect)(()=>{t&&(t._create_page=()=>{n(null)})},[t,n])}let FQ=(0,lf.hG)(lw.xM9),F$=(0,lf.jz)(lw.Nqv),F0=(0,lf.jz)(lw.M$q),F1=(0,eu.s)(e=>{var t,n,a;e.user&&(0,$.uE)("action_left_panel_scroll",{user:e.user},{assetsPanelVersion:e.activeTab===ei.xae.ASSETS?2:void 0,tab:e.activeTab===ei.xae.ASSETS?"assets":"layers",fileKey:null==(t=e.openFile)?void 0:t.key,fileTeamId:(null==(n=e.openFile)?void 0:n.teamId)??void 0,fileOrgId:(null==(a=e.openFile)?void 0:a.parentOrgId)??void 0})},500);class F2 extends n_.o6{constructor(e){super(e),this.objectScrollTop=0,this.onObjectScroll=e=>{this.objectScrollTop=e},this.componentScrollTop=0,this.onComponentScroll=e=>{F1(this.props),this.componentScrollTop=e},this.scrollContainerRef=f.createRef(),this.scrollContainerInnerRef=f.createRef(),this.shouldScrollToPage=null,this.updateLocalStorageSettings=(e,t,n,a)=>{if(A.x4){let l=JSON.parse(A.x4.getItem("pages-panel")||"{}");l[e]={height:t,isOpen:n,devHandoffShowAllPages:a},A.x4.setItem("pages-panel",JSON.stringify(l))}},this.getLocalStorageSettings=e=>{if(A.x4)return JSON.parse(A.x4.getItem("pages-panel")||"{}")[e]},this.setNeedsScrollLine=e=>{this.setState({needsScrollLine:e>0})},this.scrollViewToPage=e=>{if(!this.scrollContainerRef.current){this.shouldScrollToPage=e;return}let t=this.positionOfPageInList(e),n=t+FQ,a=this.scrollContainerRef.current.getScrollTop(),l=a+this.scrollContainerRef.current.getTrackHeight();t<a?this.scrollContainerRef.current.scrollTo(t-FQ/2):n>l&&this.scrollContainerRef.current.scrollTo(a+(n-l)+FQ/2),this.shouldScrollToPage=null},this.onContextClick=n_.cZ(this,"contextmenu",e=>{e.preventDefault(),e.stopPropagation(),this.props.onPageContextMenu({nodeId:this.props.currentPageGuid,clientX:e.clientX,clientY:e.clientY})}),this.onContextClickNothing=e=>{e.preventDefault(),e.stopPropagation()},this.forcePagesExpanded=()=>{var e;this.showLayersPanel(),this.state.isPagesOpen||(this.setState({isPagesOpen:!0}),(0,$.ds)("pages_panel_open_toggle",null==(e=this.props.openFile)?void 0:e.key,ET.D.getState(),{isPagesOpen:!0},{forwardToDatadog:!0}))},this.togglePagesExpanded=()=>{var e;this.props.isDevHandoffOverview||((0,$.ds)("pages_panel_open_toggle",null==(e=this.props.openFile)?void 0:e.key,ET.D.getState(),{isPagesOpen:!this.state.isPagesOpen},{forwardToDatadog:!0}),this.setState({isPagesOpen:!this.state.isPagesOpen}))},this.toggleLayersExpanded=()=>{(0,Z.sx)("objects_panel_open_toggle",{isLayersOpen:!this.state.isLayersOpen}),this.setState({isLayersOpen:!this.state.isLayersOpen})},this.showPublish=()=>{var e,t;this.props.openFile&&((0,Z.sx)("left_panel_set_tab",{value:"Components"}),null==(t=(e=this.props).markAssetPanelLoadingStart)||t.call(e),this.props.dispatch(K.FP({tab:ei.xae.ASSETS,persist:!0,shouldFocusSearchBar:!0})))},this.showLayersPanel=()=>{(0,Z.sx)("left_panel_set_tab",{value:"Layers"}),this.props.dispatch(K.FP({tab:ei.xae.LAYERS,persist:!0}))},this.showSitesBlocksPanel=()=>{(0,Z.sx)("left_panel_set_tab",{value:"LayersSites"}),this.props.dispatch(K.FP({tab:ei.xae.KITS_SITES}))},this.onFullscreenStartRenamingNode=({nodeId:e})=>{this.startRenamingNode(e)},this.startRenamingNode=e=>{var t;if(this.props.isReadOnly)return;let n=lE.q.instance.get(e);if((null==n?void 0:n.isResponsiveSet)&&(null==(t=n.parentNode)?void 0:t.defaultResponsiveSetId)===e){this.props.dispatch(eS.F.enqueue({message:(0,eN.t)("sites.panel.pages_panel.cannot_rename_default_responsive_set")}));return}this.props.activeTab!==ei.xae.LAYERS&&this.showLayersPanel(),this.setState({renamingNodeGuid:e}),(null==n?void 0:n.parentGuid)&&aT.hq(n.parentGuid)},this.stopRenamingNode=(e,t,n)=>{if(this.props.isReadOnly)return;let a=this.state.renamingNodeGuid;if(a&&e){let e=lE.q.instance.get(a);(null==e?void 0:e.isResponsiveSet)&&!t&&(t=null==e?void 0:e.name);let l=t||"";o4.l7.user("set-node-name",()=>aT.i(a,l)),et.Y5.commit(),hp.wt.reportEditActionIf(l!==n,"rename-node")}this.setState({renamingNodeGuid:null})},this.clampValidHeight=e=>{var t;let n=(null==(t=this.scrollContainerInnerRef.current)?void 0:t.getBoundingClientRect().top)??175,a=1.5*F$+(this.props.isUI3?40+F0:0);return Math.max(1.5*FQ,Math.min(e,this.state.cachedInnerHeight-n-a))},this.onWindowSize=e=>{this.windowResizeHandler()},this.windowResizeHandler=(0,eu.s)(()=>{this.setState({cachedInnerHeight:window.innerHeight})},45),this.toggleViewMode=()=>{this.setState({viewMode:this.state.viewMode===LZ.Bk.Grid?LZ.Bk.List:LZ.Bk.Grid})},this.isManageMemoryModalShown=()=>this.props.modalShown&&this.props.modalShown.type===P$.gG.type,this.toggleManageMemoryModal=()=>{var e;let{memoryUsedPercent:t}=(0,Au.IJ)();(0,Z.sx)("toggle_manage_memory_modal",{memoryUsedPercent:t,totalLayers:null==(e=ei.CeL)?void 0:e.getFileNodeCount(),pageContentPct:t-(0,Au.Zz)()}),this.isManageMemoryModalShown()?this.props.dispatch(ty.Ce()):this.props.dispatch(ty.to({type:P$.gG,data:{sidePanelWidth:this.props.width,markModalClosed:()=>{}}}))},this.setUpsellHeight=e=>{this.setState({upsellHeight:e})},this.setShowAllPages=e=>{let t=this.computedHeight(),n=this.getPagesInfo(e),a=this.heightForPages(n.pages.length,!!n.showAllButton),l=e?Math.max(t,a):Math.min(t,a);this.setState({devHandoffShowAllPages:e,height:l})},this.getPagesInfo=e=>{let{pagesList:t}=this.props;if(!this.props.isDevHandoff||this.props.disableCollapsing)return{pages:t};let n=!1,a=t.filter(e=>{let t=ei.glU.nodeStatusesOnPage(e.nodeId).length>0;return t&&(n=!0),t||e.nodeId===this.props.currentPageGuid});return n&&a.length!==t.length?e?{pages:t,showAllButton:f.createElement(wo.d,{label:(0,eN.t)("dev_handoff.pages.hide_other"),onClick:()=>this.setShowAllPages(!1)})}:{pages:a,showAllButton:f.createElement(wo.d,{label:(0,eN.t)("dev_handoff.pages.show_all"),onClick:()=>this.setShowAllPages(!0)})}:{pages:t}},this.state={renamingNodeGuid:null,needsScrollLine:!1,height:null,cachedInnerHeight:window.innerHeight,isPagesOpen:this.props.isUI3&&!this.props.isDevHandoff,isLayersOpen:!this.props.isUI3,pagesListInitialScrollTop:null,viewMode:LZ.Bk.Grid,upsellHeight:0,devHandoffShowAllPages:!1,webpagesListHeight:null}}componentDidMount(){var e;super.componentDidMount(),et.Y5.fromFullscreen.on("startRenamingNode",this.onFullscreenStartRenamingNode),window.addEventListener("resize",this.onWindowSize),null!=this.props.currentPageGuid&&this.scrollViewToPage(this.props.currentPageGuid),this.props.openFile&&this.initializePagesPanelSettings(this.props.openFile.key),this.props.isDevHandoffOverview&&!this.state.isPagesOpen&&this.setState({isPagesOpen:!0}),ei.Ez5.uiState().isRecovery.getCopy()&&(this.toggleManageMemoryModal(),null==(e=ei.Ez5)||e.uiState().showMemoryUsage.set(!0))}componentWillUnmount(){super.componentWillUnmount(),window.removeEventListener("resize",this.onWindowSize),et.Y5.fromFullscreen.removeListener("startRenamingNode",this.onFullscreenStartRenamingNode)}UNSAFE_componentWillUpdate(e,t){e.renamingPageId&&this.props.renamingPageId!==e.renamingPageId&&!this.scrollContainerRef.current&&this.setState({pagesListInitialScrollTop:this.positionOfPageInList(e.renamingPageId)-FQ/2}),this.shouldScrollToPage&&this.scrollContainerRef.current&&this.scrollViewToPage(this.shouldScrollToPage)}componentDidUpdate(e,t){var n,a,l,r,i;super.componentDidUpdate(e,t),e.isUI3!==this.props.isUI3&&this.setState({isPagesOpen:this.props.pagesList.length>1||this.props.isUI3&&!this.props.isDevHandoff}),this.props.isDevHandoffOverview&&!this.state.isPagesOpen&&this.setState({isPagesOpen:!0}),e.currentPageGuid!==this.props.currentPageGuid&&this.scrollViewToPage(this.props.currentPageGuid);let o=e.activeTab!==this.props.activeTab&&this.props.activeTab===ei.xae.ASSETS,s=t.viewMode!==this.state.viewMode;if(o||s){let e=(0,A.TQ)(),t=this.props.showRedesignedAssetsPanel?DM.Pv:(0,LZ.RN)(this.state.viewMode);if(this.props.showRedesignedAssetsPanel&&e)try{let n=e.getItem(DM.Zi);if(n){let e=JSON.parse(n);(e===DM.$H.LIST||e===DM.$H.GRID)&&(t=e)}}catch{}(0,Z.sx)("Component Sidebar Viewed",{viewMode:t,assetsPanelVersion:this.props.showRedesignedAssetsPanel?3:2,fileKey:null==(n=this.props.openFile)?void 0:n.key,fileTeamId:(null==(a=this.props.openFile)?void 0:a.teamId)??void 0,fileOrgId:(null==(l=this.props.openFile)?void 0:l.parentOrgId)??void 0})}if(this.scrollContainerRef.current&&this.setNeedsScrollLine(this.scrollContainerRef.current.getScrollTop()),this.props.openFile){(null==(r=e.openFile)?void 0:r.key)!==this.props.openFile.key&&this.initializePagesPanelSettings(this.props.openFile.key);let n=t.isPagesOpen!==this.state.isPagesOpen,a=this.state.height&&t.height!==this.state.height,l=this.state.devHandoffShowAllPages!==t.devHandoffShowAllPages;(null==(i=e.openFile)?void 0:i.key)===this.props.openFile.key&&(n||a||l)&&this.updateLocalStorageSettings(this.props.openFile.key,this.state.height,this.state.isPagesOpen,this.state.devHandoffShowAllPages)}null!==this.props.isPagesOpenOverride&&this.props.isPagesOpenOverride!==e.isPagesOpenOverride&&(S.zl.set(FV.aN,null),this.setState({isPagesOpen:this.props.isPagesOpenOverride})),null!==this.props.isLayersOpenOverride&&this.props.isLayersOpenOverride!==e.isLayersOpenOverride&&this.setState({isLayersOpen:this.props.isLayersOpenOverride}),this.props.renamingPageId&&this.props.renamingPageId!==e.renamingPageId&&!this.props.isReadOnly&&(this.forcePagesExpanded(),this.scrollViewToPage(this.props.renamingPageId))}heightForPages(e,t){let n=e*FQ;n=Math.ceil(n/FQ)*FQ+this.state.upsellHeight+(this.props.isUI3?8:FQ/2),t&&(n+=FQ);let a=this.props.isDevHandoff?144:40;return Math.min(n,Math.round(.25*(this.state.cachedInnerHeight-(0,Ij.bG)()-(0,lf.hG)(lw.MGP)-a)))}defaultHeight(e){if(e){let e=this.props.publishableCanvasId?(0,Cr.Vl)(lE.q.instance.get(this.props.publishableCanvasId)):[];return this.heightForPages(e.length,!1)}let{pages:t,showAllButton:n}=this.getPagesInfo(this.state.devHandoffShowAllPages);return this.heightForPages(t.length,!!n)}async initializePagesPanelSettings(e){let t=await this.getLocalStorageSettings(e);(0,oQ.flushSync)(()=>{t?this.setState({height:t.height,isPagesOpen:t.isOpen,devHandoffShowAllPages:t.devHandoffShowAllPages}):this.setState({isPagesOpen:this.props.pagesList.length>1||this.props.isUI3&&!this.props.isDevHandoff})})}indexOfPageInList(e){return this.props.pagesList.findIndex(t=>t.nodeId===e)}positionOfPageInList(e){let t=this.indexOfPageInList(e);return -1!==t?t*FQ:0}canAddNewPages(){return!this.props.isReadOnly}renderHeaderRowUi2(){let e=this.props.isReadOnly?this.togglePagesExpanded:void 0,t=this.canAddNewPages();return f.createElement("div",{className:this.state.needsScrollLine?I3:I5,onClick:e},f.createElement("div",{className:I6,onContextMenu:this.onContextClickNothing},(0,eN.tx)("fullscreen.pages_panel.pages")),t&&f.createElement("div",{className:a8.cx.flex.mx8.itemsCenter.$},f.createElement(FC,{recordingKey:n_.Pt(this.props,"newPage")})))}renderHeaderRowUi3(e){let t=this.props.isReadOnly,n=t?this.togglePagesExpanded:void 0,a=(0,ag.$A)(this.props.selectedView)||this.props.isDevHandoffOverview,l=t||a,r=e||(0,y.kc)().interop_pages,i=this.canAddNewPages();return f.createElement("div",{className:this.state.needsScrollLine?I3:I5,onClick:n},l?f.createElement("div",{className:I6,onContextMenu:this.onContextClickNothing},f.createElement(a7.D8,{className:nb()(At,{[An]:!this.props.showTabs||a,[Aa]:!this.props.showTabs||a}),onClick:this.props.activeTab===ei.xae.ASSETS?this.forcePagesExpanded:this.togglePagesExpanded,onContextMenu:a?this.onContextClick:this.onContextClickNothing,recordingKey:n_.Pt(this.props,"collapsedRow")},f.createElement("span",{className:nb()("pages_panel--pageExpandToggle--XoZEs",{"pages_panel--isHidden--Rc54P":this.props.isDevHandoffOverview})},this.state.isPagesOpen?f.createElement(ER.O,null):f.createElement(IW.k,null)),f.createElement("span",{className:Al,"data-onboarding-key":"pages-panel-toggle"},this.state.isPagesOpen?(0,eN.tx)("fullscreen.pages_panel.pages"):this.props.currentPageName||"")),f.createElement("div",{className:this.props.isComparingChanges?Ao:void 0},f.createElement(AZ,{onClick:e=>{e.stopPropagation(),(0,IY._)(this.props.dispatch,this.props.selectedView,"overview_search_clicked"),this.showLayersPanel(),et.Y5.triggerAction("canvas-search",{source:"toolbar"})}}))):f.createElement(a7.D8,{className:nb()(I6,{[I7]:!this.state.isPagesOpen}),onContextMenu:this.onContextClickNothing,onClick:this.togglePagesExpanded,role:"button",tabIndex:0,recordingKey:n_.Pt(this.props,"collapsedRow")},this.state.isPagesOpen?f.createElement(ER.O,null):f.createElement(IW.k,null),(0,eN.tx)("fullscreen.pages_panel.pages")),i&&f.createElement("div",{className:a8.cx.flex.relative.mr8.justifyEnd.itemsCenter.$},f.createElement(FC,{recordingKey:n_.Pt(this.props,"newPage")}),r&&f.createElement(FN,{recordingKey:this.props.recordingKey})))}renderAssetPanelUi2(){return f.createElement(PX,{onScroll:this.onComponentScroll,initialScrollTop:this.componentScrollTop,recordingKey:"componentsSidebar",viewMode:this.state.viewMode,toggleViewMode:this.toggleViewMode,containerSizingOptions:{containerWidth:this.props.width,maxSmallThumbSize:40,maxWideColWidth:300}})}renderAssetPanelUi3(){return f.createElement(l7.tH,{boundaryKey:"AssetPanelUI3",fallback:f.createElement(M4,null)},f.createElement(M1,{width:this.props.width}))}computedHeight(){return this.state.height?this.clampValidHeight(this.state.height):this.defaultHeight()}renderPagesList(e){if(!this.props.pagesList)return null;let{pages:t,showAllButton:n}=this.getPagesInfo(this.state.devHandoffShowAllPages);return f.createElement(IJ.V,null,f.createElement(Fp.w,{size:this.computedHeight(),defaultSize:this.defaultHeight(),onResize:e=>{this.setState({height:e}),aT.Uc("")},side:"bottom",className:e?"pages_panel--pendingPagesList--rKp9D pages_panel--pagesList--GVSQw":"pages_panel--pagesList--GVSQw"},f.createElement(i6.P,{scrollBarAlways:!1,ref:this.scrollContainerRef,scrollContainerRef:this.scrollContainerInnerRef,className:"pages_panel--scrollContainer--aXdXr",width:this.props.width,onScroll:this.setNeedsScrollLine,initialScrollTop:this.state.pagesListInitialScrollTop||void 0},f.createElement(Fj,{pages:t,shouldHighlightActivePage:!this.props.isDevHandoffOverview,isComparingChanges:this.props.isComparingChanges,pageToNumChanges:this.props.pageToNumChanges,isReadOnly:this.props.isReadOnly,onContextMenu:this.props.onPageContextMenu}),n&&f.createElement("div",{className:"pages_panel--showAllButtonContainer--I73hV"},n),f.createElement(FS,{setUpsellHeightCallback:this.setUpsellHeight}))))}renderObjectsPanelUi2(){var e;let t=this.props.isLoadingPage,n=(null==(e=this.props.openFile)?void 0:e.thumbnailGuid)||null;return f.createElement(Fu,{hasPending:t,isReadOnly:this.props.isReadOnly,currentPage:this.props.currentPageGuid,onScroll:this.onObjectScroll,initialScrollTop:this.objectScrollTop,width:this.props.width,shouldShowGuids:this.props.shouldShowGuids,renamingGuid:this.state.renamingNodeGuid,startRenaming:this.startRenamingNode,stopRenaming:this.stopRenamingNode,thumbnailGuid:n,versionHistory:this.props.versionHistory})}renderObjectsPanelUi3(e){var t;let n=this.props.selectedView,a=(0,P0.P)(n),l=(0,aA.Vj)(n),r=this.props.isLoadingPage,i=(null==(t=this.props.openFile)?void 0:t.thumbnailGuid)||null,o=this.state.renamingNodeGuid;if(l&&this.props.isSitesWebpagesOpen){let e=lE.q.instance.get(this.state.renamingNodeGuid||"");(null==e?void 0:e.isResponsiveSet)&&(o=null)}return a?null:f.createElement(f.Fragment,null,f.createElement(a7.D8,{className:I5,onContextMenu:this.onContextClickNothing,onClick:this.toggleLayersExpanded,role:"button",tabIndex:0,recordingKey:n_.Pt(this.props,"layersCollapsedRow")},f.createElement("div",{className:nb()(I6,{[I7]:!this.state.isLayersOpen})},this.state.isLayersOpen?f.createElement(ER.O,null):f.createElement(IW.k,null),(0,eN.tx)("fullscreen.pages_panel.layers_tab")),f.createElement(this.ResponsiveSetFocusModeToggle,{isSites:l,isResponsiveSetAutoFocusEnabled:e})),this.state.isLayersOpen&&f.createElement(Fu,{hasPending:r,isReadOnly:this.props.isReadOnly,currentPage:this.props.currentPageGuid,onScroll:this.onObjectScroll,initialScrollTop:this.objectScrollTop,width:this.props.width,shouldShowGuids:this.props.shouldShowGuids,renamingGuid:o,startRenaming:this.startRenamingNode,stopRenaming:this.stopRenamingNode,thumbnailGuid:i,versionHistory:this.props.versionHistory}))}ResponsiveSetFocusModeToggle({isSites:e,isResponsiveSetAutoFocusEnabled:t}){return e?f.createElement("div",{className:a8.cx.flex.mr8.itemsCenter.$},f.createElement(iG.YW,{"aria-label":(0,eN.t)("sites.panel.focus_mode_responsive_set_toggle"),onClick:e=>{e.stopPropagation(),et.Y5.triggerAction("focus-mode-responsive-set",{source:"left_panel"})},"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("sites.panel.focus_mode_responsive_set_toggle"),selected:!!t,recordingKey:"responsiveSetFocusModeToggle",dataTestId:"responsive-set-focus-mode-toggle"},f.createElement(Iz,null))):null}renderTabsRowUi2(e,t){return f.createElement("div",{className:Ar},this.props.showTabs&&f.createElement(f.Fragment,null,f.createElement(AZ,{onClick:()=>{(0,IY._)(this.props.dispatch,this.props.selectedView,"overview_search_clicked"),this.showLayersPanel(),et.Y5.triggerAction("canvas-search",{source:"toolbar"})}}),f.createElement(a7.Bx,{className:e===ei.xae.LAYERS?Ae:I9,onMouseDown:this.showLayersPanel,onContextMenu:this.onContextClickNothing,"data-label":(0,eN.t)("fullscreen.pages_panel.layers_tab"),recordingKey:n_.Pt(this.props,"tab","layers"),innerText:"Layers"},(0,eN.tx)("fullscreen.pages_panel.layers_tab")),f.createElement(a7.Bx,{className:Ai,onMouseDown:this.showPublish,onContextMenu:this.onContextClickNothing,recordingKey:n_.Pt(this.props,"tab","assets"),innerText:"Assets","data-onboarding-key":at.Qr},f.createElement("div",{className:e===ei.xae.ASSETS?Ae:I9,"data-label":(0,eN.t)("fullscreen.pages_panel.assets_tab")},f.createElement("div",null,(0,eN.tx)("fullscreen.pages_panel.assets_tab"),f.createElement(Fh,null))))),!this.props.showTabs&&f.createElement("div",{className:nb()("pages_panel--viewOnlySearchRow--4x4HN",{[Ao]:this.props.isComparingChanges||this.props.isDevHandoff})},f.createElement(Of,{onFocus:()=>{(0,IY._)(this.props.dispatch,this.props.selectedView,"overview_search_clicked"),this.showLayersPanel(),et.Y5.triggerAction("canvas-search",{source:"toolbar"})}})),f.createElement(a7.D8,{className:nb()(At,{[An]:!this.props.showTabs,[Aa]:!this.props.showTabs}),onClick:e===ei.xae.ASSETS?this.forcePagesExpanded:this.togglePagesExpanded,onContextMenu:this.onContextClick,recordingKey:n_.Pt(this.props,"collapsedRow")},f.createElement("span",{className:Al,"data-onboarding-key":"pages-panel-toggle"},this.props.currentPageName||""),f.createElement(a2.B,{className:I4,svg:t})))}renderTabsRowUi3(e){if(!this.props.showTabs)return null;let t=(0,aA.Vj)(this.props.selectedView),n=(0,ag.Uq)(this.props.selectedView),a=this.props.showRedesignedAssetsPanel&&n&&(e===ei.xae.ASSETS||e===ei.xae.LAYERS);return f.createElement("div",{className:Ar},this.props.showTabs&&f.createElement("div",{className:"pages_panel--sidebarLeftHeadingTabStrip--2qRhH"},f.createElement(a7.Bx,{className:e===ei.xae.LAYERS?Ae:I9,onMouseDown:this.showLayersPanel,onContextMenu:this.onContextClickNothing,"data-label":(0,eN.t)("fullscreen.pages_panel.file_tab"),recordingKey:n_.Pt(this.props,"tab","layers"),innerText:"File"},(0,eN.tx)("fullscreen.pages_panel.file_tab")),t&&f.createElement(a7.Bx,{className:e===ei.xae.KITS_SITES?Ae:I9,onMouseDown:this.showSitesBlocksPanel,onContextMenu:this.onContextClickNothing,"data-label":(0,eN.t)("fullscreen.pages_panel.resources_tab"),recordingKey:n_.Pt(this.props,"tab","layers-sites"),innerText:"Layers"},(0,eN.tx)("fullscreen.pages_panel.resources_tab")),f.createElement(a7.Bx,{className:Ai,onMouseDown:this.showPublish,onContextMenu:this.onContextClickNothing,recordingKey:n_.Pt(this.props,"tab","assets"),innerText:"Assets","data-onboarding-key":at.Qr},f.createElement("div",{className:e===ei.xae.ASSETS?Ae:I9,"data-label":(0,eN.t)("fullscreen.pages_panel.assets_tab")},f.createElement("div",null,(0,eN.tx)("fullscreen.pages_panel.assets_tab"),f.createElement(Fh,null))))),f.createElement("div",{className:"pages_panel--sidebarLeftHeadingIcons--VMQcd"},e===ei.xae.LAYERS&&f.createElement(AZ,{onClick:()=>{(0,IY._)(this.props.dispatch,this.props.selectedView,"overview_search_clicked"),et.Y5.triggerAction("canvas-search",{source:"toolbar"})}}),!this.props.isUI3&&f.createElement(iG.K0,{"aria-label":(0,eN.t)("fullscreen_actions.hide-sidebar"),onClick:this.props.toggleIsCollapsed,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("fullscreen_actions.hide-sidebar"),"data-tooltip-shortcut-key":"toggle-sidebar"},f.createElement(Ff,null)),a&&f.createElement(OQ,{recordingKey:this.props.recordingKey,entrypoint:e===ei.xae.ASSETS?OH.r6.ASSETS_PANEL_BUTTON:OH.r6.LAYERS_TAB_BUTTON,hideIfNoUpdates:e===ei.xae.LAYERS})))}render(){let e=this.props.openFile?this.props.activeTab:ei.xae.LAYERS,t=this.props.openFile,n=this.props.isLoadingPage,a=this.props.isUI3,l=e===ei.xae.LAYERS||this.props.isReadOnly,r=(0,aA.Vj)(this.props.selectedView),i=(0,ag.$A)(this.props.selectedView)||this.props.isDevHandoffOverview,o=this.state.isPagesOpen,s=!r&&l&&(!!a||o),c=this.state.isPagesOpen&&this.props.activeTab===ei.xae.LAYERS?of.A:op.A,d=this.props.pagesList.some(e=>e.pageType!==this.props.pagesList[0].pageType),u=!o||this.props.showTabs;return f.createElement("div",{className:nb()("pages_panel--pagesPanel--YVSDg sf_pro--uiFontWithSFProFallback--m-p9V",{pagesPanel:!n,"pages_panel--verticalFlexContainer--9uwfT pages_panel--verticalFlexBase--7-e0s":!this.props.isShowingSlidesCarousel&&!this.props.ignoreVerticalFlex,"pages_panel--verticalFlexBase--7-e0s":this.props.isShowingSlidesCarousel})},this.props.isComparingChanges&&l&&f.createElement("div",{className:Ar},f.createElement(Dr,null)),this.props.isUI3?f.createElement(f.Fragment,null,f.createElement(Ad,null),u&&!i&&this.renderTabsRowUi3(e)):f.createElement(f.Fragment,null,i?f.createElement(FE,{togglePagesExpanded:this.togglePagesExpanded,onContextClick:this.onContextClick,currentPageName:this.props.currentPageName,currentPageGuid:this.props.currentPageGuid,pageTabChevron:c,isOverview:this.props.isDevHandoffOverview}):this.renderTabsRowUi2(e,c),e===ei.xae.LAYERS&&f.createElement(Ad,null)),t&&f.createElement(De,{fileKey:t.key,toggleManageMemoryModal:this.toggleManageMemoryModal,closeManageMemoryModal:()=>{this.isManageMemoryModalShown()&&this.props.dispatch(ty.Ce())}}),r&&l&&f.createElement(Cl.j8,{scrollContainerRef:this.scrollContainerRef,width:this.props.width,height:this.state.webpagesListHeight,defaultHeight:this.defaultHeight(!0),onScroll:this.onObjectScroll,onResize:e=>{this.setState({webpagesListHeight:e}),aT.Uc("")},initialScrollTop:this.objectScrollTop,currentPageGuid:this.props.currentPageGuid,isComparingChanges:this.props.isComparingChanges,needsScrollLine:this.state.needsScrollLine,renamingNodeGuid:this.state.renamingNodeGuid,startRenamingNode:this.startRenamingNode,stopRenamingNode:this.stopRenamingNode}),s&&f.createElement("div",{onClick:e=>e.stopPropagation(),role:"none"},f.createElement("div",{className:"pages_panel--pagesPanelContent--ZGkcM pages_panel--pagesPanelContentWhiteboard--gUJEi"},a?this.renderHeaderRowUi3(d):this.renderHeaderRowUi2(),o&&this.renderPagesList(n))),l&&!this.props.isDevHandoff&&!this.props.isDevHandoffOverview&&f.createElement("div",{className:"pages_panel--objectPanelContent--Zy2S3"},a?this.renderObjectsPanelUi3(this.props.isResponsiveSetAutoFocusEnabled):this.renderObjectsPanelUi2()),e===ei.xae.KITS_SITES&&f.createElement(Cl.oT,null),e===ei.xae.ASSETS&&!this.props.isReadOnly&&f.createElement(f.Fragment,null,this.props.showRedesignedAssetsPanel?this.renderAssetPanelUi3():this.renderAssetPanelUi2()))}}function F5(e){let t=(0,aN.J2)(ei.Ez5.editorState().isResponsiveSetAutoFocusEnabled);return f.createElement(F2,{...e,isResponsiveSetAutoFocusEnabled:t})}function F4({width:e,isReadOnly:t,pagesList:n,activeTab:a,showTabs:l,hasTeamLibraryUpdates:r,isDevHandoff:i,isShowingSlidesCarousel:o,isDevHandoffOverview:s,onPageContextMenu:c,disableCollapsing:d,isComparingChanges:u,pageToNumChanges:m,recordingKey:p,ignoreVerticalFlex:g}){let h=(0,aN.J2)((0,tM.UK)().showGuids),E=(0,_.wA)(),v=(0,Am._Z)(),y=(0,S.md)(FV.aN),b=(0,n6.GS)(),C=(0,eF.M)()&&b,w=(0,aN.J2)(ei.Ez5.editorState().selectionEmpty),T=(0,ew.iZ)(),x=(0,PQ.lV)(),N=(0,af.q5)(),k=(0,_.d4)(e=>e.versionHistory),I=(0,xB._6)(),A=(0,_.d4)(e=>e.fileVersion),O=(0,_.d4)(e=>e.teams),L=(0,_.d4)(e=>e.loadingState),P=(0,_.d4)(e=>e.modalShown),D=(0,nT.U)(),R=(0,cm.dh)(),M=(0,cm.nn)(),F=(0,S.md)(CL),[B]=(0,S.fp)(FV.l7);FZ();let[U,H]=f.useState(!1);return f.useEffect(()=>{b&&!w&&H(!0)},[w,b]),f.createElement(F5,{versionHistory:k,user:T,width:e,isReadOnly:t,currentPageGuid:R,currentPageName:M,pagesList:n,activeTab:a,showTabs:l,hasTeamLibraryUpdates:r,isDevHandoff:i,isDevHandoffOverview:s,disableCollapsing:d,isComparingChanges:u,isShowingSlidesCarousel:o,pageToNumChanges:m,openFile:N,selectedView:I,fileVersion:A,teams:O,loadingState:L,modalShown:P,dropdownShown:D,recordingKey:p,shouldShowGuids:h,dispatch:E,isLoadingPage:v.isLoading,isPagesOpenOverride:y,isLayersOpenOverride:U,isUI3:b,toggleIsCollapsed:()=>et.Y5.triggerAction("toggle-sidebar",{source:"pages-panel"}),showRedesignedAssetsPanel:C,markAssetPanelLoadingStart:x,publishableCanvasId:"",isSitesWebpagesOpen:F,onPageContextMenu:c,renamingPageId:B,ignoreVerticalFlex:g})}function F3({isReadOnly:e,pagesList:t,shouldShowDuplicateOption:n=!0}){let a=(0,_.wA)(),[l,r]=(0,S.fp)(FV.cE);return(0,f.useCallback)(({nodeId:i,clientX:o,clientY:s})=>{if(e)return;let c=new Set(t.map(e=>e.nodeId)),d=l.filter(e=>c.has(e));d.length>0&&!d.includes(i)&&c.has(i)&&(d.push(i),r(d));let u=(()=>{if(d.length>0){let e=(0,EO.Pe)(t);return[...d].sort((t,n)=>e[t]-e[n])}return[i]})();0!==u.length&&a((0,nI.j7)({type:nz.d2,data:{clientX:o,clientY:s,pageIds:u,shouldShowDuplicateOption:n}}))},[l,a,e,t,r,n])}function F6(){let e=(0,tM.dP)(),t=(0,U._I)(),n=(0,tR.l7)(),a=(0,EO.n0)(),l=function(){let e=(0,_.wA)();return(0,f.useCallback)(({nodeId:t,clientX:n,clientY:a})=>{e((0,nI.j7)({type:nz.SA,data:{clientX:n,clientY:a,pageId:t}}))},[e])}();return f.createElement(F4,{recordingKey:"pagesPanel",isReadOnly:!0,width:e,pagesList:a,hasTeamLibraryUpdates:!1,activeTab:l8.xae.LAYERS,showTabs:t,disableCollapsing:!t,isDevHandoff:!0,isDevHandoffOverview:n,isComparingChanges:!1,onPageContextMenu:l,ignoreVerticalFlex:!0})}F2.displayName="PagesPanelView";var F7=n(65112),F8=n(956521),F9=n(706348);function Be(){let e=(0,F8.T)("quick_handoff"),t=(0,eN.t)("dev_handoff.paywall.ready_for_dev.title"),n=(0,eN.tx)("dev_handoff.paywall.ready_for_dev.description",{learnMoreLink:f.createElement(a7.oj,{className:F9.n$,onClick:e,recordingKey:"dev_mode_nodes_features_learn_more"},(0,eN.tx)("dev_handoff.paywall.learn_more"))});return f.createElement(F7.y,{imgSrc:"https://static.figma.com/uploads/a102b55802313a2c26048dd8b64355434ffecd45",panelWidth:240,title:t,content:n,dataTestId:"dev-mode-panel-upsell-nodes"})}function Bt(){return f.createElement(CW,null,f.createElement(CV,null),f.createElement(Cn.$,{width:240,disableResizing:!0},f.createElement(CK,null),f.createElement(CT,null),f.createElement("div",{className:nb()(nz.Dm,ko),"data-testid":"devHandoffLimitedLeftPanel"},f.createElement(F6,null),f.createElement(Be,null))))}var Bn=n(457749);function Ba(){return f.createElement("div",{className:"dev_handoff_comments_panel--devHandoffCommentsPanel--1Lqo9"},f.createElement(ay.j9.Consumer,null,()=>f.createElement(Bn.B,{stackHeader:!1,hideResolve:!1})))}var Bl=n(877822),Br=n(86538);function Bi(){let{setCurrentView:e,currentPluginView:t}=function(){let e=(0,e2.Xr)(Br.hO),[t,n]=(0,S.fp)(Br.HT),a=(0,Bl.AY)(Br.HT),l=f.useCallback(()=>{e(t)},[t,e]),r=f.useCallback(({newView:e})=>{e&&t!==e&&(l(),n(e))},[t,n,l]);return f.useEffect(()=>{l()},[l]),f.useEffect(()=>()=>{a()},[a]),f.useMemo(()=>({currentPluginView:t,setCurrentView:r}),[t,r])}(),n=(0,_.wA)(),a=f.useMemo(()=>({activeTab:il.s.PLUGIN,viewResource:e=>{n(r7.IN({fdPreviewResource:e}))},closeResource:()=>{n(r7.IN({fdPreviewResource:void 0}))},setCurrentViewOrTab:e,currentView:t,closeModal:()=>{},pinModal:()=>{}}),[n,e,t]);return f.createElement(fy.Y,{direction:"vertical",spacing:0,height:"fill-parent"},f.createElement(ia.B0.Provider,{value:a},f.createElement(ir.z,null)))}var Bo=n(233890);let Bs=(0,lf.jz)(bW.devHandoffRightPanelWidth);function Bc(){let e=(0,F8.T)("advanced_inspection"),t=(0,eN.t)("dev_handoff.paywall.inspection.title"),n=(0,eN.tx)("dev_handoff.paywall.inspection.description",{learnMoreLink:f.createElement(a7.oj,{className:F9.n$,onClick:e,recordingKey:"dev_mode_inspect_panel_learn_more"},(0,eN.tx)("dev_handoff.paywall.learn_more"))});return f.createElement(F7.y,{imgSrc:"https://static.figma.com/uploads/5d71630923f3b7231a12bd959018c1cc569985cc",panelWidth:Bs,title:t,content:n,dataTestId:"dev-mode-panel-upsell-inspect"})}function Bd(){let e=(0,wj.VI)(),t=(0,N.R)(e=>e.mirror.appModel.activeCanvasEditModeType),n=(0,F8.T)("track_changes"),a=null==e?void 0:e.isSymbol,l=e?kG(e):(0,eN.tx)("dev_handoff.paywall.no_selection");return f.createElement(wu.VZ,{recordingKey:"layerName",formattedHeader:f.createElement("div",{className:kh},f.createElement("div",{dir:"auto",className:kv},l),f.createElement("div",{className:kg}))},f.createElement("div",{className:kf},f.createElement("div",{className:"header--paywallRow--gOYPz header--layerRowContainer--qqv5Y"},f.createElement("div",{className:k_},e&&f.createElement(xU.Bf,{className:a?kb:ky,guid:e.id,editModeType:t}),f.createElement("span",{className:a?kw:kC},(null==e?void 0:e.type)??"\u2014")),f.createElement(a1.u4,{defaultClass:nb()(kT,kx),onClick:n,recordingKey:"dev-mode-compare-changes-upsell",dataTestId:"dev-mode-panel-upsell-compare-changes"},f.createElement("span",{className:kN},(0,eN.tx)("inspect_panel.history.compare_changes"))))))}let Bu="inspect_panel--inspectPanelContainer--SZhfY";function Bm(){return f.createElement("div",{className:Bu},f.createElement(Bd,null),f.createElement(Bc,null))}let Bp="dev_handoff_right_panel_container--panelContainer--XcbIk dev_handoff_right_panel_container--panelContainerBase--npHfL",Bf="dev_handoff_right_panel_container--panelContainerResizing--sfFQd dev_handoff_right_panel_container--panelContainerResizingBase--OZRr- dev_handoff_right_panel_container--panelContainer--XcbIk dev_handoff_right_panel_container--panelContainerBase--npHfL",B_="dev_handoff_right_panel_container--panelContainerHidden--7-A2P dev_handoff_right_panel_container--panelContainer--XcbIk dev_handoff_right_panel_container--panelContainerBase--npHfL",Bg="dev_handoff_right_panel_container--content--HcUHi";var Bh=n(641160);function BE(){let e=(0,_.d4)(e=>e.mirror.appModel.showUi),t=(0,_.d4)(e=>e.mirror.appModel.currentTool===lc.ec.tool),n=(0,S.md)(b8.H),a=n===b8._.PRIMARY&&!t,l=n===b8._.PLUGIN,r=e?Bp:B_;return f.createElement(Bo.vL,{name:"rightPanels",focusOnMount:!0,handleKeyDown:nf.lQ,className:nb()(Bh.Lp,"limited_right_panel--limitedRightPanelDrilldownContainer--A3Qv4")},f.createElement("div",{"data-testid":"devHandoffLimitedInspectPanel",className:Bh.ux},f.createElement("div",{className:`${r} ${Bh.KE} ${nz.Dm}`,style:{width:320}},f.createElement(Td,null),f.createElement(IJ.V,{className:Bg},t&&f.createElement(Ba,null),a&&f.createElement(Bm,null),l&&f.createElement(Bi,null)))))}let Bv="dev_mode_seen_end_of_beta_modal",By=(0,ai.Fu)(Bv);function Bb(){let e=(0,S.md)(au),t=(0,S.md)(am),n=(0,a9.ol)(),a=(0,af.tS)()??"",l=(0,eW.Rs)(eJ.HdA,{key:a}),r=(0,S.md)(By),i=(0,aM.q)(),o=(0,aM.n)(),s=(0,n3.CS)(),c=(0,_.wA)(),{show:d,isShowing:u,complete:m}=(0,n7.e)({overlay:an.aIY,priority:n8.N.HIGH_PRIORITY_MODAL},[r,e,t,l]);(0,np.h)(()=>{d({canShow:(e,t,n,a)=>{var l;return!e&&!!t&&!n&&!!(null==(l=null==a?void 0:a.file)?void 0:l.hasPermission)}})});let p=f.useCallback(()=>{m(),c(j.b({[Bv]:!0}))},[c,m]),g=i?o?(0,eN.tx)("dev_handoff.paywall.end_of_beta_modal.description.starter_viewer"):(0,eN.tx)("dev_handoff.paywall.end_of_beta_modal.description.starter"):(0,y.kc)().dev_mode_restricted_grace_period_string?(0,eN.tx)("dev_handoff.paywall.end_of_beta_modal.description.restricted_grace_period",{numDays:s()}):(0,eN.tx)("dev_handoff.paywall.end_of_beta_modal.description.restricted"),h=i?(0,eN.tx)("dev_handoff.paywall.end_of_beta_modal.cta.starter"):(0,eN.tx)("dev_handoff.paywall.get_dev_mode"),E=(0,CY.B)({dismissModal:p,labelOverride:h}),v=f.useCallback(()=>{E.hidden||E.onClick(CX.i$.BetaOver)},[E]);if(!u)return null;let b={teamId:null==n?void 0:n.id},C=E.hidden?{type:"button",label:(0,eN.tx)("general.got_it"),onClick:p,ctaTrackingDescriptor:ar.c.GOT_IT,trackingProperties:b,dataTestId:"dev-mode-end-of-beta-modal-cta"}:{type:"button",label:E.label,onClick:v,disabled:E.disabled,ctaTrackingDescriptor:ar.c.CONTINUE,trackingProperties:b,dataTestId:"dev-mode-end-of-beta-modal-cta"};return f.createElement(_z._l,{isShowing:u,userFlagOnShow:Bv,title:f.createElement("span",{style:{fontSize:20}},(0,eN.tx)("dev_handoff.paywall.end_of_beta_modal.title")),description:g,media:f.createElement("img",{width:332,src:"https://static.figma.com/uploads/bcbebab786a453cd65a6b0e36b7546d5cc91e32f",alt:"An illustration explaining the end of the beta"}),closeButtonColor:"light",primaryCta:C,secondaryCta:{type:"link",label:(0,eN.tx)("dev_handoff.paywall.learn_more"),href:"https://help.figma.com/hc/en-us/articles/20652568757399",ctaTrackingDescriptor:ar.c.LEARN_MORE,trackingProperties:b},trackingContextName:"Dev Mode Beta Ended Modal",trackingProperties:{teamId:null==n?void 0:n.id},onClose:p})}let BC="vscode_paywall--vscodePaywallBody--SlfC- text--fontPos13--xW8hS text--_fontBase--QdLsd",Bw="vscode_paywall--upgradeButton--otPw3";var BT=n(85205);function Bx({fileKey:e,teamId:t,folderId:n,parentOrgId:a,canAccessDevModeEntryPoint:l}){let r=(0,CY.w)(),i=[(0,eN.t)("dev_handoff.paywall.vscode.list1"),(0,eN.t)("dev_handoff.paywall.vscode.list2"),(0,eN.t)("dev_handoff.paywall.vscode.list3"),(0,eN.t)("dev_handoff.paywall.vscode.list4")],o=f.useCallback(()=>{(0,Z.sx)("Dev Mode Paywall clicked",{entryPoint:"vscode_paywall",type:"VS Code Upgrade CTAAAA",fileKey:e,fileTeamId:t,fileParentOrgId:a,containingFolderId:n},{forwardToDatadog:!0}),(0,TC.Qn)(`/file/${e}?mode=dev&dev-mode-features-modal=plugins_extensions`)},[e,n,a,t]),s=f.useCallback(()=>{(0,Z.sx)("Dev Mode Paywall clicked",{entryPoint:"vscode_paywall",type:"VS Code Open docs",fileKey:e,fileTeamId:t,fileParentOrgId:a,containingFolderId:n},{forwardToDatadog:!0}),(0,TC.Qn)("https://help.figma.com/hc/en-us/articles/15023121296151-Figma-for-VS-Code")},[e,n,a,t]),c=f.useCallback(()=>{(0,Z.sx)("Dev Mode Paywall clicked",{entryPoint:"vscode_paywall",type:"VS Code Play Video",fileKey:e,fileTeamId:t,fileParentOrgId:a,containingFolderId:n},{forwardToDatadog:!0})},[e,n,a,t]),d=f.useCallback(()=>{(0,Z.sx)("Dev Mode Paywall clicked",{entryPoint:"vscode_paywall",type:"VS Code Finish Video",fileKey:e,fileTeamId:t,fileParentOrgId:a,containingFolderId:n},{forwardToDatadog:!0})},[e,n,a,t]);return f.createElement("div",{className:"vscode_paywall--wrapper--hZt-E"},f.createElement("div",{className:a8.cx.flex.maxWFull.wFull.hFull.$},f.createElement("div",{className:a8.cx.flex.flexGrow0.flexColumn.pl32.pt32.$},f.createElement(a2.B,{dataTestId:"logo",title:"logo",ariaLabel:"logo",svg:BT.A,useOriginalSrcFills_DEPRECATED:!0})),f.createElement("div",{className:a8.cx.flex.flexGrow1.flexColumn.justifyCenter.alignTop.pt32.pl20.pr32.pb32.$},f.createElement("div",{className:"vscode_paywall--vscodePaywallTitle--EHf7Y text--fontPos24--YppUD text--_fontBase--QdLsd"},(0,eN.tx)("dev_handoff.paywall.vscode.title")),f.createElement(a1.Kz,{direction:"y",multiple:1}),f.createElement("div",{className:BC},(0,eN.tx)("dev_handoff.paywall.vscode.description")),f.createElement(a1.Kz,{direction:"y",multiple:3}),f.createElement("ul",{className:"vscode_paywall--vscodePaywallList--cOYFz"},i.map((e,t)=>f.createElement("li",{key:t,className:"vscode_paywall--vscodePaywallListItem--GaTSA text--fontPos11--2LvXf text--_fontBase--QdLsd"},e))),f.createElement(a1.Kz,{direction:"y",multiple:3}),f.createElement("div",{className:BC},l?(0,eN.tx)("dev_handoff.paywall.vscode.need_access",{devMode:f.createElement("strong",null,(0,eN.tx)("dev_handoff.paywall.vscode.need_access_dev_mode"))}):(0,eN.tx)("dev_handoff.paywall.vscode.no_access")),f.createElement(a1.Kz,{direction:"y",multiple:3}),f.createElement("div",{className:"vscode_paywall--vscodePaywallButtons--7F6yh"},l&&r?f.createElement(so.$$,{className:Bw,disabled:!0},(0,eN.tx)("dev_handoff.paywall.request_pending")):f.createElement(so.$$,{className:Bw,onClick:o,disabled:!l},(0,eN.tx)("dev_handoff.paywall.get_dev_mode")),f.createElement(a1.nR,{className:"vscode_paywall--docsButton--vEf-q",onClick:s},(0,eN.tx)("dev_handoff.paywall.vscode.view_button"))),f.createElement(a1.Kz,{direction:"y",multiple:5}),f.createElement("div",{className:"vscode_paywall--vscodeVideoDescription--G16yH text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,eN.tx)("dev_handoff.paywall.vscode.video")),f.createElement(a1.Kz,{direction:"y",multiple:1}),f.createElement("div",{className:"vscode_paywall--vscodeVideoContainer--RVGWt"},f.createElement("video",{controls:!0,className:"vscode_paywall--vscodeVideo--Te60B",src:"https://static.figma.com/uploads/vscode_intro_1200.mp4",onPlay:c,onEnded:d})))))}function BN(){let e=(0,af.q5)(),t=(0,U.U4)();return f.createElement(si.M,{isShowing:!0},f.createElement(Bx,{fileKey:(null==e?void 0:e.key)||"",teamId:(null==e?void 0:e.teamId)||"",parentOrgId:(null==e?void 0:e.parentOrgId)||"",folderId:(null==e?void 0:e.folderId)||"",canAccessDevModeEntryPoint:t}))}function BS(){let e=(0,_.wA)(),t=(0,xB._6)(),n=(0,_.d4)(e=>e.mirror.appModel.currentPage),a=f.useMemo(()=>sL.z4.getIsExtension(),[]),l=(0,_.d4)(e=>e.selectedView.devModeUpsellModalTab),r=(0,F8.T)(l),i=(0,a9.ol)(),o=(0,Ce.O)(),s=(0,al.m3)(),c=(0,al.bZ)();f.useEffect(()=>{if(l){r();let n={...t,devModeUpsellModalTab:void 0};e(nI.$T(n))}},[l,e,r,t]),f.useEffect(()=>{(0,tM.UK)().sidebarSplitPosition.set(240),(0,tM.UK)().devHandoffInspectSplitPosition.set(320)},[]),b9({doReport:!1});let[d,u]=(0,S.fp)(Ct.qI);return(f.useEffect(()=>()=>{s&&u(Ct.cI.DEFAULT)},[s,u]),a)?f.createElement(BN,null):s?f.createElement(Y.fu,{name:"Dev Mode Paywall",properties:c,enabled:(null==c?void 0:c.gracePeriod)!==void 0},f.createElement(C2,null),f.createElement(CJ,null),f.createElement(IK,null)):f.createElement(Y.fu,{name:"Dev Mode Paywall",properties:{teamId:null==i?void 0:i.id,currentPlan:o}},f.createElement(Bb,null),f.createElement(Bt,{key:n}),f.createElement(BE,null))}var Bk=n(262151),BI=n(18993),BA=n(369351);let BO="dev_handoff_seen_annotation_introduction_overlay",BL="dev_handoff_seen_annotation_tools_overlay",BP="dev_handoff_seen_annotation_upsell_overlay",BD=(0,ai.r1)(BL),BR=(0,ai.r1)(BO);function BM(){let e=(0,_.wA)(),t=(0,n6.GS)(),n=(0,S.md)(ab.wg),a=(0,eb.aV)(),l=(0,S.md)(BR),r=(0,S.md)(BD),{uniqueId:i,show:o,complete:s,isShowing:c}=(0,n7.e)({overlay:an.kc4,priority:n8.N.SECONDARY_MODAL+1},[l,r]),d=f.useCallback(()=>{!a&&n&&o({canShow:(e,t)=>e&&!t})},[a,o,n]);function u(){e(j.b({[BL]:!0})),s()}f.useEffect(()=>{t||d()},[d,t]),(0,sD.E)(i,l5("dev"),()=>{d()}),f.useEffect(()=>{"loaded"===r.status&&r.data&&s()},[r,s]);let m=(0,sJ.A)({numSteps:2,onComplete:u});return(0,sD.E)(i,"action_set_tool_annotate",()=>{c&&0===m.currentStep&&m.next()}),f.createElement(sq.U,{currentStep:m.currentStep,isShowing:c},f.createElement(n9.rq,{emphasized:!0,isShowing:c,trackingContextName:`${BL}_measurements`,onClose:u,targetKey:"tool-measurements-onboarding",title:(0,eN.tx)("dev_handoff.annotations_tools_overlay.measurements.title"),description:(0,eN.tx)("dev_handoff.annotations_tools_overlay.measurements.description"),primaryCta:{label:(0,eN.tx)("rcs.rcs_shared.next"),type:"button",onClick:m.next,ctaTrackingDescriptor:ar.c.NEXT},stepCounter:{stepNum:1,totalNumSteps:2}}),f.createElement(n9.rq,{emphasized:!0,isShowing:c,trackingContextName:`${BL}_annotations`,onClose:u,targetKey:"tool-annotations-onboarding",title:(0,eN.tx)("dev_handoff.annotations_tools_overlay.annotations.title"),description:(0,eN.tx)("dev_handoff.annotations_tools_overlay.annotations.description"),primaryCta:{label:(0,eN.tx)("rcs.rcs_shared.done"),type:"button",onClick:m.next,ctaTrackingDescriptor:ar.c.DONE},stepCounter:{stepNum:2,totalNumSteps:2}}))}var BF=n(656839);function BB(e,t,n){if(!e)return new Set;let a=new Set;for(let l of e.childrenNodes){if("SYMBOL"===l.type||l.isStateGroup||"INSTANCE"===l.type){let{backingFileKey:e,backingNodeId:r}=(0,Nv.HX)(l.guid,t,n);e&&r&&a.add(`${e},${r}`)}l.childrenNodes.length>0&&BB(l,t,n).forEach(e=>a.add(e))}return a}var BU=n(773058),BH=n(400466),BG=n(896474),BV=n(718039),BK=n(625134),BW=n(909999),Bz=n(730378),Bj=n(973149),BJ=n(205135),BY=n(76154);let BX="configuration_wizard--step--9zx-B",Bq="configuration_wizard--buttonRow--2GlLI",BZ="configuration_wizard--spacer--LCRlq",BQ="configuration_wizard--preferenceOptionsGroup--T5b2t",B$="configuration_wizard--unitOption--R7eMs configuration_wizard--preferenceOption--OkUN2",B0="configuration_wizard--selectedPreference--K6Psv",B1="configuration_wizard--integrationsCard--aup-J configuration_wizard--preferenceOptionCard--C3ZkW configuration_wizard--preferenceOption--OkUN2",B2="configuration_wizard--unitText--PiILT",B5="configuration_wizard--preferenceSubheader--orNpN text--fontPos11--2LvXf text--_fontBase--QdLsd",B4="configuration_wizard--preferenceTitle--lA1Na text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI",B3="configuration_wizard--unitRadioOption--YokOy",B6="configuration_wizard--selectedRadioOption--i6PrC",B7="configuration_wizard--stepHeading--b5Yv4 text--fontPos18Whyte--M40th text--_fontBaseWhyte--efAjI",B8="configuration_wizard--stepDescription--uSn6A text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",B9="configuration_wizard--option--I5GPA",Ue="configuration_wizard--optionHeading--9e-1V text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",Ut="configuration_wizard--pluginListDivider--LeuxA",Un="configuration_wizard--pluginList---hNhu",Ua="configuration_wizard--dividerListContainer--r4GxV",Ul="configuration_wizard--installButton--PPj7O",Ur="configuration_wizard--pluginCta--WgsY- resource_tiles--cta--JU9XJ text--fontPos12--YsUAh text--_fontBase--QdLsd",Ui="configuration_wizard--pluginTick--YbuJa",Uo="configuration_wizard--spinnerContainer--2xXeT";var Us=n(377869),Uc=n(990427),Ud=n(387121),Uu=n(538180),Um=n(225788);let Up="OTHER";function Uf(){let e=(0,wR.v4)(),{codegenPlugins:t=[],loading:n}=(0,BV.n)(),a=(0,TE.gB)(),[l,r]=f.useState("first-party"===e.type?e.id:Up),[i,o]=f.useState(!1),s=!n&&(null==t?void 0:t.length)>0,[c,d]=f.useState(s?UC(t[0]):void 0);return f.useEffect(()=>{if(!c&&!n&&(null==t?void 0:t.length)>0){let e=UC(t[0]);d(e),a(e)}},[t,n,c,a]),f.createElement("div",{className:BX},f.createElement("h1",{className:B7},(0,eN.tx)("dev_handoff.configuration_wizard.code_language_step.title")),f.createElement("h2",{className:B8},(0,eN.tx)("dev_handoff.configuration_wizard.code_language_step.description")),f.createElement(U_,{selectedOption:l,onSelect:e=>{r(e),e===wR.p?(0,tM.UK)().colorFormat.set(ei.NVY.UIColor):(0,tM.UK)().colorFormat.set(ei.NVY.HEX),e===wR.p?a({type:"first-party",id:i?wR.Ap:wR.p}):e===wR.LK?a({type:"first-party",id:i?wR.NU:wR.LK}):e!==Up?a({type:"first-party",id:e}):c&&a(c)}}),l===wR.p||l===wR.LK?f.createElement(Ug,{selectedLanguage:l,shouldUseLegacyMobileCodegen:i,onFrameworkSelect:e=>{o(e),l===wR.p&&a({type:"first-party",id:e?wR.Ap:wR.p}),l===wR.LK&&a({type:"first-party",id:e?wR.NU:wR.LK})}}):null,l!==Up?f.createElement(UE,null):f.createElement(Ub,{onSelect:d,loading:n,codegenPlugins:t}))}function U_({onSelect:e,selectedOption:t}){let n=(0,y.sL)()?[{key:wR.uz,title:(0,eN.t)("dev_handoff.code.lang_css"),subheader:null,svgSrc:Um.A},{key:wR.p,title:(0,eN.t)("dev_handoff.configuration_wizard.code_language_step.option_ios"),subheader:null,svgSrc:Ud.A},{key:wR.LK,title:(0,eN.t)("dev_handoff.configuration_wizard.code_language_step.option_android"),subheader:null,svgSrc:Uc.A}]:[{key:wR.uz,title:(0,eN.t)("dev_handoff.code.lang_css"),subheader:null,svgSrc:Um.A},{key:wR.p,title:(0,eN.t)("dev_handoff.configuration_wizard.code_language_step.option_ios"),subheader:null,svgSrc:Ud.A},{key:wR.LK,title:(0,eN.t)("dev_handoff.configuration_wizard.code_language_step.option_android"),subheader:null,svgSrc:Uc.A},{key:Up,title:(0,eN.t)("dev_handoff.configuration_wizard.code_language_step.option_other"),subheader:null,svgSrc:Uu.A}];return f.createElement("div",{className:B9},f.createElement("div",{className:Ue},(0,eN.tx)("dev_handoff.configuration_wizard.code_language_step.what_platform")),f.createElement(BU.z,{value:String(t),onChange:nf.lQ,className:BQ},n.map(({key:n,title:a,subheader:l,svgSrc:r})=>{let i=n===t,o=()=>e(n);return f.createElement("div",{tabIndex:0,role:"radio","aria-checked":i,key:n,onPointerDown:o,onKeyDown:e=>{"Enter"===e.key&&o()},className:nb()("configuration_wizard--preferenceOptionCard--C3ZkW configuration_wizard--preferenceOption--OkUN2",i&&B0)},f.createElement(a2.B,{svg:r,className:"configuration_wizard--platformIcon--F7N2s"}),f.createElement(BU.Z,{value:String(n),_isChecked:i,_onChange:o,className:nb()("configuration_wizard--radioOption--Yfm0j",i&&B6),tabIndex:-1}),f.createElement("div",{className:"configuration_wizard--preferenceText--ZqN2L"},f.createElement("div",{className:B4},a),l&&f.createElement("div",{className:B5},l)))})))}function Ug({selectedLanguage:e,shouldUseLegacyMobileCodegen:t,onFrameworkSelect:n}){let a=f.useMemo(()=>e===wR.p?[{key:!1,title:(0,eN.t)("dev_handoff.code.lang_swiftui"),onSelect:()=>n(!1)},{key:!0,title:(0,eN.t)("dev_handoff.code.lang_uikit"),onSelect:()=>n(!0)}]:[{key:!1,title:(0,eN.t)("dev_handoff.code.lang_compose"),onSelect:()=>n(!1)},{key:!0,title:(0,eN.t)("dev_handoff.code.lang_android_xml"),onSelect:()=>n(!0)}],[e,n]);return f.createElement("div",{className:B9},f.createElement("div",{className:Ue},(0,eN.tx)("dev_handoff.configuration_wizard.code_language_step.what_framework")),f.createElement(BU.z,{value:String(t),onChange:nf.lQ,className:BQ},a.map(({key:e,title:n,onSelect:a})=>{let l=e===t;return f.createElement("div",{tabIndex:0,role:"radio","aria-checked":l,key:String(e),onPointerDown:a,onKeyDown:e=>{"Enter"===e.key&&a()},className:nb()(B$,l&&B0)},f.createElement("div",{className:B2},f.createElement("div",{className:B4},n),f.createElement(BU.Z,{value:String(e),_isChecked:l,_onChange:a,className:nb()(B3,l&&B6),tabIndex:-1})))})))}let Uh=new Bj.KD({min:.1});function UE(){let e=(0,wR.v4)(),t=(0,wz.Em)(),n=(0,wz.RH)(),a=(0,wz.wQ)(),l=(0,wz.Bs)(),r=f.useCallback(t=>l(e,null,{unit:t}),[e,l]),i=(0,wz.gc)(e.id),o=f.useCallback(t=>{t&&l(e,null,{scaleFactor:t})},[e,l]),s=(null==i?void 0:i.scaleFactor)??1,c="first-party"===e.type&&(e.id===wR.LK||e.id===wR.NU||e.id===wR.p||e.id===wR.Ap),d=f.useMemo(()=>new BK.Be(a),[a]),u=f.useMemo(()=>wV.zq.map(e=>({key:e,title:d.format(e),onSelect:()=>r(e)})),[d,r]);return t?f.createElement("div",{className:B9},f.createElement("div",{className:Ue},(0,eN.tx)("dev_handoff.configuration_wizard.code_language_step.what_units")),f.createElement(BU.z,{value:String(n),onChange:e=>r(e),className:BQ},u.map(({key:e,title:t,onSelect:a})=>{let l=n===e;return f.createElement("div",{tabIndex:0,role:"radio","aria-checked":l,key:e,onPointerDown:a,onKeyDown:e=>{"Enter"===e.key&&a()},className:nb()(B$,l&&B0)},f.createElement("div",{className:B2},f.createElement("div",{className:B4},t),f.createElement(BU.Z,{value:String(e),_isChecked:l,_onChange:a,className:nb()(B3,l&&B6),tabIndex:-1})))})),n===Bz.tK.SCALED&&f.createElement(f.Fragment,null,f.createElement("div",{className:"configuration_wizard--optionHeadingWithPadding--MnGm9 configuration_wizard--optionHeading--9e-1V text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI"},(0,eN.tx)("dev_handoff.alternative_units.inspection_scale_factor")),c?f.createElement(BW.Rg,{scaleFactor:s,onChange:o,onDropdownHidden:nf.lQ,className:"configuration_wizard--scaleFactorDropdown--IVy1Q",inputClassName:"configuration_wizard--scaleFactorDropdownInput--h8Jr2 text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"}):f.createElement(BJ.Q7,{className:"configuration_wizard--scaleFactorInput--ezaTA text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI",property:s,formatter:Uh,onChange:o,autoFocus:!0,allowEmpty:!1,noBorderOnFocus:!0}),f.createElement("div",{className:B5},f.createElement(BW.LO,{codeLanguage:e})))):null}function Uv(){return f.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{id:"Frame 1321317093"},f.createElement("rect",{width:"24",height:"24",rx:"4.5",fill:"#2C2C2C"}),f.createElement("rect",{x:"4",y:"4",width:"10.5",height:"1.5",fill:"#D9D9D9"}),f.createElement("rect",{x:"7",y:"8",width:"12",height:"1.5",fill:"#E4A3D9"}),f.createElement("rect",{x:"9",y:"13",width:"12",height:"1.5",fill:"#97C1EF"}),f.createElement("rect",{x:"4",y:"17.5",width:"10.5",height:"1.5",fill:"#D9D9D9"})))}function Uy(){return f.createElement("div",{className:"configuration_wizard--customCodegenPromo--Sg78f"},f.createElement("div",{className:"configuration_wizard--customCodegenPromoIcon--ND7NT"},f.createElement(Uv,null)),f.createElement("div",{className:"configuration_wizard--customCodegenPromoWrapper--steEn"},f.createElement("div",{className:"configuration_wizard--customCodegenPromoTitle--31anH text--fontPos12--YsUAh text--_fontBase--QdLsd"},(0,eN.tx)("dev_handoff.configuration_wizard.code_language_step.custom_codegen_promo_title")),f.createElement("div",{className:"configuration_wizard--customCodegenPromoBody--EsEFB text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,eN.tx)("dev_handoff.configuration_wizard.code_language_step.custom_codegen_promo_body"))),f.createElement("a",{className:"configuration_wizard--customCodegenPromoLink--0l-Sa text--fontPos11--2LvXf text--_fontBase--QdLsd",href:"https://www.figma.com/plugin-docs/api/figma-codegen/",target:"_blank"},(0,eN.tx)("dev_handoff.configuration_wizard.code_language_step.custom_codegen_promo_link"),f.createElement(BG.In,{icon:"new-window-16",fill:"brand"})))}function Ub({onSelect:e,loading:t,codegenPlugins:n}){let a=t?f.createElement("div",{className:Uo},f.createElement(re.kt,null)):f.createElement(OI.dP,null,n.map((t,n)=>f.createElement(Uw,{key:`${t.id}_${n}`,plugin:t,onSelect:e})),f.createElement(Uy,null));return f.createElement("div",{className:"configuration_wizard--otherLanguagesContainer--2J1b5"},f.createElement("h1",{className:"configuration_wizard--otherLanguagesListHeading--M2BwY text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI"},(0,eN.tx)("dev_handoff.configuration_wizard.code_language_step.other_title")),f.createElement("h2",{className:"configuration_wizard--otherLanguagesListDescription--jeS2m text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI"},(0,eN.tx)("dev_handoff.configuration_wizard.code_language_step.other_description")),f.createElement("div",{className:Ua},f.createElement("div",{className:Ut}),f.createElement("div",{className:Un},a)))}function UC(e){return{type:"published-plugin",id:e.id,pluginLanguage:function(e){var t,n,a;let l=null==(t=null==e?void 0:e.versions)?void 0:t[(null==e?void 0:e.current_plugin_version_id)??""];return(null==(a=null==(n=(0,Tk.m)(l))?void 0:n[0])?void 0:a.value)??""}(e)}}function Uw({plugin:e,onSelect:t}){let n=(0,wR.v4)(),a=(0,TE.gB)(),l="first-party"!==n.type&&n.id===e.id,r=f.useMemo(()=>UC(e),[e]),i=f.useCallback(()=>{a(r),t(r)},[r,a,t]),o=l?f.createElement("div",{className:Ur},f.createElement(a2.B,{svg:Us.A,className:Ui}),(0,eN.tx)("community.plugins.selected")):f.createElement("div",{className:Ur},(0,eN.tx)("community.plugins.select"));return f.createElement(BY.Cg,{plugin:e,ctaButton:o,onClick:l?void 0:i})}function UT(){let{inspectPlugins:e=[],loading:t}=(0,BV.n)(),n=t?f.createElement("div",{className:Uo},f.createElement(re.kt,null)):f.createElement(OI.dP,null,e.map((e,t)=>f.createElement(Ux,{key:`${e.id}_${t}`,plugin:e})));return f.createElement("div",{className:BX},f.createElement("h1",{className:B7},(0,eN.tx)("dev_handoff.configuration_wizard.inspect_plugins_step.title")),f.createElement("h2",{className:B8},(0,eN.tx)("dev_handoff.configuration_wizard.inspect_plugins_step.description")),f.createElement("div",{className:Ua},f.createElement("div",{className:Ut}),f.createElement("div",{className:Un},n)))}function Ux({plugin:e}){let{pinnedPlugins:t,pinPlugin:n,unpinPlugin:a}=(0,BH.VR)(),l=e.id,r=f.useMemo(()=>!!t.find(e=>e.plugin_id===l),[t,l]),[i,o]=f.useState(r);f.useEffect(()=>{o(r)},[r]);let s=(0,q.A)(()=>{o(!0),n(l)},200),c=(0,q.A)(()=>{o(!1),a(l)},200),d=i?f.createElement("div",{className:Ur},f.createElement(a2.B,{svg:Us.A,className:Ui}),(0,eN.tx)("community.plugins.pinned")):f.createElement("div",{className:Ur},(0,eN.tx)("community.plugins.pin"));return f.createElement(BY.Cg,{plugin:e,ctaButton:d,onClick:i?c:s})}var UN=n(292164);function US(){let e=(0,_.wA)(),t=(0,a6.am)();return f.createElement("div",{className:BX},f.createElement("h1",{className:B7},(0,eN.tx)("dev_handoff.configuration_wizard.install_extensions_step.title")),f.createElement("h2",{className:B8},(0,eN.tx)("dev_handoff.configuration_wizard.install_extensions_step.description")),f.createElement("div",{className:BQ},f.createElement("div",{className:B1},f.createElement("img",{srcSet:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXEAAADQCAYAAADxsFFbAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAF/SSURBVHgB7Z0HnJTV1f8PsBVYYGFpC0vvHelNiqKIghW7MTExr8a8ib7RN+8bY9T05E3RxH+ixhg1GisqBgsCighSlCZVQHrvfWFh4X+/dz3Ls8PsMjO7y+7snp+fkdmZZ57nlnN/59xz7z2nioSgRYsWw06ePHmFe3s5f0oRSEhIkMTERDlx4oR/nTp1qsD3SUlJkpycLFWqVJHjx4/L0aNHz7jmXIByUhaenZ2dLQaDwRBnWMiratWqD69zCH5RRd848q7jyPtB9/bus92tWrVq0rRpU7ngggukS5cuMmnSJJkyZYrk5ubmX9OsWTO55ZZb/HWQ+JdffilPPPGEHDhwQM41jMQNBkMFwiOORx/e58AfCfwPAncEPM2RbfdI7jBmzBi56KKLPJlXr15d6tat64la0apVK7nrrrs8eX788cdy5MgRycjI8H8bDAaDoVi4u1atWsPcv8Mhcs+qWOCREjjAmn3//fdl9+7dct11153x/ZAhQ6RevXry61//WlauXMn9xWAwGAwlhh6OyB90HH5PgrPCWziSPasLJYjJkyf7f3GZhCNoXCyHDx+WGjVqyDXXXOMt8blz58rOnTvLxCduMBgMFRB3O/qekOBI+CGJEkVZ1rhVUlJS/ILmHXfc4QncaQzp16+fPProo7Jr1y4xGAwGQ/HBJpSq7t+I3SiRwK2e5hP5M888Iw888IA89dRT3mofNGiQ/95gMBgMJYLL8Yn3kBIEO1TYbnjs2DGZPXu2/3vFihV+V0pWVpZf3MzJyRGDwWAwFBstSsUsZucLvm/djYJljgXOZ8FdLAaDwWAoHmIicfzdbCPERcL+a3aitGnTRtLT0/33s2bN8oeAhg0b5om8b9++3i++fv16f+jHYDAYDCWDKo6Io94uglvk3nvvlZo1a/q94ix08nrzzTdl4sSJ/nN2pQwePDjvIc76XrBggfzzn/+U/fv3y7mGHfYxGAwVFTGROJY41ncocKOwGwWwsJmZmSlNmjSRbdu2yaZNm8qMQI3EDQZDRUVMJB5vMBI3GAwVFZXiHDyuHnbE2EEjg8FQ0VBpSNyO/hsMlQvsiGPNrqLDIlIZDIYKCTZUsEuuosNI3GAwVFhUhhm4kbjBYKiQ4LR4MMdBRYUFMjEYDIY4hpG4wRBnSE6qKul1Kr6v1xAZKj2Js/hRL72mpCQXHBSp7u+GGbWkoiIxoZrc+bUR0qdnS6msSKuRIlmZ9SSe0LJZdXnuD73l8gszxWAAMfnEIT6O1jdv3lwaNWrk82cSF4VFBL4bOnSoP7EZitWrV8uaNWvK1WJDclKC3Psfo+SDmctl8sdL8z8f0KeNfPP68+Wm7z4h5RVd2jeRvfuPyOZteyVaVEuoKr27t5BNW/dIPCExsZr07NxMVq3d7uteHFx3eT9/r3seelFyjp+Q8g4s8F/f11UmTd8uz7y2XgwGEJMl3q5dO59js1evXp7IybGp4EANQa6CLwhdg2XZgZuSw/VX9JMh/dpJZULN6sly752XOIu0vhQXE96bL3986v24IHBQv16yNG9aQz5dFF+K11C6iMkST01N9Rl6li1bJj16nBmOfM6cOfnv2XA/cOBAn1B58+bNcU3iLbIyZJCz0NNqVpet2/fJBzOWycHDR/13PZxFVystVRrWryV10qrLtNlfOEs5UzLqpsmkaYtlw+a8gcdMpV2rhjKwdxun1BJk+aqtMmveaqfsIl9FHzG4o6TXqi51ateQju0y5erRvfzny9y9lq/akn9dm5YNZHDvdlKzRrJs23VAZsxdKdt2FAxABileMqKbI4cM2b3noLzzwedy+MgxiQYJ1apK/16tpWObTKF3F6/YKPM/XyfHT5yecaW7sg7q01aaNakrBw5my7RZK9ws4PQMYnDfdrL/wGHJzT0l/Xq2lqTkBJk7/0tZtHyjm7md8u6ui4Z1lVo1k6Waex73aun6A3wwc4Wzyg/791WrVpEB57mytGvir1u7Yad8NOsLOZaTFz2zemqSXDiks3Mn5dkvh7OPyWpn1QfRvnUjyWyU7j/v7+5FH65et12muv6mLMG2oxwtmmXIEddm709fJtt3FmzfEYM6+vru2nvIy05tJxsLl26QTz5bLdEiKbGKa2sp0K4GQ0yW+OLFi30WewJbhSNlkkLoi832TZs2la1bt/rEEPGK9q0ayU/uudxZQ7VklyO7oQPay73fucQTNxjgSOzWcYM8iXRybo77//NSN8hTpLN7f9OVA/Lvc/nFPeX+748Rmu3wkRy55eoBjoR7SzRITEhw7ZogSe7falWr+Pe8grHacZU8cPdYqeK+37htj/Tq2lx+7J5bwxFPEBcM7iytnFULgV50fme55/aLvMsiUlRzSvrWawfLN284X/ZCwidy3fuhcmWgTjWd7/nHd49xs4a2ss2RHG34k/+6Qjq1O+3XRTH9520j5doxfeTQkaNeSd3vftPZkbECZaEx6hOqVcuvt8hpGbx13GBfnj37Dvt+uunK/vKdW0f4fgEYFU0ap0sTR9IojqsuObPt27m+vvmqAX7NIDExLw7+N64fIpddeDoJVlJSNVensTLckfTO3QelccN0+dm9V7h/6xS4F/W60fX//d8bI21aNJK6dWp6X3wsoOxVXR/n5BiJG04jJks8mr2XuFtwo5Ddpzxb4VeMOk8GOktJUadWjfz3yc4KvOPW4TLz01Xy9xen+88mTl4oj/3yZhnpiG/825/5z7DcXp4w11uTQ5yF9s/xn8jWHfscUeRZyq2a15cxI3vI4899mG+JYTn/8K7Rzh+/zFvCDFKs0FBAjmqBYdmDLh2ayJIVm+WlCXPOuL6+sx5fm/iZ/NuVE0x1VuJffnWrUzZtZErA9//xnC/k2ddm+vdTXBn+9LObPHFiLfq6oxyqFUzkccLNGk7k5pWlY7vGMrR/O/n5oxNl5ZpteXVavVXu+voF8tb7C+To0eO+bcHDf5ggR7Lzsjp9++ZhcuMV/eXB370puV+tkezcfUj+7/H3/EyAWcpvfjTO9UlbZ9lvkqPHjsvr73zmLPrqMnpEV/lo9gqZv7igX5j1jVPuv9/+5V1vOYMv1+2Q+5z7JSM9TXbsPiCH3Mzpr89+4L+73vnEsZTDIcGZvH95dmr+bIHnDx3QwdUprz2vGtXLPS9R7v/Na/l1+vH3x3ol9OhTkwvcK71OdbnvZ694pRIrUEJ9uqXL7v05snGrBXEznEapHvYhbgFWODHE9+6NfvHtXGLdpl3y5fqd+X+3adFAGmSk+fcZznpqWL+2PPHPafnfM6g/nrPSuRAan5GtiCn3ya8U1slANqNWzRp4gmaa37tHC/9ZzdRkf32TBrU9idesmSLfu+3CMyzm8Y7APlu0TiLFux8ulrrpNZzbpq0jvlRvsSY4qzI1peAunD1fuSEAFuWW7fulY9vMfBK//ZZh0iTEukSZTZyyyL9v4dwwu/Ycls0B18iCJevlZ4+85WZieeTcu1sLWeDup2QH5i5Y42cvDZz7CddUXlkO5btycnJOyA7nAqrz1UwnEhxzv3nu1Zm+TBcM7uRdJ7QB7Z2YFF0MDdwjuEEUkDkuI0Uf5/LZueeAm3Wdnk0cO5bjZzX0XdAlhRIqDoFnpCfJA9/rKB1ap8mv/rrCKXNbVzKcRqmSODHH2b2C7/zo0aNSnrFwyYYCu1OYBnfvlOXf415gKr8vQHjgwIFsqdEm2X8XCeo4FwHuh5HOJ5ube3pKvHzllnzLNvtojidgnf4rVq/dIdGgT4+W8q0bz5dVa7Y7Ys5Ll5cbgS81xyknyE/x0Scr3MJ0QeLfsm1f/vs8wjqaX34AmapVDqo7RXXgQMGdJEdcPZOcYklJLlkRvPrS3jK4Tzu/1oBSSC6h2BknT530syQFLpHqqYly6fCCecbpp2pVz5y5FAc07Vy3mNmsSXVp3ayGWwPYKQaDolRJvEWLFt6PxxbEeAaEw8Jjk8Z1nU/3tF+/QUYtOXSoIIEVhQOHst19Tsifnp4i+w8WnBKri4rnzHOLgsUBe8BZ7Jz3+Xp56l/T/ZZOFBELemdDbWe17913WllhRRYFLM70OjW8j1gXD3nfuEEd2bhlr3/2Pucrz6iXVuB3WNgorOyjJZeuDz/3mIt6ym8fe1uWOcXILIjFTxRySePA4WxZu36HPPnC9DO+O3GiZI9673UulBfe3OgWx7Pl9/d38++PZFf84+SGyBDTwiZuEnJmpqWleZJmtwp/B/eGs6BJ3k0WNA8dOiRljeopSXKbW5y64uLzov2pczMckM+Xb5LLHUGwSIdFxrR56MAOMmv+moh9/YuWbfRrcFc6H3k152eGuGunpcg4Zz0mJUavT/e5mUBr5/bBZw9J64IkVnxKcpL3ESfiSnCf9+ne0lvNoa6fbm62wefs1ji/f3tp4BYdlwV2uJwNnzmFk+ZcQPjakQXKMubCnvLwD67wdQTvTP3czwz0YA1tiJ+cNYSdu6JzM7AYTP0ynYvHPw830VczIT7HCk5zbcqzKdfoEd3PuAczA1/nr9qc99oGkeL9aUvc4nFL57qp50n7lFNWPTpnSc8uWaW29rN5+xFXR5FmmZG7mAwVHzFZ4pD3hRde6MmbV9u2bf0+8KVLl8qiRXm+0oYNG0qNGjX83+UhOTIDmkWsnc43+eak+VH9ljH5nFv8u++OUfKr/73GL45lZdb1Wwynz1oR8X3YfvaHJyc5N8dQ+b/7r5ODR7KlYUZtb+3GYr3Nnrdavn3TMPm1KxPuGbYYPvvKDO/OYLH1605p/ebH1/pFOsqM1czp1CBwC/ziv6+WE46EsjLT5c335svKL7dFXAbqhB/6pqsGyjCn1CBV3EaPu/UD3TY587NVfpcOO1Tw+2c4RbF9x3554vmP8hc1IwV7ul9/Z74/qDNsYEdP4K+/M0+muwVa/NZznVJlV8muyw5KrRqpfq0Dn3jNr9YY2E308/++ym9ZzCPyavLHh27w373wxiy/HTESfPjJcr/l9H//8zKv5FEodd2M5M9ulmUwnEvElJ5NM9yHWnWHDx/OT4Rcu3Ztvzd8z549bsEnun3HpYUObRrJIUdkm7acXoSjCo3coiXT+n0Bv22dWql+H/a6jbvyP0t11jyWF0SAn3mz8w3r6dN6dWtKkiPLrY6c+C0EwfdJjiQaOFfCpoAfuZazFJs1yXCzg0S/kLhl2978hdBowIygoVt8beos3ONOCVDWYB3Ys46yoW4bNu2W2q5cXLfduYT4bTNXl11uMbOuq2cjZ9lCRus374n6RC33ov7sAWdnzpqNO/16Qeg1TV1ZaGv21q9xi8jqfgH1XRsxcwjuHa/nSBEZY491gXs5a7t18waeNKnv+s27/S4YkOCsafa8ZzhlpX3Uomld2evKg5uI+zV39Q5xW3vs2nvYL2b6BdHa1Z3luz/fqg4nD9SpkVuQZuE3h/Z3bbw/xPdPu7jOld37DktxkV47Uf791CD50f8tlulzd4vBACpFjk2DoaLgR3e1l1ZZNeS+Xy12vvKyn+Eayh4WxdBgiCM88vRqN/M4IjeMzRKDAZglbjAYDHEMs8QNBoMhjmEkbjAYDHEMI/EI0KBBA78P3mAwGMobjMTPAg42/fznP/eJLgwGg6G8oVKQOFY01nSs4LfJycliMBgM5Q2lGjsFcLiiPISg1TjUJQliw0DuX3xx5ik/TrUS9Ks0Tqty2Kp79+5+lgA4TLVgwQKJB3AIjLJnZmb6tuFEL2n7OBjWrVu3/OuIPU/gNIPBUDRizrEJeTVu3Nif3Ny0aZNs3749n6w5gsx3xBKHaCCZtWvX+mxAFSk9G/WDlEJJHJK96qqr5LPPPvOhCEoaKCSNW8MsgZg18UDihGEgXAPlh7wp/5EjeSccaTPytoImTZr4079G4gbD2RETiRMnpXPnzlK/fn0/+DimvWPHjnyC5vtBgwb5zD4QN39jtU6dOlV27674x4Wp99y5c306utIAxPfBB3mJDfr37y+dOnWSeEB6erpX7q+88oqXlyD27dsnU6bkxR0ZMWJEgbytBoOhcMRE4gS3grg///xzT+ahMVQ6duzoLfXJkyf72CmtWrXyC4NYjfFM4kRmpC5YjERnDEVGRoa3zEFOTs4Z7RK8D8mmsUxpD2YpGq8kmM5OLf0NGzb4VHjRgudTXmZLWLa4LTSODZY8/cG9gy4f+o3no4CCMeCxmkmOTTkWLlwo0YD2QmZ4USaUP88niiPPidblhKWOOwaXC21HWwMs/HBJSIhpT7vyrGBcmDp16sjgwYNl+fLlcR8u2VB5EROJQ95Y3fgx27dvf8b3DEqfhMANUn2BaAMrlSdAAtdcc40nXoisS5cunvCC5MpsQ9sD4iQPaaibA+K87LLLfHjegwcPev8w/77xxhueYLk/ZAkxQUS4o3r37u3dDzNnzpRIAXGOHj3au1ogLyJNnn/++d4KRnFAyhdccIEv36effpr/u549e3oF8+qrrxa4H4vD3APyJcdqNCn6KAuzBX4LiROiGFmgjij5SEmcWR9WuioZ2nrAgAHy5ptvekueGRCWPgbDyy+/7JUQihXXFm23cePGAvdDqaDkKIuRuCFeEROJq4UGiYcDfmAGLoMJa4nBAtmFDqJ4ArMLfP+QA5YehDJ27NgC1+AD5wVuueWWsPfp0KGDJ63XXnvNkwdug4svvthbi+vXn84ZOW/ePE+WoEePHtKvXz/frpBVJIC8ILWXXnrJkyXK4Morr/QKYdKkSb4OWLGUB8uaMkHszKzw8WdnF4xCyHOpO66caAgc0Pf//ve/PWGiWHCrxRJjHvJv2bKlvPDCC16uUKL0Aa67t99+21+DGwt5g+xxOV166aV+BqJtGcSqVaviInWgwVAUSmWLISTPC+uNqTNWLNP5eLbEIVlIXEPtQow7d0afJgsyxNqGkIjFjiX6+uuvn+E/10VgXliJuAog5kiBQpgwYYJXprhlsrLyAiahfBTz58/3LgXWLAAWLn1V2IIifuyySvCBBa+KFPJGrpAv2on3KCCAgoG8qS9Ki/abPn16WNnjMxRMeQmVbDDEglLZYohlxMCCRLByWrdu7afyEBaumHglc9wexcWSJUu8hTxkyBDvXqBN5syZE3abogIrGfLk+kgBWY8ZM8b3A/51LGsIPUhYuFV4Ltb4mjVrpGvXrp78KVN5AySNawh3CcomCAwEZhoqV1jpuIkGDhzoFWR5z+9qMBQHJU7iDDYW4yAdJYMtW7Z4EsF1wPfxSuJY0MVBXvqyZFmxYoVfTINUcQ+w7Q4Lkml/OEBQuK4gq0gBIUN6Tz31VL7PGV976KEl3AxYrMwMWCzEv1xeQRsxS9CdOYWB2QU+eJQXfn9cSqHuIYOhoiAmd4ruE+fFe6b6EAZTcaavkIbm3eR7SJ1rcUHE6z5xCAErkG1yAEJm8TIa8BsIGyucdsCyxzLnX90jrdBdLoAFRYg8GveN7v5Q/zUKCJdQKFC0uCiGDx/uy4F7IhzoRxZzQ63gcwXqwWyBxeNg29AfuIsUtBN+d9wkuljMLFAPRgVBfzBTKa5yNhjKEjFZ4pAzW7Mgat2hghXHwtvKlSu9tXTeeef5BTt8yJAdU9rgVrp4A9YzuPrqqz3pQR4M/uB+5z59+vidHYDvWUTEIsQKZFqPG4UFS0iGWQmuJogV1wcEFQTtCzlBnljr+K91UZPnssMF5Un787rpppv8d7NmzfL3QjlA/tdff71/Dn2Akg21xCE5ZgU8Y9q0aYUqWeqDVcusavz48SXej5Rv1KhR/j0KjTbROrFVlXam7Wiv6667zteR+uP75nNdFMaFAjl/8skn3miYOHGivw8Ltsw6gvWjHbkX+9O1fw2GeENMJK4nMEOtG130g8yx8LDasNDxu65bt65c+lojBbOLt956y5M0Vi51wvca3KHD7ptwLg/IWwEJPv/8836RDhKhrbiX7nVWvP/++57McA2wsyO4s4dr9cRjKNSSxmpnmyBuEq5j1wzWbLjZA9/zu6J2D6EIIHn6MFYCp0wQZriFRNqtsFOnuphK+ekDFA5kTruynqC7S1BQkD1tSt8A/kWB6vbGIImjKKh7eUjkbTDEilLN7MMA0YFTlhY4MwcIEQKNFigqLE+Il22BpQ1IG+sQ4o6lvNGCdmGbHsSHYqhMYI8+M0bdOmkwxCNKNQBWPG8prAxg7zmWOu6ewhZVKzKYEcyYMcMI3BDXKPUohoboAKF+9NFH+a6p0gTkhQUOgUez86WiAD94YaERDIZ4gZF4BGCnQ6jPurSAdXiuFtnCnWKsbKhIUTUNlROVItt9cXzigAUw3TppMBgM5QlmiUeAc2WFGwwGQ7SwHJsGg8EQxzASNxgMhjhGpcmxWZLAx86hH45/c1SdHR7s7uBASfBIOIdUIg0dey7A4SLKHi6hhaH8ggNanI5WcGjKIi8aFMUiceJOkOSA3Ruc5AuSNce0OVnHYRmIjBOewZOL8QrqTIxq/OSEj+VwDuQIiXMKU1OlsZBKIoLylPuSoFgc5edwSxCcqiVEAlsNSyMnaEmDhWZi0KCM4iVBdHFAPHnCCzCWkDVOoBL6wWAAMZE4xA1ZQQgMKGJXcPRZSZzPiWHBYR+sUa4lFjYZZOKdyBlM1JMTlVjhzDR0rzHxTXTbHlmA4gXsuiEsbVnFCg+C+DMYAIQdKAwcv8cwKInQwPEAMkRB4MyiyFJkMAQRE4mToYXsKcRDgdRCD0xwlJk4FlgMHF7BAiQCHvkcSyt5cGkDa5WBBMEoeWMVYZHr1kMUVCRKit8yPSaAE9Pi4NSYIFUoRgKGBTPocD33jmabY/A54UKx6rMAFm1hu3C0npSH+9EO3C9YFkIs8B3/UvZw5eR5XIMSDL2GcvA9MxgNLgaos7aPXgMIEVCYS4F6cx/+pdyh8cQpA+XXSJw8o7BTmzyTQGIE3IolnC1l0AiftB/PCXUvBvspXHm1X7Tu4UAMH8qn9+Ze1E2fR3vSXjyHdqfO/CZYJu6vMsl39GW48iiYaXMvmxWULWIicaLeMYg0SH8QOuXDMtcgROzPJk4FkfuYAsfjcXxyOZIBR4mKGNwAASbdWKRgkJA0A586A4nBQxAn2hTQdkQ5JCgWMxyA0sR9gHWK4owEEEO3bt380XpVLqGDEeXaq1cv/55+mz17dtgkyEQvRHFRNkLBUn/SoHE9QA409yWDGmIgmiLpzxQofe5D+/E913EyVQmAmRszOCUznckQnZDAW4BImSNHjswvL2XVMijU1cK1PId2QFZRUsgd97/22mv9gSpIiL8hL9qbMocqMqIfkmaQWWQ0OU6Dv+/fv79vf8rCuPjwww/zT+SqPOCKgzyRB2SB50U6TugXolUihyofuPmw2l988UVP0sgU7YE1TxsR8AxlSV8SJZLfMUaRcWY59DNl47ek8wsNg0z7E0kTuSDQWmU88VteEBOJqwAyeEOhwa6Cwa/UUi8sJ2c8gNCmEAaxwKkHgk89o1m0pU0Y0JAywbQQfAYN5IZyY/DwgiBJ4ACBMUggSAY2M5lIwX2Jo00CBdK7QVb48oPWL+FqIVodkOGiIgIGPS4xlApERr3VCtYY6bQJhMHnzLo0bK1m3SHMLFESUViQSd++fX0McwgA5cJ9+Q4yZyEPdxUIzmxoDxI8cD/aJ1yMcP09scRxDxHtkLqxZsO6DOWlPswgISdIilDKtBXEvn379gL3Y50AkozldCuKhP7GHQJJ0geQKZ/xbIA8kfkKecDo4TfUDZKNNHmzWvvBGTHvqad+xnvanyiSBDzj/u+8845vG5Qv5YO0eT4KDXmnrbiW8hLSNyjryABKmL60hBtlixLfnULnorUZJFg6ED5WBtZOqKDFE5S0IEFeCG60Mwp2rpAKDZKGuCAh3Eu0EVN2zToPcWC5XnLJJZ4EWThW8gQMNq4PnV5zncY3x9LXsKyA53HfYAIFrE5Nonw2Nw3lDLV6AWsd9PV7773nCZd7QYZY+fQ/ioLvmdpD0mqxERpXk4uoa0Wn+dQzHDFoIg2eEc71w70I6AVp4uMHED+uEGYlwVkMpKwhbPkeFyDWayiJ8zyCZMUClBnPQFGq4kOp0i4AxQeB0q4aQpgyUh5mSJGSeKSgLrQ/yo33tDuKI6gMNZ6OgrIzm0DmgjJCX5Bq0VD2KJUthkxzIWysDJ3GIwCV/eSjJnBggDJ1DX4emtkHQoeQcFc9++yzBRQGA4pdMsGkxyC40Md2x5Lc3liYz5iyUw5cDqE+fN0WxxQeGQhOubkfllxJgjrTNqHZ6yFIlGc4yx3ojKqkDQztg2DfoWh5AW2j0Dj7/I2ypbzBNi0LUHYLEla+USokjiWOxYFlAxggTLmxACpzeFoGJPWHoNVSVITutFDfJb/BWgsGxYIQyeBeFNSldS5AGZl+h9ZB3W58DyGVdn5V5IwXRB4Ef2vbn0tovQuDKo/Qa/hb6xIpLJBX5UXMOTYRNB0sDE4dpPo3Vjc+Uab0+NlA6F7yygZIDWsUtwo+cH2h3IJWKu2KDxnfJNYq/loWhaMB92UraJDIQy33kgB9yiyL/g/WiWm6Wu9YwviVKY+CNrj88ssLHI4CyEesygerl2c2adKkwOe4c2JdUKcsmuA7WuCaoSzBlHi4udiTD2gjXURUMLbw4+O+irS8KAsUe3A2p1mLDBUfMVniDEjyR/Iv02l8fFjd+PDw5+HPxWWARc7nkDgLcxX9pCAWsxIV7iT+ZlDiUsJ/iJ8XC5pBzOfszKB98Mey0MXAhcCZtaAE8ZXyLy6VMWPGyCuvvBLxIhK+aBYjWZgi5ylTe1wKwTjl9AuEoTuKIDtAeflNJNslISIWPIcNG+bJClJiYRF3EYuTyABkhj+eBVpcbZB+z549veIKddMgI/ivaROUG0SksxA9QMZnkD9txXWQGNfgc8bvznNoX56NSwpy04XEaIE/mEVa/OL48aMBu2J4Pv1Je1Jmyqu7jig392Qhk35F2XE9fRLMIsXCJ7/Vba4oAuRMD9FRbxYtWYegbXUhurTBLh/amN02hrJDNSccD0mUYLAiRAgh/kcGI1YDQqgLJZATgw4iwKJkIams/HuUF8EuicMhuDm4T+gCGMCPCTFCGrQDbcJ7ns9gA7QXRAVhcj2Lkyx06lY7FCBty+KcWue0K4MYKzXUDVMYGMwMbO6HMkEZsEgFaepefciCXSwoYgiT/qG8kAU7YdQS5DMs7mBS6CDw8UIo7LrRk4W4V4JtRP1oB6xO6kd7oKRCF1S5D59xHYumejIW0AYs6OoJWa6jbLQh90fWaB/6h7bFCtbFRF0fgPj5DfdUeUApcE9mjqEHnpAb2ocE4LplNlJQPurJ+gVETP0ZBxg0OiOlXBAhbUdfYFEz+wr2M7+lzegX5EfrQNvQxtyLPkA2dWugbhXl+dqvyB115jpkimdTb+rF3/jnuWdwFxS/4/csEIfOolURq2wbygalFk9ct3LpvuGyRHHjiRsMhoJgfN9+++3eAKkMoQ/KM0otABZWXGEnvQwGQ3yDmTazAj2kZig7WGYfg8FgiGPY8rXBYDDEMYzEDQaDIY5hJG4wGAxxDCNxg8FgiGMYiRsMBkMcw0g8BnAakFOJHCjhQEo0x5s5iMHhFH1VxOBC1Cme60Z/llb5g+EqSgsc2uHUqx27rxyIWpo0ow3xJDRLi5740mPaOog5vahZZThZVhFybHJ6j2PUnITkdB+n6IgtHsxuwkAlLyInJkNPOXIknBN4gBN8HK+uaJlROFl53XXX+WP38bitEwVN+cePH1/ioSIGDx7sxw7xzksDEDcxy8/W7oxNDBDCzpbVYTyejyHEmGKccCq0LM6WMA4JbUGbwGe0HadWC4vzxHZlTsZy6jc0YmZZIGoSh5wJ6M9Rbo3AxsEe4kQQH4TPaBRiq3BEWoMjES+C+BHxHsWQo9EcgYagOOqMwgq1ePiMuiOQoSRO9hhOuKEIr7jiikKfw2EKrCmujyYlm6FygxjmyB8xWQoba5ybIHQwhgghMcqCxCFNElLo8X+CvEGexKU/l+WhrQgfQKwZjCmMTvK8EvYi3ElUjdfDi0xbcUnikDRBlNBCEBSkTgowKq6xOYifQbYU4kQQFIvvsUzpMI2lHK8gDgaxLpScaY9QoWPGgaUVLn46sSt4FZYfUoG2pw0JW1sUiaNAIg1bWlQoWKwhBLo4aba0LNFcG+76SELWRlPvs92nuM+KpCyRPqc4Rg5jkcBzpGkrSmYYi8wgi3qWJgAvLaMLZUN8GIwhxgs8QZA3uCNcCsLSCmOMIoPEJ0yY4JUIdcZIpR3hs9BYOpQPA62o8VvabReKqEkc4UBDBYUWtwHBlCAeSJxIbFQAEkdzMb2GJJg+acCeeAOKiA7EikGgNOs4ygxrGTA4qLuCdoo2O4um9GI2g7sKa0UTC+O2UeHhOwRN2xqBg/CDLitmDcyICKhEgg7cBCigt956q8Az6RsGEP1HAopo3V7EyCEHKW4iykmdQ/3JyADp2AiMRTRFrkXJkfZLIytSPowB2oD70H5YijoYsH6YwXBvfk85id3BNdEAsiM6IURCOxPci/swiIOySXuQ0o6BjsuQSIZBIwSFjlwwM2NcUI5QC5g+4BqiSBIoKhiWVkFdqDd1g9gIDKbPwf3CmKF/eQ5lJqAX9yFyJG2kBgVTfMi5KFcKM2jkGDcKchYE1ijjWFPWAcawjndm1JSH92SawnjRlIOUHeURKXFpwgyVNeqNPGj7EDyP3KNERYVkNYgcbaORPOlDAodhEeu4gGCRLyIrhhJwOCBL9Jta1NQNFxp1Cp1hU0c+nz9/fn5uWgUzZ2YTuIR4PrKDMsKiV2OOftb+0+BrlJ8ZN59FG2BNEdPKRzC3JAMCcqYzGAw0CgOWhqbwEBvX8l4JMB5BKFUEiAGjeTD5O5gMGIKEwHghhNQ3WiBMhFMltCpthsDwHP5VgUcxEr6UAUfnIygIAyFTg+2LIEEixCanzES2CxdxjgEAUTBTitZ64HkoCJ4PQaPQKFdo/lXKTFkoN+WiLMTdUIuR9iJsLnj33Xe9a45BgRJSMPCRJ9oFhcaAIayvEk6k4B4QA31InknkltjmKJEgUBr0O3kpkWHKrinxUHzjxo3zhIciot4MRpSZAt83bU+fEgoXUtH1EAVExBoL/c19ILOrr766QOx1DRHMvxAtZEpb4JIIhvLlb4yKwpQwypY1GVyf4dwAyCvhbOk76gyBo4AgHgBp4xKlvakrwIjge0IfRyM7RIUkyiQKm7akXpraESAvtBWEiBHCGOBZpCxU0DcYM8g9bUKb4SaCPCMhcABhM4aCIZ6RZT4PWtvwGooWg4O6hgK54HeUkbHKmERhYhzpmKRcKkcaTpnyYgTHSuCg2MvkaH86gkGH8GiCCCwpOokX1gmDMZ5zbGpoUDQ9HYH/LFRoGUAaNlUFP1ogTNyDdmLQYFWFxhBXv/ybb76ZL/Rci9WOsAdjhgOyxWu5woHfakb5aAH5IrxYPgwqgEBCKKGgTig9yDN0Nkb8cY23DjExiBjIkEjQukXRaK5P6oQBAfGoNQ65haa6AygpTTVGmbF0GVQoBA2hHAqUEgMMMKCZfUHMGmJXs8SjiFDukCwDV9OqQXTcFxLiGsqLxablw7pUAtTQsdyHZ0AYb7/9ti8nCgdwb02mzDjD9RUkGkihMDKg3oxBFBZEHKpMFJAffUBbUV7KSt+gZKiDZu1iFkA/kZgaBRatm5T+YixdeeWV/j5YuRBfMFUdbYh1r/JMX6EUIX1+o2GGIUoUM4ukyE0wR2i04B7IM775YNvS5nyHm7QwZQX/0XY6Jvk9ZUM5YkRpfVD+9C8zPNotliTcQRSLxBEqBAxB14bTbPcIKJYMgkDDnksfUUUHFqPugFEy1MzmDLpQEi/NHSIMPpRzcAEXYQ3nMuPzwlb9UUqQadCyRK6YUkN8OriD6w8aRztoiev0NAgGE1Yu9+Y3kBjWG64SZJP2wToNlc+gRcs91EAB3IuBiZKhfHynbheFuq+C/ungOgltxwBXRaF1okyQO/fk9ygmbWeUIEqc6TiGRfDejDklkFBAQlj9JBYpahzq+FUwfmnfYKJkXBzMtrAomXUG46NHCsqCFY3FT5uhVOg32iKUyBXIGH1CewezRmmiFeQe10qsPEP/IRfIQnDMoDRwBWJ8hCaWDiJ0fYyy0WaUV+PZo3gxmDC4mA2hqIubezgmEocsKBj+IRoTS0m3BmlFsAqoAFoGgkEIuNaIvPhAiLBaEerg4GF2EC45cmmuQZTmAqPes6jZG4M6+D0EzVQ9FEGrinZia6cm8YAAGFC4VgpLCB0K5Bv3D6TKoKccGDQQrkKzOhWFcPVm/OjiGKRBO2Dlcy8sf6xfZCA0MYn6qEPBtYxVvldfLuOX++Oy0oxc4aD3DLaxjnHuyxiPZUyj/FjD0RkUhEdfoDB0jSkUKg+hdQyWMdadLfQncsCsiP4MAuVCe+FVYIZJvVGYuIBQRIXFUy8sATeyyD20/YqLqB3UFIjGRmOhQVjsQbsEOxrtTeHR0AghGg6fEZaDJXSNDOES6CogahQj/m3cWLw0Y0ysu0u4n/p7owHWDwOHRT5FLC4zLEjuEawzliz3Ds4sgvfmPbIVVFwMChRc6EuJRmcwDD4IH0vw5Zdf9oO4MBdDODALpWzIP9ZjqA8VoBgY+Eo6odtRNbcqVm2wTrQDY0VnNChryox1CHGjKLgmVGFzr3CuJO6Jq4v6oqTUFQFom6KIhHpSTr2GezHboTz4+fked1a0QNaC7UX/oKSC/R/aXriZ+D5oqfPZyJEj/RZm6o9SinbdjdkQ90C5h24OACgYDFXagbbTMUb5i2o7+gLjNSi/KANmMJSX+2HhF5VMOxJEbYmjgdBMNB7aOziVxSqhgfmcXIi6l5xOpiJMfSsyiev0GNBO/I3mRkDVasIfy7RYr1OiQnCCU2EGFwLAgGHwIvSQAkLD3wgTOwUQOpQpipU2ZzoZ7e4S7s2CF8TGVqtoLCv6FWWCj08JAfmINikzCgh/J+SA/FAW3HH4YoP1Qe4gW9oKtwIkWZjlFg4MGH5HW0HADERcOchlNAqQ9qcfWciCcOlHfLy0ByRCn2JlMj5YnEP2uYZnq8uFfuMaxgf1oX+ZHXANi7sKFATlZUcIfcPzkKPQdIN8Hm6Rl/YLtS4pK+2I/ATJFLmlTurGwdrESFCyog7IHdYnfaZnQjDcILtIwWyJe1Nm5AY5RzEFrVraEbcLz0FGeQ7l0tkS4wO5ZWxBspQNHzTtjcKKBNwDIuVZ8BdrLAq8C7QxClDXewAyRNmZwQSfw734XN1LKBTKpv2EUmIGwn1Zb0GWmc1RR9o4CO7DGKLfzsaZMe0TRwjpNDowuGVKc/NhOSBwFA6hgtjpnOLsQS4vUL9qOCA8mqCWgYNgMvgQUk18y4BloNKhWFIsGqm1FUzmCxkwwOh0fS4LaQg97c97hFq3IPK9TusVDLxw7pVQUBb8flij0e7H5Vp207BDhbJoDk8GW3BqqxZ1YfeG5FgcpU60EWVi9wlEGwQDgDZmADBoWIsJt1ugMECcLKDhVkBpcA8+4x66P5k2pKzBtqTcOusAyDpExO4C2h8ZZ/AyM2BM0PaQL4ua1AkS4hoGdbBdGLwMVhYKqTO/C+ZcBcgGBK8WqObNDN2BgXKnXliAZ9udwXOoTzhZhuBxvyAT1FMXXZW8KIsme6bdIHvqGI0/Gn7ALaQ7NSgPRBzM78m9uDc7UqgTso/cK+AX2pXP+D0yhCyynsDsKJKcusi85gJGhoPAgGCnSSiUA0N92ZQX4wO5QsEHF7WBJpSnvJqTGDLHcEHWgxY711JnPUBZFGLK7BPqIwtWTjtRj97rtKmwxa5zgZLM7MOg18EW7rtwLgnd5x3pNUFQbvX18X1wkHAvhAYghHwfbGOeo2EPzgaIh36N5Npw4Fm6rZB7aL8H5YHvabeiZgr8jjpRX34fvFZPGb7++uv+Xqq8YpEr6spzdCdJ0OUC+C5Yfq6njULrpPfQ33MNgztI1JChKgteob5QvY9eEyoH+mztX81fG+46LFHkHAOgKKgcBmUG4oak//GPf3i543PqFayL9nHw2SpnwbaJBGo8UO5Q+cUqJ/TBc889578L1zY8l98GZxLaVvwmEn+zymU4FHUP+isoy5T32muvlRdffDF/Fk15g2ULNx61vKHjgtPctDuHoc6GmBY2I+ko3Rte3JXX8oaiCIjvzubKiOSaIIqyqLhPUdYGghHpwsnZTpCeDaHPCq2jEkK09wkH7h3pPuDCgAwXNTMMLSvXh36mSqSo34HQa8It4Ba1oBr67MLy1/I5Fi6xU5glhO5SCqIoOaQ8hclVuOdGI2ehzznb7Jw6FdY24Z4Zrp/OVoZYDJeiflPYd+HaKVx5IXrcOsxsIoGFOTPEDRjMRRGTIW8RDncMroFoF8wgk/IQCwRArpQlXoLmYTXj7iqJuC8QO7PN4NbTomCJkg1xA6aeOvU2FA09EBMNdB98eQi4hpsjuDe9vEPLC4mf623UpRvY2GAoQTA47JxBZIiWwEF5al8s8XiK3lmW5TV3isFgMMQxjMQNBoMhjmEkbjAYDHGMYpN4RcwRGQ4ay+JcPKewffgVCeeqPc8V2LcdPO1X3qBypa+ybvuSKoPmKajMiInEEViOuGpAGE48hYtXwHVsgudUVLyDk6dE1CttaA5P2rQigxOXHN4p7KBFPIFdCezNDsZAKW9ArogPwulHXhzsKW7MjljBcznVGC5ccbTgoAxH7wk7UVkRNYkjsByxJYwnZEPkL4SDI+YKyJu/+Y7rQkODxiM0illpg1NdHLmtCORWFIgrg4xEG2OlPILQCBritryCQ3ccS2ebLWOYqIhllaCF5xKfBRkoLthLTrgJ9sVX9DFTGGKKYgg4008MAIKyI8AExdEBCQkR/AVC0v2TBkNFBDMKYo0Qs6M8b39k+xtkRwwjYrpUJBAwjf3Z0WZ4qiiIml05aEFmlWAMaVwrBN7BWiVYD6fqCHxOECTSXlUkEJmRKHPUnYBJoZEZ8c8R4Aorg+BTCFjwiLhmliGCHPEXuIYIaYXt6+V6sidxWImIdxrGAKuDz4nAx0kx2p3pfDDlGf2i+RSxfHBt0TfBiHYEGOI7/iVgD5HZgkeu27Vr50/y6ekxFDKDhZOBBHNiOss1tAUzFcrDUWoiwgUTJKDQtQx8X9Rxa+Jy8wzie0eTtoo2pyy0QfB4OO1Cm3MUncFOWYjBQtswtacu1Du4z5drOnbs6INN8Vuu1byxwf7EYKH9o4ngFwsogwZF4lmUK3hcO1gnLF0sbk0HFg2CckUbIpvB0K8A14UenqO9kR3eB1MVRgLkn2Bn1A35pbzBfkO2GEu4XZADZJD6hcbvpt8oJ/3FbCie9peXBKK2xDXIVTBAu4ZV1QGnqa/KMuhVaQBSJPIadYasidoHoSsQOJQW1hnCiLuAID7BaSNKgDRfkBntSORDwlGGmwpC4AQkwl2lOUv1c2Y6GnWNQUU0OPycQfcEg5roeARF0sFC2RTU4ZprrvF1oK8gWcoSzA1KhLVQVxnuNPVBMtAIQ0sZNTojA5tnaln4jHIwW6PtUPbBXJTh2pl1FA3uFSkwMIgKiWUcBO2iIYEB7j1cfRA48kl9aL9g20GKuEmoF+WmrWi/oB+ZuqC4MFZK8xQp5I0cQaw8h+h9tG9QrvhM60C5cHVqBMxIQV+S35MogMgadUZWQ/3NyAttivxjjNAu0a57IRP0A+OA98gD7ayzdj7jb+SGPkIm8OWHRhpUYFAg2yXhook3FMvPoQkiICa0cLjgOBUJ1E/TfDGYGUgIvKYcwyIhNCchNSFFBOqGG27w5IaFwADr27evV3Lk8INUIEzyDGL9EPpSoQSOEBNbOph5hTZn8PA5ypJBCxFBuOGg4URDs+BAvljEpIjiO8pHWRj8mhw4UmhAfX4DYaLMIAEsNEgbYuWemnUHpcLzw4Hws9wr2uSxBPHSONXMPjQ0KOXRvJ70G/Vkpoj1DSgjBEH/aS5VBe1FjHWdOQTbj/tAHNFaoNECw4E+1FCvlJN+QrkyM0CGaEtC7CJDlJFwwJB6MJP72aBx4MkjiYwjV8gfC9Djx48vEMyOPqVdsI41d2m0COZbZWahgbuoK6SNMcA44Tvuz1gjGU040D+Mz2AqtMqCYpE42hc3CtPvcHF3KxoQFHV7QNIIHIMHouBzCFwTBTCwGBCaygnwGcIZjLsMUTEYQqM9MjXkPkSlC81QDzkiqJqclnsVJbjBOOPBnJwoA/pNv6MMEBtWXbRxK4JuJabfqhQA7gxmEkFFVFQgKwZjrAYBdUWZYR1CyLQjJKZJOeg3kkjwPaTFrg0NhxpukTU0Dn5QsdG39HdhkTrVegwFykz7DrdROGVGtiHan7JRVsqsMsN4g2i131BSKDCNQa6uPn4P0Wvs77MBC5v+VxnneRgfmqAgWE/kjRjY4dqF9g9NFE6ZkfPg9ciJ/k6TJzDbgMSRGWRAE3xrQKzCoFEZo529VQTEnGMTQmLKppnSo7WaKgI0NrROAbGmsVrUX4wQBi0UrmMwhPq/wxEw5MP9IfLQwPAaLzlSoiss9rlmTA8CsqVOxdm5ELrAB9FFG4I3VlAfSABFhEWPfx1FqNHl6A9mQxATViRET/kKsySLWqzU3xQ2Y2FMBBN9KIIKDCIM9TkDbSvkJVys+eC6BddQzmA/a7jaaEiNdggN8VuYPBQVrQ/rX8k3kuu1vJRfn4M7izaIdLFY3byV5dxKEDGROBY4e6bpXDJNl5fwlaWNUAFhWosFpBYKfj2sTcgDoUIQgxYJg4rrmYIHs8NjaSHkQUVIlhusNXzU+AaZKitZMIAZnLxiTeJAmRk0ofvR6dtg7sBwiV6jBUqLtoglsl4swMWAMoXMITh1mwDKgOuJabp+jl8WpRktlCgL29pGGxaWfV5xtlmHGgIYTcEonLgNeD4yg+KinpRD48Kj6JHPaFwL3IfZQxA8JyjjkUDzmkYDyJvFUv0dZaE+arCcDchX6GyhsiBqc4tGxWeKHxwBZfEM/yYvTdLKNfhAWbSjYREEyIwpUjxrSurBdA9orlHIOJhQgTZQa4IFKUhDgQWGhcLv9BoIncXF4IIj0B0PkDeLdUGSgdwZoEzFNYNStIcdGBhYgdxDM7RTdv5mpV8tIBQ003XNRsRCXrBOkQCLlwGJ9asnNZm1FAZkB39urPt+1a2AUsXFFZpFB6C8dPsrz4slSTT9DkmW5mE2SBzXCDMKnfGhdPCJ60lF3TKIGwPDinoxE9EEyZECHzVrLSqLPA93Kf1X3KQhoUD+GR+6UMyY4L26vehD+kTTHfJdUYmskUnNQ1vZELUlTsdqCioW7HgpmIrx0q1DKtyQH34/BApiitd40NSZxUxIAcsIKwhfpVrI+B7Z9YBvERLUBMjaDlyHhc2i3+233+5JnYEYzO8YCgYWioNkrhA7BI6gkpuPHSoMXBRlLG3KLIqy3Hzzzf6elIVyBNc3eM/OiG984xu+/lhI0VpZWN+43FiUory0Q1HlhYB0MTiYazJS0O4sbLIgGPTDAsqPn5vvIA5kGZmNxZ/Kc1DKKFBN81YaoO2Ykd12221eZiBxfP8qM/TH1KlT/cKg7hBCIbP2olY+8nrTTTcVyIl711135d+fhW/aDKPsxhtvzN/tQXtxn5LeZcb4wKj71re+5eUKQ4JFTp2hIjPMaJlRqdFT1BoNZWWGWtyMT/EISwoRIdhpov5sLFMGCgQTKlgII4MMUmCAQ+BcG9z1gEAy8CENyJPvdJBABvyez/TeWBgQLMIevA/35lqUCdNgLM+XXnop32XB/RHuUP9kEDyPgYslw4AN3fcOGPhY4JSHNuS5lIUBQ114NgNICYP66p50teD4DGVOefgtszisYZR6aBtyf16UO1ZipF60mVp2QVAWysHzqQPEodtClQSoF3XA0i7KCuUe48aN87s3Qne2lCSC/USbhXOTMHOBGCk77Rv0m/MZxkC4o/bIoMpMsG2oN/0d2geMBV5Bl2A04BmUE6OEfmZ8hquTnqlQ+aLunAD/85//XOA66sbnzBg0qXNlgpF4HAKhxU/O7hgGEoOXWBRYZPh6K9Le/PIOiAarHoKJdlumoXDQrqy7scaEuwgDip0+/PvKK68UuJYdOBgwzLoqoyVu5+HjELoSj2sHKwkXF1YMR7+NRM4taG/caBCMnhg0lAyYodGutDGGCzM7Qn0EwewOssf1UhkJHJglHsfAzcJUEzdIUVnvDaUPdXdYHteSBQaKuuAg8VAjhXGNayec26yywEjcYDAY4hiVwp3CgpUl2DUYDBURlYLEmYpVxkMABoOh4sNybBoMBkMco9LsTklJqSots2pKtSoiW3dky579x8U2chgMhnhHTCSuQZ/0GDBbgXgFY4yzc4Lv2e/Jd7gzynL7W2aDVPnNf3eWWmlJMmfhbvm/J1bKrr3mYjEYDPGNqHenQOAcg9XMNIA9yuyV1d0fmkhAA7Szf5Pj28HQlecahMxo2jhVrh3dRK4ZnSX3/uJzmTmv9E7YGQwGw7lA1D5xjTbGvkzid3DARMPSahAh9nVC7MQV4QXxc6pNA/aUBZgEbNySLdNm75KkhCpSv178J+g1GAyGmHJsEqgm6B6BxImyxukpYjaQgzO4rQ/iJ5AN35d2LsKz4UTuSW+WJ1SrfHGHDQZDxUPUJA5xBwMC4fNWt4oG0QnGjOZ7TQpQHrb5Hck+KUmJVSWzYap3sdjipsFgiGcUe3cKx76JLU5Ev3AB/3G9EFecCG9nC5B/LrD3wHHZtitbhvarL/vc+5VrD8rsBZUvBrHBYKgYKNY+cdwoJIiAvHGhhO4+wQLne6xxkhvEmoWmJLHvQI68+NZGqV0rUW65qpmMHt5YDAaDIV4RsyVOSEjCPxIPmEQHoRk1dDGToEAQeHnJQJ2RnizfuaW1zF24R37zxErZtz/yZMAGg8FQ3hATiRM7uX///n63CTtUNHO3gl0qJKMlkQAWOrkOywsy0pOkqpsZzPxsl6zfVPr5Hg0Gg6E0ETWJQ9DnnXee3ydOVmtcKKQjA/i8ca2Qig0/OJk2WNDUFG74xcs65i+LmidPnpIjR0snlZbBYDCcS8RE4qQgg6yzsrL8S0HORj7HQsf/TXorXgqscmJfl8XJTbYUptdOlJ6da8sJx9+77bSmwWCoAIiaxCFnyFqztQehu1PwkRf227I6et+kUar88r7O0rpZmmzaekTWbjRXisFgiH9UiqQQIDWlqgwfUN9Z4Mdk9fpst6CZI7knbZO4wWCIb1QaEjcYDIaKCIsnbjAYDHEMI3GDwWCIYxiJGwwGQxzDSNxgMBjiGEbiBoPBEMcwEjcYDIY4RrFInOiE4Q79RPq9wWAwGIqHqE9sEp2wbdu20qZNGx8rnBOYxExZuHCh7Nmzx1/TqVMnadeunQ9FC/bv3y8LFizwKd1OWRYGg8FgKDFEbSZD4hrwigBYa9eu9dEKybGp2e+JM06gq2XLlvnkyMRaGTJkiKSnp4vBYDAYSg5RW+LHjx/34WfJoZmbezoSYPfu3X1scSIVkoMTqNWNhQ6Jk2NTrXWDwWAwFB8x5dgMhpMN+r0heECCZD5PTk721jnZ7wlJG8zNaTAYDIbio9g5NrGucafs2LFDDh48ePrGjrxHjRrlE0jgG8e1gk/cYDAYDCWHYm0dwdLu2bOn/3fOnDkFFi15T0o20rZhgeNq0YVOg8FgMJQMqjlyfUhiAAucpGgj0/3MmTNly5YtBb7HpbJu3Tr58ssvvf+8a9eucuDAAe8zNxgMBkPJICZLHIu6R48e0rJlS791kByaQSscf7hCLXIWQWvUqFHgO4PBYDAUDzHtE2cnSpcuXWT16tV+DzgZ7QFkjeuEfeL4x3GlkM6NfJv4yPne9okbDAZDySFqEscKx4UCKbdo0SJ/zzj4+OOP/b5wSJsFTXarsHMlNTVVVq5c6RMnG4kbDAZDySHqzD64QzipiYUdCpIgY4lz2AcS51/cKFjgWOxsMzQYDAZDycHSsxkMBkMcw6JTGQwGQxzDSNxgMBjiGEbiBoPBEMcwEjcYDIY4hpG4wWAwxDGMxA0GgyGOYSRuMBgMcYxihaLVOCh2CrNkUL9umtSokezfnzieK5u3hw9TwCnYunVqyMFD2XIsJ/IDVDWqJ0mttOqyd99hOXrsuMSKqlWryPABGXLtpU2lVs0E+dtL6+SDT3aKwWA494g6iiHEzbH7Xr16+ciE5NIkpjgRCnNycs64nmuJdsjRe2KOl3e0aJoh37l1hDRrUlfWbNgpx4/nyrkA7XrhkE5y89UD5cLBnaRH52by4SfL5eTJM0m8cYPa8v1vjXQkfky2bNsrkarQ87o0l7u+PkJWr9shu/YclFhRs0aC/OnBHlKzeqI8/eo6mb90nxzJPjftZDAYCiJqdwrH7Ql+RdArjtJzzL5z584ydOjQMzLbc/T+vPPO8zFWMjIyJB5wweCO0rt7Sxl5fmdJq3Hu4p9jcU+btUIe+dskWb12u7PIkwq9Nuf4Cdm2Y78czj4m0cyBUlMSpbazxBOqFc+L1igj2ZUvQabO3C7vfLhddu7OEYPBUDaI2p1C/JP58+f7CIUEuMKCHDx4sA96ReIHPgd8jqUO6fObeAhBm+JIrnvnLGepbpfmTetKx3aZsm3nfv9dYmI1adeqkew/cETqpdeU2rWqy/pNu2Tjlr0+dnpKcqK0bl5f9rrvM+q472tXl3Ubd8mmrXsjdjftP5id9zqcHfb7xIRqboZQz5dz6szlsmHz7gL3zsqs61wmybJv/xFp2SxDMOJXrN7iynzm/eiPGqlJ0iIrQw64Z27YEnnu08SEKsJ/B7NPhJ0pGAyGc4eoSRzCCnWLaO5MJRQIgryabdu2lU8//VT69Okj8YA2LRo6X3NNeeaVmXLZhd2kQ+tG8vHsL+RE7klHeMly7x2j5PDhY44cT0mCm3WccG3xj5c/loVLNzoXRx353jdHyvETuZLrPk9MSPB+7cef/9AR6TbfbsVFamqiXDW6lzRplC51nBJ54oVpMnvel/ntPvqC7tKnewvZ43zeyU551qlTXZZ+sVkeeep95+oq6Dvn91+7eoC0aFZfXnhjdlQkXjc92Sm1KpJ7wgjcYChrFHt3CpEKybGJBY57BRCutm/fvj7bD+Fn4wVtWzb0C34rv9wqX3y5Tbp1aCppNVP9d0wksL6zj+bIU//6SP7wt/flkCP0K0f1kjppqVLVuSjS3L+HjhyTf7w0Q/745CTJcTOQ68f2k+opiVISOHQ4R54f/4n8y5FujlMQKYkJEpzfpCQ5d0mtVJkxd6X87ol35UNnrffo0sz7+fPhftAwo7Z847pB0rFtprw4YY7MX7w+oufjRunXM11GD2vkXDJV3IzlkBgMhrJFsXankFsTlwm+748++shbhFjhHTt2lHr16sm7774bdrGzPIJy9+7aXLY6X/NW50JZuWabnN+/vbN668je/Yf9NVjTC5dtlCVfbPF1nff5Whl7cU+p41wniumzVjrrd5OzyE/K3AVrZdTwrs4PnSq9e7R0BNg67LOXrNgkb09ddNYy8nzKl+TIO/dk+IXEo8dOyHsfLvF+82Urt7jnd5Faaan536ckJ8hVl/byrpS/PPuBzFu0LuJZwmUjGsn1lzdziiJJxk/aJItXHBCDwVC2iNkSZxGTDD4sWi5ZsiQ/xyaEzkInVjnp2LKysnw2IN43aNDgjMXPcw3IOu9V8PP69WpKpnNTVHfkNnpEN+979sTerWX+Nfh/Dx466kkPEmeLX1V3TXJynqXNZ4ePHPUEDnbuOiCJzkLHP57syDOtZnLYF1v/SgonHHlD4CDXl1MKLGQmOL86rpTEpGqS1aSu3y4YKabN3SVPvrjWKYf9cumwTOd3ry4Gg6FsEZMlTlYfthZiha9YsUKWLl2ab83hSmEhk0VOFjxBUlKSJ/CePXvKBx98UCL+4VgAQQ/q005SUxJkzfpdzqLe5D+HrHt0auYUUJJfmMRihuSzs3OkbauGfrFQr6vu/NL8C2GnpqZ4koQ0q1Sp6j9n0RFihPCx0PGb40f/YMZy519fFbZcocky+G1Vd79q7nVcSnbrHr7xZ5wfP6tJhowd2VO27zwgMz9dHVGfrF532L8OHTouP/1BF+nUtrbMX7JfDAZD2SFqEseSxl3CPnFSsZHNnj3g4MiRI94CnzRp0ukHOMK/6KKLfJb7WbNmlWl2n1rOv3395X3dwlwNeev9hfkkjouhY7smssMR2mP/mCr7HJFD4qOGdpVLRnSVxg1ry+49h9yMoqp06ZAlkz9a5twWOdKtY1PZ4aztI47sa1TP2444sFcbWbx8k/NfH5VebpGR/di79x3y+80j3XO+fccBSeuX6nzWjeUL59Y55vz0uSW0CyQnJ9e7ZD53Lpy2LRvItZf1lc1b9/o98ZFi/ZYj7j4nnUKzA78GQ1kjahKHsNl1gj88MzMzP0kymDFjhmzatEn27Dm90wESB0ePHvUHgsoj8BmzqMmCJtsC1SqF5C+9sLt0a99UPpq90lvfzZvWkwfvvVxO5p70pyafe+0T2bn7YB6JO55t0SxDfnjXpX4BMd25LZ584SNP8tHg00VrZcTgjnL37RfJnr2H5Y1358l0t1g5cmgXGT6wg9RISfLbHK+/sr+Mckpm+aot8urb84rYM37mN1jgz7wyQ/7r2xfLtWP7ymNPT/GLspHgwMETkuvrX3JuIIPBEBuiTs+GfxvXiFrfQWzfvt3n2SzwgK9OeGZnZ8uuXbukLJGclOAs6abOvZPgSGy/c6nkWZ+pjhQ7tGnsj6Ov27SrwPXdOmY5P/cxv1/8L7/+mrw1aYG32NMdgX/hSH+pW+TE99y6RUN5+N4r5OUJc7zfvH7dmrJ89TZZ5gg2FvdRs8y60tj56Ks518zaDbuc9bxPGtavJS2z6p/hx4bov9yww289rJee5hdcAQuqHdpk+kVaFmfrOuJv3ay+rFi9VQ66mQKg3iixlV9u8zOQSFA9tZo8/8c+kl47SWZ8uktenrhJlqy0RU6DoSxgOTYjRLrzb//1N7fKMy99LJM+Wuq39p0MHLRREn/iuQ8dsa3y7piKehCGunXvWFv69agrDTKSZOIH22XBkn1iMBjOPYq1xbAy4VTgX9wqZ9DzqZNySv/j+wqsGqnbwmX41Q+4mZlbxM01O8BgKCuYJR4hWNBt2jjd+fWPyL6DZx5jT0pybqZ6tfyC5r4D2WIwGAznAkbiBoPBEMeoFHvEsKJZkDUYDIaKhkpB4jVr1oybULgGg8EQDSrNaQ2zxA0GQ0WEHbkzGAyGOIbl2DxHqEJezAaZkupcOyD74AHZu3NbmcWRKQzMWAirQDKPs4ETuIRdiAXIDmsVubnFiw3DwTPaMNqDZDybtIK42oi0uXPnTi/HjRo18vU6dMjC7BriA1GTOIMP4Sc6IQOAvzmpSRwVMv2A+vXrS/PmzQtELNy3b5+sXLlSKisSk5Jl5LhvSodeAx2hV5NVn8+V1/7yCzl65LCUJxBO4YEHHpDMpllFpn5DfS9fukS+/e1vn/EdxEqANBKCtG/f3pMskS4BSmLQoEH+e55FHPq33nornzT1RPCQIUP8Z1OnTs1POhION998s//3D3/4g0QKZLZfv35yySWXeFmFwB977DH/nP/4j/+QmTNnypQpU8qdgjUYwiFqEsdCGzBggM/cwwAkNgqW24YNG2Ty5MnemmncuLH06NHDB8PSgFdEN6zMJH7CWXsz331VVjryHjr2RknPaCjVEsqnn56okzOya8n+44WHqc1KOSVpKWfmIIUgIcdhw4b5/r7ttttk8eLFnsQJ1XD99dfL2LFjZevWrV6x9+7d2xM1hJ2WliY33HCDD5gGwRPemHg8RZE4shbtegfGx7XXXuufQVRNMlURLgIZJUQEsm0wxAuiJnGmv8uXL5eDBw96wcfaHjhwoLe8GYQa5IrrPv7443wLq7jT5vKCak5pNcxqJXUcCZ90Cmr9qqWSfeh03JAGTVtKvYaZrr7HZcvaVXJof17O0ZMnc2Xj6mWydf1q6dZ/uKSl1zvj3j7UbVptyWzRXhKSEt3vV8qBPTsLpL1Lq1PPX7Nv13Zp1Ky11KhVWzZ9uSL/OvqDGO/8S1alogiwpMEOIAiyZcuWfmZGoDSSg0DGECOztwsuuEA+/PBDefXVV308HWRG87KSJapbt24+wYgGWQsF9WrWrJm/L4ogFPwGWWS2SN3Xrl2bL5O0X6tWrXw5+P3cuXNl0aJF/jpcKilfKSV/sMuROfUhmNu6desKPIPrUB7cb/Pmzee0jQ2GUMRE4gyMIBiEEEeoH1XdLRA5UQzjHbXrNZCLb7hDuvYb6sg80bXFCVm7fKGMf/zXcnDvLjlv2Gi59ObvSkr16j5uyo7N6+SFPz4gu7duPOu6Ae3U4byBcvGNd0hDpwgg/f27d8j7L/9NFs3Im+FUq5YgAy8ZJ537DJGD+/ZIi/ZdJDElVZZ9OkPGP/EbR+Q7PMH85Cc/8dc/+OCDfoZ0rvCd73zHEyjkh4Jv06aNjyt/zTXX+Pc6c8P65Rrcb5CgZn/Cr/3LX/7Sk/PDDz9cIEImYIaAlX/llVd66xuChWxRGIo77rjD53RlBkgbcM8XXnhBFi5c6OXz+9//vlcc6enp3qXSpUsXb4n/9a9/zS8H7p4RI0b4tqQer7zyikyfPj3fXYgiuPvuu727hfKeyzY2GEJR7NgpWD5YJVgjTI8VaqEzkIgzPn/+fG/RxOsiKPUZPHqc9Bl+qXz01guyYv4sqV6zlrTp2tt9V03qN2khY2+7R7auXS0zJr7kLW3+vuTGO+Xlxx6WnLMosZTqNWWUUxB16jeSN578rfeVX/7N/5LRTimsXDRXjhzY5yNPYXm36NBdvlgwW1567GdywhFLg6bNJfdEHsGgDCBIlG2VKpFn7SkJvP76696Ndumll3riw1UCiT///PN+5nbhhRf6cuFioYyUb82aNfLnP//Zky0ypBmiwgHCxg2Ce4bUfyQZgVCD4D5/+ctfvCwim/fdd59XIsuWLfPE/vjjj/uZAr70adOmeWuc56JgyD4FUB7PPfecD6vMdbiAcAex9gMgdyx57mdbVw1ljWKROAKMJcPUFUtFXSYMRP5WPyODGUKHzHUgxBtSa6bJgIsdGcybIR+Mf0aOfOVC+XzWVP9v1wHDJb1eQ3n1sV/I4jkf+s869Bok7Xv2l6SU6mcl8Zp16krjFm1lzpS35LMP3/aWeKPmrWXsN+6RtNp180j8Kxw+uE8mPv9nWbdsof972aen74M1+eyzz3qCPNfx2yHK/v37+wQguExGjhwpq1atkjlz5nh/OHKCBYwL45lnnvHW+Y033ihjxozxfxel4P1MpUMHb8m/88478vnnn3sFwPOCGD9+vL+OF6kCIWdImecie5QRi5p2gqRRCAolccrHwibyynNZ6O3evbu8//77/nvcVFj3kDh1NRjKEjGTOMLNzgPybOIjD2a1R7B1yxfXQfZDhw71gzheSbyqc2XUTK8r+3ZuyyfwIOo1bCrHc455l4Zi744tktC9r9ROry+H9u0p8v78Hmt//y78vHlkdnDvbm9h123QWLZvXJN/LZ/jvgkHCAqLGJyrdQiI9bzzzvOWMgobQOBY2yh0XBPs+MAah/jeeOMNT+6QKModHzdWc1EuN+SI7X+QL+4PwP0gWgUGA7tlWHhHgeFzh7z5NxqLGXeO+rkpP79FdhXI9oQJE/x728FiKGvEROKQDYtDDFzIG2smSBhBi8onD3YWOcLOYNf8lPGGU678x48ddX7ZZF//0MF79PAhn2czIfH0YlxKag23+Jkbso3wlJw8ddL71INnrY4eOShs3EupkZb/WbIjJVw1oUoDZZF7PHyaOwgHKxRgqUJgpQ2dkeGLhsjxc2Nd44PG7cB3uC6wiiFxJUhkhvcQ+NlIVt1ytL0uQPKbYF/wHIwFlASL6tz7u9/9rnf3RQMseGSV8vEsnh1cvMQ3zxoQwEVoC5uGskTUJzYhYXyKLP5gkTCtBQxE3ReO1cL0mWsR+CZNmvj3EEq8+sRzHIGv/2KJc5EMlqy2nf3hncSkFL9DJDE5RXZu3eCt9ZadukuS+7tm7XRp6q47uH+3I+HTyYRzHYllOwuyXsMmktGoqd8/zr32bN/irMxsd+8unsj5nPfHj+d4y7sAimhD+uFHP/qR/M///I/fA30ugHX88ssvez8420pxNSxYsMAfBPr9738vf//73z3RYnnT/8gPssKOFfaEM3NDNvISTaf4XSqQKNewCKluDqx3vmcHiyoOfq/A6kZxcB3GBSSMyyZacH+UD2VAKVC24GI+MwJ87ffee69/bzCUJaK2xLFSEHIGF1N3hFzBIhFW2MUXX+wHLVNaSIVpNSv4QZdLvCHnaLZMefUp+dp//1Zuf+BPsn7VErewmSap1dPk6V/+QDavWSEr5s2Uy279vnTuc77zg6dK01bt5aU/PSzHjp6e8kNiSz+bLgNHXS3f/PEfZeeWjfLvZx+VTauWyZzJb8qIq78hd/7sr15pNG/XTeZ/9I7s31PQdXIq8P9QQIQsJhZ3YbNXLWcl5xb++xRnOG8N1InZFoTGwRn6+qqrrvL7xHFHqOJmcRufNLtYzj//fO+rhrDZUoi8oPivu+46n4Sb/K0Q8v333y/btm3zh3lWrFjh78k1+Kj5PXXle8D3KARcKrhzKE9RFn44g4LPUC74wXH9de3aVT755BOvGPLr7hQJz83bMWQLm4ayRTUnjA9F8wN1h2CFswMAotYXg4mpJRYUBI8lwxSYgcdikW7hOtdAkTAjwIdaHOzduV3Wr3D1yD7i92qzzW/OlAmy0RH6MffZ2mULvFskwVno+3ftkKmvP+MWKd+Rk7knQu6zTbauX+XIeYf3sa9dvsjvJ9+waqns3rrJW/YnnC98zuQ3ZPLLf/NuHI8q+J8TZduG1e7aZfk7UoKgfyBwdlNgDeu2uEihR+HXLl8iqxZ9Wuhr+YJPZfbs2QUOcKGsITusVsiN74MLf/i8IXFkBPJG4bMQOW/evHxCZVsq/cQ6y9KlS73i537cl9998cUX/joIH6OBrYPMBrmGraz4s9Vtx+cTJ07096CcKn/UEeua+wd3VGnb4YpBniFrfPmvvfZaAdnB5963b1//TBY7K8L2WUP8otSSQjBQeDE4y/qgD4QBORS1fS0aUK8EpxTIeH/ieIhickSQmOC+O5XrXSfRwi8EO6LGxXLC+b4rYlwadbNhfet+7mhA+2Olo6BC1yZ0IZ1XcXzVhT2D+99zzz3+0NIjjzzid7FY7CBDWaJSZPYpaRI3VF5A4uxPZ70BAq8oJ5EN8QtLlGwwRAGsbnz7BkN5gcUTNxgMhjiGkbjBYDDEMYzEDQaDIY5hJG4wGAxxDCNxg8FgiGNA4uvEYDAYDHGHKlWqLOTEZkv3vn8UP/IxKlq3bu1jYBBciIMbGuRKwak5vuc6YqcQ/4K4GmVxMKKkTmwCYqLUrF3Xn9AsjbqkVK8h6Q0ay4njx2I6LBREh54D5NsP/z/ZumG1j80SD0C+atWrLzVqpUv24cL7q9fQS2TcXT+WLxfPCxtVsqKAsUOCDE6bhmYYigWcmfjpT3/q46QTZ51xoflPQ0H899tvv91/z/g2lEu8V9XhzWh+wSk2jhyTFYVIbgQYIp8i8S40VgcEzt98zvdkeyEGRUqYnIzxBCIKDrj4Kvn6//xWGjRpJqWBlh17yJ0/fVyate0qxUVKjZo+XVz1GrUkXlC1aoJcdsv35IbvPySJjmAKQ3JqdantyL5aYsU+6sCYgciJVVQS4IQsuXB5MU4h9cJAnCTiyIRm7DKUHzj+fjjBafdpzZo1e9T9/f1IfoS1TSwKgg0RWpTjzZrmipC0aGzC1JI8mWuIlaEhPeM5xkSqI8RadetL3QaZjjwaSt1GTSX3ZK5kHzoohw/sy7fKyeiTVqduXmTCbVudNXngq9+n5efG1Jgn3BOL88De3U4BnnK/re+UQ3Of3adeoyayf892Z5GfkH07t0Zs9Sen1pD6mVk+gFZeuNuCSHADMr1+ps8klH1wv+zeQYCqgkfXyVhEDtFqiW72smenD8Cl15z+fQ1ftz07tsrJwKlF4r7Ucm1AXBmIlkQZ2UcOya6tecHPCAxW1/2e6/g97UFoXcAMh5lOvUaZvq3rZzaX425GcvjAfjlycP9Xz0/y5E2u0tef/K2PQxOKmu75deo28GUmFs3R7DwrEiOjTkYDOebkkHrUSs+Qo05ed+/Y7EMN57ehm7kRiZM2J/ZLpKcyNfgYY4KxwVjhXnzG3xzhhzQZC8R54dQnzyA+enBsQJoQN9+FyzPKcyBX7gspE6grGGJAA3TxTGLM8BxmoQQnI5YRJ02ZTZPqLhz098SbIRaN5gYA1E3T71FOykGcGdopOBPnHjwXS59ykEovCMql5ed7O/kaEx51/L3OmzGOzR9yAjPUvXqc7Vc0OuSMgCmxIEQQNy4TOpdkEXQowYk09gRCFM8xJnoNGy1Dx97kSIZExbVk3J3/68PELpkzXSa9+IR3rzRp1V6uuP0HjnzyEhUTpOrNv/3WEdgmad6hm4z52vdk5ruv+Ow95MsccfVt0q57H3nt8V/5xBGjb7nLEXmGJCWnyqW3fNeRzyEfdOuZX99XIBlzYajbsImMuvFO6dRroBvU2XJgz+4CkQwJb3vR9d+W7oMudERd25HjXvl44ovyyXvj84k4q3UnufjG/5CsNh0lwV2/d8c2V7/HZfHsDz2Bnn/5TdJ/5BWuDep4JTDjnZflk3dfyyfiBk1ayHXf/YmsWTZfstp2kkZZrXxwrxcffVD2O8K+9Nbv+ZR2SUkpcsSR+BcL5sjbz/3Ju0T6X3SF9L1grCPxZu5ZCfKNH/3ek+v0f78kM95+yd+/mbvnuO8+4BZzqnh3y46Na2XnltM5Lpu3d+389e/5PKVg7YpF8uZTv/PuJIj7xnt+4X+HsmvSoq3PkvT2c3/29VP57Ny5s3c3ILekjgvm8CwKkNq4ceP8OHjiiSd8kC0ifpK96He/+50P+EV0RWayEBep5SBFsmD985//zI/kSA5RYrPQdwSVw2JW8BmJN3gOYXgZj5wg/de//pUfzIt48l/72tdk1qxZ+REhGX+/+MUvIgo9Qf0pM/VhPGO0aaRIlNudd97py48rlRfvSXsHLwDI+dZbb/Wzb0ic35K5SXkDUAfcOSgw2iqoKAxnh5ODRe71EO+9dDgy3+dcI8NdA/PhWS3ykyFWCyFBIWu0sbd2XEdjWZDRhQ7leixyosZFG1WvvGDFgtly1FmU5w0dLS3adZWP337Zk9JuRw4EwarbMFO+9ZNH5eDunTL11aedJZwto274ttz0Xz+XJx76rqxdukA2r10h477zY0ccByTFWalDLrtOprz2tGxZu0oO7d0j77/0pLR2BDfkshvk0w8nypY1K7wVe/zo2RM7YPmTj7Pn+RfJxGf+JCdyjspl37jntIvLEfCoG++Q4Vd+zRHiK7LOkdt5zq98+Td/4GYCu+TzTz7ws4VvPvCIJ+TJr/xdDjmSb+lIkbjnoNvAC2SMI+F5096RZZ/NkI69BskV7vfEO58//T1/DUkzIFpe0ye+5FPNZTTKckSUhLXgld0U1z77nYXfpGU7GXntNz2pTnz2UVk+7xNvmV9w9de9kpj88pN+XWDz2tNhYCHsD157Rjr1HiJd+g/1Ck/BDOL67z3oZjd15L0XHpcqCVXlmjvv9+nxnnR9QBuhaFPdLOSD15+RRTPed4r0674MtMeBr+K2Q8K4CpVUIwWKG1IjTo8SL24Q1obUosYChtwgWIh3+PDhnsxIZ0cIX8I48/dbb73loyRCpuqG1BR1BOAimuPTTz/t455zPZY4RIlFS/lREITixeomMTXZkyINTbx69Wr/fLIukTM12AbUC6VAOUi+QZhe8p5efvnlvkzUl2TVzMS5B9b/ZZdd5hNL//znP88PR0070Ma0i7lrosajEDi8zR/5Kv6rD+52DfuIE96H3EXdI7HM6QgEl3CiCBCCjHVBZ6LFsRKYGhL/mYXNYHD9eMIuRx57tm+Wxs3beety+byZsnXd6vzvm7ft7Mlu0Ywpznre4vM27Niy0fu4s1p3kFWLP5PJr/5dmrbpJGO/cbfP+rN2+UKZNel1717Zu2ubfxEFkVjjKxfOcVbqrPz7Q1Cd+p4ftmy4dLZvWuus5w6y+csVMm3CP6Wqu0+9xlmepABWeO/hl8nOzRtl9ZLP/DNXLf5U2rvFz859h3kS73n+KEnPaCQv/ulBmT35TZ98YsnsaVK1Wt5O1K79hst+p6Qm/esJnwRj2/ovpX2P/tK6Sy9ZPGdaIGRuFZn30TtOmTwScOu4mdvJUzLhH390ro76Xuntda4YiLNuw8aeYIjJvm3DGl8OCHTBx1OcQinogsNN8+kH//azoc79CrZHc6dcscAnPP17+WTSaxTEKaHu0rH3IMls0U52bM5Lcbfq80+98iQbUz1Xjv4XX+NnQEriWIXIM1ZuMFRtSYFxQh5USBvDB0Jk3QiCg+B5Lsml+Zd2+OEPf/hVs1bxcdghUkI74xrBWGJc8TvIFjeNXouFT8Jn7qOZiiIB9yPGO0qAcRsOhAYmRC8kTPkhZXzoGHRY8iQEUcJmJtO2bVtp165d/me4aQglTFsHU+wZCsU695rAGiYu8OAX/x/ZDDAi2pRD1wAAAABJRU5ErkJggg== 2x",alt:""}),f.createElement("div",{className:B4},(0,eN.tx)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_vscode")),f.createElement("div",{className:B5},(0,eN.tx)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_vscode_description")),f.createElement(so.$$,{onClick:()=>{t("vscode.install_extension_clicked"),e((0,xZ.RK)({rawInput:"https://marketplace.visualstudio.com/items?itemName=figma.figma-vscode-extension"}))},className:Ul},(0,eN.tx)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_vscode_install"))),f.createElement("div",{className:B1},f.createElement("img",{srcSet:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXIAAADMCAYAAABukyi4AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAACJKSURBVHgB7d0JlBT1nQfwX3fP2XP0DALDNcPgCsixigQDaqLgbox4R0HcNfoMSDa+NW/hbV7iywsmSvYlz10Xd02eZlHjS2IWEjTxCsbsg0g0GmMAFUGOyMBwX3PfPV1bv5qu6qrq7pnuOrrrX/397Gunp4+CDf/69r9/9T8ClEZjY2NNLBa7JxAIXCVJ0hx+iAAAIB92ylncJGfyi83Nzc+anwykekd9ff0t8pt+LN+tIQAA8JImuXP9kD7QQ+ZXNDQ0rJND/DH5bhkBAIDX1MgZfUskEqG2trY3+AFDkMsh/m35xwMEAABet1AO8xo5zH+rlVbkcso98XIKAAAIQi6zfEELcrk3fpBwQRMAQDStQf4v98YJIQ4AIKIaJci5cE4AACCkYPznZAIAACGpQT6HAABASEECAAChIcgBAASHIAcAEByCHABAcAhyAADBIcgBAASHIAcAEByCHABAcAhyAADBIcgBAASHIAcAEByCHABAcAhyAADBIcgBAASHIAcAEByCHABAcAhyAADBIcgBAASHIAcAEByCHABAcAhyAADBIcgBAASHIAcAEByCHABAcEUEYMPcqnKaVl5Cc6vLlJ+VoSBVFQ31DzqiMTrRH6Vj8m1fdz9t7+iVbz0EkCm0r8wE+D8NDQ0SAWSoSj6Z7qiL0LKx1dpJlanjfVHa3tlL64+20HH5BAQwQ/vKHoIcMsYn2L0TauWTrJqc8OrZTgQ6aNC+rEOQQ0a4h3Tv+Jqse0gj4R7UU8da6ZWzHQSFC+3LnhD/JxKJfIcA0lhdfx6tnFBDpcEAOY1P3Ktqw3JvLETvtKN+XojQvuxDjxzS4q+6j1xQJ19wKqNc2C9fsLpv73HqGIwR+B/al3Mw/BDSemL6+JydZGxquEQ5saEwoH05B0EOKfHXXW74ucYnNv/Z4G9oX85CkEOS68+rdGzkgBX8Z/PFL/AntC/nIcjBYHxJkXzhqZby7V754hfXUMFf0L7cgTMFDFZOrKXxpdYn/AYqKik0dpxys0MdUwz+Yrd9MbV9cVuzym/tC6NWQMO9pV9fVE9WlMyaQ5XL7lF+qqSuTup9903q3PgsDZ4+QVb8/Y5DGMXiE3baF4d2xQ1LqOL6JYYAHzx1gjp/8Sz1bH2NrPBL+yrIIK+urqZrrrmGZs6cSfX19cpPfoxvhaztB9+3dEJU3n6PEuJM6u6kWGencl/tlfPJdu7BVZbCfP2xVnrqWAuJBO0rNavtq6jxAqr9xne19qS2sWBlJQXCQ6HOx+XjZ0vE9pVKwSyaxSfRihUraMGCBcoNkvV/tJOyFRozTgvx7lc2UYfcO+KeuPKcfOLxCcgn4qiHH6PT991B2eILUyKcaGhfI7PavtQQjzYdoPZnfmA4TljupVd/6X4qX3St8nyX3AazIUr7Gonvg1w9wZYvX17wPaLh8MnBPedsqSHOPaL2H//A8Bwf76zcEx/75AblROSyS7YnM9cyecgYr2znRWhfmbHavkpmz1HaDn+b47akdhJU3HkIyr1yboflC6/NOsi93r4y5euLnatXr6a33nqLVq1ahZNsBP27su8tsbL5n1F+pvvKrNTJ//Smcl9fP8/GtHApeRHaV+astq9i+dscfwBw+zKHuIqvw7CiKReQFV5tX9nwZY980qRJtH79eqU2CZnhr6VW8FddZvViZia4x7ThZBt5BdpX9iy3L/6WZ/qmZxa0MXqFea19WeG7IF+6dCk9+OCD6CFlKWoxiDO5eKX2xK2G/bQ8zABMB+3LmqiLH/RcH2dWavDMS+3LKl8FOX/V5a+5kD0r9ctM8Emm1jitnmiVHpm4gfZlnVvti4ckqkGebX1c5ZX2ZYdvghwnmT3p6o92KCNabr9Huc89d6snsxdm4KF92eNU++LQVoOb6+c8ppyHI3KJry9eK8+WH2Z4+iLIecwuTjJv4RDnIYfcG+cLXTwpSFRoX97B7Spp0tmf37R8MdUvhA9yvvD06KOPEtij9Gwc6jXxsdSxv1xSafth9hM19PI58w7tyxlOtS8ObfVaC1/k5HHkPOyQbx3yRVEr5RU/zOwUPsg3btyIC08O4JNi0KEg5wkaPBSMTzhlRqfN+ihv15UvaF/OcKp9RQ8eUG4qDm51ZnGV3O4G5OeyvRaTz/blFKGLQ1y35B4T2Mf1RidULx+aZcd1SydCnOVr81y0L+c41b5S4bVW1PAu+/RnKFt+2JxZ2CDnEwx1S+dYnayjxz2j8PVLlBA/61CIs33d/ZRraF/OcqJ9DUftpVtZdTMf7ctpwpZWcJI5y+qsOJV+4azWx79v+Ppr1/aO3G+ai/blLKvtiy+YM75YPlzJRF0R0crStvloX04TskfOvSWemAHO4R6T1fWdeSyvGuK8Ap3VYWCpcP0y1+tgoH05z2r7UkepqEMOh3sNy3Z1xXy0LzcIGeRYXc4dHMjZKpVrknyRidlZFzqd7Z25P8nQvtxhpX11vTo0CoWDnC+ic2jrcYDrR0hle6EzH+3LDUKuR75582ZPr3PREZVow/F+2t4Wpf3dg8rvVUUBmhoO0Q1jS2hupIjGlwayPGYvvXRkB205+THt7ThOHQO9VFVcRtOrxtPNk+bQvFGNNKHc3o4nPDzs5N03ZPWeup+8knFPi2vm2S5le8sHzTm/GOX19iUqK+2LcYCHdR8CXLaLyddhONT1a5TzdZlsS3r5aF9uEK5Gzl97vXyScYA/1dyrhLce/769ParcxpcGaWV9GV0/tjijY26Vw3vNhy8o4W04pvz7e+cOKrcJ5TV039RFdNPES8gqdReWbMbiBmwuWDScV8925vwk83r7EpmV9sV44ayBpgPK7kBca9fX2znAe7a8pvTcs724no/25RbhgtzLX3vXN/cpIT6S430xevhANx3rK5MDffglNJ/cv5WeOLCVRnKsp5XWfPArOtrdqgS6VXzRsnuYJUPNTty2kNzAtcv1R3O/4L+fyyoHDw3Qnn398s9+ammJUW/fUGdj/LgQ1URCNGNaKc28sITKsvy2mI1s25eKS3Z84w8DdSgj98qtXlTPV/tyS4j/E4lEvkOCWLJkCc2dO5e85tVTA7SuKbur39w7/5RSZkl9qYJ74t/96GXKxnvnmqhaLrlcVGNxb8SSEgoWl1Dfzncpnx5rPpeX+qVX25cdHOAvvNxJW7Z1U/PRKHV2ShQdTDzPv585O6iE/Acf9SsBP2VyZt8Ws2W7fQ30K7VwvsVaz5FV+WpfbhHuYuesWbPIa7iHvb7ZWqN4eH9PUhlG9ciezWQF9+C5pm4V1yOtXJhyCq8N/crZDsoHL7YvO37zehc9/dM2Jcwz0do2qAT+fzzeQi1t7kxdL+T25RbhgtyLM+22y42fw9wKft+O9sGkx186ulMul1j76se1c74wagePRHF7Ekcq+7v7aV2z9Z6WXX6ayfnCyx30x3etjZHmQP/h+hY6ftKdGnKhti+3IMgd8MopezPDfn8uube05eQesoNLLHapGyfnCo/nvW/vcconvwQ598S3v99HdvT2SvTcLzpc65kXYvtyi6/37MyVE332Gvr+ruQe+bFuexdiPm6332D5wtLoR5/Kyddg/rrLJ5kfVqLLtx1ygFvtiZtxz/yFl9wpQ6B9OQdB7gGpauQdUXu9KSfx1+DI/Q8kTcZwQkc0Jn/VPevLr7v5wjVuJ3F93W7vfjhoX/b5cvNlcB7PrOOappOzN7mX9NSxVvTCHcS98Za2QXLa23IPf+7F2e0239U9SB/tbqeu+DfOMWNKaPbM1EsCo33ZgyB3wNSKEB3r839j4Vl03HPiscDK0qG7dma9oTL3kDacaqONJ9sR4C7Y/oE7Q+r4oif3zDMZlrhrdwdtfP4I7dqTXJIZO6aUrr5yNN24eByFwyHDc2hf1iHIHcAzNN84l9nwLj9QTzjGa1vwCccz73hmHZ946mQProHyhgJ8QatU7m3xjLz5191M4A6+OJnpMEMrOMxHCvINzx+VQ/xo2udPne5TXrNl2xlau2YGjR2dvIM92lf2EOQOuGpUsTKp53gB9MrN+OtwPoaRQTK3hgpqxz8xfMlmpBDX40Bfs3ZP2jBXoX1lBhc7HfLg1HICyCfukbupdZja+1A5JbMQV3GYP/7EJwT2IcgdMre6CGEOedWbx2+Ej//IWiDv2tOu3MAeBLmDrpevyv/6U1Vp104B8KODh7qV3rVVGzcdI7AHNXKHcYhzmPOCWG+cjSqTfToGJeqMSsO+B8CucXXuLHSlKitLvSpiqtEp2Th4qIvAHgS5S7jUwjeAXBlfFyKKtVFP78jjyAPBEJWWVCo/M8XL3KZipzfOeLw5H4OHJoI1SBoAHxk3LkgH/prB9Hw56wcH+ykcPo8Cgcy+EU5pTN3j7+ryx+YMIkOQAzhsz942ev7Fw3T6TC9xQY0LEpJ6T0o8wj+Vx3VVN4mfD8RLGBLFXx9/i+5Xw3t0v3NvvLsnqr126FABObR7Kdp3hIqKA1RXN5OKS8IkxQYpGu2h4uIKGsmM6SVUG0kd+E70pNEbtwdBDuCgbW+dpB89s58S+ZxIXMkUvgHtMckQxtpdXeYnBX7SnfiHgPn92nPFFCiaQt1du+ngJ3+gKed/VgnzwcGoHOQ0ouuuSb+lH0+7z3bood6UyWECewo+yHnBqt+cHqC/tEVpX5fza1SoKkMBmlAWVCYPZbpXZy7wLkRbT+6hP8eXva0qKqMJ4Rq6uu5CW/t/FqrXfncsEbyagDFk9Z1zfqXye6LfrgV4/L7+verxyPRY0mtS9fLlH8Ulk6ivZze1nDtIY8dltonG5fPL0/bG2ewZVVQRLpJr3dZKLDcsdn6xrEJT0EH+xrkorT3QnXaHHqftly/q8FT+9c1BZcx5Pi+G8nrlvMdnqs0r9nYcV8L9if1b6eszrqNFcqhDZpoO6/ailNQf8b65LqC14NVKJVJSL1wLef3hTF1tSVd6Ue4aAjzxM6AePzg0i7K3N7Ox2+Priui6z41celm2ZAI985PDlC0uqfAHAdhTsOPeeKPkr3/clbMQ1+Op/Pft6qJXTuVnfRbePWjFn54ZcQci3tB51fafK4EOmVMDVZ+rkj6wJdOTZArh+GukdM+TlNQDl2KUuvRCnPEBY909QxziK+6OZPTaG68dJwdyNWVr+V0NqI87oCCDnDdKfqo5/xuv8rcBHm+eS3vbj9OaD3+V1XuePLDVkR2HCkJyR1sXyBJJUtq3qK8gfWddf73T/Hop3ss2X/+UyPgmSRf8meY4l1M4xMtKA5SpB/51qlzvHrn3ruIQnz+vlsC+ggtyOxslu4E3X86lVds3kBVrPnjB1obOhUIfpokLmal72FrIS4nXJCWtVkqRtP/Tevta0idelui5J/fApQxSnFc3XHFXRCmnZBPirCIcov/83ixadtvEYV/HpZS135qhLGULzii4GrmdjZLdwH8X7pXnol7OdW+rGzpzmYVLMnc2XkaQnpa78d+Mv1PS72nr4AEy9u7NgRww/U7x65nxD4yAOrQx/l61P15ZUUrX3fIZOtcyQMHiChozupKqqsqVyUQzppdmHd6p3CEHOa85zjM+m5q66OChHrl8UqIE/afnjaLZM1ETd1rBBbndjZLdwLXyXAT5lpMfkx1cXkGQZ0JXxkgTxqnKLIaAVkerpAt0KU3Amy6w6kOcD1ZRUUZf/Ef3/w2VDSS49i0HOriv4IKcR454zf6u3Pyd9trckNmJDZ19TzL3ws2TfiQtsBsnVyq3lCWPVCGeOITh/sFDnfRJU4fhsaRDSgFDrRz8peCCPB+jVEaSq7+TlzZ09qvkXrjxoqP+hZfOPY9uv7WR7NqwqUkO8k4yfBMw/IUoUVtHkPtSwQV5VVHAc2HOf6fkx+wNyaoqLiPIA2PnW7sjUWCYMosDf2w8oAPaXyJg+OBQn+/q6qOf/fxNKi4pp0hNPQWDRVRUZL2tDAxEqau7h/r7rY++On9yWK6dY/SKHQUX5LxR8vY2by3yw38nswsj42lvR3Ybz+pNLHf+xLiwejzB8MwXIrXH1N6yS30IdV5ozPQpIhlmIRF1dvbKQf4uhSvOo4bGUioqLqeysszGiqczMCDR4cNnqLfP+jc+rqmv+97spA2ZITMFF+QLRxV7Lsj572TG0+NfPLKDrHJjNiZmeGbIVM7QPWR40bvvnaFTp3uNb4u/cNltjXK4JXrKu3a30pY3TpA2pEVKlGqa5Bq5ZBrqon14aK/TB7uziouLqKGhjvbtz35mp0rZlHnTEVp+92SC7BVckF83plgZR+6V8gpvKnHlqOR/hnmjGmmC3Ku2MlxwQnmN4+ukuHFMf0ozGsXw+9ADykVK+aYtnqUukCXfFl05zhDkHPhb3jhuvgaqHGtoqCFpF0j149HVCUYB3X03cJiXlZbIvXLro8K2bDuDILeo4CYEcT169RTv1I//fUb6mXBrL/oCWcHrozjNjWP6kXlMePKsTCnpteafpOtBG48tGUI86Zi6ENdPHgqQfny5e0Ihe3HS5cERZaIoyCn6vLfmyvr8h/mDF4Rpajj9PwH3ytdedCtl4ytTFzleAnHjmL4VSA5wSS1uaCFr7IETJcaAD1/6CCTKL/pZoPH3xWK6UoqUeIk2q5Rfg1ErvlSwqx/eW18qlzUCyuJZuZ7pyeWUTFc/vGniHJpeNY5Wbf/fYcssXPrg0Ofwd4obx/Q7SdeUDCscBnRDA809cH22avdTXjE1Br2krauo9bxjUvJIlZTDEsFXCnoZ2+vHlii3V0/107ZzUTomB3qni7XzuZEiZS3ybGdxTq8eR5sXrqaXju6krSf20NGeVm3dk0vlkF1UN4PmndeorCU+HA7mTGRzTEgtcaFT2xkieTVD0zt4yKB+nfKkV+jCPKCbaGTcfSjR61eD3lgfR5z7EXYIokSgex33zvlm1dPzv0TgLv3UeO33tBc/peTfJUp7QTKx9Lhplqak/kmSYblc/d9J0so2kqt1csgPBDmAgwK63YBMQ7h1gT70hJR81XKE/vLQszHJ9H79ErXx52KGlbTQD/c7BDmAg8zL1SbKHNp/tNcFAgHDBVDjG0zH1Z7Sl1fioa47tv6/8RcaSjLokfsTghzAQcOPITft3RlLit30vWfJuBY5S/S6yTi+PL7QeaLDrv8AIfAhBLms7+3d1P27v1Dv23so1t417GuLJo2huo3fomyPye8rmTWZwtfMo9IFM8iK6Nn3qO/EFho48x5J0Q5yQ6h8AgXDE6hk3NXybRGBdYaLi9qFT/1z2m/GAE9VJ9dfBDVdzBy6myK40zwG/lPQQc5he+7hn1H/7kNZvCtg6ZjRI2eo95091P70a9qHQdGkzNZqHmzfS127HqEBOcjdFus+RnRW/v+j+SUl0KsuXktFo+cRZCapjGIum5B59IoxWNOPWCFdLVw/uUdKOl5SD9x04RP8p2A3X+765TY6cce/ZRnizhwzeuQ0Hb3iX6jzl3+gkfTLgdr2xxU5CXEzDvW2t1dQz94nCDJkCOIAmXvhiV61qYYi6UI3TdZqIR1/iZbR8TuSaQy5WhMfmqSUvFsR+EdBBjn3ms987UfkJCvHbHn4J8OGfqznGHXsXEPSgDtllEx173uS+k9sJchEotctSZJu6J/++UA8iOOhrNW/dXt3pjgsPxpTZ2cqQR3TAtt4QZNI669rzxNhLXL/KsggP/O1/yGnWTlmrL2bWh76adrnuSfuFZ38gRLN7weKCIY6wYkxh8YRLMZAlfQXMCVTj9mUuRJRih43aSNZlNn5MUk3VV8f4KT7HWHuRwUX5F2btimlDa8ck+vmffLNjHvASr3aI/hbAdfNYWRagJofM5RZzL3xRO95pPVQ9OPUdZcztfupZnIavhCA7xRckHf/9i/kNLvH7P5tcv27/8QW8pr+4977O3mOpBZPhn7RLymrprtkWtxKDXFtlImU6pJkqhJKih5+/INADfGh52OJ9yPJfangRq043Rt34pi9KXrkXuqNq6LtewmGp/Z/Y9LQLM+h+xIZR7EketRkGk443HHNpRXDnynpj8kfFjHd+uZSfIan5O46tpA3BRfkI40Tz8cxuVZuNtjjvSDP90VXIUhqfzxRMkkKcVMnnUyhbCqGpPgjJMNP7TgkmZ7XHWbokwU1cp/ChKAsBavDlAvB4irK7eK6IwvIfycYnhbC+vq1OcAlXVRL+vp1Ylnan204QGPHlGvHPXGym9T9NyXtwyL+gaGFNOn+vMQfIBk+NcCPCi7IS2Y2KpNzrMp0Eo9dRdUXUrTNW6WMourpBCMz9Ih1SW1YnZDS9ayH7r//4TlDnVvdDi6gHSxeLw8kPhwSr0scL2a46srruyDM/ajgLnaWWZweryq/JjezHIs9OD2+tP5mguEZyxqSNrJE0ge6lDzu2/yYevEz/g6tzq4fN648EjPVxvUjWiTdOJkUHxrgHwUX5BVLr5TLIxVkBU+tr5Tfnwu8zkkoPIG8gv8uxedhqv6I4gGaGIGiPkaGcE45iUcy3SdTqJtLNKSre+uGM+prNkPvj5FEiXHlXlURDhFYU3BBzjXu2m9/kawYZfF9VlXMWUteUXr+F5W1V2B4+in0Wo2aEsGu9c7JHOaJ0ktiRmhMu2Cp79XrSymJ1yf+7Fj8ffpSTuIzxLtJPnZMKYE1BTmzs3LJlRRZfVtW76mRX5+rsoqKe8Dh6fdRvoWnf4XKp9xJMDJ9L9owPV7fI47p1kwx9biJUpRc4g/rA1sL81i8fBJLlFvUK58xST/23Ps98sbJuRlI4EcFO2qlZtWtVCxfuGxd98Kw48C5DDP60S/nPMRV5dO+QiH5ImP3R4/QYI7HlvMolXL5gwQhngVdUqp9cG03H/1oFe15MpRM1MeTL4rqZmpKpqPoSy2S6bjm5PZwks+eWU1gTUEPP6yQe+a8NjhPke/85Tbq3304vnb4aKUezuFdqdTU89tT4Ho533iKfF/zi8rEHLfGdHN48+iUotGXKgGOIYfZmT2rlj7YdS7+WyJ8JV2NQ4tSXejqQ1oyvFf3HnX4oVqqMYS9brCqPti15+P3A73klsFB6wNmuaxy9ZW5GRHmRwU/jpwDu2jJGCXUva60/iblBt51yw0NcpCfTRHCKXrg2kt0Ya4OKdT34A0ll1jiMX5dTH+coWOpW8gN3SfDiJZArEm+V0ZuGIhGySqEuD2YEATgoMvmj6U1D1xCv375kDKJR08NZ31v2RCypCuY6EavsN7eQTrX0qL7EAgM1cX1L4ofMKb/VX2NJPfE5RAPhnqIgzwYdPbU59641R4598ZvWFxHYB2CHMBhl8thzjcnnT7TTTd/4RtkRyAQpLLysXKYF1E4XEtO6u3rI6u++k/nU0UYUWQH/tcDEMCY0WGaOnUmNTcfJSuCwRCVlFZSSUmlHObV8u/FyuOhUAk5oT3FekGZuOO2ifJFTlyHsQtB7lHtf1wx7MJZgaIqZT2WUGQ6ldZdjX01C8A1n/ssvfrabnIKh3lxcTk5oaMj+4Xjlt/VQDcuHkdgH4LcozjER1rKdlC+8V6evZ88p0zWiVz+NAXLMWnHrxbM/xt67fX9ZBdfDK2qHk/lDpVXurp7aGAg8wuds2dU0fK7J9MUjBt3DILcJzj0W/5vMVXOWYuRLT71N+eX099ePJn27mshO7gXXh2ZqNTMnTD3ojIKSGE6eGj48goH+KKrxmCEigsQ5D7De2uG5F45Si3+dMsNF9B/P/lXsqq4uIwqKsaQU2oiIbrrjlr5NoZOne6Tw7xHvnXR6dNDFz/HjCmlutGl9OlLa3BB00X4X9aHOt5fQ7V/t5nAf6ZdUE2XXHy+HJYD5AVXX5koj/AwQr7Nn1dDkFsFudaK33GZhTdvBn+67aYqKivN/55tl1xcRnMvxkJXXoAg9ynseO9fNZGg3BO2thSzc3+HkKE3DvmFIPepaPvHBP51+fz89obvvL2aaiOID6/AvwSAoG69sYqmTC6mXOM/d3wdNoHwEgS5B6RaXTGIVQchA3curaYZ03LXM+cQR13ce4QL8vb2dvIa3tDZjlQbOvPmy3aEMDHIEi+2r+GUlQXkMkeV6/Vqron/88pahLhHIcgd4MaGznY3X/biRslHjhwhrxMtyFUc5LfJveXaiPMlDy7f3P/lGs+XU0RoX24RLsh373ZurQmnuLGhM2/zZnXzZa9ulNzc3Exe58X2lalL5N7yirsjjvXOOcBX3BVRbl4Y7jgSEdqXW4QLci/+Y3GNu2b1rWRFug2deWceq5svl0+7z5MbJYsQkqKHwdDQxDB97aujLPfQ9QGej4upVon8IWyXcDM7vfqPVbX8Whps76a2dc9n/J6RNnRWN1/u3vsEZYo3SvbqWit79uwhr/NLGHCgcw+db8dPDCozQfnW2jZILa2D1Ns3tPtEbU1QqX+PH1eklE5mTC8Vovedigjtyy3Kv1hDQ4N3d2Q1qa6upg8//JC8qmvTNsc3dObJPT37nhh282URNkq+4oorPF/H9Hr7gvREaF9uEa5Hzhej3nnnHVqwYAF5UboNnTm8S2Y2WNrQmXvY3DvnJWv1my+LtFEy93RFudjp5fYFqYnSvtwi5KJZb7/9tqdPNDc2dOaad2lY3M2Xn3nmGRKF19sXJBOpfblByAlB/I8m6jCxQsXhKAq0L/GI1L7cIGSQ80n29NNPE4hh06ZNQn3tRfsSi2jtyw3CXexU8UWpt956S/kJ3ibiRSi0L3EU8kVOlbBrraDXJIZ169YJeZKhfYlB1PblNGF75KrNmzfTzJkzCbyHTzDuLYkM7cu7/NC+nCL86ocrV67EhSkP4n+TZcuWkejQvrzJL+3LKcr83Ugk8h0SFP+Dnj59mj7/+c8TeMf9999PO3bsINGhfXmTX9qXU4QPcqZOq77ssssI8o/rls899xz5BdqXt/itfTnBF0HOeDYew8mWX3ySPfbYY+Q3aF/e4Nf2ZZdvgpzxyca9p4ULF1JpKRbAzyUuQXzzm9/09Qw7tK/8KYT2ZYfwo1ZSmTRpEm3cuFH5Ce7jcOOLgoUyDAztK7cKrX1Z4cs9O9VhSfw1DNzDvST+33jx4sUFdZKhfeVGobYvK3zZI9fjXtOqVato6dKlBM5QJ8tgTRK0LzegfWXP90Gu4hOOV7Rbvnw5zZo1iyB7vDAR14lxgiVD+7IP7cu6gglyPfWk4xl7fNJNnDiR6uvrCYbwSdTW1qbsuMJbn3GN8vXXX8fJlSG0r+GhfTmvIIMcAMBPfHmxEwCgkCDIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHAIcgAAwSHIAQAEhyAHABAcghwAQHBqkDcRAAAISQ3y9wkAAISkBHkwGPw9AQCAkNQe+bPyrZUAAEAogUCgSQnypqamVrlX/iUCAAChyEH+UEj9pbW19eNIJFIr311AAAAggocOHTr0WEj/SFtb22tymAfkuwsJAAC87L8OHz78AN8JmZ+Rw/z3tbW1h+S7c+RbDQEAgJdwKfwfuCeuPhAY7tWNjY33SJJ0M9+Vf84hAADIhya5Fr5Tvr0h33+Wr2vqn/x/ww4N78LUCQYAAAAASUVORK5CYII= 2x",alt:""}),f.createElement("div",{className:B4},(0,eN.tx)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging")),f.createElement("div",{className:B5},(0,eN.tx)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging_description")),f.createElement(Uk,null))))}function Uk({}){let e=(0,_.wA)(),t="install-messaging-dropdown",n=(0,nT.U)(),a=f.useRef(null),l=(null==n?void 0:n.type)===t,r=[{displayText:(0,eN.t)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging_install.figma_for_slack"),callback:()=>{e((0,xZ.RK)({rawInput:"https://figma.slack.com/apps/A01N2QYSA81-figma-and-figjam?tab=more_info"}))}},{displayText:(0,eN.t)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging_install.figma_for_teams"),callback:()=>{e((0,xZ.RK)({rawInput:"https://appsource.microsoft.com/en-us/product/office/WA200004521?exp=ubp8"}))}}];return f.createElement(f.Fragment,null,f.createElement("div",{ref:a},f.createElement(so.$$,{onClick:()=>{l?e(nI.oB()):e(nI.j7({type:t}))},className:Ul},(0,eN.tx)("dev_handoff.configuration_wizard.install_extensions_step.figma_for_messaging_install"),f.createElement(a2.B,{svg:UN.A,className:"configuration_wizard--chevronDown--P7ECL"}))),l&&a.current&&f.createElement(iV.j,{items:r,onSelectItem:t=>{t.callback&&t.callback("",null,e)},dispatch:e,parentRect:a.current.getBoundingClientRect(),showPoint:!1,lean:"right"}))}var UI=n(94823);function UA(){let e=(0,_.wA)(),t=(0,ga.am)(),n=[{theme:"system",title:(0,eN.t)("fullscreen_actions.theme.system_theme"),checked:"system"===t,onSelect:()=>{e(UI.Qh({theme:"system",userInitiated:!0}))},ModeSvg:UP},{theme:"light",title:(0,eN.t)("fullscreen_actions.theme.light"),checked:"light"===t,onSelect:()=>{e(UI.Qh({theme:"light",userInitiated:!0}))},ModeSvg:UO},{theme:"dark",title:(0,eN.t)("fullscreen_actions.theme.dark"),checked:"dark"===t,onSelect:()=>{e(UI.Qh({theme:"dark",userInitiated:!0}))},ModeSvg:UL}];return f.createElement("div",{className:BX},f.createElement("h1",{className:B7},(0,eN.tx)("dev_handoff.configuration_wizard.theme_step.title")),f.createElement("h2",{className:B8},(0,eN.tx)("dev_handoff.configuration_wizard.theme_step.description")),f.createElement(BU.z,{value:String(t),onChange:t=>e(UI.Qh({theme:t,userInitiated:!0})),className:BQ},n.map(({theme:e,title:t,checked:n,onSelect:a,ModeSvg:l})=>f.createElement("div",{tabIndex:0,role:"radio","aria-checked":n,key:e,onPointerDown:a,onKeyDown:e=>{"Enter"===e.key&&a()},className:nb()("configuration_wizard--modeOptionCard--0rFq6 configuration_wizard--preferenceOption--OkUN2",n&&B0)},f.createElement("div",{className:"configuration_wizard--modeImage--TZBtz"},f.createElement(l,null)),f.createElement("div",{className:B4},t)))))}function UO(){return f.createElement("svg",{width:"120",height:"80",viewBox:"0 0 120 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{id:"Design"},f.createElement("rect",{width:"120",height:"80",fill:"#F5F5F5"}),f.createElement("rect",{id:"Rectangle 47",width:"120",height:"80",fill:"#E5E5E5"}),f.createElement("g",{id:"Group 14125"},f.createElement("g",{id:"Group 14124"},f.createElement("rect",{id:"Rectangle 52",x:"48.3502",y:"24.3512",width:"24.9782",height:"39.8305",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),f.createElement("ellipse",{id:"Ellipse 278",cx:"53.7509",cy:"30.7661",rx:"3.37544",ry:"3.37547",fill:"black",fillOpacity:"0.3"}),f.createElement("rect",{id:"Rectangle 53",x:"59.489",y:"29.414",width:"11.4765",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),f.createElement("rect",{id:"Rectangle 59",x:"50.7129",y:"56.7539",width:"20.2526",height:"4.72565",rx:"0.506318",fill:"#0D99FF"}),f.createElement("rect",{id:"Rectangle 55",x:"50.7129",y:"37.8555",width:"18.2274",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),f.createElement("rect",{id:"Rectangle 57",x:"50.7131",y:"42.5762",width:"14.8519",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),f.createElement("rect",{id:"Rectangle 60",x:"50.7129",y:"47.3047",width:"17.2147",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"})),f.createElement("rect",{id:"Rectangle 2154",x:"47.3375",y:"23.3375",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),f.createElement("rect",{id:"Rectangle 2155",x:"72.3158",y:"23.3378",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),f.createElement("rect",{id:"Rectangle 2156",x:"47.3375",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),f.createElement("rect",{id:"Rectangle 2157",x:"72.3158",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"})),f.createElement("rect",{id:"Rectangle 50",width:"26.0423",height:"80",fill:"white"}),f.createElement("rect",{id:"Rectangle 11539",x:"3",y:"11",width:"18",height:"2",rx:"1",fill:"#EEEEEE"}),f.createElement("rect",{id:"Rectangle 11548",x:"3",y:"26",width:"18",height:"2",rx:"1",fill:"#EEEEEE"}),f.createElement("rect",{id:"Rectangle 11547",x:"3",y:"21",width:"14",height:"2",rx:"1",fill:"#EEEEEE"}),f.createElement("rect",{id:"Rectangle 11549",x:"3",y:"31",width:"15",height:"2",rx:"1",fill:"#EEEEEE"}),f.createElement("rect",{id:"Rectangle 11550",x:"3",y:"36",width:"14",height:"2",rx:"1",fill:"#EEEEEE"}),f.createElement("rect",{id:"Rectangle 11546",x:"3",y:"16",width:"19",height:"2",rx:"1",fill:"#EEEEEE"}),f.createElement("rect",{id:"Rectangle 51",x:"92",width:"28",height:"80",fill:"white"}),f.createElement("rect",{id:"Rectangle 11534",x:"96",y:"12",width:"6",height:"2",rx:"1",fill:"#CE7012"}),f.createElement("rect",{id:"Rectangle 11553",x:"96",y:"17",width:"14",height:"2",rx:"1",fill:"#8638E5"}),f.createElement("rect",{id:"Rectangle 11554",x:"104",y:"22",width:"10",height:"2",rx:"1",fill:"#EA10AC"}),f.createElement("rect",{id:"Rectangle 11536",x:"96",y:"22",width:"6",height:"2",rx:"1",fill:"#8638E5"}),f.createElement("rect",{id:"Rectangle 11537",x:"96",y:"27",width:"21",height:"2",rx:"1",fill:"#007BE5"}),f.createElement("rect",{id:"Rectangle 11552",x:"103",y:"32",width:"13",height:"2",rx:"1",fill:"#009951"}),f.createElement("rect",{id:"Rectangle 11538",x:"96",y:"32",width:"5",height:"2",rx:"1",fill:"#CE7012"}),f.createElement("rect",{id:"Rectangle 49",width:"120",height:"8",fill:"#1E1E1E"}),f.createElement("rect",{id:"Rectangle 48",x:"8",width:"8",height:"8",fill:"#14AE5C"})))}function UL(){return f.createElement("svg",{width:"120",height:"80",viewBox:"0 0 120 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{id:"Design"},f.createElement("rect",{width:"120",height:"80",fill:"#383838"}),f.createElement("rect",{id:"Rectangle 47",width:"120",height:"80",fill:"black"}),f.createElement("g",{id:"Group 14125"},f.createElement("g",{id:"Group 14124"},f.createElement("rect",{id:"Rectangle 52",x:"48.35",y:"24.3512",width:"24.9782",height:"39.8305",fill:"#3E3E3E",stroke:"#0C8CE9",strokeWidth:"0.67509"}),f.createElement("ellipse",{id:"Ellipse 278",cx:"53.7507",cy:"30.7661",rx:"3.37544",ry:"3.37547",fill:"#B2B2B2"}),f.createElement("rect",{id:"Rectangle 53",x:"59.4888",y:"29.414",width:"11.4765",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),f.createElement("rect",{id:"Rectangle 59",x:"50.7126",y:"56.7539",width:"20.2526",height:"4.72565",rx:"0.506318",fill:"#0C8CE9"}),f.createElement("rect",{id:"Rectangle 55",x:"50.7126",y:"37.8555",width:"18.2274",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),f.createElement("rect",{id:"Rectangle 57",x:"50.7129",y:"42.5762",width:"14.8519",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),f.createElement("rect",{id:"Rectangle 60",x:"50.7126",y:"47.3047",width:"17.2147",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"})),f.createElement("rect",{id:"Rectangle 2154",x:"47.3375",y:"23.3375",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),f.createElement("rect",{id:"Rectangle 2155",x:"72.3158",y:"23.3378",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),f.createElement("rect",{id:"Rectangle 2156",x:"47.3375",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),f.createElement("rect",{id:"Rectangle 2157",x:"72.3158",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"})),f.createElement("rect",{id:"Rectangle 50",width:"26.0423",height:"80",fill:"#1E1E1E"}),f.createElement("rect",{id:"Rectangle 11539",x:"3",y:"11",width:"18",height:"2",rx:"1",fill:"#565656"}),f.createElement("rect",{id:"Rectangle 11548",x:"3",y:"26",width:"18",height:"2",rx:"1",fill:"#565656"}),f.createElement("rect",{id:"Rectangle 11547",x:"3",y:"21",width:"14",height:"2",rx:"1",fill:"#565656"}),f.createElement("rect",{id:"Rectangle 11549",x:"3",y:"31",width:"15",height:"2",rx:"1",fill:"#565656"}),f.createElement("rect",{id:"Rectangle 11550",x:"3",y:"36",width:"14",height:"2",rx:"1",fill:"#565656"}),f.createElement("rect",{id:"Rectangle 11546",x:"3",y:"16",width:"19",height:"2",rx:"1",fill:"#565656"}),f.createElement("rect",{id:"Rectangle 51",x:"92",width:"28",height:"80",fill:"#1E1E1E"}),f.createElement("rect",{id:"Rectangle 49",width:"120",height:"8",fill:"#1E1E1E"}),f.createElement("rect",{id:"Rectangle 48",x:"8",width:"8",height:"8",fill:"#198F51"}),f.createElement("rect",{id:"Rectangle 11534",x:"96",y:"12",width:"6",height:"2",rx:"1",fill:"#FCB34A"}),f.createElement("rect",{id:"Rectangle 11553",x:"96",y:"17",width:"14",height:"2",rx:"1",fill:"#D1A8FF"}),f.createElement("rect",{id:"Rectangle 11554",x:"104",y:"22",width:"10",height:"2",rx:"1",fill:"#FC9CE0"}),f.createElement("rect",{id:"Rectangle 11536",x:"96",y:"22",width:"6",height:"2",rx:"1",fill:"#D1A8FF"}),f.createElement("rect",{id:"Rectangle 11537",x:"96",y:"27",width:"21",height:"2",rx:"1",fill:"#7CC4F8"}),f.createElement("rect",{id:"Rectangle 11552",x:"103",y:"32",width:"13",height:"2",rx:"1",fill:"#79D297"}),f.createElement("rect",{id:"Rectangle 11538",x:"96",y:"32",width:"5",height:"2",rx:"1",fill:"#FCB34A"})))}function UP(){return f.createElement("svg",{width:"120",height:"80",viewBox:"0 0 120 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("rect",{width:"120",height:"80",fill:"black"}),f.createElement("rect",{width:"120",height:"80",fill:"black"}),f.createElement("rect",{x:"48.35",y:"24.3512",width:"24.9782",height:"39.8305",fill:"#3E3E3E",stroke:"#0C8CE9",strokeWidth:"0.67509"}),f.createElement("ellipse",{cx:"53.7507",cy:"30.7661",rx:"3.37544",ry:"3.37547",fill:"#B2B2B2"}),f.createElement("rect",{x:"59.4888",y:"29.414",width:"11.4765",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),f.createElement("rect",{x:"50.7126",y:"56.7539",width:"20.2526",height:"4.72565",rx:"0.506318",fill:"#0C8CE9"}),f.createElement("rect",{x:"50.7126",y:"37.8555",width:"18.2274",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),f.createElement("rect",{x:"50.7129",y:"42.5762",width:"14.8519",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),f.createElement("rect",{x:"50.7126",y:"47.3047",width:"17.2147",height:"2.70037",rx:"0.506318",fill:"#8B8B8B"}),f.createElement("rect",{x:"47.3375",y:"23.3375",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),f.createElement("rect",{x:"72.3158",y:"23.3378",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),f.createElement("rect",{x:"47.3375",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),f.createElement("rect",{x:"72.3158",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0C8CE9",strokeWidth:"0.67509"}),f.createElement("rect",{width:"26.0423",height:"80",fill:"#1E1E1E"}),f.createElement("rect",{x:"3",y:"11",width:"18",height:"2",rx:"1",fill:"#565656"}),f.createElement("rect",{x:"3",y:"26",width:"18",height:"2",rx:"1",fill:"#565656"}),f.createElement("rect",{x:"3",y:"21",width:"14",height:"2",rx:"1",fill:"#565656"}),f.createElement("rect",{x:"3",y:"31",width:"15",height:"2",rx:"1",fill:"#565656"}),f.createElement("rect",{x:"3",y:"36",width:"14",height:"2",rx:"1",fill:"#565656"}),f.createElement("rect",{x:"3",y:"16",width:"19",height:"2",rx:"1",fill:"#565656"}),f.createElement("rect",{x:"92",width:"28",height:"80",fill:"#1E1E1E"}),f.createElement("rect",{width:"120",height:"8",fill:"#1E1E1E"}),f.createElement("rect",{x:"8",width:"8",height:"8",fill:"#198F51"}),f.createElement("rect",{x:"96",y:"12",width:"6",height:"2",rx:"1",fill:"#FCB34A"}),f.createElement("rect",{x:"96",y:"42",width:"6",height:"2",rx:"1",fill:"#FCB34A"}),f.createElement("rect",{x:"96",y:"17",width:"14",height:"2",rx:"1",fill:"#D1A8FF"}),f.createElement("rect",{x:"104",y:"42",width:"13",height:"2",rx:"1",fill:"#009951"}),f.createElement("rect",{x:"104",y:"22",width:"10",height:"2",rx:"1",fill:"#FC9CE0"}),f.createElement("rect",{x:"96",y:"37",width:"16",height:"2",rx:"1",fill:"#FC9CE0"}),f.createElement("rect",{x:"96",y:"22",width:"6",height:"2",rx:"1",fill:"#D1A8FF"}),f.createElement("rect",{x:"96",y:"27",width:"21",height:"2",rx:"1",fill:"#7CC4F8"}),f.createElement("rect",{x:"103",y:"32",width:"13",height:"2",rx:"1",fill:"#79D297"}),f.createElement("rect",{x:"96",y:"32",width:"5",height:"2",rx:"1",fill:"#FCB34A"}),f.createElement("mask",{id:"mask0_3979_274036",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"8",width:"120",height:"72"},f.createElement("path",{d:"M120 8V80H0L120 8Z",fill:"#C4C4C4"})),f.createElement("g",{mask:"url(#mask0_3979_274036)"},f.createElement("rect",{width:"120",height:"80",fill:"#F5F5F5"}),f.createElement("rect",{width:"120",height:"80",fill:"#E5E5E5"}),f.createElement("rect",{x:"48.3502",y:"24.3512",width:"24.9782",height:"39.8305",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),f.createElement("ellipse",{cx:"53.7509",cy:"30.7661",rx:"3.37544",ry:"3.37547",fill:"black",fillOpacity:"0.3"}),f.createElement("rect",{x:"59.489",y:"29.414",width:"11.4765",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),f.createElement("rect",{x:"50.7129",y:"56.7539",width:"20.2526",height:"4.72565",rx:"0.506318",fill:"#0D99FF"}),f.createElement("rect",{x:"50.7129",y:"37.8555",width:"18.2274",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),f.createElement("rect",{x:"50.7131",y:"42.5762",width:"14.8519",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),f.createElement("rect",{x:"50.7129",y:"47.3047",width:"17.2147",height:"2.70037",rx:"0.506318",fill:"#D9D9D9"}),f.createElement("rect",{x:"47.3375",y:"23.3375",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),f.createElement("rect",{x:"72.3158",y:"23.3378",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),f.createElement("rect",{x:"47.3375",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),f.createElement("rect",{x:"72.3158",y:"63.1696",width:"2.02526",height:"2.02528",fill:"white",stroke:"#0D99FF",strokeWidth:"0.67509"}),f.createElement("rect",{width:"26.0423",height:"80",fill:"white"}),f.createElement("rect",{x:"3",y:"11",width:"18",height:"2",rx:"1",fill:"#EEEEEE"}),f.createElement("rect",{x:"3",y:"26",width:"18",height:"2",rx:"1",fill:"#EEEEEE"}),f.createElement("rect",{x:"3",y:"21",width:"14",height:"2",rx:"1",fill:"#EEEEEE"}),f.createElement("rect",{x:"3",y:"31",width:"15",height:"2",rx:"1",fill:"#EEEEEE"}),f.createElement("rect",{x:"3",y:"36",width:"14",height:"2",rx:"1",fill:"#EEEEEE"}),f.createElement("rect",{x:"3",y:"16",width:"19",height:"2",rx:"1",fill:"#EEEEEE"}),f.createElement("rect",{x:"92",width:"28",height:"80",fill:"white"}),f.createElement("rect",{x:"96",y:"12",width:"6",height:"2",rx:"1",fill:"#CE7012"}),f.createElement("rect",{x:"96",y:"17",width:"14",height:"2",rx:"1",fill:"#8638E5"}),f.createElement("rect",{x:"104",y:"22",width:"10",height:"2",rx:"1",fill:"#EA10AC"}),f.createElement("rect",{x:"96",y:"22",width:"6",height:"2",rx:"1",fill:"#8638E5"}),f.createElement("rect",{x:"96",y:"27",width:"21",height:"2",rx:"1",fill:"#007BE5"}),f.createElement("rect",{x:"103",y:"32",width:"13",height:"2",rx:"1",fill:"#009951"}),f.createElement("rect",{x:"96",y:"32",width:"5",height:"2",rx:"1",fill:"#CE7012"})))}function UD(){var e,t;let n=(0,b1.J)(),a=(0,af.tS)()??"",l=(0,eW.Rs)(eJ.oBY,{key:a}),r=(0,bV.M)();return n&&(null==(t=null==(e=null==l?void 0:l.data)?void 0:e.file)?void 0:t.hasPermission)&&r?f.createElement("h2",{className:"configuration_wizard--gracePeriodWelcome--16eIy text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,eN.tx)("dev_handoff.configuration_wizard.welcome_step.description_grace_period",{numDays:r.totalGraceDays})):f.createElement(f.Fragment,null,f.createElement("h1",{className:B7},(0,eN.tx)("dev_handoff.configuration_wizard.welcome_step.title")),f.createElement("h2",{className:B8},(0,eN.tx)("dev_handoff.configuration_wizard.welcome_step.description")))}function UR(){return f.createElement("div",{className:BX},f.createElement(UD,null),f.createElement("div",{className:"configuration_wizard--welcomeVideo--PNKpG"},f.createElement(gN.GV,{src:"https://static.figma.com/uploads/ea250827f5a3454fccafb18ae2f37229cd406810",width:444,height:278})),f.createElement("div",{className:BZ}))}var UM=(e=>(e[e.WELCOME=0]="WELCOME",e[e.CODE_LANGUAGE_N_UNIT=1]="CODE_LANGUAGE_N_UNIT",e[e.THEME=2]="THEME",e[e.INSPECT_PLUGINS=3]="INSPECT_PLUGINS",e[e.INSTALL_INTEGRATIONS=4]="INSTALL_INTEGRATIONS",e))(UM||{});let UF={0:"welcome_step",1:"code_language_step",2:"theme_step",3:"inspect_plugins_step",4:"install_extensions_step"},UB=(0,y.sL)()?[1,2]:[1,2,3,4];function UU(){let e=(0,S.md)(bG),[t,n]=b3(),a=(0,_.wA)(),l=(0,af.tS)()??"",r=(0,eW.Rs)(eJ.oBY,{key:l}),i=(0,b1.J)(),{isShowing:o,uniqueId:s,show:c,complete:d}=(0,n7.e)({overlay:an.tb3,priority:n8.N.HIGH_PRIORITY_MODAL},[e,r]);return(0,np.h)(()=>{i?c({canShow:(e,t)=>{var n;return!e&&(null==(n=null==t?void 0:t.file)?void 0:n.hasPermission)!==void 0}}):c({canShow:e=>!e})}),(0,sD.E)(s,"Reset Onboarding",()=>{a(j.b({[bH]:!1})),c()}),(0,f.useEffect)(()=>{o&&n(!0)},[o,n]),f.createElement(si.M,{isShowing:o,testId:"dev_handoff_config_wizard"},f.createElement(Y.fu,{name:"Dev Mode Configuration Wizard"},f.createElement(cK.Nb,{hide:d,size:"fitContent",disableClickOutsideToHide:!0,disableKeyboardEventPropagation:!0,noPadding:!0},f.createElement(UG,{dismissModal:d}))))}let UH=()=>{let{pinnedPlugins:e}=(0,BH.VR)();return e.length>0};function UG({dismissModal:e}){let t=(0,a6.U)(),[n,a]=(0,f.useState)(0),l=(0,_.wA)(),r=UH(),i=f.useRef(null),o=(0,n3.ru)(),s=(0,aM.q)()&&o(),c=()=>{i.current&&i.current.focus()};f.useEffect(()=>{c()},[n]);let d=f.useCallback(()=>{e(),l(j.b({[bH]:!0})),r&&l(j.b({[w8.xb]:!0}))},[l,r,e]),u=f.useCallback(()=>{a(n+1)},[n]),m=f.useCallback(()=>{a(n-1)},[a,n]),p=0===n,g=n===UB[UB.length-1];return f.createElement("div",{className:nb()("configuration_wizard--wizardContainer--gss4b",nz.Dm),tabIndex:-1,ref:i},f.createElement(tN.Jn,{className:"configuration_wizard--closeButton--pv-0K",onClick:function(){d(),t("dev_handoff.config_wizard.closed",{step:n,stepName:UF[n]})}}),f.createElement("div",{className:"configuration_wizard--sidebar--g-2b8"},s?f.createElement("h1",{className:"configuration_wizard--sidebarHeadingTrial--tkxTS text--fontPos24WhyteInktrap--pgrWi text--_fontBaseWhyteInktrap--YiiGP"},(0,eN.tx)("dev_handoff.configuration_wizard.title_trial",{lineBreak:f.createElement("br",null)})):f.createElement("h1",{className:"configuration_wizard--sidebarHeading--xnYnE text--fontPos32WhyteInktrap--BG9sC text--_fontBaseWhyteInktrap--YiiGP"},(0,eN.tx)("dev_handoff.configuration_wizard.title")),f.createElement("h2",{className:"configuration_wizard--sidebarSubheading--ta8gQ text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI"},(0,eN.tx)("dev_handoff.configuration_wizard.subtitle")),f.createElement("div",{className:BZ}),f.createElement(UV,{step:n,setStep:a,disabled:0===n})),f.createElement("div",{className:"configuration_wizard--content--hktpZ"},0===n&&f.createElement(UR,null),1===n&&f.createElement(Uf,null),2===n&&f.createElement(UA,null),3===n&&f.createElement(UT,null),4===n&&f.createElement(US,null),f.createElement("div",{className:"configuration_wizard--footer--YjGGh"},p?f.createElement(f.Fragment,null,f.createElement("div",{className:Bq},f.createElement("div",{className:BZ}),f.createElement(so.$$,{onClick:u},(0,eN.tx)(`dev_handoff.configuration_wizard.${UF[n]}.next_text`)))):g?f.createElement("div",{className:Bq},f.createElement("div",{className:BZ}),f.createElement(so.nR,{onClick:m},(0,eN.tx)("general.back")),f.createElement(so.$$,{onClick:function(){d(),t("dev_handoff.config_wizard.done",{step:n,stepName:UF[n]})}},(0,eN.tx)("general.done"))):f.createElement("div",{className:Bq},f.createElement("div",{className:BZ}),f.createElement(so.nR,{onClick:m},(0,eN.tx)("general.back")),f.createElement(so.$$,{onClick:u},(0,eN.tx)(`dev_handoff.configuration_wizard.${UF[n]}.next_text`))))))}function UV({step:e,setStep:t,disabled:n}){return f.createElement(BU.z,{value:String(e),onChange:e=>{n||t(Number.parseInt(e,10))},className:nb()("configuration_wizard--stepPicker--Ffab-",n&&"configuration_wizard--disabledStepPicker--Ib2IX")},UB.map(a=>{let l=a===e,r=()=>{n||t(a)};return f.createElement("div",{tabIndex:n?-1:0,role:"radio","aria-checked":l,key:a,onPointerDown:r,onKeyDown:e=>{"Enter"===e.key&&r()},className:nb()("configuration_wizard--stepPickerOption--5Iqtt",l&&"configuration_wizard--selectedStepPickerOption--wndji",n&&"configuration_wizard--disabledStepPickerOption--9tTeN")},f.createElement("div",{className:"configuration_wizard--stepPickerOptionNumber--3GVYZ text--fontPos18Whyte--M40th text--_fontBaseWhyte--efAjI"},`0${a}`),f.createElement("div",{className:"configuration_wizard--stepPickerOptionText--KmSjp text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI"},(0,eN.tx)(`dev_handoff.configuration_wizard.${UF[a]}.picker_title`)))}))}var UK=n(176572);let UW={top:"ns-resize",bottom:"ns-resize",left:"ew-resize",right:"ew-resize"};function Uz(e){let{onSizeChanged:t,onStateChanged:n,edge:a}=e,l=f.useRef({isResizing:!1,lastX:0,lastY:0}),r=f.useCallback(e=>{null==n||n(!0),l.current.isResizing=!0,l.current.lastX=e.clientX,l.current.lastY=e.clientY,document.body.style.pointerEvents="none",document.documentElement.style.cursor=UW[a]},[n,a]),i=f.useCallback(e=>{l.current.isResizing&&(t({x:e.clientX-l.current.lastX,y:e.clientY-l.current.lastY}),l.current.lastX=e.clientX,l.current.lastY=e.clientY)},[t]),o=f.useCallback(e=>{l.current.isResizing&&(null==n||n(!1),l.current.isResizing=!1,document.body.style.pointerEvents="auto",document.documentElement.style.cursor="auto")},[n]);return f.useEffect(()=>(document.addEventListener("mousemove",i),document.addEventListener("mouseup",o),()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o)}),[i,o]),f.createElement("div",{className:nb()("resizable--panelContainer--35Ay7",nz.Dm),style:{width:e.size.width,minWidth:e.size.width,height:e.size.height,minHeight:e.size.height},ref:e.forwardedRef},f.createElement(IJ.V,{className:"resizable--content--gsGWd"},e.children),f.createElement("div",{className:nb()({"resizable--edgeDisabled--K1j0X":e.disabled,"resizable--edgeTop--vG5Ad resizable--edge--H5-yq":"top"===e.edge,"resizable--edgeBottom--bN-R0":"bottom"===e.edge,"resizable--edgeLeft--nRRyA":"left"===e.edge,"resizable--edgeRight--ZGbad":"right"===e.edge}),onMouseDown:r,onDoubleClick:e.onReset}))}var Uj=n(393812);let UJ="dev_handoff_layers_panel--hideCaret--JgPdQ",UY=(0,lf.jz)(lw.KAq),UX=(0,lf.jz)(lw.tUy);function Uq(e,t,n){let a=[],l=[t];for(;l.length>0;){let r=l.pop(),i=e.get(r);if(i&&(r===t||n(i)))for(let e of(a.push(r),(null==i?void 0:i.childrenGuids)??[]))l.push(e)}return a}function UZ(e){return!!e&&e.isAlive()&&"INSTANCE"!==e.type&&!(0,wJ.vY)(ei.w3z.getAssetInfo(e.guid),!0)}let UQ=(0,e4.eU)([]);function U$({inspectableRootNodeId:e,page:t,didSelectRow:n,hideHeader:a=!1}){let l=(0,_.wA)(),r=(0,eb.eY)(),i=(0,lh.uQ)(),o=(0,lh.NM)(),s=e||t,[c,d]=f.useState(()=>0===ei.glU.nodeStatusesOnPage(t).length||a),[u,m]=(0,S.fp)(UQ);f.useEffect(()=>{d(0===ei.glU.nodeStatusesOnPage(t).length)},[t]);let p=f.useCallback(()=>{m(()=>[s])},[m,s]),g=f.useCallback(e=>{m(t=>[...t,...Uq(r,e,UZ)])},[r,m]),h=f.useCallback((e,t)=>m(n=>n.includes(t)?n.filter(e=>e!==t):e.altKey?[...n,t,...Uq(r,t,UZ)]:[...n,t]),[r,m]),E=f.useCallback(e=>u.includes(e),[u]),v=function(e,t){let n=(0,eb.eY)();return f.useMemo(()=>{var a,l;let r=[];if(t){let i=null==(a=n.get(t))?void 0:a.parentGuid;for(;i&&i!==e;)r.push(i),i=null==(l=n.get(i))?void 0:l.parentGuid}return r.push(e),r},[n,e,t])}(s,i??"");f.useEffect(()=>{m(e=>[...e,...v])},[v,m]);let y=f.useCallback((e,t)=>{e.stopPropagation(),e.preventDefault();let{clientX:n,clientY:a}=e;l(nI.j7({type:nz.i,data:{clientX:n,clientY:a,guid:t,expandElement:()=>g(t)}}))},[l,g]),b=(0,eb.KH)(),C=f.useMemo(()=>{let t=a?[]:["header"];return c||e||o?[...t,...function e(t,n,a,l,r,i,o){let s=n.get(t);if(!s)return[];let c=t in a,d={nodeId:t,indentation:r,isSelected:c,isAncestorSelected:i,isRoot:o};if(!l(t))return[d];let u="CANVAS"===s.type,m=s.childrenGuids.flatMap(t=>e(t,n,a,l,r+(u?0:1),i||c,!1));return u?m:[d,...m]}(s,r,b,E,0,!1,!0)]:t},[e,E,c,s,r,b,o,a]),w=f.useRef(null),T=(0,DH.Te)({count:C.length,getScrollElement:()=>w.current,estimateSize:e=>0!==e||a?UY:UX,overscan:10});return f.createElement("div",{ref:w,style:{height:"100%",overflow:"auto"},"data-testid":"devHandoffLayersPanel"},f.createElement("div",{style:{height:`${T.getTotalSize()}px`,width:"100%",position:"relative"}},T.getVirtualItems().map(t=>{let a=C[t.index];return f.createElement("div",{key:t.key,style:{position:"absolute",top:0,left:0,width:"100%",height:`${t.size}px`,transform:`translateY(${t.start}px)`}},"header"===a?f.createElement(U0,{forceExpanded:!!e||!!o,isExpanded:c,setIsExpanded:d,collapseAllLayers:p}):f.createElement(wJ.O5,{key:a.nodeId,guid:a.nodeId,toggleExpanded:h,isExpanded:E,openContextMenu:y,didSelectRow:n,indentation:a.indentation,isSelected:a.isSelected,isAncestorSelected:a.isAncestorSelected,isRoot:a.isRoot}))})))}function U0({isExpanded:e,forceExpanded:t,setIsExpanded:n,collapseAllLayers:a}){let l=[{displayText:(0,eN.t)("dev_handoff.layers.collapse_all_layers"),callback:()=>a()}],r=(0,n6.GS)(),i=`devHandoffNodesPanel.caret.${t?"forcedExpanded":e?"expanded":"collapsed"}`;return f.createElement("div",{className:nb()("dev_handoff_layers_panel--layersListHeader--gQFn- text--fontPos11--2LvXf text--_fontBase--QdLsd",{"dev_handoff_layers_panel--bottomLine--v9zno":!(e||t)&&!r}),role:"button",tabIndex:0,"data-fullscreen-intercept":!0,onMouseDown:()=>!t&&n(!e)},r&&(e?f.createElement(ER.O,{"data-testid":i,className:t?UJ:void 0}):f.createElement(IW.k,{"data-testid":i,className:t?UJ:void 0})),!r&&f.createElement(a2.B,{className:nb()("dev_handoff_layers_panel--expandCaret--2ZbrU",{[UJ]:t}),svg:e?Cz.A:Ol.A,dataTestId:i}),f.createElement("div",{className:"dev_handoff_layers_panel--layersTitle--sU99L text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},(0,eN.tx)("dev_handoff.tag.layers")),(e||t)&&f.createElement(U1,{dropdownItems:l}))}function U1({dropdownItems:e}){let{Dropdown:t,toggleDropdown:n,dropdownTargetRef:a,isDropdownShown:l}=(0,w0.B)("LAYERS_PANEL_DROPDOWN");return f.createElement(f.Fragment,null,f.createElement("div",{ref:a},f.createElement(iy.YW,{svg:kD.A,onMouseDown:e=>e.stopPropagation(),onClick:function(e){e.stopPropagation(),n()},"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.code.options"),selected:l})),f.createElement(t,{items:e,showPoint:!0}))}var U2=n(721409),U5=n(470983);let U4=(0,lf.jz)(lw.LDP),U3=(0,lf.jz)(lw.Rv9),U6=(0,lf.jz)(lw.tUy),U7=(0,e4.eU)([]);function U8(e){let{guid:t,hasChildren:n,isExpanded:a,toggleExpand:l,isSelected:r,nameOverride:i,hideSectionIcon:o}=e,s=(0,aN.J2)((0,tM.UK)().showGuids),c=(0,cp.Fk)((e,t)=>{let n=e.get(t);return n?{guid:n.guid,name:n.name,isStateGroup:n.isStateGroup}:null},t),d=null==c?void 0:c.name,u=i??d,m=null==c?void 0:c.guid,p=null==c?void 0:c.isStateGroup,g=(0,n_.rf)(`devHandoffNodesPanel-targetIcon-${d}`,"click",e=>{(0,lC.S)("sections_frames_list"),l8.w3z.selectAndFocusOnNode(t,!0)}),h=(0,n_.rf)(`devHandoffNodesPanel-${d}`,"click",e=>{e.stopPropagation(),null==l||l()}),E=(0,_.wA)(),v=f.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:t,clientY:n}=e;m&&E(nI.j7({type:nz.i,data:{clientX:t,clientY:n,guid:m}}))},[E,m]);if(!m)return null;let y=nb()("dev_handoff_nodes_panel--expandCaret--EdbSv",{"dev_handoff_nodes_panel--expandCaretNoIcon--VTPwj":o});return f.createElement("div",{className:nb()("dev_handoff_nodes_panel--sectionHeader--qDUGd",r?kc:ks),onMouseDown:g,onContextMenu:v,role:"button",tabIndex:0,"data-fullscreen-intercept":!0},n?f.createElement(a2.B,{className:y,svg:a?Cz.A:Ol.A,onMouseDown:h}):f.createElement("div",{className:y}),!o&&f.createElement(xU.Bf,{className:nb()("dev_handoff_nodes_panel--layerIcon--aZvoO",{"dev_handoff_nodes_panel--symbolLayerIcon--D0Mch dev_handoff_nodes_panel--layerIcon--aZvoO":p}),guid:m}),f.createElement("div",{className:nb()("dev_handoff_nodes_panel--sectionName--qx-3z text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",{"dev_handoff_nodes_panel--symbolName--IoUUt dev_handoff_nodes_panel--sectionName--qx-3z text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa":p})},s?`${u} (${t})`:u))}let U9=f.memo(function(e){let{guid:t,isSelected:n,onClick:a}=e,l=(0,aN.J2)((0,tM.UK)().showGuids),[r,i]=f.useState(!1),o=function(e){(0,lh.uQ)();let t=(0,N.R)(e=>!(0,Uj.Mx)(e));return n=>(0,aT.Uc)(n&&t?e:"")}(t),s=(0,S.md)(wF),c=He(t),d=(0,C4.E1)(),u=(0,C4.ei)(t),m=(0,C4.L)(t,d,s),p=f.useMemo(()=>u?(0,cF.A)(u.lastEditedAt).fromNow():"",[u]),g=(0,aN.J2)(l8.Ez5.devHandoffState().focusAnimationIsRunning),{width:h=0,height:E=0}=c??{},v=h>2.5*E,y=E>2.5*h,b=h<1||E<1?{width:0,height:0}:v?{height:80,width:h/E*80}:y?{width:48,height:E/h*48}:{width:48,height:80},C=FP({nodeId:t,width:2*b.width,height:2*b.height,version:(null==u?void 0:u.lastEditedAt)??"-",reason:"dev_handoff_nodes_panel.thumbnail",shouldSkip:g,regenerateAfterImagesLoaded:!0}),w=(0,n_.rf)(`devHandoffNodesPanel-${(null==c?void 0:c.name)??""}`,"click",e=>{var n;(0,lC.S)("sections_frames_list"),l8.w3z.selectAndFocusOnNode(t,!0),null==(n=null==e?void 0:e.currentTarget)||n.blur(),a&&a(e)}),T=(0,_.wA)(),x=f.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:n,clientY:a}=e;T(nI.j7({type:nz.i,data:{clientX:n,clientY:a,guid:t}}))},[T,t]);if(!c)return null;let k=e=>{i(e),o(e)},I=null==u?void 0:u.lastEditedAt,A=C?{backgroundColor:e.thumbnailBackgroundColor}:void 0;return f.createElement("div",{className:nb()(n?kc:ks,"dev_handoff_nodes_panel--itemWithThumbnail--t0s4E"),onMouseDown:w,onContextMenu:x,role:"button",tabIndex:0,onMouseEnter:()=>{k(!0)},onMouseLeave:()=>k(!1),"data-fullscreen-intercept":!0},f.createElement("div",{className:"dev_handoff_nodes_panel--thumbnailContainer--y8uEp",style:A},C&&f.createElement("img",{src:C.src,className:nb()("dev_handoff_nodes_panel--thumbnailImg--yRcCn",v&&"dev_handoff_nodes_panel--thumbnailImgLong--5eP8l",y&&"dev_handoff_nodes_panel--thumbnailImgTall--iJO4k"),alt:(0,eN.t)("dev_handoff.nodes_panel.thumbnail_alt_text")})),f.createElement("div",{className:"dev_handoff_nodes_panel--nodeNameAndTimestampContainer--egq48 text--fontPos11--2LvXf text--_fontBase--QdLsd"},f.createElement("div",{className:"dev_handoff_nodes_panel--nodeNameAndTimestamp--HcL87"},f.createElement("div",{className:"dev_handoff_nodes_panel--nodeName--5SQVr ellipsis--ellipsis--Tjyfa"},l?`${c.name} (${t})`:c.name),I?f.createElement("div",{className:"dev_handoff_nodes_panel--tlfPanelTimestampContainer---u-Ju"},f.createElement(kB,{state:m,backgroundState:n?"selected":r?"hovered":null}),f.createElement("div",{className:"dev_handoff_nodes_panel--editedTimestamp--nShNo"},(null==u?void 0:u.createdAt)&&(m===C4.Uy.RECENTLY_CREATED||u.createdAt===u.lastEditedAt)?f.createElement("span",{className:kd},(0,eN.tx)("dev_handoff.nodes_panel.created",{at:p})):f.createElement("span",{className:kd},(0,eN.tx)("dev_handoff.nodes_panel.edited",{at:p})))):c.isSymbol&&f.createElement("div",{className:"dev_handoff_nodes_panel--timestampContainer--dGH49"},f.createElement(xU.Bf,{className:kb,guid:t}),f.createElement("span",{className:"dev_handoff_nodes_panel--layerTypeSymbol--BuyoH text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},c.type)))))}),He=e=>(0,cp.Fk)((e,t)=>{let n=(0,lh.Zl)(e,t);if(!n)return null;let a=n.isState?n.parentNode:null,l=(null==a?void 0:a.name)||n.name;return{id:n.guid,name:l,width:n.size.x,height:n.size.y,type:(0,wj.bg)(n,a),isSymbol:n.isStateGroup||"SYMBOL"===n.type||"INSTANCE"===n.type}},e);function Ht({items:e,selectedNodeId:t,inReadySectionTopLevelNodeId:n,onRowClick:a}){let l=f.useRef(null),r=e.length>0,[i,o]=(0,S.fp)(U7),s=function(){let{currentPage:e}=(0,N.R)(e=>({currentPage:e.mirror.appModel.currentPage})),t=(0,cp.Fk)((e,t)=>{var n;return null==(n=e.get(t))?void 0:n.backgroundColor},e);return t?LB.F.format(t):"var(--color-bg)"}(),[c,d]=f.useState(!0),u=(0,n6.GS)(),m=f.useMemo(()=>Math.min(e.length*U4,400)+7+(u?0:U6),[e.length,u]),[p,_]=(0,A.Vc)("ready-panel-height-storage-key",m),g=r?`calc(max(${U4}px, min(60%, ${p}px)))`:"fit-content";f.useEffect(()=>{var n;if(!t)return;let a=null==(n=e.find(e=>e.childNodeIds.includes(t)))?void 0:n.guid;a&&o(e=>e.includes(a)?e.filter(e=>e!==a):e)},[e,t,o]);let h=f.useMemo(()=>{let t=!1;return[...u?[]:[{type:"header"}],...e.flatMap(e=>{if(e.isSection){let n=i.includes(e.guid);return n||(t=!0),[{type:"section",sectionId:e.guid,displayName:e.sectionNames.fill("...",1,-1).join(" / "),hasChildren:e.childNodeIds.length>0},...n?[]:e.childNodeIds.map(e=>({type:"node",nodeId:e}))]}return t?(t=!1,[{type:"divider"},{type:"node",nodeId:e.guid}]):{type:"node",nodeId:e.guid}})]},[i,u,e]),E=f.useMemo(()=>{let e=[];return h.forEach((t,n)=>{"section"===t.type&&e.push(n)}),e},[h]),v=f.useRef(),y=e=>v.current===e,b=f.useRef(null),C=(0,DH.Te)({count:h.length,estimateSize:e=>{let t=h[e].type;return"node"===t?U4:"header"===t?U6:"divider"===t?16:U3},getScrollElement:()=>b.current,overscan:10,rangeExtractor:f.useCallback(e=>(v.current=[...E].reverse().find(t=>e.startIndex>=t),v.current)?[...new Set([v.current,...(0,UK.vp)(e)])].sort((e,t)=>e-t):(0,UK.vp)(e),[E])}),w=f.createElement("div",{className:"dev_handoff_nodes_panel--panelTitle--wcEcM text--fontPos11--2LvXf text--_fontBase--QdLsd",style:{padding:u?0:void 0}},(0,eN.tx)("dev_handoff.tag.ready_for_development"));f.useEffect(()=>{let e=h.findIndex(e=>"node"===e.type&&n===e.nodeId);-1!==e&&C.scrollToIndex(e)},[h,n,C]);let T=f.useCallback(e=>_(t=>t+e.y),[_]),x=f.useCallback(()=>_(l.current.clientHeight),[_]),k=f.useCallback(()=>_(m),[_,m]);return f.createElement(f.Fragment,null,u&&f.createElement(a7.D8,{className:I5,onClick:()=>d(e=>!e)},f.createElement("div",{className:I6},c?f.createElement(ER.O,null):f.createElement(IW.k,null),w)),f.createElement(Uz,{edge:"bottom",size:{height:u&&!c?0:g},onSizeChanged:T,onStateChanged:x,onReset:k,forwardedRef:l,disabled:!r},c&&f.createElement("div",{"data-testid":"devHandoffNodesPanel.readyList",style:{height:"100%",overflow:"auto"},ref:b},r?f.createElement("div",{style:{height:`${C.getTotalSize()}px`,width:"100%",position:"relative"}},C.getVirtualItems().map(e=>{let l;let r=h[e.index];return l="header"===r.type?w:"divider"===r.type?f.createElement("div",{className:"dev_handoff_nodes_panel--readyNodesDivider--QAmcF"}):"section"===r.type?f.createElement(U8,{guid:r.sectionId,hideSectionIcon:!0,hasChildren:r.hasChildren,isExpanded:!i.includes(r.sectionId),toggleExpand:()=>{o(e=>e.includes(r.sectionId)?e.filter(e=>e!==r.sectionId):[...e,r.sectionId])},isSelected:t===r.sectionId,nameOverride:r.displayName}):f.createElement(U9,{guid:r.nodeId,thumbnailBackgroundColor:s,isSelected:n===r.nodeId,onClick:a}),f.createElement("div",{key:e.key,style:{..."section"===r.type?{zIndex:1}:{},...y(e.index)?{position:"sticky"}:{position:"absolute",transform:`translateY(${e.start}px)`},top:0,left:0,width:"100%",height:`${e.size}px`}},l)})):f.createElement(f.Fragment,null,!u&&w,f.createElement(Ha,null)))))}function Hn(){if(!(0,wM.s)())return null;let e=(0,y.kc)().dt_frame_status_canvas;return f.createElement(a1.nR,{className:"dev_handoff_nodes_panel--readySectionsEmptyStateButton--5SSUQ",onClick:()=>et.Y5.triggerAction("add-selection-ready-status")},f.createElement(a2.B,{svg:e?U2.A:U5.A,className:nb()(km,e&&"dev_handoff_nodes_panel--readySectionsIconLower--zEPiw")}),(0,eN.tx)("fullscreen_actions.ready-status-add"))}function Ha(){let e=(0,eb.p8)("isSceneReadOnly"),t=(0,wM.s)();return e?f.createElement("div",{className:ku},f.createElement(a2.B,{svg:(0,y.kc)().dt_frame_status_canvas?U2.A:U5.A,className:km}),f.createElement("div",{className:kp},(0,eN.tx)("dev_handoff.tag.ready_for_development.content_view_only"))):f.createElement("div",{className:ku},t?f.createElement(Hn,null):f.createElement(f.Fragment,null,f.createElement(a2.B,{svg:(0,y.kc)().dt_frame_status_canvas?U2.A:U5.A,className:km}),f.createElement("div",{className:kp},(0,eN.tx)("dev_handoff.status.ready_for_development.content"))))}function Hl(e,t){let n=f.useRef(!1),a=f.useCallback(e=>{e!==t&&(n.current=!0)},[t]),{inspectableRootNodeId:l}=Hr(e,t),r=f.useRef(null),i=f.useMemo(()=>t&&n.current?(n.current=!1,r.current):l,[t]);return r.current=i,{inspectableRootNodeId:i,didSelectRow:a}}function Hr(e,t){let n=f.useMemo(()=>{let e=t?l8.w3z.getInReadySectionTopLevelNodeId(t):null;return e&&e!==lg.AD?e:null},[t]),a=(0,cp.Fk)((e,t,n)=>{let a=null;if(n?a=n:t===lg.AD||l8.w3z.isNodePanelSection(t)||(a=t),a){let t=e.get(a);(!t||wJ.q1.includes(t.type))&&(a=null)}return a},e,n),l=(0,tR.hA)();return l?{inspectableRootNodeId:l,inReadySectionTopLevelNodeId:null}:{inspectableRootNodeId:a,inReadySectionTopLevelNodeId:n}}function Hi({onRowClick:e,inspectableRootNodeId:t,didSelectRow:n}){let a=(0,aN.J2)(l8.Ez5.devHandoffState().currentNodeId),l=(0,lh.uQ)(),r=(0,aN.J2)(l8.Ez5.devHandoffState().readySectionItems),{currentPage:i}=(0,N.R)(e=>({currentPage:e.mirror.appModel.currentPage})),{inReadySectionTopLevelNodeId:o}=Hr(a,l);return f.createElement("div",{className:"dev_handoff_nodes_panel--nodesListPanels--ceR3Z","data-testid":"devHandoffNodesList"},f.createElement(Ht,{items:r||[],selectedNodeId:l,inReadySectionTopLevelNodeId:o,onRowClick:e}),f.createElement(U$,{inspectableRootNodeId:t,didSelectRow:n,page:i}))}let Ho=f.memo(()=>{let e=(0,aN.J2)(l8.Ez5.devHandoffState().currentNodeId),t=(0,tR.l7)(),n=!!(0,tR.hA)()&&!t,{inspectableRootNodeId:a,didSelectRow:l}=Hl(e,(0,lh.uQ)()),r=(0,_.d4)(e=>Object.keys(e.mirror.sceneGraphSelection).length>0);return(0,np.h)(()=>{let e=b7.sn.tryStop("switch_to_inspect_mode.left_panel_tti");e&&(0,Z.sx)("switch_to_inspect_mode.left_panel_tti",{elapsedMs:e,isNodeSelected:r},{forwardToDatadog:!0})}),f.createElement("div",{className:nb()(nz.Dm,ko)},!n&&f.createElement(F6,null),!t&&f.createElement(Hi,{inspectableRootNodeId:a,didSelectRow:l}))});var Hs=n(233562);function Hc(){return f.createElement("div",{className:a8.cx.flex.flexRow.m16.$},f.createElement("div",{className:a8.cx.font11.$},(0,eN.tx)("fullscreen.properties_panel.this_file_s_editor_has_disabled_exporting_copying_and_sharing.seat_rename")))}var Hd=n(176626),Hu=n(559497);let Hm=f.memo(function(){let e=(0,_.d4)(e=>e.mirror.appModel.currentTool===lc.ec.tool),t=(0,kq.h)(),n=(0,tM.UX)(),a=(0,S.md)(Te.d4),l="LOADING"===a,r="RUNNING"===a,i=(0,S.md)(b8.H)===b8._.PLUGIN&&!e,o=(0,_.wA)();f.useEffect(()=>o(r6.aq()),[o]),f.useEffect(()=>{let e=Hu.mN.getInstance();r&&e&&(i?e.hideProgress():e.showProgress({isBackground:!0}))},[r,i]);let s=r&&i?{height:"100%"}:{display:"none"};return f.createElement("div",{className:a8.cx.hFull.wFull.if(i,a8.cx.block,a8.cx.hidden).$,"data-testid":"devHandoffPluginPanel"},t?f.createElement(Hc,null):f.createElement(f.Fragment,null,l&&f.createElement(Hp,null),f.createElement("div",{style:s,"data-testid":"pluginPanelContainer"},f.createElement(Hd.jv,{iframeId:Hd.Wh.INSPECT,width:n,fillParent:!0})),!l&&!r&&f.createElement(Bi,null)))});function Hp(){let e=(0,S.md)(Te.be);return e?f.createElement(fy.Y,{direction:"vertical",verticalAlignItems:"center",horizontalAlignItems:"center"},f.createElement(f.Fragment,null,f.createElement("span",{style:dA.sx.add({boxSizing:"content-box",margin:"-20px auto",opacity:"0.3"}).$},f.createElement(Hs.y$,null)),f.createElement("div",{className:a8.cx.pt16.px32.alignCenter.$},f.createElement(sc.E,{fontSize:12,color:"secondary"},(0,eN.tx)("dev_handoff.loading_plugin",{pluginName:null==e?void 0:e.name}))))):null}var Hf=n(979441),H_=n(506599);let Hg=(0,lf.jz)(lw.QBm);function Hh(e){let t=(0,_.d4)(e=>e.mirror.appModel.showUi),n=(0,SR.lz)(),[a,l]=(0,S.fp)(SR.XI),r=(0,n6.GS)(),i=(0,aN.J2)((0,tM.UK)().renderRulers),o=(0,tR.hA)(),s=(0,Ck.b)(),{isPropertiesPanelCollapsed:c}=(0,H_.iT)();c=c&&r,(0,SR.qn)();let d=f.useCallback(()=>{l(!0)},[l]),u=f.useCallback(e=>{if(a){let t=(0,SR.gY)(window.innerWidth-e.clientX);t!==n&&(0,SR.xT)(t)}},[a,n]),m=f.useCallback(()=>{a&&l(!1)},[a,l]);f.useEffect(()=>(document.addEventListener("mousemove",u),document.addEventListener("mouseup",m),()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",m)}));let p=r&&!c,g=a?Bf:t?Bp:B_;return r?f.createElement(IJ.V,{className:nb()(Bh.Lp,{[Bh.dn]:c,[Bh.Ph]:s&&!o}),style:{width:n}},p&&f.createElement(Hf.T,{side:"right"}),f.createElement(Fp.w,{className:nb()(Bh.ux,nz.Dm,{[Bh.ew]:i&&!o,[Bh.Ph]:s&&!o}),size:n,onResize:d,side:"left"},c&&f.createElement("div",{className:nb()(Bh.KE,Bh.tM,{[Bh.Ph]:s&&!o})},f.createElement(IP.v2,null)),f.createElement("div",{className:nb()(Bh.KE,{[Bf]:a,[Bp]:t,[B_]:!t||c,[Bh.Ph]:s&&!o})},!c&&f.createElement(IP.v2,null),f.createElement(Td,null),f.createElement("div",{className:Bg},e.children)))):f.createElement("div",{className:`${g} ${nz.Dm}`,style:{width:n-Hg},ref:e.forwardedRef},f.createElement(Td,null),f.createElement(IJ.V,{className:Bg},e.children),f.createElement(a7.D8,{className:"dev_handoff_right_panel_container--edge--K3aDb",style:{right:n},onMouseDown:d,onDoubleClick:SR.Az}))}function HE({plugin:e}){return"first-party"!==(0,wR.v4)().type?null:f.createElement(Hy,{plugin:e,buttonText:(0,eN.t)("dev_handoff.inspect_panel.close_plugin")})}function Hv({plugin:e}){return"first-party"===(0,wR.v4)().type?null:f.createElement(Hy,{plugin:e,buttonText:(0,eN.t)("dev_handoff.inspect_panel.generate_code")})}function Hy({plugin:e,buttonText:t}){return e?f.createElement(wu.VZ,{padding:wu.UZ.NONE,recordingKey:"pluginProgressPanel"},f.createElement(fy.Y,{direction:"vertical",horizontalAlignItems:"center",padding:{top:12,bottom:12,left:16,right:16},spacing:8,width:"fill-parent"},f.createElement(fy.Y,{direction:"horizontal",verticalAlignItems:"start",horizontalAlignItems:"center",spacing:4},f.createElement("div",{style:dA.sx.add({marginTop:"-3px"}).$},f.createElement(Tn.d,{plugin:e})),f.createElement(sc.E,{fontFamily:"primary"},(0,eN.tx)("fullscreen.plugins.background",{plugin:f.createElement(sc.E,{fontWeight:"bold"},e.name)}))),f.createElement(n5.$,{variant:"secondary",onClick:()=>{(0,w9.wY)()},width:"fill-parent",recordingKey:"generateCodeButton"},f.createElement(sc.E,{fontFamily:"primary"},t)))):null}var Hb=n(19741);let HC="code_extension_section--sectionsBorder--iguOh";function Hw({localCodeLanguage:e,overrideNodeId:t,hideLayoutSection:n,sectionClassName:a}){let l=(0,wR.v4)(),r=e??l,i=r.id===wR.uz&&"first-party"===r.type?{id:Ty.qZ.CSS,type:"first-party"}:r,o=(0,S.md)(Te.GR),s=(0,S.md)(Te.vT);return o&&"codegen"!==s&&"first-party"!==i.type?f.createElement(Hv,{plugin:o}):f.createElement(HT,{overrideNodeId:t,hideLayoutSection:n,codegenPluginLanguage:i,sectionClassName:a},(e,t)=>f.createElement(wI,{code:e,section:t}))}function HT({codegenPluginLanguage:e,children:t,overrideNodeId:n,hideLayoutSection:a,sectionClassName:l}){let r=(0,wz.ie)(),i=(0,wz.fb)(),o=(0,_.d4)(e=>Object.keys(e.mirror.sceneGraphSelection)[0]),s=(0,a6.U)(),[c,d]=f.useState(!1),u=n??o,m=f.useCallback(t=>{s("Dev Mode Code Section Clicked",{codeSection:t,languageType:e.type,languageId:e.id,unit:r,scaleFactor:i})},[e.id,e.type,i,s,r]),{code:p,error:g,isLoading:h}=TL({selectedNodeID:u,extensionLanguage:e,preferences:(0,wz.gc)(),plugin:(0,wR.QN)()}),E=!!n,v=f.useCallback(({id:e})=>{var t;e===u&&(null==(t=(0,Ty.px)().nodeCache)||t.invalidate(e),d(!0))},[u]);f.useEffect(()=>((0,Hb.BT)(v),()=>{(0,Hb.q$)(v)}),[v]),f.useEffect(()=>{E||d(!1)},[E,u]);let y=f.useCallback(()=>{d(!1),(0,Ty.px)().rebuildNodeCache(),(0,Tw.c)()},[]),b=function(e,t){let[n,a]=f.useState(e);return f.useEffect(()=>{let t=null;return e?t=setTimeout(()=>{a(!0)},200):a(!1),()=>{null!=t&&clearTimeout(t)}},[e,200]),n}(h,200);return u?g?(console.error(g),null):b?f.createElement("div",{className:HC},f.createElement(fy.Y,{verticalAlignItems:"center",horizontalAlignItems:"center",padding:{top:16,left:16,right:16,bottom:4},dataTestId:"codegen-spinner"},f.createElement(re.kt,null))):0===p.length?null:f.createElement("div",{className:HC},c&&f.createElement(fy.Y,{padding:{top:16,left:16,right:16,bottom:0}},f.createElement(Nu.z,{dataTestId:"dev-handoff-code-update-prompt",iconSrc:N1.A,title:(0,eN.t)("dev_handoff.code.update_prompt_title"),orientation:"vertical",variant:"brand",onClose:()=>d(!1),action:{label:(0,eN.t)("dev_handoff.code.update_prompt_action"),onClick:y}},(0,eN.tx)("dev_handoff.code.update_prompt"))),p.map((n,r)=>n.lines.length>0&&(!a||"Layout"!==n.name)?f.createElement(a7.D8,{className:nb()("code_extension_section--sectionsContainer--vZzFZ",l),"data-testid":`code-panel-${n.name}`,key:`${e}-${n.name}-${r}`,tabIndex:-1,"data-fullscreen-intercept":!0,onClick:()=>m(n.name)},t(p,n,r)):null)):null}let Hx="Dev Mode Focus View Onboarding",HN="focus_view_title_onboarding_key",HS="focus_view_completed_onboarding_key",Hk="focus_view_versions_onboarding_key",HI="focus_view_back_onboarding_key";function HA(){let{show:e,isShowing:t,complete:n}=(0,n7.e)({overlay:an.FtN,priority:n8.N.DEFAULT_MODAL});(0,np.h)(()=>{e()});let a=(0,f.useMemo)(()=>({label:(0,eN.tx)("dev_handoff.workflows.focus_view.onboarding.secondary_cta_label"),type:"button",onClick:()=>n(),ctaTrackingDescriptor:ar.c.CANCEL}),[n]),l=[{title:(0,eN.tx)("dev_handoff.workflows.focus_view.onboarding.viewing.title"),description:(0,eN.tx)("dev_handoff.workflows.focus_view.onboarding.viewing.description"),trackingContextName:`${Hx} Viewing`,targetKey:HN,emphasized:!0,secondaryCta:a,disableHighlight:!0},{title:(0,eN.tx)("dev_handoff.workflows.focus_view.onboarding.completed.title"),description:(0,eN.tx)("dev_handoff.workflows.focus_view.onboarding.completed.description"),trackingContextName:`${Hx} Completed`,targetKey:HS,emphasized:!0,secondaryCta:a,disableHighlight:!0},{title:(0,eN.tx)("dev_handoff.workflows.focus_view.onboarding.versions.title"),description:(0,eN.tx)("dev_handoff.workflows.focus_view.onboarding.versions.description"),trackingContextName:`${Hx} Versions`,targetKey:Hk,emphasized:!0,arrowPosition:dk.F_.RIGHT_BODY,secondaryCta:a,onStepShow:()=>aT.wr(),disableHighlight:!0},{title:(0,eN.tx)("dev_handoff.workflows.focus_view.onboarding.back.title"),description:(0,eN.tx)("dev_handoff.workflows.focus_view.onboarding.back.description"),trackingContextName:`${Hx} Back`,targetKey:HI,emphasized:!0,primaryCtaLabel:(0,eN.tx)("dev_handoff.workflows.focus_view.onboarding.last_primary_cta_label"),disableHighlight:!0}];return f.createElement(c5.WZ,{steps:l,isShowing:t,onComplete:n})}var HO=n(933992);let HL="dev_handoff_activity_panel--versionIconContainer--i7OVd",HP="dev_handoff_activity_panel--editedIcon--V-4-N dev_handoff_activity_panel--_versionIcon--9Io2B",HD="dev_handoff_activity_panel--activityDisplayText--4O-Dk",HR="dev_handoff_activity_panel--activityTime--pCZ9l";function HM({activity:e,isLatest:t}){let n=function(e){var t;switch(null==(t=e.metadata)?void 0:t.status){case a_.zI.BUILD:return(0,eN.tx)("dev_handoff.workflows.focus_view.activity_status_ready");case a_.zI.COMPLETED:return(0,eN.tx)("dev_handoff.workflows.focus_view.activity_status_completed");case a_.zI.NONE:return(0,eN.tx)("dev_handoff.workflows.focus_view.activity_status_removed");default:return null}}(e),a=(0,LS.Ak)(e.timestamp);return f.createElement("div",{className:HD},t?(0,eN.tx)("dev_handoff.workflows.focus_view.activity.activity_row_with_latest",{versionText:n,activityTime:f.createElement("span",{className:HR},a),latest:f.createElement("span",{className:HR},(0,eN.tx)("dev_handoff.workflows.focus_view.activity.activity_row_latest_part"))}):(0,eN.tx)("dev_handoff.workflows.focus_view.activity.activity_row",{versionText:n,activityTime:f.createElement("span",{className:HR},a)}))}function HF({activity:e,line:t,isGreen:n}){var a;switch(null==(a=e.metadata)?void 0:a.status){case a_.zI.BUILD:return f.createElement("div",{className:HL,"data-testid":"devModeActivity.readyIcon"},t,f.createElement(HO.A,{className:n?"dev_handoff_activity_panel--readyIconGreen--qdkvg dev_handoff_activity_panel--_versionIcon--9Io2B":"dev_handoff_activity_panel--readyIcon--zbH-1 dev_handoff_activity_panel--_versionIcon--9Io2B"}));case a_.zI.COMPLETED:return f.createElement("div",{className:HL,"data-testid":"devModeActivity.completedIcon"},t,f.createElement(FM.g,{className:"dev_handoff_activity_panel--completedIcon--3i2u3 dev_handoff_activity_panel--_versionIcon--9Io2B"}));default:return null}}function HB(){let e=(0,_.wA)();return()=>{e((0,wq.Eg)())}}function HU(){return(0,_.d4)(e=>e.versionHistory.activeId===wq.V_)}function HH(e,t,n){var a;return e&&(null==(a=t.metadata)?void 0:a.status)!==a_.zI.NONE?e=>f.createElement(HF,{line:e,activity:t,isGreen:n}):void 0}function HG(){let e=(0,_.wA)();return t=>{e((0,wq.Eg)()),ei.w3z.focusOnNode(t,!1)}}function HV({latestReadyForDevVersionId:e,lastEditedAt:t,hasEdits:n,status:a,isActive:l,onSelect:r,showCompareChanges:i}){let o=(0,_.wA)(),s=(0,n6.GS)(),c=(0,a6.U)(),d=(0,LS.Ak)((t??0)*1e3),u=(0,tR.hA)();return f.createElement(Tj.jP,{label:"latest-change-row",displayText:f.createElement("div",{className:"dev_handoff_activity_panel--activityDisplayTextContainer--80BG-"},f.createElement("div",{className:HD},f.createElement("span",{className:"dev_handoff_activity_panel--latestVersion--ukUVR"},u?(0,eN.tx)("dev_handoff.workflows.focus_view.activity.latest"):(0,eN.tx)("collaboration.feedback.current_version")),!!t&&f.createElement("span",{className:HR},d)),l&&i&&f.createElement("button",{className:"dev_handoff_activity_panel--viewDiffButton--G2GGC",onClick:function(){c("Dev Mode Activity Compare Changes",{source:"compare_previous"}),xb(e,o,!0)}},(0,eN.tx)("dev_handoff.workflows.focus_view.activity.compare_previous"))),iconOverride:s&&n?e=>f.createElement("div",{className:HL},e,(null==a?void 0:a.status)===ei.zIx.COMPLETED?f.createElement(FM.g,{className:HP}):f.createElement(HO.A,{className:HP})):void 0,onSelect:l?void 0:r,view:null,isActive:l,userUrl:null,versionId:wq.V_,dispatch:o,isAllowedToChangeVersion:()=>!l,first:!0,last:!1,isUI3:s,editorType:a_._Y.DESIGN})}function HK(){var e,t;let n=(0,tR.hA)(),a=(0,TD.Os)(n??""),l=(0,TD.jh)(n??void 0),r=HU(),i=HG();if(!a||0===a.length||!n)return f.createElement("div",{"data-onboarding-key":Hk});let o=new lE.q(EV.ju.LIVE_FILE).get(n??""),s=a[0],c=!!(null==(e=null==o?void 0:o.editInfo)?void 0:e.lastEditedAt)&&s.timestamp.getTime()<1e3*o.editInfo.lastEditedAt;return f.createElement(wu.VZ,{title:(0,eN.t)("dev_handoff.workflows.focus_view.activity.versions"),recordingKey:"activityLog",headerOnboardingKey:Hk},f.createElement("div",{className:"dev_handoff_activity_panel--activityEvents--9uFul"},c&&f.createElement(HV,{lastEditedAt:null==(t=null==o?void 0:o.editInfo)?void 0:t.lastEditedAt,latestReadyForDevVersionId:s.id,hasEdits:!0,status:null==o?void 0:o.getStatusInfo(),isActive:r,onSelect:()=>i(n),showCompareChanges:!0}),a.map((e,t)=>f.createElement(HW,{key:t,activity:e,isOldest:t===a.length-1,isLatest:0===t&&!c,versions:l.versions}))))}function HW({activity:e,isOldest:t,isLatest:n,versions:a}){var l;let r=(0,_.wA)(),i=(0,xB._6)(),o=(0,n6.GS)(),s=(0,_.d4)(e=>e.versionHistory),c=e.versionId??void 0,d=HU(),u=(0,a6.U)(),m=d&&n||c===s.activeId,p=function(e,t,n){let a=(0,tR.hA)(),l=(0,_.wA)(),r=(0,xB._6)(),i=HB(),o=(0,a6.U)();return f.useCallback((s,c)=>{if(t&&!s){if(n){i();return}o("Dev Mode Activity Load Version",{entrypoint:c}),l(nI.$T({...r,versionId:t})),l(K.Y6({mode:ei.Oin.KEEP_UI,type:uP.lF.SPINNER})),requestAnimationFrame(()=>{l((0,wq.Nb)({id:t,nodeId:a??void 0,eventType:"LOAD_NEW_VERSION",versions:e}))})}},[t,n,e,a,l,r,i,o])}(a,c,n),g=HB(),{toggle:h,showing:E}=(0,nT.B)(`DROPDOWN_TYPE_ACTIVITY_LOG_${e.id}`),[v,y]=f.useState(null),b=!!c&&c!==s.activeId;return f.createElement(f.Fragment,null,f.createElement(Tj.jP,{description:(null==(l=e.metadata)?void 0:l.description)||void 0,label:"activity-row",displayText:f.createElement(HM,{activity:e,isLatest:n}),view:null,iconOverride:HH(o,e,t||m),onSelect:b?()=>p(m,"row"):void 0,onHoverMenuCallback:e.versionId?e=>{e.stopPropagation(),y(e.currentTarget.getBoundingClientRect()),h()}:void 0,forceShowHoverMenu:E||m,isActive:m&&!n,user:e.user.name||"",userUrl:e.user.imgUrl,isAllowedToChangeVersion:()=>b,versionId:e.versionId||"NO_VERSION",dispatch:r,first:n,last:t,isUI3:o,editorType:a_._Y.DESIGN}),E&&v&&f.createElement(nN.Cf,{targetRect:v},!n&&(m?f.createElement(nC.W.Option,{onClick:g},(0,eN.tx)("dev_handoff.workflows.focus_view.back_to_current")):f.createElement(nC.W.Option,{onClick:()=>p(m,"dropdown_option")},(0,eN.tx)("dev_handoff.workflows.focus_view.inspect_version"))),!n&&f.createElement(nC.W.Option,{onClick:()=>{u("Dev Mode Activity Compare Changes",{source:"compare_to_latest"}),xb(c,r,!0)}},(0,eN.tx)("dev_handoff.workflows.focus_view.compare_latest")),f.createElement(nC.W.Option,{onClick:()=>{u("Dev Mode Activity Copy Link To Version"),(0,Tj.S)(r,i,c)}},(0,eN.tx)("dev_handoff.workflows.focus_view.copy_link_to_version"))))}var Hz=n(200243),Hj=n(899424),HJ=n(380631),HY=n(347740);function HX(){return f.createElement(f.Fragment,null,f.createElement(Hz.Xh,null),f.createElement(HY.U,null),f.createElement(Ix.ZN,null),f.createElement(HJ.o,null),f.createElement(Hj.y,null))}var Hq=n(438377);function HZ(){let{selectionProperties:e}=(0,N.R)(e=>({selectionProperties:e.mirror.selectionProperties})),t=(0,e_.nl)(),n=(0,e_.cW)(),a=(0,e_.Be)(),l=(0,fF.Yo)(),r=(0,_.wA)(),i=(0,af.tS)();return f.createElement(Hq.Q,{key:"plugin",pluginRelaunchData:e.pluginRelaunchData,localPlugins:t,publishedPlugins:n,allSavedPlugins:a.plugins,orgEntity:l,dispatch:r,openFileKey:i,editorType:eq.nT.DevHandoff,numSelected:e.numSelected??0,recordingKey:"devHandoffPluginPanel",title:(0,eN.t)("dev_handoff.plugin_panel.title"),isDevHandoff:!0})}var HQ=n(912666),H$=n(390487),H0=n(559037),H1=n(987950),H2=n(783908),H5=n(400181),H4=n(215837);function H3(){let e=(0,lh.VW)();return null==e?void 0:e.isModule}var H6=n(238093);let H7="typography_preview--measureContainer--D1G5R",H8="typography_preview--measure---sPO7",H9="typography_preview--value--v5BEy text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",Ge=(0,lf.jz)(lw.WPY);function Gt({fillContainer:e=!1}){let t=(0,lh.VW)(),n=(0,_.d4)(e=>e.mirror.selectionProperties.selectedFonts);return t&&t.isAlive()&&"TEXT"===t.type&&t.fontName&&n&&!((null==n?void 0:n.fonts.length)<1)?f.createElement(wu.VZ,{hideHeader:!0,padding:wu.UZ.NONE,noBorder:!0,recordingKey:"typographyPreview"},f.createElement(Gn,{nodeId:t.guid,containerClassName:e?"typography_preview--previewContainerFill--QUwgr":"typography_preview--previewContainerBoxed--yWT-0 typography_preview--previewContainer--zDKlk text--fontPos11--2LvXf text--_fontBase--QdLsd common--well--J0WtH",numberOfFonts:n.fonts.length})):null}function Gn({nodeId:e,containerClassName:t="typography_preview--previewContainerFullWidth--61D4v typography_preview--previewContainer--zDKlk text--fontPos11--2LvXf text--_fontBase--QdLsd common--sectionWithBottomSeparator--N54QE",numberOfFonts:n=1,localCodeLanguage:a}){let l=function(e){let t=(0,ga.DP)(),n=(0,SR.rL)()-32,[a,l]=f.useState({...Gc,loading:!0}),{family:r,style:i}=(0,cp.Fk)(t=>{let n=t.get(e),{family:a,style:l}=(null==n?void 0:n.fontName)||{};return{family:a,style:l}}),o=f.useCallback(()=>{l(e=>({...e,imageLoading:!1}))},[]);return f.useEffect(()=>{let t=e=>{l(t=>{Gs(null==t?void 0:t.url);let n=!!e.url&&(t.fontFamily!==e.fontFamily||t.fontStyle!==e.fontStyle);return{...t,...e,imageLoading:n,loading:!1,error:!e.url&&e.error}})},n=()=>{t({...Gc,url:void 0,error:!0})};(async()=>{var a;if(!r||!i)return;if(ei.vXe.fontsAreLoading()){let e=0;await new Promise((t,n)=>{let a=setInterval(()=>{ei.vXe.fontsAreLoading()||(t(),clearInterval(a)),e>10&&n(),e++},100)})}if(!ei.vXe.fontIsLoaded(r,i)){n();return}let l=ei.w3z.getTypographyPreview(e);if(l&&(null==(a=l.thumbnail)?void 0:a.byteLength)>0){let{thumbnail:e,...n}=l,a=URL.createObjectURL(new Blob([e]));t({...n,url:a})}else n()})().catch(()=>{n()})},[e,n,r,i,t]),f.useEffect(()=>()=>Gs(null==a?void 0:a.url),[null==a?void 0:a.url]),{...a,onImageLoaded:o}}(e),{fontName:r,inheritedTextStyle:i}=(0,cp.Fk)(t=>{let n=t.get(e);return{fontName:null==n?void 0:n.fontName,inheritedTextStyle:null==n?void 0:n.inheritedTextStyle}});return f.createElement("div",{className:t},l.loading?f.createElement(Gr,null):f.createElement(Ga,{data:l,font:r,styleId:i,numberOfFonts:n,localCodeLanguage:a}))}function Ga({data:e,font:t,styleId:n,numberOfFonts:a,localCodeLanguage:l}){let r=(0,wz.qM)(l,e.lineHeightInPx,Go,{isTextProperty:!0}),i=(0,wz.qM)(l,e.fontSizeInPx,Go,{isTextProperty:!0}),o=e.textStyleNodeId||(0,H6.f$)(n),{styleName:s,styleDescription:c}=(0,cp.wA)((e,t)=>{if(!t||0===t.length)return{};let n=t[0];if(!n)return{};let a=e.get(n);return{styleName:null==a?void 0:a.name,styleDescription:null==a?void 0:a.description}},[o]),d=(0,xP.Cj)(r),u=(0,xP.Cj)(i),m=(0,xP.Cj)(s),p=Ge-16-((0,lg.fn)((0,lg.sH)(e.textStyleNodeId))||a>1?40:0),_=e.fullSize.y>p?e.fullSize.y/p:1,g=e.fullSize.y/_,h=e.fullSize.x/_,E=g+1,v=e.capPosition/_,y=e.baselinePosition/_,b=e.bottomPosition/_,C=`calc((100% - ${h}px) / 2)`,w=a>1?f.createElement("div",{className:"typography_preview--label--pJ-5L typography_preview--labelBase--mlEgn ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,eN.tx)("dev_handoff.typography_preview_multiple_styles")):s?f.createElement(a7.D8,{className:"typography_preview--styleName--tA801 typography_preview--labelBase--mlEgn ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:m,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":c,"data-tooltip-show-above":!0},s):null;return f.createElement("div",{className:nb()("typography_preview--previewHighlights--zrIw3",e.imageLoading?"typography_preview--hidden--pKo8l":"typography_preview--shown--6sBFE")},e.error?f.createElement(Gi,{font:t}):f.createElement("div",{className:"typography_preview--centredRow--3-Ofp",style:{marginTop:(p+16-E)/2,height:E}},f.createElement("div",{className:H7,style:{marginTop:v,marginBottom:g-b}},f.createElement("div",{className:nb()(H8,"typography_preview--left--wzNxs")},f.createElement(a7.D8,{className:H9,onClick:u,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inspect_panel.code.font_size"),"data-tooltip-show-above":!0},i))),f.createElement("div",{className:"typography_preview--measurementLines--U03DM",style:{width:h,height:g,left:C,right:C}},f.createElement(Gl,{position:v}),f.createElement(Gl,{position:y}),f.createElement(Gl,{position:b})),f.createElement(bK.J,{className:"typography_preview--borderedPreview--wYbvY",style:{width:h,height:g},src:e.url,onLoad:e.onImageLoaded,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":t?`${t.family} ${t.style}`:void 0,"data-tooltip-show-above":!0}),f.createElement("div",{className:H7},f.createElement("div",{className:nb()(H8,"typography_preview--right--QhAIw")},f.createElement(a7.D8,{className:H9,onClick:d,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inspect_panel.typography.line_height"),"data-tooltip-show-above":!0},r)))),w)}function Gl({position:e}){return f.createElement("div",{className:"typography_preview--measurementLine---lBL5",style:{top:e}})}function Gr(){let[e,t]=f.useState(!1);return(f.useEffect(()=>{let e=setTimeout(()=>t(!0),250);return()=>clearTimeout(e)},[]),e)?f.createElement(re.kt,null):null}function Gi({font:e}){let t=null==e?void 0:e.family,n=(null==e?void 0:e.style)??"",a=t&&!ei.vXe.fontIsLoaded(t,n)&&t?(0,eN.t)("dev_handoff.typography_preview_missing_font",{fontFamily:t,fontStyle:n}):void 0;return f.createElement("div",{className:"typography_preview--previewError--Kwn7m"},f.createElement("span",{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":a},(0,eN.tx)("dev_handoff.typography_preview_not_available")))}let Go=e=>e.toLocaleString("en",{maximumFractionDigits:3,useGrouping:!1}),Gs=e=>{e&&URL.revokeObjectURL(e)},Gc={url:void 0,fullSize:{x:0,y:0},capPosition:0,baselinePosition:0,bottomPosition:0,fontSizeInPx:0,lineHeightInPx:0,fontFamily:"",fontStyle:"",textStyleNodeId:""};function Gd({fillContainer:e=!1}){let t=(0,lh.VW)();return(null==t?void 0:t.type)==="TEXT"?f.createElement(Gt,{fillContainer:e}):f.createElement(In,{fillContainer:e})}var Gu=n(495085);function Gm(){let e=H3(),t=(0,lh.VW)(),n=null==t?void 0:t.description;return e?f.createElement(f.Fragment,null,f.createElement("div",{className:"module_documentation_panel--spacer--fEdqY"}),f.createElement(xX,{description:n,emptyStateText:(0,eN.t)("inspect_panel.templates.no_templates_description")})):null}var Gp=n(118830);function Gf({module:e}){let t=(0,SR.rL)(),n=e.guid,a=t-64,l=(0,Gp.O)({assetId:n,thumbnailVersion:1,width:4*a,height:4*SB,scale:4});return f.createElement(a7.D8,{className:SM,style:null==l?void 0:l.backgroundStyle,role:"button",tabIndex:0},(null==l?void 0:l.url)&&f.createElement(bK.J,{className:SF,src:l.url,style:{maxWidth:a,maxHeight:SB}}))}function G_(){let e=(0,lh.VW)();return(null==e?void 0:e.isModule)?f.createElement(wu.VZ,{title:(0,eN.t)("dev_handoff.inspect_panel.template"),recordingKey:"templatePanel"},f.createElement(Gf,{module:e}),f.createElement(Gm,null)):null}function Gg(){return!!(0,_.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===ei.m1T.DEV_HANDOFF_HISTORY&&e.versionHistory.activeId&&"current_version"!==e.versionHistory.activeId)}var Gh=n(335601);let GE="add_developer_related_link_row--inputRow--0rB-c text--fontPos11--2LvXf text--_fontBase--QdLsd";var Gv=n(949554);function Gy({onCancel:e,onSuccess:t,existingUrls:n,onFocus:a,onUnfocus:l,addExtraPadding:r=!1}){let i=(0,_.wA)(),[o,s]=f.useState(""),[c,d]=f.useState(!1),u=f.useCallback(e=>s(e.target.value),[]),m=(0,eb.eY)(),p=(0,xV.Nf)()??"",g=m.get(p),h=(0,af.tS)(),E=Ne(o),{inputRef:v,inputProps:{onFocus:y,onMouseUp:b,onMouseLeave:C,onKeyUp:w,onChange:T}}=(0,Gh.X)({onChange:u}),x=f.useCallback(async()=>{let e=o;if(!(0,Nt.G)(e)||!(0,Nt.H)(e)){if(e="http://"+e,!(0,xj.FB)(e)||!(0,Nt.G)(e)){i(eS.F.enqueue({message:(0,eN.t)("dev_handoff.developer_related_links.invalid_link"),error:!0,timeoutOverride:2e3}));return}s(e)}if(n.includes(e)){i(eS.F.enqueue({message:(0,eN.t)("dev_handoff.developer_related_links.duplicate_link_error"),error:!0,timeoutOverride:2e3}));return}d(!0),l();let a=(0,x5.DY)({fileKey:h,nodeId:p,url:e,onPost:t,nodeType:null==g?void 0:g.type,source:"web",pluginId:null==E?void 0:E.plugin.plugin_id});try{let e=await a;d(!1);let t=x5.Rb.safeParse(e.data);if(!t.success||!E)return;let n=t.data.meta;E.genPreview({link:{id:n.id,linkUrl:n.link_url,linkName:n.link_name,linkPreview:null,linkPreviewJson:"",nodeId:n.node_id,fileKey:n.file_key,isUserOverride:n.is_user_override,isInherited:!1}})}catch(e){console.error(e),i(eS.F.enqueue({message:(0,eN.t)("dev_handoff.developer_related_links.link_error",{errorMessage:e.message}),error:!0,timeoutOverride:2e3}))}finally{d(!1)}},[o,n,l,h,p,t,i,null==g?void 0:g.type,E]),N=async t=>{"Enter"===t.key&&!t.shiftKey&&o?await x():"Escape"===t.key&&e()};if(f.useEffect(()=>{let t=t=>{v.current&&!v.current.contains(t.target)&&(o&&""!==o?x():e())};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[e,v,x,o]),c){let e=new URL(o).host;return e.startsWith("www.")&&(e=e.slice(4)),f.createElement(iy.fI,{className:GE},f.createElement(re.kt,{className:"add_developer_related_link_row--loadingSpinner--zWFF2"}),f.createElement(iy.UZ,null,e))}return f.createElement(iy.fI,{className:nb()(GE,r&&a8.cx.pb8.$)},f.createElement(a2.B,{svg:Gv.A,className:a8.cx.colorIconSecondary.$}),f.createElement(Av.L,{ref:v,className:"add_developer_related_link_row--input--4Y-uG",onFocus:e=>{y(e),a()},onMouseUp:b,onMouseLeave:C,onChange:T,onKeyDown:N,onKeyUp:w,value:o,placeholder:(0,eN.t)("dev_handoff.developer_related_links.link_placeholder"),autoCorrect:"off",recordingKey:"devRelatedLinkUrlInput",autoFocus:!0}))}var Gb=n(330654);let GC=Gb.object({type:Gb.literal("PLAIN_TEXT"),text:Gb.string()}),Gw=Gb.union([GC,Gb.null()]),GT=Gb.object({type:Gb.literal("AUTH_REQUIRED")}),Gx=(Gb.union([GT,GC,Gb.null()]),Gb.object({type:Gb.literal("AUTH_SUCCESS")}));function GN(e){if(!e)return null;try{let t=JSON.parse(e),n=Gw.safeParse(t);if(!n.success)return null;return n.data}catch(t){return(0,o2.$D)(o5.e.DEVELOPER_TOOLS,t,{extra:{previewJson:e}}),null}}function GS(e,t){let n=(0,eW.Rs)(eJ.Ssd,{fileKey:e,nodeId:t});return(0,oC.k9)(()=>{var e;return"loaded"===n.status&&(null==(e=n.data.file)?void 0:e.developerRelatedLinksForNode)?[n.data.file.developerRelatedLinksForNode.map(e=>({...e,linkPreview:GN(e.linkPreviewJson)})),"loaded"]:[[],n.status]},[n])}Gb.union([Gx,Gb.null()]);let Gk=(0,cV.Ju)(function(e){let t=e.linkId,n=(0,xV.Nf)()??"",a=(0,af.tS)(),l=(0,eb.eY)().get(n),r=(0,_.wA)(),i=async()=>{if(!a||!n)return;let e=(0,x5.Tz)({fileKey:a,linkId:t,nodeId:n,nodeType:null==l?void 0:l.type,source:"web"});r(ty.Ce());try{await e}catch(e){console.error(e),r(eS.F.enqueue({message:`Could not delete link: ${e.message}`,error:!0,timeoutOverride:2e3}))}};return f.createElement(cK.Rw,{destructive:!0,confirmationTitle:(0,eN.tx)("dev_handoff.developer_related_links.delete_link"),confirmText:(0,eN.tx)("dev_handoff.developer_related_links.delete_link"),onConfirm:i},f.createElement("p",null,(0,eN.tx)("dev_handoff.developer_related_links.delete_link_text_body")))},"DeveloperRelatedLinksDeleteModal");var GI=n(189430);let GA="developer_related_links_edit_modal--fieldContainer--Twtv-",GO="developer_related_links_edit_modal--label--cxfFD",GL=(0,cV.Ju)(function({initialLink:e}){var t;let{id:n,linkName:a,linkUrl:l}=e,[r,i]=f.useState(l),o=null==(t=e.linkPreview)?void 0:t.text,[s,c]=f.useState(!e.isUserOverride&&o?"":a),[d,u]=f.useState(!1),m=(0,xV.Nf)()??"",p=(0,af.tS)(),g=(0,eb.eY)().get(m),h=(0,_.wA)(),{windowInnerHeight:E,windowInnerWidth:v}=(0,GI.l)(),y=f.useMemo(()=>new r4.Mi(v/2-160,E/3),[E,v]),C=f.useCallback(e=>c(e.target.value),[]),w=f.useCallback(e=>i(e.target.value),[]),{inputRef:T,inputProps:{onFocus:x,onMouseUp:N,onMouseLeave:S,onKeyUp:k,onChange:I}}=(0,Gh.X)({onChange:C}),A=Ne(r),{inputRef:O,inputProps:{onFocus:L,onMouseUp:P,onMouseLeave:D,onKeyUp:R,onChange:M}}=(0,Gh.X)({onChange:w}),F=async()=>{let t;if(!m||!p)return;let i=r;if((!(0,Nt.G)(i)||!(0,Nt.H)(i))&&(i="http://"+i,!(0,Nt.G)(i))){h(eS.F.enqueue({message:(0,eN.t)("dev_handoff.developer_related_links.invalid_link"),error:!0,timeoutOverride:2e3}));return}u(!0);let o=s;s&&""!==s||(o=await (0,x5.yf)(i)),r!==l&&s!==a?t=!0:r!==l?A&&(t=!1):s!==a&&(t=!!s||!e.linkPreview);let c=(0,x5.Cq)({fileKey:p,nodeId:m,linkId:n,name:o,url:i,isUserOverride:t,clearLinkPreview:r!==l,nodeType:null==g?void 0:g.type,source:"web",pluginId:null==A?void 0:A.plugin.plugin_id});A&&!t&&A.genPreview({link:{...e,linkUrl:r,linkName:s,isUserOverride:!1}}),h(ty.Ce());try{await c}catch(e){console.error(e),h(eS.F.enqueue({message:`Could not edit link: ${e.message}`,error:!0,timeoutOverride:2e3}))}},B=d||!r||a===s&&l===r,U=e=>{e.keyCode===b.Uz.ENTER&&!e.shiftKey&&s&&r?F():e.keyCode===b.Uz.ESCAPE&&h(ty.Ce())};return f.createElement(ae.Wx,{initialWidth:320,onClose:()=>{h(ty.Ce())},initialPosition:y,disableDragging:!0,clickOutsideToHide:!0},f.createElement(ux.i,{displayAs:ux.C.Block},f.createElement("div",{className:"developer_related_links_edit_modal--header--mb7eN"},(0,eN.tx)("dev_handoff.developer_related_links.edit_link"),f.createElement(tN.Jn,{onClick:()=>h(ty.Ce())})),f.createElement("div",{className:GA},f.createElement("p",{className:GO},(0,eN.tx)("dev_handoff.developer_related_links.link")),f.createElement(Av.L,{ref:O,className:"developer_related_links_edit_modal--input--mw5Qe",onFocus:L,onMouseUp:P,onMouseLeave:D,onChange:M,onKeyDown:U,onKeyUp:R,value:r,autoCorrect:"off",recordingKey:"devRelatedLinkUrlInput",disabled:d})),f.createElement("div",{className:GA},f.createElement("p",{className:GO},(0,eN.tx)("dev_handoff.developer_related_links.name")),f.createElement("div",{className:"developer_related_links_edit_modal--inputContainer--jplkF"},f.createElement("div",{className:"developer_related_links_edit_modal--favicon--aNxtZ"},f.createElement(C6.v,{url:l})),f.createElement(Av.L,{ref:T,className:"developer_related_links_edit_modal--inputName--oSwwG",onFocus:x,onMouseUp:N,onMouseLeave:S,onChange:I,onKeyDown:U,onKeyUp:k,value:s,autoCorrect:"off",autoFocus:!0,recordingKey:"devRelatedLinkNameInput",disabled:d,placeholder:o}))),f.createElement("div",{className:"developer_related_links_edit_modal--buttons--6eqGy"},f.createElement(so.nR,{onClick:()=>h(ty.Ce())},(0,eN.tx)("dev_handoff.developer_related_links.cancel")),f.createElement(so.$$,{onClick:F,disabled:B,type:"submit"},(0,eN.tx)("dev_handoff.developer_related_links.edit_link")))))},"DeveloperRelatedLinksEditModal"),GP="developer_related_links_panel--addButton--0Fv7K draggable_list--addButton--D0q--",GD="developer_related_links_panel--hint--n8Jpr text--fontPos11--2LvXf text--_fontBase--QdLsd";var GR=n(486585);let GM="dev_handoff_dev_resources_plus_icon_clicked_once",GF=(0,e4.eU)(!1);function GB({links:e,status:t,isVariant:n=!1}){return"loaded"!==t||"loaded"===t&&0===e.length?null:f.createElement(f.Fragment,null,e.map(e=>f.createElement(Nl,{key:e.linkUrl,isEditable:!1,link:{...e,isInherited:!0,isVariant:n},onOpenDeleteModal:nf.lQ,onOpenEditModal:nf.lQ})))}function GU(){let e=(0,_.wA)(),t=(0,xV.Nf)()??"",n=(0,af.uL)()??"",a=(0,eb.eY)(),l=(0,lh.uQ)(),r=(0,_.d4)(e=>e.mirror.appModel.currentPage),i=a.get(l??r),o=(null==i?void 0:i.type)==="SYMBOL"||(null==i?void 0:i.isStateGroup),s=(0,bB.wS)(),c=(0,a6.U)(),d=(0,ag.LS)(),u=!!(0,eT.f)(GM),m=function(){let e=Gg(),t=(0,af.q5)(),n=null==t?void 0:t.repo,a=!!(t&&n&&(0,Cf.Ns)(t,n))||!n;return!e&&a}(),p=Gg(),[g,h]=function(e){let t=(0,eW.Rs)(eJ.jJU,{fileKey:e});return(0,oC.k9)(()=>{var e;return"loaded"===t.status&&(null==(e=t.data.file)?void 0:e.developerRelatedLinks)?[t.data.file.developerRelatedLinks.map(e=>({...e,linkPreview:GN(e.linkPreviewJson)})),"loaded"]:[[],t.status]},[t])}(n),E=f.useMemo(()=>g.filter(e=>e.nodeId===t)??[],[g,t]),[v,y]=f.useState(!1),{singleBackingSymbol:b,singleBackingStateGroup:C}=(0,TW.$)([(null==i?void 0:i.guid)??""]),{backingSymbol:w,backingStateGroup:T}=(0,bB.Bv)(b,C),x="loaded"===s.status,N=(null==i?void 0:i.type)==="INSTANCE"||x,k=(0,xW.yW)(w),[I,A]=GS(k??"",(null==w?void 0:w.publishID)??""),[O,L]=GS(k??"",(null==T?void 0:T.publishID)??""),P=!!k&&k!==n,D=null==w?void 0:w.guid;N&&D&&!P&&(I=g.filter(e=>e.nodeId===D)??[],A=h),N&&T&&!P&&(O=g.filter(e=>e.nodeId===T.guid)??[],L=h);let[R,M]=f.useState(!1),F=f.useCallback(()=>{(null==i?void 0:i.isAlive())&&(M(!0),u||e(j.b({[GM]:!0})),c("Dev Handoff Related Links Click Plus Icon",{nodeId:t,nodeType:null==i?void 0:i.type,source:"web"}))},[u,c,t,i,e]),[B,U]=(0,S.fp)(GF);f.useEffect(()=>{B&&(F(),U(!1))},[B,F,U]);let H=m&&E.length<10,G=f.useMemo(()=>g&&function(e,t,n){let a=new Map,l=new Map;return e.forEach(e=>{var r,i;if(ei.glU.getPageIdFromNode(e.nodeId)!==n)return;let o=t.get(e.nodeId);for(;o;){let t=l.get(o.guid);if(t){null==(r=a.get(t))||r.push(e);return}let n=o.parentNode;if(!n||"SECTION"===o.type||"CANVAS"===o.type)return;if("FRAME"===o.type&&!o.isStateGroup&&!o.resizeToFit&&((null==n?void 0:n.type)==="SECTION"||(null==n?void 0:n.type)==="CANVAS")){a.get(o.guid)?null==(i=a.get(o.guid))||i.push(e):a.set(o.guid,[e]),l.set(e.nodeId,o.guid);return}o=n}}),a}(g,a,r),[g,t,r]);if(0===E.length&&p)return null;let V=sL.z4.getIsExtension(),K=t=>{e((0,ty.to)({type:GL,data:{initialLink:t}}))},W=(t,n)=>{e((0,ty.to)({type:Gk,data:{linkId:t,initialLinkUrl:n}}))},z=(null==i?void 0:i.type)==="SECTION"&&G&&function(e,t){let n=new Map;for(let a of t.childrenNodes){let t="FRAME"===a.type&&e.get(a.guid);t&&n.set(a.guid,t)}return n}(G,i),J=E.length>0||R||I.length>0||O.length>0||!d&&G&&G.size>0||z&&z.size>0,Y="loaded"===h&&"loaded"===A&&"loaded"===L;return f.createElement(wu.VZ,{title:(0,eN.t)("dev_handoff.developer_related_links.links"),recordingKey:"developerLinks",headerChildren:f.createElement(f.Fragment,null,!Y&&f.createElement(iy.fI,{className:"developer_related_links_panel--spinner--2ofDP draggable_list--addButton--D0q--"},f.createElement(re.kt,{className:GP})),Y&&H&&!v&&f.createElement(iy.K0,{className:GP,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.developer_related_links.add_link_button"),svg:IF.A,onClick:F,recordingKey:"addDevRelatedLink"})),hideHeader:V},!J&&(!u||V)&&Y&&f.createElement(iy.fI,{className:nb()("developer_related_links_panel--spinnerContainer--d-B-K")},f.createElement(iy.UZ,{className:nb()(V?"developer_related_links_panel--hintExtension--KCW5n text--fontPos11--2LvXf text--_fontBase--QdLsd":GD)},(0,eN.tx)("dev_handoff.developer_related_links.empty_info"))),E.map(e=>f.createElement(Nl,{key:e.linkUrl,isEditable:m&&"figmadoc"!==e.id,link:{...e,isInherited:!1},onOpenDeleteModal:W,onOpenEditModal:K})),R&&f.createElement(Gy,{onCancel:()=>{M(!1),y(!1)},onSuccess:()=>{M(!1),y(!1)},onFocus:()=>y(!0),onUnfocus:()=>y(!1),existingUrls:E.map(e=>e.linkUrl),addExtraPadding:!(I.length>0||O.length>0||E.length>0)}),T&&N&&f.createElement(GB,{status:L,links:O}),I&&N&&f.createElement(GB,{status:A,links:I,isVariant:null!==T}),f.createElement(GV,{links:[...E,...I,...O]}),!d&&G&&f.createElement(GH,{frameToLinks:G}),(null==i?void 0:i.type)==="SECTION"&&z&&f.createElement(GH,{frameToLinks:z}),J&&!R&&o&&f.createElement(iy.UZ,{className:nb()(GD)},(0,eN.tx)("dev_handoff.developer_related_links.component_inherited_links_desc")))}function GH(e){let t=(0,eb.eY)();return f.createElement(f.Fragment,null,Array.from(e.frameToLinks.entries()).map(([n,a],l)=>f.createElement(GG,{key:l,guid:n,sceneGraph:t,links:a,isLast:l===e.frameToLinks.size-1})))}function GG(e){let{guid:t,sceneGraph:n}=e,[a,l]=f.useState(!1),r=n.get(t),[i,o]=f.useState(!1);if(!r)return null;let s=r.name;return i||(s=s+" ("+e.links.length+")"),f.createElement("div",{className:nb()(i&&!e.isLast&&a8.cx.pb8.$),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1)},f.createElement("div",{className:nb()("developer_related_links_panel--sectionHeader--VHgzU","developer_related_links_panel--item--fwiWa"),onMouseDown:e=>{e.stopPropagation(),o(!i)},role:"button",tabIndex:0,"data-fullscreen-intercept":!0},f.createElement(a2.B,{className:"developer_related_links_panel--expandCaret--2h9sN",svg:i?Cz.A:Ol.A}),f.createElement(xU.Bf,{className:"developer_related_links_panel--layerIcon--NG2rK",guid:r.guid}),f.createElement("div",{className:"developer_related_links_panel--sectionName--xeFyg text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},s),a&&f.createElement(iy.K0,{onClick:()=>ei.w3z.selectAndFocusOnNode(r.guid,!0),className:"developer_related_links_panel--goToTargetButton--JZoyi",onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.developer_related_links.select_frame"),svg:GR.A})),i&&e.links.map((e,t)=>f.createElement(Nl,{key:t,link:{...e,isInherited:!1,isNested:!0},isEditable:!1,onOpenDeleteModal:nf.lQ,onOpenEditModal:nf.lQ})))}function GV({links:e}){let[t,n]=(0,S.fp)(x0),a=f.useMemo(()=>{let n=new Set(e.map(e=>e.linkUrl));return Object.values(t).filter(e=>!!e&&e.links.some(e=>n.has(e.linkUrl)))},[e,t]);async function l({links:e,plugin:t}){if(await x4.instance.runAuth({plugin:t,links:e.map(e=>({url:e.linkUrl,name:e.linkName,isInherited:e.isInherited,nodeId:e.nodeId}))})){n(e=>{let n={...e};return delete n[t.plugin_id],n});try{await Promise.all(e.map(e=>x4.instance.generateLinkPreview({plugin:t,link:e})))}catch(e){console.error(e)}}}return a&&0!==a.length?f.createElement(fy.Y,{spacing:4,direction:"vertical",width:"fill-parent",horizontalAlignItems:"start",padding:{top:4,left:16}},Array.from(a).map((e,t)=>f.createElement(sc.E,{key:t},(0,eN.tx)("dev_handoff.related_links.plugin.auth_required",{button:f.createElement("button",{className:a8.cx.colorTextBrand.bgTransparent.$,onClick:()=>l({links:e.links,plugin:e.plugin})},f.createElement(sc.E,null,(0,eN.tx)("dev_handoff.related_links.plugin.connect_to",{pluginName:e.plugin.name})))})))):null}var GK=n(621856);function GW({initialInspectionMode:e,initialCodeLanguage:t}={}){let n=(0,S.md)(wK.hq),[a,l]=(0,f.useState)(e??n),r=(0,wR.v4)(),[i,o]=(0,f.useState)(t??r),s=(0,wz.aq)(i),c=(0,wV.ZA)(i,s),d=(0,GK.q)(i),u=(0,wz.gc)(i.id),m=(0,Tu.V0)({codeLanguage:i,onChange:o}),p=(0,wK.Ar)();return{inspectionMode:p.find(e=>e===a)||p[0],setInspectionMode:l,supportsAlternativeUnits:c,preferenceOptions:d,preferences:u,codeLanguageApi:m,inspectionModes:p}}var Gz=n(499777);let Gj="selection_styles_panel--styleDetailsContainer--K3XsP",GJ=(0,lf.jz)(lw.q9j),GY="dev_handoff_selection_style_modal";function GX(){let e=Iw("EFFECT"),t=Iw("TEXT"),n=(0,Gz.Xo)(),a=(0,_.wA)(),l=!!n&&n.id===GY;return f.useEffect(()=>()=>{l&&a(K.XE())},[a,l]),f.createElement(f.Fragment,null,e.visibleItems.length>0&&f.createElement(wu.VZ,{title:(0,eN.t)("dev_handoff.selection_effect_styles"),recordingKey:"handoffEffectStyles"},e.visibleItems.map(e=>f.createElement(Gq,{key:null==e?void 0:e.key,styleData:e})),e.showMoreButton),t.visibleItems.length>0&&f.createElement(wu.VZ,{title:(0,eN.t)("dev_handoff.selection_text_styles"),recordingKey:"handoffTextStyles"},t.visibleItems.map(e=>f.createElement(Gq,{key:null==e?void 0:e.key,styleData:e})),t.showMoreButton),l&&f.createElement(GZ,null))}function Gq({styleData:e}){let t=f.useRef(null),n=(0,Gz.Xo)(),a=(0,_.wA)(),l=f.useCallback(()=>{t.current&&(n&&a(K.XE()),a(K.u1({id:GY,initialX:t.current.getBoundingClientRect().left-GJ,initialY:t.current.getBoundingClientRect().top,data:e})))},[a,n,e]);return f.createElement("div",{className:"selection_styles_panel--styleRow--t--sj",onClick:l,onMouseEnter:()=>ei.kTx.highlightOnlySameStyleInSublayers(e.guids),onMouseLeave:()=>ei.kTx.highlightOnlySameStyleInSublayers([]),ref:t},f.createElement("div",{className:"selection_styles_panel--icon--6ej2T"},f.createElement(IS.zi,{dsStyle:e,disableTooltip:!0})),f.createElement("div",{className:"selection_styles_panel--styleName--Xz37G text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},e.styleName))}function GZ(){let e=(0,Gz.Xo)(),t=(0,_.wA)(),n=f.useCallback(()=>{t(K.XE())},[t]);if(!e||e.id!==GY)return null;let{style_type:a,name:l,styleNodeId:r}=e.data,i=new r4.Mi(e.initialX,e.initialY);return f.createElement(ae.vx,{title:l,headerSize:"small",initialWidth:GJ,initialPosition:i,initialConstraints:{x:"left",y:"top"},maxHeight:420,onClose:n,dragHeaderOnly:!0,alwaysEnsureModalOnScreen:!0,alwaysEnsureHeaderModalOnScreen:!0,recordingKey:"handoffStyleDetailsModal"},f.createElement("EFFECT"===a?GQ:G1,{styleNodeId:r}))}function GQ({styleNodeId:e}){let t=GW(),n=(0,cp.Fk)(t=>{let n=t.get(e);if(n&&n.isAlive())return n.effects.reverse()});if(!n)return null;let a="properties"===t.inspectionMode?f.createElement("div",{className:"selection_styles_panel--effectStyleProperties--kGKRY"},n.map((t,n)=>f.createElement(Hj.r,{key:`${e}-${n}`,...t}))):f.createElement(Hw,{overrideNodeId:e,hideLayoutSection:!0,sectionClassName:"selection_styles_panel--effectStyleCodeSection--7T-TK",localCodeLanguage:t.codeLanguageApi.codeLanguage});return f.createElement("div",{className:Gj},f.createElement(G2,{preferencesApi:t,dropdownPrefix:"effectStyle"}),a)}function G$({styleNodeId:e}){let{isNodeInvalid:t,family:n,style:a,weight:l,size:r,lineHeight:i,letterSpacing:o}=(0,cp.Fk)(t=>{let n=t.get(e);return n&&n.isAlive()?{family:null==n?void 0:n.fontName.family,style:null==n?void 0:n.fontName.style,weight:null==n?void 0:n.fontWeightOrMixed,size:null==n?void 0:n.fontSize,lineHeight:(null==n?void 0:n.lineHeightOrMixed)==="mixed"?void 0:null==n?void 0:n.lineHeightOrMixed,letterSpacing:null==n?void 0:n.letterSpacing}:{isNodeInvalid:!0}});return t?null:f.createElement(wu.VZ,{hideHeader:!0,padding:wu.UZ.NONE,noBorder:!0,recordingKey:"textStyleDetails"},f.createElement(Gn,{nodeId:e}),f.createElement("div",{className:"selection_styles_panel--textStyleProperties--DgbCN"},f.createElement(wu._p,{name:(0,eN.t)("inspect_panel.typography.font"),value:n}),f.createElement(wu._p,{name:(0,eN.t)("inspect_panel.typography.weight"),value:l}),f.createElement(wu._p,{name:(0,eN.t)("inspect_panel.typography.style"),value:a}),f.createElement(wu.YE,{name:(0,eN.t)("inspect_panel.typography.size"),value:r}),f.createElement(wu.di,{name:(0,eN.t)("inspect_panel.typography.line_height"),value:i}),f.createElement(wu.di,{name:(0,eN.t)("inspect_panel.typography.letter"),value:o})))}function G0({styleNodeId:e,codeLanguage:t}){return f.createElement(f.Fragment,null,f.createElement(wu.VZ,{hideHeader:!0,padding:wu.UZ.NONE,noBorder:!0,recordingKey:"textStyleDetails"},f.createElement(Gn,{nodeId:e})),f.createElement(Hw,{overrideNodeId:e,hideLayoutSection:!0,sectionClassName:"selection_styles_panel--textStyleCodeSection---86O2",localCodeLanguage:t}))}function G1({styleNodeId:e}){let t=GW(),n="properties"===t.inspectionMode?f.createElement(G$,{styleNodeId:e}):f.createElement(G0,{styleNodeId:e,codeLanguage:t.codeLanguageApi.codeLanguage});return f.createElement("div",{className:Gj},f.createElement(G2,{preferencesApi:t,dropdownPrefix:"textStyle"}),n)}function G2({preferencesApi:e,dropdownPrefix:t}){return f.createElement("div",{className:"selection_styles_panel--preferencesRow--7Wgoe"},f.createElement(T_,{preferencesApi:e,inspectionModeLayout:"tabs",dropdownPrefix:t}))}function G5(){return(0,H2.VX)(HQ.s4.FILL),(0,H2.VX)(HQ.s4.STROKE),(0,H2.VX)(HQ.s4.TEXT),(0,H2.VX)(HQ.s4.EFFECT),null}function G4(e){let t=(0,mP.q)(),n=(0,ag.LS)(),a=(0,xV.ro)(),l=H3(),r=(0,lh.VW)(),i=(0,lh.NM)(),o=(0,wK.sQ)(),s=(0,kq.AF)(),c=(0,kq.h)(),d=(0,nT.U)(),u=f.useRef(null),m=(0,eb.eY)(),p=sL.z4.getIsExtension(),_=(0,Uj.$F)(r),g=(0,S.md)(Te.be),[h,E]=f.useState(!1);f.useEffect(()=>{E(!1)},[null==r?void 0:r.guid]);let v=(0,Nv.mr)((null==r?void 0:r.guid)??"",m),b=(0,y.kc)().dt_figmadoc&&v&&a&&!h;return f.createElement("div",{className:Bu},t&&f.createElement(H$.Mw,{panelName:H$.ON.HANDOFF}),f.createElement(HE,{plugin:g??null}),n&&!p&&f.createElement(kz,{lastViewTimestamp:e.lastViewTimestamp}),i&&!p&&f.createElement(kK,null),f.createElement(G5,null),f.createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},f.createElement(i6.P,{ref:u,className:"inspect_panel--scrollContainer--wwC0l properties_panel--scrollContainer--o2LxW",onContextMenu:nf.lQ,scrollingDisabled:!!d},f.createElement(Y.fu,{name:eQ.e0.CODE_PANEL},f.createElement(ux.i,null,f.createElement("div",{className:p?"inspect_panel--inspectPanelContentsBottomAligned--MOK20":"inspect_panel--inspectPanelContents--iYf8P"},n?f.createElement(f.Fragment,null,a&&f.createElement(ke,null),(0,y.kc)().dse_editor_templates_v1&&l&&f.createElement(G_,null),f.createElement(GU,null),b?f.createElement("div",{className:"inspect_panel--inspectLayerPropertiesButtonContainer--zgz1r"},f.createElement(va.IK,{onClick:()=>E(!0),variant:"secondary"},(0,eN.tx)("dev_handoff.inspect_panel.show_more_properties"))):f.createElement(f.Fragment,null,f.createElement(HZ,null),_&&f.createElement(f.Fragment,null,f.createElement("div",{className:a8.cx.pt4.$},f.createElement(Tf,null)),f.createElement("div",{className:nb()("inspect_panel--layerPreview--hxLhR",sL.z4.getIsExtension()&&"inspect_panel--isInExtension--kzn7u")},f.createElement(Gd,null)),f.createElement(Gu.J,null),o&&s?f.createElement(Hw,null):f.createElement(HX,null)),f.createElement(w3,null),f.createElement(H0.t,null),_&&f.createElement(Ik,null),(0,y.kc)().dt_lego_selection_styles&&f.createElement(GX,null),f.createElement(H5.L,null)),f.createElement(H4.L,null)):i?f.createElement(f.Fragment,null,f.createElement(Ik,null),(0,y.kc)().dt_lego_selection_styles&&f.createElement(GX,null),f.createElement(H5.L,null),f.createElement(H4.L,null)):f.createElement(f.Fragment,null,c&&f.createElement(Hc,null),s&&f.createElement(BK.$b,null),f.createElement(H1.A,null),f.createElement(GU,null),f.createElement(HK,null)),f.createElement("div",null)))))))}var G3=n(31913),G6=n(31378);let G7=()=>{et.Y5.triggerAction("deselect-all")};function G8({version:e}){let t=(0,nS.R)(),n=(0,_.wA)(),a=(0,tR.hA)(),l=function(e,t){if(!t.dev_mode_activity||0===t.dev_mode_activity.length)return;let n=e?t.dev_mode_activity.find(t=>t.node_id===e):t.dev_mode_activity[0];if(n)return{id:n.id,activityType:n.activity_type,timestamp:new Date(n.timestamp),versionId:n.version_id,user:{id:t.user.id,name:t.user.handle,imgUrl:t.user.img_url},metadata:n.metadata}}(a,e),r=a&&l?f.createElement(HM,{activity:l}):f.createElement(Tj.YL,{item:e});return f.createElement(Tj.jP,{description:e.description,label:"activity-row",displayText:r,view:null,iconOverride:l?HH(t,l,!0):void 0,onSelect:nf.lQ,isActive:!0,user:e.user.handle,userUrl:e.user.img_url,isAllowedToChangeVersion:()=>!1,versionId:e.id,dispatch:n,first:!1,last:!0,isUI3:t,editorType:a_._Y.DESIGN,time:a?void 0:e.edited_at})}function G9({versions:e}){var t;let n=HU(),{activeId:a}=(0,_.d4)(e=>e.versionHistory),l=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.canEdit}),r=(0,_.wA)(),i=(0,tR.hA)(),o=HG(),s=HB(),c=n?e[0]:e.find(e=>e.id===a),d=new lE.q(EV.ju.LIVE_FILE).get(i??""),u=null==(t=null==d?void 0:d.editInfo)?void 0:t.lastEditedAt;return c?f.createElement("div",{className:a8.cx.flex.flexColumn.borderBox.bSolid.bb1.colorBorder.$},i?null:f.createElement(Tj.s3,{onClose:s,addSavepoint:()=>{r((0,ty.to)({type:G6.yU,data:{}})),G7()},isViewOnly:!l}),f.createElement("div",null,f.createElement(HV,{lastEditedAt:u,hasEdits:!1,isActive:n,onSelect:()=>{i?o(i):(r(G3.Fm({id:wq.V_})),G7())}}),!n&&f.createElement(G8,{version:c})),f.createElement(a1.N_,{className:a8.cx.flex.pt6.pb6.pl16.pr16.itemsCenter.$,onClick:G7,trusted:!0},(0,eN.tx)("dev_handoff.version_history.view_all_versions"))):null}let Ve=f.memo(function(){let{commentsActive:e,isNodeSelected:t,versionHistoryActive:n}=(0,N.R)(e=>({commentsActive:e.mirror.appModel.currentTool===lc.ec.tool,isNodeSelected:Object.keys(e.mirror.sceneGraphSelection).length>0,versionHistoryActive:e.mirror.appModel.activeCanvasEditModeType===ei.m1T.DEV_HANDOFF_HISTORY})),a=(0,n6.GS)(),l=(0,tR.hA)(),r=(0,S.md)(b8.H),i=(0,C4.E1)(),o=(0,TD.jh)(l??void 0);b9({doReport:!0});let s=n&&!t&&!l,c=n&&t,d=r===b8._.PRIMARY&&!e&&!s;return f.createElement(Bo.vL,{name:"rightPanels",focusOnMount:!0,handleKeyDown:nf.lQ},f.createElement("div",{id:"dev-handoff-inspect-panel"},f.createElement(Hh,null,s&&f.createElement(Tj.yU,{isUI3:a}),c&&f.createElement(G9,{versions:o.versions}),e&&f.createElement(Ba,null),d&&f.createElement(G4,{lastViewTimestamp:i}),f.createElement(Hm,null))))});var Vt=n(949632);let Vn="dev_handoff_index_view_zoom_control--button--1x9ib",Va="dev_handoff_index_view_zoom_control--zoomButton--l1ZDl";var Vl=n(819785);function Vr(){let{Dropdown:e,toggleDropdown:t,dropdownTargetRef:n}=(0,w0.B)("DEV_HANDOFF_INDEX_VIEW_ZOOM_DROPDOWN"),a=(0,CA.Zr)("zoom-out"),l=(0,CA.Zr)("zoom-in"),r=Math.round(100*(0,aN.J2)((0,Vt.d)().activeCanvasCurrentZoom)).toString(),i=[{displayText:(0,eN.t)("dev_handoff.vscode.zoom_control.zoom_options_actual_size"),callback:()=>ei.glU.setCanvasZoomScale(1)},{displayText:(0,eN.t)("dev_handoff.vscode.zoom_control.zoom_options_fit_to_screen"),callback:()=>ei.w3z.setFocusZoomLevel(ei.i1K.FIT_TO_SCREEN)},{displayText:(0,eN.t)("dev_handoff.vscode.zoom_control.zoom_options_fit_to_width"),callback:()=>ei.w3z.setFocusZoomLevel(ei.i1K.FIT_TO_WIDTH)},{displayText:(0,eN.t)("dev_handoff.vscode.zoom_control.zoom_options_fill_screen"),callback:()=>ei.w3z.setFocusZoomLevel(ei.i1K.FILL_SCREEN)}];return f.createElement("div",{className:"dev_handoff_index_view_zoom_control--container--oBEBg",ref:n},f.createElement("div",{className:Vn},f.createElement(iG.K0,{className:Va,svg:Vl.A,onClick:()=>et.Y5.triggerAction("zoom-out",{source:"vscode-zoom-menu"}),disabled:!a,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.vscode.zoom_control.zoom_out_button")})),f.createElement("button",{className:"dev_handoff_index_view_zoom_control--zoomLevel--uI6yg text--fontPos11--2LvXf text--_fontBase--QdLsd",style:{width:`${Math.max(r.length,4)}em`},onClick:t},r,"% ",f.createElement(a2.B,{svg:op.A})),f.createElement("div",{className:Vn},f.createElement(iG.K0,{className:Va,svg:IF.A,onClick:()=>et.Y5.triggerAction("zoom-in",{source:"vscode-zoom-menu"}),disabled:!l,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.vscode.zoom_control.zoom_in_button")})),f.createElement(e,{items:i,showPoint:!0,displayAboveTarget:!0}))}var Vi=n(961747),Vo=n(553551);let Vs="dev-handoff-breadcrumbs-dropdown",Vc="dev-handoff-collapsed-breadcrumb-dropdown";function Vd(e){return!!e}function Vu(){let e=f.useRef(null),[t,n]=f.useState(null),a=f.useCallback(()=>{var t;n((null==(t=null==e?void 0:e.current)?void 0:t.getBoundingClientRect())||null)},[e]);return f.useEffect(()=>(a(),Vi._.addListener(a),window.addEventListener("resize",a),()=>{Vi._.removeListener(a),window.removeEventListener("resize",a)}),[a]),[e,t,a]}function Vm({selectedNode:e,targetRect:t}){let n=(0,_.wA)(),a=(e=>{let t=e.parentNode;return(null==t?void 0:t.childrenNodes)??[e]})(e).map(t=>{let n=t?function({children:e}){return e.map(e=>({displayText:e.name,onMouseEnter:()=>aT.Uc(e.guid),onMouseExit:()=>aT.Uc(""),icon:f.createElement(xU.Bf,{guid:e.guid,isMenuIcon:!0}),callback:()=>aT.tJ([e.guid])})).filter(Vd)}({children:t.childrenNodes}):void 0;return t?{displayText:(null==t?void 0:t.name)??"",isChecked:t.guid===e.guid,onMouseEnter:()=>aT.Uc(t.guid),onMouseExit:()=>aT.Uc(""),icon:f.createElement(xU.Bf,{guid:(null==t?void 0:t.guid)??"",isMenuIcon:!0}),callback:()=>aT.tJ([t.guid]),children:n&&n.length>0?n:void 0,callbackOnClickWithChildren:!0}:null}).filter(Vd);return f.createElement(iV.j,{showPoint:!1,items:a,onSelectItem:e=>{e.callback&&e.callback("",null,n)},parentRect:t,dispatch:n,displayAboveTarget:!0})}function Vp({nodeID:e}){let t=(0,_.wA)(),[n,a,l]=Vu(),r=(0,nT.U)(),i=(0,eb.eY)().get(e);if(!i)return null;let o=(null==r?void 0:r.type)===Vs,s="INSTANCE"===i.type||"SYMBOL"===i.type;return f.createElement(f.Fragment,null,o&&a&&f.createElement(Vm,{selectedNode:i,targetRect:a}),f.createElement("button",{className:"dev_handoff_breadcrumbs--pathElementSelected--w9aeS dev_handoff_breadcrumbs--pathElement--AKgt0",onClick:function(){l(),o||t(nI.j7({type:Vs,data:{hasOwnEscKeyHandler:!1}}))},ref:n,title:i.name},f.createElement(xU.Bf,{guid:i.guid,className:s?"dev_handoff_breadcrumbs--layerIconPurple--Qit6B":"dev_handoff_breadcrumbs--layerIcon--jR8ti"}),i.name))}function Vf({nodeID:e}){let t=(0,eb.eY)().get(e);return t?f.createElement("button",{title:t.name,className:"dev_handoff_breadcrumbs--pathElement--AKgt0",onClick:()=>aT.tJ([t.guid]),onMouseEnter:()=>aT.Uc(t.guid),onMouseLeave:()=>aT.Uc("")},t.name):null}function V_({nodeIDs:e}){let t=(0,_.wA)(),[n,a,l]=Vu(),r=(0,nT.U)(),i=(null==r?void 0:r.type)===Vc,o=(0,eb.eY)(),s=e.map(o.get).filter(gq.Vq),c=s.map(e=>({displayText:e.name,onMouseEnter:()=>aT.Uc(e.guid),onMouseExit:()=>aT.Uc(""),icon:f.createElement(xU.Bf,{guid:e.guid,isMenuIcon:!0}),callback:()=>aT.tJ([e.guid])}));return f.createElement(f.Fragment,null,i&&a&&f.createElement(iV.j,{showPoint:!1,items:c,onSelectItem:e=>{e.callback&&e.callback("",null,t)},parentRect:a,dispatch:t,displayAboveTarget:!0}),f.createElement("button",{ref:n,className:"dev_handoff_breadcrumbs--pathElementCollapsed--uY2eU dev_handoff_breadcrumbs--pathElement--AKgt0",onClick:function(){l(),i||t(nI.j7({type:Vc,data:{hasOwnEscKeyHandler:!1}}))},title:(0,eN.t)("dev_handoff.breadcrumbs.hidden_nodes",{count:s.length})},(0,eN.t)("dev_handoff.breadcrumbs.ellipsis")))}let Vg=f.memo(()=>{let{selectedNodeID:e}=(0,N.R)(e=>({selectedNodeID:Object.keys(e.mirror.sceneGraphSelection)[0]})),t=(0,aN.J2)(ei.Ez5.devHandoffState().currentNodeId),n=(0,cp.Fk)((e,t,n)=>{let a=e.get(t);return a?function(e){return e.length<=4?e:[e[0],e.slice(1,-2),e[e.length-2],e[e.length-1]]}([...function e(t,n){if(n.guid===t)return[];let a=n.parentNode;return a?[...e(t,a),a]:[]}(n,a),a]):[]},e,t),a=lE.q.instance.get(e);return 0!==n.length&&a?f.createElement("div",{className:"dev_handoff_breadcrumbs--container--BoCAA"},n.map((e,t)=>{let a=t===n.length-1,l=f.createElement(a2.B,{svg:Vo.A,className:a?"dev_handoff_breadcrumbs--chevronIconSelected--NrpAP dev_handoff_breadcrumbs--chevronIcon--MAw4y":"dev_handoff_breadcrumbs--chevronIcon--MAw4y",height:"3px",width:"6px"});return Array.isArray(e)?f.createElement(f.Fragment,{key:e.map(e=>e.guid).join("-")},l," ",f.createElement(V_,{nodeIDs:e.map(e=>e.guid)})):a?f.createElement(f.Fragment,{key:e.guid},l," ",f.createElement(Vp,{nodeID:e.guid})):f.createElement(f.Fragment,{key:e.guid},l," ",f.createElement(Vf,{nodeID:e.guid}))})):null});var Vh=n(870505),VE=n(901765),Vv=n(741951);function Vy({isToolbarOpen:e}){let[t,n]=f.useState(!1),a=f.useRef(null),l=f.useRef(null),r=f.useRef(null),[i,o]=f.useState(null),s=(0,aN.J2)(ei.Ez5.devHandoffState().currentNodeId),c=(0,lh.uQ)(),{inspectableRootNodeId:d,didSelectRow:u}=Hl(s,c);f.useEffect(()=>n(!1),[c]),(0,VE.L)(l,()=>{t&&n(!1)},!0);let m=f.useCallback(()=>{n(!1)},[n]);return f.createElement("div",{ref:l,className:"frame_picker--container--tkwaQ"},f.createElement("button",{className:"frame_picker--trigger--ZPMqZ",ref:a,onClick:function(){var e;if(t)n(!1);else{let t=null==(e=a.current)?void 0:e.getBoundingClientRect();t&&(o(t),n(!0))}},"data-tooltip":(0,eN.t)("dev_handoff.tag.layers"),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip-show-above":!0},f.createElement(a2.B,{svg:Vv.A})),i&&f.createElement(nN.Cf,{className:t?void 0:"frame_picker--closedDropdown--ynVzU",targetRect:i,displayAboveTarget:!0,type:nN.it.MATCH_BACKGROUND,disableDropdownScrollContainer:!0,propagateCloseClick:!0},f.createElement("div",{ref:r,className:nb()("frame_picker--frames--vobWI",e&&"frame_picker--isToolbarOpen--i2EBR")},f.createElement(Hi,{onRowClick:m,didSelectRow:u,inspectableRootNodeId:d}))))}let Vb="inspect_tabs--column--6BLEt",VC="inspect_tabs--settingImage--VEeXo",Vw="inspect_tabs--codeContainer--G3I2n",VT="inspect_tabs--codeContent--HOypb",Vx="inspect_tabs--codeBoxModelInline--o-8PU",VN="inspect_tabs--codeBoxModelSide--4N2rL";var VS=n(841822);let Vk="DEV_HANDOFF_DEV_RESOURCE_DROPDOWN";function VI(e){return f.createElement("div",{className:"inspect_tabs--setting--OTZN3"},f.createElement("div",{className:"inspect_tabs--settingRow--qP9rB"},f.createElement("div",{className:"inspect_tabs--settingLabel--Fr85N"},e.label),f.createElement("button",{className:"inspect_tabs--settingLink--YT0SJ",onClick:e.onClick},(0,eN.tx)("dev_handoff.inspect_panel.open_setting"))),f.createElement("div",{className:"inspect_tabs--settingDescription--Fxbgh"},e.description))}function VA(){let e=(0,lh.VW)();return(0,kq.h)()?f.createElement(Hc,null):e?f.createElement("div",{className:Vw},f.createElement("div",{className:Vx},f.createElement(Gd,null)),f.createElement("div",{className:VT},f.createElement(l7.tH,{boundaryKey:"Figmadoc",fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(Sn,null)),f.createElement(Gu.J,null),f.createElement(Hw,null),f.createElement(w3,null),f.createElement(H0.t,null),f.createElement(Ik,null),(0,y.kc)().dt_lego_selection_styles&&f.createElement(GX,null)),f.createElement("div",{className:VN},f.createElement(Gd,{fillContainer:!0}))):f.createElement(VO,null)}function VO(){return f.createElement("div",{className:"inspect_tabs--codeEmpty--B2DYX"},f.createElement("div",{className:Vb},f.createElement("img",{alt:"",className:VC,src:"https://static.figma.com/uploads/90580516d4d39519d44b86a2e591f4e576475013",onDragStart:e=>e.preventDefault()}),f.createElement(VI,{label:(0,eN.t)("dev_handoff.inspect_panel.property_suggestions.title"),description:(0,eN.t)("dev_handoff.inspect_panel.property_suggestions.body"),onClick:TC.KQ})),f.createElement("div",{className:Vb},f.createElement("img",{alt:"",className:VC,src:"https://static.figma.com/uploads/4b9430b030179277555a6fe2114ceffc0f49ed61",onDragStart:e=>e.preventDefault()}),f.createElement(VI,{label:(0,eN.t)("dev_handoff.inspect_panel.block_suggestions.title"),description:(0,eN.t)("dev_handoff.inspect_panel.block_suggestions.body"),onClick:TC.lk})))}function VL(){return f.createElement("div",{className:Vw},f.createElement("div",{className:Vx},f.createElement(Gd,null)),f.createElement("div",{className:VT},f.createElement(Gu.J,null),f.createElement(HX,null),f.createElement(w3,null),f.createElement(H0.t,null),f.createElement(Ik,null),(0,y.kc)().dt_lego_selection_styles&&f.createElement(GX,null)),f.createElement("div",{className:VN},f.createElement(Gd,{fillContainer:!0})))}function VP(){return f.createElement("div",{className:"inspect_tabs--assetsContainer--ETjja"},f.createElement(H5.L,null),f.createElement(H4.L,null))}function VD(){return f.createElement("div",{className:"inspect_tabs--componentsContainer--ERYGT"},f.createElement("div",{className:"inspect_tabs--componentsContent--qXnwd"},f.createElement(S6,null)),f.createElement("div",{className:"inspect_tabs--componentsPreview--79zEW"},f.createElement(SU,null)))}function VR({setActiveTabId:e}){let t=(0,_.wA)(),n=(0,nT.U)(),a=f.useRef(null),[l,r]=(0,S.fp)(GF),i=(0,a6.U)(),o=(0,xV.Nf)()??"",s=(0,eb.eY)().get(o),c=document.getElementById("dev-handoff-inspect-panel"),d=(null==n?void 0:n.type)===Vk;return f.createElement(f.Fragment,null,f.createElement("div",{ref:a},f.createElement(iG.YW,{svg:VS.A,onClick:function(){d?t(nI.oB()):t(nI.j7({type:Vk}))},selected:d,"data-tooltip":(0,eN.t)("dev_handoff.add_dev_resource"),"data-tooltip-type":nx.Ib.TEXT})),d&&a.current&&c&&(0,oQ.createPortal)(f.createElement(iV.j,{items:[{displayText:"Add link to code file...",action:"add_file_link"},{displayText:"Add link to dev resource... ",action:"add_link"}],onSelectItem:t=>{switch(t.action){case"add_file_link":e(b8._.DEV_RESOURCES),i("Dev Handoff Related Links Click Code File Link",{nodeId:o,nodeType:null==s?void 0:s.type,source:"web"}),(0,TC.qE)();break;case"add_link":e(b8._.DEV_RESOURCES),r(!0)}},dispatch:t,parentRect:a.current.getBoundingClientRect(),showPoint:!1}),c))}function VM(){let[e,t]=(0,S.fp)(b8.H),n=(0,ag.LS)(),a=(0,lh.NM)(),l=(0,xV.ro)(),r=(0,S.md)(Te.be),i=a?[{id:b8._.ASSETS,title:(0,eN.t)("dev_handoff.assets"),Component:VP,recordingKey:"extensionAssetsTab"}]:[{id:b8._.PRIMARY,title:(0,eN.t)("inspect_panel.code.code"),Component:VA,recordingKey:"extensionCodeTab"}];return n&&(i.push({id:b8._.PROPERTIES,title:(0,eN.t)("fullscreen.properties_panel.properties"),Component:VL,recordingKey:"extensionPropertiesTab"}),l&&i.push({id:b8._.COMPONENT,title:(0,eN.t)("dev_handoff.inspect_panel.component"),Component:VD,recordingKey:"extensionComponentTab"}),i.push({id:b8._.DEV_RESOURCES,title:(0,eN.t)("dev_handoff.developer_related_links.links"),Component:GU,recordingKey:"extensionRelatedLinksTab"}),i.push({id:b8._.ASSETS,title:(0,eN.t)("dev_handoff.assets"),Component:VP,recordingKey:"extensionAssetsTab"})),i.push({id:b8._.PLUGIN,title:(0,eN.t)("dev_handoff.tab.plugins"),Component:Hm,recordingKey:"extensionPluginsTab"}),f.useEffect(()=>{i.find(t=>t.id===e)||t(b8._.PRIMARY)},[e,t,n]),f.createElement(f.Fragment,null,f.createElement("div",{className:"inspect_tabs--tabsBar--nbu1a"},f.createElement(i6.P,{innerClassName:"inspect_tabs--tabs--w8XOI",minContentWidth:100},i.map(n=>f.createElement(Tr,{key:n.title,text:n.title,isActive:e===n.id,recordingKey:n.recordingKey,onClick:()=>{t(n.id)}}))),f.createElement("div",{className:"inspect_tabs--rightButtons--HeXhW"},r&&f.createElement(tN.Jn,{className:a8.cx.flexShrink0.$,onClick:()=>{(0,w9.wY)()}}),f.createElement(S9,null),f.createElement(VR,{setActiveTabId:t}))),i.map(t=>f.createElement("div",{key:t.title,className:"inspect_tabs--activeTabContainer--LBYjQ",style:{display:e===t.id?void 0:"none"}},f.createElement(t.Component,null))))}let VF="extension_bottom_panel--buttons--itG9x";var VB=n(301087),VU=n(87071);let VH=(0,lf.jz)(lw.YI7),VG=()=>.75*window.innerHeight,VV=(0,lf.jz)(lw.Qhc);function VK(){let[e,t]=(0,A.Vc)("extension_bottom_panel_expanded",!0),[n,a]=(0,S.fp)(Vh.g),[l,r]=f.useState(!1),i=(0,lh.VW)(),o=(0,aN.J2)(ei.Ez5.devHandoffState().focusMode),s=(0,aN.J2)((0,tM.UK)().devHandoffInspectSplitPosition);f.useEffect(()=>{let t;t=e?n:VH,(0,tM.UK)().devHandoffInspectSplitPosition.set(t)},[e]);let c=f.useCallback(()=>{r(!0)},[]),d=f.useCallback(e=>{if(l){var t;let n=(t=window.innerHeight-e.clientY,Math.max(VH,Math.min(VG(),t||0)));n!==s&&((0,tM.UK)().devHandoffInspectSplitPosition.set(n),a(n))}},[l,s,a]),u=f.useCallback(()=>{r(!1)},[]);return f.useEffect(()=>(document.addEventListener("mousemove",d),document.addEventListener("mouseup",u),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)})),f.createElement("div",{id:"dev-handoff-inspect-panel",className:nb()("vscode","extension_bottom_panel--container--zaRdX",nz.Dm,e&&"extension_bottom_panel--isOpen--m5UfA"),style:{height:`${s}px`}},o?f.createElement("div",{className:nb()(VF,"extension_bottom_panel--buttonsNewUx--qjtmo")},f.createElement(Vr,null)):f.createElement("div",{className:nb()(VF)},f.createElement(lk,{floating:!1})),f.createElement("div",{className:"extension_bottom_panel--header--ZmzTG"},e&&f.createElement("div",{className:"extension_bottom_panel--edge--cuoAZ",onMouseDown:c,onDoubleClick:()=>{(0,tM.UK)().devHandoffInspectSplitPosition.set(VV+VH),a(VV+VH)},role:"none"}),f.createElement(Vy,{isToolbarOpen:e}),i&&f.createElement(f.Fragment,null,f.createElement(Vg,null)),f.createElement("div",{className:nb()("extension_bottom_panel--headerRightButtons--qVDj-",a8.cx.pt4.$)},f.createElement(Tf,null),f.createElement("button",{onClick:function(){t(!e)},style:{width:"32px"}},f.createElement(a2.B,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":e?(0,eN.t)("dev_handoff.vscode.inspect_panel.hide_inspect_tooltip"):(0,eN.t)("dev_handoff.vscode.inspect_panel.show_inspect_tooltip"),svg:e?VU.A:VB.A,autosize:!0})))),f.createElement("div",{className:"extension_bottom_panel--transitionContainer--5UlLL",style:{maxHeight:`${s-VH}px`}},f.createElement(VM,null)))}var VW=n(85304),Vz=n(841368),Vj=n(460869),VJ=n(17604);let VY="complete_button--completeButton--OC0XP",VX="complete_button--disabled--jWBRb",Vq="complete_button--completedIcon--Op6qF",VZ="complete_button--disabledIcon--n9m3s";var VQ=n(411929),V$=n(164828);function V0({nodeId:e,sourceForLogging:t}){let n=(0,cp.Jk)(e);return f.createElement(V1,{node:n,sourceForLogging:t})}function V1({node:e,sourceForLogging:t,onboardingKey:n}){let a=(0,VJ.D)(),l=(0,U._I)(),r=a&&l;return e?e.hasReadyStatus?f.createElement("button",{className:nb()(VY,{[VX]:!r}),onClick:()=>{r&&sL.z4.setNodesCompleted([e.guid],`${t}-complete-button`)},disabled:!r,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":r?void 0:(0,eN.t)("dev_handoff.overview_mode.tooltip.upgrade_mark_completed"),"data-tooltip-text-left":!0,"data-onboarding-key":n},f.createElement(ry.U,{svg:VQ.A,className:nb()(Vq,{[VZ]:!r})},f.createElement(Vj.W,{className:nb()({[VZ]:!r})})),(0,eN.tx)("dev_handoff.status.mark_completed")):e.hasCompletedStatus?f.createElement("button",{className:nb()(VY,{[VX]:!r}),onClick:()=>{r&&sL.z4.setNodesReady(!0,[e.guid],`${t}-complete-button`,null)},disabled:!r,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":r?void 0:(0,eN.t)("dev_handoff.overview_mode.tooltip.upgrade_mark_completed"),"data-tooltip-text-left":!0,"data-onboarding-key":n},f.createElement(ry.U,{svg:V$.A,className:nb()(Vq,{[VZ]:!r})},f.createElement(iQ.g,{className:nb()({[VZ]:!r})})),(0,eN.tx)("dev_handoff.status.completed")):f.createElement("button",{className:nb()(VY,VX),disabled:!0,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.workflows.focus_view.complete_button.status_removed"),"data-tooltip-text-left":!0,"data-onboarding-key":n},f.createElement(ry.U,{svg:VQ.A,className:nb()(Vq,VZ)},f.createElement(Vj.W,{className:VZ})),(0,eN.tx)("dev_handoff.status.mark_completed")):null}let V2=(0,S.E2)("workflows_recently_viewed",{},Gb.record(Gb.string(),Gb.record(Gb.string(),Gb.number())));function V5(e,t){return(t.lastViewedTimestamp??0)-(e.lastViewedTimestamp??0)}var V4=n(327006);let V3="floating_layers_panel--isExpanded--qjuJR",V6="floating_layers_panel--chevronIcon--rNFmc";var V7=n(87616),V8=n(440691);let V9=(0,lf.jz)(lw.M$q);function Ke({children:e,title:t=null,nodeIcon:n=null,panelActions:a=null,onSizeChange:l,bottom:r,left:i,hide:o}){var s;let[c,d]=f.useState(!1),u=(0,n6.GS)(),m=f.useRef(null),p=(0,lb.QU)({subscribeToUpdates_expensive:!0}),_=(0,S.md)(aj.Sf),g=u?(p-((null==(s=null==_?void 0:_.current)?void 0:s.clientWidth)??0))/2-V9-6:p/2,[h,E]=f.useState(230),v=c?Math.min(h,g):230;return f.useEffect(()=>{l&&l(v)},[v,l]),f.createElement(Fp.w,{className:nb()("floating_layers_panel--container---6H4q",nz.Dm,"devHandoffFloatingLayersPanel","pagesPanel"),style:{bottom:r,left:i,display:o?"none":void 0},ref:m,size:v,defaultSize:230,disableResizing:!c,side:"right",onResize:e=>{E(Math.min(Math.max(e,230),g))},id:"focus-floating-left-panel","data-cancel-insertable-resource-drag-and-drop":!0},f.createElement("div",{className:"floating_layers_panel--containerInner--GVica"},f.createElement("button",{className:nb()("floating_layers_panel--header--YtDpH",{[V3]:c}),onClick:function(){d(!c)}},!c&&n,f.createElement("div",{className:"floating_layers_panel--middle--QR7nt"},f.createElement("div",{className:nb()("floating_layers_panel--title--pH3fr",{"floating_layers_panel--hasNoIconWhenCollapsed--F2ap6":!n&&!c})},(0,eN.tx)("dev_handoff.tag.layers")),!c&&t),c&&a,u&&(c?f.createElement(nE.r,{className:V6}):f.createElement(V4.a,{className:V6})),!u&&(c?f.createElement(a2.B,{className:V6,svg:V7.A}):f.createElement(a2.B,{className:V6,svg:V8.A}))),f.createElement("div",{className:nb()("floating_layers_panel--listContainer--Kr9-C",{[V3]:c})},e)))}let Kt="floating_layers_panel--isSymbol--3KTvH",Kn="floating_layers_panel--layerName--LBYru";function Ka(){let e=(0,aN.J2)((0,tM.UK)().showGuids),t=(0,lh.Tv)(),n=(0,cp.Fk)((e,t)=>t&&e.get(t),t[0]||null),a=!!n&&["SYMBOL","INSTANCE"].includes(n.type),{inspectableRootNodeId:l,didSelectRow:r}=Hl((0,aN.J2)(ei.Ez5.devHandoffState().currentNodeId),t[0]||null),i=(0,_.d4)(e=>e.mirror.appModel.currentPage),o=l||i,s=(0,e2.Xr)(UQ),c=[{displayText:(0,eN.t)("dev_handoff.layers.collapse_all_layers"),callback:()=>s([o])}],d=(0,aN.J2)(ei.Ez5.devHandoffState().automaticIconDetection),u=f.useMemo(()=>t.length>0?ei.w3z.getOrAddAssetInfo(t[0]):null,[t]);return 0!==t.length&&n?f.createElement(Ke,{title:t.length>1?f.createElement("div",{className:Kn},(0,eN.tx)("dev_handoff.workflows.focus_view.multiple_layers_selected",{count:t.length})):f.createElement("div",{className:nb()(Kn,{[Kt]:a})},n.name,e?` (${n.guid})`:""),nodeIcon:f.createElement("div",{className:nb()("floating_layers_panel--layersIcon--q0eoA",{[Kt]:a})},f.createElement(wJ.rI,{node:n,showIcons:d,assetInfo:u})),panelActions:f.createElement(U1,{dropdownItems:c})},f.createElement(U$,{inspectableRootNodeId:l,didSelectRow:r,page:i,hideHeader:!0})):null}function Kl(e){let t=(0,xB._6)();return"fullscreen"===t.view?{...t,editorType:e??t.editorType,focusViewBackNavigation:void 0,devModeFocusId:void 0,showOverview:!1}:t}function Kr(e,t){let n=(0,xB._6)();return"fullscreen"===n.view?{...n,editorType:eq.nT.DevHandoff,focusViewBackNavigation:{toEditorType:n.editorType,toOverview:!0},showOverview:!1,devModeFocusId:e,...t?{nodeId:t}:{}}:n}function Ki(e){let t=Kl(e),n=(0,_.wA)(),a=(0,a6.U)(),l=function({pagesList:e,isComparingChanges:t}){let n=(0,fL.Z)("page_change_navigator_navigate"),a=(0,Dl.E)(),l=(0,a6.U)(),r=(0,_.wA)(),i=(0,xB._6)(),o=(0,cm.dh)(),s=(0,_.d4)(e=>e.versionHistory);return(0,f.useCallback)(async c=>{await (0,cm.$P)(c,o,s,r,(0,Am.Fy)(e,c)===ei.xal.LOADED,l,n,a,t,i)},[e,n,a,l,r,i,o,s,t])}({pagesList:(0,EO.n0)(),isComparingChanges:!1});return async(e,r,i)=>{i&&await l(i),n(nI.$T(t));let o="unknown";"fullscreen"===t.view&&(ei.w3z.addToSelectionNoAnimation([r]),ei.glU.panToNode(r),o=t.editorType===eq.nT.Design?"design_canvas":"dev_mode_canvas"),a(e,{target:o,nodeId:r})}}let Ko="focus_canvas_ui--nodeNameIcon--53sP1",Ks=(0,lf.jz)(lw.M$q);function Kc(){let e=(0,_.wA)(),t=(0,_.d4)(e=>e.versionHistory),{Dropdown:n,toggleDropdown:a,dropdownTargetRef:l,isDropdownShown:r}=(0,w0.B)("FOCUS_MODE_NAME_DROPDOWN"),i=(0,af.q5)(),o=(0,lh.uQ)(),s=(0,tR.hA)(),c=(0,xB._6)(),d=(0,ag.$A)(c)?c.focusViewBackNavigation:void 0,u=Kl(null==d?void 0:d.toEditorType),m=(0,a3.U)("focus_view_show_on_page"),p=Ki(null==d?void 0:d.toEditorType),g=[{displayText:(0,eN.t)("dev_handoff.workflows.focus_view.show_canvas"),recordingKey:"dev_handoff.focus.show_on_page",callback:function(){"editorType"in u&&u.editorType===eq.nT.Design&&m("design"),t.activeId&&t.activeId!==wq.V_&&e((0,wq.Eg)()),p("Dev Mode Focus View Go To Canvas Clicked",s)}},{displayText:(0,eN.t)("dev_handoff.workflows.focus_view.copy_link"),recordingKey:"dev_handoff.focus.copy_link",callback:()=>{e(wd.lW({stringToCopy:(0,LE.jN)({file:i,nodeId:o,isDevHandoff:!0,devModeFocusId:s,isReadOnly:!0,isFigJam:!1,attributionContext:null})}))}}];return f.createElement(f.Fragment,null,f.createElement("div",{ref:l},f.createElement(iy.YW,{className:"focus_canvas_ui--nameDropdownButton--F54lE",onClick:a,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.workflows.more_actions_tooltip"),selected:r,recordingKey:"dev_handoff.focus.options"},f.createElement(ry.U,{svg:Nn.A},f.createElement(Vz.J,null)))),f.createElement(n,{items:g,showPoint:!0}))}function Kd(){let e=(0,_.wA)(),t=(0,tM.UX)(),n=(0,n6.GS)(),a=(0,tR.hA)(),l=(0,cp.Fk)((e,t)=>t?e.get(t):null,a),r=(0,af.tS)(),i=(0,_.d4)(e=>e.versionHistory),o=function(){let[e,t]=(0,S.fp)(V2);return(n,a)=>{let l=Date.now();t({...e,[n]:{...e[n],[a]:l}})}}(),s=(0,a6.U)(),c=(0,a3.U)("focus_view_back"),d=(0,aN.J2)((0,aT.aY)()),u=(0,_.d4)(e=>{var t,n;return(0,ag.$A)(e.selectedView)?{...e.selectedView,editorType:(null==(t=e.selectedView.focusViewBackNavigation)?void 0:t.toEditorType)??e.selectedView.editorType,showOverview:(null==(n=e.selectedView.focusViewBackNavigation)?void 0:n.toOverview)??!0,focusViewBackNavigation:void 0,devModeFocusId:void 0}:e.selectedView}),m=(0,_.d4)(e=>(0,f1.Np)(e,u)),p=function(){let e=(0,xB._6)();return"fullscreen"===e.view?{...e,showOverview:!0,focusViewBackNavigation:void 0,devModeFocusId:void 0}:e}(),g=(0,_.d4)(e=>(0,f1.Np)(e,p)),[,h]=(0,S.fp)(I$),[E]=(0,S.fp)(I0);if((0,np.h)(()=>{a&&ei.w3z.focusOnNode(a,!1),d===ei.FAf.PROTOTYPE&&(0,aT.NT)(ei.FAf.DESIGN),(0,y.kc)().dt_workflows_recently_viewed&&r&&a&&o(r,a),s("Dev Mode Focus View Shown",{source:E||"init"},{forwardToDatadog:!0})}),!a||!l)return null;let v=i.activeId&&i.activeId!==wq.V_;return f.createElement("div",{className:"focus_canvas_ui--container--YwKdJ",style:{paddingRight:n?t+Ks:t}},f.createElement("div",{className:"focus_canvas_ui--background--jKiDi"}),f.createElement("div",{className:"focus_canvas_ui--header--gxex-"},f.createElement("a",{className:"focus_canvas_ui--overviewLink--imOQr",onClick:function(t){t.preventDefault(),e(nI.$T(p)),i.activeId&&i.activeId!==wq.V_&&e((0,wq.Eg)()),h("breadcrumb_clicked")},href:g,"data-onboarding-key":HI},(0,eN.tx)("dev_handoff.status.ready_for_dev")),f.createElement(lm.e,{className:"focus_canvas_ui--breadCrumbSeparator--tkhRI"}),f.createElement("div",{className:"focus_canvas_ui--nodeName--kuQ54","data-onboarding-key":HN},l.isSection?f.createElement(tJ.c,{className:Ko}):f.createElement(tz.q,{className:Ko})," ",f.createElement("span",{className:"focus_canvas_ui--nodeNameLabel--f7DnW"},l.name)),f.createElement(Kc,null),!v&&f.createElement(V1,{node:l,sourceForLogging:"focus-ui",onboardingKey:HS}),f.createElement("a",{className:"focus_canvas_ui--backLink--oBW-6",onClick:function(t){t.preventDefault();let n="editorType"in u&&u.editorType===eq.nT.Design;!("showOverview"in u&&u.showOverview)&&n&&c("design"),e(nI.$T(u)),i.activeId&&i.activeId!==wq.V_&&e((0,wq.Eg)());let a="unknown";"fullscreen"===u.view&&(a=u.showOverview?"overview":u.editorType===eq.nT.Design?"design_canvas":"dev_mode_canvas"),h("focus_close_clicked"),s("Dev Mode Focus View Close Clicked",{target:a})},href:m,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.workflows.focus_view.back_link_tooltip")},f.createElement(lF.A,null))),f.createElement("div",{className:"focus_canvas_ui--viewportContainer--E-aVJ"}),f.createElement(Ka,null),f.createElement(HA,null))}function Ku(){let e=(0,U._I)(),t=(0,eb.aV)(),n=(0,_.d4)(e=>e.mirror.appModel.showUi),a=(0,ew.iZ)(),l=(0,_.wA)(),r=(0,tR.l7)();(0,BI.X_)(),(0,lC.z)({topLevelMode:l8.lyf.DEV_HANDOFF,eventName:"Dev Handoff Selection Changed"});let i=(0,af.tS)()??"";return((0,f.useEffect)(()=>{let e=()=>(0,Bk.s2)({userID:(null==a?void 0:a.id)??"",openFileKey:i});return e(),e},[e,i,null==a?void 0:a.id]),(0,f.useEffect)(()=>{let e=()=>{var e;null==(e=BA.sr.enrollUserInStatusChangeXP({fileKey:i}))||e.then(e=>{var t,n;let r=S.zl.get(ES.D);(null==(n=null==(t=e.data)?void 0:t.meta)?void 0:n.newEnrollment)&&!r&&l(ej.jK({userId:(null==a?void 0:a.id)??"",fileKey:i}))})};if((0,y.kc)().delay_status_change_enrollment){let t=setTimeout(e,5e3);return()=>clearTimeout(t)}e()},[i,null==a?void 0:a.id,l]),t||!n)?null:e||r?f.createElement(Kf,null):f.createElement(BS,null)}function Km(){return!function(){let e=(0,tR.hA)(),t=(0,_.wA)(),n=(0,eb.aV)(),a=(0,_.d4)(e=>e.selectedView.compareChangesVersionId),l=(0,wj.VI)(),r=(0,wj.dF)()??l,i=(0,C4.ei)(null==r?void 0:r.id),o=(0,wM.i)(r),{versions:s,versionsQueryLoaded:c}=(0,TD.DS)(null==r?void 0:r.id),d=!c||0===s.length||!i,u=(0,_.d4)(e=>{var t;return(null==(t=e.modalShown)?void 0:t.type)===xA.type}),m=xR((null==r?void 0:r.id)??null,"cc_version_id_url");f.useEffect(()=>{a&&!n&&c&&!u&&(e||o&&!d?m():xb(void 0,t,!1))},[a,t,n,u,d,o,m,c,e])}(),null}function Kp(){let e=(0,nS.R)(),t=(0,tR.l7)(),n=(0,tR.hA)(),a=(0,U._I)();return!n&&(a||t)?f.createElement("div",{className:"devHandoffLeftPanel"},f.createElement(CW,{ignoreRulers:t},f.createElement(CV,null),f.createElement(Cn.$,null,e&&f.createElement(f.Fragment,null,f.createElement(CK,null),f.createElement(CT,null)),t?f.createElement(Kg,null):f.createElement(K_,null)))):null}let Kf=f.memo(function(){f.useEffect(()=>Gp.K,[]);let e=f.useMemo(()=>sL.z4.getIsExtension(),[]),t=(0,tR.l7)(),n=!!(0,tR.hA)()&&!t;!function(){let e=(0,_.d4)(e=>e.mirror.appModel.currentPage),t=(0,af.tS)(),n=function(e){let t=(0,eb.eY)(),n=(0,_.d4)(eH.aD),a=(0,_.d4)(bi.BA),l=function(e){let t=(0,_.d4)(Iy.MH),n=(0,_.d4)(e=>e.mirror.appModel.currentPage);return(0,f.useMemo)(()=>{var a,l,r,i;let o=new Set;if(!(0,y.kc)().dt_code_connect_preloading||!e)return o;for(let[s,c]of Object.entries(t))(null==(a=c.containing_frame)?void 0:a.pageId)===n&&((null==(r=null==(l=c.containing_frame)?void 0:l.containingStateGroup)?void 0:r.nodeId)?o.add(`${e},${null==(i=c.containing_frame)?void 0:i.containingStateGroup.nodeId}`):o.add(`${e},${s}`));return o},[n,t])}(e);return(0,f.useMemo)(()=>{if(!(0,y.kc)().dt_code_connect_preloading||n.length+a.size>50)return new Set;let r=new Set;for(let a of n){let n=BB(t.get(a.nodeId),t,e),{backingFileKey:l,backingNodeId:i}=(0,Nv.HX)(a.nodeId,t,e);if(l&&i)for(let e of(r.add(`${l},${i}`),n))r.add(e)}let i=new Set;for(let n of a){let a=t.get(n),l=n;if((null==a?void 0:a.containingStateGroupId)&&(l=a.containingStateGroupId),i.has(l))continue;let o=BB(a,t,e);if(e&&l)for(let t of(r.add(`${e},${l}`),i.add(l),o))r.add(t)}for(let e of l)r.add(e);return r},[l,a,n])}(t);(0,f.useEffect)(()=>{S.zl.set(BF.z,null)},[e]);let a=(0,eW.Rs)(eJ.p9d,{nodes:Array.from(n),openFileKey:t??""},{enabled:!!(0,y.kc)().dt_code_connect_preloading&&n.size<50});(0,f.useEffect)(()=>{var e,t;if("loaded"===a.status&&"loaded"===a.data.file.status&&(null==(e=a.data.file.data)?void 0:e.preload_code_connect)){let e=null==(t=a.data.file.data)?void 0:t.preload_code_connect;S.zl.set(BF.z,{...e,nodesWithCodeConnect:new Set(e.nodesWithCodeConnect)})}return()=>S.zl.set(BF.z,null)},[e,a.status])}(),f.useEffect(()=>{(0,Ty.px)().prepareVmIfNeeded()},[]),(0,VW.W)(1700);let a=(0,VW.e)();return f.createElement(bB.si,null,e?f.createElement(VK,null):f.createElement(f.Fragment,null,a&&f.createElement(lk,null),n&&f.createElement(Kd,null),!t&&f.createElement(f.Fragment,null,f.createElement(Ve,null),f.createElement(aS.p,null,f.createElement(UU,null)),f.createElement(aS.p,null,f.createElement(b6,null)),f.createElement(aS.p,null,f.createElement(BM,null))),f.createElement(Km,null)),f.createElement(ap,null))});function K_(){let e=(0,_.d4)(e=>e.mirror.appModel.currentPage),t=(0,aN.J2)(l8.Ez5.uiState().showCanvasSearch);return f.createElement(f.Fragment,null,t?f.createElement(AV.Provider,{value:!1},f.createElement(O_,{showFilter:!0})):f.createElement(Ho,{key:e}))}function Kg(){let e=(0,_.d4)(e=>e.mirror.appModel.currentPage);return f.createElement(Ho,{key:e})}var Kh=n(441088);function KE(e){return f.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.18 11.384a.5.5 0 0 0 .704-.064l2.5-3a.5.5 0 0 0 0-.64l-2.5-3a.5.5 0 1 0-.768.64L13.349 8l-2.233 2.68a.5.5 0 0 0 .064.704ZM4.82 4.616a.5.5 0 0 0-.704.064l-2.5 3a.5.5 0 0 0 0 .64l2.5 3a.5.5 0 1 0 .768-.64L2.651 8l2.233-2.68a.5.5 0 0 0-.064-.704Zm4.654.542a.5.5 0 1 0-.948-.316l-2 6a.5.5 0 0 0 .948.316l2-6Z",clipRule:"evenodd"}))}var Kv=n(666309);function Ky(e){return f.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9 4h2.5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5V7h4.5a.5.5 0 0 0 .5-.5V4ZM8 4H4.5a.5.5 0 0 0-.5.5V6h4V4Zm-5 .5A1.5 1.5 0 0 1 4.5 3h7A1.5 1.5 0 0 1 13 4.5v7a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 3 11.5v-7Z",clipRule:"evenodd"}))}var Kb=n(935829),KC=n(438741),Kw=n(754209),KT=n(161325),Kx=n(549166),KN=n(238629),KS=n(137035),Kk=n(999394);function KI(){let e=(0,_.wA)();return(0,eT.f)("dismissed_dev_mode_overview_banner")?null:f.createElement(Y.fu,{name:"Dev Mode Overview Banner",properties:{severity:Kk.c.EVENT}},f.createElement("div",{className:"overview_banner--banner--9cAw3"},f.createElement(KS.b,{className:"overview_banner--icon--NQ9zx"}),f.createElement("div",{className:"overview_banner--bannerContent--Toai2 text--fontPos13--xW8hS text--_fontBase--QdLsd"},f.createElement("div",{className:"overview_banner--title--JuiVK ellipsis--ellipsis--Tjyfa"},(0,eN.tx)("dev_handoff.workflows.overview.banner.title")),f.createElement("div",{className:"overview_banner--subTitle--BEeYg ellipsis--ellipsis--Tjyfa"},(0,eN.tx)("dev_handoff.workflows.overview.banner.subtitle"))),f.createElement("div",{className:"overview_banner--rightItems--T2QEG"},f.createElement(va.$n,{variant:"secondary",onClick:()=>{(0,r_.FJ)("https://help.figma.com/hc/en-us/articles/23918228264855","_blank")}},(0,eN.tx)("dev_handoff.workflows.overview.banner.learn_more")),f.createElement(rd.E,{className:"overview_banner--dismissButton--cMyLN",onClick:()=>{e(j.b({dismissed_dev_mode_overview_banner:!0}))}},f.createElement(lF.A,null)))))}function KA(e){return f.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.18 11.384a.5.5 0 0 0 .704-.064l2.5-3a.5.5 0 0 0 0-.64l-2.5-3a.5.5 0 1 0-.768.64L13.349 8l-2.233 2.68a.5.5 0 0 0 .064.704ZM4.82 4.616a.5.5 0 0 0-.704.064l-2.5 3a.5.5 0 0 0 0 .64l2.5 3a.5.5 0 1 0 .768-.64L2.651 8l2.233-2.68a.5.5 0 0 0-.064-.704Zm4.654.542a.5.5 0 1 0-.948-.316l-2 6a.5.5 0 0 0 .948.316l2-6Z",clipRule:"evenodd"}))}var KO=n(165514);let KL="overview--background--LdDDC",KP="overview--overviewBase--8lImP",KD="overview--overviewRecentActivity--JwGnv",KR="overview--editInfo--PHbLh",KM="overview--timestamp--EH-pe",KF="overview--avatarIcon--c711v",KB="overview--layerTypeIcon--zRdir",KU="overview--editedIcon--MhN1N";function KH({showDescription:e,previewUrl:t,onClick:n}){return f.createElement("a",{className:KD,href:t,onClick:n},f.createElement("div",{className:KR},f.createElement(vs.Qp,{className:"overview--avatarLoading--jMjJk",animationType:vs.JR.NO_SHIMMER}),f.createElement(vs.Qp,{className:"overview--editInfoRecentActivityLoading--w-QoB overview--editInfoRecentActivity---jsVr text--fontPos13--xW8hS text--_fontBase--QdLsd",animationType:vs.JR.NO_SHIMMER})),e&&f.createElement(vs.Qp,{className:"overview--editDescriptionLoading--hrI6B",animationType:vs.JR.NO_SHIMMER}))}function KG({user:e,icon:t,editedString:n}){return f.createElement("div",{className:KR},f.createElement("div",{className:"overview--avatarContainer--OD44p"},f.createElement(Lk.H8,{user:e,size:24}),t),f.createElement("div",{className:"overview--editInfoRecentActivity---jsVr text--fontPos13--xW8hS text--_fontBase--QdLsd"},f.createElement("span",{className:"overview--editInfoUser--P4GkS"},n)))}function KV(e,t,n){if(!e||n)return null;switch(e.status){case ei.zIx.BUILD:return f.createElement(KA,{className:nb()(t?KU:"overview--readyIcon--A94uc",KF)});case ei.zIx.COMPLETED:return f.createElement(nv.l,{className:nb()(t?KU:"overview--completedIcon--9Nbjl",KF)})}return null}function KK({nodeId:e,user:t,previewUrl:n,isFallbackForLegacyStatus:a,onClick:l}){let r=(0,cp.Fk)(t=>{var n;return null==(n=t.get(e))?void 0:n.getStatusInfo()},e),i=(0,C4.ei)(e),o=(0,LS.Ak)(null==i?void 0:i.lastEditedAt);return t?f.createElement("a",{className:KD,href:n,onClick:l},f.createElement(KG,{user:t,icon:KV(r,!0,a),editedString:(0,eN.tx)("dev_handoff.workflows.edit_info.edited",{user:t.handle,dateFromNow:f.createElement("span",{className:KM},o)})})):f.createElement(KH,{previewUrl:n,onClick:l})}function KW({nodeId:e,user:t,description:n,previewUrl:a,isFallbackForLegacyStatus:l,onClick:r}){var i;let o=(0,cp.Fk)(t=>{var n;return null==(n=t.get(e))?void 0:n.getStatusInfo()},e),s=(null==o?void 0:o.lastUpdateUnixTimestamp)?1e3*o.lastUpdateUnixTimestamp:null,c=(0,LS.Ak)(s);if(!s)return f.createElement(KK,{nodeId:e,user:t,previewUrl:a,isFallbackForLegacyStatus:l,onClick:r});if(!o||!t)return f.createElement(KH,{showDescription:!!n,previewUrl:a,onClick:r});let d=null==(i=(0,KO.TR)(o.status))?void 0:i.toLowerCase();if(!d)return f.createElement(KK,{nodeId:e,user:t,previewUrl:a,isFallbackForLegacyStatus:l,onClick:r});let u=o.status===ei.zIx.BUILD&&n?(0,eN.tx)("dev_handoff.workflows.edit_info.updated_design",{user:t.handle,dateFromNow:f.createElement("span",{className:KM},c)}):(0,eN.tx)("dev_handoff.workflows.edit_info.marked",{user:t.handle,status:d,dateFromNow:f.createElement("span",{className:KM},c)});return f.createElement("a",{className:KD,href:a,onClick:r},f.createElement(KG,{user:t,icon:KV(o,!1,l),editedString:u}),!!n&&f.createElement("div",{className:"overview--editDescription--rb1Qn text--fontPos11--2LvXf text--_fontBase--QdLsd"},n))}var Kz=n(36867);let Kj=(0,t_.Wh)(()=>(0,e4.eU)(""),{preserveValue:!1}),KJ="performance.dev_mode.workflows.overview.time_to_first_thumbnail",KY=new wB.jk(KJ,{}),KX=(0,t_.rt)(void 0),Kq=(0,t_.rt)(!1);var KZ=n(24973),KQ=n(768067),K$=n(191278),K0=n(420584);let K1=2*(0,lf.jz)(lw.Evg),K2=K1/lw.RtY,K5=K1/8,K4=K2/8;function K3(e){return f.createElement("div",{className:KZ.vR},e.tabs.map(t=>{let n=t.key===e.selected;return f.createElement("button",{className:nb()(n?"overview--selectedTab--LPpAj overview--tab--djrt7 tab_group--tab--j43X- tab_group--selectedTab--dwZ1b tab_group--tab--j43X- utilities--bodyMediumStrong--1R5cZ":"overview--tab--djrt7 tab_group--tab--j43X-",void 0!==t.count&&"overview--tabWithBadge--f0pPx"),key:t.key,onClick:()=>e.onTabSelected(t.key),"data-label":`${t.label}${void 0!==t.count?t.count:""}`},f.createElement("span",null,t.label),void 0!==t.count&&f.createElement(Ac,{count:t.count,isInTab:!0,isActive:n}))}))}let K6=(0,t_.Wh)(()=>(0,e4.eU)(!1),{preserveValue:!1});function K7(){let e=(0,af.q5)(),t=(0,_.wA)(),n=(0,ew.iZ)(),a=(0,nT.U)(),l=(0,_.d4)(e=>e.multiplayer),r=f.useMemo(()=>l.allUsers.find(e=>e.sessionID===l.sessionID)||null,[l.allUsers,l.sessionID]),i=(0,Kw.dR)(),o=(0,KC.B4)(),s=f.useCallback(e=>{(0,Kx.Lx)(e,null==r?void 0:r.sessionID,t,!1,l,i,o)},[null==r?void 0:r.sessionID,t,l,i,o]);return f.createElement("div",{className:"overview--toolbarRightItems--tjF72"},l&&e&&r&&f.createElement(Kx.v7,{dropdownShown:a,multiplayer:l,currentUser:r,onUserClick:s}),e&&f.createElement(KN.w,{user:n,editingFile:e,isFileInWorkshop:!1}))}let K8=(0,S.E2)("workflows_summary_tab",I1.ALL,Gb.nativeEnum(I1)),K9=(0,t_.Wh)(()=>(0,e4.eU)({}),{preserveValue:!0}),We=(0,S.E2)("workflows_overview_sorted_by",I2.RECENT,Gb.nativeEnum(I2));function Wt(){var e;let t=(0,U._I)(),n=null==(e=(0,af.q5)())?void 0:e.key,a=(0,tM.dP)(),l=(0,n6.GS)(),r=(0,Ck.b)(),i=(0,a6.U)(),s=function(){let[e,t]=(0,S.fp)(KX);return f.useCallback(n=>{e||(t({source:n}),KY.start())},[e,t])}(),c=(0,xB._6)(),d=(0,_.wA)(),u=(0,aN.J2)(ei.Ez5.currentSceneState().nodesWithStatusForFile),m=(0,f.useRef)(null),[p,g]=(0,S.fp)(Iq.gk),[h,E]=(0,S.fp)(We),v=f.useCallback(e=>{i("Dev Mode Overview Sort Changed",{sort:e}),E(e)},[E,i]),b=t?h:I2.PAGE,[C,w]=(0,S.fp)(K8),T=function(e){let[t]=(0,S.fp)(V2);return e?t[e]:null}(n),{setSearchString:x,searchString:N,searchFilter:k,searchActive:I}=function(){let[e,t]=(0,S.fp)(Kj),n=(0,a6.U)(),a=(0,f.useMemo)(()=>(function(e){let t=e?new Kz.A(e.toLowerCase()):null;return{filter:e=>{let n=t?t.matchAgainst(e):null;return!n||!!n.find(e=>e.score>0)}}})(e),[e]),l=(0,f.useCallback)(e=>a.filter([e.nodeName,e.pageName,e.description]),[a]),r=(0,q.A)(()=>{n("Dev Mode Overview Search",{})},1e3);return{setSearchString:(0,f.useCallback)(e=>{t(e),r()},[t,r]),searchString:e,searchFilter:l,searchActive:e.length>0}}(),A=f.useMemo(()=>u.filter(e=>e.status===ei.zIx.BUILD&&k(e)),[u,k]),O=f.useMemo(()=>u.filter(e=>e.status===ei.zIx.COMPLETED&&k(e)),[u,k]),L=f.useMemo(()=>{switch(C){case I1.ALL:return u.filter(k);case I1.RECENTLY_VIEWED:if(!T)return[];return Object.entries(T).reduce((e,[t,n])=>{let a=u.find(e=>e.nodeId===t&&k(e));return a&&e.push({...a,lastViewedTimestamp:n}),e},[]);case I1.BUILD:return A;case I1.COMPLETED:return O}},[u,C,T,k,A,O]),P=f.useMemo(()=>[{key:I1.ALL,label:(0,eN.t)("dev_handoff.workflows.overview.tab_all")},...(0,y.kc)().dt_workflows_recently_viewed?[{key:I1.RECENTLY_VIEWED,label:(0,eN.t)("dev_handoff.workflows.overview.tab_recent")}]:[],{key:I1.BUILD,count:A.length,label:(0,eN.t)("dev_handoff.workflows.overview.tab_ready")},{key:I1.COMPLETED,count:O.length,label:(0,eN.t)("dev_handoff.workflows.overview.tab_completed")}],[A.length,O.length]),D=f.useMemo(()=>{if(0===L.length)return[];if(C===I1.RECENTLY_VIEWED)return[{key:"recent",sortedNodesWithStatusForFile:L.slice().sort(V5)}];switch(b){case I2.PAGE:let e={};return L.slice().sort((e,t)=>e.visualOrder-t.visualOrder).forEach(t=>{e[t.pageId]||(e[t.pageId]={key:t.pageId,pageId:t.pageId,pageName:t.pageName,sortedNodesWithStatusForFile:[]}),e[t.pageId].sortedNodesWithStatusForFile.push(t)}),Object.values(e);case I2.RECENT:return[{key:"recent",sortedNodesWithStatusForFile:L.slice().sort((e,t)=>t.updatedAt-e.updatedAt)}];case I2.ALPHABETICAL:return[{key:"alphabetical",sortedNodesWithStatusForFile:L.slice().sort((e,t)=>e.nodeName.localeCompare(t.nodeName))}]}},[C,L,b]),[R,M]=(0,S.fp)(K9);f.useEffect(()=>{M(e=>{let t={...e};return D.forEach(({pageId:e})=>{e&&void 0===t[e]&&(t[e]=!0)}),t})},[M,D]);let F=f.useCallback(e=>{M(t=>{let n={...t};return n[e]=!n[e],n})},[M]),{numSections:B,numFrames:H,numPages:G}=f.useMemo(()=>({numSections:u.filter(e=>e.isSection).length,numFrames:u.filter(e=>!e.isSection).length,numPages:new Set(u.map(e=>e.pageId)).size}),[u]),V=(0,tR.US)();!function({nodesWithStatusForFile:e,enabled:t}){let[n,a]=(0,S.fp)(K6),l=f.useRef(),r=(0,eb.eY)();f.useEffect(()=>{if(!t)return;let i=0,o=0,s=performance.now();if(void 0===l.current&&(l.current=new Set),e.forEach(e=>{var t;if(!l.current.has(e.nodeId)){i++;let n=performance.now();null==(t=r.get(e.nodeId))||t.materializeDescendants();let a=performance.now()-n;a>o&&(o=a),l.current.add(e.nodeId)}}),!n){let e=performance.now()-s;(0,Z.sx)("performance.dev_mode.workflows.overview.materialize_nodes",{nodeCount:i,worstNodeMs:o,elapsedMs:e},{forwardToDatadog:!0}),a(!0)}},[e,l,r,n,a,t])}({enabled:V,nodesWithStatusForFile:u});let[K,W]=f.useState(!1),z=f.useCallback(()=>{var e;W(!0),g(null==(e=m.current)?void 0:e.scrollTop)},[g]),[j]=(0,S.fp)(I$);(0,np.h)(()=>{let e=j||"init";i("Dev Mode Overview Shown",{type:t?"full":"lite",source:e},{forwardToDatadog:!0}),s(e),aT.wr()});let J=[...new Set(L.map(e=>e.userId).filter(e=>e))],Y=(0,KT.zy)(J);!function(e,t,n){let a=(0,a6.U)();(0,np.h)(()=>{o=null}),f.useEffect(()=>{if(0!==e.length)try{let l=new Set(e.map(e=>e.pageId)).size,r=new Set(e.filter(e=>e.userId).map(e=>e.userId)).size,i={numNodes:e.length,numNodesWithFallbackUser:e.filter(e=>e.isFallbackForLegacyStatus).length,numSectionsWithMissingUserInfo:e.filter(e=>!e.userId&&e.isSection).length,numFramesWithMissingUserInfo:e.filter(e=>!e.userId&&!e.isSection).length,numPages:l,numUsers:r,tab:t,sortedBy:n};(0,_.bN)(i,o)||(a("dev_mode.overview.stats",i,{forwardToDatadog:!0}),o=i)}catch(e){(0,o2.$D)(o5.e.DEVELOPER_TOOLS,e)}},[e,n,t,a])}(L,C,b),function(e,t,n){let[a,l]=(0,S.fp)(IQ),r=(0,a6.U)();f.useEffect(()=>{if(!a)try{if(e.length>0&&t&&!t.loading){if(t.hasError||!t.usersById)l(!0),(0,Z.sx)("dev_mode.overview.avatars.error",{},{forwardToDatadog:!0});else if(Object.keys(t.usersById).length===e.length){l(!0);let a=n.filter(e=>!e.userId),i=n.filter(e=>!e.userId&&e.isFallbackForLegacyStatus),o=n.filter(e=>!e.userId&&!e.isFallbackForLegacyStatus&&e.hasBeenEditedSinceLastStatusChange),s=Object.entries(t.usersById).filter(([e,t])=>e&&!t);r("dev_mode.overview.avatars.loaded",{numUsersRequested:e.length,numUsersNotFound:s.length,numNodesWithMissingUserInfo:a.length,numNodesWithMissingFallbackUserInfo:i.length,numNodesEditedWithMissingUserInfo:o.length},{forwardToDatadog:!0})}}}catch(e){l(!0),(0,o2.$D)(o5.e.DEVELOPER_TOOLS,e)}},[a,n,l,r,e.length,t])}(J,Y,L);let X=f.useCallback(e=>{i("Dev Mode Overview Tab Clicked",{tab:e}),w(e)},[w,i]);if(f.useEffect(()=>{"fullscreen"===c.view&&c.commentThreadId&&(0,IY._)(d,c,"overview_open_notification")},[d,c]),!V||K)return f.createElement("div",{className:KL},f.createElement("div",{className:nb()(KP,"overview--overviewSpinner--zv-dq"),style:{left:a}},f.createElement(re.kt,{size:"large"})));let Q="";B>0&&(Q+=(0,eN.t)("dev_handoff.workflows.overview.sections_count",{count:B})),H>0&&(B>0&&(Q+=", "),Q+=(0,eN.t)("dev_handoff.workflows.overview.frames_count",{count:H})),B+H>0&&(Q+=" "+(0,eN.t)("dev_handoff.workflows.overview.pages_count",{count:G}));let $=0===D.length,ee=t&&(N||!$);return f.createElement("div",{className:KL},f.createElement("div",{className:nb()(KP,{"overview--withInsetEditorEnabled--ktYXp":r}),style:{left:a}},f.createElement("div",{className:"overview--bannerWrapper--D8N5z"},f.createElement(KI,null),l&&f.createElement(K7,null)),f.createElement("div",{className:"overview--overviewHeaderContainer--BAOL5"},f.createElement("div",{className:"overview--overviewHeader--BBr9p"},f.createElement("div",{className:a8.cx.flex.flexRow.itemsCenter.$},f.createElement("div",{className:a8.cx.flex.flexColumn.flexGrow1.$},f.createElement("div",{className:"overview--overviewTitle--gEd5D text--fontPos13--xW8hS text--_fontBase--QdLsd"},f.createElement("div",{className:"overview--overviewTitleIcon--NvF-4"},f.createElement(KE,null)),f.createElement("h1",null,(0,eN.tx)("dev_handoff.workflows.overview.title")),f.createElement(Wu,null)),f.createElement("div",{className:"overview--overviewTitleInfo--3e2oX text--fontPos11--2LvXf text--_fontBase--QdLsd"},f.createElement("span",null,Q))),ee&&f.createElement(Wa,{value:N,onChange:x})))),f.createElement("div",{className:"overview--scrollAndEmptyMessage--3hOyM"},$&&f.createElement("span",{className:"overview--emptyMessage--lyEC8"},I?(0,eN.tx)("dev_handoff.workflows.overview.empty_message_search"):f.createElement("div",{className:a8.cx.preWrap.$},(0,eN.tx)("dev_handoff.workflows.overview.no_designs",{status:function(e){switch(e){case I1.BUILD:return(0,eN.tx)("dev_handoff.workflows.overview.no_designs_ready");case I1.COMPLETED:return(0,eN.tx)("dev_handoff.workflows.overview.no_designs_completed");default:return(0,eN.tx)("dev_handoff.workflows.overview.no_designs_ready")}}(C),link:f.createElement(a1.CY,{href:"https://help.figma.com/hc/en-us/articles/23918228264855",trusted:!0,target:"_blank",className:"overview--learnMoreLink--Yrujk"},(0,eN.tx)("dev_handoff.workflows.overview.learn_more"))}))),f.createElement(i6.P,{className:"overview--overviewNodesScrollContainer--uc1ey",scrollContainerRef:m,initialScrollTop:p},f.createElement("div",{className:"overview--overviewNodesScrollContainerContents--fTO-e"},t&&f.createElement("div",{className:"overview--overviewTabsContainer--sjuS-"},f.createElement(K3,{tabs:P,selected:C,onTabSelected:X}),C!==I1.RECENTLY_VIEWED&&f.createElement(Wd,{sortedBy:b,setSortedBy:v})),!$&&f.createElement("div",{className:"overview--overviewNodesContainer--P3anz"},f.createElement("div",{className:"overview--overviewSections--2H4Qw"},D.map(({key:e,pageId:t,pageName:n,sortedNodesWithStatusForFile:a})=>{let l=!t||R[e];return f.createElement(Wl,{isExpanded:l,key:e,pageId:t,pageName:n,overviewNodes:a,users:Y,onExpandCollapseClicked:t?()=>F(t):void 0,onPreviewClick:z})}))))))))}function Wn({pageName:e,isExpanded:t,onExpandCollapseClicked:n}){return f.createElement("div",{role:"button",tabIndex:0,className:"overview--pageHeader--dubsT text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:n},f.createElement(a2.B,{svg:t?K$.A:K0.A,className:"overview--caretIcon--gssmY"}),f.createElement(Kv.A,{className:"overview--pageIcon--w9-M7"}),f.createElement("span",null,e))}function Wa({value:e,onChange:t}){return f.createElement("div",{className:"overview--searchBar--NX8cb",role:"presentation","data-editor-theme":"dev-handoff"},f.createElement(Af.h,null),f.createElement(Av.L,{placeholder:(0,eN.t)("dev_handoff.workflows.overview.search_placeholder"),value:e,onChange:e=>{t(e.target.value)},className:"overview--searchInput--3X9vp text--fontPos11--2LvXf text--_fontBase--QdLsd",spellCheck:!1}),!!e&&f.createElement("div",{role:"button",tabIndex:0,onClick:()=>t(""),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.workflows.overview.clear_search"),"aria-label":(0,eN.t)("dev_handoff.workflows.overview.clear_search")},f.createElement(vY.L,null)))}function Wl({pageName:e,overviewNodes:t,users:n,isExpanded:a,onExpandCollapseClicked:l,onPreviewClick:r}){return f.createElement(f.Fragment,null,e&&f.createElement(Wn,{pageName:e,isExpanded:a,onExpandCollapseClicked:l}),a&&f.createElement("div",{className:"overview--overviewNodesList--ipsOp"},t.map(a=>f.createElement(Wo,{key:a.nodeId,overviewNode:a,onPreviewClick:r,renderPageName:!e,users:n,nodeCount:t.length}))))}function Wr({overviewNode:e,onClick:t,renderPageName:n,showLastUpdated:a}){let{nodeId:l,isSection:r,updatedAt:i,pageName:o,nodeName:s,pageId:c}=e,d=Kr(l,c),u=(0,_.d4)(e=>(0,f1.Np)(e,d)),m=(0,_.d4)(e=>(0,f1.xS)(e,d)),p=(0,xP.Cj)(m),g=Ki(),h=f.useRef(null),E=(0,nT.B)(`DEV_HANDOFF_OVERVIEW_OPTIONS_DROPDOWN_${l}`),v=(0,C4.ei)(l),y=(0,LS.Ak)(null==v?void 0:v.lastEditedAt),b=f.useMemo(()=>e.hasBeenEditedSinceLastStatusChange?(0,eN.tx)("dev_handoff.workflows.edit_info.changed"):e.status===ei.zIx.COMPLETED?(0,eN.tx)("dev_handoff.status.completed"):e.status===ei.zIx.BUILD?e.description?(0,eN.tx)("dev_handoff.workflows.edit_info.new version"):(0,eN.tx)("dev_handoff.status.ready_for_dev"):(0,eN.tx)("dev_handoff.workflows.edit_info.changed"),[e.description,e.hasBeenEditedSinceLastStatusChange,e.status]);return f.createElement("div",{className:"overview--overviewNodeCardHeader--C-KTf"},f.createElement("a",{className:"overview--overviewNodeCardHeaderLeft--jYCXL",onClick:t,href:u},n&&o&&f.createElement(f.Fragment,null,f.createElement("span",{className:"overview--pageName--TURV8 text--fontPos13--xW8hS text--_fontBase--QdLsd"},o),f.createElement("span",{className:"overview--pageDivider--HBiVB text--fontPos13--xW8hS text--_fontBase--QdLsd"}," /")),f.createElement("div",null,r?f.createElement(Ky,{className:KB}):f.createElement(Kb.q,{className:KB})),f.createElement("span",{className:"overview--nodeName--20NeF text--fontPos13--xW8hS text--_fontBase--QdLsd"},s)),f.createElement("div",{className:"overview--overviewNodeCardHeaderRight--wRNMN"},a&&i>1&&f.createElement("div",{className:"overview--editInfoText--R-mMh text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,eN.tx)("dev_handoff.overview_mode.design_status",{fromNow:y,status:b})),f.createElement(vJ.K,{"aria-label":(0,eN.t)("dev_handoff.workflows.more_actions_tooltip"),"data-tooltip":(0,eN.t)("dev_handoff.workflows.more_actions_tooltip"),"data-tooltip-type":nx.Ib.TEXT,ref:h,onClick:()=>E.toggle()},f.createElement(Vz.J,null)),E.showing&&h.current&&f.createElement(nN.Cf,{targetRect:h.current.getBoundingClientRect(),minWidth:180,lean:"left"},f.createElement(nC.W.Option,{onClick:()=>g("Dev Mode Overview Card Go To Canvas Clicked",l,c)},(0,eN.tx)("dev_handoff.workflows.overview.show_on_page_action")),f.createElement(nC.W.Option,{onClick:p},(0,eN.tx)("dev_handoff.status.copy_focus_link"))),f.createElement(V0,{nodeId:l,sourceForLogging:"overview"})))}function Wi({overviewNode:e,onClick:t,renderPageName:n,user:a}){let{description:l,nodeId:r,hasBeenEditedSinceLastStatusChange:i}=e,o=Kr(e.nodeId),s=(0,_.d4)(e=>(0,f1.Np)(e,o));return f.createElement(f.Fragment,null,f.createElement("div",{className:"overview--overviewAvatarRowMediaQueryHeader--nigbr"},f.createElement("div",{className:"overview--overviewRecentActivityHeader--sPkSZ"},i?f.createElement(KK,{nodeId:r,user:a,previewUrl:s,isFallbackForLegacyStatus:e.isFallbackForLegacyStatus,onClick:t}):f.createElement(KW,{nodeId:r,user:a,description:l,previewUrl:s,isFallbackForLegacyStatus:e.isFallbackForLegacyStatus,onClick:t}))),f.createElement(Wr,{overviewNode:e,onClick:t,renderPageName:n,showLastUpdated:!1}))}function Wo({overviewNode:e,onPreviewClick:t,renderPageName:n,users:a,nodeCount:l}){var r;let i=(0,_.wA)(),o=(0,a6.U)(),{nodeId:s,pageId:c,updatedAt:d}=e,u=Kr(s),m=(0,_.d4)(e=>(0,f1.Np)(e,u)),[p]=(0,S.fp)(We),g=p===I2.RECENT&&d>1,[,h]=(0,S.fp)(I0),E=null==(r=a.usersById)?void 0:r[e.userId];function v(e){e.preventDefault(),o("Dev Mode Overview Card Clicked",{nodeId:s}),h("overview"),t(),i(nI.$T(u))}return f.createElement("div",{className:"overview--overviewNodeCard--NsmYU"},g&&(a.loading||E)?f.createElement(Wi,{overviewNode:e,onClick:v,renderPageName:n,user:E}):f.createElement(Wr,{overviewNode:e,onClick:v,renderPageName:n,showLastUpdated:!0}),f.createElement(Ws,{nodeId:s,pageId:c,updatedAt:d,previewUrl:m,onClick:v,nodeCount:l}))}function Ws({nodeId:e,pageId:t,updatedAt:n,previewUrl:a,onClick:l,nodeCount:r}){let i=function(e,t){let n=function(e){let t=(0,cp.Fk)(t=>{var n;return null==(n=t.get(e))?void 0:n.backgroundColor});return t?LB.F.format(t):"var(--color-bg)"}(t),a=ei.w3z.backgroundColorOverride(e);return a?LB.F.format((0,hb.aH)(a)):n}(e,t),o=(0,cp.Fk)(t=>{var n;return null==(n=t.get(e))?void 0:n.size}),s=1+(5-5*Math.pow(Math.min(1,Math.max(0,Math.max(o?1-(K5-o.x)/K5:1,o?1-(K4-o.y)/K4:1))),.5)),c=o?{width:o.x*s,height:o.y*s}:{width:K1,height:K2},d=Math.min(1,Math.min(K1/c.width,K2/c.height)),u={width:Math.round(c.width*d),height:Math.round(c.height*d)},m=f.useRef(null),p=EU(m,"100%"),_=FP({nodeId:e,width:u.width,height:u.height,shouldSkip:!p,version:n,reason:"workflows.overview.thumbnail",regenerateAfterImagesLoaded:!0,isDevModeBlendedSection:ei.w3z.canBeBlendedSection(e)}),g=function(){let[e,t]=(0,S.fp)(Kq),[n]=(0,S.fp)(KX),a=(0,a6.U)();return f.useCallback(l=>{if(!e&&n){t(!0);let e=KY.stop();a(KJ,{nodeCount:l,source:n.source,elapsedMs:e},{forwardToDatadog:!0})}},[e,t,n,a])}();return f.useEffect(()=>{_&&g(r)},[_,g,r]),f.createElement("a",{ref:m,className:"overview--previewThumbnail--zofC5",style:{background:i},onClick:l,href:a},_&&f.createElement("img",{src:_.src,style:{maxWidth:_.displaySize.x,maxHeight:_.displaySize.y},alt:(0,eN.t)("dev_handoff.nodes_panel.thumbnail_alt_text")}),f.createElement("div",{className:"overview--previewExpandIcon--nqhxn","data-preferred-theme":"dark","data-tooltip":(0,eN.t)("dev_handoff.workflows.overview.card_hover_expand_tooltip"),"data-tooltip-type":"text"},f.createElement(rm.O,null)))}let Wc=new class{format(e){switch(e){case I2.PAGE:return(0,eN.t)("dev_handoff.workflows.overview.sort_pages");case I2.RECENT:return(0,eN.t)("dev_handoff.workflows.overview.sort_recent");case I2.ALPHABETICAL:return(0,eN.t)("dev_handoff.workflows.overview.sort_alphabetical")}}};function Wd({sortedBy:e,setSortedBy:t}){let n=(0,_.wA)(),a=(0,nT.U)();return f.createElement(ow.l6,{dispatch:n,property:e,id:"DEV_MODE_OVERVIEW_SORT_DROPDOWN",onChange:t,formatter:Wc,dropdownShown:a,className:"overview--sortDropdownButtonContainer--rL8cS",inputClassName:"overview--sortDropdownButton--Doetn text--fontPos11--2LvXf text--_fontBase--QdLsd",dropdownWidth:180,dropdownAlignment:"right"},f.createElement(ow.c$,{formattedValue:(0,eN.t)("dev_handoff.workflows.overview.sort_by"),additionalStylesClassName:"overview--sortByOption--rjLiK",isHeader:!0,ignoreCheck:!0}),Object.values(I2).map(t=>f.createElement(ow.c$,{key:t,value:t,selected:e===t,fullWidth:!0})))}function Wu(){return f.createElement("button",{"data-editor-theme":"dev-handoff",onClick:()=>tg.Ay.unsafeRedirect("https://form.asana.com/?k=dyYqSpHdZqetESFQzNb8hQ&d=10497086658021","_blank"),className:"overview--betaFeedbackBadge--PUv9s text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,eN.tx)("dev_handoff.workflows.overview.feedback"),f.createElement(a2.B,{className:"overview--badgeIcon--rKOUQ",svg:KQ.A}))}var Wm=n(521033),Wp=n(396697),Wf=n(536651),W_=n(601978),Wg=n(760640),Wh=n(770333),WE=n(85098),Wv=n(697378),Wy=n(515009),Wb=n(184027),WC=n(704762),Ww=n(761334),WT=n(927990),Wx=n(502242);function WN({initialPosition:e,initialVariableValue:t,initialView:n,inheritStyleKeyField:a,initialStyleCreationPaint:l,resolvedType:r,recordingKey:i,onCreateStyleSubmit:o,onCreateVariableSubmit:s,onClose:c}){let[d,u]=Wv.t.useTabs({createVariable:!0,createStyle:!0},{recordingKey:n_.Pt(i,"viewTabs"),defaultActive:()=>(function(e){let t=["createVariable","createStyle"];return e&&t.includes(e)?e:t[0]})(n)});return f.createElement(ae.vx,{title:f.createElement(Wv.t.TabStrip,{manager:u},f.createElement(Wv.t.Tab,{...d.createStyle},(0,eN.tx)("design_systems.create_style.style")),f.createElement(Wv.t.Tab,{...d.createVariable},(0,eN.tx)("variables.create_modal.title"))),initialPosition:e,initialWidth:WC.iG,onClose:c},f.createElement(Wv.t.TabPanel,{...d.createVariable},f.createElement(WC.Ty,{resolvedType:r,initialValue:t,recordingKey:n_.Pt(i,"createVariableForm"),onSubmit:s})),f.createElement(Wv.t.TabPanel,{...d.createStyle},f.createElement(WS,{inheritStyleKeyField:a,initialStyleCreationPaint:l,recordingKey:"createStyleModal",onSubmit:o})))}function WS({inheritStyleKeyField:e,initialStyleCreationPaint:t,recordingKey:n,onSubmit:a}){let l=(0,_.d4)(e=>e.mirror.selectedStyleProperties),r=(0,_.d4)(e=>e.mirror.sceneGraphSelection),i=f.useRef(Object.keys(r).length>0),o=(0,HQ.sg)(e),{styleRef:s,createStyle:c}=(0,WT.u)({inheritStyleKeyField:e,initialStyleCreationPaint:t,isCreatingFromSelection:i.current,trackingOptions:{styleType:o}}),d=n_.of(n,"submit",()=>{c(),a(s)});return l.styleType?f.createElement(f.Fragment,null,f.createElement(Wb.zK.Provider,{value:Wb.zM.CREATE_VARIABLE_STYLE},f.createElement(Wx.O8,{type:l.styleType,recordingKey:n,isInspectPanel:!1,selectedStyleProperties:l,showProperties:!0,onEnterPressed:d}),f.createElement(fy.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16},f.createElement(so.$$,{style:{justifySelf:"right"},onClick:d,disabled:!s},(0,eN.tx)("design_systems.create_style.create_style"))))):null}var Wk=n(347240);function WI(){let e=(0,ta.m0)(),t=(0,_.d4)(e=>e.mirror.appModel.activeCanvasEditModeType);return f.useEffect(()=>{e&&(e._keyboard_will_show_with_height=e=>{ei.glU.keyboardWillShowWithHeight(e)},e._keyboard_will_hide=()=>{t===ei.m1T.TEXT&&ei.glU.setDefaultEditMode()},window.FigmaAppObj?(window.FigmaAppObj.keyboardWillShow=()=>{ei.glU.keyboardWillShow()},window.FigmaAppObj.keyboardWillShowWithHeight=e=>{ei.glU.keyboardWillShowWithHeight(e)}):window.FigmaAppObj={keyboardWillShow:()=>{ei.glU.keyboardWillShow()},keyboardWillShowWithHeight:e=>{ei.glU.keyboardWillShowWithHeight(e)}})},[e,t]),null}var WA=n(371435),WO=n(648836),WL=n(75888),WP=n(677859),WD=n(94958);function WR({nodeIDs:e}){let t=(0,aN.J2)(ei.Ez5.slideDeck().isDraggingSlides),n=(0,_.d4)(e=>e.mirror.selectionProperties.pasteSources),a=(0,cp.ew)(e);if(t||0===a.length)return null;if("INTERACTIVE_SLIDE_ELEMENT"===(a.every(e=>e.type===a[0].type)?a[0].type:null))for(let e of a){let{InlineControl:t}=(0,o3.Z)(e.interactiveSlideElementType);if(t)return f.createElement(t,{nodeId:e.guid})}return n&&n.length===e.length?f.createElement(WD.p,{pasteSources:n,recordingKey:"slides-inline-menu"}):null}let WM=f.memo(function(){let e=Object.keys((0,_.d4)(e=>e.mirror.sceneGraphSelection));return e?f.createElement(WO.k,{isShown:!0},f.createElement(WL.IA,null,f.createElement(WP.W1,null,f.createElement(WR,{nodeIDs:e})))):null});var WF=n(302442),WB=n.n(WF);function WU(){let e=(0,EK.Jj)(),t=(0,aN.J2)(ei.Ez5.slideDeck().slideGrid),n=(0,S.md)(aB.uY),[a,l]=(0,f.useState)([]),[r]=(0,o1.A)(a,100,{equalityFn:WG});(0,f.useEffect)(()=>{if(0!==n.length&&r.length){let t=[...r];t.sort((t,a)=>t===e?-1:a===e?1:n.includes(t)&&!n.includes(a)?-1:n.includes(a)&&!n.includes(t)?1:0),WB()(t,n.length).forEach((t,a)=>{t.forEach(t=>{let l=t===e||n.includes(t);setTimeout(()=>(0,E0.I)(t,l),40*a)})}),l([])}},[r,e,n]);let i=(0,aN.J2)(ei.Ez5.slideThumbnailEdits()),o=(0,f.useCallback)(e=>{l(t=>t.includes(e)?t:[...t,e])},[]);return f.createElement(f.Fragment,null,t.flat().map(e=>f.createElement(WH,{key:e,guid:e,editCount:i.get(e)||0,requestThumbnailGeneration:o})))}function WH({guid:e,editCount:t,requestThumbnailGeneration:n}){let[a]=(0,o1.A)(t,400);return(0,f.useEffect)(()=>{n(e)},[e,a,n]),f.createElement(f.Fragment,null)}function WG(e,t){return e.length===t.length&&e.every((e,n)=>e===t[n])}function WV(){let e=(0,tM.qw)();return f.createElement("div",{style:{paddingRight:`calc(${e}px + var(--spacer-2))`}})}var WK=n(179243),WW=n(452883);function Wz(){let[e,t]=(0,S.fp)(WA.h),n=(0,cm.dh)(),a=(0,e2.Xr)(EQ.bY),l=(0,WW.$)(),[r,i]=(0,A.Vc)("last-used-variable-set-bottoms-up",null);(0,f.useEffect)(()=>{var e;let t=ET.D.getState().selectedView,a=null==(e=ei.Ez5.slideDeck().slideGrid.getCopy()[0])?void 0:e[0];if(t.nodeId&&t.nodeId!==n){let e=t.nodeId,l=lE.q.instance.get(e);(null==l?void 0:l.type)==="SLIDE"&&(null==l?void 0:l.containingCanvas)===n&&(a=e)}a&&(0,EK.Lk)(a)},[n]),(0,f.useEffect)(()=>{(0,y.kc)().piper_inline_preview&&e.modalStatus===WA.b.NOT_LOADED&&t({type:"OPEN_SLIDES_INLINE_PREVIEW"})},[e.modalStatus,t]),(0,f.useEffect)(()=>{let e=(0,WK.Dh)(l);e&&i(e.variableSetID)},[l,i]),(0,f.useEffect)(()=>()=>{a({type:EQ.Vf.ALL})},[a]);let o=aV(),s=(0,e2.Xr)(aB.I3);return(0,f.useEffect)(()=>{var e;s(o),null==(e=ei.Ez5)||e.canEnterSlidesDesignMode().set(o)},[o,s]),f.createElement(f.Fragment,null,f.createElement(WM,null),f.createElement("div",{className:a8.cx.flex.hFull.itemsEnd.$},f.createElement(WV,null)),f.createElement(y$,null),f.createElement(yQ,null),f.createElement(WU,null),f.createElement(y0,null))}var Wj=n(74930);let WJ="figjam_search";function WY(){return(0,aN.J2)(ei.Ez5.uiState().showCanvasSearch)?f.createElement(WX,null):null}function WX(){let{query:e,next:t,exit:n,setNavigateNearestOnce:a,search:l,isLoading:r,mode:i}=Aj(),{focusedByButtons:o,hidden:s,setHidden:c,inputRef:d,navDisabled:u}=Az(),m=(0,ta.BI)();(0,np.h)(()=>{c(!1)}),AW(d,t,o);let[p,_]=(0,f.useState)(""),g=(0,f.useCallback)(e=>{var t,n;e.keyCode===b.Uz.ESCAPE?(null==(n=null==(t=e.target)?void 0:t.blur)||n.call(t),c(!0)):"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&(0,Aw.jr)(e,Aw.W0.YES,Aw.VA.NO)&&e.stopPropagation()},[c]),h=(0,f.useCallback)(e=>{switch(e.keyCode){case b.Uz.P:case b.Uz.UP_ARROW:(e.keyCode!==b.Uz.P||C.Ay.mac&&(0,b.vN)(e,b.xH.CONTROL))&&(t(AG.OP.PREV,"keyboard"),e.stopPropagation(),e.preventDefault());break;case b.Uz.N:case b.Uz.DOWN_ARROW:(e.keyCode!==b.Uz.N||C.Ay.mac&&(0,b.vN)(e,b.xH.CONTROL))&&(t(AG.OP.NEXT,"keyboard"),e.stopPropagation(),e.preventDefault());break;case b.Uz.ENTER:if((0,b.Fo)(e)){ei.YEY.exitSearchMode(ei.dNx.SELECT_ACTIVE);break}t(e.shiftKey?AG.OP.PREV:AG.OP.NEXT,"keyboard"),e.stopPropagation(),e.preventDefault()}},[t]),E=(0,nW.U1)(),v=!(null==m?void 0:m.shouldOptimizeForIpadApp);return f.createElement(ux.i,{displayAs:ux.C.Block},f.createElement("div",{ref:E,role:"none",className:nb()(nz.Dm,"figjam_search--container--p-leE",{"figjam_search--hidden--FjJ1m":s}),onTransitionEnd:()=>{s&&n()},onBlurCapture:e=>{e.relatedTarget&&!e.currentTarget.contains(e.relatedTarget)&&(ei.YEY.setOverlayVisible(!1),a())},onKeyDown:g},f.createElement("div",{className:"figjam_search--searchBarRow--sTc8s"},f.createElement(AK,{onChange:e=>l(e),query:e,focusedByButtons:o,innerRef:d,onKeyDown:h,editorType:AT._Y.FIGJAM}),r?f.createElement("div",{className:AU},f.createElement(re.kt,{testId:"canvas-search-loading-spinner"})):f.createElement(f.Fragment,null,!!e&&f.createElement(Wq,null),!u&&f.createElement(f.Fragment,null,f.createElement(iG.K0,{svg:Oo.A,disabled:u,onClick:e=>{t(AG.OP.PREV,"button"),!AY(e)&&v&&(o.current=!0,d.current.focus())},"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("canvas_search.previous"),"data-tooltip-shortcut-key":"canvas-search-prev",recordingKey:"canvas_search.previous"}),f.createElement(iG.K0,{svg:Oi.A,disabled:u,onClick:e=>{t(AG.OP.NEXT,"button"),!AY(e)&&v&&(o.current=!0,d.current.focus())},"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("canvas_search.next"),"data-tooltip-shortcut-key":"canvas-search-next",recordingKey:"canvas_search.next"}))),f.createElement(A8,{lean:"left",minWidth:160,recordingKey:WJ}),f.createElement(iG.K0,{svg:dM.default,onClick:()=>{c(!0)},"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("canvas_search.close"),tooltipForScreenReadersOnly:!0,recordingKey:"canvas_search.close"})),i===ei.EW4.REPLACE&&f.createElement(A0,{query:e,value:p,onChange:_,recordingKey:WJ,onFocus:(t,n)=>{var a;!e&&n&&(null==(a=d.current)||a.focus())},hasMultipleSelections:!1})))}function Wq(){let{total:e}=(0,S.md)(Iv.Fk),t=(0,S.md)(Iv.Ch),n=(null==t?void 0:t.index)==null?"?":`${t.index+1}`,a=0===e?(0,eN.t)("canvas_search.no_results"):(0,eN.t)("canvas_search.results_index_count",{index:n,total:e});return f.createElement("span",{className:"figjam_search--resultsCount--VfQrc","data-testid":"canvas-search-info"},a)}var WZ=n(830111),WQ=n(868912);let W$=(0,lf.jz)(lw.fh1),W0=(0,lf.jz)(lw.if6);function W1({dltBottomOffset:e,collidesWithDLT:t,collidesWithTools:n}){let a=W0;return t&&(a+=e),n&&(a+=W$+W0),a}let W2=(0,lf.jz)(lw.Y_2),W5=(0,lf.jz)(lw.Hsg),W4=(0,lf.jz)(lw.fWT),W3=f.forwardRef(function(e,t){return f.createElement("div",{ref:t,style:e.style,className:nb()("whiteboard_sidebar_modal--WhiteboardSidebarModal--PALf6",e.className)},e.children)}),W6=500,W7="audioplayinvoked",W8="audioplaysuccess";class W9{constructor(e){this.play=({onSuccess:e,onNoInteractionFailure:t})=>{let n=()=>{window.removeEventListener(W7,this.audioPlayInvokedHandler),window.removeEventListener(W8,this.audioPlaySuccessHandler)};window.dispatchEvent(this.audioPlayInvokedEvent),this.audio.play().then(()=>{if(this.shouldBlockPlay){this.audio.pause(),this.isAttemptingToPlay=!1;return}this.lastPlayedTimestamp=Date.now(),window.dispatchEvent(this.audioPlaySuccessEvent),this.isFadingOut?this.fadeOut({}):(this.internalVolumeMultiplier=0,this.fadeIn({fadeInLength:1e3})),e&&e(),this.isAttemptingToPlay=!1,n()}).catch(e=>{if(this.isAttemptingToPlay=!1,"NotAllowedError"===e.name&&t){t();return}if(e.message.toLowerCase().includes("interrupted by a new load request")){(0,o2.$D)(o5.e.FIGJAM_CORE,Error("Benign race condition in FigJam music: new track was requested while the promise to play the previous track was resolving (no user impact)"));return}throw Error(`Failed to play music in the FigJam timer: ${e}`)})},this.playLoadingAudio=()=>{this.loadingAudio.currentSrc&&this.loadingAudio.play().catch(e=>{if("NotAllowedError"!==e.name)throw Error(`Failed to play loading music in the FigJam timer: ${e}`)})},this.stopLoadingAudio=()=>{this.loadingAudio.currentSrc&&(this.loadingAudio.pause(),this.setTimestamp(0,this.loadingAudio))},this.isPaused=()=>this.audio.paused||this.shouldBlockPlay,this.isPlaying=()=>!this.isPaused(),this.setTimestamp=(e,t)=>{if(t){if(t.seeking||t.readyState<=0){console.warn("Already seeking or audio isn't ready, can't set timestamp.");return}t.fastSeek?t.fastSeek(e):t.currentTime=e}},this.playAtTimestamp=({src:e,timestamp:t,onSuccess:n,onFailure:a})=>{this.isAttemptingToPlay=!1;let l=()=>{this.setTimestamp(t/1e3%this.audio.duration,this.audio),this.play({onSuccess:n,onNoInteractionFailure:a})};window.addEventListener(W7,this.audioPlayInvokedHandler),window.addEventListener(W8,this.audioPlaySuccessHandler),this.playLoadingAudio(),this.setSource(""),this.shouldBlockPlay=!1,this.audio.oncanplaythrough=()=>{this.audio.oncanplaythrough=null,this.handleVolumeUpdate(),l()},this.setSource(e)},this.playPreview=({src:e,timestampMs:t=0,playLengthMs:n,fadeLengthMs:a=W6})=>{let l=this.hasSource();this.playAtTimestamp({src:e,timestamp:t,onSuccess:()=>{this.isPaused()||!l?this.internalVolumeMultiplier=0:this.clearFadeTimeouts(),this.fadeIn({}),this.internalFadeOutTimeoutId=window.setTimeout(()=>{this.internalFadeOutTimeoutId=0,this.fadeOut({fadeOutLength:a,shouldStopWhenFadedOut:!0,targetVolumeMultiplier:0})},n+2*a)}})},this.stopPreview=()=>{this.internalFadeOutTimeoutId&&clearTimeout(this.internalFadeOutTimeoutId),this.internalFadeOutTimeoutId=0,this.stop()},this.clearFadeTimeouts=()=>{this.internalFadeOutTimeoutId&&clearTimeout(this.internalFadeOutTimeoutId),this.internalFadeInTimeoutId&&clearTimeout(this.internalFadeInTimeoutId)},this.resetFades=()=>{this.clearFadeTimeouts(),this.internalVolumeMultiplier=1,this.isFadingOut=!1,this.isFadingIn=!1},this.pause=()=>{this.stopLoadingAudio(),this.audio.paused||this.shouldBlockPlay||this.isAttemptingToPlay||(this.audio.pause(),this.clearFadeTimeouts()),this.shouldBlockPlay=!0},this.stop=()=>{this.stopLoadingAudio(),this.resetFades(),this.shouldBlockPlay=!0,this.audio.pause(),this.audio.removeAttribute("src")},this.hasSource=()=>""!==this.audio.currentSrc,this.setSource=e=>{this.audio.src=e},this.setIsMuted=e=>{this.audio.muted=e,this.loadingAudio.muted=e,this.isMuted=e,this.handleVolumeUpdate()},this.getCurrentVolume=()=>this.isMuted?0:(0,rE.qE)(this.externalVolume*this.internalVolumeMultiplier,0,1),this.handleVolumeUpdate=()=>{this.audio.volume=this.getCurrentVolume()},this.setVolume=e=>{this.externalVolume=e,this.handleVolumeUpdate()},this.fadeOut=({fadeOutLength:e=5e3,shouldStopWhenFadedOut:t=!1,targetVolumeMultiplier:n=0,callbackWhenDoneFading:a,resumeFadingIfInterrupted:l=!0})=>{this.clearFadeTimeouts();let r=1/(e/50),i=()=>{!this.audio.paused&&(this.internalVolumeMultiplier>n?(this.internalVolumeMultiplier-=r,this.handleVolumeUpdate(),this.internalFadeOutTimeoutId=window.setTimeout(i,50)):(this.internalFadeOutTimeoutId=0,t&&this.stop(),this.handleVolumeUpdate(),this.isFadingOut=!1,a&&a()))};l&&(this.isFadingOut=!0),i()},this.fadeIn=({fadeInLength:e=1e3,callbackWhenDoneFading:t})=>{this.clearFadeTimeouts();let n=1/(e/50),a=()=>{!this.audio.paused&&(this.internalVolumeMultiplier<1?(this.internalVolumeMultiplier+=n,this.handleVolumeUpdate(),this.internalFadeInTimeoutId=window.setTimeout(a,50)):(this.internalFadeInTimeoutId=0,this.handleVolumeUpdate(),this.isFadingIn=!1,t&&t()))};this.isFadingIn=!0,a()},this.isAttemptingToPlay=!1,this.audio=new Audio,this.audio.src="",this.audio.loop=!0,this.loadingAudio=new Audio,e&&e.loadingPlaybackUrl&&(this.loadingAudio.src=e.loadingPlaybackUrl),this.loadingAudio.loop=!0,this.audioPlayInvokedEvent=new Event(W7),this.audioPlayInvokedHandler=()=>{this.isAttemptingToPlay=!0},this.audioPlaySuccessEvent=new Event(W8),this.audioPlaySuccessHandler=()=>{this.loadingAudio.currentSrc&&this.loadingAudio.pause(),this.isAttemptingToPlay=!1},this.externalVolume=.7,this.isMuted=!1,this.isFadingOut=!1,this.isFadingIn=!1,this.shouldBlockPlay=!1,this.internalVolumeMultiplier=1,this.internalFadeOutTimeoutId=0,this.internalFadeInTimeoutId=0,this.lastPlayedTimestamp=null;let t=null==e?void 0:e.timeUpdateListener;t&&this.audio.addEventListener("timeupdate",()=>t(this.audio))}}var ze=n(411189);let zt=e=>(0,_.d4)(t=>{let n=((0,y.kc)().figjam_more_tracks_listen?t.music.allSongs:t.music.activeSongs).filter(t=>e===t.song_id);return n.length?n[0]:void 0},ze.eB);function zn(){let e=(0,_.d4)(e=>e.music.music);return!(null==e?void 0:e.isPaused)&&!(null==e?void 0:e.isStopped)}let za=()=>{let[e,t]=f.useState({}),n=(0,_.d4)(e=>e.music.music);return f.useEffect(()=>{if(!n||(null==n?void 0:n.isPaused)||(null==n?void 0:n.isStopped))return;let e=setTimeout(()=>t({}),500);return()=>{clearTimeout(e)}},[e,n,null==n?void 0:n.isPaused]),e};var zl=n(587467),zr=n(688477);let zi={song_id:"fake track for no selection",title:"",album_art:"",playback_url:"",start_at_ms:0,cuesheet:{tracks:[]}};function zo({selectedSong:e,activeSongs:t,isLoading:n,withRightMargin:a,withBorder:l,withHeavyFont:r}){let i=(0,_.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)==="song-dropdown"?e.dropdownShown:null}),o=(0,O.F)((0,_.d4)(e=>e)),s=(0,_.wA)(),c=(0,_.d4)(e=>e.music.playerInstance),d=e||zi,u=(0,ps.$3)(),m=[f.createElement(ow.c$,{fullWidth:!0,ignoreCheck:!0,key:"loading-music-options"},f.createElement("div",{className:"music_dropdown--loadingSpinner--0IUIG"},f.createElement(re.kt,null)))];f.useEffect(()=>{let a=t.length&&!n,l=!e;a&&l&&s(pl.Dx({selectedSongID:t[0].song_id}))},[n,e,s,t]),n||(m=t.map(e=>f.createElement(ow.c$,{key:e.song_id,value:e,icon:f.createElement("img",{src:e.album_art,alt:`album art for ${e.title}`,className:"music_dropdown--inDropdownAlbumArt---OmqE"}),formattedValue:zs.format(e),height:48})));let p=async t=>{t.song_id===zi.song_id?e&&((0,zl.$B)(o.current,e.song_id),s(pl.L({selectedSongID:"",musicStartTimeMs:0}))):await (0,ze._s)({songID:t.song_id,onSuccess:()=>{let e=null==c?void 0:c.isPlaying();(0,zl.tU)(o.current,t.song_id,e||!1);let n=t.song_id;s(pl.Dx({selectedSongID:n,dontTransmitWhenPaused:!0}))},onNotFound:()=>{s(pl.qV()),s(eS.F.enqueue({message:(0,eN.t)("whiteboard.timer.song_not_available_error"),error:!0,type:pl.lm}))}})},g=d===zi?(0,eN.t)("whiteboard.music.loading"):void 0;return f.createElement(ow.l6,{id:"song-dropdown",ariaLabel:(0,eN.t)("whiteboard.music_player_select.aria_label"),"data-testid":"music-dropdown-button",className:"music_dropdown--songDropdownClosed--PEWeP",property:d,willShowDropdown:()=>new Promise(e=>{(0,zl.eT)(o.current),e()}),onChange:p,dropdownWidth:224,formatter:zs,dispatch:s,dropdownShown:i,dropdownOverride:g,inputClassName:nb()("music_dropdown--songDropdownInput--VQjWF",{"music_dropdown--songInputTextSongSelected--4mWzH":!!e,"music_dropdown--songInputTextNoSongSelected--AW4Zi":!e,"music_dropdown--songDropdownRightMargin--SiuxZ":a,"music_dropdown--songDropdownHeavyFont--fIlJd":r,"music_dropdown--border--8RslA":l,"music_dropdown--withHover--5STIo":l&&!u}),chevronClassName:"music_dropdown--songDropdownChevronStandalone--0F6eP music_dropdown--songDropdownChevronStandalone--0F6eP",icon:d===zi?f.createElement(C3.t,{className:"music_dropdown--musicIcon--rYDUF",svg:zr.A}):void 0,neverConstrain:!0,hideDropdownWhenContainerMoves:!0,targetDomNode:document.body},m)}let zs={format:e=>(null==e?void 0:e.title)||(0,eN.t)("whiteboard.timer.none")};function zc({useLightShadow:e}){return f.createElement("svg",{width:"96",height:"96",viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{height:"100%",width:"100%",filter:e?"drop-shadow(0px 0.325px 0.813px rgba(0, 0, 0, 0.15)) drop-shadow(0px 1.625px 2.6px rgba(0, 0, 0, 0.12)) drop-shadow(0px 0px 0.081px rgba(0, 0, 0, 0.12))":"drop-shadow(0px 1.625px 4.062500476837158px rgba(0, 0, 0, 0.15)) drop-shadow(0px 8.125000953674316px 13px rgba(0, 0, 0, 0.12)) drop-shadow(0px 0px 0.40625px rgba(0, 0, 0, 0.12))"}},f.createElement("mask",{id:"mask0_134_226",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"96",height:"96"},f.createElement("circle",{cx:"48",cy:"48",r:"48",fill:"black"}),f.createElement("circle",{cx:"48",cy:"48",r:"48",fill:"url(#paint0_radial_134_226)"}),f.createElement("circle",{cx:"48",cy:"48",r:"47.1875",stroke:"black",strokeOpacity:"0.8",strokeWidth:"1.625"})),f.createElement("g",{mask:"url(#mask0_134_226)"},f.createElement("circle",{cx:"48",cy:"48",r:"48",fill:"black"}),f.createElement("circle",{cx:"48",cy:"48",r:"48",fill:"url(#paint1_radial_134_226)"}),f.createElement("circle",{cx:"48",cy:"48",r:"47.1875",stroke:"black",strokeOpacity:"0.3",strokeWidth:"1.625"}),f.createElement("circle",{cx:"47.9999",cy:"48",r:"48.3438",stroke:"url(#paint2_linear_134_226)",strokeWidth:"0.8125"}),f.createElement("circle",{cx:"47.9999",cy:"48",r:"45.0938",stroke:"url(#paint3_linear_134_226)",strokeWidth:"0.8125"}),f.createElement("circle",{cx:"47.9999",cy:"48",r:"41.8438",stroke:"url(#paint4_linear_134_226)",strokeWidth:"0.8125"}),f.createElement("circle",{cx:"47.9999",cy:"48",r:"38.5938",stroke:"url(#paint5_linear_134_226)",strokeWidth:"0.8125"}),f.createElement("circle",{cx:"47.9999",cy:"48",r:"35.3438",stroke:"url(#paint6_linear_134_226)",strokeWidth:"0.8125"}),f.createElement("circle",{cx:"47.9999",cy:"48",r:"32.0938",stroke:"url(#paint7_linear_134_226)",strokeWidth:"0.8125"}),f.createElement("g",{filter:"url(#filter0_f_134_226)"},f.createElement("path",{d:"M47.6379 42.7921L50.2388 118.707L-34.6776 45.6123L47.6379 42.7921Z",fill:"url(#paint8_linear_134_226)"})),f.createElement("g",{filter:"url(#filter1_f_134_226)"},f.createElement("path",{d:"M56.3805 43.3806L56.3805 -32.5788L138.744 43.3806L56.3805 43.3806Z",fill:"url(#paint9_linear_134_226)"}))),f.createElement("defs",null,f.createElement("filter",{id:"filter0_f_134_226",x:"-42.8026",y:"34.6671",width:"101.166",height:"92.1648",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),f.createElement("feGaussianBlur",{stdDeviation:"4.0625",result:"effect1_foregroundBlur_134_226"})),f.createElement("filter",{id:"filter1_f_134_226",x:"48.2555",y:"-40.7038",width:"98.6138",height:"92.2094",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),f.createElement("feGaussianBlur",{stdDeviation:"4.0625",result:"effect1_foregroundBlur_134_226"})),f.createElement("radialGradient",{id:"paint0_radial_134_226",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(48 48) rotate(135) scale(65.7609 27.1741)"},f.createElement("stop",{stopColor:"white",stopOpacity:"0.63"}),f.createElement("stop",{offset:"0.66129",stopColor:"white",stopOpacity:"0.17"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),f.createElement("radialGradient",{id:"paint1_radial_134_226",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(48 48) rotate(135) scale(65.7609 27.1741)"},f.createElement("stop",{stopColor:"white",stopOpacity:"0.63"}),f.createElement("stop",{offset:"0.66129",stopColor:"white",stopOpacity:"0.17"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),f.createElement("linearGradient",{id:"paint2_linear_134_226",x1:"96.7498",y1:"96.75",x2:"-0.750201",y2:"-0.75003",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),f.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),f.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),f.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),f.createElement("linearGradient",{id:"paint3_linear_134_226",x1:"93.4998",y1:"93.5",x2:"2.49981",y2:"2.49997",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),f.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),f.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),f.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),f.createElement("linearGradient",{id:"paint4_linear_134_226",x1:"90.2498",y1:"90.25",x2:"5.74982",y2:"5.74997",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),f.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),f.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),f.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),f.createElement("linearGradient",{id:"paint5_linear_134_226",x1:"86.9998",y1:"87",x2:"8.99983",y2:"8.99997",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),f.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),f.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),f.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),f.createElement("linearGradient",{id:"paint6_linear_134_226",x1:"83.7498",y1:"83.75",x2:"12.2498",y2:"12.25",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),f.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),f.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),f.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),f.createElement("linearGradient",{id:"paint7_linear_134_226",x1:"80.4998",y1:"80.5",x2:"15.4998",y2:"15.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),f.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),f.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),f.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),f.createElement("linearGradient",{id:"paint8_linear_134_226",x1:"11.6492",y1:"45.2351",x2:"48.238",y2:"80.972",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0"}),f.createElement("stop",{offset:"0.452124",stopColor:"white",stopOpacity:"0.1"}),f.createElement("stop",{offset:"0.539969",stopColor:"white",stopOpacity:"0.48"}),f.createElement("stop",{offset:"0.635517",stopColor:"white",stopOpacity:"0.1"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),f.createElement("linearGradient",{id:"paint9_linear_134_226",x1:"92.4318",y1:"42.1712",x2:"57.088",y2:"5.20249",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0"}),f.createElement("stop",{offset:"0.452124",stopColor:"white",stopOpacity:"0.1"}),f.createElement("stop",{offset:"0.539969",stopColor:"white",stopOpacity:"0.48"}),f.createElement("stop",{offset:"0.635517",stopColor:"white",stopOpacity:"0.1"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"}))))}function zd(){return f.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("circle",{cx:"9.59963",cy:"5.33317",r:"1.06667",fill:"url(#paint0_linear_1808_68900)"}),f.createElement("circle",{cx:"13.8667",cy:"5.33336",r:"1.06667",fill:"url(#paint1_linear_1808_68900)"}),f.createElement("circle",{cx:"18.1333",cy:"5.33356",r:"1.06667",fill:"url(#paint2_linear_1808_68900)"}),f.createElement("circle",{cx:"22.3997",cy:"5.33317",r:"1.06667",fill:"url(#paint3_linear_1808_68900)"}),f.createElement("circle",{cx:"5.334",cy:"9.6002",r:"1.06667",fill:"url(#paint4_linear_1808_68900)"}),f.createElement("circle",{cx:"5.334",cy:"5.33336",r:"1.06667",fill:"url(#paint5_linear_1808_68900)"}),f.createElement("circle",{cx:"1.06667",cy:"9.6",r:"1.06667",fill:"url(#paint6_linear_1808_68900)"}),f.createElement("circle",{cx:"30.9334",cy:"9.6002",r:"1.06667",fill:"url(#paint7_linear_1808_68900)"}),f.createElement("circle",{cx:"9.59963",cy:"9.6002",r:"1.06667",fill:"url(#paint8_linear_1808_68900)"}),f.createElement("circle",{cx:"13.8667",cy:"9.6",r:"1.06667",fill:"url(#paint9_linear_1808_68900)"}),f.createElement("circle",{cx:"18.1333",cy:"9.6002",r:"1.06667",fill:"url(#paint10_linear_1808_68900)"}),f.createElement("circle",{cx:"22.3997",cy:"9.6002",r:"1.06667",fill:"url(#paint11_linear_1808_68900)"}),f.createElement("circle",{cx:"26.6668",cy:"9.6002",r:"1.06667",fill:"url(#paint12_linear_1808_68900)"}),f.createElement("circle",{cx:"26.6668",cy:"5.33317",r:"1.06667",fill:"url(#paint13_linear_1808_68900)"}),f.createElement("circle",{cx:"5.334",cy:"13.8666",r:"1.06667",fill:"url(#paint14_linear_1808_68900)"}),f.createElement("circle",{cx:"1.06667",cy:"13.8666",r:"1.06667",fill:"url(#paint15_linear_1808_68900)"}),f.createElement("circle",{cx:"30.9334",cy:"13.8666",r:"1.06667",fill:"url(#paint16_linear_1808_68900)"}),f.createElement("circle",{cx:"9.59963",cy:"13.8666",r:"1.06667",fill:"url(#paint17_linear_1808_68900)"}),f.createElement("circle",{cx:"13.8667",cy:"13.8666",r:"1.06667",fill:"url(#paint18_linear_1808_68900)"}),f.createElement("circle",{cx:"18.1333",cy:"13.8666",r:"1.06667",fill:"url(#paint19_linear_1808_68900)"}),f.createElement("circle",{cx:"22.3997",cy:"13.8666",r:"1.06667",fill:"url(#paint20_linear_1808_68900)"}),f.createElement("circle",{cx:"26.6668",cy:"13.8666",r:"1.06667",fill:"url(#paint21_linear_1808_68900)"}),f.createElement("circle",{cx:"5.334",cy:"18.1333",r:"1.06667",fill:"url(#paint22_linear_1808_68900)"}),f.createElement("circle",{cx:"1.06667",cy:"18.1333",r:"1.06667",fill:"url(#paint23_linear_1808_68900)"}),f.createElement("circle",{cx:"30.9334",cy:"18.1333",r:"1.06667",fill:"url(#paint24_linear_1808_68900)"}),f.createElement("circle",{cx:"9.59963",cy:"18.1333",r:"1.06667",fill:"url(#paint25_linear_1808_68900)"}),f.createElement("circle",{cx:"13.8667",cy:"18.1333",r:"1.06667",fill:"url(#paint26_linear_1808_68900)"}),f.createElement("circle",{cx:"18.1333",cy:"18.1333",r:"1.06667",fill:"url(#paint27_linear_1808_68900)"}),f.createElement("circle",{cx:"22.3997",cy:"18.1333",r:"1.06667",fill:"url(#paint28_linear_1808_68900)"}),f.createElement("circle",{cx:"26.6668",cy:"18.1333",r:"1.06667",fill:"url(#paint29_linear_1808_68900)"}),f.createElement("circle",{cx:"5.334",cy:"22.3999",r:"1.06667",fill:"url(#paint30_linear_1808_68900)"}),f.createElement("circle",{cx:"5.334",cy:"26.6668",r:"1.06667",fill:"url(#paint31_linear_1808_68900)"}),f.createElement("circle",{cx:"1.06667",cy:"22.3999",r:"1.06667",fill:"url(#paint32_linear_1808_68900)"}),f.createElement("circle",{cx:"30.9334",cy:"22.4001",r:"1.06667",fill:"url(#paint33_linear_1808_68900)"}),f.createElement("circle",{cx:"9.59963",cy:"22.4001",r:"1.06667",fill:"url(#paint34_linear_1808_68900)"}),f.createElement("circle",{cx:"13.8667",cy:"22.3999",r:"1.06667",fill:"url(#paint35_linear_1808_68900)"}),f.createElement("circle",{cx:"18.1333",cy:"22.3999",r:"1.06667",fill:"url(#paint36_linear_1808_68900)"}),f.createElement("circle",{cx:"22.3997",cy:"22.4001",r:"1.06667",fill:"url(#paint37_linear_1808_68900)"}),f.createElement("circle",{cx:"26.6668",cy:"22.4001",r:"1.06667",fill:"url(#paint38_linear_1808_68900)"}),f.createElement("circle",{cx:"26.6668",cy:"26.6668",r:"1.06667",fill:"url(#paint39_linear_1808_68900)"}),f.createElement("circle",{cx:"9.59963",cy:"26.6668",r:"1.06667",fill:"url(#paint40_linear_1808_68900)"}),f.createElement("circle",{cx:"13.8667",cy:"26.6668",r:"1.06667",fill:"url(#paint41_linear_1808_68900)"}),f.createElement("circle",{cx:"18.1333",cy:"26.6668",r:"1.06667",fill:"url(#paint42_linear_1808_68900)"}),f.createElement("circle",{cx:"22.3997",cy:"26.6668",r:"1.06667",fill:"url(#paint43_linear_1808_68900)"}),f.createElement("circle",{cx:"9.59963",cy:"30.9332",r:"1.06667",fill:"url(#paint44_linear_1808_68900)"}),f.createElement("circle",{cx:"13.8667",cy:"30.9334",r:"1.06667",fill:"url(#paint45_linear_1808_68900)"}),f.createElement("circle",{cx:"18.1333",cy:"30.9336",r:"1.06667",fill:"url(#paint46_linear_1808_68900)"}),f.createElement("circle",{cx:"22.3997",cy:"30.9332",r:"1.06667",fill:"url(#paint47_linear_1808_68900)"}),f.createElement("circle",{cx:"9.59963",cy:"1.06672",r:"1.06667",fill:"url(#paint48_linear_1808_68900)"}),f.createElement("circle",{cx:"13.8667",cy:"1.06672",r:"1.06667",fill:"url(#paint49_linear_1808_68900)"}),f.createElement("circle",{cx:"18.1333",cy:"1.06672",r:"1.06667",fill:"url(#paint50_linear_1808_68900)"}),f.createElement("circle",{cx:"22.3997",cy:"1.06672",r:"1.06667",fill:"url(#paint51_linear_1808_68900)"}),f.createElement("defs",null,f.createElement("linearGradient",{id:"paint0_linear_1808_68900",x1:"9.59963",y1:"4.2665",x2:"9.59963",y2:"6.39984",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint1_linear_1808_68900",x1:"13.8667",y1:"4.26669",x2:"13.8667",y2:"6.40003",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint2_linear_1808_68900",x1:"18.1333",y1:"4.26689",x2:"18.1333",y2:"6.40023",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint3_linear_1808_68900",x1:"22.3997",y1:"4.2665",x2:"22.3997",y2:"6.39984",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint4_linear_1808_68900",x1:"5.334",y1:"8.53353",x2:"5.334",y2:"10.6669",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint5_linear_1808_68900",x1:"5.334",y1:"4.26669",x2:"5.334",y2:"6.40003",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint6_linear_1808_68900",x1:"1.06667",y1:"8.53333",x2:"1.06667",y2:"10.6667",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint7_linear_1808_68900",x1:"30.9334",y1:"8.53353",x2:"30.9334",y2:"10.6669",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint8_linear_1808_68900",x1:"9.59963",y1:"8.53353",x2:"9.59963",y2:"10.6669",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint9_linear_1808_68900",x1:"13.8667",y1:"8.53333",x2:"13.8667",y2:"10.6667",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint10_linear_1808_68900",x1:"18.1333",y1:"8.53353",x2:"18.1333",y2:"10.6669",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint11_linear_1808_68900",x1:"22.3997",y1:"8.53353",x2:"22.3997",y2:"10.6669",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint12_linear_1808_68900",x1:"26.6668",y1:"8.53353",x2:"26.6668",y2:"10.6669",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint13_linear_1808_68900",x1:"26.6668",y1:"4.2665",x2:"26.6668",y2:"6.39984",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint14_linear_1808_68900",x1:"5.334",y1:"12.8",x2:"5.334",y2:"14.9333",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint15_linear_1808_68900",x1:"1.06667",y1:"12.8",x2:"1.06667",y2:"14.9333",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint16_linear_1808_68900",x1:"30.9334",y1:"12.8",x2:"30.9334",y2:"14.9333",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint17_linear_1808_68900",x1:"9.59963",y1:"12.8",x2:"9.59963",y2:"14.9333",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint18_linear_1808_68900",x1:"13.8667",y1:"12.8",x2:"13.8667",y2:"14.9333",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint19_linear_1808_68900",x1:"18.1333",y1:"12.8",x2:"18.1333",y2:"14.9333",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint20_linear_1808_68900",x1:"22.3997",y1:"12.8",x2:"22.3997",y2:"14.9333",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint21_linear_1808_68900",x1:"26.6668",y1:"12.8",x2:"26.6668",y2:"14.9333",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint22_linear_1808_68900",x1:"5.334",y1:"17.0666",x2:"5.334",y2:"19.1999",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint23_linear_1808_68900",x1:"1.06667",y1:"17.0666",x2:"1.06667",y2:"19.1999",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint24_linear_1808_68900",x1:"30.9334",y1:"17.0666",x2:"30.9334",y2:"19.1999",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint25_linear_1808_68900",x1:"9.59963",y1:"17.0666",x2:"9.59963",y2:"19.1999",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint26_linear_1808_68900",x1:"13.8667",y1:"17.0666",x2:"13.8667",y2:"19.1999",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint27_linear_1808_68900",x1:"18.1333",y1:"17.0666",x2:"18.1333",y2:"19.1999",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint28_linear_1808_68900",x1:"22.3997",y1:"17.0666",x2:"22.3997",y2:"19.1999",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint29_linear_1808_68900",x1:"26.6668",y1:"17.0666",x2:"26.6668",y2:"19.1999",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint30_linear_1808_68900",x1:"5.334",y1:"21.3333",x2:"5.334",y2:"23.4666",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint31_linear_1808_68900",x1:"5.334",y1:"25.6001",x2:"5.334",y2:"27.7334",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint32_linear_1808_68900",x1:"1.06667",y1:"21.3333",x2:"1.06667",y2:"23.4666",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint33_linear_1808_68900",x1:"30.9334",y1:"21.3334",x2:"30.9334",y2:"23.4668",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint34_linear_1808_68900",x1:"9.59963",y1:"21.3334",x2:"9.59963",y2:"23.4668",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint35_linear_1808_68900",x1:"13.8667",y1:"21.3333",x2:"13.8667",y2:"23.4666",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint36_linear_1808_68900",x1:"18.1333",y1:"21.3333",x2:"18.1333",y2:"23.4666",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint37_linear_1808_68900",x1:"22.3997",y1:"21.3334",x2:"22.3997",y2:"23.4668",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint38_linear_1808_68900",x1:"26.6668",y1:"21.3334",x2:"26.6668",y2:"23.4668",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint39_linear_1808_68900",x1:"26.6668",y1:"25.6001",x2:"26.6668",y2:"27.7334",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint40_linear_1808_68900",x1:"9.59963",y1:"25.6001",x2:"9.59963",y2:"27.7334",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint41_linear_1808_68900",x1:"13.8667",y1:"25.6001",x2:"13.8667",y2:"27.7334",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint42_linear_1808_68900",x1:"18.1333",y1:"25.6001",x2:"18.1333",y2:"27.7334",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint43_linear_1808_68900",x1:"22.3997",y1:"25.6001",x2:"22.3997",y2:"27.7334",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint44_linear_1808_68900",x1:"9.59963",y1:"29.8665",x2:"9.59963",y2:"31.9999",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint45_linear_1808_68900",x1:"13.8667",y1:"29.8667",x2:"13.8667",y2:"32.0001",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint46_linear_1808_68900",x1:"18.1333",y1:"29.8669",x2:"18.1333",y2:"32.0003",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint47_linear_1808_68900",x1:"22.3997",y1:"29.8665",x2:"22.3997",y2:"31.9999",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint48_linear_1808_68900",x1:"9.59963",y1:"5.34058e-05",x2:"9.59963",y2:"2.13339",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint49_linear_1808_68900",x1:"13.8667",y1:"5.34058e-05",x2:"13.8667",y2:"2.13339",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint50_linear_1808_68900",x1:"18.1333",y1:"5.34058e-05",x2:"18.1333",y2:"2.13339",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint51_linear_1808_68900",x1:"22.3997",y1:"5.34058e-05",x2:"22.3997",y2:"2.13339",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"}))))}function zu(){return f.createElement("svg",{width:"45",height:"46",viewBox:"0 0 45 46",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("circle",{cx:"13.5002",cy:"8",r:"1.5",fill:"url(#paint0_linear_1414_55682)"}),f.createElement("circle",{cx:"19.5001",cy:"8",r:"1.5",fill:"url(#paint1_linear_1414_55682)"}),f.createElement("circle",{cx:"25.4994",cy:"8",r:"1.5",fill:"url(#paint2_linear_1414_55682)"}),f.createElement("circle",{cx:"31.5001",cy:"8",r:"1.5",fill:"url(#paint3_linear_1414_55682)"}),f.createElement("circle",{cx:"7.50049",cy:"14",r:"1.5",fill:"url(#paint4_linear_1414_55682)"}),f.createElement("circle",{cx:"7.50049",cy:"8",r:"1.5",fill:"url(#paint5_linear_1414_55682)"}),f.createElement("circle",{cx:"1.5",cy:"14",r:"1.5",fill:"url(#paint6_linear_1414_55682)"}),f.createElement("circle",{cx:"43.4999",cy:"14",r:"1.5",fill:"url(#paint7_linear_1414_55682)"}),f.createElement("circle",{cx:"13.5002",cy:"14",r:"1.5",fill:"url(#paint8_linear_1414_55682)"}),f.createElement("circle",{cx:"19.5001",cy:"14",r:"1.5",fill:"url(#paint9_linear_1414_55682)"}),f.createElement("circle",{cx:"25.4994",cy:"14.0002",r:"1.5",fill:"url(#paint10_linear_1414_55682)"}),f.createElement("circle",{cx:"31.5001",cy:"14",r:"1.5",fill:"url(#paint11_linear_1414_55682)"}),f.createElement("circle",{cx:"37.5002",cy:"14",r:"1.5",fill:"url(#paint12_linear_1414_55682)"}),f.createElement("circle",{cx:"37.5002",cy:"8",r:"1.5",fill:"url(#paint13_linear_1414_55682)"}),f.createElement("circle",{cx:"7.50049",cy:"20",r:"1.5",fill:"url(#paint14_linear_1414_55682)"}),f.createElement("circle",{cx:"1.5",cy:"20",r:"1.5",fill:"url(#paint15_linear_1414_55682)"}),f.createElement("circle",{cx:"43.4999",cy:"20",r:"1.5",fill:"url(#paint16_linear_1414_55682)"}),f.createElement("circle",{cx:"13.5002",cy:"20",r:"1.5",fill:"url(#paint17_linear_1414_55682)"}),f.createElement("circle",{cx:"19.5001",cy:"20",r:"1.5",fill:"url(#paint18_linear_1414_55682)"}),f.createElement("circle",{cx:"25.4994",cy:"20",r:"1.5",fill:"url(#paint19_linear_1414_55682)"}),f.createElement("circle",{cx:"31.5001",cy:"20",r:"1.5",fill:"url(#paint20_linear_1414_55682)"}),f.createElement("circle",{cx:"37.5002",cy:"20",r:"1.5",fill:"url(#paint21_linear_1414_55682)"}),f.createElement("circle",{cx:"7.50049",cy:"26",r:"1.5",fill:"url(#paint22_linear_1414_55682)"}),f.createElement("circle",{cx:"1.5",cy:"26",r:"1.5",fill:"url(#paint23_linear_1414_55682)"}),f.createElement("circle",{cx:"43.4999",cy:"26",r:"1.5",fill:"url(#paint24_linear_1414_55682)"}),f.createElement("circle",{cx:"13.5002",cy:"26",r:"1.5",fill:"url(#paint25_linear_1414_55682)"}),f.createElement("circle",{cx:"19.5001",cy:"26",r:"1.5",fill:"url(#paint26_linear_1414_55682)"}),f.createElement("circle",{cx:"25.4994",cy:"25.9998",r:"1.5",fill:"url(#paint27_linear_1414_55682)"}),f.createElement("circle",{cx:"31.5001",cy:"26",r:"1.5",fill:"url(#paint28_linear_1414_55682)"}),f.createElement("circle",{cx:"37.5002",cy:"26",r:"1.5",fill:"url(#paint29_linear_1414_55682)"}),f.createElement("circle",{cx:"7.50049",cy:"32",r:"1.5",fill:"url(#paint30_linear_1414_55682)"}),f.createElement("circle",{cx:"7.50049",cy:"38",r:"1.5",fill:"url(#paint31_linear_1414_55682)"}),f.createElement("circle",{cx:"1.5",cy:"32",r:"1.5",fill:"url(#paint32_linear_1414_55682)"}),f.createElement("circle",{cx:"43.4999",cy:"32",r:"1.5",fill:"url(#paint33_linear_1414_55682)"}),f.createElement("circle",{cx:"13.5002",cy:"32",r:"1.5",fill:"url(#paint34_linear_1414_55682)"}),f.createElement("circle",{cx:"19.5001",cy:"32",r:"1.5",fill:"url(#paint35_linear_1414_55682)"}),f.createElement("circle",{cx:"25.4994",cy:"32",r:"1.5",fill:"url(#paint36_linear_1414_55682)"}),f.createElement("circle",{cx:"31.5001",cy:"32",r:"1.5",fill:"url(#paint37_linear_1414_55682)"}),f.createElement("circle",{cx:"37.5002",cy:"32",r:"1.5",fill:"url(#paint38_linear_1414_55682)"}),f.createElement("circle",{cx:"37.5002",cy:"38",r:"1.5",fill:"url(#paint39_linear_1414_55682)"}),f.createElement("circle",{cx:"13.5002",cy:"38",r:"1.5",fill:"url(#paint40_linear_1414_55682)"}),f.createElement("circle",{cx:"19.5001",cy:"38",r:"1.5",fill:"url(#paint41_linear_1414_55682)"}),f.createElement("circle",{cx:"25.4994",cy:"38",r:"1.5",fill:"url(#paint42_linear_1414_55682)"}),f.createElement("circle",{cx:"31.5001",cy:"38",r:"1.5",fill:"url(#paint43_linear_1414_55682)"}),f.createElement("circle",{cx:"13.5002",cy:"44",r:"1.5",fill:"url(#paint44_linear_1414_55682)"}),f.createElement("circle",{cx:"19.5001",cy:"44",r:"1.5",fill:"url(#paint45_linear_1414_55682)"}),f.createElement("circle",{cx:"25.4994",cy:"44",r:"1.5",fill:"url(#paint46_linear_1414_55682)"}),f.createElement("circle",{cx:"31.5001",cy:"44",r:"1.5",fill:"url(#paint47_linear_1414_55682)"}),f.createElement("circle",{cx:"13.5002",cy:"2",r:"1.5",fill:"url(#paint48_linear_1414_55682)"}),f.createElement("circle",{cx:"19.5001",cy:"2",r:"1.5",fill:"url(#paint49_linear_1414_55682)"}),f.createElement("circle",{cx:"25.4994",cy:"2",r:"1.5",fill:"url(#paint50_linear_1414_55682)"}),f.createElement("circle",{cx:"31.5001",cy:"2",r:"1.5",fill:"url(#paint51_linear_1414_55682)"}),f.createElement("defs",null,f.createElement("linearGradient",{id:"paint0_linear_1414_55682",x1:"13.5002",y1:"6.5",x2:"13.5002",y2:"9.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint1_linear_1414_55682",x1:"19.5001",y1:"6.5",x2:"19.5001",y2:"9.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint2_linear_1414_55682",x1:"25.4994",y1:"6.5",x2:"25.4994",y2:"9.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint3_linear_1414_55682",x1:"31.5001",y1:"6.5",x2:"31.5001",y2:"9.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint4_linear_1414_55682",x1:"7.50049",y1:"12.5",x2:"7.50049",y2:"15.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint5_linear_1414_55682",x1:"7.50049",y1:"6.5",x2:"7.50049",y2:"9.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint6_linear_1414_55682",x1:"1.5",y1:"12.5",x2:"1.5",y2:"15.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint7_linear_1414_55682",x1:"43.4999",y1:"12.5",x2:"43.4999",y2:"15.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint8_linear_1414_55682",x1:"13.5002",y1:"12.5",x2:"13.5002",y2:"15.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint9_linear_1414_55682",x1:"19.5001",y1:"12.5",x2:"19.5001",y2:"15.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint10_linear_1414_55682",x1:"25.4994",y1:"12.5002",x2:"25.4994",y2:"15.5002",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint11_linear_1414_55682",x1:"31.5001",y1:"12.5",x2:"31.5001",y2:"15.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint12_linear_1414_55682",x1:"37.5002",y1:"12.5",x2:"37.5002",y2:"15.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint13_linear_1414_55682",x1:"37.5002",y1:"6.5",x2:"37.5002",y2:"9.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint14_linear_1414_55682",x1:"7.50049",y1:"18.5",x2:"7.50049",y2:"21.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint15_linear_1414_55682",x1:"1.5",y1:"18.5",x2:"1.5",y2:"21.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint16_linear_1414_55682",x1:"43.4999",y1:"18.5",x2:"43.4999",y2:"21.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint17_linear_1414_55682",x1:"13.5002",y1:"18.5",x2:"13.5002",y2:"21.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint18_linear_1414_55682",x1:"19.5001",y1:"18.5",x2:"19.5001",y2:"21.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint19_linear_1414_55682",x1:"25.4994",y1:"18.5",x2:"25.4994",y2:"21.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint20_linear_1414_55682",x1:"31.5001",y1:"18.5",x2:"31.5001",y2:"21.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint21_linear_1414_55682",x1:"37.5002",y1:"18.5",x2:"37.5002",y2:"21.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint22_linear_1414_55682",x1:"7.50049",y1:"24.5",x2:"7.50049",y2:"27.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint23_linear_1414_55682",x1:"1.5",y1:"24.5",x2:"1.5",y2:"27.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint24_linear_1414_55682",x1:"43.4999",y1:"24.5",x2:"43.4999",y2:"27.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint25_linear_1414_55682",x1:"13.5002",y1:"24.5",x2:"13.5002",y2:"27.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint26_linear_1414_55682",x1:"19.5001",y1:"24.5",x2:"19.5001",y2:"27.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint27_linear_1414_55682",x1:"25.4994",y1:"24.4998",x2:"25.4994",y2:"27.4998",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint28_linear_1414_55682",x1:"31.5001",y1:"24.5",x2:"31.5001",y2:"27.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint29_linear_1414_55682",x1:"37.5002",y1:"24.5",x2:"37.5002",y2:"27.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint30_linear_1414_55682",x1:"7.50049",y1:"30.5",x2:"7.50049",y2:"33.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint31_linear_1414_55682",x1:"7.50049",y1:"36.5",x2:"7.50049",y2:"39.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint32_linear_1414_55682",x1:"1.5",y1:"30.5",x2:"1.5",y2:"33.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint33_linear_1414_55682",x1:"43.4999",y1:"30.5",x2:"43.4999",y2:"33.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint34_linear_1414_55682",x1:"13.5002",y1:"30.5",x2:"13.5002",y2:"33.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint35_linear_1414_55682",x1:"19.5001",y1:"30.5",x2:"19.5001",y2:"33.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint36_linear_1414_55682",x1:"25.4994",y1:"30.5",x2:"25.4994",y2:"33.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint37_linear_1414_55682",x1:"31.5001",y1:"30.5",x2:"31.5001",y2:"33.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint38_linear_1414_55682",x1:"37.5002",y1:"30.5",x2:"37.5002",y2:"33.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint39_linear_1414_55682",x1:"37.5002",y1:"36.5",x2:"37.5002",y2:"39.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint40_linear_1414_55682",x1:"13.5002",y1:"36.5",x2:"13.5002",y2:"39.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint41_linear_1414_55682",x1:"19.5001",y1:"36.5",x2:"19.5001",y2:"39.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint42_linear_1414_55682",x1:"25.4994",y1:"36.5",x2:"25.4994",y2:"39.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint43_linear_1414_55682",x1:"31.5001",y1:"36.5",x2:"31.5001",y2:"39.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint44_linear_1414_55682",x1:"13.5002",y1:"42.5",x2:"13.5002",y2:"45.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint45_linear_1414_55682",x1:"19.5001",y1:"42.5",x2:"19.5001",y2:"45.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint46_linear_1414_55682",x1:"25.4994",y1:"42.5",x2:"25.4994",y2:"45.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint47_linear_1414_55682",x1:"31.5001",y1:"42.5",x2:"31.5001",y2:"45.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint48_linear_1414_55682",x1:"13.5002",y1:"0.5",x2:"13.5002",y2:"3.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint49_linear_1414_55682",x1:"19.5001",y1:"0.5",x2:"19.5001",y2:"3.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint50_linear_1414_55682",x1:"25.4994",y1:"0.5",x2:"25.4994",y2:"3.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),f.createElement("linearGradient",{id:"paint51_linear_1414_55682",x1:"31.5001",y1:"0.5",x2:"31.5001",y2:"3.5",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#252525"}),f.createElement("stop",{offset:"1",stopColor:"#A4A4A4"}))))}let zm="tonearm-svg--tonearmBottom--3JC--";function zp(e){let{onTonearmHeadMouseDown:t}=e;return f.createElement("svg",{width:"27",height:"80",viewBox:"0 0 27 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("path",{d:"M18.7042 8.19556C18.7042 8.19556 18.7042 34.7407 18.7042 47.6641C18.7042 60.5876 13.9589 64.9213 13.9589 64.9213",stroke:"black",strokeOpacity:"0.2",strokeWidth:"5.33844",strokeLinecap:"round"}),f.createElement("g",{filter:"url(#filter0_dii_242_919)"},f.createElement("path",{d:"M18.7042 8.19556C18.7042 8.19556 18.7042 34.7407 18.7042 47.6641C18.7042 60.5876 13.9589 64.9213 13.9589 64.9213",stroke:"white",strokeWidth:"4.15212",strokeLinecap:"round"})),f.createElement("g",{filter:"url(#filter1_d_242_919)"},f.createElement("rect",{x:"14",y:"2",width:"9.49057",height:"11.8632",fill:"url(#paint0_linear_242_919)"}),f.createElement("rect",{x:"14.2966",y:"2.29658",width:"8.89741",height:"11.27",stroke:"black",strokeOpacity:"0.2",strokeWidth:"0.59316"})),f.createElement("g",{filter:"url(#filter2_d_242_919)",onMouseDown:t,className:zm},f.createElement("g",{filter:"url(#filter3_iii_242_919)"},f.createElement("path",{d:"M9.30333 62.425C9.93167 61.6761 11.0481 61.5785 11.7969 62.2068L16.3554 66.0318C17.1042 66.6601 17.2019 67.7766 16.5735 68.5254L10.4596 75.8116C9.8313 76.5604 8.71489 76.6581 7.96606 76.0298L7.14087 75.3374L4.23279 72.8972L3.40761 72.2048C2.65878 71.5764 2.56111 70.46 3.18945 69.7112L9.30333 62.425Z",fill:"#E9E9E9"})),f.createElement("path",{d:"M16.546 65.8046L11.9876 61.9796C11.1132 61.246 9.80976 61.36 9.07614 62.2343L2.96225 69.5206C2.22863 70.3949 2.34267 71.6984 3.21697 72.432L4.04216 73.1244L6.95024 75.5646L7.77542 76.257C8.64972 76.9906 9.95321 76.8766 10.6868 76.0023L16.8007 68.716C17.5343 67.8417 17.4203 66.5382 16.546 65.8046Z",stroke:"black",strokeOpacity:"0.25",strokeWidth:"0.59316"})),f.createElement("defs",null,f.createElement("filter",{id:"filter0_dii_242_919",x:"9.51017",y:"3.74674",width:"13.6427",height:"65.6232",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",null),f.createElement("feGaussianBlur",{stdDeviation:"1.18632"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_242_919"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_242_919",result:"shape"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"1.18632"}),f.createElement("feGaussianBlur",{stdDeviation:"0.415212"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.709804 0 0 0 0 0.709804 0 0 0 0 0.709804 0 0 0 0.5 0"}),f.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_242_919"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"-1.18632"}),f.createElement("feGaussianBlur",{stdDeviation:"0.415212"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.708333 0 0 0 0 0.708333 0 0 0 0 0.708333 0 0 0 0.5 0"}),f.createElement("feBlend",{mode:"normal",in2:"effect2_innerShadow_242_919",result:"effect3_innerShadow_242_919"})),f.createElement("filter",{id:"filter1_d_242_919",x:"11.3451",y:"0.672526",width:"14.8005",height:"17.1732",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dy:"1.32747"}),f.createElement("feGaussianBlur",{stdDeviation:"1.32747"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_242_919"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_242_919",result:"shape"})),f.createElement("filter",{id:"filter2_d_242_919",x:"0.412163",y:"60.3145",width:"18.9386",height:"19.3776",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dy:"0.884983"}),f.createElement("feGaussianBlur",{stdDeviation:"0.884983"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_242_919"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_242_919",result:"shape"})),f.createElement("filter",{id:"filter3_iii_242_919",x:"1.29715",y:"60.3145",width:"16.8768",height:"17.3158",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dy:"2.37264"}),f.createElement("feGaussianBlur",{stdDeviation:"0.29658"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.86 0"}),f.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_242_919"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"1.77948",dy:"1.77948"}),f.createElement("feGaussianBlur",{stdDeviation:"0.29658"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.8 0"}),f.createElement("feBlend",{mode:"normal",in2:"effect1_innerShadow_242_919",result:"effect2_innerShadow_242_919"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"-0.884983",dy:"-0.884983"}),f.createElement("feGaussianBlur",{stdDeviation:"0.884983"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.17 0"}),f.createElement("feBlend",{mode:"normal",in2:"effect2_innerShadow_242_919",result:"effect3_innerShadow_242_919"})),f.createElement("linearGradient",{id:"paint0_linear_242_919",x1:"14",y1:"7.9316",x2:"23.4906",y2:"7.9316",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#CACACA"}),f.createElement("stop",{offset:"0.253125",stopColor:"#E2E2E2"}),f.createElement("stop",{offset:"0.384375",stopColor:"#F3F3F3"}),f.createElement("stop",{offset:"0.500704",stopColor:"white"}),f.createElement("stop",{offset:"0.625",stopColor:"#F3F3F3"}),f.createElement("stop",{offset:"0.753125",stopColor:"#E2E2E2"}),f.createElement("stop",{offset:"1",stopColor:"#CACACA"}))))}function zf(e){let{onTonearmHeadMouseDown:t}=e;return f.createElement("svg",{width:"24",height:"72",viewBox:"0 0 24 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("path",{d:"M16.8776 7.53516C16.8776 7.53516 16.8776 31.2514 16.8776 42.7976C16.8776 54.3438 12.6379 58.2157 12.6379 58.2157",stroke:"black",strokeOpacity:"0.2",strokeWidth:"4.76953",strokeLinecap:"round"}),f.createElement("g",{filter:"url(#filter0_dii_254_922)"},f.createElement("path",{d:"M16.8776 7.53516C16.8776 7.53516 16.8776 31.2514 16.8776 42.7976C16.8776 54.3438 12.6379 58.2157 12.6379 58.2157",stroke:"white",strokeWidth:"3.70964",strokeLinecap:"round"})),f.createElement("g",{filter:"url(#filter1_d_254_922)"},f.createElement("rect",{x:"12.675",y:"2",width:"8.47917",height:"10.599",fill:"url(#paint0_linear_254_922)"}),f.createElement("rect",{x:"12.94",y:"2.26497",width:"7.94922",height:"10.069",stroke:"black",strokeOpacity:"0.2",strokeWidth:"0.529948"})),f.createElement("g",{filter:"url(#filter2_d_254_922)",onMouseDown:t,className:zm},f.createElement("g",{filter:"url(#filter3_iii_254_922)"},f.createElement("path",{d:"M8.4789 55.9858C9.04027 55.3168 10.0377 55.2295 10.7067 55.7909L14.7794 59.2082C15.4484 59.7696 15.5357 60.7671 14.9743 61.4361L9.51198 67.9459C8.9506 68.6149 7.95316 68.7021 7.28414 68.1408L6.54689 67.5221L3.94872 65.342L3.21147 64.7234C2.54245 64.162 2.45518 63.1646 3.01656 62.4955L8.4789 55.9858Z",fill:"#E9E9E9"})),f.createElement("path",{d:"M14.9497 59.0053L10.8771 55.5879C10.0959 54.9325 8.93136 55.0343 8.27591 55.8155L2.81358 62.3252C2.15814 63.1064 2.26002 64.2709 3.04115 64.9264L3.7784 65.545L6.37657 67.7251L7.11382 68.3437C7.89494 68.9992 9.05952 68.8973 9.71496 68.1162L15.1773 61.6064C15.8327 60.8253 15.7309 59.6607 14.9497 59.0053Z",stroke:"black",strokeOpacity:"0.25",strokeWidth:"0.529948"})),f.createElement("defs",null,f.createElement("filter",{id:"filter0_dii_254_922",x:"8.66341",y:"3.56051",width:"12.1888",height:"58.6298",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",null),f.createElement("feGaussianBlur",{stdDeviation:"1.0599"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_254_922"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_254_922",result:"shape"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"1.0599"}),f.createElement("feGaussianBlur",{stdDeviation:"0.370964"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.709804 0 0 0 0 0.709804 0 0 0 0 0.709804 0 0 0 0.5 0"}),f.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_254_922"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"-1.0599"}),f.createElement("feGaussianBlur",{stdDeviation:"0.370964"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.708333 0 0 0 0 0.708333 0 0 0 0 0.708333 0 0 0 0.5 0"}),f.createElement("feBlend",{mode:"normal",in2:"effect2_innerShadow_254_922",result:"effect3_innerShadow_254_922"})),f.createElement("filter",{id:"filter1_d_254_922",x:"10.303",y:"0.813993",width:"13.2233",height:"15.343",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dy:"1.18601"}),f.createElement("feGaussianBlur",{stdDeviation:"1.18601"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_254_922"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_254_922",result:"shape"})),f.createElement("filter",{id:"filter2_d_254_922",x:"0.535357",y:"54.1002",width:"16.9203",height:"17.3126",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dy:"0.790671"}),f.createElement("feGaussianBlur",{stdDeviation:"0.790671"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_254_922"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_254_922",result:"shape"})),f.createElement("filter",{id:"filter3_iii_254_922",x:"1.32603",y:"54.1002",width:"15.0782",height:"15.4705",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dy:"2.11979"}),f.createElement("feGaussianBlur",{stdDeviation:"0.264974"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.86 0"}),f.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_254_922"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"1.58984",dy:"1.58984"}),f.createElement("feGaussianBlur",{stdDeviation:"0.264974"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.8 0"}),f.createElement("feBlend",{mode:"normal",in2:"effect1_innerShadow_254_922",result:"effect2_innerShadow_254_922"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dx:"-0.790671",dy:"-0.790671"}),f.createElement("feGaussianBlur",{stdDeviation:"0.790671"}),f.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.17 0"}),f.createElement("feBlend",{mode:"normal",in2:"effect2_innerShadow_254_922",result:"effect3_innerShadow_254_922"})),f.createElement("linearGradient",{id:"paint0_linear_254_922",x1:"12.675",y1:"7.29948",x2:"21.1542",y2:"7.29948",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#CACACA"}),f.createElement("stop",{offset:"0.253125",stopColor:"#E2E2E2"}),f.createElement("stop",{offset:"0.384375",stopColor:"#F3F3F3"}),f.createElement("stop",{offset:"0.500704",stopColor:"white"}),f.createElement("stop",{offset:"0.625",stopColor:"#F3F3F3"}),f.createElement("stop",{offset:"0.753125",stopColor:"#E2E2E2"}),f.createElement("stop",{offset:"1",stopColor:"#CACACA"}))))}function z_(e){let{onPause:t,onResume:n}=e,[a,l]=f.useState(null),r=f.useRef(0),i=f.useRef(0),o=(0,_.d4)(e=>{var t,n;return null==(n=null==(t=e.music)?void 0:t.music)?void 0:n.isPaused}),s=(0,ta.F4)(),c=(null==s?void 0:s.shouldOptimizeForIpadApp)||C.Ay.isIpad,d=f.useCallback(e=>{if(!1===o){let t=e.clientX;l(22-22*((0,rE.qE)(t-r.current,0,21)/21))}else{let t=e.clientX;l(22*((0,rE.qE)(r.current-t,0,21)/21))}},[o,22,21]),u=f.useCallback(e=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u);let a=!1===o;if(Date.now()-i.current<100)a?t():n();else if(a){let n=e.clientX;(0,rE.qE)(n-r.current,0,21)>10.5&&t()}else{let t=e.clientX;(0,rE.qE)(r.current-t,0,21)>10.5&&n()}r.current=0,l(null)},[d,o,t,n]),m=e=>{r.current=e.clientX,i.current=Date.now(),document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)},p=null!=a?a:!1===o?22:0;return f.createElement("div",{className:nb()({"tonearm--tonearmStandalone--UOmob":"timedjam"===e.tonearmType,"tonearm--tonearmPanel--KyeLs tonearm--tonearmStandalone--UOmob":"panel"===e.tonearmType}),style:{transform:`rotate(${p}deg)`,transition:null!=a?"transform 0.1s linear":"transform 0.3s ease-in-out"}},"panel"===e.tonearmType?f.createElement(zf,{onTonearmHeadMouseDown:c?void 0:m}):f.createElement(zp,{onTonearmHeadMouseDown:c?void 0:m}))}let zg="turntable--gray--OY0Du";var zh=n(258873);function zE(e){let{handlePause:t,handleTonearmResume:n,size:a="large",grayCoverArtWhenPaused:l,withoutBorder:r}=e;return f.createElement("div",{className:nb()("turntable--recordPlayerBase--WG5CH",{"turntable--recordBaseSmall--ZpHXz":"small"===a,"turntable--withoutBorder--28x4E":r})},f.createElement(zv,{handlePause:t,handleTonearmResume:n,size:e.size,grayCoverArtWhenPaused:l}),f.createElement("div",{className:"turntable--speakerGrill--DXQjl"},"small"===e.size?f.createElement(zd,null):f.createElement(zu,null)))}function zv(e){let{handlePause:t,handleTonearmResume:n,size:a,grayCoverArtWhenPaused:l}=e;return f.createElement("div",{className:nb()("turntable--recordPlayer--0aMTu",{"turntable--recordPlayerSmall--tE3FI":"small"===a})},f.createElement(zy,{size:a,grayCoverArtWhenPaused:l}),f.createElement(z_,{onPause:t,onResume:n,tonearmType:"small"===a?"panel":"timedjam"}))}function zy(e){let{size:t,maskAlbumArtWhenPaused:n,maskRef:a,useGrayMask:l,grayCoverArtWhenPaused:r,useLightShadow:i}=e,o=function(){let e=(0,_.d4)(e=>e.music.music),t=zt((null==e?void 0:e.selectedSongID)||""),n=zn(),a=t&&t.album_art;return!n||!a}()&&!!n;return f.createElement("div",{className:nb()("turntable--record--96NxV",{"turntable--xsmall--eqtGp":"xsmall"===t,"turntable--small--b8Qni":"small"===t,"turntable--large--oXtu6":"large"===t})},f.createElement(zc,{useLightShadow:i}),f.createElement(zb,{size:t,showMask:o,maskRef:a,useGrayMask:l,grayCoverArtWhenPaused:r}))}function zb(e){let t=(0,_.d4)(e=>e.music.music),n=zt((null==t?void 0:t.selectedSongID)||""),a=zn(),l=n&&n.album_art;return(0,eb.p8)("showUi")?f.createElement("div",{className:nb()("turntable--spinningAlbum--N7jwa",{"turntable--spinningAlbumXSmall--vzhVj":"xsmall"===e.size,"turntable--spinningAlbumSmall--d-AJf":"small"===e.size,"turntable--spinningAlbumLarge--SWUZ2":"large"===e.size})},l&&f.createElement("img",{className:nb()("turntable--spinningAlbumImage--H-qwO",{"turntable--spinningAlbumPlaying--UDk-I":(null==t?void 0:t.isPaused)===!1,[zg]:e.grayCoverArtWhenPaused&&!a}),src:n.album_art,alt:"spinning album art"}),f.createElement("div",{ref:e.maskRef,className:nb()("turntable--spinningAlbumImageMask--PZ7Cr turntable--spinningAlbumImage--H-qwO",{"turntable--noOpacity--ZKZnl":!e.showMask,[zg]:e.useGrayMask})},f.createElement(a2.B,{className:"turntable--maskIcon--mZo9b",svg:zh.A}))):null}var zC=n(151166);function zw(){let e=(0,tC.nF)(!0),t=!(0,zC.N)()&&e.enabled,n=(0,_.d4)(e=>e.userFlags.dismissed_figjam_music_volume_hint),a=(0,_.d4)(e=>{var t,n;return(null==(t=e.music.music)?void 0:t.selectedSongID)&&(null==(n=e.music.music)?void 0:n.selectedSongID)!==""}),l=(0,_.d4)(e=>{var t,n;return(null==(t=e.music.music)?void 0:t.isPaused)===!1&&(null==(n=e.music.music)?void 0:n.isStopped)===!1}),r=(0,_.wA)();return t||n||!l||!a?null:f.createElement("div",{className:nb()("volume_hint--hintContainer--A9gj2",nz.Dm),"data-testid":"volume-hint"},f.createElement("div",null,(0,eN.tx)("whiteboard.timer.music_volume_hint_prompt_cta_v2",{promptQuestion:f.createElement("span",{className:"volume_hint--bold--vS77N"},(0,eN.t)("whiteboard.timer.music_volume_hint_prompt_question"))})),f.createElement(tN.Jn,{className:"volume_hint--hintCloseButton--Rubtd",onClick:()=>{r(j.b({dismissed_figjam_music_volume_hint:!0}))}}))}let zT="buttons--secondaryButton--Y7X0E",zx="buttons--withHover--csWRq",zN="buttons--primaryButton--cOfBR",zS="buttons--flexGrow--Qu8-s";function zk(e){let{flexGrow:t,...n}=e,a=(0,ps.$3)();return(0,nS.R)()?f.createElement("div",{className:nb()(zT,{[zS]:e.flexGrow})},f.createElement(va.IK,{...n,variant:"secondary"},e.children)):f.createElement(a1.nR,{className:nb()(zT,{[zS]:e.flexGrow,[zx]:!a}),...n},e.children)}function zI(e){let{flexGrow:t,...n}=e,a=(0,ps.$3)();return(0,nS.R)()?f.createElement("div",{className:nb()(zN,{[zS]:e.flexGrow})},f.createElement(va.IK,{...n,variant:"primary"},e.children)):f.createElement(a1.$$,{className:nb()(zN,{[zS]:e.flexGrow,[zx]:!a}),...n},e.children)}function zA(e){let{titleText:t,bodyText:n,cancelButtonText:a,confirmButtonText:l,onCancel:r,onConfirm:i,onCancelDisabled:o,onConfirmDisabled:s,recordingKey:c}=e;return f.createElement("div",{className:"meeting_tool_cancel_view--cancelViewContainer--W8dpk"},f.createElement("div",{className:"meeting_tool_cancel_view--headerTitleV2--KRaEU text--fontPos14--OL9Hp text--_fontBase--QdLsd"},t),f.createElement("div",{className:"meeting_tool_cancel_view--descriptionSectionV2--fAYp- text--fontPos11--2LvXf text--_fontBase--QdLsd"},n),f.createElement("div",{className:a8.cx.flex.gap10.$},f.createElement(zk,{flexGrow:!0,onClick:r,disabled:o,recordingKey:n_.Pt(c,"cancel")},a),f.createElement(zI,{flexGrow:!0,onClick:i,disabled:s,recordingKey:n_.Pt(c,"confirm")},l)))}var zO=n(921211),zL=n(622405);function zP(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("rect",{width:"11",height:"11",x:"6.5",y:"6.5",stroke:"var(--color-icon)",rx:"1"}))}let zD="playback_control_button--mediaControlButton--Wp3H1",zR="playback_control_button--withHover--9DG-T";var zM=n(814239),zF=n(351731),zB=n(674321),zU=(e=>(e.PLAY="play",e.PAUSE="pause",e.STOP="stop",e))(zU||{});function zH(e){let t=(0,ps.$3)(),{buttonState:n,onClick:a,disabled:l,dataTooltip:r,dataOnboardingKey:i}=e;switch(n){case"play":return f.createElement("button",{className:nb()("playback_control_button--playButton--a1I8c playback_control_button--mediaControlButton--Wp3H1",{[zR]:!t}),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":r,"data-onboarding-key":i,disabled:l,onClick:a},f.createElement(ry.U,{svg:zF.A},f.createElement(zO.K,null)));case"pause":return f.createElement("button",{className:nb()(zD,{[zR]:!t}),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":r,"data-onboarding-key":i,disabled:l,onClick:a},f.createElement(ry.U,{svg:zM.A},f.createElement(zL.p,null)));case"stop":return f.createElement("button",{className:nb()(zD,{[zR]:!t}),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":r,disabled:l,onClick:a,"data-onboarding-key":i},f.createElement(ry.U,{svg:zB.A},f.createElement(zP,null)))}}function zG(){let[e,t]=f.useState(!1),n=(0,_.d4)(e=>e.music.music),a=(0,_.d4)(e=>e.music.playerInstance),l=(null==n?void 0:n.selectedSongID)||"",r=zt(l),i=null==r?void 0:r.start_at_ms,o=(0,_.d4)(e=>e.multiplayer.allUsers.length),[s,c]=f.useState(!1),d=(0,_.d4)(e=>e.music.activeSongs,ze.b2),u=zn(),m=(0,_.wA)();f.useEffect(()=>{d.length&&c(!1)},[d.length]);let p=(0,O.F)((0,_.d4)(e=>e)),g=f.useCallback(()=>{l&&(0,zl.xf)(p.current,l),m(pl.mF({musicStartTimeMs:i}))},[m,i,l,p]),h=f.useCallback(()=>{l&&(0,zl.fx)(p.current,l),m(pl.g_())},[m,l,p]),E=f.useCallback(()=>{g()},[g]),v=f.useCallback(()=>{let e=(null==a?void 0:a.lastPlayedTimestamp)?a.lastPlayedTimestamp:0;(0,ze.nz)(e,o)?t(!0):h()},[h,a,o]),y=f.useCallback(()=>g(),[g]);return e?f.createElement(zA,{titleText:(0,eN.t)("whiteboard.music.stop_music_confirmation_prompt"),bodyText:(0,eN.t)("whiteboard.music.stop_music_confirmation_subtext"),cancelButtonText:(0,eN.t)("whiteboard.music.stop_music_cancel_button"),confirmButtonText:(0,eN.t)("whiteboard.timer.stop_timer_confirmation_button"),onCancel:()=>t(!1),onConfirm:()=>{t(!1),h()}}):f.createElement(f.Fragment,null,f.createElement("div",{id:"musicModal",className:"music_view--musicView--XegVa","data-testid":"music-modal"},f.createElement(zE,{handlePause:h,handleTonearmResume:E,size:"large",grayCoverArtWhenPaused:!0,withoutBorder:!0}),f.createElement("div",{className:"music_view--controlContainer--GYIKD"},f.createElement("div",{className:"music_view--selectSongContainer--qoUiA"},f.createElement(zo,{selectedSong:r,activeSongs:d,isLoading:s,withBorder:!0,withHeavyFont:!0})),f.createElement(zH,{buttonState:u?zU.STOP:zU.PLAY,onClick:u?v:y,dataTooltip:u?(0,eN.t)("whiteboard.music.end_music_tooltip"):(0,eN.t)("whiteboard.music.play_music_tooltip")}))),f.createElement(zw,null))}var zV=n(68517),zK=n(247014),zW=n(951840);let zz=null,zj=null,zJ=null,zY=()=>(0,_.d4)(e=>e.music.playerInstance),zX=()=>1e3;function zq(){var e;let[t,n]=f.useState({}),a=(0,_.d4)(e=>e.timer);f.useEffect(()=>{var e;if(!a||!a.time||(null==(e=null==a?void 0:a.time)?void 0:e.isPaused))return;let t=setTimeout(()=>n({}),zX());return()=>{clearTimeout(t)}},[t,a,null==(e=a.time)?void 0:e.isPaused])}function zZ(){let e=(0,_.d4)(e=>e.timer),t=(0,_.d4)(e=>(0,eU.d1)(e)),n=(0,_.d4)(e=>t?(0,Cf.L8)(t,e.repos):null),a=Math.ceil((0,po.P$)(e.time)/1e3);a>0?(0,pl.rF)(t,n,a):(0,pl.rF)(t,n)}let zQ=()=>{zJ&&zJ.pause(),zz&&zz.pause(),zj&&zj.pause(),zz=new Audio(z2),zj=new Audio(z1),zJ=new Audio(z0)},z$=(e,t,n,a,l,r)=>{var i,o;if(!n.current||!e)return;let s=(0,po.P$)(n.current.time);if("add-minutes"===e.lastAction.type){if(zz&&zz.pause(),null==(i=r.current)||i.resetFades(),null==(o=r.current)||o.fadeIn({}),!n.current.time||0===n.current.time.totalTimeMs)return;let a=6e4*e.lastAction.minutes;n.current.time&&s+a<po.y0&&t(pl.VV({timer:n.current.time,deltaMs:a}))}"start-timer"===e.lastAction.type&&((0,A.DN)().set("last-timer-set-time",e.lastUsedTime),t(pl.Qv({totalTimeMs:1e3*e.lastUsedTime,musicStartTimeMs:n.current.musicStartTimeMs})),zJ&&a.current&&!l.current&&e.lastUsedTime>5&&(0,po.PF)(zJ,a.current)),"pause-timer"===e.lastAction.type&&t(pl._1(n.current.time)),"resume-timer"===e.lastAction.type&&t(pl.ne(n.current.time)),"stop-timer"===e.lastAction.type&&(zQ(),t(pl.Vk()))},z0="https://static.figma.com/uploads/304a1a341a619feb4af7d377c75dd325534e1734",z1="https://static.figma.com/uploads/f45e11344ee4f618173695e2405a9a988affc910",z2="https://static.figma.com/uploads/54a944bea3fce3ca45c91429993683685bec5782",z5=()=>{f.useEffect(()=>{null===zJ&&(zJ=new Audio(z0)),null===zj&&(zj=new Audio(z1)),null===zz&&(zz=new Audio(z2))},[])},z4=e=>{let t=(0,O.F)(e),n=(0,_.wA)(),a=(0,_.d4)(e=>e.timer),l=(0,O.F)(a),r=(0,O.F)((0,_.d4)(e=>e.timer.volume)),i=(0,O.F)((0,_.d4)(e=>e.timer.isMuted)),o=(0,O.F)(zY());f.useEffect(()=>{z$(e,n,l,r,i,o)},[t,n,i,o,l,e,r])},z3=()=>{let e=(0,_.wA)(),t=(0,O.F)((0,_.d4)(e=>e.timer.volume)),n=(0,O.F)((0,_.d4)(e=>e.timer.setBy)),a=(0,O.F)((0,ew.iZ)()),l=(0,O.F)((0,_.d4)(e=>e.timer.isMuted)),r=(0,O.F)(zY()),i=(0,_.d4)(e=>e.music.music);return{callbackToRunAtFiveSecondsLeft:f.useCallback((n,a)=>{n.current&&(null==zz?void 0:zz.paused)&&!l.current&&(r.current&&r.current.fadeOut({fadeOutLength:5e3,shouldStopWhenFadedOut:!0,targetVolumeMultiplier:0}),(0,po.PF)(zz,t.current)),a.current||e(pl.lu({state:"open",userInitiated:!1}))},[e,l,r,t]),callbackToRunWhenTimerFinishes:f.useCallback((n,a)=>{zz&&zz.pause(),n.current&&zj&&!l.current&&(0,po.PF)(zj,t.current),Tx.d1.timerChange("timerdone"),a.current||e(pl.lu({state:"open",userInitiated:!1}))},[e,l,t]),callbackToRunAfterAnimationFinishes:f.useCallback(t=>{var l,o;if(i&&e(pl.c$(i)),"visible"===document.visibilityState)e(pl.Vk()),t({type:"reset-state"}),n.current!==(null==(l=a.current)?void 0:l.name)&&e(pl.lu({state:"closed",userInitiated:!1}));else{let t=()=>{e(pl.lu({state:"open",userInitiated:!1})),window.removeEventListener("focus",t)};window.addEventListener("focus",t)}zQ(),null==(o=r.current)||o.resetFades()},[a,e,i,n,r])}},z6=e=>{let t=(0,_.wA)(),n=(0,_.d4)(e=>e.timer.time),a=(0,O.F)((0,_.d4)(e=>e.timer.audioEnabled)),l=(0,O.F)((0,_.d4)(e=>e.timer&&"open"===e.timer.modalState)),r=(0,O.F)((0,_.d4)(e=>e.timer.volume)),i=(0,O.F)(zY()),o=(0,_.d4)(e=>e.timer.isMuted),s=!n||n.isPaused,c=(0,_.d4)(e=>{var t;return null==(t=e.music.music)?void 0:t.isPaused}),{callbackToRunAtFiveSecondsLeft:d,callbackToRunWhenTimerFinishes:u,callbackToRunAfterAnimationFinishes:m}=z3();f.useEffect(()=>{var t,p,f;if(s){zz&&zz.pause(),!1===c&&(null==(t=i.current)||t.fadeIn({fadeInLength:1e3}));return}let _=(0,po.P$)(n);_<5e3&&a.current&&(null==zz?void 0:zz.paused)&&!o&&(0,po.PF)(zz,r.current),zz&&(zz.muted=o),_>5e3&&zz&&(zz.pause(),null==(p=i.current)||p.resetFades(),null==(f=i.current)||f.fadeIn({}));let g=[];return _>5e3&&g.push(window.setTimeout(()=>d(a,l),_-5e3)),g.push(window.setTimeout(()=>u(a,l),_)),g.push(window.setTimeout(()=>m(e),_+po.cu)),()=>{g.forEach(clearTimeout)}},[n,s,t,e,u,m,d,l,r,a,i,o,c])},z7=(e,t)=>{f.useEffect(()=>{e.length>0&&e.forEach(e=>{e&&(e.volume=t/100)})},[e,t])},z8=e=>{let t=(0,af.q5)(),n=(0,_.d4)(e=>e.multiplayer.allUsers.length),a=f.useRef(n);return a.current=n,f.useCallback(()=>{(0,y.kc)().workspace_activity_write&&t&&t.team&&t.team.workspaceId&&zW.i.recordActivity({activityUnitType:zK.qj.FILE_COLLABORATION,fileKey:t.key,collaborationType:zK.Uz.TIMER_STARTED,numPeopleInFile:a.current}),e({type:"start-timer"})},[e,t,a])};function z9(){let[e,t]=(0,S.fp)(zV.$),n=(0,_.d4)(e=>e.timer.volume),a=(0,O.F)((0,_.d4)(e=>e.timer.volume)),l=(0,O.F)((0,_.d4)(e=>e.timer.isMuted)),r=f.useRef(e.lastUsedTime),i=z8(t);return[e,f.useMemo(()=>({setMinutes:e=>t({type:"set-minutes",minutes:e}),setSeconds:e=>t({type:"set-seconds",seconds:e}),setTime:(e,n)=>t({type:"set-time",minutes:e,seconds:n}),addMinutes:e=>t({type:"add-minutes",minutes:e}),startTimer:i,stopTimer:()=>t({type:"stop-timer"}),pauseTimer:()=>t({type:"pause-timer"}),resumeTimer:()=>t({type:"resume-timer"}),playStartChime:()=>{zJ&&a.current&&!l.current&&r.current>5&&(0,po.PF)(zJ,n)}}),[a,l,n,t,i])]}let je="time_display--xsmall--RksCd",jt="time_display--medium--bxQbL",jn="time_display--large--nQrfq",ja="time_display--xlarge--HRGrX",jl="time_display--clockStyleWrapper--TN05b",jr="time_display--timeDiv--Y0hTB";var ji=(e=>(e.XSMALL="xsmall",e.MEDIUM="medium",e.LARGE="large",e.XLARGE="xlarge",e))(ji||{}),jo=(e=>(e.DEFAULT="DEFAULT",e.SECONDARY="SECONDARY",e.TERTIARY="TERTIARY",e))(jo||{});let js=({minutesRef:e,disabled:t})=>{f.useLayoutEffect(()=>{var n,a;t||(null==(n=e.current)||n.focus(),null==(a=e.current)||a.select())},[t,e])};function jc({timerActions:e,timerState:t,isStopped:n,withoutUnderline:a,withoutClockDisplay:l,isInUI3Toolbar:r,size:i="medium"}){let o=function(e,t){let{setMinutes:n,setSeconds:a,startTimer:l,setTime:r,addMinutes:i}=e,o=f.useRef(null),s=f.useRef(null),c=(0,_.wA)(),d=f.useCallback(e=>{var t;if(!e.currentTarget.value.match(/^[0-9]?[0-9]?$/)){e.preventDefault();return}n(e.currentTarget.value),e.currentTarget.value.length>1&&(null==(t=s.current)||t.select())},[s,n]),u=f.useCallback(e=>{var t;if("ArrowUp"===e.key||"ArrowDown"===e.key){if(isNaN(parseInt(e.currentTarget.value)))return;i(("ArrowUp"===e.key?1:-1)*(e.shiftKey?5:1)),setTimeout(()=>{var e;return null==(e=o.current)?void 0:e.select()},0),e.preventDefault()}else if("ArrowRight"===e.key&&o.current){if(o.current.selectionStart===o.current.value.length&&s.current){s.current.select(),e.preventDefault();return}}else if("Enter"===e.key)l();else if("Escape"===e.key){c(pl.lu({state:"closed",userInitiated:!0,source:"keyboard"}));return}else if(":"===e.key){null==(t=s.current)||t.select(),e.preventDefault();return}else(0,Aw.jr)(e)},[i,c,l]),m=f.useCallback(()=>{if(!o.current)return;let e=o.current.value;0===e.length?n("00"):e.length<2?n(`0${e}`):n(e)},[o,n]),p=f.useCallback(()=>{var e;null==(e=o.current)||e.select()},[o]),g=f.useCallback(e=>{if(!e.currentTarget.value.match(/^[0-9]?[0-9]?$/)){e.preventDefault();return}let n=parseInt(e.currentTarget.value);n>59&&"99"!==t.minutes?(n-=60,r((0,po.YI)(parseInt(t.minutes)+1),(0,po.YI)(n))):n>59?a((0,po.YI)(59)):(n<60||isNaN(n))&&a(e.currentTarget.value)},[a,r,t.minutes]);return{handleMinutesChange:d,handleMinutesKeyDown:u,handleMinutesBlur:m,handleMinutesFocus:p,handleSecondsChange:g,handleSecondsKeyDown:f.useCallback(e=>{var i,d;let u;if("ArrowLeft"===e.key&&s.current){if(0===s.current.selectionEnd&&o.current){o.current.select(),e.preventDefault();return}}else if("Enter"===e.key){""!==t.minutes&&""!==t.seconds&&parseInt(t.minutes)+parseInt(t.seconds)!==0&&l();return}else if("Escape"===e.key){c(pl.lu({state:"closed",userInitiated:!0,source:"keyboard"}));return}else if((null==(i=s.current)?void 0:i.value)===""&&"Backspace"===e.key&&(null==(d=o.current)?void 0:d.value)){n(o.current.value.substring(0,o.current.value.length-1)||"0"),o.current.focus(),e.preventDefault();return}if((0,Aw.jr)(e)||"ArrowUp"!==e.key&&"ArrowDown"!==e.key)return;let m=parseInt(t.seconds);if(!isNaN(m)){if("ArrowUp"===e.key){if((m+=e.shiftKey?5:1)>59&&"99"===t.minutes)return;m>=60&&(m-=60,u=1)}else if("ArrowDown"===e.key&&(m-=e.shiftKey?5:1)<0){if(0===parseInt(t.minutes))return;u=-1,m+=60}setTimeout(()=>{var e;return null==(e=s.current)?void 0:e.select()},0),e.preventDefault(),u?r((0,po.YI)(parseInt(t.minutes)+u),(0,po.YI)(m)):a((0,po.YI)(m))}},[c,o,s,n,a,r,l,t.minutes,t.seconds]),handleSecondsBlur:f.useCallback(()=>{a((0,po.YI)(parseInt(t.seconds||"00")))},[a,t.seconds]),handleSecondsFocus:f.useCallback(()=>{var e;null==(e=s.current)||e.select()},[s]),secondsRef:s,minutesRef:o}}(e,t);return js({minutesRef:o.minutesRef,disabled:C.Ay.isMeetDevice}),f.createElement(f.Fragment,null,n?f.createElement(jm,{timerState:t,timerEventHandlers:o,withoutUnderline:a,withoutClockDisplay:l,size:i}):f.createElement(jd,{withoutUnderline:a,withoutClockDisplay:l,size:i,isInUI3Toolbar:r}))}function jd(e){let{withoutUnderline:t,withoutClockDisplay:n,withoutTimeShadow:a,withoutFlashOnPause:l,size:r,isSelected:i,prominence:o,timeDivRef:s,isInUI3Toolbar:c}=e,d=(0,S.md)(zV.jo),u=(0,S.md)(zV.Ld);return f.createElement(ju,{timeInSeconds:u,withoutUnderline:t,withoutClockDisplay:n,withoutTimeShadow:a,flashing:(0,po.CM)(d.time)&&!l,size:r,isSelected:i,prominence:o,timeDivRef:s,isInUI3Toolbar:c})}function ju(e){let{timeInSeconds:t,withoutUnderline:n,withoutClockDisplay:a,withoutTimeShadow:l,flashing:r,size:i,isSelected:o,prominence:s,timeDivRef:c,isInUI3Toolbar:d}=e,{seconds:u,minutes:m}=(0,nX._d)(t);return f.createElement("div",{className:nb()({[jl]:!a})},f.createElement("div",{ref:c,className:nb()(jr,{[je]:"xsmall"===i,[jt]:"medium"===i,[jn]:"large"===i,[ja]:"xlarge"===i,"time_display--selected--Idl4y":o,"time_display--secondary--r44Yf":"SECONDARY"===s,"time_display--tertiary--oyx7n":"TERTIARY"===s,"time_display--inUI3Toolbar--SFjvm":d})},!a&&!l&&f.createElement(jp,{size:i,withoutUnderline:n}),f.createElement("div",{className:nb()("time_display--timeDisplay--MuaRS",{"time_display--flashing--1Hw1m":r,[je]:"xsmall"===i,[jt]:"medium"===i,[jn]:"large"===i,[ja]:"xlarge"===i})},f.createElement(jf,{isMinute:!0,size:i,value:(0,po.YI)(m),displayOnly:!0}),":",f.createElement(jf,{size:i,value:(0,po.YI)(u),displayOnly:!0}))))}function jm({timerState:e,timerEventHandlers:t,withoutUnderline:n,withoutClockDisplay:a,size:l}){let{handleMinutesChange:r,handleMinutesKeyDown:i,handleMinutesBlur:o,handleMinutesFocus:s,handleSecondsChange:c,handleSecondsKeyDown:d,handleSecondsBlur:u,handleSecondsFocus:m,secondsRef:p,minutesRef:_}=t;return f.createElement(f.Fragment,null,f.createElement("div",{className:nb()({[jl]:!a})},f.createElement("div",{className:nb()(jr,{[jt]:"medium"===l,[jn]:"large"===l,[ja]:"xlarge"===l})},f.createElement(jp,{size:l,withoutUnderline:n}),f.createElement("div",null,f.createElement(jf,{ref:_,onFocus:s,onChange:r,onKeyDown:i,onBlur:o,value:e.minutes,size:l,isMinute:!0}),":",f.createElement(jf,{ref:p,onChange:c,onFocus:m,onKeyDown:d,onBlur:u,value:e.seconds,size:l})))))}function jp(e){return f.createElement("div",{className:nb()("time_display--timeShadow--dyosl",{[je]:"xsmall"===e.size,[jt]:"medium"===e.size,[jn]:"large"===e.size,[ja]:"xlarge"===e.size})},f.createElement(jf,{isMinute:!0,size:e.size,value:88,displayOnly:!0}),":",f.createElement(jf,{size:e.size,value:88,displayOnly:!0}),!e.withoutUnderline&&f.createElement("div",{className:"time_display--timeInputUnderline--4Gxkr"}))}let jf=f.forwardRef((e,t)=>{let{size:n,isMinute:a,onFocus:l,onChange:r,onKeyDown:i,onBlur:o,value:s,displayOnly:c}=e,d=nb()("time_display--timeInput--4Evh3",{"time_display--minute--Q8e3H":a,[je]:"xsmall"===n,[jt]:"medium"===n,[jn]:"large"===n,[ja]:"xlarge"===n});return c?f.createElement("span",{className:d,"data-testid":"stopped-time"},s):f.createElement("input",{maxLength:2,type:"text",inputMode:"numeric",ref:t,onFocus:l,onChange:r,onKeyDown:i,onBlur:o,className:d,value:s,"aria-label":a?(0,eN.t)("whiteboard.timer.minutes.aria_label"):(0,eN.t)("whiteboard.timer.seconds.aria_label")})});jf.displayName="TwoDigitTimeInput";var j_=n(890297);function jg(){zq(),zZ();let[e,t]=z9(),{startTimer:n,stopTimer:a,addMinutes:l,pauseTimer:r,resumeTimer:i}=t,o=(0,S.md)(zV.jo),s=(0,_.d4)(e=>e.multiplayer.allUsers.length),[c,d]=f.useState(!1),u=o.time,m=(0,po.RE)(e),p=(0,po.G8)(u),g=(0,po.CM)(u),h=(0,po.IQ)(u),E=(0,po.$V)(u,e)&&!h;f.useEffect(()=>{h&&d(!1)},[h]);let v=f.useCallback(()=>{r()},[r]),y=f.useCallback(()=>{n()},[n]),b=f.useCallback(()=>{i()},[i]),C=f.useCallback(()=>{a()},[a]);if(c&&!h)return f.createElement(zA,{titleText:(0,eN.t)("whiteboard.timer.end_timer_confirmation_new"),bodyText:(0,eN.t)("whiteboard.timer.end_timer_confirmation_subtext_new"),cancelButtonText:(0,eN.t)("whiteboard.timer.end_timer_go_back_new"),confirmButtonText:(0,eN.t)("whiteboard.timer.end_timer_button_new"),onCancel:()=>d(!1),onConfirm:()=>{d(!1),C()}});let w=p?(0,eN.t)("whiteboard.timer.start_timer_tooltip"):(null==u?void 0:u.isPaused)?(0,eN.t)("whiteboard.timer.resume_timer_tooltip"):(0,eN.t)("whiteboard.timer.pause_timer_tooltip"),T=p&&m<=0,x=(null==u?void 0:u.isPaused)||p;return f.createElement("div",{className:"timer_view--timerContainer--kRcU1","data-testid":"timer-modal"},f.createElement("div",{className:a8.cx.flex.flexColumn.p16.gap12.$},f.createElement("div",{className:"timer_view--timerBackground--NUQ4g"},f.createElement(jc,{timerActions:t,timerState:e,isStopped:p,size:ji.XLARGE,withoutUnderline:!0,isInUI3Toolbar:!1})),f.createElement("div",{className:a8.cx.flex.justifyBetween.itemsCenter.$},f.createElement(zk,{onClick:e=>{l(po.AC),e.preventDefault()},disabled:!E},f.createElement("div",{className:"timer_view--addTimeButton--tKy9r"},f.createElement(ry.U,{className:nb()("timer_view--plusIcon--NOOSc",{"timer_view--disabled--iHZ7I":!E}),svg:j_.A},f.createElement(Fv.x,null)),(0,eN.tx)("whiteboard.timer.min",{timeIncrement:po.AC}))),f.createElement("div",{className:a8.cx.flex.gap12.$},!p&&f.createElement(zH,{buttonState:zU.STOP,onClick:()=>{u&&((0,po.fQ)(u,s)?d(!0):C())},dataTooltip:(0,eN.t)("whiteboard.timer.end_timer_tooltip"),disabled:p||h}),f.createElement(zH,{buttonState:x?zU.PLAY:zU.PAUSE,onClick:x?()=>{g?b():y()}:v,dataTooltip:w,disabled:x?T:h,dataOnboardingKey:po.Hm})))))}function jh({onCancel:e}){let t=(0,Fq.C3)(),n=(0,_.wA)(),a=(0,af.tS)(),l=(0,mV.oh)(FX.wQ(a||"")),r=f.useCallback(()=>{n(FX.PK({uiSurface:"MeetingsPanel"})),(0,Z.sx)("confirm_end_voting_session",{source:"voting_modal",votingSessionId:null==t?void 0:t.id,fileKey:a})},[n,t,a]),i=f.useCallback(()=>{e(),(0,Z.sx)("cancel_end_voting_session",{source:"voting_modal",votingSessionId:null==t?void 0:t.id,fileKey:a})},[e,t,a]);return f.createElement(zA,{titleText:(0,eN.t)("voting.modal.end_voting_session_modal_header"),bodyText:(0,eN.t)("voting.modal.end_voting_session_modal_description"),cancelButtonText:(0,eN.t)("meetings_panel.voting.go_back"),confirmButtonText:(0,eN.t)("voting.modal.end_voting_session_modal_confirm_button"),onCancel:i,onConfirm:r,onCancelDisabled:l||!t,onConfirmDisabled:l||!t,recordingKey:"endVotingModal"})}var jE=n(266023);let jv="face_pile--facePileAvatarPositioner--pWI9a",jy="face_pile--active--5AAUF";var jb=n(95779);function jC({userId:e,isActive:t}){let{user:n,loading:a}=(0,KT.wW)(e),l=(0,nS.R)();return f.createElement(jE.v,{userId:e,size:l?16:24,user:n,loading:a,defaultClassName:nb()("face_pile--facePileAvatar--pZDZe",t&&jy),loadingClassName:nb()("face_pile--facePileAvatarLoading--uhhTa face_pile--facePileAvatar--pZDZe",t&&jy)})}function jw({overflowUserIds:e,isActive:t}){return f.createElement(f.Fragment,null,f.createElement("div",{className:jv},f.createElement("div",{className:nb()({"face_pile--facePileOverflowIcon--qL11N":!0,[jy]:t})},f.createElement(a2.B,{className:"face_pile--overflowIcon--q-7wp",svg:jb.A}))))}function jT({userIds:e,maxHeadsBeforeOverflow:t,isActive:n}){let a=e.length>t,l=a?e.slice(0,t-1):e,r=a?e.slice(t-1):[];return f.createElement("div",{className:"face_pile--facePileContainer--DzqrO"},r.length?f.createElement(jw,{overflowUserIds:r,isActive:n}):null,[...l].reverse().map(e=>f.createElement("div",{className:jv,key:e},f.createElement(jC,{userId:e,isActive:n}))))}function jx({userId:e}){let{user:t,loading:n}=(0,KT.wW)(e);return f.createElement(f.Fragment,null,f.createElement(jE.v,{userId:e,user:t,loading:n,size:24,loadingClassName:"voting_user_overflow_dropdown--loadingAvatar---1jYn"}),f.createElement(jE.m,{userId:e,user:t,loading:n,defaultClassName:"voting_user_overflow_dropdown--userName--huz8P text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L ellipsis--ellipsis--Tjyfa",loadingClassName:"voting_user_overflow_dropdown--loadingUserName--pC-X-"}))}let jN=e=>{let{windowInnerHeight:t}=(0,GI.l)(),n=(0,tt.Yk)();return t-(e.y+e.height)-n-22};function jS({userIds:e,targetRect:t}){let n=jN(t),a=(0,nS.R)(),l=0===e.length;return f.createElement(nN.Cf,{className:"voting_user_overflow_dropdown--pointingDropdown--equm6",targetRect:t,lean:"center",disableDropdownScrollContainer:!0,propagateCloseClick:!0},f.createElement(i6.P,{maxHeight:n,width:a?192:240},f.createElement("ol",{className:"voting_user_overflow_dropdown--dropdownPadding---VKEq"},l?f.createElement("div",{className:"voting_user_overflow_dropdown--noVotesText--T2dVF text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L"},(0,eN.tx)("voting.modal.during_voting_no_votes_dropdown")):e.map(e=>f.createElement("li",{key:e,className:"voting_user_overflow_dropdown--listItem--d7eTA"},f.createElement(jx,{userId:e}))))))}var jk=n(522322);let jI="users_voted--rootSelected--y6VPJ";function jA({votingSessionInfo:e}){return(0,f.useMemo)(()=>e.votedNodes.reduce((e,t)=>(Object.entries(t.userIdToNodeVotes).forEach(([t,n])=>{e[t]=(e[t]||0)+n.length}),e),{}),[e.votedNodes])}let jO=e=>{let t=(0,_.wA)();return{isDropdownOpen:(0,_.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===jP}),handleTargetClick:()=>{t(iH.gR({type:jP}))}}};function jL({votingSessionInfo:e,userVoteLimit:t}){let[n,a]=(0,f.useState)(null),[l,r]=(0,f.useState)(!1),i=(0,ew.TA)(),o=jA({votingSessionInfo:e}),s=(0,nS.R)(),c=(0,f.useMemo)(()=>Object.entries(o).filter(([e,n])=>n&&n>=t).map(([e])=>e).sort((0,jk.zi)(i)),[o,t,i]),{isDropdownOpen:d,handleTargetClick:u}=jO(c);return f.createElement(f.Fragment,null,f.createElement("button",{className:nb()({"users_voted--duringSessionRoot--XC-59 users_voted--rootBase--KRjQs text--fontPos12--YsUAh text--_fontBase--QdLsd":!0,[jI]:d}),onMouseDown:e=>e.stopPropagation(),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:u,ref:e=>a(e)},s&&f.createElement(jT,{userIds:c,maxHeadsBeforeOverflow:4,isActive:l||d}),f.createElement("p",{className:"users_voted--duringSessionText--glncG"},c.length>0?(0,eN.tx)("voting.modal.voted",{numVotes:c.length}):(0,eN.tx)("voting.modal.during_voting_no_ones_voted")),!s&&f.createElement(jT,{userIds:c,maxHeadsBeforeOverflow:4,isActive:l||d}),f.createElement(a2.B,{className:nb()({"users_voted--chevronDown--LWnXw":!0,"users_voted--chevronDownActive---IB9j":d}),svg:op.A})),d&&n&&f.createElement(jS,{targetRect:n.getBoundingClientRect(),userIds:c}))}let jP="USERS_VOTED_DROPDOWN";function jD({votingSessionInfo:e}){let[t,n]=(0,f.useState)(null),a=(0,ew.TA)(),l=jA({votingSessionInfo:e}),r=(0,f.useMemo)(()=>Object.keys(l).sort((0,jk.zi)(a)),[l,a]),{isDropdownOpen:i,handleTargetClick:o}=jO(r);return f.createElement(f.Fragment,null,f.createElement("button",{className:nb()({"users_voted--resultsDetailRoot--K2wEg users_voted--rootBase--KRjQs text--fontPos12--YsUAh text--_fontBase--QdLsd":!0,[jI]:i}),onMouseDown:e=>e.stopPropagation(),onClick:o,ref:e=>n(e)},f.createElement("p",null,r.length>0?(0,eN.tx)("voting.modal.voted",{numVotes:r.length}):(0,eN.tx)("voting.modal.after_voting_no_one_voted"))),i&&t&&f.createElement(jS,{targetRect:t.getBoundingClientRect(),userIds:r}))}function jR({title:e,useSmallerText:t}){let[n,a]=(0,f.useState)(!1),l=(0,f.useRef)(null);return(0,f.useEffect)(()=>{let e=l.current;e?a(e.scrollHeight>e.clientHeight):a(!1)},[e,l]),f.createElement("div",{ref:l,className:nb()("voting_components--votingSessionTitle--KDhQJ text--fontPos14--OL9Hp text--_fontBase--QdLsd ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k",{"voting_components--smallerText--rtDFU text--fontPos11--2LvXf text--_fontBase--QdLsd":t}),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":n?e:void 0},e)}function jM({votingSessionInfo:e,onEndClick:t,recordingKey:n}){let a=(0,Fq.C3)(),l=(0,_.d4)(e=>!e.user),r=(0,af.tS)(),i=(0,nS.R)();return a?f.createElement("div",{className:"joined_vote_view--joinedVoteViewContainer--2w8-v"},f.createElement("div",{className:"joined_vote_view--votingSessionTitleContainer--Yj49f"},f.createElement(jR,{title:(0,jk.DG)(a),useSmallerText:i})),f.createElement("div",{className:"joined_vote_view--usersVotedContainer--nEFTt"},f.createElement(jL,{votingSessionInfo:e,userVoteLimit:a.userVoteLimit})),!C.Ay.isMeetDevice&&f.createElement("div",{className:a8.cx.flex.$},f.createElement(zk,{flexGrow:!0,onClick:()=>{t(),(0,Z.sx)("click_end_voting_session",{source:"voting_modal",votingSessionId:a.id,fileKey:r})},disabled:l,"data-tooltip-type":l?nx.Ib.TEXT:void 0,"data-tooltip":l?(0,eN.t)("voting.modal.end_disabled_logged_out_tooltip"):void 0,recordingKey:n_.Pt(n,"endVotingSession")},f.createElement("span",null,(0,eN.tx)("voting.modal.end_for_all"))))):null}function jF({votingSessionInfo:e,recordingKey:t}){let[n,a]=f.useState(!1),l=f.useCallback(()=>{a(!1)},[a]),r=f.useCallback(()=>{a(!0)},[a]);return f.createElement(f.Fragment,null,n?f.createElement(jh,{onCancel:l}):f.createElement(jM,{votingSessionInfo:e,onEndClick:r,recordingKey:t}))}function jB(){return f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"142",height:"115",viewBox:"0 0 142 115",fill:"none"},f.createElement("g",{filter:"url(#filter0_d_536_1194)"},f.createElement("mask",{id:"mask0_536_1194",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"9",y:"7",width:"112",height:"121"},f.createElement("path",{d:"M30.3749 27.8343C32.0497 25.2359 34.6296 23.3518 37.6144 22.5472L95.2853 7.00006L120.973 102.285L25.6874 127.973L9.4772 67.8424C8.5589 64.4361 9.1256 60.8001 11.037 57.8348L30.3749 27.8343Z",fill:"white"})),f.createElement("g",{mask:"url(#mask0_536_1194)"},f.createElement("path",{d:"M95.2854 7.00012L120.973 102.285L25.6875 127.973L0 32.6875L95.2854 7.00012Z",fill:"#FFD966"}),f.createElement("g",{filter:"url(#filter1_f_536_1194)"},f.createElement("rect",{x:"-9.06198",y:"72.871",width:"80.2756",height:"13.9108",transform:"rotate(-57 -9.06198 72.871)",fill:"black",fillOpacity:"0.3"})),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.7476 28.8039L10.2326 59.1223C15.1411 51.4964 30.0572 48.6566 30.0572 48.6566C30.0572 48.6566 25.2827 35.7405 29.7476 28.8039Z",fill:"#FFD966"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.7476 28.8039L10.2326 59.1223C15.1411 51.4964 30.0572 48.6566 30.0572 48.6566C30.0572 48.6566 25.2827 35.7405 29.7476 28.8039Z",fill:"url(#paint0_linear_536_1194)"}))),f.createElement("defs",null,f.createElement("filter",{id:"filter0_d_536_1194",x:"-20.5598",y:"-13.5598",width:"162.092",height:"162.092",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",null),f.createElement("feGaussianBlur",{stdDeviation:"10.2799"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_536_1194"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_536_1194",result:"shape"})),f.createElement("filter",{id:"filter1_f_536_1194",x:"-35.6799",y:"-21.0717",width:"108.624",height:"128.137",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),f.createElement("feGaussianBlur",{stdDeviation:"13.3089",result:"effect1_foregroundBlur_536_1194"})),f.createElement("linearGradient",{id:"paint0_linear_536_1194",x1:"20.32",y1:"42.4426",x2:"29.6252",y2:"49.517",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0.5"}),f.createElement("stop",{offset:"0.319642",stopColor:"white",stopOpacity:"0.2"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.2"}))))}function jU(){return f.createElement("svg",{width:"52",height:"52",viewBox:"0 0 52 52",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{filter:"url(#filter0_d_1904_66844)"},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.6975 43.3947V28.2216C17.2146 28.9246 15.5806 29.3745 13.8194 29.4818L9.75977 29.729L9.75977 13.542L13.3208 13.2938C16.2911 13.0869 18.6537 11.8389 19.8608 8.79489L20.819 6.37863H34.6307V43.3947H18.6975ZM18.6975 23.7911C20.2723 22.6622 21.5839 21.1021 22.5245 19.3196V39.5677H30.8037V10.2056H23.4183C21.5367 14.9506 17.6323 16.8297 13.5868 17.1116V25.6618C14.9507 25.5788 16.2382 25.1962 17.4138 24.5825C17.8583 24.3505 18.2869 24.0855 18.6975 23.7911Z",fill:"white"}),f.createElement("path",{d:"M22.5245 39.5677H30.8037V10.2057H23.4183C21.5367 14.9506 17.6323 16.8297 13.5868 17.1116V25.6618C17.4441 25.427 20.6899 22.7961 22.5245 19.3196V39.5677Z",fill:"#9747FF"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.64916 24.2332H9.86288L17 28L20.5 28.0597V39.5527H19.1422V43.3803H7.64916V39.5527L3.82166 39.5527L3.82166 28.0597L7.64916 28.0597V24.2332ZM11.4822 35.7197H7.65466V31.8927L11.4822 31.8927V28.0662H15.3092L15.3092 31.8867M15.3092 31.8927H19.1357ZM15.3092 35.7197H15.3152ZM19.1357 35.7197V31.8927ZM15.3092 35.7257V39.5473ZM11.4822 39.5473H15.3092ZM11.4822 35.7197V39.5473ZM15.3152 35.7197L19.1357 35.7197Z",fill:"white"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.3092 28.0662H11.4822V31.8927L7.65466 31.8927V35.7197L11.4822 35.7197V39.5473H15.3092V35.7197L19.1357 35.7197V31.8927L15.3092 31.8927V28.0662Z",fill:"#9747FF"}),f.createElement("path",{d:"M38.9984 23.4121C39.1678 22.8781 39.9234 22.8781 40.0928 23.4121L41.5337 27.9551C41.584 28.1137 41.7006 28.2427 41.8533 28.3086L45.9788 30.0896C46.4408 30.289 46.4408 30.9442 45.9788 31.1437L41.8533 32.9246C41.7006 32.9906 41.584 33.1195 41.5337 33.2781L40.0928 37.8211C39.9234 38.3551 39.1678 38.3551 38.9984 37.8211L37.5575 33.2781C37.5072 33.1195 37.3906 32.9906 37.2378 32.9246L33.1124 31.1437C32.6503 30.9442 32.6503 30.289 33.1124 30.0896L37.2378 28.3086C37.3906 28.2427 37.5072 28.1137 37.5575 27.9551L38.9984 23.4121Z",fill:"#EFBA00"}),f.createElement("path",{d:"M38.9984 23.4121C39.1678 22.8781 39.9234 22.8781 40.0928 23.4121L41.5337 27.9551C41.584 28.1137 41.7006 28.2427 41.8533 28.3086L45.9788 30.0896C46.4408 30.289 46.4408 30.9442 45.9788 31.1437L41.8533 32.9246C41.7006 32.9906 41.584 33.1195 41.5337 33.2781L40.0928 37.8211C39.9234 38.3551 39.1678 38.3551 38.9984 37.8211L37.5575 33.2781C37.5072 33.1195 37.3906 32.9906 37.2378 32.9246L33.1124 31.1437C32.6503 30.9442 32.6503 30.289 33.1124 30.0896L37.2378 28.3086C37.3906 28.2427 37.5072 28.1137 37.5575 27.9551L38.9984 23.4121Z",fill:"url(#paint0_linear_1904_66844)"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37.3739 28.313C37.4969 28.2595 37.5912 28.1537 37.6324 28.023L39.0624 23.4807C39.1998 23.0443 39.8002 23.0443 39.9376 23.4807L41.3676 28.023C41.4088 28.1537 41.5031 28.2595 41.6261 28.313L45.6529 30.0643C46.0273 30.2272 46.0273 30.7728 45.6529 30.9357L41.6261 32.687C41.5031 32.7405 41.4088 32.8463 41.3676 32.977L39.9376 37.5193C39.8002 37.9557 39.1998 37.9557 39.0624 37.5193L37.6324 32.977C37.5912 32.8463 37.4969 32.7405 37.3739 32.687L33.3471 30.9357C32.9727 30.7728 32.9727 30.2272 33.3471 30.0643L37.3739 28.313ZM42.8548 22.5094L43.9178 25.8859L46.8472 27.1599C49.7176 28.4083 49.7176 32.5917 46.8472 33.8401L43.9178 35.1141L42.8548 38.4906C41.8014 41.8365 37.1986 41.8364 36.1452 38.4906L35.0822 35.1141L32.1528 33.8401C32.1009 33.8175 32.05 33.794 32 33.7696L32 27.2304C32.05 27.206 32.1009 27.1825 32.1528 27.1599L35.0822 25.8859L36.1452 22.5094C37.1986 19.1635 41.8014 19.1636 42.8548 22.5094Z",fill:"white"}),f.createElement("path",{d:"M38.9985 23.4116C39.1678 22.8776 39.9235 22.8776 40.0929 23.4116L41.5338 27.9546C41.5841 28.1132 41.7007 28.2422 41.8534 28.3081L45.9789 30.0891C46.4409 30.2886 46.4409 30.9437 45.9789 31.1432L41.8534 32.9241C41.7007 32.9901 41.5841 33.1191 41.5338 33.2776L40.0929 37.8206C39.9235 38.3546 39.1678 38.3546 38.9985 37.8206L37.5576 33.2776C37.5073 33.1191 37.3906 32.9901 37.2379 32.9241L33.1125 31.1432C32.6504 30.9437 32.6504 30.2886 33.1125 30.0891L37.2379 28.3081C37.3906 28.2422 37.5073 28.1132 37.5576 27.9546L38.9985 23.4116Z",fill:"url(#paint1_linear_1904_66844)"}),f.createElement("path",{d:"M38.9985 23.4116C39.1678 22.8776 39.9235 22.8776 40.0929 23.4116L41.5338 27.9546C41.5841 28.1132 41.7007 28.2422 41.8534 28.3081L45.9789 30.0891C46.4409 30.2886 46.4409 30.9437 45.9789 31.1432L41.8534 32.9241C41.7007 32.9901 41.5841 33.1191 41.5338 33.2776L40.0929 37.8206C39.9235 38.3546 39.1678 38.3546 38.9985 37.8206L37.5576 33.2776C37.5073 33.1191 37.3906 32.9901 37.2379 32.9241L33.1125 31.1432C32.6504 30.9437 32.6504 30.2886 33.1125 30.0891L37.2379 28.3081C37.3906 28.2422 37.5073 28.1132 37.5576 27.9546L38.9985 23.4116Z",fill:"url(#paint2_linear_1904_66844)"})),f.createElement("defs",null,f.createElement("filter",{id:"filter0_d_1904_66844",x:"-1.91351",y:"-1.27567",width:"54.8539",height:"54.8539",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dy:"0.637836"}),f.createElement("feGaussianBlur",{stdDeviation:"0.956754"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1904_66844"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1904_66844",result:"shape"})),f.createElement("linearGradient",{id:"paint0_linear_1904_66844",x1:"46.6528",y1:"37.3139",x2:"29.2026",y2:"24.1295",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0"}),f.createElement("stop",{offset:"0.33271",stopColor:"white",stopOpacity:"0.11"}),f.createElement("stop",{offset:"0.449925",stopColor:"white",stopOpacity:"0.5"}),f.createElement("stop",{offset:"0.562473",stopColor:"white",stopOpacity:"0.11"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),f.createElement("linearGradient",{id:"paint1_linear_1904_66844",x1:"31.8916",y1:"21.6864",x2:"47.5581",y2:"39.2257",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#F7C000"}),f.createElement("stop",{offset:"1",stopColor:"#E8B604"})),f.createElement("linearGradient",{id:"paint2_linear_1904_66844",x1:"47.1997",y1:"39.5458",x2:"31.5331",y2:"22.0066",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0"}),f.createElement("stop",{offset:"0.418743",stopColor:"white",stopOpacity:"0.15"}),f.createElement("stop",{offset:"0.504534",stopColor:"white",stopOpacity:"0.63"}),f.createElement("stop",{offset:"0.588015",stopColor:"white",stopOpacity:"0.15"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"}))))}function jH(){return f.createElement("svg",{width:"46",height:"45",viewBox:"0 0 46 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{filter:"url(#filter0_d_1904_66832)"},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.6036 25.0556C1.12383 20.6128 1.12383 13.3775 5.6036 8.93478C7.76292 6.7933 10.6465 5.61081 13.6925 5.61081C16.5194 5.61081 19.209 6.62902 21.3102 8.49271C23.4103 6.62969 26.0996 5.60886 28.9298 5.60886C31.9764 5.60886 34.8598 6.79177 37.0207 8.93478C39.1809 11.0772 40.3839 13.9501 40.3839 16.9962C40.3839 20.038 39.1847 22.91 37.0234 25.0548C37.0232 25.055 37.0236 25.0547 37.0234 25.0548C37.0226 25.0556 37.0214 25.0568 37.0207 25.0575L35.3114 26.7566L21.3162 40.6361L5.6036 25.0556ZM21.3102 13.2071L19.4117 11.3243C17.8838 9.80902 15.8532 8.97612 13.6925 8.97612C11.5298 8.97612 9.49924 9.81097 7.97334 11.3243C4.821 14.4506 4.821 19.5398 7.97334 22.6661L21.3161 35.8966L32.9417 24.3671L34.6509 22.6681C36.1788 21.1528 37.0186 19.139 37.0186 16.9962C37.0186 14.8514 36.1768 12.8376 34.6509 11.3243C33.1231 9.80902 31.0925 8.97416 28.9298 8.97416C26.7671 8.97416 24.7365 9.80902 23.2087 11.3243L21.3102 13.2071Z",fill:"white"}),f.createElement("path",{d:"M7.97332 22.6661C4.82098 19.5398 4.82098 14.4506 7.97332 11.3243C9.49922 9.81098 11.5298 8.97612 13.6925 8.97612C15.8532 8.97612 17.8838 9.80902 19.4116 11.3243L21.3101 13.2071L23.2087 11.3243C24.7365 9.80902 26.7671 8.97417 28.9298 8.97417C31.0924 8.97417 33.123 9.80902 34.6509 11.3243C36.1768 12.8376 37.0186 14.8514 37.0186 16.9962C37.0186 19.139 36.1788 21.1528 34.6509 22.6681L32.9417 24.3671L21.3161 35.8966L7.97332 22.6661Z",fill:"#FF8577"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.0424 27.6444C30.9973 27.7838 30.8938 27.8968 30.7588 27.9538L26.3392 29.8229C25.9283 29.9966 25.9283 30.579 26.3392 30.7527L30.7588 32.6217C30.8938 32.6788 30.9973 32.7918 31.0424 32.9312L32.6119 37.7787C32.7627 38.2444 33.4216 38.2444 33.5724 37.7787L35.142 32.9312C35.1871 32.7918 35.2906 32.6788 35.4256 32.6217L39.8452 30.7527C40.2561 30.579 40.2561 29.9966 39.8452 29.8229L35.4256 27.9538C35.2906 27.8968 35.1871 27.7838 35.142 27.6444L33.5724 22.7969C33.4216 22.3312 32.7627 22.3312 32.6119 22.7969L31.0424 27.6444ZM37.9408 25.3637L36.7741 21.7603C35.618 18.1897 30.5664 18.1896 29.4103 21.7603L28.2436 25.3637L25.0284 26.7233C21.8781 28.0556 21.8781 32.52 25.0284 33.8523L28.2436 35.2119L29.4103 38.8153C30.5664 42.3859 35.618 42.386 36.7741 38.8153L37.9408 35.2119L41.156 33.8523C44.3062 32.52 44.3062 28.0556 41.156 26.7233L37.9408 25.3637Z",fill:"white"}),f.createElement("path",{d:"M32.6119 22.7969C32.7627 22.3312 33.4216 22.3312 33.5724 22.7969L35.142 27.6444C35.1871 27.7838 35.2906 27.8968 35.4256 27.9538L39.8452 29.8229C40.2561 29.9966 40.2561 30.5789 39.8452 30.7527L35.4256 32.6217C35.2906 32.6788 35.1871 32.7917 35.142 32.9312L33.5724 37.7787C33.4216 38.2444 32.7627 38.2444 32.6119 37.7787L31.0424 32.9312C30.9973 32.7917 30.8938 32.6788 30.7588 32.6217L26.3392 30.7527C25.9283 30.5789 25.9283 29.9966 26.3392 29.8229L30.7588 27.9538C30.8938 27.8968 30.9973 27.7838 31.0424 27.6444L32.6119 22.7969Z",fill:"url(#paint0_linear_1904_66832)"}),f.createElement("path",{d:"M32.6119 22.7969C32.7627 22.3312 33.4216 22.3312 33.5724 22.7969L35.142 27.6444C35.1871 27.7838 35.2906 27.8968 35.4256 27.9538L39.8452 29.8229C40.2561 29.9966 40.2561 30.5789 39.8452 30.7527L35.4256 32.6217C35.2906 32.6788 35.1871 32.7917 35.142 32.9312L33.5724 37.7787C33.4216 38.2444 32.7627 38.2444 32.6119 37.7787L31.0424 32.9312C30.9973 32.7917 30.8938 32.6788 30.7588 32.6217L26.3392 30.7527C25.9283 30.5789 25.9283 29.9966 26.3392 29.8229L30.7588 27.9538C30.8938 27.8968 30.9973 27.7838 31.0424 27.6444L32.6119 22.7969Z",fill:"url(#paint1_linear_1904_66832)"})),f.createElement("defs",null,f.createElement("filter",{id:"filter0_d_1904_66832",x:"-1.68265",y:"-1.12177",width:"48.2361",height:"48.2361",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dy:"0.560885"}),f.createElement("feGaussianBlur",{stdDeviation:"0.841327"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1904_66832"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1904_66832",result:"shape"})),f.createElement("linearGradient",{id:"paint0_linear_1904_66832",x1:"25.2398",y1:"21.3136",x2:"40.9446",y2:"39.2619",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#F7C000"}),f.createElement("stop",{offset:"1",stopColor:"#E8B604"})),f.createElement("linearGradient",{id:"paint1_linear_1904_66832",x1:"40.9446",y1:"39.2619",x2:"25.2398",y2:"21.3136",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0"}),f.createElement("stop",{offset:"0.418743",stopColor:"white",stopOpacity:"0.15"}),f.createElement("stop",{offset:"0.504534",stopColor:"white",stopOpacity:"0.63"}),f.createElement("stop",{offset:"0.588015",stopColor:"white",stopOpacity:"0.15"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"}))))}function jG(){return f.createElement("svg",{width:"41",height:"40",viewBox:"0 0 41 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{filter:"url(#filter0_d_1972_66634)"},f.createElement("path",{d:"M25.0742 24.5505V24.5597H25.7273C26.0169 24.5611 26.3027 24.6243 26.565 24.7451C26.8274 24.8659 27.0598 25.0414 27.2464 25.2593L27.2793 25.3009C27.5241 25.587 27.6808 25.9359 27.7307 26.3067C27.7807 26.6774 27.7219 27.0545 27.5612 27.3935C27.4006 27.7324 27.1448 28.0191 26.824 28.2198C26.5033 28.4204 26.1309 28.5267 25.7508 28.526H25.0068V28.5368C25.2967 28.5379 25.5827 28.6012 25.8451 28.7223C26.1075 28.8434 26.3398 29.0194 26.526 29.2379L26.5589 29.2764C26.8032 29.5625 26.9595 29.9114 27.0091 30.2818C27.0588 30.6523 26.9999 31.0291 26.8393 31.3678C26.6787 31.7064 26.4232 31.9929 26.1027 32.1935C25.7822 32.3941 25.4102 32.5004 25.0303 32.5H8.91728C8.46859 32.5002 8.02426 32.4134 7.60966 32.2446C7.19507 32.0758 6.81834 31.8283 6.50099 31.5162C6.18365 31.2041 5.93191 30.8336 5.76016 30.4257C5.5884 30.0179 5.5 29.5808 5.5 29.1393V19.8199H6.85C7.91966 19.8199 8.49287 19.6181 9.14907 18.1249C11.16 13.1555 14.6305 11.3018 14.6305 8.66534V7.82863C14.633 7.54171 14.7506 7.26738 14.9577 7.06536C15.1647 6.86334 15.4446 6.74999 15.7362 6.75H16.0682C16.5994 6.74951 17.1152 6.9252 17.5323 7.24869C17.9495 7.57218 18.2437 8.02458 18.3673 8.53282C18.5022 9.0959 18.5705 9.67242 18.5709 10.2509C18.5703 11.2371 18.3745 12.2137 17.9945 13.1262L17.058 15.379C17.0007 15.5145 16.9783 15.6619 16.9929 15.8079C17.0074 15.954 17.0584 16.0942 17.1413 16.2162C17.2242 16.3382 17.3365 16.4382 17.4682 16.5072C17.5998 16.5762 17.7467 16.6121 17.8959 16.6118H25.7508C26.0404 16.6131 26.3262 16.6764 26.5885 16.7971C26.8508 16.9179 27.0833 17.0934 27.2699 17.3113L27.3028 17.3545C27.5467 17.6406 27.7025 17.9893 27.7519 18.3595C27.8013 18.7298 27.7423 19.1062 27.5818 19.4446C27.4212 19.783 27.1659 20.0692 26.8457 20.2698C26.5255 20.4703 26.1538 20.5767 25.7742 20.5765H25.1478H26.479C26.7688 20.5775 27.0549 20.6408 27.3173 20.7619C27.5797 20.883 27.8121 21.059 27.9981 21.2776L28.0326 21.3177C28.2769 21.6037 28.4331 21.9524 28.4828 22.3227C28.5326 22.6931 28.4738 23.0697 28.3134 23.4083C28.153 23.7469 27.8976 24.0334 27.5774 24.2341C27.2572 24.4348 26.8853 24.5414 26.5056 24.5412L25.0742 24.5505Z",fill:"#0FA958"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.0742 24.5505V24.5597H25.7273C25.9951 24.561 26.2598 24.6152 26.5056 24.7189C26.506 24.719 26.5064 24.7192 26.5068 24.7194C26.5263 24.7276 26.5457 24.7362 26.565 24.7451C26.8274 24.8659 27.0598 25.0414 27.2464 25.2593L27.2793 25.3009C27.5241 25.587 27.6808 25.9359 27.7307 26.3067C27.7326 26.3206 27.7343 26.3346 27.7359 26.3485C27.7761 26.7057 27.7158 27.0672 27.5612 27.3935C27.5549 27.4069 27.5484 27.4202 27.5417 27.4334C27.3802 27.7549 27.1321 28.027 26.824 28.2198C26.5566 28.387 26.2533 28.4887 25.9396 28.5175C25.8794 28.5231 25.8187 28.5259 25.7579 28.526C25.7555 28.526 25.7531 28.526 25.7508 28.526H25.0069L25.0068 28.5368C25.2622 28.5378 25.5146 28.587 25.7505 28.6815C25.7504 28.6815 25.7506 28.6816 25.7505 28.6815C25.7822 28.6943 25.814 28.7079 25.8451 28.7223C26.1075 28.8434 26.3398 29.0194 26.526 29.2379L26.5589 29.2764C26.8032 29.5625 26.9595 29.9113 27.0091 30.2818C27.0588 30.6523 26.9999 31.0291 26.8393 31.3678C26.8322 31.3827 26.825 31.3975 26.8175 31.4123C26.6561 31.7315 26.409 32.0018 26.1027 32.1935C25.7822 32.3941 25.4102 32.5004 25.0303 32.5H8.91728C8.46859 32.5002 8.02426 32.4134 7.60966 32.2446C7.19507 32.0758 6.81834 31.8283 6.50099 31.5162C6.18365 31.2041 5.93191 30.8336 5.76016 30.4257C5.5884 30.0179 5.5 29.5808 5.5 29.1393V19.8199H6.85C7.91966 19.8199 8.49287 19.6181 9.14907 18.1249C10.1339 15.6911 11.4689 14.0047 12.5748 12.6076C13.727 11.152 14.6305 10.0106 14.6305 8.66534V7.82863C14.633 7.54171 14.7506 7.26738 14.9577 7.06536C15.1647 6.86333 15.4446 6.74999 15.7362 6.75H16.0682C16.5994 6.74951 17.1152 6.9252 17.5323 7.24869C17.9495 7.57218 18.2437 8.02458 18.3673 8.53282C18.5022 9.0959 18.5705 9.67242 18.5709 10.2509C18.5703 11.2371 18.3745 12.2137 17.9945 13.1262L17.058 15.379C17.0007 15.5145 16.9783 15.6619 16.9929 15.8079C17.0074 15.954 17.0584 16.0942 17.1413 16.2162C17.2242 16.3382 17.3365 16.4382 17.4682 16.5072C17.5998 16.5762 17.7467 16.6121 17.8959 16.6118H25.7508C26.0404 16.6131 26.3262 16.6764 26.5885 16.7971C26.8508 16.9179 27.0833 17.0934 27.2699 17.3113L27.3028 17.3545C27.3916 17.4587 27.4687 17.5711 27.5333 17.6899C27.646 17.8974 27.7205 18.1241 27.7519 18.3595C27.8013 18.7298 27.7423 19.1062 27.5818 19.4446C27.4212 19.783 27.1659 20.0692 26.8457 20.2698C26.7297 20.3424 26.6069 20.4027 26.4794 20.45C26.4793 20.4501 26.4796 20.45 26.4794 20.45C26.2558 20.5331 26.0174 20.5764 25.7761 20.5765H26.479C26.6908 20.5772 26.9005 20.6112 27.1005 20.6767C27.1742 20.7008 27.2466 20.7292 27.3173 20.7619C27.5797 20.883 27.8121 21.059 27.9981 21.2776L28.0326 21.3177C28.2769 21.6037 28.4331 21.9524 28.4828 22.3227C28.486 22.3465 28.4888 22.3703 28.4911 22.3941C28.5035 22.5228 28.5029 22.6519 28.4896 22.7795C28.4671 22.9963 28.4078 23.2089 28.3134 23.4083C28.153 23.7469 27.8976 24.0334 27.5774 24.2341C27.3012 24.4072 26.9866 24.5103 26.6617 24.5353C26.6099 24.5393 26.5578 24.5413 26.5056 24.5412L25.7273 24.5463L25.0742 24.5505ZM30.6292 19.7802C31.0668 20.4164 31.3522 21.1496 31.4561 21.9234C31.5833 22.8701 31.4325 23.8314 31.0246 24.6926C30.9059 24.9431 30.7671 25.1818 30.6102 25.4067C30.6498 25.5708 30.6811 25.7375 30.7039 25.9061C30.8315 26.8538 30.6807 27.8162 30.2721 28.6783C30.1597 28.9155 30.0293 29.142 29.8825 29.3563C29.9252 29.5293 29.9587 29.7051 29.9825 29.8831C30.1095 30.8302 29.9584 31.7918 29.55 32.6531C29.1418 33.514 28.4957 34.2349 27.6943 34.7365C26.8943 35.2372 25.9703 35.5004 25.0303 35.5C25.0299 35.5 25.0295 35.5 25.0291 35.5C25.0284 35.5 25.0277 35.5 25.027 35.5L8.91864 35.5C8.91819 35.5 8.91774 35.5 8.91728 35.5C8.08167 35.5002 7.25308 35.3386 6.4784 35.0231C5.70321 34.7075 4.99568 34.2435 4.39746 33.6552C3.79913 33.0667 3.32186 32.3655 2.99533 31.5901C2.66875 30.8146 2.5 29.9817 2.5 29.1393V16.8199H6.44186C7.5825 14.0786 9.10204 12.1602 10.1873 10.7901C10.2224 10.7458 10.2571 10.702 10.2913 10.6587C10.8805 9.91414 11.2289 9.45761 11.4543 9.0645C11.5547 8.8895 11.5982 8.78019 11.6169 8.72094C11.6258 8.69274 11.6288 8.67673 11.6298 8.67077L11.6305 8.66562L11.6305 7.81567L11.6306 7.80272C11.6401 6.70885 12.0887 5.67306 12.8628 4.91793C13.6352 4.1644 14.6688 3.74999 15.7362 3.75M30.6292 19.7802C30.773 19.1888 30.807 18.5728 30.7255 17.9626C30.6037 17.0498 30.2293 16.1933 29.6503 15.4855L29.6042 15.425L29.5489 15.3604C29.0789 14.8114 28.4963 14.3728 27.8434 14.0722C27.1906 13.7716 26.4815 13.6151 25.7646 13.6118L21.0159 13.6118C21.382 12.5311 21.5702 11.3969 21.5709 10.2528L21.5709 10.2489C21.5703 9.43548 21.4743 8.62505 21.2847 7.8339L21.2823 7.82375C20.9966 6.64915 20.3191 5.61336 19.3707 4.87796C18.424 4.14383 17.2605 3.74951 16.0682 3.75C16.0679 3.75 16.0685 3.75 16.0682 3.75H15.7362",fill:"white"}),f.createElement("path",{d:"M29.0719 19.3222C29.2063 18.9071 29.7937 18.9071 29.9281 19.3222L31.3273 23.6435C31.3675 23.7678 31.4598 23.8685 31.5801 23.9194L35.5199 25.5855C35.8862 25.7404 35.8862 26.2595 35.5199 26.4145L31.5801 28.0806C31.4598 28.1315 31.3675 28.2321 31.3273 28.3564L29.9281 32.6777C29.7937 33.0929 29.2063 33.0929 29.0719 32.6777L27.6727 28.3564C27.6325 28.2321 27.5402 28.1315 27.4199 28.0806L23.48 26.4145C23.1137 26.2595 23.1137 25.7404 23.48 25.5855L27.4199 23.9194C27.5402 23.8685 27.6325 23.7678 27.6727 23.6435L29.0719 19.3222Z",fill:"url(#paint0_linear_1972_66634)"}),f.createElement("path",{d:"M29.0719 19.3222C29.2063 18.9071 29.7937 18.9071 29.9281 19.3222L31.3273 23.6435C31.3675 23.7678 31.4598 23.8685 31.5801 23.9194L35.5199 25.5855C35.8862 25.7404 35.8862 26.2595 35.5199 26.4145L31.5801 28.0806C31.4598 28.1315 31.3675 28.2321 31.3273 28.3564L29.9281 32.6777C29.7937 33.0929 29.2063 33.0929 29.0719 32.6777L27.6727 28.3564C27.6325 28.2321 27.5402 28.1315 27.4199 28.0806L23.48 26.4145C23.1137 26.2595 23.1137 25.7404 23.48 25.5855L27.4199 23.9194C27.5402 23.8685 27.6325 23.7678 27.6727 23.6435L29.0719 19.3222Z",fill:"url(#paint1_linear_1972_66634)"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.6727 23.6435C27.6325 23.7678 27.5402 23.8685 27.4199 23.9194L23.48 25.5855C23.1137 25.7404 23.1137 26.2595 23.48 26.4145L27.4199 28.0806C27.5402 28.1315 27.6325 28.2321 27.6727 28.3564L29.0719 32.6777C29.2063 33.0929 29.7937 33.0929 29.9281 32.6777L31.3273 28.3564C31.3675 28.2321 31.4598 28.1315 31.5801 28.0806L35.5199 26.4145C35.8862 26.2595 35.8862 25.7404 35.5199 25.5855L31.5801 23.9194C31.4598 23.8685 31.3675 23.7678 31.3273 23.6435L29.9281 19.3222C29.7937 18.9071 29.2063 18.9071 29.0719 19.3222L27.6727 23.6435ZM33.8223 21.6104L32.7822 18.3981C31.7516 15.2151 27.2484 15.2151 26.2177 18.3981L25.1777 21.6104L22.3116 22.8224C19.5033 24.0101 19.5032 27.9899 22.3116 29.1775L25.1777 30.3896L26.2177 33.6018C27.2483 36.7849 31.7516 36.7849 32.7822 33.6018L33.8223 30.3896L36.6884 29.1775C39.4967 27.9899 39.4968 24.0101 36.6884 22.8225L33.8223 21.6104Z",fill:"white"})),f.createElement("defs",null,f.createElement("filter",{id:"filter0_d_1972_66634",x:"-1.5",y:"-1",width:"43",height:"43",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dy:"0.5"}),f.createElement("feGaussianBlur",{stdDeviation:"0.75"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1972_66634"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1972_66634",result:"shape"})),f.createElement("linearGradient",{id:"paint0_linear_1972_66634",x1:"23.2053",y1:"19.0109",x2:"35.3845",y2:"33.3378",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#F7C000"}),f.createElement("stop",{offset:"1",stopColor:"#E8B604"})),f.createElement("linearGradient",{id:"paint1_linear_1972_66634",x1:"35.7947",y1:"32.9891",x2:"23.6155",y2:"18.6622",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0"}),f.createElement("stop",{offset:"0.418743",stopColor:"white",stopOpacity:"0.15"}),f.createElement("stop",{offset:"0.504534",stopColor:"white",stopOpacity:"0.63"}),f.createElement("stop",{offset:"0.588015",stopColor:"white",stopOpacity:"0.15"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"}))))}function jV(){return f.createElement("div",{className:"vote_graphic--stampContainer--Gg9nN"},f.createElement("div",{className:"vote_graphic--sticky--5vnwr"},f.createElement(jB,null)),f.createElement("div",{className:"vote_graphic--plusOneStamp--lqNsf vote_graphic--stamp---bJ3m"},f.createElement(jU,null)),f.createElement("div",{className:"vote_graphic--heartStamp--EhTYO vote_graphic--stamp---bJ3m"},f.createElement(jH,null)),f.createElement("div",{className:"vote_graphic--thumbsUpStamp--d1jHf vote_graphic--stamp---bJ3m"},f.createElement(jG,null)))}function jK({recordingKey:e}){let t=(0,_.wA)(),n=(0,jk.Pd)(f.useCallback(()=>{t(FX.H1({votingStage:l8.W8Y.JOINED}))},[t]));return f.createElement("div",{className:a8.cx.flex.flexColumn.p16.$},f.createElement("div",{className:a8.cx.flex.gap8.itemsCenter.mb8.$},f.createElement(jV,null)),f.createElement("div",{className:a8.cx.flex.justifyCenter.$},f.createElement(zI,{onClick:n,recordingKey:n_.Pt(e,"joinVotingSession")},(0,eN.tx)("meetings_panel.voting.join_vote"))))}var jW=n(404095);let jz="create_new_vote_view--stepperButtonWrapper--MA6-g";var jj=n(349307),jJ=n(98285);let jY=e=>{let t=null;try{t=parseInt(e,10)}catch(e){}return t};function jX(){let e=(0,_.wA)(),t=(0,af.tS)(),{title:n,userVoteLimit:a}=(0,_.d4)(e=>e.voting.votingParams),l=(0,_.d4)(e=>!e.user),r=(0,mV.oh)(FX.$c(t||"")),[i,o]=f.useState(a.toString());(0,f.useEffect)(()=>{let t=jY(i);t&&e(FX.hL(t))},[i,e]);let s=l||r;return f.createElement("div",{className:a8.cx.flex.flexColumn.p16.gap12.$},f.createElement(jV,null),f.createElement(jq,{userVoteLimitInput:i,setUserVoteLimitInput:o,title:n,isTitleDisabled:s,isLimitDisabled:s,userVoteLimit:a,setTitle:f.useCallback(t=>e(FX.D6(t)),[e])}))}function jq(e){var t;let n=f.useRef(null),a=(0,_.wA)(),l=(0,af.tS)(),r=(0,_.d4)(e=>!e.user),i=(0,mV.oh)(FX.$c(l||"")),o=(0,_.d4)(e=>e.multiplayer.allUsers.length),s=(0,cp.Fk)(e=>{var t;return null==(t=e.getCurrentPage())?void 0:t.guid}),c=null==(t=(0,Fq.NE)())?void 0:t.id,d=r||i||!s,{userVoteLimitInput:u,userVoteLimit:m,title:p,setTitle:g,isLimitDisabled:h,isTitleDisabled:E,setUserVoteLimitInput:v}=e,y=f.useCallback(e=>{let t=parseInt(u);(t+=e)<1||t>99||v(t.toString())},[v,u]),b=f.useCallback(e=>{var t;"ArrowUp"===e.key||"ArrowDown"===e.key?(y("ArrowUp"===e.key?1:-1),e.preventDefault()):("Enter"===e.key||"Escape"===e.key)&&(null==(t=n.current)||t.blur())},[y]),C=f.useCallback(()=>{var e;null==(e=n.current)||e.select()},[n]),w=f.useCallback(e=>{if(!e.currentTarget.value.match(/^(\s*|\d+)$/)){e.preventDefault();return}v(e.currentTarget.value)},[v]),T=f.useCallback(e=>{let t=n.current.value,a=jY(u);(""===t||!a||isNaN(a)||a<1)&&v("1")},[u,v]),x=(0,eN.t)("voting.modal.voting_setup_responsive_placeholder_prompt",{numVotes:m}),N=(0,jk.Pd)(f.useCallback(()=>{if(!s)throw Error("Cannot start a voting session since currentPageNodeId is null");a(FX.vt({source:"voting_modal",usedCustomTitle:""!==p,requestBody:{title:p,in_progress:!0,user_vote_limit:m,num_people_in_file:o,page_node_id:s,voting_session_id_to_end:c},uiSurface:"MeetingsPanel"}))},[a,p,m,o,s,c])),S=(0,nS.R)();return f.createElement("div",{className:"create_new_vote_view--container--mzVZ7"},f.createElement(Av.L,{autoComplete:"off",autoCorrect:"off",autoFocus:!0,className:"create_new_vote_view--promptInput--Fd2W3 text--fontPos11--2LvXf text--_fontBase--QdLsd",spellCheck:!1,placeholder:x,value:p,onChange:e=>g(e.target.value),disabled:E,"aria-label":(0,eN.t)("voting.modal.voting_setup_prompt_input_field_aria_label")}),f.createElement("div",{className:"create_new_vote_view--voteLimitContainer--ga1AC"},f.createElement("div",{className:"create_new_vote_view--voteLimitControls--7D-Fi"},S?f.createElement("div",{className:jz},f.createElement(vJ.K,{onClick:()=>{h||y(-1)},"aria-label":(0,eN.t)("voting.modal.reduce_limit_tooltip_aria_label"),"aria-disabled":h},f.createElement(ry.U,{svg:jj.A},f.createElement(jW.f,null)))):f.createElement(a2.B,{svg:jj.A,className:jz,onClick:()=>{h||y(-1)},role:"button","aria-label":(0,eN.t)("voting.modal.reduce_limit_tooltip_aria_label"),"aria-disabled":h}),f.createElement("input",{className:"create_new_vote_view--limitInput--1dzSR create_new_vote_view--promptInput--Fd2W3 text--fontPos11--2LvXf text--_fontBase--QdLsd",maxLength:2,type:"text",inputMode:"numeric",ref:n,value:u,onKeyDown:b,onFocus:C,onChange:w,onBlur:T,disabled:h,"aria-label":(0,eN.t)("voting.modal.voting_limit_input_field_aria_label")}),S?f.createElement("div",{className:jz},f.createElement(vJ.K,{onClick:()=>{h||y(1)},"aria-label":(0,eN.t)("voting.modal.increase_limit_tooltip_aria_label"),"aria-disabled":h},f.createElement(ry.U,{svg:jJ.A},f.createElement(Fv.x,null)))):f.createElement(a2.B,{svg:jJ.A,className:jz,onClick:()=>{h||y(1)},role:"button","aria-label":(0,eN.t)("voting.modal.increase_limit_tooltip_aria_label"),"aria-disabled":h})),f.createElement(zI,{flexGrow:!0,onClick:N,disabled:d,"data-tooltip-type":r?nx.Ib.TEXT:void 0,"data-tooltip":r?(0,eN.t)("voting.modal.start_disabled_logged_out_tooltip"):void 0,recordingKey:"votingModalStartVotingSession"},f.createElement("span",null,(0,eN.tx)("voting.modal.start_voting_session")))))}function jZ(e){let{setOnPastVotesClick:t,setOnNewSessionClick:n,recordingKey:a}=e,l=(0,af.tS)(),r=void 0!==t;return f.createElement("div",{className:a8.cx.flex.flexColumn.p16.$},f.createElement("div",{className:a8.cx.flex.gap8.itemsCenter.mb12.$},f.createElement(jV,null)),f.createElement("div",{className:a8.cx.flex.gap6.justifyCenter.$},r&&f.createElement(zk,{flexGrow:r,onClick:()=>{(0,Z.sx)("view_past_voting_sessions",{source:"meetings_panel",fileKey:l}),t()},recordingKey:n_.Pt(a,"viewPastVotingSessions")},(0,eN.tx)("meetings_panel.voting.view_past_results_prompt")),!C.Ay.isMeetDevice&&f.createElement(zI,{flexGrow:r,onClick:()=>{(0,Z.sx)("creating_new_vote_start",{source:"meetings_panel",fileKey:l}),n()},recordingKey:n_.Pt(a,"newVote")},f.createElement("div",{className:a8.cx.px4.$},(0,eN.tx)("meetings_panel.voting.new_vote")))))}function jQ({recordingKey:e}){let[t,n]=f.useState(!1),a=(0,jk.Ld)(),l=(0,e2.Xr)(uM.Qs),r=(0,jk.Pd)(f.useCallback(()=>{n(!0)},[])),i=(0,jk.Pd)(f.useCallback(()=>{l({type:"SET_VIEW",payload:uM.iN.PAST_VOTES})},[l]));return t?f.createElement(jX,null):f.createElement(jZ,{setOnPastVotesClick:a?i:void 0,setOnNewSessionClick:r,recordingKey:e})}function j$(){let e=(0,_.d4)(e=>e.mirror.appModel.votingSessionInfo),t=(0,_.d4)(e=>e.mirror.appModel.votingSessionInfo),n="meetingsPanel";switch(t.votingStage){case ei.W8Y.JOINED:return f.createElement(jF,{votingSessionInfo:e,recordingKey:n});case ei.W8Y.NOT_JOINED:return f.createElement(jK,{recordingKey:n});case ei.W8Y.NO_SESSION:case ei.W8Y.ENDED:return f.createElement(jQ,{recordingKey:n})}}let j0="meetings_panel",j1=(0,cV.Ju)(function({votingSessionId:e}){let t=(0,_.wA)(),n=(0,af.tS)(),a=()=>{(0,Z.sx)("cancel_delete_voting_session",{source:j0,votingSessionId:e,fileKey:n})};return f.createElement(cK.Rw,{confirmationTitle:(0,eN.t)("voting.modal.delete_voting_session_modal_header"),content:(0,eN.t)("voting.modal.delete_voting_session_modal_description"),onConfirm:()=>{t(FX.$l({votingSessionId:e})),t(FX.H1({votingStage:ei.W8Y.NO_SESSION})),(0,Z.sx)("confirm_delete_voting_session",{source:j0,votingSessionId:e,fileKey:n})},confirmText:(0,eN.t)("voting.modal.delete_voting_session_modal_confirm_button"),size:"small",destructive:!0,disableClickOutsideToHide:!0,hideOnConfirm:!0,cancelText:(0,eN.t)("voting.modal.delete_voting_session_modal_cancel_button"),onCancel:a,onCloseButtonClick:a,hideCancel:!1,popStack:!0,recordingKey:"deleteVotingSessionModal"})},"DeleteVotingSessionModal",cV.ZU.YES);function j2({recordingKey:e}){let t=(0,Fq.jz)(),[n,a]=(0,f.useState)(null);return f.createElement(f.Fragment,null,t&&t.length>0?f.createElement(i6.P,{className:"previous_votes_view--scrollContainer--Jb0sL"},f.createElement("ol",{className:"previous_votes_view--resultsList--IWpfo"},t.map((t,l,r)=>{var i;let o=null==(i=r[l+1])?void 0:i.id,s=t.id!==n&&(!o||o!==n)&&!!o;return f.createElement(j5,{key:t.id,title:(0,jk.DG)(t),id:t.id,userId:t.userId,createdAt:t.createdAt,shouldShowSeparator:s,setAsHovered:()=>a(t.id),setAsNotHovered:()=>a(e=>e===t.id?null:e),recordingKey:e})}))):f.createElement("div",{className:"previous_votes_view--nullResultsList--xAcum"},f.createElement("p",{className:"previous_votes_view--nullResultsListTextHeader--vWsPe previous_votes_view--nullResultsListText--qaiMF text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,eN.tx)("voting.modal.previous_votes_null_text_title")),f.createElement("p",{className:"previous_votes_view--nullResultsListTextDescription--CNedi previous_votes_view--nullResultsListText--qaiMF text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,eN.tx)("voting.modal.after_you_vote_results_will_show_up_right_here"))))}function j5({title:e,id:t,userId:n,createdAt:a,shouldShowSeparator:l,setAsHovered:r,setAsNotHovered:i,recordingKey:o}){let s=(0,_.wA)(),c=(0,af.tS)();return f.createElement("li",null,f.createElement(a7.GG,{recordingKey:n_.Pt(o,"viewPastVotingSession"),className:nb()("previous_votes_view--previousVotesListItem--77yUn",l&&"previous_votes_view--showSeparator--nHjDd"),onClick:()=>{(0,Z.sx)("view_past_voting_session",{votingSessionId:t,source:"meetings_panel",fileKey:c}),s(FX.H1({sessionId:t,votingStage:l8.W8Y.ENDED}))},onMouseEnter:()=>r(),onMouseLeave:()=>i()},f.createElement("div",{className:"previous_votes_view--title--ndUJI text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsisAfter2Lines--Qo-Xh ellipsis--_ellipsisAfterNLines--LzI7k"},e),f.createElement("div",{className:"previous_votes_view--previousVotesListItemMetadata--BDnIc"},f.createElement(j4,{userId:n}),f.createElement("div",{className:"previous_votes_view--timestamp--A1VKx"},f.createElement(LS.h1,{date:a})))))}function j4({userId:e}){let{user:t,loading:n}=(0,KT.wW)(e);return f.createElement(f.Fragment,null,f.createElement(jE.v,{userId:e,user:t,loading:n,size:24,loadingClassName:"previous_votes_view--loadingAvatar--JzmIH",defaultClassName:"previous_votes_view--userAvatarPadding---Zhpj"}),f.createElement(jE.m,{userId:e,user:t,loading:n,defaultClassName:"previous_votes_view--username--l6MHn text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",loadingClassName:"previous_votes_view--loadingUsername--VL2uA"}))}var j3=n(240416),j6=n(599486);function j7(){return f.createElement("div",{className:"figjam_panel_separator--separator--D-ffn"})}var j8=n(42173),j9=n(781779);let Je=new Map([["STICKY",j6.BV],["TEXT",j6.N$],["FRAME",j6.H0],["SYMBOL",j6.yc],["ROUNDED_RECTANGLE",j6.xf],["CODE_BLOCK",j6.I5]]),Jt=["ROUNDED_RECTANGLE","SYMBOL","FRAME"],Jn=f.memo(({votingSessionInfo:e})=>{let t=(0,Fq.jz)(),n=null==t?void 0:t.find(t=>t.id===e.sessionId),a=(0,f.useMemo)(()=>[...e.votedNodes].sort((e,t)=>{let n=(0,jk.oC)(e),a=(0,jk.oC)(t);return n!==a?a-n:e.guid.localeCompare(t.guid)}),[e]),l=(0,f.useMemo)(()=>(0,jk.yn)(e.votedNodes),[e.votedNodes]);if(!n)return null;let r=!!a.length;return f.createElement("div",{className:a8.cx.flex.flexColumn.minH0.flexGrow1.$},f.createElement("div",{className:"voting_results_detail_view--titleContainer--gt1pA"},f.createElement(jR,{title:(0,jk.DG)(n)})),f.createElement("div",{className:"voting_results_detail_view--byline--Fye6w"},f.createElement(jD,{votingSessionInfo:e}),f.createElement("p",{className:"voting_results_detail_view--bylineTimestamp--3Ugv4 text--fontPos12--YsUAh text--_fontBase--QdLsd"},f.createElement(LS.h1,{date:n.createdAt}))),r&&f.createElement(j7,null),r&&f.createElement(i6.P,null,f.createElement("ol",{className:"voting_results_detail_view--resultsList---owZd"},a.map((e,t)=>{var n;let r=1===l.size&&l.has(e.guid);return f.createElement(Ja,{isMostVoted:r,nodeVoteInfo:e,nextNodeId:(null==(n=a[t+1])?void 0:n.guid)??null,key:e.guid})}))))});function Ja({nodeVoteInfo:e,nextNodeId:t,isMostVoted:n}){let a=e.guid,l=(0,cp.Jk)(a),r=(0,fL.Z)("figjam_voting"),i=(0,_.wA)(),o=(0,_.d4)(e=>e.voting.selectedVotePinId===a),s=(0,_.d4)(e=>!!t&&e.voting.selectedVotePinId===t),c=(0,_.d4)(e=>e.voting.hoveredInModalVotePinId===a),d=(0,_.d4)(e=>!!t&&e.voting.hoveredInModalVotePinId===t),u=f.useContext(fP.kw);(0,f.useEffect)(()=>{if(c)return()=>{i(FX.gA({votePinId:a}))}},[c,i,a]);let m=function(e){if(!e)return j9.xri;let t=e.whiteboardColor,n=(0,j8.BV)(t,"STICKY"===e.type?"sticky":"base");return n?LB.F.format(n):j9.xri}(l),p=l?"SHAPE_WITH_TEXT"===l.type?function(e){switch(e){case"SQUARE":return j6.dH;case"ELLIPSE":return j6.Yl;case"ROUNDED_RECTANGLE":return j6.EW;case"TRIANGLE_UP":return j6.D5;case"TRIANGLE_DOWN":return j6.kj;case"PARALLELOGRAM_RIGHT":return j6.h9;case"PARALLELOGRAM_LEFT":return j6._K;case"ENG_DATABASE":return j6.rQ;case"ENG_QUEUE":return j6.pt;case"ENG_FILE":return j6.ak;case"ENG_FOLDER":return j6.Mi;case"TRAPEZOID":return j6.qn;case"PREDEFINED_PROCESS":return j6.dA;case"SHIELD":return j6.lm;case"PENTAGON":return j6.Un;case"OCTAGON":return j6.JK;case"HEXAGON":return j6.CB;case"PLUS":return j6.c1;case"STAR":return j6.Gg;case"MANUAL_INPUT":return j6.Cu;case"DOCUMENT_SINGLE":return j6.R8;case"DOCUMENT_MULTIPLE":return j6.H$;case"CHEVRON":return j6.zp;case"ARROW_LEFT":case"ARROW_RIGHT":return j6.HK;case"SUMMING_JUNCTION":return j6.QZ;case"OR":return j6.Vq;case"SPEECH_BUBBLE":return j6.QD;case"INTERNAL_STORAGE":return j6.sJ;default:return(0,o2.x1)("voting","error unhandled shape type for shapeTypeToSvg",{shapeType:e}),j6._K}}(l.shapeWithTextType):Je.get(l.type)||j6.BV:j6.BV,g=!!l&&Jt.includes(l.type),h=(()=>{if(!l)return{width:0,height:0};let e=l.absoluteBoundingBox,t=e.w,n=e.h,a=Math.min(t/72,n/72);return{width:t/a,height:n/a}})(),E=FO({nodeId:a,width:h.width,height:h.height,shouldSkip:!g}),v=(0,f.useMemo)(()=>{if(l){if(l.textSublayer)return l.textSublayer.textContent;if(l.textContent)return l.textContent;if(l.name)return l.name}return""},[l]),y=(0,jk.oC)(e);return f.createElement("li",null,f.createElement("button",{className:nb()("voting_results_detail_view--resultsListItemButton--4llQi",{"voting_results_detail_view--resultsListItemButtonWinner--6bIhk":n,"voting_results_detail_view--resultsListItemButtonSelected--Z3vdm":o,"voting_results_detail_view--showSeparator--6aQOA":!o&&!s&&!c&&!d&&!!t}),onClick:function(){i(FX.w9({votePinId:e.guid})),l&&r((0,j3.e)(l,u,"vote"))},onMouseEnter:function(){(0,C.aJ)()&&i(FX.Vw({votePinId:a}))},onMouseLeave:function(){(0,C.aJ)()&&i(FX.gA({votePinId:a}))}},f.createElement("div",{className:"voting_results_detail_view--resultsListItemCountContainer--1fD-h"},f.createElement("div",{className:"voting_results_detail_view--resultsListItemCountText--m6rWN text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,eN.tx)("voting.modal.votes",{numVotes:y,numVotesElem:f.createElement("p",{className:"voting_results_detail_view--resultsListItemCount--DLrXt text--fontPos13--xW8hS text--_fontBase--QdLsd"},y)}))),f.createElement("p",{className:"voting_results_detail_view--resultsListItemDetails--hz7gX text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},v),f.createElement("div",{className:"voting_results_detail_view--resultsListItemThumbnail--Qjux6"},E&&g?f.createElement("img",{className:"voting_results_detail_view--nodePreviewImage--fugfT",src:E.src,width:E.displaySize.x,height:E.displaySize.y,alt:(0,eN.t)("voting.modal.voting_results_image_preview_alt")}):f.createElement(p,{color:m}),n&&f.createElement("img",{src:j6.G7,className:"voting_results_detail_view--medal--JzOBO",alt:(0,eN.t)("voting.modal.medal_img_alt")}))))}function Jl(e){let{headerText:t,goBack:n,options:a,onMinimize:l,onOptionsMenuClick:r,recordingKey:i}=e;return f.createElement("div",{className:"meetings_panel_header--meetingsPanelPageContainer--TK5qd"},f.createElement(Jr,{headerText:t,goBack:n,options:a,onMinimize:l,onOptionsMenuClick:r,recordingKey:i}),f.createElement(j7,null),e.children)}let Jr=f.memo(e=>{let{headerText:t,goBack:n,options:a,onMinimize:l,onOptionsMenuClick:r,recordingKey:i}=e,{Dropdown:o,toggleDropdown:s,dropdownTargetRef:c,isDropdownShown:d}=(0,w0.B)("MEETINGS_PANEL_HEADER_OVERFLOW_MENU"),u=f.useCallback(e=>{null==r||r(),s()},[s,r]),m=f.useMemo(()=>a&&a.length>0?a.map(e=>({displayText:e.text,isChecked:!1,callback:e.callback,recordingKey:e.recordingKey})):null,[a]);return f.createElement(f.Fragment,null,f.createElement("div",{className:"meetings_panel_header--meetingsPanelHeader--6cBGV"},f.createElement(a2.B,{svg:yl.A,className:"meetings_panel_header--panelHeaderBackButton--03dhC",onClick:C.Ay.isIpad?void 0:n,onPointerDown:C.Ay.isIpad?n:void 0,recordingKey:n_.Pt(i,"backButton")}),t&&f.createElement("span",{className:"meetings_panel_header--meetingsPanelHeaderText--KW2Jw text--fontPos11--2LvXf text--_fontBase--QdLsd"},t),f.createElement("div",{className:a8.cx.mlAuto.$,ref:c},m&&f.createElement(iG.YW,{svg:jb.A,label:"dots",className:"meetings_panel_header--panelHeaderOverflowMenuIcon--zCGI4",onClick:u,"aria-label":(0,eN.t)("meetings_panel.header.overflow_menu_aria_label"),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("meetings_panel.header.overflow_menu_aria_label"),selected:d,recordingKey:n_.Pt(i,"expandMenuItems")})),f.createElement("div",null,m&&f.createElement(o,{items:m,showPoint:!0,minWidth:135,recordingKey:n_.Pt(i,"expandMenuItems")}),l&&f.createElement(tN.Jn,{onClick:l}))))}),Ji="meetings_panel";function Jo(){let e=(0,_.d4)(e=>e.mirror.appModel.votingSessionInfo),t=f.useMemo(()=>e&&e.sessionId.length>0,[e]),n=(0,_.wA)(),a=(0,e2.Xr)(uM.Qs),l=(0,ps.qU)(),r=(0,_.Pj)(),i=(0,a6.am)(),o="pastVotingSessions",s=f.useCallback(()=>{t?n(FX.H1({votingStage:ei.W8Y.NO_SESSION})):a({type:"SET_VIEW",payload:uM.iN.DEFAULT})},[t,n,a]),c=f.useCallback(()=>{l({source:ps.OO.MEETINGS_PANEL})},[l]),d=f.useCallback(()=>{i("click_voting_results_more_options",{votingSessionId:e.sessionId,source:Ji})},[i,e]),u=f.useCallback(()=>{n(ty.$O({type:j1.type,showModalsBeneath:!0,data:{votingSessionId:e.sessionId}})),i("click_delete_voting_session",{votingSessionId:e.sessionId,source:Ji})},[n,e,i]),m=f.useCallback(()=>{i("click_export_voting_session_as_csv",{votingSessionId:e.sessionId,source:Ji}),FX.Ev(r.getState(),e.sessionId)},[r,e,i]),p=f.useMemo(()=>{if(t){let e=[{text:(0,eN.t)("voting.modal.actions.delete_voting_session"),callback:u,recordingKey:"votingModalDeleteVotingSession"}];return C.Ay.isIpadNative||e.unshift({text:(0,eN.t)("voting.modal.actions.export_as_csv"),callback:m,recordingKey:"votingModalExportAsCsv"}),e}},[t,m,u]);return f.createElement(Jl,{headerText:(0,eN.t)("meetings_panel.voting.results"),goBack:s,onMinimize:c,onOptionsMenuClick:d,options:p,recordingKey:o},t?f.createElement(Jn,{votingSessionInfo:e}):f.createElement(j2,{recordingKey:o}))}var Js=n(2342),Jc=n(602126);let Jd="volume_slider--incognito--1BzqQ",Ju="volume_slider--thick--OwB1Y";var Jm=(e=>(e.LEFT="LEFT",e.RIGHT="RIGHT",e.CENTER="CENTER",e.INLINE="INLINE",e))(Jm||{});function Jp({muteButtonRef:e,volumeJustification:t,fullWidth:n,isMinimized:a}){var l;let r=(0,_.d4)(e=>e.music.isMuted),i=(0,_.d4)(e=>r?0:e.music.volume),o=(0,nS.R)(),s=(0,_.wA)(),c=e=>{e.preventDefault(),e.stopPropagation();let t=Number(e.target.value);s(pl.pX(t))},d=0,u=0;if("INLINE"!==t){let n=null==(l=e.current)?void 0:l.getClientRects()[0];if(!n)return f.createElement(f.Fragment,null," ");d=n.x,"CENTER"===t?d+=(n.width-144)/2:"RIGHT"===t&&(d=d+n.width-144),u=(n.y||0)+32+5}let m=i-(i-50)/50*3.8;return f.createElement("div",{className:nb()("volume_slider--volumeContainer--jqCRj",{"volume_slider--volumeContainerRelative--2bSYx":"INLINE"===t,[Jd]:!a,[Ju]:!a&&o,"volume_slider--fullWidth--jnzDi":n}),style:{left:`${d||0}px`,top:`${u}px`}},f.createElement("input",{className:nb()("volume_slider--volumeSliderInput--RHbwq",{"volume_slider--isMuted--cDjt7":r,[Jd]:!a&&!o,[Ju]:!a&&o}),style:{background:`linear-gradient(to right,
            var(--active-slider-color) 0%,
            var(--active-slider-color) ${m}%,
            var(--inactive-slider-color) ${m}%,
            var(--inactive-slider-color) 100%
          )`},type:"range",min:0,max:100,step:1,value:i,onChange:c,onMouseUp:e=>{let t=Number(e.target.value);s(pl.tk({isMuted:0===t,userInitiated:!0}))},onInput:c,onTouchEnd:e=>{e.preventDefault(),e.stopPropagation()}}),"INLINE"!==t&&f.createElement("div",{className:nb()({"volume_slider--additionalHoverDetection--IDArn":!a,"volume_slider--shallowAdditionalHoverDetection---8pNd":a})}))}var Jf=n(99351),J_=n(466811),Jg=n(311986),Jh=(e=>(e.DEFAULT="default",e.ON_FIGJAM="onFigjam",e.FIGJAM="figjam",e))(Jh||{});let JE=(e,t)=>t||0===e?rD.A:e<40?J_.A:e<80?Jg.A:Jf.A;var Jv=(e=>(e.DEFAULT="default",e.LARGE="large",e))(Jv||{});function Jy(e){let{isMinimized:t,withDarkHoverBg:n,muteButtonRef:a,muteOnTouch:l,iconColor:r,blockTooltip:i,size:o}=e,s=(0,_.d4)(e=>e.music.volume),c=(0,_.d4)(e=>e.music.isMuted),d=(0,_.wA)(),u=f.useCallback(()=>{d(pl.tk({isMuted:!c,userInitiated:!0}))},[d,c]),m=f.useCallback(e=>{e.preventDefault(),e.stopPropagation(),u()},[u]);return f.createElement("div",{onTouchEnd:l?m:nf.lQ},f.createElement(iG.K0,{onClick:u,className:nb()("volume_control_button--button--6JyR-",{"volume_control_button--minimized--esj8w":t,"volume_control_button--withDarkHoverBg--p-OS1":n,"volume_control_button--defaultSpeakerColor--ZF9o2":"default"===r,"volume_control_button--figjamSpeakerColor--0W5TO":"figjam"===r,"volume_control_button--onFigjamSpeakerColor--KEcX8":"onFigjam"===r,"volume_control_button--large--BF5Mq":"large"===o}),svg:JE(s,c),"data-tooltip-type":nx.Ib.TEXT,tooltipForScreenReadersOnly:i,"data-tooltip":c?(0,eN.t)("whiteboard.timer.timer_unmute_tooltip"):(0,eN.t)("whiteboard.timer.timer_mute_tooltip"),"data-tooltip-show-above":!0,ref:a}))}var Jb=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.ALWAYS=1]="ALWAYS",e[e.NEVER=2]="NEVER",e))(Jb||{});function JC({volumeJustification:e,sliderVisibilitySetting:t,sliderFullWidth:n,buttonGap:a,isMinimized:l,withDarkHoverBg:r,iconColor:i,blockButtonTooltip:o,muteOnTouch:s,size:c}){let d=f.useRef(-1),[u,m]=f.useState(!1),p=f.useCallback(()=>{d.current&&clearTimeout(d.current),d.current=window.setTimeout(()=>{m(!0)},100)},[m]),g=f.useCallback(()=>{d.current&&clearTimeout(d.current),m(!1)},[m]),h=f.useRef(null),E=f.useCallback(()=>{g()},[g]);(0,Jc.Xq)(h,"touchend",E);let v=f.useRef(null),y=(0,_.d4)(e=>e.timer),b=(0,po.IQ)(y.time);f.useEffect(()=>{b&&m(!1)},[b]),f.useEffect(()=>{m(!1)},[t]);let C=u;switch(t){case 1:C=!0;break;case 2:C=!1}return f.createElement("div",{ref:h,onTouchEnd:e=>{e.preventDefault(),e.stopPropagation(),u?g():p()},onMouseEnter:p,onMouseLeave:g,className:"volume_control_button--volumeButtonAndSliderContainer--HyG-F",style:{gap:a}},f.createElement(Jy,{muteButtonRef:v,isMinimized:l,withDarkHoverBg:r,iconColor:i,blockTooltip:o,muteOnTouch:s,size:c}),C&&f.createElement(Jp,{muteButtonRef:v,volumeJustification:e,fullWidth:n,isMinimized:l}))}function Jw(){let e=(0,ps.$3)();return f.createElement("div",{className:"volume_view--volumeView--XbP1r"},f.createElement(JC,{volumeJustification:Jm.INLINE,sliderVisibilitySetting:e?Jb.NEVER:Jb.ALWAYS,sliderFullWidth:!0,buttonGap:5,iconColor:Jh.DEFAULT,withDarkHoverBg:!0,muteOnTouch:e}))}function JT(){let[e,t]=z9(),n=(0,_.d4)(e=>e.mirror.appModel.showUi);return(!function(e){let t=(0,_.wA)(),n=(0,_.d4)(e=>e.timer);f.useEffect(()=>{!1!==n.startChimePlayed||(0,po.IQ)(n.time)||(0,po.CM)(n.time)||(0,po.G8)(n.time)||(e(),t(pl.k1(!0)))},[t,e,n.startChimePlayed,n.time])}(t.playStartChime),!function(){z5();let[e,t]=(0,S.fp)(zV.$),n=(0,_.d4)(e=>e.timer.volume);z6(t),z4(e),z7([zz,zJ,zj],n)}(),!function(){var e;za();let t=function(e){let[t]=f.useState(()=>(null==e?void 0:e.previousPlayerInstance)||new W9(e)),n=(0,_.d4)(t=>"StandaloneMusic"===e.musicSource?t.music.volume:t.timer.volume),a=(0,_.d4)(t=>"StandaloneMusic"===e.musicSource?t.music.isMuted:t.timer.isMuted);return f.useEffect(()=>{t.setVolume(n/100)},[n,t]),f.useEffect(()=>{t.setIsMuted(a)},[a,t]),t}({musicSource:"StandaloneMusic",loadingPlaybackUrl:"https://static.figma.com/uploads/f4e48159672101a168b296a94e39ef02f032e171",previousPlayerInstance:(0,_.d4)(e=>e.music.playerInstance)||void 0,timeUpdateListener:(0,y.kc)().figjam_more_tracks_listen?e=>{e.currentTime>e.duration-.3&&(e.currentTime=0,e.play())}:void 0}),n=(0,_.d4)(e=>e.music.music),a=null==(e=zt((null==n?void 0:n.selectedSongID)||""))?void 0:e.playback_url,l=(0,_.d4)(e=>e.music.volume),r=(0,_.d4)(e=>e.music.isMuted),i=(0,_.wA)();f.useEffect(()=>{i(pl.qV())},[i]),f.useEffect(()=>{(0,y.kc)().figjam_more_tracks_listen&&i(pl.jt())},[i]),f.useEffect(()=>{i(pl.wk(t))},[i,t]),f.useEffect(()=>()=>{t.stop()},[t]),f.useEffect(()=>{i(pl.tk({isMuted:0===l,userInitiated:!1}))},[i,l]);let o=f.useCallback(()=>{i(pl.tk({isMuted:!0,userInitiated:!1})),i(eS.F.enqueue({message:(0,eN.t)("whiteboard.timer.unmute_music_message"),button:{text:(0,eN.t)("whiteboard.timer.unmute_music_button"),action:()=>{i(pl.tk({isMuted:!1,userInitiated:!0}))}},type:"unmute-timer-music",onDismiss:()=>{}}))},[i]);f.useEffect(()=>{if(a!==t.audio.currentSrc&&t.setSource(a||""),!a){t.stop();return}if(null==n?void 0:n.isPaused){t.pause();return}if(!(null==n?void 0:n.isPaused)){if(!t.isPaused()||!a)return;t.playAtTimestamp({src:a,timestamp:(0,pl.UQ)(n),onFailure:o})}},[a,n,t,o,r])}(),(0,jk.YR)(),(0,jk.FJ)(),zZ(),zq(),(0,S.md)(uM.Qs).isOpen&&n)?f.createElement(Jx,null):null}function Jx(){let e=(0,S.md)(uM.Qs),t=(0,ps.$3)(),n=(0,ps.qU)(),a=(0,jk.Av)(),l=(0,nW.U1)();return f.createElement("div",{className:"meetings_panel--meetingsPanelModal--2NL5Z",ref:l},e.view!==uM.iN.PAST_VOTES||t?f.createElement("div",{className:"meetings_panel--meetingsPanelContents--nnSLj"},f.createElement(Js.w,{title:a?(0,eN.t)("meetings_panel.toolbar_tooltip"):(0,eN.t)("meetings_panel.toolbar_tooltip.no_voting"),onClose:()=>n({source:ps.OO.MEETINGS_PANEL})}),f.createElement(i6.P,{className:"meetings_panel--meetingToolsScrollWrapper--D5CUY"},f.createElement(JN,null))):f.createElement(Jo,null))}function JN(){let e=(0,jk.Av)(),t=(0,jk.Ld)(),n=e&&C.Ay.isMeetDevice&&t,a=C.Ay.isMeetDevice?n:e;return f.createElement("div",{className:a8.cx.colorBg.$},f.createElement(Jw,null),f.createElement(j7,null),f.createElement(jg,null),f.createElement(j7,null),f.createElement(zG,null),a&&f.createElement(f.Fragment,null,f.createElement(j7,null),f.createElement(j$,null)))}var JS=n(368702);let Jk=(0,e4.eU)(!1),JI=(0,e4.eU)(e=>e(Jk)),JA=(0,e4.eU)(null,(e,t)=>{(0,JS.W)("left",()=>{t(JO)}),t(Jk,!0)}),JO=(0,e4.eU)(null,(e,t)=>{t(Jk,!1)}),JL=/^Page \d+$/;var JP=(e=>(e.FILE_LOADING="fileLoading",e.K_12="k12",e.FLAG="flag",e.READ_ONLY="readOnly",e.PERSONAL_DRAFT="personalDraft",e))(JP||{});function JD(){var e;let t=(0,af.q5)(),n=(0,EO.cT)(),a=(0,cC.sZ)();if(!t)return"fileLoading";if(!(0,y.kc)().figjam_pages_for_education){let n=!!(null==a?void 0:a.k12_google_org),l=!!(null==(e=t.team)?void 0:e.studentTeamAt);if(n||l)return"k12"}return(0,y.kc)().figjam_pages_creation?n?"readOnly":(0,le.Qy)(t)?"personalDraft":null:"flag"}var JR=(e=>(e.ADD_PAGE="addPage",e.VIEW_PAGES="viewPages",e))(JR||{});function JM({nonDividerPageCount:e,isDropdownOpen:t}){let n=JD(),a=(0,cm.nn)(),l=(0,n6.GS)(),r=a&&!JL.exec(a);if("fileLoading"===n)return null;if(e>1||r||t&&!l)return"viewPages";switch(n){case null:return"addPage";case"flag":case"readOnly":case"personalDraft":return"viewPages";case"k12":return null;default:(0,nm.xb)(n)}}function JF(){return null===JD()}function JB(){return null===JD()}let JU=(0,lf.hG)(lw.xM9);function JH({pagesList:e,scrollContainerRef:t}){let n=(0,cm.dh)(),a=(0,S.md)(FV.l7),l=(0,O.F)(e),r=(0,O.F)(!!a);(0,f.useLayoutEffect)(()=>{r.current||JG({pageId:n,pagesList:l.current,scrollContainerRef:t})},[n,t,l,r]),(0,f.useLayoutEffect)(()=>{a&&JG({pageId:a,pagesList:l.current,scrollContainerRef:t})},[a,t,l])}function JG({pageId:e,pagesList:t,scrollContainerRef:n}){let a=n.current;if(!a)return;let l=t.findIndex(t=>t.nodeId===e);if(-1===l)return;let r=l*JU,i=r+JU,o=a.getScrollTop(),s=o+a.getTrackHeight();r<o?a.scrollTo(r-JU/2):i>s&&a.scrollTo(o+(i-s)+JU/2)}function JV(e){let t=(0,e2.Xr)(JO),[n,a]=(0,f.useState)(!1),l=JF();return f.createElement("div",null,f.createElement(IJ.V,null,f.createElement(Js.w,{title:(0,eN.t)("fullscreen.pages_panel.pages"),onClose:t,showBottomBorder:n}),f.createElement(JK,{width:e.width,pagesList:e.pagesList,setIsScrolled:a},f.createElement(Fj,{isReadOnly:e.isReadOnly,pages:e.pagesList,shouldHighlightActivePage:!0,isComparingChanges:!1,onContextMenu:e.onPageContextMenu})),l&&f.createElement(JW,{recordingKey:"figjamPagesPanel"})))}function JK({width:e,pagesList:t,setIsScrolled:n,children:a}){let l=JF(),r=(0,f.useRef)(null);JH({pagesList:t,scrollContainerRef:r});let i=(0,f.useCallback)(e=>{n(e>0)},[n]);return f.createElement(i6.P,{horizontalScrollingDisabled:!0,width:e,onScroll:i,ref:r,innerClassName:nb()("pages_panel_ui2--scrollContainerInner---lutT",{"pages_panel_ui2--withBottomPadding--b4Z0j":!l})},a)}function JW({recordingKey:e}){return f.createElement("div",{className:"pages_panel_ui2--footerContainer--4Nk4z"},f.createElement(Jz,{recordingKey:(0,n_.Pt)(e,"addPage")}))}function Jz({recordingKey:e}){let t=(0,cm.rE)(),n=n_.rf(e,"click",()=>{t(null)});return f.createElement(so.tM,{className:nb()("pages_panel_ui2--secondaryButton--xllEl","pages_panel_ui2--flexGrow--22c55","pages_panel_ui2--withHover--iwz0G"),onClick:n},(0,eN.tx)("fullscreen_actions.new_page"))}function Jj(){let e=(0,EO.cT)(),t=(0,EO.n0)(),n=(0,e2.Xr)(FV.aN);(0,f.useEffect)(()=>{n(!0)},[n]);let a=F3({isReadOnly:e,pagesList:t,shouldShowDuplicateOption:JB()});return f.createElement(f.Fragment,null,f.createElement(JV,{isReadOnly:e,width:200,pagesList:t,onPageContextMenu:a}))}function JJ(){let e=(0,_.d4)(e=>e.mirror.appModel.showUi),t=(0,S.md)(JI),n=(0,e2.Xr)(JO);return(0,f.useEffect)(()=>n,[n]),t&&e?f.createElement("div",{key:"figjam-pages-sidebar",className:nb()("pages_sidebar_ui2--positioner--MStQb",nz.Dm)},f.createElement("div",{className:"pages_sidebar_ui2--panel--ZLyMB"},f.createElement(Jj,null))):null}function JY({children:e,hasHoverableBackground:t,onboardingKey:n}){return f.createElement("div",{className:nb()("floating_panel--container--3qp3k",{"floating_panel--hoverableBackground--h8B5i":t}),"data-onboarding-key":n},e)}function JX(){let e=(0,n6.GS)(),t=n_.Pt("toolbarView",lc.ec.recordingKey);return e?f.createElement(Jq,{recordingKey:t}):f.createElement(tr.jX,{recordingKey:t})}function Jq({recordingKey:e}){let t=(0,f.useRef)(null),n=(0,_.d4)(e=>(0,tl.Yh)(e.mirror.appModel,lc.ec.action)&&!!e.openFile),a=(0,_.d4)(e=>e.mirror.appModel.currentTool===lc.ec.tool),l=(0,ay.n6)(),r=sL.z4.getIsExtension();(0,f.useEffect)(()=>{!a&&t.current&&t.current===document.activeElement&&(0,ea.FT)()},[a,t]),(0,f.useEffect)(()=>{if(n&&a){let e=!0;return(0,JS.W)("right",()=>{e&&et.Y5.triggerAction("set-tool-default")}),()=>{e=!1}}},[n,a]);let i=!r&&l>0;return f.createElement(uz,{tooltip:{type:nx.Ib.LOOKUP,key:lc.ec.action,ariaLabel:(0,eN.t)(i?"fullscreen.accessibility.view_comments_with_unreads":"fullscreen.accessibility.view_comments")},isActive:a,onClick:function(e){var l;if(!n)return;let r=e.nativeEvent instanceof KeyboardEvent;a?(et.Y5.triggerAction("set-tool-default"),r&&(null==(l=t.current)||l.focus())):aC.VU.get(lc.ec.action,"toolbar")(e)},recordingKey:e,onboardingKey:lc.ec.onboardingKey,disabled:!n,dataTestId:lc.ec.action,ref:t},f.createElement("div",{className:nb()("figjam_comments_toolbar_item--iconContainer--4S5T1",{"figjam_comments_toolbar_item--withUnreadIndicator--JLSN4":i})},f.createElement("div",{className:"figjam_comments_toolbar_item--iconMask--a0fae"},f.createElement(nc.f,null))))}var JZ=n(932037);function JQ(){let[e,t]=(0,S.fp)(Yg),n=f.useCallback(()=>{e?t(!1):((0,JS.W)("right",()=>t(!1)),t(!0))},[e,t]);return(0,y.kc)().async_spotlight?f.createElement(uz,{onClick:n,tooltip:{type:nx.Ib.TEXT,text:(0,eN.t)("recordings.recordings")},isActive:e},f.createElement(a2.B,{svg:JZ.A})):null}var J$=n(293775),J0=n(125233);function J1(){let e=(0,n6.GS)(),t=(0,S.md)(mA.zS),n=(0,e2.Xr)(mA.bJ),a=(0,e2.Xr)(mA.tz),l=e?"right":"left",r=(0,y.kc)().figjam_generate_handbrake,i=r?(0,eN.t)("whiteboard.ai_modal.generate_handbrake"):(0,eN.t)("whiteboard.ai_modal.generate"),o=(0,_.d4)(e=>e.mirror.appModel.topLevelMode===ei.lyf.LAYOUT);(0,f.useEffect)(()=>{o||a()},[o,a]);let s={isActive:t===mA.Wl.TOP_BAR,onClick:()=>{t===mA.Wl.TOP_BAR?a():((0,JS.W)(l,a),n())},trackingProperties:{trackingDescriptor:ar.c.FIGJAM_AI_TOOLBAR_ITEM},onboardingKey:cb.bX,innerText:"AI Toolbar Entrypoint",disabled:r,dataTestId:"figjam-ai-toolbar-item",recordingKey:"figjam-ai-toolbar-item"};return e?f.createElement(uz,{tooltip:{type:nx.Ib.TEXT,text:i},...s},f.createElement(J$.C,null)):f.createElement(uV,{icon:J0.A,addLeftMargin:!0,tooltipText:i,...s})}let J2=e=>e.multiplayer.allUsers.filter((e,t,n)=>t===n.findIndex(t=>t.userID===e.userID)).length,J5="seen_figjam_meetings_panel_gleam",J4={duration:1500,fill:"none"};function J3(){return f.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"100%",height:"100%"}},f.createElement("g",{filter:"url(#filter0_d_3305_12330)"},f.createElement("path",{d:"M20.2469 10.6915L20.2471 10.6913C21.1037 9.81654 20.693 8.21534 19.3809 8.01578C19.3809 8.01577 19.3808 8.01576 19.3807 8.01575L14.8346 7.32381L12.7941 2.99403C12.2333 1.80375 10.5666 1.79999 10.0055 2.99476C10.0054 2.99498 10.0053 2.99521 10.0052 2.99543L7.96535 7.32381L3.41928 8.01575C3.41921 8.01576 3.41914 8.01577 3.41908 8.01578C2.107 8.21534 1.69633 9.81654 2.55291 10.6913L2.55308 10.6915L5.86693 14.0741L5.08327 18.8605C5.08326 18.8606 5.08325 18.8606 5.08324 18.8607C4.88746 20.0559 6.12574 21.1809 7.34457 20.5087L11.4 18.2756L15.4554 20.5087C15.4556 20.5088 15.4558 20.5088 15.456 20.5089C16.6746 21.1805 17.9125 20.0557 17.7168 18.8607C17.7167 18.8606 17.7167 18.8606 17.7167 18.8605L16.9331 14.0741L20.2469 10.6915Z",fill:"#FFC700",stroke:"white",strokeWidth:"1.8"}),f.createElement("path",{d:"M18.8131 12.5161C18.4636 11.4367 16.9364 11.4367 16.5869 12.5161L15.8361 14.8349L13.7375 15.7224C12.7851 16.1252 12.7851 17.4748 13.7375 17.8776L15.8361 18.7651L16.5869 21.0839C16.9364 22.1634 18.4636 22.1633 18.8131 21.0839L19.5639 18.7651L21.6625 17.8776C22.6149 17.4748 22.6149 16.1252 21.6625 15.7224L19.5639 14.8349L18.8131 12.5161Z",fill:"url(#paint0_linear_3305_12330)"}),f.createElement("path",{d:"M18.8131 12.5161C18.4636 11.4367 16.9364 11.4367 16.5869 12.5161L15.8361 14.8349L13.7375 15.7224C12.7851 16.1252 12.7851 17.4748 13.7375 17.8776L15.8361 18.7651L16.5869 21.0839C16.9364 22.1634 18.4636 22.1633 18.8131 21.0839L19.5639 18.7651L21.6625 17.8776C22.6149 17.4748 22.6149 16.1252 21.6625 15.7224L19.5639 14.8349L18.8131 12.5161Z",fill:"url(#paint1_linear_3305_12330)"}),f.createElement("path",{d:"M18.8131 12.5161C18.4636 11.4367 16.9364 11.4367 16.5869 12.5161L15.8361 14.8349L13.7375 15.7224C12.7851 16.1252 12.7851 17.4748 13.7375 17.8776L15.8361 18.7651L16.5869 21.0839C16.9364 22.1634 18.4636 22.1633 18.8131 21.0839L19.5639 18.7651L21.6625 17.8776C22.6149 17.4748 22.6149 16.1252 21.6625 15.7224L19.5639 14.8349L18.8131 12.5161Z",stroke:"white",strokeWidth:"1.8"})),f.createElement("defs",null,f.createElement("filter",{id:"filter0_d_3305_12330",x:"-1.5",y:"-1",width:"27",height:"27",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},f.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),f.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),f.createElement("feOffset",{dy:"0.5"}),f.createElement("feGaussianBlur",{stdDeviation:"0.75"}),f.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"}),f.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3305_12330"}),f.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3305_12330",result:"shape"})),f.createElement("linearGradient",{id:"paint0_linear_3305_12330",x1:"13.5",y1:"12",x2:"21.9",y2:"21.6",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"#F7C000"}),f.createElement("stop",{offset:"1",stopColor:"#E8B604"})),f.createElement("linearGradient",{id:"paint1_linear_3305_12330",x1:"21.9",y1:"21.6",x2:"13.5",y2:"12",gradientUnits:"userSpaceOnUse"},f.createElement("stop",{stopColor:"white",stopOpacity:"0"}),f.createElement("stop",{offset:"0.418743",stopColor:"white",stopOpacity:"0.15"}),f.createElement("stop",{offset:"0.504534",stopColor:"white",stopOpacity:"0.63"}),f.createElement("stop",{offset:"0.588015",stopColor:"white",stopOpacity:"0.15"}),f.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"}))))}let J6="meeting_tools_toolbar--withHover--r7Sks",J7="meeting_tools_toolbar--selected--Lt0iR",J8="meeting_tools_toolbar--hide--t1ZI-";function J9(){let e=(0,n6.GS)(),t=(0,S.md)(uM.Qs),n=(0,ps.qU)(),a=(0,ps.MR)(),l=(0,ps.II)(),[r]=z9(),{renderGleam:i}=function(e){let[t,n]=f.useState(!1),a=(0,_.d4)(J2),l=(0,eT.f)(J5),r=(0,_.wA)(),i=a>1&&!l;return f.useEffect(()=>{if(!i)return;let t=window.setTimeout(()=>{n(!0),r(j.b({[J5]:!0}))},(null==e?void 0:e.delay_ms)||1e4);return()=>clearTimeout(t)},[i,null==e?void 0:e.delay_ms,r]),{renderGleam:t}}({delay_ms:2e3}),o=f.useCallback(()=>{t.isOpen?n({source:ps.OO.MEETINGS_TOOLBAR}):a({source:ps.OO.MEETINGS_TOOLBAR})},[t,n,a]),s=function(){let e=(0,n6.GS)(),t=(0,ps.II)();if(0===t.length)return"ALL";let n=1===t.length&&t.includes(uM.sx.TIMER);return 1===t.length&&t.includes(uM.sx.VOTING)||2===t.length&&t.includes(uM.sx.VOTING)&&t.includes(uM.sx.TIMER)?"VOTE":e&&n?"NONE":"MUSIC"}(),c=function(){let e=(0,ps.II)(),t=(0,n6.GS)();return 0===e.length?t?jo.SECONDARY:jo.TERTIARY:e.includes(uM.sx.TIMER)&&e.includes(uM.sx.VOTING)?jo.SECONDARY:jo.DEFAULT}(),d=l.includes(uM.sx.TIMER)||0===l.length,u=l.includes(uM.sx.MUSIC),m=function(){let e=(0,ps.II)(),t=(0,Fq.C3)(),n=(0,_.d4)(e=>e.music.music),a=zt((null==n?void 0:n.selectedSongID)||"");return e.includes(uM.sx.VOTING)&&t?(0,jk.DG)(t):e.includes(uM.sx.MUSIC)&&1===e.length?null==a?void 0:a.title:void 0}(),p=f.useRef(null),g=f.useRef(null),h=f.useRef(null),E=f.useRef(null),y=f.useRef(null);!function(e,t,n,a,l,r,i){let[o,s]=f.useState([]);f.useLayoutEffect(()=>{let r={transform:"scale(1)",boxShadow:"0px 0px 0px 0px var(--color-border)"},o={backgroundColor:"var(--color-bg-figjam)"};i&&(o.borderColor="var(--color-bg-figjam)");let c=new KeyframeEffect(e.current,[{offset:0,...r},{offset:.2,...r},{offset:.4,transform:"scale(1.05)",boxShadow:"0px 2.5px 5px 0px var(--color-border)"},{offset:.5,...r},{offset:.6,transform:"scale(1.025)",boxShadow:"0px 1.25px 2.5px 0px var(--color-border)"},{offset:.8,...r},{offset:1,...r}],J4),d=new KeyframeEffect(l.current,[{offset:.4,...o},{offset:.62,...o},{offset:.77,backgroundColor:"var(--color-bg-secondary)"}],J4),u=new KeyframeEffect(t.current,[{offset:0,backgroundColor:"#959595"},{offset:.5,backgroundColor:"#959595"},{offset:1,backgroundColor:"var(--color-bg-figjam)"}],J4),m=new KeyframeEffect(a.current,[{offset:0,filter:"grayscale(80%)"},{offset:.5,filter:"grayscale(80%)"},{offset:1,filter:"grayscale(0%)"}],J4),p=new KeyframeEffect(n.current,i?[{offset:.4,color:"var(--color-text-onfigjam)"},{offset:.62,color:"var(--color-text-onfigjam)"}]:[{offset:.4,color:"var(--color-text-onfigjam-tertiary)"},{offset:.62,color:"var(--color-text-onfigjam-tertiary)"},{offset:.77,color:"var(--color-text-tertiary)"}],J4);s([i?void 0:c,u,p,m,d].filter(e=>!!e).map(e=>new Animation(e,document.timeline)))},[e,t,n,a,l,i]),function(e,t,n){let a=(0,v.ZC)(e),l=(0,S.md)(uM.Qs),r=(0,ps.II)(),i=l.isOpen||r.length>0;f.useEffect(()=>{i||(e&&!a&&t(),!e&&a&&n())},[e,t,n,a,r,i])}(r,f.useCallback(()=>{o.forEach(e=>{e.playbackRate=1,e.play()})},[o]),f.useCallback(()=>{o.forEach(e=>{e.playbackRate=-1,e.play()})},[o]))}(p,h,E,y,g,i,e);let b=function(e){let t=(0,S.md)(uM.Qs),n=(0,ps.II)();return!e&&!t.isOpen&&0===n.length}(i),C=(0,ps.$3)(),w=(0,jk.Av)(),T=e?t.isOpen||l.length>0:t.isOpen;return f.createElement("div",{ref:p,className:nb()("meeting_tools_toolbar--toolbarItemContainer--3HgdD",{"meeting_tools_toolbar--meetDeviceToolbarItemContainer--8R79s":(0,Co.eM)(),"meeting_tools_toolbar--hasVolumeControl--jaTZr":u})},f.createElement("button",{ref:g,className:nb()("meeting_tools_toolbar--toolbarItemButton--VBNmh",{[J7]:T,[J6]:!C}),onClick:n_.rf("meetingsPanelToolbar","click",o),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":w?(0,eN.t)("meetings_panel.toolbar_tooltip"):(0,eN.t)("meetings_panel.toolbar_tooltip.no_voting"),"aria-label":w?(0,eN.t)("meetings_panel.toolbar.aria_label"):(0,eN.t)("meetings_panel.toolbar.aria_label.no_voting"),"aria-pressed":T,"data-onboarding-key":"meeting-panel-button"},f.createElement(Ye,{icon:s,maskRef:h,starContainerRef:y,renderAsPreGleam:b,isUI3:e}),f.createElement("div",{className:nb()("meeting_tools_toolbar--textWrapper--eikYA text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",{[J7]:T})},m),f.createElement(Yt,{width:m&&d?8:0}),f.createElement("div",{className:nb()("meeting_tools_toolbar--minimizedTimerWrapper--adc47",{[J8]:!d})},l.includes(uM.sx.TIMER)?f.createElement(f.Fragment,null,f.createElement(jd,{isSelected:T,prominence:c,size:ji.XSMALL,withoutTimeShadow:!0,withoutFlashOnPause:!0,withoutUnderline:!0,timeDivRef:E,isInUI3Toolbar:e})):f.createElement(f.Fragment,null,f.createElement(ju,{isSelected:T,prominence:c,size:ji.XSMALL,withoutTimeShadow:!0,withoutUnderline:!0,timeDivRef:E,timeInSeconds:(0,po.RE)(r),isInUI3Toolbar:e})))),l.includes(uM.sx.MUSIC)&&f.createElement("div",{className:nb()("meeting_tools_toolbar--volumeControlContainer--gXf-m",{[J7]:T,[J8]:!l.includes(uM.sx.MUSIC),[J6]:!C})},f.createElement(JC,{volumeJustification:Jm.CENTER,isMinimized:!0,iconColor:T?e?Jh.FIGJAM:Jh.ON_FIGJAM:Jh.DEFAULT,blockButtonTooltip:!0,sliderVisibilitySetting:t.isOpen||C?Jb.NEVER:Jb.DEFAULT,muteOnTouch:C,size:e?Jv.LARGE:Jv.DEFAULT})))}function Ye({icon:e,maskRef:t,starContainerRef:n,renderAsPreGleam:a,isUI3:l}){return"NONE"===e?null:f.createElement("div",{className:nb()("meeting_tools_toolbar--iconContainer--n2hs5",{"meeting_tools_toolbar--single--h9cHX":"ALL"!==e})},f.createElement("div",{className:nb()("meeting_tools_toolbar--recordIcon--D6vfx meeting_tools_toolbar--icon--EVBBt",{[J8]:"MUSIC"!==e&&"ALL"!==e})},f.createElement(zy,{size:"xsmall",maskAlbumArtWhenPaused:!0,maskRef:t,useGrayMask:a,useLightShadow:l})),f.createElement("div",{className:nb()("meeting_tools_toolbar--starIcon--37MdY meeting_tools_toolbar--icon--EVBBt",{"meeting_tools_toolbar--leftAlign--G1Vob":"VOTE"===e,[J8]:"VOTE"!==e&&"ALL"!==e})},f.createElement("div",{ref:n,className:nb()("meeting_tools_toolbar--starContainer--4lbzy",{"meeting_tools_toolbar--grayedOut--deQf-":a})},f.createElement(J3,null))))}function Yt(e){return f.createElement("div",{style:{width:e.width||0}})}var Yn=(e=>(e.ALL="ALL",e.MUSIC="MUSIC",e.VOTE="VOTE",e.NONE="NONE",e))(Yn||{});let Ya="figjam_right_panel--container--z4q5E",Yl="figjam_right_panel--controls--1DAKo",Yr="figjam_right_panel--leftSection--wZTVw",Yi="figjam_right_panel--middleSection--xMAsd";function Yo(){let e=(0,_.wA)(),t=(0,af.q5)(),n=(0,nT.U)(),a=(0,_.d4)(e=>e.multiplayer),l=(0,Kw.dR)(),r=(0,ew.iZ)(),i=f.useMemo(()=>a.allUsers.find(e=>e.sessionID===a.sessionID)||null,[a.allUsers,a.sessionID]),o=(0,KC.B4)(),s=(0,eb.aV)(),c=(0,_.d4)(e=>e.mirror.appModel.topLevelMode===ei.lyf.HISTORY),d=!(0,B.q8)()&&(0,uK.Uy)(),u=C.Ay.isMeetDevice,m=(0,y.kc)().async_spotlight&&!u,p=(0,tC.DG)((null==t?void 0:t.key)||"").enabled,g=f.useCallback(t=>{(0,Kx.Lx)(t,null==i?void 0:i.sessionID,e,!1,a,l,o)},[null==i?void 0:i.sessionID,e,a,l,o]),h=(0,nW.U1)();return s?f.createElement("div",{className:Ya},f.createElement(JY,{hasHoverableBackground:!1},f.createElement("div",{className:Yl},f.createElement("div",{className:Yr},f.createElement(Yc,null)),f.createElement("div",{className:Yi},f.createElement(Yd,null),f.createElement(Yd,null),f.createElement(Yd,null),f.createElement(Yu,null),!m&&f.createElement(Yd,null)),f.createElement(Ym,null)))):f.createElement(IJ.V,{ref:h,className:nb()(Ya,nz.Dm),"data-cancel-insertable-resource-drag-and-drop":!0},f.createElement(JY,{hasHoverableBackground:!1,onboardingKey:c3},f.createElement("div",{className:Yl},f.createElement("div",{className:Yr},f.createElement(i8.sK,{isUI3:!0}),a&&t&&i&&f.createElement(Kx.v7,{dropdownShown:n,multiplayer:a,currentUser:i,onUserClick:g})),!c&&f.createElement("div",{className:Yi},d&&f.createElement(J1,null),f.createElement(uY,null),!u&&f.createElement(JX,null),f.createElement(J9,null),m&&f.createElement(JQ,null)),t&&f.createElement(KN.w,{user:r,editingFile:t,isFileInWorkshop:p}),!r&&!u&&f.createElement(tr.tO,null))))}function Ys({width:e,borderRadius:t="medium"}){return f.createElement("div",{className:"figjam_right_panel--loadingPlaceholder--Z4Q63",style:{width:e,borderRadius:"full"===t?"var(--radius-full)":"var(--radius-medium)",visibility:"hidden"}},f.createElement(vs._b,null))}function Yc(){return f.createElement("div",{className:"figjam_right_panel--multiplayerPlaceholderContainer--ZLhPf"},f.createElement(Ys,{width:40,borderRadius:"full"}))}function Yd(){return f.createElement(Ys,{width:32})}function Yu(){return f.createElement(Ys,{width:90})}function Ym(){return f.createElement(Ys,{width:55})}let Yp="whiteboard_ui--leftSidebar--WE2SD whiteboard_ui--figjamModalSidebar--TXgbQ whiteboard_ui--sidebarBase--2SwnS",Yf="whiteboard_ui--uiHidden--Hsyad",Y_="whiteboard_ui--stackedContainer--2mtV9",Yg=(0,e4.eU)(!1),Yh=(0,lf.jz)(lw.uj0),YE=f.memo(function(){let e=(0,EG.Vi)(),t=(0,_.d4)(e=>e.mirror.appModel.topLevelMode===l8.lyf.HISTORY),n=(0,eb.p8)("showUi"),a=(0,n6.GS)();(function(){let e=(0,ta.Kx)(),t=(0,_.d4)(e=>e.timer.modalState),n=(0,S.md)(uM.Qs);f.useEffect(()=>{(null==e?void 0:e.updateTimerModalState)&&e.updateTimerModalState(n.isOpen?"open":"closed")},[e,t,n.isOpen]);let a=(0,_.d4)(e=>e.timer.time);f.useEffect(()=>{(null==e?void 0:e.updateTimerTime)&&a&&e.updateTimerTime(a)},[e,a])})(),(0,Wj.M)(),function(){let e=(0,e2.Xr)(uM.Qs);f.useEffect(()=>()=>{e({type:"CLOSE"})},[e])}();let l=(0,ta.Kx)(),r=n&&!(null==l?void 0:l.shouldOptimizeForIpadApp)&&e;return f.createElement(a?Yy:Yv,{showUi:n,inVersionHistory:t,isCommentsPanelOpen:r})});function Yv({showUi:e,inVersionHistory:t,isCommentsPanelOpen:n}){let a=function(){let e=(0,_.d4)(e=>e.universalInsertModal.pinned===r8.t.PINNED_AND_DOCKED_LEFT),t=f.useCallback(()=>{let t=e?W5:W2;return window.innerWidth<t?14+W4+24:14},[e]),[n,a]=f.useState(t);return f.useEffect(()=>{a(t())},[t]),f.useLayoutEffect(()=>{let e=(0,eu.s)(()=>{a(t())});return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),e.cancel()}},[t]),n}(),l=(0,l9.Lk)(),r=(0,y.kc)().figjam_pages_in_figjam,i=(0,po.FR)(),o=(0,S.md)(uM.Qs).isOpen,s=(0,S.md)(iE);if(t)return f.createElement(f.Fragment,null,e&&f.createElement(f.Fragment,null,f.createElement("div",{className:nb()(Yp,nz.Dm),style:{bottom:a}},r&&f.createElement(JJ,null)),f.createElement(W3,{className:"whiteboard_ui--versionHistoryRightSidebar--7wtYE whiteboard_ui--rightSidebar--CJHYf whiteboard_ui--figjamModalSidebar--TXgbQ whiteboard_ui--sidebarBase--2SwnS",style:{bottom:a}},f.createElement(Tj.yU,null))),f.createElement(Yw,{isTopToolbarShowing:e,isRightSidebarShowing:e},f.createElement(WY,null)));let c=!!e&&(!!n||!i&&!!o||!!s);return f.createElement(f.Fragment,null,f.createElement("div",{className:nb()(Yp,nz.Dm,{[Yf]:!e}),style:{bottom:a}},r&&f.createElement(JJ,null),i&&f.createElement(JT,null)),f.createElement("div",{className:nb()("whiteboard_ui--rightSidebar--CJHYf whiteboard_ui--figjamModalSidebar--TXgbQ whiteboard_ui--sidebarBase--2SwnS",{[Yf]:!e}),style:{bottom:a,right:n?Yh+16:16}},f.createElement("div",{className:nb()(Y_,nz.Dm)},l&&f.createElement(oZ,null),!i&&f.createElement(JT,null))),n&&f.createElement("div",{className:"whiteboard_ui--commentsContainer--HLR1i"},f.createElement(WQ.L,{showSidebar:!0,scrollable:!1},f.createElement(Bn.B,{hidePageName:!0,hideResolve:!1,onCloseButton:()=>ei.glU.triggerActionInUserEditScope("set-tool-default",null)}))),f.createElement(Yw,{isTopToolbarShowing:e,isRightSidebarShowing:c},f.createElement(WY,null)))}function Yy({showUi:e,inVersionHistory:t,isCommentsPanelOpen:n}){let a=(0,S.md)(uM.Qs).isOpen,l=(0,S.md)(mA.zS)===mA.Wl.TOP_BAR,r=(0,S.md)(Yg),i=(0,S.md)(iE),o=(0,aN.J2)(ei.Ez5.uiState().showCanvasSearch),s=(0,f.useRef)(null),[c,d]=f.useState(null),u=function(e){var t,n;let a=(0,tt.Yk)(),l=(0,ti.Op)(),r=null==(n=null==(t=(0,uq.C)())?void 0:t.bottomRightToolsNode)?void 0:n.getBoundingClientRect(),i=null==e?void 0:e.getBoundingClientRect();return l&&i&&r?l.right+W0>r.left?W1({dltBottomOffset:a,collidesWithDLT:!0,collidesWithTools:!0}):l.right+W0>i.left?W1({dltBottomOffset:a,collidesWithDLT:!0,collidesWithTools:!1}):W1({dltBottomOffset:a,collidesWithDLT:!1,collidesWithTools:!0}):0}(c);f.useLayoutEffect(()=>{var e;d(null==(e=s.current)?void 0:e.lastElementChild)},[s,n,a,l,r,i,t,o]);let m=t?e?f.createElement(YC,null):null:f.createElement(Yb,{isCommentsPanelOpen:n});return f.createElement("div",{className:"whiteboard_ui--rightSidebarUI3--9Xzv3",style:{bottom:u}},f.createElement("div",{ref:s,className:nb()(Y_,nz.Dm)},e&&f.createElement(Yo,null),f.createElement(WY,null),m))}function Yb({isCommentsPanelOpen:e}){let t=(0,l9.Lk)(),[n,a]=(0,S.fp)(Yg);return f.createElement(f.Fragment,null,t&&f.createElement(oZ,null),f.createElement(JT,null),(0,y.kc)().async_spotlight&&n&&f.createElement(WZ.h,{onClose:()=>a(!1)}),f.createElement(tf.fh,null),e&&f.createElement("div",{className:"whiteboard_ui--commentsContainerUI3--0VMH4"},f.createElement(W3,null,f.createElement(Bn.B,{hidePageName:!0,hideResolve:!1,onCloseButton:()=>ei.glU.triggerActionInUserEditScope("set-tool-default",null)}))))}function YC(){let e=(0,nW.U1)();return f.createElement(W3,{ref:e},f.createElement(Tj.yU,{isUI3:!0}))}function Yw({isTopToolbarShowing:e,isRightSidebarShowing:t,children:n}){return f.createElement("div",{className:nb()("whiteboard_ui--searchContainerUI2--OYScK",{"whiteboard_ui--withTopToolbar---Orkn":e,"whiteboard_ui--withRightSidebar--6yF6U":t})},n)}var YT=n(934976);function Yx(){var e;let t=(0,n6.GS)(),{isShowing:n,complete:a,show:l}=(0,n7.e)({overlay:an.N5c,priority:n8.N.SECONDARY_MODAL}),r=(0,_.wA)(),i=(0,eb.aV)(),o=!!(0,eT.f)("ui_kits_intro_tooltip"),s=!!(0,eT.f)("seen_explore_ui_kits_blue_tooltip"),{hasAnyUiKit:c}=(0,xK.I7)(),d=(0,S.md)(OU.Cl),u=(0,dt.jO)(),m=(0,Fg.t)(),p=null==(e=(0,af.q5)())?void 0:e.canEdit,g=(0,_.d4)(e=>e.leftPanel.activeTab===ei.xae.LAYERS);return(f.useEffect(()=>{!p||!c||d||o||s||!u||i||m||!g||n||l()},[l,p,c,o,s,u,i,m,n,d,g]),f.useEffect(()=>{!g&&n&&a()},[g,n,a]),n)?f.createElement(sH.X,{isShowing:n,title:(0,eN.tx)("rcs.ui_kits.jump_start_your_designs_with_ui_kits"),description:(0,eN.tx)("rcs.ui_kits.grab_pre_built_ui",{strongAssets:f.createElement("strong",{style:{display:"contents"}},(0,eN.tx)("design_systems.assets_panel.assets"))}),primaryCta:{label:(0,eN.tx)("rcs.presets_baseline.try_it"),type:"button",onClick:()=>{r(K.FP({tab:ei.xae.ASSETS})),a()},ctaTrackingDescriptor:ar.c.PRESETS_TRY_IT},position:t?sG.Q.UI3_EDITOR_TOP_LEFT:sG.Q.EDITOR_TOP_LEFT,trackingContextName:"UI Kits Intro Tooltip",userFlagOnShow:"ui_kits_intro_tooltip",onClose:()=>{r(j.b({seen_explore_ui_kits_blue_tooltip:!0})),a()}}):null}var YN=n(716253),YS=n(621945),Yk=n(228739),YI=n(302717),YA=n(545164),YO=n(992271),YL=n(155300),YP=n(94500),YD=n(816660),YR=n(765165),YM=n(914205);let YF="hit-target-resize";function YB(e){var t;let n=null==(t=YO.hY[e.devicePresetIdentifier].inlinePreviewInfo)?void 0:t.hitTargetSvgUrl,[a,l]=f.useState(null);(0,f.useEffect)(()=>{fetch(n).then(e=>e.text()).then(e=>l(e)).catch(()=>console.warn("Failed to fetch hit target SVG. Falling back to rectangular resize boundary."))},[n]);let r=f.useMemo(()=>a?(0,a2.V)(a):null,[a]);return null!==r?f.createElement(YU,{...e,hitTargetSvg:r}):f.createElement(YR.K,{...e})}function YU({resizeTo:e,getCurrentContainerBounds:t,lockAspectRatio:n,isResizing:a,setIsResizing:l,onResizeEnd:r,setResizeDirections:i,devicePresetIdentifier:o,isDeviceRotatedCCW:s,hitTargetSvg:c,hidden:d,recordingKey:u}){let m=f.useCallback(()=>{let e=t(),n=(16/((s?e.bottom-e.top:e.right-e.left)/YO.hY[o].imageSize.x)).toFixed(2);document.querySelectorAll(`[id^=${YF}]`).forEach(e=>e.setAttribute("stroke-width",`${n}`))},[o,s,t]);(0,f.useEffect)(()=>{m()},[m]);let p=f.useCallback(()=>{m(),null==r||r()},[r,m]),{startResizing:_}=(0,YR.Q)({resizeTo:e,getCurrentContainerBounds:t,isResizing:a,setIsResizing:l,setResizeDirections:i,onResizeEnd:p,lockAspectRatio:n,hidden:d,recordingKey:u}),g=f.useRef(null),h=f.useRef(null),E=f.useMemo(()=>(0,YO.qt)(o)===YO.bq.WATCH,[o]),v=f.useCallback(e=>{let t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;return E?YG({x:n,y:a},t):YH({x:n,y:a},t)},[E]),y=n_.rf(u,"mousedown",f.useCallback(e=>{e.stopPropagation(),e.preventDefault(),_(v(e),{x:e.clientX,y:e.clientY})},[v,_]),{recordMetadata:e=>{let t=e.currentTarget;return{clientX:e.clientX,clientY:e.clientY,svgElementId:t.id}},playbackMetadata:e=>({currentTarget:document.querySelector(`#${e.svgElementId}`),clientX:e.clientX,clientY:e.clientY})}),b=n_.rf(n_.Pt(u,"deviceFrameResizeTarget"),"mousemove",f.useCallback(e=>{if(a)return n_.aH;e.stopPropagation(),e.preventDefault();let t=v(e),n=e.currentTarget;h.current&&n.classList.remove(h.current);let l=(0,YD.as)(t);l&&n.classList.add(l),h.current=l},[v,a]),{recordMetadata:e=>{let t=e.currentTarget;return{clientX:e.clientX,clientY:e.clientY,svgElementId:t.id}},playbackMetadata:e=>({currentTarget:document.querySelector(`#${e.svgElementId}`),clientX:e.clientX,clientY:e.clientY})}),C=f.useCallback(e=>{e.onmousemove=b,e.onmousedown=y},[y,b]);return((0,f.useEffect)(()=>{document.querySelectorAll(`[id^=${YF}]`).forEach(e=>C(e))},[o,C]),d)?null:s?(()=>{let e=YO.hY[o].imageSize,t=e.x/e.y;return f.createElement("div",null,f.createElement(a2.B,{svg:c,svgClassName:nb()(YM.Q0,YM._d,YM.iZ),svgWidth:`${100*t}%`,ref:g,useOriginalSrcFills_DEPRECATED:!0}))})():f.createElement("div",null,f.createElement(a2.B,{svg:c,svgClassName:YM.iZ,ref:g,useOriginalSrcFills_DEPRECATED:!0}))}let YH=(e,t)=>{let{x:n,y:a}=e,l=.1*Math.min(t.width,t.height),r=[];return a<l?r.push(YD.OP.TOP):a>t.height-l&&r.push(YD.OP.BOTTOM),n<l?r.push(YD.OP.LEFT):n>t.width-l&&r.push(YD.OP.RIGHT),r},YG=(e,t)=>{let{x:n,y:a}=e,l=.1*t.width;if(a<l)return[YD.OP.TOP];if(a>t.height-l)return[YD.OP.BOTTOM];if(n<l)return[YD.OP.LEFT];if(n>t.width-l)return[YD.OP.RIGHT];let r=[];return a<t.height/2?r.push(YD.OP.TOP):r.push(YD.OP.BOTTOM),n<t.width/2?r.push(YD.OP.LEFT):r.push(YD.OP.RIGHT),r};var YV=n(223556),YK=n(705940),YW=n(744108),Yz=n(523931),Yj=n(39004),YJ=n(717682),YY=n(885722),YX=n(323322),Yq=n(479991),YZ=n(503618),YQ=n(844076),Y$=n(122975);let Y0={x:600,y:600},Y1="inlinePreviewModal",Y2=e=>{let t=(0,lb.MG)({subscribeToUpdates_expensive:!0}),n=(0,lb.TZ)({subscribeToUpdates_expensive:!0}),a=(0,EO.GQ)()+YN.gN;return(0,f.useMemo)(()=>e?new r4.Mi(t+a+YN.wR,n+YN.gN):new r4.Mi(t+YN.wR,n+YN.wR),[e,t,n,a])},Y5=f.memo(function({pageId:e,viewerControl:t}){let[{previewKeyForErrorBoundary:n},a]=(0,S.fp)(t.stateAtom);return f.createElement(l7.tH,{key:n,boundaryKey:"InlinePreviewModal",fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING,onError:()=>{if((0,Z.sx)("inline_preview_crashed",{},{forwardToDatadog:!0}),a({type:"HANDLE_PREVIEW_CRASHED"}),(0,aR.Lg)()||(0,aR.nl)()||(0,y.b5)())throw Error("Inline preview crashed")}},f.createElement(Y4,{pageId:e,viewerControl:t}))}),Y4=f.memo(function({pageId:e,viewerControl:t}){var n,a;let l=f.useRef(null),r=(0,n6.GS)(),i=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),o=(0,f.useRef)(!1),[{currentPresentedNode:s,navigateBackwardEnabled:c,navigateForwardEnabled:d,modalStatus:u,sizeInfo:m,showDeviceFrameEnabled:p,scalingInfo:g},h]=(0,S.fp)(t.stateAtom),E=(0,_.wA)(),y=(0,eb.eY)(),b=(0,f.useMemo)(()=>u===WA.b.OPEN,[u]),C=(null==m?void 0:m.initialViewerSize)??Y0,w=(0,v.ZC)(C),T=Y2(r),[x,N]=f.useState(T),[k,I]=f.useState(C.x),[A,O]=f.useState(C.y+YD.uF),L=(null==(n=lE.q.instance.getCurrentPage())?void 0:n.prototypeDevice)||null,P=null==L?void 0:L.presetIdentifier,D=!!P&&(0,YO.L_)(P),R=b&&D&&p,{showing:M}=(0,nT.B)(t.overflowDropdownType),F=(0,fL.Z)(),B=(0,aN.J2)(ei.Ez5.singleSlideView().isInSingleSlideView),[U,H]=f.useState(!1),G=f.useCallback(()=>{H(!0),et.Y5.triggerAction("inline-preview-iframe-focus-state-changed",{isFocused:!0})},[H]),V=(0,tu.sO)(),K=U||M?Yz.cD:Yz.Xt,W=f.useCallback(e=>{E((0,YP.Zh)({name:"prototype.close_inline_viewer",params:{source:e}})),h({type:"CLOSE_INLINE_PREVIEW"})},[E,h]),z=f.useCallback(()=>((0,nm.vA)(!!A),(0,nm.vA)(!!k),{x:k,y:A-YD.uF}),[A,k]),j=f.useCallback(e=>{I(e.x),O(e.y+YD.uF)},[I,O]),J=f.useCallback(()=>{let e=z();if(!R)return e;(0,nm.B1)(P,"devicePresetIdentifier must be set");let t=L.rotation,{framePresetSize:n,idealDeviceSize:a}=(0,YV.is)(P,t);return(0,YV.BX)(e,n,a)},[P,z,R,null==L?void 0:L.rotation]);f.useEffect(()=>{o.current||N(T)},[T]),f.useEffect(()=>{h({type:"SET_CURRENT_VIEWER_SIZE_CALLBACK",payload:J})},[h,J]);let Y=f.useMemo(()=>{var e;return(null==(e=null==m?void 0:m.breakpoint)?void 0:e.type)!==YN.l5.DEVICE},[m]),X=f.useCallback(e=>{if(!Y)return;let t=J();(0,nm.vA)(!!s,"currentPresentedNode must be set");let n=y.get(s);(0,nm.vA)(!!n,"expected selectedNode to exist");let a=(0,YN.HS)(y,n),l=(0,YN.hX)(t,n,a,y);(0,nm.vA)(l.breakpoint.type!==YN.l5.DEVICE,"fit to aspect ratio not allowed for device"),j(l.initialViewerSize),E((0,YP.Zh)({name:"prototype.resize_to_fit_aspect_ratio",params:{source:e}}))},[Y,J,s,y,j,E]),q=()=>{if(!s)return!1;let e=!1;if(R){let{idealDeviceSize:t}=(0,YV.is)(P,L.rotation);e=t.x>=YN.Fe&&t.y>=YN.Sq}else{let t=y.get(s);if(!t)return!1;let n=(0,YN.HS)(y,t),a=(0,YN.nw)(n,t);e=a.x>=YN.Fe&&a.y>=YN.Sq}return e},Z=f.useCallback(e=>{h({type:"SET_PREVIEW_IS_RESPONSIVE",payload:e})},[h]),Q=f.useCallback(()=>{h({type:"RESIZE_MODAL",payload:{sceneGraph:y}})},[h,y]),$=f.useCallback(e=>{if(e){let t=(0,lb.QZ)({nodeId:e,alwaysPan:!0,maxScale:.6});V?u===WA.b.OPEN&&(F(t),B&&ei.Ez5.singleSlideView().focusSlideInSingleSlideView(e,!0)):F(t)}},[F,V,B,u]);f.useEffect(()=>{h({type:"SET_SCROLL_CALLBACK",payload:$})},[h,$]);let ee=f.useCallback(e=>{j({x:e.x,y:e.y+(0,lf.jz)(lw.m8f)})},[j]),en=f.useMemo(()=>{var e;if(R&&(null==(e=YO.hY[P].inlinePreviewInfo)?void 0:e.hitTargetSvgUrl))return function(e){let t=L.rotation===ei.xOL.CCW_90;return f.createElement(YB,{...e,mirrorResizeHorizontally:!1,devicePresetIdentifier:P,isDeviceRotatedCCW:t})}},[R,P,null==L?void 0:L.rotation]),ea=f.useCallback(e=>{(0,nm.vA)((null==m?void 0:m.breakpoint.type)===YN.l5.DEVICE,"device must be set to toggle device frame"),(0,nm.vA)(!!L,"prototypeDevice must be set to toggle device frame");let t=J();if(e){let e=L.presetIdentifier,{idealDeviceSize:n,framePresetSize:a}=(0,YV.is)(e,L.rotation);ee((0,YV.Ho)(t,a,n))}else j(t)},[null==m?void 0:m.breakpoint.type,L,J,j,ee]);(0,nm.vA)(!b||null!==m,"sizeInfo should always be set when open"),f.useLayoutEffect(()=>{if(w!==C){if(R){let{idealDeviceSize:e,framePresetSize:t}=(0,YV.is)(P,L.rotation);ee((0,YV.Ho)(C,t,e))}else j(C)}},[C,w,P,R,L,ee,j]),f.useEffect(()=>{P&&(0,YO.L_)(P)&&(0,YO.Gn)(P)},[P]);let el=f.useCallback(()=>{let e=z(),{width:t,height:n}=et.Y5.getViewportInfo(),a=e.x/t,l=e.y/n;E((0,YP.Zh)({name:"prototype.inline_preview_manually_resized",params:{isDeviceFrameShown:R,horizontalCoverage:a,verticalCoverage:l}}))},[E,z,R]),er=(0,f.useMemo)(()=>{let e={height:"100%"};return r&&!R?{...e,borderBottomLeftRadius:"var(--radius-small)",borderBottomRightRadius:"var(--radius-small)"}:e},[R,r]);if(u===WA.b.NOT_LOADED)return null;let eo=nb()(V?Yz.CN:Yz.aq,R?null:K),es=nb()(R?[K,YM.k9]:null,{[Yz.FO]:V}),{x:ec,y:ed}=(0,YN.ut)(lE.q.instance,!0),eu=!b||!(null==m?void 0:m.initialViewerSize);return f.createElement(ae.BL,{position:x,setPosition:N,width:k,setWidth:I,height:A,setHeight:O,recordingKey:Y1,ignoreCloseShortcut:!b,title:f.createElement(Y6,{navigateBackwardEnabled:c,navigateForwardEnabled:d,width:k,onBack:t.onBack,onForward:t.onForward,onRestart:t.onRestart}),tabIndex:0,onFocus:()=>{t.onFocus()||G()},onEdgeDoubleClick:()=>X("double_click"),onResize:Q,onResizeEnd:el,onClose:()=>{W("modal")},onDragStart:()=>o.current=!0,hidden:eu,frameStyle:er,transparentContentBackground:R,containerClassName:eo,containerFillsPage:V,headerClassName:es,minHeight:ed,minWidth:ec,preventKeyboardFocus:!0,allowResizeHeight:U&&!V,allowResizeWidth:U&&!V,disableDragging:V,alwaysEnsureHeaderModalOnScreen:!0,allowPartialHeaderOnScreen:!0,makeContentPixelPerfect:!0,dragHeaderOnly:!0,lockAspectRatio:(null==(a=null==m?void 0:m.breakpoint)?void 0:a.type)===YN.l5.DEVICE,customButton:f.createElement(Y3,{viewerControl:t,allowSizeReset:Y,allowActualSizeReset:q(),isPrototypeDeviceSet:!!L&&L.type!==ei.XQq.NONE,isPreviewFittedToAspectRatio:()=>{if(!s||!Y)return!1;let e=y.get(s);if(!e)return!1;let t=J(),n=(0,YN.HS)(y,e),a=(0,YN.hX)(t,e,n,y),l=t.x/t.y,r=a.initialViewerSize.x/a.initialViewerSize.y;return(0,YL.o)(l,r)},isDeviceSupportedForPreview:D,openFileKey:i,showOverflow:!V,showFullscreenButton:V,iframeRef:l,resizeToFitAspectRatio:()=>X("overflow_menu"),scrollToNode:$,resizeToActualSize:()=>{if(!q())return;(0,nm.vA)(!!s),(0,nm.vA)(!!m);let e=y.get(s);(0,nm.vA)(!!e),E((0,YP.Zh)({name:"prototype.resize_to_actual_size"}));let t=R?(0,YV.is)(P,L.rotation).idealDeviceSize:(0,YN.nw)(m.breakpoint,e),n=(e,t)=>{j(e),N(new r4.Mi(t.x,t.y))},a=z();(0,YN.UB)(t,E,()=>n(a,x)),j(t)},isPreviewShownAtActualSize:()=>{if(!s||!l.current)return!1;let e=y.get(s);if(!e||!(null==m?void 0:m.breakpoint))return!1;let t=R?(0,YV.is)(P,L.rotation).framePresetSize:(0,YN.nw)(m.breakpoint,e),n=J();return(0,YL.o)(t.x,n.x,1e-4)&&(0,YL.o)(t.y,n.y,1e-4)},setPreviewIsResponsive:Z,isPreviewResponsive:"responsive"===g.contentScalingMode,closeInlinePreview:W,onToggleShowDeviceFrame:ea,width:k}),ResizeTargetComponent:en},(()=>{let n=t.ViewerComponent;return f.createElement(YK.H,{initialViewerSize:C,isDeviceFrameShown:R},f.createElement(n,{ref:l,key:e,pageId:e,openFileKey:i,closeInlinePreview:W,isOpen:b,iframeFocused:U,setIframeFocused:H,onIframeFocus:G}))})())});function Y3({allowSizeReset:e,allowActualSizeReset:t,isPrototypeDeviceSet:n,isDeviceSupportedForPreview:a,openFileKey:l,resizeToFitAspectRatio:r,scrollToNode:i,showOverflow:o,showFullscreenButton:s,iframeRef:c,resizeToActualSize:d,isPreviewShownAtActualSize:u,setPreviewIsResponsive:m,isPreviewResponsive:p,closeInlinePreview:g,onToggleShowDeviceFrame:h,width:E,isPreviewFittedToAspectRatio:v,viewerControl:y}){let b=(0,_.wA)(),C=f.useRef(null),[{currentPresentedNode:w,targetFrameFollowingEnabled:T,showDeviceFrameEnabled:x},N]=(0,S.fp)(y.stateAtom),{showing:k,toggle:I}=(0,nT.B)(y.overflowDropdownType),A=f.useCallback(()=>{if(!l)throw Error("Expected openFileKey to exist");if(!w)throw Error("openPrototypeInNewTab called without currentPresentedNode");b(YA.F({fileKey:l,nodeId:w,startingPointNodeId:ei.X3B.getActivePrototypeStartingPointNodeIdOnCurrentPage(),source:"inline_viewer",scalingInfo:p?n?{contentScalingMode:"responsive",viewportScalingMode:"scale-down"}:{contentScalingMode:"responsive",viewportScalingMode:"contain"}:void 0})),g("open_in_new_tab")},[l,w,b,p,n,g]),O=f.useCallback(()=>{let e=!T;b((0,YP.Zh)({name:"prototype.toggle_follow_previewed_frame",params:{enabled:e}})),N({type:"TOGGLE_TARGET_FRAME_FOLLOWING"}),i(w)},[b,N,T,i,w]),L=f.useCallback(()=>{let e=!x;b((0,YP.Zh)({name:"prototype.toggle_show_device_frame",params:{enabled:e,location:"preview"}})),N({type:"TOGGLE_SHOW_DEVICE_FRAME"}),h(e)},[b,x,h,N]),P=f.useCallback(()=>{let l={displayText:(0,eN.t)("inline_preview.overflow_menu.responsive"),name:"responsive",recordingKey:"responsiveButton",callback:()=>{m(!0)},isChecked:p,icon:f.createElement(ry.U,{svg:YQ.A,className:YW.Fp},f.createElement(YS.V,null)),unsetStrokeOnActiveOption:!0},i={displayText:a?(0,eN.t)("inline_preview.overflow_menu.fixed"):(0,eN.t)("inline_preview.overflow_menu.fit_width"),name:a?"fixed":"fit-width",isChecked:!p,recordingKey:"fixedButton",icon:a?f.createElement(ry.U,{svg:Yq.A,className:YW.Fp},f.createElement(Yk.O,null)):f.createElement(ry.U,{svg:YZ.A,className:YW.Fp},f.createElement(YI.v,null)),callback:()=>{m(!1)},unsetStrokeOnActiveOption:!0},o={displayText:(0,eN.t)("inline_preview.overflow_menu.follow_prototype"),name:"follow-active-frame",recordingKey:"followActiveFrame",callback:O,isChecked:T},s={displayText:a?(0,eN.t)("inline_preview.overflow_menu.resize_device_100_percent"):(0,eN.t)("inline_preview.overflow_menu.resize_window_100_percent"),name:"actual-size",recordingKey:"actualSizeButton",callback:d,disabled:!t,isChecked:u(),"data-onboarding-key":"resize-to-actual-size"},c={displayText:(0,eN.t)("inline_preview.overflow_menu.reset_aspect_ratio"),name:"reset-size",recordingKey:"resetSizeButton",callback:r,isChecked:v(),disabled:!e,hidden:n},_={displayText:(0,eN.t)("inline_preview.overflow_menu.show_device_frame"),name:"show-device-frame",recordingKey:"showDeviceFrame",callback:L,isChecked:x&&a,disabled:!a,hidden:!n};return[a?l:i,a?i:l,{separator:!0,displayText:""},o,s,c,_,{displayText:(0,eN.t)("inline_preview.new_tab"),recordingKey:"openInNewTabButton",name:"open-in-new-tab",callback:A,hidden:E>YN.kl}]},[p,a,O,T,d,t,u,r,v,e,n,L,x,A,E,m]),D=f.useCallback(()=>{c.current&&c.current.requestFullscreen()},[c]);return f.createElement(f.Fragment,null,o&&f.createElement("div",{ref:C},f.createElement(iy.K0,{svg:Tp.A,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inline_preview.overflow_menu"),onMouseDown:e=>{e.stopPropagation(),I(e)},recordingKey:(0,n_.Pt)(Y1,"overflowMenuButton")})),E>YN.kl&&f.createElement(iy.K0,{svg:Yj.A,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inline_preview.new_tab"),onClick:A,recordingKey:(0,n_.Pt)(Y1,"openInNewTabButton"),dataTestId:"preview-open-in-presentation-view"}),s&&f.createElement(iy.K0,{svg:Y$.A,onClick:D,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inline_preview.open_fullscreen")}),k&&C.current&&f.createElement(iV.j,{dispatch:b,parentRect:C.current.getBoundingClientRect(),onFocus:e=>{e.stopPropagation()},onDismissMenu:y.onDismissOverflow,onDropdownHidden:y.onDismissOverflow,showPoint:!0,lean:"center",onSelectItem:e=>{e.callback&&e.callback()},recordingKey:(0,n_.Pt)(Y1,"overflowMenu"),items:P()}))}function Y6({navigateForwardEnabled:e,navigateBackwardEnabled:t,onRestart:n,width:a,onBack:l,onForward:r}){let i=(0,_.wA)();return f.createElement("div",{className:Yz.KW},a<=YN.Ah?null:f.createElement(f.Fragment,null,f.createElement(iy.K0,{svg:YX.A,tooltipForScreenReadersOnly:!0,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("viewer.footer.previous_frame"),onClick:l,disabled:!t,recordingKey:(0,n_.Pt)(Y1,"navigateBackwardButton"),dataTestId:"preview-navigate-backward"}),f.createElement(iy.K0,{svg:YY.A,tooltipForScreenReadersOnly:!0,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("viewer.footer.next_frame"),onClick:r,disabled:!e,recordingKey:(0,n_.Pt)(Y1,"navigateForwardButton"),dataTestId:"preview-navigate-forward"})),a<=YN.kl?null:f.createElement(iy.K0,{svg:YJ.A,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("inline_preview.restart"),onClick:()=>{i((0,YP.Zh)({name:"prototype.replay_clicked",params:{source:"inline viewer"}})),n()},recordingKey:(0,n_.Pt)(Y1,"restartButton"),dataTestId:"preview-restart-prototype"}))}var Y7=n(701750),Y8=n(241437),Y9=n(711490),Xe=n(127775);let Xt=f.forwardRef(function({pageId:e,openFileKey:t,closeInlinePreview:n,isOpen:a,iframeFocused:l,setIframeFocused:r,onIframeFocus:i},o){let s=(0,e2.Xr)(WA.h),[c,d]=f.useState(!1),u=(0,S.md)(Y8.yw),{isResizing:m,isDragging:p}=f.useContext(Y9.O),_=f.useMemo(()=>m||p||!l,[m,p,l]),g=f.useMemo(()=>m||p,[m,p]);f.useEffect(()=>{Y7.A.setDisableCloseWithShortcut(g)},[g]),f.useEffect(()=>{o.current&&(a?o.current.focus():(0,by.$z)())},[o,a]),f.useEffect(()=>{var e;let t=o.current;if(!t||c)return;let a=e=>{let t=e.shiftKey&&"Space"===e.code,a="Escape"===e.code;(t||a)&&!g&&n("keyboard")};return null==(e=t.contentWindow)||e.addEventListener("keydown",a),()=>{var e;t&&(null==(e=t.contentWindow)||e.removeEventListener("keydown",a))}},[o,c,g,n]);let h=t?function(e,t){let n=encodeURIComponent((0,LE.Kw)({base:"proto",file:{key:e},nodeId:t}));return`${location.origin}/embed?embed_host=inline-viewer&url=${n}&hide-ui=1&inline-viewer=1`}(t,e):"";return(f.useEffect(()=>{if(!o.current)return;let e=Y7.A.initialize(o.current,{closeInlinePreview:n,dispatch:s,onLoad:()=>{d(!0)}});return()=>{s({type:"RESET_INLINE_PREVIEW"}),e(),d(!1)}},[n,s,e,o]),f.useEffect(()=>{},[h,e,u]),f.useEffect(()=>{var e,t;let n=o.current;if(!n)return;let a=()=>{r(!1),et.Y5.triggerAction("inline-preview-iframe-focus-state-changed",{isFocused:!1})};return null==(e=n.contentWindow)||e.addEventListener("focus",i),null==(t=n.contentWindow)||t.addEventListener("blur",a),()=>{var e,t;n&&(null==(e=n.contentWindow)||e.removeEventListener("focus",i),null==(t=n.contentWindow)||t.removeEventListener("blur",a))}},[o,r,i]),t)?f.createElement("div",{className:Yz.Wc},f.createElement("iframe",{ref:o,title:"Inline Preview",src:(0,aR.PN)()?"/test/interactions/proto?secondary=1&inline-viewer=1":h,className:nb()(Yz.VR,_?Yz.dS:null)}),!c&&f.createElement(Xe.z2,{shouldNotOverflow:!0,isViewer:!0,editorType:a_._Y.DESIGN,progressBarMode:ei.Oin.HIDE_UI})):null}),Xn={overflowDropdownType:"INLINE_PREVIEW_OVERFLOW_DROPDOWN",stateAtom:WA.h,ViewerComponent:Xt,onBack:()=>{Y7.A.navigateBackward()},onForward:()=>{Y7.A.navigateForward()},onRestart:()=>{Y7.A.restartPrototype()},onFocus:()=>!!Y7.A.isIframeInitialized()&&(Y7.A.focus(),!0),onDismissOverflow:()=>{Y7.A.focus()}},Xa=(0,ai.r1)(BO),Xl=(0,ai.r1)(BP),Xr=!1;function Xi(){let e=(0,_.wA)(),t=(0,S.md)(ab.wg),n=(0,eb.aV)(),a=(0,S.md)(sR.mp),l=(0,U._I)(),r=(0,n6.GS)(),i=(0,S.md)(Xl),o=(0,S.md)(Xa),{uniqueId:s,show:c,complete:d,isShowing:u}=(0,n7.e)({overlay:an.kc4,priority:n8.N.SECONDARY_MODAL},[o,i,a]),m=(0,a3.U)("modal"),p=f.useCallback(()=>{var e;!n&&!Xr&&t&&l&&(0!==((null==(e=lE.q.instance.getCurrentPage())?void 0:e.childrenGuids.length)||0)&&c({canShow:(e,t,n)=>!e&&!t&&function(e){let t=Date.now();return e.getTime()<=t-12096e5}(n)}),Xr=!0)},[c,l,t,n]);function g(){e(j.b({[BO]:!0})),d()}f.useEffect(()=>{r||p()},[p,r]),(0,sD.E)(s,l5("design"),()=>{p()}),f.useEffect(()=>{"loaded"===o.status&&o.data&&d()},[o,d]),(0,sD.E)(s,"Enter Inspect Mode",()=>{u&&g()});let h=(0,n6.GS)()?at.ON:n4.e;return f.createElement(n9.rq,{isShowing:u,trackingContextName:BO,onClose:g,targetKey:h,title:(0,eN.tx)("dev_handoff.annotations_introduction_overlay.title"),media:f.createElement(sU.y,{src:"https://static.figma.com/uploads/5b9addc96424c11577a1ec91e1bbadcd786fe343",alt:(0,eN.t)("dev_handoff.annotations_introduction_overlay.image_alt"),aspectRatio:1280/720}),description:(0,eN.tx)("dev_handoff.annotations_introduction_overlay.description"),primaryCta:{label:(0,eN.tx)("dev_handoff.annotations_introduction_overlay.primary_cta"),type:"button",onClick:function(){m("handoff")},ctaTrackingDescriptor:ar.c.SHOW_ME}})}let Xo=(0,ai.r1)(BP),Xs=(0,ai.r1)(BO),Xc=!1,Xd=!1;function Xu(){var e;let t=(0,_.wA)(),n=(0,eb.aV)(),a=(0,S.md)(sR.mp),l=(0,S.md)(c$.N),r=(0,aN.J2)(ei.Ez5.annotationObserver().annotationInfoByTlf),i=null==(e=(0,S.md)(af.yV))?void 0:e.creatorId,o=(0,S.md)(Xo),s=(0,S.md)(Xs),{uniqueId:c,show:d,complete:u,isShowing:m}=(0,n7.e)({overlay:an.kc4,priority:n8.N.SECONDARY_MODAL},[o,s,a,l]),p=(0,a3.U)("modal"),g=r.size>0;function h(){t(j.b({[BP]:!0})),u()}f.useEffect(()=>{n&&(Xd=!0),!n&&!Xc&&Xd&&g&&(d({canShow:(e,t,n,a)=>!e&&!t&&i!==a&&function(e){let t=Date.now();return e.getTime()<=t-12096e5}(n)}),Xc=!0)},[g,n,i,d]),f.useEffect(()=>{"loaded"===o.status&&o.data&&u()},[o,u]),(0,sD.E)(c,"Enter Inspect Mode",()=>{m&&h()});let E=(0,n6.GS)()?at.ON:n4.e;return f.createElement(n9.rq,{isShowing:m,trackingContextName:BP,onClose:h,targetKey:E,title:(0,eN.tx)("dev_handoff.annotations_upsell_overlay.title"),media:f.createElement(sU.y,{src:"https://static.figma.com/uploads/e84a2faeb510847abd7bfb9c15a74ef974bb4c13",alt:(0,eN.t)("dev_handoff.annotations_introduction_overlay.image_alt"),aspectRatio:1280/720}),description:(0,eN.tx)("dev_handoff.annotations_upsell_overlay.description"),primaryCta:{label:(0,eN.tx)("dev_handoff.annotations_upsell_overlay.primary_cta"),type:"button",onClick:function(){p("handoff")},ctaTrackingDescriptor:ar.c.OPEN_DEV_MODE},secondaryCta:{label:(0,eN.tx)("dev_handoff.annotations_upsell_overlay.secondary_cta"),type:"button",onClick:u,ctaTrackingDescriptor:ar.c.NOT_NOW}})}var Xm=n(233286);function Xp(){let e=(0,n7.e)({overlay:an.Dqt,priority:n8.N.DEFAULT_MODAL});(0,sD.E)(e.uniqueId,"commentThreadMobileAnnouncementClicked",()=>{(0,Z.sx)("sidebar_announcement_mobile_app_download_prompt_modal_shown"),e.show({})});let t=(0,f.useCallback)(async()=>{(0,Z.sx)("sidebar_announcement_mobile_app_download_prompt_email_me_cta_clicked"),await iD.Ay.post("/api/send_mobile_download_email"),e.complete()},[e]);return f.createElement(sZ.h,{isShowing:e.isShowing,modalType:s0.q3.FEATURE_UPDATE,closeButtonStyle:s0.M_.ON_DARK,element:()=>f.createElement(Xf,{onEmailClick:t}),trackingContextName:"mobile_comment_announcement",onClickPrimaryCta:e.complete,onClose:e.complete,onManualDismiss:e.complete})}function Xf(e){return f.createElement("div",{className:"modal_comment_sidebar_announcement--container--5oh-p"},f.createElement("div",{className:"modal_comment_sidebar_announcement--imageContainer--Vuo-V"},f.createElement("img",{alt:"Background",src:"https://static.figma.com/uploads/e19f2f58bc09414847ad59ff9228e07032e8842c",className:"modal_comment_sidebar_announcement--image--lyA61"}),f.createElement("div",{className:"modal_comment_sidebar_announcement--spacer--m02YT"}),f.createElement(Xm.T,null)),f.createElement("div",{className:"modal_comment_sidebar_announcement--textContainer--btaTy"},f.createElement("div",{className:"modal_comment_sidebar_announcement--title--eiyLq"},f.createElement(sc.E,{fontSize:24,fontWeight:"semi-bold"},(0,eN.t)("rcs.mobile_comment_announcement.title"))),f.createElement("div",{className:"modal_comment_sidebar_announcement--description--Y8AJE"},f.createElement(sc.E,{fontSize:14},(0,eN.t)("rcs.mobile_comment_announcement.description")))),f.createElement("div",{className:"modal_comment_sidebar_announcement--buttonsContainer--UTcgc"},f.createElement(n5.$,{variant:"secondary",icon:"envelope-32",onClick:e.onEmailClick},(0,eN.t)("rcs.mobile_comment_announcement.email_download_link")),f.createElement(n5.$,{variant:"primary",onClick:()=>{(0,Z.sx)("sidebar_announcement_mobile_app_download_prompt_learn_more_cta_clicked"),tg.Ay.unsafeRedirect("https://help.figma.com/hc/articles/1500007537281-Guide-to-the-Figma-mobile-app#download","_blank")},icon:"info-32"},(0,eN.t)("rcs.rcs_shared.learn_more"))))}var X_=n(546962);function Xg(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10 6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h-4ZM9 6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2h2.5a1.5 1.5 0 0 1 .463 2.927l-.841 9.254A2 2 0 0 1 15.13 20H8.87a2 2 0 0 1-1.992-1.819l-.841-9.254A1.5 1.5 0 0 1 6.5 6H9Zm8.494 2h.01a.5.5 0 0 0-.004-1h-11a.5.5 0 0 0-.004 1h10.998Zm-.541 1H7.048l.826 9.09a1 1 0 0 0 .996.91h6.26a1 1 0 0 0 .996-.91L16.952 9ZM11 11.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5Zm3 0a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5Z",clipRule:"evenodd"}))}var Xh=n(228997),XE=n.n(Xh),Xv=n(270068),Xy=n(493536),Xb=n(597642),XC=n(746830),Xw=n(782754),XT=n(147755),Xx=n(717037),XN=n(188276);let XS=(0,cV.Ju)(function(e){let t=(0,_.wA)(),n=Xw.a.useModal(e),[a,l]=f.useState(""),r=f.useCallback(e=>{l(e.currentTarget.value)},[]),i=(0,XT.X)(),o=async()=>{let n=await XC.F.getUploadUrls(e.fileKey),l=e.recordedPositions.arrayBuffer().then(e=>{let t=new Uint8Array(e);return(0,Xx.E)(o5.e.EXPLORE,"uploadWalkthroughPositionRecording",n.data.meta.position.url,n.data.meta.position.fields,t,"application/json")}),r=e.userMediaRecording.arrayBuffer().then(e=>{let t=new Uint8Array(e);return(0,Xx.E)(o5.e.EXPLORE,"uploadWalkthroughMediaRecording",n.data.meta.media.url,n.data.meta.media.fields,t,"video/webm")}),[i,o]=await Promise.all([l,r]);t(XN.D({fileKey:e.fileKey,savepointID:e.fileVersionId,label:a,description:"async walkthrough"})),await XC.F.saveWalkthroughMedia(e.fileKey,e.fileVersionId,i,o,a,e.currentPage,e.firstPosition.x,e.firstPosition.y,e.isAudioOnly,e.lengthMs),t(eS.F.enqueue({message:(0,eN.t)("recordings.recording_saved")})),t(ty.Lo()),e.onRecordingSaved()};return f.createElement(Xw.a.Root,{manager:n,width:"md"},f.createElement(Xw.a.Contents,null,f.createElement(Xw.a.Header,null,f.createElement(Xw.a.Title,null,(0,eN.tx)("recordings.save_recording"))),f.createElement(Xw.a.Body,null,f.createElement(a1.ks,{ref:i,name:"title",type:"text",className:tk._Z,placeholder:(0,eN.t)("recordings.title_field_placeholder"),value:a,onChange:r})),f.createElement(Xw.a.Footer,null,f.createElement(Xw.a.ActionStrip,null,f.createElement(a1.$$,{type:"submit",className:tk.pL,disabled:0===a.length,onClick:o},(0,eN.tx)("general.save"))))))},"SAVE_ASYNC_WALKTHROUGH_MODAL",cV.ZU.YES);var Xk=n(683472),XI=n(335650),XA=n(548091),XO=n(752256);function XL(e){return(0,nl.O)()?f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6 5h2.5a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1ZM4 6a2 2 0 0 1 2-2h2.5a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6Zm11.5-1H18a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-2.5a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1Zm-2 1a2 2 0 0 1 2-2H18a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-2.5a2 2 0 0 1-2-2V6Z",clipRule:"evenodd"})):f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7 5h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1ZM5 6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6Zm10-1h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1Zm-2 1a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2V6Z",clipRule:"evenodd"}))}function XP(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m9 16 3 3 1 1V4l-1 1-3 3H4.5a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5H9Zm3.293-12.707L8.586 7H4.5A1.5 1.5 0 0 0 3 8.5v7A1.5 1.5 0 0 0 4.5 17h4.086l3.707 3.707A1 1 0 0 0 14 20v-1h.06H14V4a1 1 0 0 0-1.707-.707ZM21 12a7.003 7.003 0 0 1-5.5 6.839v-1.028a6.003 6.003 0 0 0 0-11.622V5.161a7.003 7.003 0 0 1 5.5 6.84Zm-2 0a5.002 5.002 0 0 1-3.5 4.771V15.71a4.001 4.001 0 0 0 0-7.418V7.229A5.002 5.002 0 0 1 19 12Zm-2 0a3 3 0 0 1-1.5 2.599v-1.276c.311-.353.5-.816.5-1.323s-.189-.97-.5-1.323V9.401a2.999 2.999 0 0 1 1.5 2.6Z",clipRule:"evenodd"}))}function XD(e){let{onPlay:t,onPause:n,onTimeUpdate:a}=e,l=f.useCallback(()=>{e.video&&e.video.pause(),n()},[e.video,n]),r=f.useCallback(()=>{e.video&&e.video.play(),t()},[e.video,t]),i=f.useCallback(t=>{e.video&&(e.video.currentTime=t),a()},[e.video,a]),o=f.useMemo(()=>e.isPlaying?f.createElement(vJ.K,{onClick:l,"aria-label":(0,eN.t)("fullscreen.properties_panel.pause")},f.createElement(XL,null)):f.createElement(vJ.K,{onClick:r,"aria-label":(0,eN.t)("fullscreen.properties_panel.pause")},f.createElement(zO.K,null)),[r,l,e.isPlaying]),s=e.video&&!isNaN(e.video.duration)?e.video.duration:e.lengthMs/1e3,c=f.useMemo(()=>new Bj.f0(s,!1,!1),[s]),[d,u]=f.useState(!1),[m,p]=f.useState(1),_=f.useCallback(t=>{if(!e.video)return;let n=parseFloat(t.target.value);p(n),e.video.volume=n},[e.video]);return f.createElement(f.Fragment,null,f.createElement("div",{className:"recording_video_controls--iconGroup--b52pU"},o,f.createElement(vJ.K,{onClick:()=>u(!d),"aria-label":(0,eN.t)("fullscreen.properties_panel.volume")},f.createElement(XP,null)),d&&(()=>{let e=100*m+-16*m+8;return f.createElement("div",{className:"recording_video_controls--volumeSliderContainer--0oq-n"},f.createElement("input",{className:nb()("recording_video_controls--volumeSlider--1xB-5",nz.Dm),type:"range",min:"0",max:"1",value:m,onInput:_,onChange:_,step:.02,style:{background:`linear-gradient(to top, var(--color-bg-brand) 0%, var(--color-bg-brand) ${e}%, var(--color-bg) ${e}%, var(--color-bg) 100%)`}}))})()),e.video?f.createElement(XO.A,{"aria-label":(0,eN.t)("fullscreen.properties_panel.video_time"),value:e.currentVideoTime,min:0,max:e.video.duration,step:.01,bigStep:.1,onChange:i}):null,e.video?f.createElement("div",{className:"recording_video_controls--timestampContainer--eEV8y"},f.createElement("div",{className:"recording_video_controls--currentTime--IZSk-"},c.format(e.currentVideoTime)),f.createElement("div",{className:"recording_video_controls--timeSlash--oc9n4"},"/"),f.createElement("div",{className:"recording_video_controls--totalTime--rSunR"},c.format(s))):null)}let XR="recording_replay_focus_ui--invertedCorner--o-B-F";var XM=n(234024),XF=n(622711);let XB=(0,e4.eU)([]);function XU(e){let[t,n]=f.useState(void 0),[a,l]=f.useState(void 0),[r,i]=f.useState(!1),[o,s]=f.useState(!1),[c,d]=f.useState(!1),[u,m]=f.useState(!0),[p,g]=f.useState(0),h=f.useRef(null),E=f.useRef(void 0),v=f.useRef(ET.D.getState().mirror.appModel.showUi),y=(0,xB._6)(),b=(0,_.wA)(),C=f.useContext(k.q5),w=e.recording.id===Xy.xP,[T,x]=(0,S.fp)(XB),N=(0,af.q5)();f.useEffect(()=>{v.current&&et.Y5.triggerAction("toggle-ui"),w?d(!0):(b((0,wq._b)({type:wq.wk.Recording})),s(!0))},[b,w]),f.useEffect(()=>{if(e.recording&&o){if(e.recording.fileVersionId.status===eW.tT.Loaded){let t=e.recording.fileVersionId.data,n=T.find(e=>e.id===t);n?(b((0,wq.Nb)({id:t,versions:[n]})),d(!0)):Xb.W.getVersion({fileKey:e.recording.fileKey,versionId:e.recording.fileVersionId.data}).then(e=>{x(T.concat(e.data.meta.version))}).catch(()=>{b(cG.s.error((0,eN.t)("recordings.replay_ui_canvas_loading_error")))})}else d(!0)}},[o,e.recording,b,T,x]),f.useEffect(()=>()=>{d(!1),n(void 0),l(void 0),i(!0),m(!0),g(0),E.current&&(clearInterval(E.current),E.current=void 0)},[e.recording.id,N]),f.useEffect(()=>{e.recording&&fetch(e.recording.positionInfoSignedUrl).then(e=>e.arrayBuffer()).then(e=>{let t=new Uint8Array(e);n(JSON.parse(new TextDecoder().decode(t)))})},[e.recording]);let I=f.useCallback(()=>{if(!h.current||!t)return;let e=1e3*h.current.currentTime,n=XE()(t,{...Xy.rv,msSinceRecordingStart:e},e=>e.msSinceRecordingStart);n>=t.length&&(n=t.length-1),l(t[n])},[t]),A=f.useCallback(()=>{E.current=setInterval(I,Xy.c6),i(!0)},[I]),O=f.useCallback(()=>{clearInterval(E.current),E.current=void 0,i(!1)},[]),L=f.useCallback(()=>{h.current&&(g(h.current.currentTime),I())},[I]),P=f.useCallback(()=>{w?C.abortRecording():(b((0,wq.Eg)()),v.current&&et.Y5.triggerAction("toggle-ui"),b(Xv.UU()));let e={...y,walkthroughRecordingId:void 0};b((0,nI.$T)(e))},[b,y,C,w]),D=f.useCallback(()=>{w||(XC.F.deleteWalkthroughMedia(e.recording.id).then(()=>{b(eS.F.enqueue({message:(0,eN.t)("recordings.recording_deleted")}))}),(0,XI.$F)(N,XI.ed.DELETED,e.recording.id)),P()},[b,w,e.recording.id,P,N]),R=f.useCallback(()=>{b((0,ty.to)({type:Xk.p,data:{onConfirm:D}}))},[b,D]),M=f.useCallback(()=>{w?R():P()},[P,R,w]);return t&&c?f.createElement(f.Fragment,null,f.createElement("div",{className:"recording_replay_focus_ui--container--mnVy4"},f.createElement(ae.vx,{initialPosition:new r4.Mi(26,76),initialConstraints:{x:"left",y:"bottom"}},f.createElement("div",{className:e.recording.meta.audioOnly?"recording_replay_focus_ui--audioOnlyContainer--WUXCP":"recording_replay_focus_ui--videoContainer--IQLLd"},f.createElement("video",{className:e.recording.meta.audioOnly?"recording_replay_focus_ui--audio--Z5Gby":"recording_replay_focus_ui--video--sHfm6",src:e.recording.userMediaSignedUrl,autoPlay:!0,controls:!1,onPlay:A,onPause:O,onTimeUpdate:L,ref:h}))),f.createElement(XJ,{recording:e.recording,onClose:M,openDeleteConfirmationModal:R}),f.createElement("div",{className:"recording_replay_focus_ui--viewportContainer--EYq-7"},f.createElement("div",{className:"recording_replay_focus_ui--centerInfoBox--ukCZp"},f.createElement(a2.B,{svg:XM.A,className:XR}),f.createElement("div",{className:"recording_replay_focus_ui--followingInfoBox--NPeez"},f.createElement("div",{className:"recording_replay_focus_ui--followingInfoBorderOffset--5fEDC"},f.createElement("div",{className:"recording_replay_focus_ui--followingUserText--bGWg7"},(0,eN.tx)(u?"recordings.following_name":"recordings.not_following_name",{name:e.recording.creator.handle})),f.createElement(va.$n,{onClick:()=>m(!u)},(0,eN.tx)(u?"recordings.stop_following":"recordings.follow")))),f.createElement(a2.B,{svg:XF.A,className:XR}))),f.createElement("div",{className:"recording_replay_focus_ui--bottomBar--bt2XX"},f.createElement(XD,{onPause:O,onPlay:A,onTimeUpdate:L,video:h.current,isPlaying:r,currentVideoTime:p,lengthMs:e.recording.meta.lengthMs.status===eW.tT.Loaded?e.recording.meta.lengthMs.data:0}),e.recording.id===Xy.xP&&f.createElement(XK,{openDeleteConfirmationModal:R,onCloseConfirmed:P}))),f.createElement(Xz,{recording:e.recording,replayPosition:a,isFollowingViewport:u,setIsFollowingViewport:m}),f.createElement(Xj,{recording:e.recording,replayPosition:a,isReplayPlaying:r,isFollowingViewport:u,setIsFollowingViewport:m})):null}function XH(e){return e.recordingId===Xy.xP?f.createElement(XG,null):f.createElement(XV,{recordingId:e.recordingId})}function XG(){let e=f.useContext(k.q5),t=(0,ew.iZ)(),n=e.getRecordingDataForSinatraCreate(),a=f.useMemo(()=>n&&t?{fileKey:n.fileKey,positionInfoSignedUrl:URL.createObjectURL(n.recordedPositions),userMediaSignedUrl:URL.createObjectURL(n.userMediaRecording),id:Xy.xP,fileVersionId:{status:eW.tT.Loaded,data:n.fileVersionId},creator:{id:t.id,handle:t.handle,imgUrl:t.img_url},meta:{title:"",audioOnly:n.isAudioOnly,lengthMs:{status:eW.tT.Loaded,data:n.lengthMs}}}:null,[n,t]);return a?f.createElement(XU,{recording:a}):null}function XV(e){let t=(0,eW.Rs)(eJ.hzQ,{id:e.recordingId}),n="loaded"===t.status&&t.data.walkthroughMedia;return n?f.createElement(XU,{recording:n}):null}function XK(e){let t=(0,_.wA)(),n=f.useContext(k.q5).getRecordingDataForSinatraCreate(),a=(0,af.q5)(),l=()=>{(0,XI.Q3)(a,XI.ZP.RECORDING_SAVED),e.onCloseConfirmed()};return n?f.createElement("div",{className:"recording_replay_focus_ui--newRecordingBottomControls--28MRy"},f.createElement(vJ.K,{onClick:e.openDeleteConfirmationModal,"aria-label":(0,eN.t)("recordings.delete_recording_title")},f.createElement(Xg,{className:"recording_replay_focus_ui--icon---MLcx"})),f.createElement(va.$n,{onClick:()=>{n&&t((0,ty.to)({type:XS,data:{...n,onRecordingSaved:l}}))}},(0,eN.tx)("recordings.save_recording"))):null}let XW=e=>{let t=f.useRef(void 0),n=(0,v.ZC)(e);return e&&n&&!(0,Xy.s0)(e,n,0)&&(t.current=n),t};function Xz(e){var t;let n=f.useContext(fP.kw),a=f.useRef(e.replayPosition);a.current=e.replayPosition;let l=XW(null==(t=e.replayPosition)?void 0:t.viewportPath),r=f.useRef(n.getViewportInfo());r.current=n.getViewportInfo();let i=f.useCallback(()=>{var e;let t=r.current;if(t.isPanning||t.isZooming)return!0;if(!a.current||a.current.msSinceRecordingStart<1e3)return!1;let n=Math.max(10/t.zoomScale,1),i=null==(e=a.current)?void 0:e.viewportPath;if(!i||(0,Xy.s0)(t,i,n))return!1;let o=l.current;return!o||!(0,Xy.s0)(t,o,n)},[l]),{setIsFollowingViewport:o}=e,s=(0,v.ZC)(e.isFollowingViewport);return f.useEffect(()=>{if(e.replayPosition&&e.isFollowingViewport){if(s&&i()){o(!1);return}(0,Xy.s0)(r.current,e.replayPosition.viewportPath,1)||n.navigateTo({x:e.replayPosition.viewportPath.offsetX,y:e.replayPosition.viewportPath.offsetY},e.replayPosition.viewportPath.zoomScale,{duration:0,delay:0})}},[e.replayPosition,e.isFollowingViewport,o,n,i,s]),null}function Xj(e){let t=hh(),n=f.useContext(fP.kw),a=f.useCallback(e=>{t.moveCursorBot({x:e.x,y:e.y,coordinateType:"canvas",animationDuration:0})},[t]);f.useEffect(()=>{e.replayPosition&&a({x:e.replayPosition.mousePositionPath.x,y:e.replayPosition.mousePositionPath.y})},[a,e.replayPosition]);let{setIsFollowingViewport:l}=e,r=f.useCallback(()=>{if(e.replayPosition&&(a({x:e.replayPosition.mousePositionPath.x,y:e.replayPosition.mousePositionPath.y}),e.isFollowingViewport)){let t=n.getViewportInfo();(0,Xy.s0)(t,e.replayPosition.viewportPath,1)||l(!1)}},[a,e.replayPosition,l,e.isFollowingViewport,n]);return(0,lb.D6)({subscribeToUpdates_expensive:!e.isReplayPlaying},r),f.createElement(hc.Yh,{manualControl:!0,name:e.recording.creator.handle})}function XJ(e){let t=(0,ew.iZ)(),n=(0,XA.aW)(),a=f.useRef(null),l="context"+e.recording.id,r=(0,nT.B)(l),i=(0,af.q5)(),{onClose:o,openDeleteConfirmationModal:s}=e,c=e.recording.id===Xy.xP,d=f.useMemo(()=>{let n=[];return t&&e.recording.creator.id===t.id&&e.recording.id!==Xy.xP&&n.push(f.createElement(nC.W.Option,{key:"delete",onClick:s},(0,eN.tx)("recordings.delete_recording_title"))),n},[t,e.recording.creator,s,e.recording.id]),u=f.useCallback(()=>{n(e.recording.id),(0,XI.$F)(i,XI.ed.LINK_COPIED,e.recording.id)},[n,e.recording.id,i]);return f.createElement("div",{className:"recording_replay_focus_ui--header--zTtko"},f.createElement("div",null,e.recording.meta.title),f.createElement("div",{className:"recording_replay_focus_ui--headerButtonGroup--Jn6a-"},d.length>0&&f.createElement("div",null,f.createElement(iG.YW,{style:r.showing?{backgroundColor:"var(--color-bg-hover)"}:void 0,selected:r.showing,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("fig_feed.more_actions"),onClick:r.toggle,ref:a},f.createElement(BG.In,{icon:"dots-32"})),a.current&&r.showing&&f.createElement(nN.Jz,{showPoint:!1,targetRect:a.current.getBoundingClientRect(),options:d,closeDropdown:r.hide,hideDropdown:r.hide})),!c&&f.createElement(vJ.K,{onClick:u,"aria-label":(0,eN.t)("recordings.copy_link")},f.createElement(BG.In,{icon:"hyperlink-32"})),f.createElement(vJ.K,{onClick:o,"aria-label":(0,eN.t)("general.close")},f.createElement(BG.In,{icon:"x-32"}))))}var XY=n(842216),XX=n(282263),Xq=n(29808);let XZ={VariableCreateModalRoot:WC.IU,VariableAndStyleCreateModalRoot:function({initialPosition:e,initialVariableValue:t,inheritStyleKeyField:n,initialStyleCreationPaint:a,initialView:l,resolvedType:r,onCreateVariable:i,onCreateStyle:o,onClose:s}){(0,Ww.NF)({resolvedType:r});let{onCreateVariableSubmit:c,onCreateStyleSubmit:d}=function({onCreateVariable:e,onCreateStyle:t,onClose:n}){let{onCreateVariableSubmit:a}=(0,WC.C_)({onCreateVariable:e,onClose:n}),l=(0,af.tS)(),r=(0,af._G)(),i=(0,_.d4)(e=>e.mirror.sceneGraph);return{onCreateVariableSubmit:a,onCreateStyleSubmit:function(e){let a=function(e){let t=ei.glU.getStyleNodeId(e.key,e.version),n=i.get(t);return n?{type:Sd.PW.STYLE,name:n.name,file_key:l??"",file_key_source:vc.Ps.LOCAL_FILE,library_key:r??(0,vu.l)(""),key:n.styleKey,thumbnail_url:"",canvas_url:"",content_hash:n.styleVersionHash??void 0,userFacingVersion:(0,Wy.IA)(n.userFacingVersion),node_id:n.guid,isLocal:!0,style_type:n.styleType}:null}(e);a&&(t(a),n())}}}({onCreateVariable:i,onCreateStyle:o,onClose:s});return f.createElement(WN,{initialPosition:e,initialVariableValue:t,inheritStyleKeyField:n,initialStyleCreationPaint:a,initialView:l,resolvedType:r,onCreateStyleSubmit:d,onCreateVariableSubmit:c,onClose:s,recordingKey:"createVariableAndStyleModal"})},VARIABLE_CREATE_MODAL_WIDTH_PX:WC.iG};function XQ(){var e;let t=(0,_.d4)(e=>e.selectedView),n=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),a=(0,_.d4)(e=>e.progressBarState.mode),l=(0,_.d4)(e=>{var t;return(0,$.pi)({editorType:null==(t=(0,eU.d1)(e))?void 0:t.editor_type})}),r=a!==l8.Oin.HIDE_UI&&a!==l8.Oin.ON_AND_LOCKED,i=(0,af.q5)(),o=(0,tu.jY)(),s=(0,ta.BI)(),c=(0,aN.J2)(null==(e=ei.Ez5)?void 0:e.slidesToolMode());(0,f.useEffect)(()=>(document.body.dataset.editorTheme=(0,Du.ju)(t,c),()=>{delete document.body.dataset.editorTheme}),[t,c]),(0,n6.Ou)(),(0,n6.fq)(),(0,Wm.c)(),function(){let e="ui3"===(0,h.DP)().version,{isPropertiesPanelCollapsed:t,setPropertiesPanelCollapsed:n}=(0,H_.iT)(),a=(0,EO.Ye)(),l=(0,eb.ax)(),r=(0,eb.dH)(),i=r===ei.NLJ.FRAME||r===ei.NLJ.COMMENTS||r===ei.NLJ.VECTOR_PENCIL,o=(0,_.d4)(e=>(0,KC.L3)(e.multiplayer)),s=(0,_.d4)(e=>e.mirror.appModel.activeUserAction===ei.QOV.DEFAULT),c=(0,H_.ys)();(0,f.useEffect)(()=>{e&&s&&!o&&t&&(i||l)&&n(!1)},[l,s,r,e,n,t,a,i,o]),(0,f.useEffect)(()=>{c&&n(!0)},[c,n,t])}(),(0,Ck.V)(),(0,f.useEffect)(()=>{r&&n&&o&&(et.Y5.onReady().then(()=>{ei.h3O.sendSignal("client-rendered","")}),window.requestAnimationFrame(()=>{var e;null==(e=em.eD)||e.addTabAnalyticsMetadata({reactFullscreenViewRenderTime:window.performance.now()}),Wg.xK.reactFullscreenViewIsRendered(),Wg.xK.report(n,l),function(){var e;let t=(0,W_.dX)("fullscreen");if(!t)return;let n=(0,Wf.ap)()?t.getContext("webgl2"):t.getContext("webgl");if(!n||!window.expectedWebGLContextAttributes)return;let a=n.getContextAttributes();if(!a)return;let l=(null==(e=ei.CeL)?void 0:e.getDeviceInfo())??{vendor:"",renderer:"",version:""},r={};for(let e of Object.keys(a))r[`actual_${e}`]=a[e];let i={},o=!0;for(let e of Object.keys(window.expectedWebGLContextAttributes))a[e]!==window.expectedWebGLContextAttributes[e]&&(o=!1),i[`expected_${e}`]=window.expectedWebGLContextAttributes[e];let s={...r,...i,...l,are_context_attributes_correct:o};(0,Z.sx)("fullscreen_load_gpu_parameters",s)}()}))},[r,n,l,o]);let d=(0,_.d4)(e=>e.isFullscreenDocumentLoaded);(0,f.useEffect)(()=>{(null==s?void 0:s.handleCompleteInitialLoad)&&d&&s.handleCompleteInitialLoad()},[s,d]);let[u,m]=(0,f.useState)(!1),p=(0,_.d4)(e=>e.mirror.appModel.isReadOnly);(0,f.useEffect)(()=>{(null==s?void 0:s.updateReadOnly)&&d&&!u&&(m(!0),s.updateReadOnly(p))},[s,d,u,m,p]);let g=(0,v.ZC)(i),E=(0,_.d4)(e=>e.mirror.appModel.pagesList),b=(0,f.useMemo)(()=>E.map(e=>({id:e.nodeId,name:e.name})),[E]),C=(0,v.ZC)(b),w=(0,_.d4)(e=>e.mirror.appModel.currentPage),T=(0,v.ZC)(w);(0,f.useEffect)(()=>{(null==s?void 0:s.updatePages)&&i&&(!g||i.key!==g.key||i.name!==g.name||i.editorType!==g.editorType||i.isTryFile!==g.isTryFile||!(0,b_.c2)(b,C)||w!==T)&&s.updatePages({fileKey:i.key,fileName:i.name,editorType:i.editorType,isTryFile:i.isTryFile,pages:b.length>0?b:[{id:w,name:"Page 1"}],currentPageId:w})},[s,i,g,b,C,w,T]);let x=(0,Wh.WC)();(0,f.useEffect)(()=>{(null==s?void 0:s.updateWebOverlaysShown)&&s.updateWebOverlaysShown(x)},[s,x]);let N=(0,L.o3)(L.nt.customKeyboardShortcuts);(0,f.useEffect)(()=>{(0,y.kc)().ce_custom_keyboard_shortcuts&&ei.glU.reloadKeyboardShortcuts()},[N]);let S=(0,_.d4)(e=>e.multiplayer.allUsers),k=(0,_.d4)(e=>e.multiplayer.observingSessionID),I=(0,_.d4)(e=>e.multiplayer.presenterSessionID),A=(0,_.d4)(e=>e.multiplayer.deviceNameFilter),O=(0,_.d4)(e=>e.multiplayer.sessionID),P=(0,f.useMemo)(()=>{let{users:e}=(0,WE.Yp)(S,null,!1,1048576,{sessionID:O,observingSessionID:k,presenterSessionID:I,deviceNameFilter:A});return{sessionID:O,observingSessionID:-1!==k?k:null,presenterSessionID:-1!==I&&I||null,users:e}},[S,A,k,I,O]),D=(0,v.ZC)(P);return(0,f.useEffect)(()=>{(null==s?void 0:s.updateMultiplayerUserInfo)&&!(0,b_.c2)(D,P)&&s.updateMultiplayerUserInfo(P)},[s,P,D]),(0,BH.iA)(),!function(){let e=(0,U.U4)(),t=(0,U._I)(),n=(0,VJ.D)(),a=(0,ag.ks)(),l=(0,Q.ow)(),r=(0,a3.U)("permission",!0),i=a&&!t&&!e&&!(0,Kh.T)();(0,f.useEffect)(()=>{l||(ei.w3z.setCanAccessDevMode(t),ei.w3z.setCanEnterDevMode(e),ei.w3z.setShowWorkflowsControls(n))},[t,e,n,l]),(0,f.useEffect)(()=>{i&&r("design")},[r,i])}(),null}function X$(){let e=(0,Q.ow)(),t=(0,tu.sO)(),n=(0,aA.cJ)(),a=(0,ta.BI)(),l=(0,_.d4)(e=>e.selectedView);return(0,_.d4)(e=>e.isFullscreenDocumentLoaded)&&(0,y.kc)().async_spotlight&&"fullscreen"===l.view&&l.walkthroughRecordingId?f.createElement(XH,{recordingId:l.walkthroughRecordingId}):e?f.createElement(f.Fragment,null,f.createElement(YE,null),!!(null==a?void 0:a.shouldOptimizeForIpadApp)&&f.createElement(Wk.K,null),!!(null==a?void 0:a.shouldOptimizeForIpadApp)&&f.createElement(WI,null)):t?f.createElement(f.Fragment,null,f.createElement(Wz,null),f.createElement(X2,null)):n?f.createElement(f.Fragment,null,f.createElement(Cl.H5,null),f.createElement(X2,null)):(0,ag.$A)(l)?f.createElement(Ku,null):(0,tR.Wl)(l)?null:f.createElement(f.Fragment,null,f.createElement(X1,null),!!(null==a?void 0:a.shouldOptimizeForIpadApp)&&f.createElement(Wk.K,null),!!(null==a?void 0:a.shouldOptimizeForIpadApp)&&f.createElement(WI,null))}function X0(){let e=(0,_.d4)(YN.xY),t=(0,_.d4)(e=>e.mirror.appModel.currentPage),n=(0,tR.l7)();return f.createElement(f.Fragment,null,f.createElement(X$,null),f.createElement(XQ,null),e&&f.createElement(Y5,{viewerControl:Xn,pageId:t}),n&&f.createElement(l7.tH,{boundaryKey:"DevModeOverview",fallback:l7.H4.DEFAULT_FULL_PAGE,sentryTags:{area:o5.e.DEVELOPER_TOOLS},hasCustomWASMBuild:CR.y4},f.createElement(Wt,null)))}let X1=f.memo(function(){let e=(0,_.d4)(e=>e.mirror.appModel),t=(0,eb.ax)(),{topLevelMode:n}=e,a=(0,eb.dH)();return(0,lC.z)({topLevelMode:l8.lyf.PREVIEW,eventName:"Preview Mode Selection Changed",teamFilesOnly:!0}),f.useEffect(()=>{t&&n===l8.lyf.PREVIEW&&a!==ei.NLJ.COMMENTS&&(0,aT.NT)(ei.FAf.INSPECT)},[t,n,a]),f.createElement(f.Fragment,null,f.createElement(X2,null),f.createElement(X5,null))}),X2=f.memo(function(){var e,t;let n=(0,_.wA)(),a=(0,_.d4)(e=>(0,mK.getPermissionsState)(e)),l=(0,eb.aV)(),r=(0,mP.q)(),i=(0,_.d4)(e=>e.loadingState),o=(0,_.d4)(e=>e.mirror.appModel),s=(0,S.md)(Tb),c=(0,_.d4)(e=>e.mirror.sceneGraphSelection),d=(0,_.d4)(e=>e.mirror.selectionPaints),u=(0,_.d4)(e=>e.mirror.selectionProperties),m=(0,_.d4)(e=>e.mirror.selectedStyleProperties),p=(0,_.d4)(e=>e.currentUserOrgId),g=(0,_.d4)(e=>e.dropdownShown),h=(0,_.d4)(e=>e.fonts),E=(0,_.d4)(e=>e.fileVersion),v=(0,_.d4)(e=>e.installedPluginVersions),y=(0,_.d4)(e=>e.library),b=(0,_.d4)(e=>e.localPlugins),C=(0,_.d4)(e=>e.modalShown),w=(0,_.d4)(e=>e.multiplayer),T=(0,_.d4)(e=>e.openFile),x=(0,_.d4)(e=>e.pickerShown),N=(0,_.d4)(e=>e.pickerInStyleCreationShown),k=(0,_.d4)(e=>e.publishedPlugins),I=(0,_.d4)(e=>e.saveAsState),A=(0,_.d4)(e=>e.selectedView),O=(0,_.d4)(e=>e.voice.showWidget),L=(0,_.d4)(e=>e.stylePickerListLayout),P=(0,_.d4)(e=>e.stylePickerShown),D=(0,_.d4)(e=>e.stylePreviewShown),R=(0,_.d4)(e=>e.styleSets),M=(0,_.d4)(e=>e.usedKeyboardShortcuts),F=(0,_.d4)(e=>e.user),B=(0,_.d4)(e=>e.userFlags),U=(0,_.d4)(e=>e.userStateLoaded),H=(0,_.d4)(e=>e.repos),G=(0,_.d4)(e=>e.folders),V=(0,_.d4)(e=>e.teams),K=(0,_.d4)(e=>e.orgById),W=(0,_.d4)(e=>e.orgDraftsOwners),z=(0,_.d4)(e=>e.orgUsersByOrgId),j=(0,_.d4)(e=>e.userEduGracePeriods),J=(0,_.d4)(e=>e.licenseGroups),{topLevelMode:Y}=o,X=l?Wp.R.topLevelMode:Y,q=null==(e=ei.Ez5.uiState().isRecovery)?void 0:e.getCopy(),Z=(0,nS.R)(),Q=(0,aN.J2)(null==(t=ei.Ez5)?void 0:t.slidesToolMode()),$=(0,tu.sO)(),ee=(0,aA.cJ)(),et=X===l8.lyf.LAYOUT||X===l8.lyf.BRANCHING||q||!!F&&X===l8.lyf.PREVIEW||Z&&X===l8.lyf.HISTORY,en=(0,mV.VP)(i,"edit_button_upgrading_to_edit"),ea=l||en,el=(0,aN.J2)((0,aT.aY)()),er=(0,aN.J2)(ei.Ez5.propertiesPanelState().shownPropertiesPanels),eo=(0,aN.J2)(ei.Ez5.propertiesPanelState().strokePanelMode),es=(0,aN.J2)(ei.Ez5.propertiesPanelState().strokePanelTerminalPointCount),ec=(0,aN.J2)((0,tM.UK)().expandedFramePresetType),ed=(0,tM.Ku)(),eu=(0,tM.qw)(),em=(0,Ck.b)(),ep=(0,aN.J2)(ei.Ez5.uiState().showPropertiesPanel);(0,H_.tt)();let ef=!(0,sd.Oo)()&&Z&&ep,e_=(0,aN.J2)((0,tM.UK)().renderRulers),{isRightPanelCollapsed:eg}=(0,f.useContext)(tD.t),eh=(0,f.useMemo)(()=>ee?el===ei.FAf.DESIGN||el===ei.FAf.SITE?ei.FAf.SITE:el:$&&(el===ei.FAf.DESIGN||el===ei.FAf.SLIDE)?Q===ei.EMA.SLIDES?ei.FAf.SLIDE:ei.FAf.DESIGN:el,[el,ee,Q,$]);return f.createElement(l7.tH,{boundaryKey:"PropertiesPanel",fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},et&&r&&f.createElement(Xq.l.Provider,{value:XZ},f.createElement(X_.Q,{recordingKey:"propertiesPanel",isCollapsed:eg,propertiesPanelTab:eh,strokePanelMode:eo,strokePanelTerminalPointCount:es,commentsPanel:X4,dispatch:n,isLoading:ea,shouldAnimateLoadingState:l,shouldShowBackgroundGradient:ef,shownPanels:er,rulersVisible:e_,isInsetEditorEnabled:em,expandedFramePresetType:ec,colorFormat:ed,propertiesPanelSplitPosition:eu,permissionsState:a,key:(0,aR.tw)()??void 0,appModel:o,sceneGraph:s,sceneGraphSelection:c,selectionPaints:d,selectionProperties:u,selectedStyleProperties:m,currentUserOrgId:p,dropdownShown:g,fonts:h,fileVersion:E,allSavedPlugins:v,library:y,localPlugins:b,modalShown:C,multiplayer:w,openFile:T,pickerShown:x,pickerInStyleCreationShown:N,publishedPlugins:k,saveAsState:I,selectedView:A,stylePickerListLayout:L,stylePickerShown:P,stylePreviewShown:D,styleSets:R,usedKeyboardShortcuts:M,user:F,userFlags:B,userStateLoaded:U,repos:H,folders:G,teams:V,orgById:K,orgDraftsOwners:W,orgUsersByOrgId:z,userEduGracePeriods:j,licenseGroups:J,isUI3:Z,showVoiceWidget:O,hasMergedDimensionsAndAutolayout:Z}),f.createElement(XX.tZ,null)))}),X5=f.memo(function(){var e,t;let n=null==(e=ei.Ez5.uiState().isRecovery)?void 0:e.getCopy(),a=null==(t=(0,af.q5)())?void 0:t.canEdit,l=!(0,Co.ck)()&&a&&(0,y.kc)().dt_dev_mode_discovery_rcs&&!n;return f.createElement(f.Fragment,null,f.createElement(aS.p,null,f.createElement(dJ.L,null)),f.createElement(aS.p,null,f.createElement(XY.e,null)),f.createElement(aS.p,{featureFlag:"is_html_to_design_exp_enabled"},f.createElement(YT.s,null)),f.createElement(aS.p,null,l&&f.createElement(n4.Q,null)),f.createElement(aS.p,null,f.createElement(Xi,null)),f.createElement(aS.p,null,f.createElement(Xu,null)),f.createElement(aS.p,{featureFlag:"mobile_prompt_sidebar_modal"},f.createElement(Xp,null)),f.createElement(aS.p,null,f.createElement(Yx,null)))}),X4=f.memo(function(){let e=(0,aN.J2)((0,aT.aY)()),t=(0,_.d4)(e=>e.mirror.appModel.topLevelMode),n=!(0,n6.GS)()&&(t!==l8.lyf.PREVIEW&&e!==ei.FAf.COMMENT||t===l8.lyf.PREVIEW);return f.createElement(Bn.B,{stackHeader:n,hideResolve:!1})});var X3=n(323762),X6=n(145519),X7=n(4051),X8=n(519048),X9=n(774658);function qe(){let e=(0,e2.Xr)(X7.n),t=f.useCallback(()=>{e({type:"MINIMIZE"})},[e]);return f.createElement(WP.K0,{svg:X9.A,active:"NONE",tooltip:(0,eN.t)("whiteboard.embeds.inline_menu.minimize"),onClick:t,recordingKey:"embedMinimizeControl"})}var qt=n(929021);function qn(e){let t=e.mirror.sceneGraph,n=e.mirror.sceneGraphSelection;if(1!==Object.keys(n).length)return null;let a=t.get(Object.keys(n)[0]);return a&&"WIDGET"===a.type?a:null}function qa(e){return e.mirror.sceneGraph.get(e.mirror.appModel.hoveredNode)}let ql=f.memo(function(){let e=(0,_.d4)(qa),t=null==e?void 0:e.guid,[n,a]=f.useState(null),l=f.useMemo(()=>t&&"-1:-1"!==t?ei.glU.getEmbedTypeOfTooltipIcon(t):null,[t]);f.useEffect(()=>{var e;if(!l||!t){a(null);return}let n=(0,rt.EE)("embed-tooltip",[t],e=>{a((null==e?void 0:e.position)||null)});return a(n.currentNodePosition&&(null==(e=n.currentNodePosition[t])?void 0:e.position)||null),()=>{(0,rt.lB)("embed-tooltip")}},[t,l]);let r=!!l&&!!n,i=(0,lb._X)({subscribeToUpdates_expensive:r}),o=f.useMemo(()=>{if(!n)return{};let e=(0,lb.Yb)(i,n),t=e.x+i.x,a=e.y+i.y;return{height:n.height,width:n.width,transformOrigin:"top left",position:"fixed",transform:`translate(${t}px, ${a}px) rotate(${n.angle}deg) scale(${i.zoomScale})`}},[i,n]);return r?f.createElement("div",{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":"video"===l||"autoplayable_video"===l?(0,eN.t)("whiteboard.embeds.tooltip_help_text.video"):"audio"===l||"autoplayable_audio"===l?(0,eN.t)("whiteboard.embeds.tooltip_help_text.audio"):"file"===l||"figma"===l?(0,eN.t)("whiteboard.embeds.tooltip_help_text.file"):(0,eN.t)("whiteboard.embeds.tooltip_help_text.generic"),"data-tooltip-show-above":!0,"data-tooltip-max-width":160,"data-tooltip-timeout-delay":50,"data-tooltip-show-immediately":!0,style:o}):null}),qr=f.memo(function(){let e=(0,aN.J2)(ei.Ez5.embedUiState().activeEmbedData),t=(0,_.d4)(e=>e.mirror.appModel.currentPage?e.mirror.appModel.currentPage:void 0),n=(0,_.d4)(qn),a=(0,S.md)(X7.n),l=!!e&&(null==n?void 0:n.guid)===e.embedNodeId;return e&&e.embedNodeId&&e.embedThumbnailNodeId&&e.srcUrl&&e.containingCanvasId&&e.containingCanvasId===t?(0,y.kc)().figjam_embeds_allowlist&&!(0,X3.Cy)(e.srcUrl)?(console.error("Could not play embed; domain not on allow-list:",e.srcUrl),null):f.createElement(qi,{isEmbedMaximized:a,nodeSelected:l,embedThumbnailNodeId:e.embedThumbnailNodeId,srcUrl:e.srcUrl}):null}),qi=f.memo(function(e){let{embedThumbnailNodeId:t,nodeSelected:n,srcUrl:a,isEmbedMaximized:l}=e,r=f.useRef(null),i=f.useRef(null),o=f.useRef(null),s=f.useRef(null),c=(0,lb._X)({subscribeToUpdates_expensive:!0}),d=function(e,t){let[n,a]=f.useState(!1),[l,r]=f.useState(!1);return f.useEffect(()=>{!e&&l&&r(!1)},[e,l]),f.useEffect(()=>{function e(e){if(t.current){let n=t.current.getBoundingClientRect();e.clientX>n.left&&e.clientX<n.right&&e.clientY>n.top&&e.clientY<n.bottom&&a(!0)}}function l(e){if(t.current&&n){a(!1);let n=t.current.getBoundingClientRect();e.clientX>n.left&&e.clientX<n.right&&e.clientY>n.top&&e.clientY<n.bottom&&r(!0)}}return document.addEventListener("pointerdown",e),document.addEventListener("pointerup",l),()=>{document.removeEventListener("pointerdown",e),document.removeEventListener("pointerup",l)}},[n,t]),l||!n&&e}(n,i);return f.useEffect(()=>{var e;let n=null==(e=(0,rt.EE)("active-embed",[t],e=>{if(!e.position){ei.glU.setActiveEmbed("");return}s.current=e.position,qc(i,c,s,o,l,d)}).currentNodePosition[t])?void 0:e.position;return n?(s.current=n,qc(i,c,s,o,l,d)):ei.glU.setActiveEmbed(""),()=>{(0,rt.lB)("active-embed")}},[t,l,d,c]),f.createElement(f.Fragment,null,f.createElement("div",{className:l?"embed_overlay--maximizedIframePositioner--BvF7x":void 0,ref:i},f.createElement(qs,{ref:r,key:t+a,srcUrl:a,autofocus:d})),l&&f.createElement(qo,{modalTargetRef:o}))});function qo(e){let t=(0,e2.Xr)(X7.n),{modalTargetRef:n}=e,a=()=>{t({type:"MINIMIZE"})};return f.createElement(cK.Nb,{className:"embed_overlay--embedModal--NmRO5",hide:a,disableClickOutsideToHide:!1,disableKeyboardEventPropagation:!0},f.createElement("div",{className:"embed_overlay--embedModalMenuBackground--xwJaH",onMouseDown:a},f.createElement("div",{className:"embed_overlay--embedModalMenuContainer--03E8r",onMouseDown:e=>e.stopPropagation()},f.createElement(WP.W1,{testID:"embedMenu"},f.createElement(qt.e,{inModal:!0}),f.createElement(qe,null),f.createElement(WP.wv,null),f.createElement(X8.S,{inModal:!0})))),f.createElement("div",{className:"embed_overlay--embedModalContentContainer--jP-31"},f.createElement("div",{ref:n,className:"embed_overlay--embedModalTarget--hxGi-"})))}let qs=f.forwardRef(function(e,t){let n=(0,_.wA)(),[a,l]=f.useState(!1),r=f.useRef(null),{srcUrl:i,autofocus:o}=e;return f.createElement("div",{className:"embed_overlay--loadingIFrameContainer--FIfGE"},!a&&f.createElement("div",{className:"embed_overlay--iframeLoadingPlaceholder--uAVFk"}),f.createElement("iframe",{key:i,ref:t||r,"data-embed-iframe":!0,className:`embed_overlay--iframe--FcmB0${a?"":" embed_overlay--iframeHidden--xwbj9"}`,src:i,onLoad:()=>{let e=t&&t.current||r.current;e&&o&&e.focus(),l(!0)},onMouseOver:()=>{var e;null==(e=ei.h3O)||e.sendChatMessage("",""),n(X6.Ho())},frameBorder:"0",allowFullScreen:!1,title:(0,eN.t)("whiteboard.embeds.embed_overlay_iframe_title")}))});function qc(e,t,n,a,l,r){if(!e.current||!t||!n.current)return;let i=e.current,o=n.current;if(l){if(!a.current)return;let e=a.current.getBoundingClientRect();i.style.position="fixed",i.style.height=`${e.height}px`,i.style.width=`${e.width}px`,i.style.transform=`translate(${e.x}px, ${e.y}px)`,i.style.pointerEvents="all"}else{let e=(0,lb.Yb)(t,o);i.style.position="fixed",i.style.height=`${o.height}px`,i.style.width=`${o.width}px`,i.style.transform=`translate(${e.x+t.x}px, ${e.y+t.y}px) rotate(${o.angle}deg) scale(${t.zoomScale})`,i.style.transformOrigin="top left",r?i.style.pointerEvents="all":i.style.pointerEvents="none"}}(0,lf.hG)(lw.tui);var qd=n(396719),qu=n(60815);let qm=f.memo(function(e){let{nodeId:t}=e,n=f.useRef(null),a=f.useRef(null),l=(0,lb._X)({subscribeToUpdates_expensive:!0});return f.useEffect(()=>{var e;let r=null==(e=(0,rt.EE)(`loading-embed-${t}`,[t],e=>{if(!e.position){ei.glU.removeLoadingEmbed(t);return}a.current=e.position,qf(n,l,a)}).currentNodePosition[t])?void 0:e.position;return r?(a.current=r,qf(n,l,a)):ei.glU.removeLoadingEmbed(t),()=>{(0,rt.lB)(`loading-embed-${t}`)}},[t,l]),f.createElement("div",{ref:n},f.createElement(qp,null))});function qp(){return f.createElement("span",{className:"loading_embed_overlay--root--UKqJ8"},f.createElement(a2.B,{svg:qu.A,className:"loading_embed_overlay--spinner--bw3Cv",autosize:!0}))}function qf(e,t,n){if(!e.current||!t||!n.current)return;let a=e.current,l=n.current,r=(0,lb.Yb)(t,l),i=28*t.zoomScale;a.style.transform=`translate(${r.x+(r.width-i)/2+t.x}px, ${r.y+(r.height*qd.Ao/qd.RN-i)/2+t.y}px) rotate(${l.angle}deg) scale(${t.zoomScale})`,a.style.transformOrigin="top left",a.style.position="absolute"}var q_=n(886653),qg=n(956143),qh=n(122983);let qE=(0,cV.Ju)(function(e){return f.createElement(cK.Nb,{size:"small",className:tk.yl,disableClickOutsideToHide:!0,hide:nf.lQ},f.createElement("div",{className:tk.DD},(0,eN.tx)("file_migration.updating.title")),f.createElement("div",{className:tk.jE},(0,eN.tx)("file_migration.updating.message")))},"FileMigrationWarningModal");var qv=n(834898),qy=n(881512);let qb=new Map,qC=f.memo(function(){let e=(0,EO.GQ)(),t=(0,S.md)(OY.Lc),n=(0,_.d4)(Iy.ao),a=(0,af.q5)(),l=(0,_.d4)(e=>e.versionHistory),r=(0,_.d4)(e=>e.leftPanel),i=(0,EO.cT)(),{pagesList:o,pageToNumChangesMap:s,isComparingChanges:c}=function(){let e=(0,EO.n0)(),t=(0,_.d4)(e=>!!(0,y.kc)().version_diffing&&e.mirror.appModel.activeCanvasEditModeType===l8.m1T.COMPARE_CHANGES);return f.useMemo(()=>{if(!t)return{pagesList:e,pageToNumChangesMap:qb,isComparingChanges:t};let n=(0,TD.ee)(e);return{pagesList:e.filter(e=>n.has(e.nodeId)),pageToNumChangesMap:n,isComparingChanges:t}},[t,e])}(),d=(0,aN.J2)(l8.Ez5.uiState().showCanvasSearch),u=(0,n6.GS)(),m=F3({isReadOnly:i,pagesList:o}),p=(0,eb.aV)();(0,EO.bi)();let g=!!a&&n,h=l.compareId;return f.useEffect(()=>{g&&(0,n2.YQ)({id:"Found Updates To Publish"})},[g]),f.createElement(CW,{ignoreRulers:p},f.createElement(CV,null),f.createElement(Cn.$,null,u&&f.createElement(CK,null),u&&f.createElement(CT,null),c&&h&&f.createElement(qy.ZI,{compareId:h,versions:l.versions}),d?f.createElement(AV.Provider,{value:!0},f.createElement(O_,{showFilter:!0})):c&&!o.length?f.createElement("div",{className:a8.cx.p16.bb1.bSolid.colorBorder.$},(0,eN.tx)("collaboration.feedback.no_visible_changes")):f.createElement(F4,{recordingKey:"pagesPanel",isReadOnly:i,width:e,pagesList:o,hasTeamLibraryUpdates:t||g,activeTab:r.activeTab,showTabs:!i,isDevHandoff:!1,isDevHandoffOverview:!1,isComparingChanges:c,pageToNumChanges:s,onPageContextMenu:m})))});function qw(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 17H19C19.5523 17 20 16.5523 20 16V7.68748V4.99998C20 4.4477 19.5523 3.99998 19 3.99998L8 3.99998C7.44772 3.99998 7 4.4477 7 4.99998V6.00002L6 6.00002L6 4.99998C6 3.89542 6.89543 2.99998 8 2.99998H19C20.1046 2.99998 21 3.89542 21 4.99998V7.68748V16C21 17.1046 20.1046 18 19 18H18V17ZM5 20.0001H16C16.5523 20.0001 17 19.5524 17 19.0001V10.6876V8.00011C17 7.44782 16.5523 7.00011 16 7.00011H5C4.44772 7.00011 4 7.44782 4 8.00011V19.0001C4 19.5524 4.44772 20.0001 5 20.0001ZM16 21.0001H5C3.89543 21.0001 3 20.1047 3 19.0001V8.00011C3 6.89554 3.89543 6.00011 5 6.00011H16C17.1046 6.00011 18 6.89554 18 8.00011V10.6876V19.0001C18 20.1047 17.1046 21.0001 16 21.0001ZM10.5 14.5C11.0523 14.5 11.5 14.0523 11.5 13.5C11.5 12.9477 11.0523 12.5 10.5 12.5C9.94772 12.5 9.5 12.9477 9.5 13.5C9.5 14.0523 9.94772 14.5 10.5 14.5ZM14.5 13.5C14.5 14.0523 14.0523 14.5 13.5 14.5C12.9477 14.5 12.5 14.0523 12.5 13.5C12.5 12.9477 12.9477 12.5 13.5 12.5C14.0523 12.5 14.5 12.9477 14.5 13.5ZM7.5 14.5C8.05228 14.5 8.5 14.0523 8.5 13.5C8.5 12.9477 8.05228 12.5 7.5 12.5C6.94772 12.5 6.5 12.9477 6.5 13.5C6.5 14.0523 6.94772 14.5 7.5 14.5Z",fill:"var(--color-icon)"}))}function qT({pageCount:e,...t}){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...t},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 17H18V18H19C20.1046 18 21 17.1046 21 16V7.68748V4.99998C21 3.89542 20.1046 2.99998 19 2.99998H8C6.89543 2.99998 6 3.89542 6 4.99998L6 6.00002L7 6.00002V4.99998C7 4.4477 7.44772 3.99998 8 3.99998L19 3.99998C19.5523 3.99998 20 4.4477 20 4.99998V7.68748V16C20 16.5523 19.5523 17 19 17ZM16 20.0001H5C4.44772 20.0001 4 19.5524 4 19.0001V8.00011C4 7.44782 4.44772 7.00011 5 7.00011H16C16.5523 7.00011 17 7.44782 17 8.00011V10.6876V19.0001C17 19.5524 16.5523 20.0001 16 20.0001ZM5 21.0001H16C17.1046 21.0001 18 20.1047 18 19.0001V10.6876V8.00011C18 6.89554 17.1046 6.00011 16 6.00011H5C3.89543 6.00011 3 6.89554 3 8.00011V19.0001C3 20.1047 3.89543 21.0001 5 21.0001Z",fill:"var(--color-icon)"}),f.createElement("text",{x:"10.5",y:"14.5",dominantBaseline:"middle",textAnchor:"middle",fontFamily:"Inter",fontWeight:"550",fontSize:"9",fill:"var(--color-icon)"},e))}let qx="pages_dropdown--pagesDropdownButton--9KRC-",qN="pages_dropdown--active--R5AFZ",qS="pages_dropdown--pagesDropdownIcon--nnevp";function qk({triggerType:e,pagesList:t,nonDividerPageCount:n,isDropdownOpen:a,setIsDropdownOpen:l,isReadOnly:r}){var i;let o=(0,f.useRef)(null),s=(0,f.useCallback)(()=>l(!1),[l]),c=(0,f.useCallback)(()=>l(!a),[l,a]),d=null==(i=o.current)?void 0:i.getBoundingClientRect(),u=(()=>{switch(e){case JR.ADD_PAGE:return f.createElement(qI,{isDropdownOpen:a,toggleDropdown:c,ref:o});case JR.VIEW_PAGES:return f.createElement(qA,{pageCount:n,isDropdownOpen:a,toggleDropdown:c,ref:o});default:(0,nm.xb)(e)}})();return f.createElement(f.Fragment,null,u,a&&d&&f.createElement(qO,{targetRect:d,close:s},f.createElement(qL,null),f.createElement(qP,{pagesList:t,isReadOnly:r,closeDropdown:s})))}let qI=(0,f.forwardRef)(function({isDropdownOpen:e,toggleDropdown:t},n){return f.createElement(rd.E,{className:nb()(qx,"pages_dropdown--singlePage--RS1Vj",{[qN]:e}),onClick:t,"data-tooltip":(0,eN.t)("pages_panel.toolbar.add_pages_tooltip"),"data-tooltip-type":nx.Ib.TEXT,"aria-label":(0,eN.t)("pages_panel.toolbar.add_pages_tooltip"),"aria-pressed":e,ref:n},f.createElement("span",{className:qS},f.createElement(qT,null)))}),qA=(0,f.forwardRef)(function({pageCount:e,isDropdownOpen:t,toggleDropdown:n},a){let l=(0,cm.nn)();return f.createElement(rd.E,{className:nb()(qx,{[qN]:t}),onClick:n,"data-tooltip":(0,eN.t)("pages_panel.toolbar.view_pages_tooltip"),"data-tooltip-type":nx.Ib.TEXT,"aria-label":(0,eN.t)("pages_panel.toolbar.view_pages_tooltip"),"aria-pressed":t,ref:a},f.createElement("span",{className:qS},e>9?f.createElement(qw,null):f.createElement(qT,{pageCount:e})),f.createElement("span",{className:"pages_dropdown--pagesDropdownButtonText--vxa32 ellipsis--ellipsis--Tjyfa"},l))});function qO({targetRect:e,close:t,children:n}){let a=(0,_.wA)(),l=!!(0,S.md)(FV.l7),r={top:e.y+e.height+16,left:e.x,width:200,maxHeight:312};return(0,f.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()};return window.addEventListener("keydown",e),window.addEventListener("blur",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("blur",t)}},[t]),f.createElement(nC.W.DropdownWithScrim,{className:"pages_dropdown--dropdown--wiw73",style:r,dispatch:a,closeDropdown:t,positionFixed:!0},f.createElement("div",{onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),onKeyDown:e=>{"Escape"===e.key&&l&&e.stopPropagation()},className:"pages_dropdown--mouseEventCatcher--ICMZO"},n))}function qL(){let e=JF();return f.createElement("div",{className:"pages_dropdown--dropdownHeader--K3jZk"},f.createElement("span",{className:"pages_dropdown--dropdownHeaderText--dp9ZX ellipsis--ellipsis--Tjyfa"},(0,eN.tx)("fullscreen.pages_panel.pages")),e&&f.createElement(FC,null))}function qP({pagesList:e,isReadOnly:t,closeDropdown:n}){let[a,l]=(0,f.useState)(!1),r=(0,f.useRef)(null),i=(0,f.useCallback)(e=>{l(e>0)},[]);JH({pagesList:e,scrollContainerRef:r});let o=F3({isReadOnly:t,pagesList:e,shouldShowDuplicateOption:JB()});return f.createElement(i6.P,{horizontalScrollingDisabled:!0,onScroll:i,className:nb()("pages_dropdown--scrollContainer--jAJ5C",{"pages_dropdown--withTopBorder--LkCLX":a}),innerClassName:"pages_dropdown--scrollContainerContents--12wMh",ref:r},f.createElement(Fj,{pages:e,isReadOnly:t,onContextMenu:o,isComparingChanges:!1,onPageSwitch:n,activePageShouldUseBrandColor:!0}))}function qD({containerRef:e}){var t,n,a,l;let r=function(){let e=(0,af.q5)(),t=(0,S.md)(tn.lu);return e?e.name:t?t.name:(0,eN.t)("fullscreen.filename_view.title_placeholder")}(),i=(0,_.wA)(),o=(0,nT.U)(),s=(null==o?void 0:o.type)===sQ.eg,c=(0,_.d4)(e=>e.isRenaming),d=f.useRef(null),u=null==(t=d.current)?void 0:t.getBoundingClientRect(),m=null==(n=e.current)?void 0:n.getBoundingClientRect(),p=CU(d,!c),g={top:(null==m?void 0:m.top)??0,bottom:(null==m?void 0:m.bottom)?(null==m?void 0:m.bottom)+3:0,left:(null==u?void 0:u.left)??0,right:(null==u?void 0:u.right)??0,width:(null==u?void 0:u.width)??0,height:(null==u?void 0:u.height)??0},[h,E]=f.useState(!1);return f.useEffect(()=>{if(h){let e=setTimeout(()=>{E(!1),et.Y5.triggerAction("toggle-sidebar",{source:"figjam-panel"}),i(j.b({[c7]:!0}))},200);return()=>clearTimeout(e)}},[i,h]),f.createElement(f.Fragment,null,c?f.createElement("span",{className:"panel_toggle--fileNameInput--hzx4e panel_toggle--containerBase--4sK6N",style:{width:Math.max(150,p??0)}},f.createElement(sQ.o3,null)):f.createElement(rd.E,{className:"panel_toggle--button--Z3V1x panel_toggle--containerBase--4sK6N",ref:d,onClick:()=>{E(!0)},onDoubleClick:()=>{E(!1),i(K.vg())},onContextMenu:e=>{if(e.preventDefault(),s){i(nI.oB());return}i(nI.j7({type:sQ.eg,data:{targetRect:g}}))},"aria-label":(0,eN.t)("fullscreen_actions.expand-figjam-left-panel"),"data-tooltip":(0,eN.t)("fullscreen_actions.expand-figjam-left-panel"),"data-tooltip-type":nx.Ib.TEXT,as:"button"},f.createElement("span",{className:"panel_toggle--text--u2ukq ellipsis--ellipsis--Tjyfa"},r)),f.createElement(Cc.G,{dropdownTargetRect:null==(a=null==o?void 0:o.data)?void 0:a.targetRect,dispatch:i,dropdownVisible:s,leanPadding:0,activatePathOnMount:null==(l=null==o?void 0:o.data)?void 0:l.activatePathOnMount,trackEvent:Z.sx}))}let qR="figjam_collapsed_left_panel--divider--l9NPO";function qM({pagesList:e,isReadOnly:t}){let[n,a]=(0,f.useState)(!1),l=f.useRef(null),r=(0,nW.U1)(l),i=(0,a6.am)(),o=(0,f.useMemo)(()=>e.filter(e=>!e.isDivider).length,[e]),s=JM({nonDividerPageCount:o,isDropdownOpen:n}),c=(0,af.q5)(),{renamingPageId:d,commitRenaming:u}=Fz(e),m=!!d,p=(0,f.useCallback)(e=>{a(e),e&&!n&&i("pages_panel_open_toggle",{isPagesOpen:e},{forwardToDatadog:!0}),!e&&m&&u()},[n,u,m,i]);return f.createElement(qB,{ref:r,onboardingKey:c4},f.createElement(qH,null,f.createElement(tr.xG,null)),f.createElement(qG,null,f.createElement(qD,{containerRef:l})),f.createElement(qH,null,f.createElement(qV,null,c&&f.createElement("div",{className:"figjam_collapsed_left_panel--paidStatusBadgeWrapper--u7dYt"},f.createElement(Ci.s,{openFile:c})),f.createElement(tr.n8,null))),!!s&&f.createElement(f.Fragment,null,f.createElement(qU,null),f.createElement(qG,null,f.createElement(qk,{triggerType:s,pagesList:e,isDropdownOpen:n,setIsDropdownOpen:p,nonDividerPageCount:o,isReadOnly:t}))))}function qF(){return f.createElement(qB,null,f.createElement(qH,null,f.createElement(qz,null)),f.createElement(qG,null,f.createElement(qj,null)),f.createElement(qW,null),f.createElement(qG,null,f.createElement(qJ,null)))}let qB=f.forwardRef(function({children:e,onboardingKey:t},n){return f.createElement("div",{ref:n,className:nb()(nz.Dm,"figjam_collapsed_left_panel--container--FYM0w"),style:{maxWidth:(0,EO.JX)()},"data-onboarding-key":t},e)});function qU(){return f.createElement("div",{className:qR})}function qH({children:e}){return f.createElement("div",{className:"figjam_collapsed_left_panel--noShrink--NWpwj"},e)}function qG({children:e}){return f.createElement("div",{className:"figjam_collapsed_left_panel--upToHalfWidth--GUezb"},e)}function qV({children:e}){return f.createElement("div",{className:"figjam_collapsed_left_panel--statusSection--N5vuO"},e)}function qK({width:e}){return f.createElement("div",{className:"figjam_collapsed_left_panel--loadingPlaceholder--ejxL9",style:{width:e,visibility:"hidden"}},f.createElement(vs._b,null))}function qW(){return f.createElement("div",{className:qR,style:{visibility:"hidden"}})}function qz(){return f.createElement(qK,{width:44})}function qj(){return f.createElement("div",{className:"figjam_collapsed_left_panel--panelTogglePlaceholderContainer--qWqG-"},f.createElement(qK,{width:180}))}function qJ(){return f.createElement(qK,{width:81})}function qY(){return f.createElement(f.Fragment,null,f.createElement(qX,null),f.createElement(CT,null))}function qX(){return f.createElement("div",{className:"figjam_left_panel_header--iconSection--n7JT9"},f.createElement("div",{className:"figjam_left_panel_header--leftSide--OGLAP"},f.createElement(tr.xG,null)),f.createElement("div",{className:"figjam_left_panel_header--rightSide--Kcru4"},f.createElement(tr.n8,null),f.createElement(CM,null),f.createElement(CB,null),f.createElement(CS,{onClick:()=>et.Y5.triggerAction("toggle-sidebar",{source:"figjam-left-panel-header"}),"aria-label":(0,eN.t)("fullscreen_actions.collapse-figjam-left-panel"),"data-tooltip":(0,eN.t)("fullscreen_actions.collapse-figjam-left-panel"),"data-tooltip-type":nx.Ib.TEXT},f.createElement(CN.C,null))))}function qq(){let e=JF();return f.createElement("div",{className:"figjam_pages_panel_header--container--o2Ga7"},f.createElement("div",{className:"figjam_pages_panel_header--headerText--mvfGF"},(0,eN.tx)("fullscreen.pages_panel.pages")),f.createElement("div",{className:"figjam_pages_panel_header--buttonGroup--LWXvA"},e&&f.createElement(FC,null)))}function qZ({pagesList:e,isReadOnly:t}){let n=(0,EO.GQ)(),a=F3({isReadOnly:t,pagesList:e,shouldShowDuplicateOption:JB()}),l=(0,nW.U1)();return f.createElement(qQ,{width:n,ref:l},f.createElement("div",{className:"figjam_expanded_left_panel--noShrink--mamEZ"},f.createElement(qY,null),f.createElement(qq,null)),f.createElement(q$,{pagesList:e},f.createElement(Fj,{pages:e,isReadOnly:t,onContextMenu:a,isComparingChanges:!1,activePageShouldUseBrandColor:!0})))}let qQ=(0,f.forwardRef)(function({width:e,children:t},n){return f.createElement(Fp.w,{ref:n,className:nb()(nz.Dm,"figjam_expanded_left_panel--resizableContainer--DhTbD"),size:e,defaultSize:EO.qm,side:"right",onResize:EO.xT,style:{maxWidth:(0,EO.JX)()},id:Cn.k,"data-cancel-insertable-resource-drag-and-drop":!0},f.createElement("div",{style:{width:e},className:"figjam_expanded_left_panel--panel--rI14k"},t))});function q$({pagesList:e,children:t}){let[n,a]=(0,f.useState)(!1),l=(0,f.useRef)(null);JH({pagesList:e,scrollContainerRef:l});let r=(0,f.useCallback)(e=>{a(e>0)},[]);return f.createElement(i6.P,{horizontalScrollingDisabled:!0,onScroll:r,className:nb()("figjam_expanded_left_panel--scrollContainer--V6RoK",{"figjam_expanded_left_panel--withTopBorder--OhkVb":n}),ref:l},t)}function q0({shouldAnimate:e,children:t}){let n=(0,f.useRef)(null),a=function(e){let[t,n]=(0,f.useState)(0),a=(0,tt.Yk)(),l=(0,ti.Op)();return(f.useLayoutEffect(()=>{if(!e.current)return;let t=e.current.getBoundingClientRect(),a=t.left;n(a+t.width);let l=new ResizeObserver(t=>{var l;for(let r of t)if(e.current===r.target){let e=null==(l=r.borderBoxSize)?void 0:l[0];n(a+(e?e.inlineSize:r.contentRect.width))}});return l.observe(e.current),()=>l.disconnect()},[e]),l)?t+W0>l.left?W1({dltBottomOffset:a,collidesWithDLT:!0,collidesWithTools:!1}):W1({dltBottomOffset:a,collidesWithDLT:!1,collidesWithTools:!1}):0}(n);return f.createElement(CW,{shouldAnimate:e},f.createElement("div",{ref:n,style:{position:"absolute",top:0,left:0,bottom:a,pointerEvents:"none"}},f.createElement("div",{style:{pointerEvents:"auto",display:"contents"}},t)))}let q1=f.memo(function(){let e=(0,eb.aV)(),t=(0,EO.Ye)(),n=(0,EO.cT)(),a=(0,EO.n0)(),l=(0,eb.p8)("showUi");if((0,EO.bi)(),!l)return null;if(e)return f.createElement(q0,{shouldAnimate:!1},f.createElement(qF,null));let r=t?f.createElement(qM,{pagesList:a,isReadOnly:n}):f.createElement(qZ,{pagesList:a,isReadOnly:n});return f.createElement(q0,null,f.createElement(IJ.V,{className:"figjam_left_panel--scrollPassthrough--wFYWa"},r))}),q2=f.memo(function(){let e=(0,EO.GQ)(),t=(0,_.d4)(e=>e.leftPanel),n=(0,EO.cT)(),a=(0,EO.n0)(),l=(0,f.useMemo)(()=>a.slice(1),[a]),r=(0,aN.J2)(l8.Ez5.uiState().showCanvasSearch),i=F3({isReadOnly:n,pagesList:l});return(0,EO.bi)(),f.createElement(CW,null,f.createElement(CV,null),f.createElement(Cn.$,null,f.createElement(CK,null),f.createElement(CT,null),r?f.createElement(AV.Provider,{value:!0},f.createElement(O_,{showFilter:!0})):f.createElement(F4,{recordingKey:"pagesPanel",isReadOnly:n,width:e,pagesList:l,hasTeamLibraryUpdates:!1,activeTab:t.activeTab,showTabs:!n,isDevHandoff:!1,isDevHandoffOverview:!1,isComparingChanges:!1,onPageContextMenu:i})))});var q5=n(983724),q4=n(595755);function q3(){let e=q6((0,tM.dP)());return document.documentElement.style.setProperty("--left-panel-width",`${e}px`),e}function q6(e){return Math.max(200,Math.min(306,e||0))}function q7(e){(0,tM.UK)().sidebarSplitPosition.set(q6(e))}let q8="slides_left_panel_container--sizeContainer--wjXqJ",q9="slides_left_panel_container--panel--11KJV";function Ze(){let e=q6(Wp.R.sidebarSplitPosition);return f.createElement("div",{className:nb()(nz.Dm,q8),style:{width:e}},f.createElement("div",{className:nb()(q9,"slides_left_panel_container--loading--X7snS")},f.createElement(q4.U,null)))}function Zt({children:e,width:t,disableResizing:n,currentPageId:a}){let l=(0,nW.U1)();return a?f.createElement(Fp.w,{className:nb()(nz.Dm,q8),size:t,defaultSize:200,side:"right",disableResizing:n,onResize:q7,style:{maxWidth:306},id:Cn.k,"data-cancel-insertable-resource-drag-and-drop":!0},f.createElement("div",{ref:l,style:{width:t},className:q9},e)):null}function Zn({children:e,disableResizing:t=!1}){let n=!(0,eb.p8)("showUi"),a=(0,_.d4)(e=>{var t;return null==(t=e.mirror.appModel)?void 0:t.currentPage}),l=(0,eb.aV)(),r=q3(),i=(0,EO.Ye)(),o=(0,n6.GS)(),s=(0,sd.ff)();return i||n?null:f.createElement(f.Fragment,null,!l&&!i&&!n&&!s&&o&&f.createElement(Hf.T,{side:"left"}),l?f.createElement(Ze,null):f.createElement(Zt,{width:r,disableResizing:t,currentPageId:a},e))}var Za=n(648598),Zl=n(902237),Zr=n(992965);function Zi(){let e=(0,aN.J2)(ei.Ez5.singleSlideView().isInSingleSlideView),t=(0,af.tS)(),n=(0,f.useCallback)(e=>{"GRID"===e?(ei.Ez5.singleSlideView().exitSingleSlideView(),(0,$.Cu)({trackingContext:"grid_view_toggle",productType:"slides",fileKey:t})):(et.Y5.triggerAction("enter-single-slide-view"),(0,$.Cu)({trackingContext:"single_slide_view_toggle",productType:"slides",fileKey:t}))},[t]);return f.createElement("div",{style:dA.sx.add({width:"64px"}).$},f.createElement(Za.I.Root,{legend:f.createElement(Zl.q,null,(0,eN.t)("slides.toolbar.view_mode")),value:e?"SSV":"GRID",onChange:n,recordingKey:"slideViewToggle"},f.createElement(Za.I.Option,{value:"SSV","aria-label":(0,eN.t)("slides.toolbar.single_slide_view_toggle"),icon:f.createElement(Zs,{isSelected:e}),"data-tooltip-shortcut-key":"toggle-slide-view"}),f.createElement(Za.I.Option,{value:"GRID","aria-label":(0,eN.t)("slides.toolbar.grid_view_toggle"),icon:f.createElement(Zo,{isSelected:!e}),"data-onboarding-key":aD.b_,"data-tooltip-shortcut-key":"toggle-slide-view"})))}function Zo({isSelected:e}){let t=e?a8.cx.colorIcon.$:a8.cx.colorIconSecondary.$;return f.createElement(a2.B,{className:t,svg:Zr.A})}function Zs({isSelected:e}){let t=e?a8.cx.colorIcon.$:a8.cx.colorIconSecondary.$;return f.createElement(_X.O,{className:t})}function Zc(){let e=(0,af.q5)(),t=(0,_.d4)(e=>e.isRenaming),n=(0,n6.GS)(),a=(0,EO.Ye)(),l=q3(),r=(0,eb.aV)(),i=(0,_.d4)(e=>e.mirror.appModel.showUi),o=f.useRef(null),s=n&&!r&&i,c=CU(o,a&&!t&&s),d=(0,nW.U1)(),u=(0,f.useCallback)(e=>{(0,CO.cZ)(o,e),d(a?e:null)},[d,a]);if(!s)return null;let m=f.createElement("div",{className:"slides_left_panel_island--fileControls---hP9j"},f.createElement(Ch,null),e&&f.createElement(Ci.s,{openFile:e}),f.createElement(Cu,null));return f.createElement("div",{className:nb()(nz.Dm,"slides_left_panel_island--islandContainer--YELAt",{"slides_left_panel_island--collapsed--4lnwi":a,"slides_left_panel_island--withShadow--d2OWu":a}),style:a?t&&"number"==typeof c?{width:Math.max((0,EO.bV)(),c)}:{maxWidth:(0,EO.JX)()}:{width:l},ref:u},f.createElement(tr.xG,null),f.createElement("div",{className:nb()("slides_left_panel_island--minimizedUIContainer--wiwid",{"slides_left_panel_island--minimizedUIContainerRenaming--hrQ-f":a&&t})},a&&m,f.createElement(tr.n8,null),!a&&f.createElement(f.Fragment,null,f.createElement(CM,null),f.createElement(CB,null),f.createElement(Zi,null)),a&&!t&&f.createElement("div",{className:"slides_left_panel_island--slidesControls--ltpBI"},f.createElement(vr,null),f.createElement(Zi,null))))}let Zd=f.memo(function(){var e,t;let n=f.useRef(null);!function({ref:e}){(0,f.useEffect)(()=>{let t=t=>{let n=!!e.current&&t.target instanceof Node&&e.current.contains(t.target);ei.Ez5.singleSlideView().isCarouselFocused.set(n)};return window.addEventListener("click",t),()=>window.removeEventListener("click",t)},[e])}({ref:n});let a=(0,af.Te)(),l=(0,EO.cT)(),r=(0,EO.n0)(),i=q3(),o=(0,_.d4)(e=>e.leftPanel),[s,c]=(0,f.useState)(()=>(0,tM.UK)().slidesLayersPanelHeight.getCopy()),[d,u]=(0,f.useState)(()=>(0,tM.UK)().slidesLayersPanelExpanded.getCopy()),m=(0,aN.J2)(null==(e=ei.Ez5)?void 0:e.slidesToolMode()),p=(0,aN.J2)(ei.Ez5.uiState().showCanvasSearch),g=!p,h=m===ei.EMA.DESIGN&&!p,E=d&&h,v=F3({isReadOnly:l,pagesList:r});(0,f.useEffect)(()=>{(0,tM.UK)().slidesLayersPanelHeight.set(s),(0,tM.UK)().slidesLayersPanelExpanded.set(d)},[s,d]);let y=(null==(t=n.current)?void 0:t.clientHeight)||window.innerHeight;return f.createElement(CW,{ref:n},f.createElement(Zc,null),f.createElement(Zm,null),f.createElement(Zn,null,f.createElement(CK,null),f.createElement(CT,null),p&&f.createElement(AV.Provider,{value:!0},f.createElement(O_,{showFilter:!0})),a&&!E&&!p&&f.createElement(F4,{recordingKey:"pagesPanel",isReadOnly:l,width:i,isShowingSlidesCarousel:g,pagesList:r,hasTeamLibraryUpdates:!1,activeTab:o.activeTab,showTabs:!0,isDevHandoff:!1,isDevHandoffOverview:!1,isComparingChanges:!1,onPageContextMenu:v}),g&&f.createElement(Fp.w,{size:y-s,side:"bottom",onResize:e=>c(y-e),disableResizing:!E,unsetSizeWhenDisabled:!0,className:a8.cx.relative.flex.flexColumn.if(!E,a8.cx.flex1.overflowHidden).$},f.createElement(E8,{recordingKey:"ssvCarousel"})),h&&f.createElement("div",{className:a8.cx.flex.flexColumn.overflowHidden.if(d,a8.cx.flexGrow1).$+" pagesPanel"},f.createElement("div",{className:a8.cx.h0.wFull.bb1.bSolid.colorBorder.$}),f.createElement("button",{className:a8.cx.relative.flex.h40.itemsCenter.$,onClick:()=>u(e=>!e)},f.createElement("div",{className:a8.cx.flex.itemsCenter.$},d?f.createElement(ER.O,null):f.createElement(IW.k,null),(0,eN.tx)("fullscreen.pages_panel.layers_tab"))),d?f.createElement(Zu,{width:i}):null)))});function Zu({width:e}){let t=(0,eb.p8)("isReadOnly"),n=(0,eb.p8)("currentPage"),a=(0,aN.J2)((0,tM.UK)().showGuids),[l,r]=(0,f.useState)(0),[i,o]=(0,f.useState)(null),s=(0,_.d4)(e=>e.versionHistory),c=(0,q5.J)(),d=(0,cp.Fk)((e,t)=>{let n=e.get(t);return n?{guid:n.guid,children:n.uiOrderedChildren}:null},c);return f.createElement(Fu,{key:c||"no-slide",topNodeFields:d,includeTopNode:!1,hasPending:!1,isReadOnly:t,currentPage:n,onScroll:r,initialScrollTop:l,width:e,shouldShowGuids:a,renamingGuid:i,startRenaming:function(e){t||(o(e),aT.hq(e))},stopRenaming:function(e,n,a){t||(i&&e&&(o4.l7.user("set-node-name",()=>aT.i(i,n||"")),et.Y5.commit(),hp.wt.reportEditActionIf(n!==a,"rename-node")),o(null))},thumbnailGuid:null,versionHistory:s})}function Zm(){var e;let t=(0,EO.Ye)(),n=(0,eb.aV)(),a=(0,aN.J2)(null==(e=ei.Ez5)?void 0:e.slidesToolMode()),l=(0,_.d4)(e=>e.mirror.appModel.showUi),[r,i]=(0,f.useState)(230),o=(0,q5.J)();return(0,y.kc)().piper_layers_grid&&t&&!n&&a===ei.EMA.DESIGN&&l?f.createElement(Ke,{onSizeChange:i,bottom:0,left:0,hide:!o},f.createElement(Zu,{width:r})):null}var Zp=n(701458);let Zf="multi_edit_offscreen_indicators--indicatorGraphicBlue--rtnWM",Z_="multi_edit_offscreen_indicators--indicatorGraphicPurple--1O1nb",Zg=(0,lf.jz)(lw.J4v),Zh=(0,lf.jz)(lw.v5y),ZE=(0,lf.jz)(lw.M$q),Zv=(0,lf.jz)(lw.y9S);function Zy(){let e=(0,xF.kl)("selectionRegions"),t=(0,xM.E7)(e),n=(0,_.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.editorType===eq.nT.Design),a=n&&!!t&&t.length>=1,l=(0,lb._X)({subscribeToUpdates_expensive:a});return n&&l&&t?f.createElement(Zb,{viewportInfo:l,selectionRegions:t}):null}function Zb({viewportInfo:e,selectionRegions:t}){let n=(0,f.useContext)(fP.kw),a=(0,f.useMemo)(()=>n.getCommentsWrapperOffset(e),[n,e]),l=a.x,r=a.y,i={transform:`translate(${l}px, ${r}px)`},o=(0,n6.GS)(),s=(0,Ck.b)(),c=o&&!s,d=(0,_.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),u=(0,tM.dP)()+(c?ZE:Zg),m=(0,tM.qw)()+u+(c?ZE:Zh),p=(0,EO.Ye)(),{isPropertiesPanelCollapsed:g}=(0,H_.iT)(),h=(c&&d&&!p?u:0)-3.5,E=(c&&d&&!g?m:0)-7,v=(0,aN.J2)((0,tM.UK)().renderRulers)&&d?Zv:0,y={x:h+v,y:-3.5+v,width:e.width-E-v,height:e.height- -7-v},b={x:h+v,y:-3.5+v,width:e.width-E-v,height:e.height- -7-v};return f.createElement(f.Fragment,null,f.createElement(Zp.p,null,f.createElement("div",{"aria-hidden":!0,"data-forward-events-to-fullscreen":!0,className:"multi_edit_offscreen_indicators--overlay--NcZeV",style:i},!!(null==t?void 0:t.length)&&f.createElement("div",null,t.map((t,n)=>{let a=(0,lb.Z0)(e,{x:t.bounds.x,y:t.bounds.y}),l=(0,lb.Z0)(e,{x:t.bounds.x+t.bounds.width,y:t.bounds.y+t.bounds.height}),r={x:a.x,y:a.y,width:l.x-a.x,height:l.y-a.y};return r.x<y.x+y.width&&r.x+r.width>y.x&&r.y+r.height>y.y&&r.y<y.y+y.height?null:f.createElement(ZC,{key:n,viewportBounds:b,viewportInfo:e,indicatorViewportBounds:r,selectionBoundsScaledWidth:function(e,t){let n=Math.max(e.x,t.x);return Math.max(Math.min(e.x+e.width,t.x+t.width)-n,10)}(r,b),selectionBoundsScaledHeight:function(e,t){let n=Math.max(e.y,t.y);return Math.max(Math.min(e.y+e.height,t.y+t.height)-n,10)}(r,b),selectionRegionType:t.regionType})})))))}function ZC({viewportBounds:e,viewportInfo:t,indicatorViewportBounds:n,selectionBoundsScaledWidth:a,selectionBoundsScaledHeight:l,selectionRegionType:r}){let i=function(e,t){let n=0-t.x,a=0+e.width-t.x,l=0-t.y,r=0+e.height-t.y,i=Math.abs(n)<a?n:a,o=Math.abs(l)<r?l:r,s=n<0!=a<0,c=l<0!=r<0;return s&&c?Math.abs(i)<Math.abs(o)?{x:t.x+i,y:t.y}:{x:t.x,y:t.y+o}:!s&&c?{x:t.x+i,y:t.y}:s&&!c?{x:t.x,y:t.y+o}:{x:t.x+i,y:t.y+o}}(t,{x:n.x+n.width/2,y:n.y+n.height/2});i.x-=a/2,i.y-=l/2;let o=(0,_.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),s=(0,aN.J2)((0,tM.UK)().renderRulers)&&o?Zv:0,c=(0,n6.GS)(),d=(0,Ck.b)(),u=c&&!d,m=u?ZE:Zg,p=u?ZE:Zh,g=(0,tM.dP)()+m,h=(0,tM.qw)()+p,E=(0,EO.Ye)(),{isPropertiesPanelCollapsed:v}=(0,H_.iT)(),y=1+(o&&u&&!E?g+1:0)+s,b=Math.max(y,t.width-1-a-(o&&u&&!v?h+1:0)),C=1+s,w=Math.max(C,t.height-1-l-1),T=r4.Mi.bound(i,{min:{x:y,y:C},max:{x:b,y:w}}),x=n.y+n.height<e.y,N=n.y>e.y+e.height,S=n.x+n.width<e.x,k=n.x>e.x+e.width;T.x+=t.x,T.y+=t.y;let I=Math.min(t.width-2-(o&&u?h+g:0),a),A=Math.min(t.height-2,l);return f.createElement("div",{className:"multi_edit_offscreen_indicators--indicator--taq8e",style:{transform:`translate3D(${T.x}px, ${T.y}px, 0)`}},(x||N)&&f.createElement("div",{style:{position:"absolute",height:1.5,width:I,marginTop:N?A-1.5:0},className:nb()({[Zf]:r===hf.fV.MIXED_OR_NO_SYMBOLS,[Z_]:r===hf.fV.SYMBOLS_ONLY})}),(S||k)&&f.createElement("div",{style:{position:"absolute",left:0,height:A,width:1.5,marginLeft:k?I-1.5:0},className:nb()({[Zf]:r===hf.fV.MIXED_OR_NO_SYMBOLS,[Z_]:r===hf.fV.SYMBOLS_ONLY})}))}var Zw=n(60027);function ZT(e,t,n,a){let l;let{padding:r,margin:i,...o}=(0,_.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),s=(0,lb._X)({subscribeToUpdates_expensive:!0}),c=(null==s?void 0:s.zoomScale)||1,[d,u]=f.useState(e),[m,p]=f.useState(!0),g=f.useRef(null),h=f.useRef(null),[E,v]=f.useState(0),[C,w]=f.useState(!1),T=f.useCallback(e=>{switch(o.mode){case ei.nzw.FRAME_NAME:v(Math.min(e,n*c)+7);break;case ei.nzw.SECTION_NAME:let t=n*c;e<t?v(e):v(t-2*i.x);break;case ei.nzw.FLOW_STARTING_POINT_NAME:v(Math.min(e,n)+4);break;case ei.nzw.MEASUREMENT_FREE_TEXT:v(Math.min(e,n*c)+8.5)}},[o.mode,n,c,i.x]);f.useLayoutEffect(()=>{h.current&&T(h.current.scrollWidth)},[d,T]),f.useEffect(()=>{e&&(p(!0),u(e))},[e]),f.useEffect(()=>{let e=e=>{let t=!(g.current&&g.current.contains(e.target)),n=document.querySelector('[data-resource-id="rename-selection"]'),a=e.target&&n&&n.contains(e.target);t&&!a&&ei.glU.hideOnCanvasNameEditor()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let x=n_.AF("onCanvasRename","change",e=>{let t=e.target.value;(!a||t.length<=a)&&u(e.target.value)}),N=n_.v_("onCanvasRename","keydown",e=>{if(!C)switch(e.key){case"Escape":case"Enter":case"Tab":e.preventDefault(),p(!1),t(d),et.Y5.commit(),ei.glU.hideOnCanvasNameEditor();break;case"=":case"-":(0,b.Fo)(e)&&(0,Aw.f7)(e,!0)}});if(!s)return null;let S={},k=(0,lb.Z0)(s,{x:o.x,y:o.y},!1),I={x:k.x+s.x,y:k.y+s.y};if(o.mode===ei.nzw.FLOW_STARTING_POINT_NAME&&(I.x-=32+E,I.y=Math.round(I.y)),(0,y.kc)().dt_frame_status_canvas&&o.mode===ei.nzw.FRAME_NAME){let e=(0,rE.Cc)(5,9,(s.zoomScale-.1)*5);e=(0,rE.qE)(e,5,9)-3,I.y-=e}switch(o.mode===ei.nzw.MEASUREMENT_FREE_TEXT?o.invertTextPosition?S.transform=o.isCentered?`translate(calc(${I.x}px - 50%), ${I.y-24}px)`:`translate(calc(${I.x-6}px - 100%), ${I.y-9.5}px)`:S.transform=o.isCentered?`translate(calc(${I.x}px - 50%), ${I.y+7}px)`:`translate(${I.x+6}px, ${I.y-9.5}px)`:S.transform=`translate(${I.x}px, ${I.y}px) rotate(${o.angle}deg)`,o.mode){case ei.nzw.FRAME_NAME:l="on_canvas_name_editor--frameNameInput--VpLPf sf_pro--uiFontWithSFProFallback--m-p9V";break;case ei.nzw.FLOW_STARTING_POINT_NAME:l="on_canvas_name_editor--flowStartingPointNameInput--lLEZF";break;case ei.nzw.MEASUREMENT_FREE_TEXT:l="on_canvas_name_editor--measurementFreeTextInput--gJle8 sf_pro--uiFontWithSFProFallback--m-p9V"}return{containerRef:g,measurerRef:h,containerStyle:S,inputClassname:l,editingName:d,onFocus:e=>{e.target.select(),h.current&&T(h.current.scrollWidth)},onChange:x,onKeyDown:N,onBlur:e=>{m&&(t(e.target.value),et.Y5.commit(),e.relatedTarget&&"focus-target"===e.relatedTarget.className&&ei.glU.hideOnCanvasNameEditor())},width:E,setIsComposing:w}}function Zx(e){let t=ZT(e.name,e.setName,e.maxWidth,e.maxNameLength);if(!t)return null;let{containerRef:n,measurerRef:a,containerStyle:l,editingName:r,onFocus:i,onChange:o,onKeyDown:s,onBlur:c,width:d,setIsComposing:u,inputClassname:m}=t;return f.createElement("div",{ref:n,className:nb()(e.containerClassname,nz.Dm,"on_canvas_name_editor--containerOnLight--6zUKs"),style:l},f.createElement("span",{ref:a,className:"on_canvas_name_editor--measurer--KTnSp"},r),f.createElement("input",{autoFocus:!0,dir:"auto",className:m,style:{width:`${d}px`},value:r,onFocus:i,onChange:o,onKeyDown:s,onBlur:c,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,onCompositionEnd:()=>u(!1),onCompositionStart:()=>u(!0)}))}function ZN(){let e=(0,_.d4)(e=>e.mirror.selectionProperties.name),t=(0,_.d4)(e=>e.mirror.selectionProperties.width),n=(0,xP.uQ)();return e&&t&&n?f.createElement(Zx,{name:e,setName:t=>{e&&(hp.wt.reportEditActionIf(e!==t,"rename-frame"),o4.l7.user("rename-frame",()=>aT.i(n,t)))},maxWidth:t}):null}function ZS(){var e;let[t,n]=(0,xF.lJ)("prototypeStartingPoint"),a=(null==(e=(0,xM.E7)(t))?void 0:e.name)||"";return a?f.createElement(Zx,{name:a,setName:e=>{var a,l;e&&n({name:e,description:(null==(a=(0,xM.E7)(t))?void 0:a.description)||"",position:(null==(l=(0,xM.E7)(t))?void 0:l.position)||""})},maxWidth:93,containerClassname:"on_canvas_name_editor--flowStartingPointNameContainer--JdVwd"}):null}function Zk(){let{measurementId:e,initMeasurementText:t}=(0,_.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),n=(0,_.d4)(e=>e.mirror.appModel.currentPage),a=f.useMemo(()=>ei.w3z.findMeasurement(e,n),[e,n]),l=f.useRef(!(null==a?void 0:a.freeText));return a?f.createElement(Zx,{name:t,setName:e=>{let n=lE.q.instance.get(a.fromNode);if(n){if(l&&e===t)return;o4.l7.user("free-text-annotation-measurement",()=>{n.updateMeasurementFreeText(a.id,e)})}},maxWidth:93,maxNameLength:20}):null}function ZI(){let e=(0,_.d4)(e=>e.mirror.selectionProperties.name),t=(0,_.d4)(e=>e.mirror.selectionProperties.width);return null!=e&&t?f.createElement(ZA,{name:e,setNameWithNodeId:(t,n)=>{hp.wt.reportEditActionIf(e!==n,"rename-section"),o4.l7.user("rename-section",()=>aT.i(t,n?n.trim():""))},maxWidth:t}):null}function ZA(e){let{name:t,setNameWithNodeId:n,maxWidth:a}=e,l=(0,xP.uQ)(),r=ZT(t,e=>{l&&n(l,e)},a),i=(0,_.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===ei.m1T.DESIGN_LAYOUT),{fontSize:o,top:s,left:c,height:d,horizontalPadding:u,verticalPadding:m,borderRadius:p}=function(e,t,n){let{fontSize:a,padding:l,margin:r,cornerRadius:i}=(0,_.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),o=ei.qmM.editorTypeConfig().showBigSectionNamePills(),s=l.x,c=l.y,d=o?24:2*l.y+a,u=0,m=-r.y-d,p=ei.qmM.editorTypeConfig().sectionNestedZoomLevel();return(!e||t<=p)&&(u=r.x,m=r.y),{fontSize:a,height:d,top:m,left:u,horizontalPadding:s,verticalPadding:c,borderRadius:i}}((0,_.d4)(e=>{if(null===l)return!1;let t=e.mirror.sceneGraph.get(l),n=e.mirror.appModel.currentPage,a=!!(null==t?void 0:t.isResponsiveSet);return t&&("SECTION"===t.type||a)&&t.parentGuid===n}),Math.round(100*(0,lb._X)({subscribeToUpdates_expensive:!0}).zoomScale),0);if(!r||!l)return null;let{containerRef:g,measurerRef:h,containerStyle:E,editingName:v,onFocus:y,onChange:b,onKeyDown:C,onBlur:w,width:T,setIsComposing:x}=r,N=i?"normal":500;return f.createElement("div",{ref:g,className:`on_canvas_name_editor--sectionNameContainer--D8aez ${nz.Dm}`,style:E},f.createElement("span",{ref:h,className:"on_canvas_name_editor--sectionMeasurer--kfBij",style:{fontSize:o,fontWeight:N,paddingLeft:u,paddingRight:u,paddingTop:m,paddingBottom:m}},v),f.createElement("input",{autoFocus:!0,dir:"auto",className:"on_canvas_name_editor--sectionNameInput--MgIUi",style:{width:`${T}px`,fontSize:o,fontWeight:N,left:c,top:s,height:d,borderRadius:p,paddingLeft:u,paddingRight:u,paddingTop:m,paddingBottom:m},value:v,onFocus:y,onChange:b,onKeyDown:C,onBlur:w,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,onCompositionEnd:()=>x(!1),onCompositionStart:()=>x(!0)}))}var ZO=n(299503),ZL=n(102930),ZP=n(520425);function ZD(e){let t=(0,ew.iZ)();return f.createElement(Y.fu,{name:"Starter team edit confirmation modal",properties:{userId:null==t?void 0:t.id,userEmail:null==t?void 0:t.email}},f.createElement(cK.Rw,{confirmationTitle:(0,eN.t)("fullscreen.starter_team_edit_modal.open_this_link"),confirmText:"Continue",onConfirm:()=>{(0,Z.sx)("Starter File Edit Modal Confirm Clicked",{fileKey:e.fileKey}),ZP.L.createStarterTeamFileRole({key:e.fileKey})},disableClickOutsideToHide:!0,hideOnConfirm:!1,size:"small",hideCancel:!1,hideClose:!0,onCancel:()=>{(0,Z.sx)("Starter File Edit Modal Cancel Clicked",{fileKey:e.fileKey}),tg.Ay.redirect("/files/recents-and-sharing")}},f.createElement("div",{className:tk.jE},(0,eN.tx)("fullscreen.starter_team_edit_modal.when_you_open_this_link_your_email_may_be_visible",{email:null==t?void 0:t.email}))))}function ZR(){return(0,_.d4)(e=>e.progressBarState)}let ZM=(0,q_.xx)((e,t,n)=>{e(r6.gI()),e(qg.mV({}))});function ZF(){switch((0,eb.p8)("onCanvasNameEditorInfo").mode){case l8.nzw.FRAME_NAME:return f.createElement(ZN,null);case l8.nzw.FLOW_STARTING_POINT_NAME:return f.createElement(ZS,null);case l8.nzw.SECTION_NAME:return f.createElement(ZI,null);case l8.nzw.MEASUREMENT_FREE_TEXT:return f.createElement(Zk,null);default:return null}}function ZB(){let e=ZR(),t=(0,_.d4)(e=>e.showingOpenDesktopAppModal),n=(0,_.wA)();if(e.mode!==l8.Oin.OFF)return f.createElement(f.Fragment,null);switch(t){case uP.kF.FOR_OPEN:return f.createElement(ZL.g,{dispatch:n});case uP.kF.FOR_MENU:return f.createElement(ZO.s,{dispatch:n})}return f.createElement(f.Fragment,null)}function ZU(e){let t=(0,af.q5)(),n=(0,ew.iZ)();return e.showStartModal&&n&&t&&t.key?f.createElement(ZD,{fileKey:t.key}):f.createElement(f.Fragment,null)}function ZH(){let e=(0,f.useRef)(null),t=(0,f.useRef)(!1),n=ZR(),a=(0,_.wA)(),l=(0,_.d4)(e=>e.needsUpgrade),r=(0,f.useCallback)(()=>{null!==e.current&&(clearTimeout(e.current),e.current=null)},[e]),i=(0,f.useCallback)(()=>{r(),e.current=setTimeout(()=>{t.current=!0,l&&n.mode!==l8.Oin.OFF&&a((0,ty.to)({type:qE}))},2e4)},[l,n,a,r]),o=(0,f.useCallback)(()=>{t.current&&a(ty.Ce()),t.current=!1,r()},[t,r,a]);(0,f.useEffect)(()=>(et.Y5.fromFullscreen.on("multiplayerConnect",i),et.Y5.fromFullscreen.on("multiplayerDisconnect",r),et.Y5.fromFullscreen.on("multiplayerGotSchema",o),()=>{et.Y5.fromFullscreen.removeListener("multiplayerConnect",i),et.Y5.fromFullscreen.removeListener("multiplayerDisconnect",r),et.Y5.fromFullscreen.removeListener("multiplayerGotSchema",o),r()}),[r,i,o])}function ZG(e,t,n){!t.current&&function(e,t){if(t===l8.NLJ.VECTOR_PENCIL||t===l8.NLJ.ERASER||t===l8.NLJ.HIGHLIGHTER){var n;return n="figjam",(0,$.uE)("Pointer Input",ET.D.getState(),{inputSource:e.pointerType,tool:function(e){switch(e){case l8.NLJ.VECTOR_PENCIL:return"VECTOR_PENCIL";case l8.NLJ.ERASER:return"ERASER";case l8.NLJ.HIGHLIGHTER:return"HIGHLIGHTER"}}(t),productType:n}),!0}return!1}(e,n)&&(t.current=!0)}function ZV(e,t){t.current||(t.current=!0)}function ZK({commentsDetailContainerRef:e}){var t;let n=(0,eb.p8)("topLevelMode")===l8.lyf.HISTORY,a=(0,_.d4)(e=>e.openFile),l=(0,_.d4)(e=>e.user),r=(0,eb.p8)("currentPage"),i=(0,_.d4)(e=>e.comments),o=(0,tR.l7)(),s=(null==(t=i.activeThread)?void 0:t.id)||null,c=i.showOnlyParticipating,d=i.showResolved;return f.createElement(f.Fragment,null,f.createElement(yf.Ay,null),l&&a&&!n&&!o&&f.createElement(qv.$2,{showOnlyParticipatingComments:c,showResolvedComments:d,pageId:r,activeId:s,renderDetailContainerInPortal:!0,detailContainerPortal:e.current}),f.createElement(Zw.yL,null),f.createElement(Zy,null))}function ZW(){var e;null==(e=l8.h3O)||e.detach();let t=document.getElementById("fullscreen-root");null==t||t.remove()}function Zz(){let e=(0,Q.E3)(),t=e===eq.nT.Design,n=e===eq.nT.Sites,a=e===eq.nT.Whiteboard,l=e===eq.nT.Slides,r=e===eq.nT.DevHandoff,i=(0,tR.l7)(),o=(0,n6.GS)();return(0,Kh.T)()?null:r||i?f.createElement(l7.tH,{boundaryKey:"DevModeLeftPanel",fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:bU.eBU.DEVELOPER_TOOLS}},f.createElement(Kp,null)):t?f.createElement(qC,null):n?f.createElement(q2,null):l?f.createElement(Zd,null):a&&o?f.createElement(q1,null):null}var Zj=n(385754),ZJ=n(405070),ZY=n(630978),ZX=n(802411),Zq=n(221537),ZZ=n(12519);let ZQ="stack_controls--input--gK1jo text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",Z$="stack_controls--scrubbableControl--b1ChI",Z0="stack_controls--inputSvg--wFizL",Z1="stack_controls--stackSpacingRow--Uus3H";function Z2(){let e=(0,aN.J2)(ei.Ez5.canvasViewState().focusedStackRegion);if(!e)return null;let{region:t,focus:n}=e;return t===ei.RN9.SPACING?f.createElement(Z4,{focusOnMount:n}):t===ei.RN9.COUNTER_SPACING?f.createElement(Z3,{focusOnMount:n}):f.createElement(Z6,{stackRegion:t,focusOnMount:n})}let Z5=e=>{if(e.keyCode===b.Uz.TAB){e.preventDefault(),e.currentTarget.blur();let t=e.shiftKey;ei.Qa7.tabActiveStackRegion(t)}};function Z4({focusOnMount:e}){return f.createElement(iy.fI,{className:Z1},f.createElement(ZZ.KI,{focusOnMount:e,outerClassName:Z$,inputClassName:ZQ,svgClassName:Z0,onBlur:ei.Qa7.clearActiveStackRegion,onKeyDown:Z5,onPaste:Z7,noBorderOnFocus:!0,recordingKey:"stackSpacingControl",inputTestId:"stackSpacingControl",source:"canvas",onCanvasUI:!0}))}function Z3({focusOnMount:e}){return f.createElement(iy.fI,{className:Z1},f.createElement(ZY.q,{focusOnMount:e,outerClassName:Z$,inputClassName:ZQ,svgClassName:Z0,onBlur:ei.Qa7.clearActiveStackRegion,onKeyDown:Z5,onPaste:Z7,noBorderOnFocus:!0,recordingKey:"stackCounterSpacingControl",inputTestId:"stackCounterSpacingControl",source:"canvas",onCanvasUI:!0}))}function Z6({stackRegion:e,focusOnMount:t}){let[n]=(0,Zq.HF)(e),a=Array.isArray(n)?n.length:0;return e===ei.RN9.SPACING?null:f.createElement(iy.fI,{className:nb()("stack_controls--stackPaddingRow--40WUa",{"stack_controls--large--bJFUN":a>3})},f.createElement(ZX.s,{paddingSelection:e,focusOnMount:t,outerClassName:Z$,inputClassName:ZQ,onBlur:ei.Qa7.clearActiveStackRegion,onKeyDown:Z5,onPaste:Z7,noBorderOnFocus:!0,svgClassName:Z0,recordingKey:"stackPaddingControl",inputTestId:"stackPaddingControl",source:"canvas",disableVariablesEntryPoint:!0}))}function Z7(e){(0,AC.gk)(e)&&(e.preventDefault(),e.currentTarget.blur(),o4.l7.user("paste-in-stack",()=>{ei.glU.triggerAction("paste",{})}))}let Z8=f.memo(function(){return(0,_.d4)(e=>e.mirror.appModel.isReadOnly)?null:f.createElement(Z9,null)});function Z9(){return f.createElement(WO.k,{isShown:!0},f.createElement(WL.IA,null,f.createElement(Qe,{testID:"DesignInlineMenu"})))}function Qe({testID:e}){let t=(0,_.d4)(e=>{let t=e.mirror.selectionProperties.stackMode;return 1===e.mirror.selectionProperties.numSelected&&("HORIZONTAL"===t||"VERTICAL"===t)});return(0,_.d4)(e=>{let t=e.mirror.selectionProperties.selectedWidgetInfo;return!!(1===e.mirror.selectionProperties.numSelected&&(null==t?void 0:t.propertyMenu.length))})?f.createElement(WP.W1,{size:"small",testID:e},f.createElement(Zj.jk,null),f.createElement(ZJ.x,null)):t?f.createElement(WP.W1,{testID:e,darkModePreferred:!0},f.createElement(Z2,{key:"stackControls"})):null}function Qt(e){let t;let n=(0,SR.lz)(),a=(0,tM.qw)(),l=(0,Q.E3)(),{isPropertiesPanelCollapsed:r}=(0,H_.iT)(),i=(0,S.md)(IP.Ds),o=(0,aN.J2)((0,tM.UK)().renderRulers);return(0,n6.GS)()&&(t={right:`calc(${l===eq.nT.DevHandoff?n:a}px + ${(0,lf.jz)(lw.M$q)}px)`,top:`${(0,lf.jz)(lw.M$q)}px`},r&&(t={...t,right:`calc(${i}px + ${(0,lf.jz)(lw.M$q)}px)`}),o&&(t={...t,top:`calc(${(0,lf.jz)(lw.M$q)}px + ${(0,lf.jz)(lw.y9S)}px)`})),f.createElement("div",{style:t,className:nb()("nav_container--flexContainer--3Us-2 nav_container--baseContainer--QideS overflow--overflowYAuto--nfK38 overflow--momentumScroll--qtsu7",nz.Dm,e.className)},e.children)}var Qn=n(116198),Qa=n(462725),Ql=n(251232),Qr=n(416014),Qi=n(348844),Qo=n(531800),Qs=n(660257);let Qc=f.forwardRef(function(e,t){var n;let{boundingBox:a,isFigmaPurple:l}=e.node,r=function(e,t,n,a){let l=(0,lb._X)({subscribeToUpdates_expensive:!0});if(!l)return null;let r={},i=(0,lb.Yb)(l,{x:e.x,y:e.y,width:e.w,height:e.h});return r.left=i.x+l.x,r.top=i.y+l.y,t&&(r.left+=i.width/2),n&&(r.top=i.y+l.y+i.height),{containerStyle:r,pillStyle:a&&{maxWidth:a(i.width)},zoomScale:l.zoomScale}}(a,e.centered,e.bottom,e.maxWidth);if(!r)return null;let{containerStyle:i,pillStyle:o}=r;return f.createElement("div",{ref:t,className:nb()(nz.Dm,"on_canvas_pill--pillContainer--jvRgr",{"on_canvas_pill--centered--iOUXI":e.centered,"on_canvas_pill--bottom--gwvqA":e.bottom}),style:{...i,marginLeft:e.offsetX??0,marginTop:(null==(n=e.offsetY)?void 0:n.call(e,r.zoomScale))??0},"data-testid":e.dataTestId},f.createElement("div",{className:nb()("on_canvas_pill--pill--fSukI",l?"on_canvas_pill--symbol--3Kz9f":"on_canvas_pill--node--xgavI",e.largeBorderRadius&&"on_canvas_pill--pillLargeBorderRadius--9uWP9"),style:o},e.children))});function Qd({node:e}){let t=(0,q_.xx)((e,t)=>(0,xU.D)(e,t)),n=e?t(e.guid,e.objectsPanelThumbnailId):"",a=n?(0,a2.V)(n):function(e){let t=null;switch(e.type){case"TEXT":t=A4.A;break;case"FRAME":t=e.isGroup?Qa.A:e.isStateGroup?Na.A:(0,xU.GN)({stackMode:e.stackMode,stackCounterAlignItems:e.stackCounterAlignItems});break;case"ROUNDED_RECTANGLE":t=Qr.A;break;case"ELLIPSE":t=Qn.A;break;case"STAR":t=Qi.A;break;case"VECTOR":t=Qs.A;break;case"GROUP":t=Qa.A;break;case"INSTANCE":t=IM.A;break;case"SYMBOL":t=e.isState?Qo.A:Na.A}return(0,ey.oY)(e.type)&&e.hasEnabledStaticImagePaint&&(t=Ql.A),t}(e);return a?f.createElement(a2.B,{className:"on_canvas_pill--iconNodeType--0xm99",svg:a}):null}function Qu(){var e;let t=null==(e=function(){let e=(0,_.d4)(e=>e.mirror.appModel.onCanvasPillInfo);return(0,cp.Fk)((e,t)=>t&&0!==t.length?t.map(t=>{let n=e.get(t.guid);if(!n||"-1:-1"===n.guid)return null;let a={guid:n.guid,name:n.name,type:n.type,boundingBox:n.absoluteBoundingBox,isFigmaPurple:t.isFigmaPurple,hasEnabledStaticImagePaint:n.hasEnabledStaticImagePaint,isState:n.isState,isStateGroup:n.isStateGroup,stackCounterAlignItems:n.stackCounterAlignItems,stackMode:n.stackMode,isGroup:n.isGroup,canHaveStatus:n.canHaveStatus,hasStatus:n.hasStatus,objectsPanelThumbnailId:n.objectsPanelThumbnailId};if(a.isState&&t.symbolId){let n=e.get(t.symbolId);a.symbolName=null==n?void 0:n.name}return a}):null,e)}())?void 0:e[0];return t?f.createElement(Qc,{node:t,offsetX:-3},f.createElement("div",{className:"on_canvas_pill--row--I6QoB"},f.createElement(Qd,{node:t}),f.createElement("span",{className:"on_canvas_pill--pillText--ts0Xi ellipsis--ellipsis--Tjyfa"},t.symbolName?t.symbolName:t.name))):null}var Qm=n(536825),Qp=n(631437),Qf=n(529004),Q_=n(611407),Qg=n(178462),Qh=n(771941),QE=n(113468),Qv=n(38340),Qy=n(812111),Qb=n(900878);function QC(){let[e,t]=f.useState(""),n=function(){let e=(0,_.wA)(),t=(0,cp.Fk)(e=>e),n=(0,_.d4)(e=>e.mirror.appModel.currentPage),{selectedInteractions:a}=(0,Qv.Ay)(QE.J.NORMAL),l=(0,SL.Rb)(),r=f.useCallback((e,t)=>{let{interactions:n,errorMessage:l}=function(e,t,n){let a=function e(t){var n,a;switch(t.type){case"Navigate to":return n=t.target,{connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE",transitionNodeID:lg.sH(n)};case"Back":return{connectionType:"BACK"};case"Open Overlay":return a=t.target,{connectionType:"INTERNAL_NODE",navigationType:"OVERLAY",transitionNodeID:lg.sH(a)};case"Close Overlay":return{connectionType:"CLOSE"};case"Set Variable":let l=t.expression.join(" ");return function(e,t){let n;try{n=(0,Qg.q)(t,new Qh.o)}catch(e){return console.error("Failed to parse expression string in set variable action: ",t),null}return{connectionType:"SET_VARIABLE",targetVariable:{id:e},targetVariableData:n}}(t.target,l);case"Conditional":return function({guardExpression:t,thenAction:n,elseAction:a}){let l=t.join(" ");if(a)try{return{connectionType:"CONDITIONAL",conditionalActions:[{condition:(0,Qg.q)(l,new Qh.o),actions:[e(n)]},{actions:[e(a)]}]}}catch(e){return console.error("Failed to parse guard expression string in conditional action: ",l),null}try{return{connectionType:"CONDITIONAL",conditionalActions:[{condition:(0,Qg.q)(l,new Qh.o),actions:[e(n)]}]}}catch(e){return console.error("Failed to parse guard expression string in conditional action: ",l),null}}(t)}}(e);if(!a)return{interactions:t,errorMessage:"Failed to get action"};for(let e of t){for(e.actions=e.actions||[];e.actions.length<=n;)e.actions.push({connectionType:"NONE"});e.actions[n]=a}return{interactions:t,errorMessage:""}}(e,a,t);return l||(et.Y5.updateSelectionProperties({prototypeInteractions:n}),null)},[a]);return f.useCallback(async i=>{var o,s;try{if(!(0,y.kc)().prototype_ai_auto_adv_proto)return{generatedActions:[],errorMessage:"Feature flag not enabled"};let c=(0,lh.Zl)(t,n);if(!c||!c.childrenGuids)return{generatedActions:[],errorMessage:"No page node found"};e(eS.F.enqueue({message:"AI is generating interaction",type:"ai-generating-interaction",icon:uN.zX.SPINNER}));let d=await (0,Qy.dT)(c.childrenGuids,t,!1),u=(0,Q_.Lg)(d).join(", "),m=new Map(l.map(e=>[e.node_id,{name:e.name,description:e.description,resolvedType:e.resolvedType}])),p=await (0,Qb.P)(m,i),f=(0,Qb.E)(t,m,p),_=(null==(s=null==(o=a[0])?void 0:o.actions)?void 0:s.length)===1&&"NONE"===a[0].actions[0].connectionType?0:a.length,g=await (0,Qy.h6)({userDescription:i,variablesUsed:f,canvasDescriptions:u},r,_);return e(eS.F.dequeue({matchType:"ai-generating-interaction"})),g.errorMessage?e(eS.F.enqueue({message:"AI had issue while generating interaction"})):e(eS.F.enqueue({message:"AI has finished generating interaction"})),g}catch(t){return console.error(t),e(eS.F.dequeue({matchType:"ai-generating-interaction"})),e(eS.F.enqueue({message:"AI failed to generate interaction",type:"error"})),{generatedActions:[],errorMessage:t.toString()}}},[t,n,r,l,a,e])}();return f.createElement(iy.ks,{placeholder:"Describe a new action",value:e,onChange:e=>t(e.currentTarget.value),onKeyDown:t=>{t.stopPropagation(),"Enter"===t.key&&(t.currentTarget.blur(),n(e))}})}var Qw=n(83695),QT=n(325682),Qx=n(820286),QN=n(503965);let QS=(0,lt.ex)("prototype_action_info",function(){return f.createElement("div",{className:a8.cx.flex.itemsCenter.justifyCenter.$},f.createElement(a2.B,{className:"prototype_action_info_tooltip--prototypeDestinationInfoIcon--GeQWS",svg:QN.A}),f.createElement("span",{className:a8.cx.flexGrow1.m6.$,style:{maxWidth:144}},(0,eN.tx)("proto.prototype_panel.use_the_circular_node_to_connect_the_selected_object_to_another_frame_tooltip")))},()=>({unconstrainWidth:!0}));function Qk(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M11.5 6.5V11a1.5 1.5 0 0 0 1.5 1.5h4.5"}))}var QI=n(46878);class QA extends ow.c${}class QO extends ow.l6{}function QL({action:e}){return f.createElement("div",{className:"prototype_action_dropdown--prototypeActionIcon--qChhY"},f.createElement(ry.U,{svg:(0,QI.Yb)(e)},(0,QI.av)(e)))}function QP(e){let t=`prototype-action-select-${e.recordingKey}`,n=e.dropdownShown&&e.dropdownShown.type===t,a=(0,xM.E7)(e.action),l=(0,QI.Yb)(a),r=(0,QI.av)(a),i=(0,n6.GS)(),o=new Th.js(i),s=new Th.Z6(i),c=!(0,_.d4)(e=>e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0),d=f.useCallback(e=>e-24,[]),u=f.useCallback(e=>e+24,[]),m=nb()({[e.className??""]:!0,"prototype_action_dropdown--select--b3Ssx":!i});return f.createElement(QO,{disabled:c,id:t,dataTestId:"action-select",className:m,chevronClassName:"prototype_action_dropdown--prototypeActionChevron--ZL1Q4",inputClassName:"prototype_action_dropdown--prototypeActionInputWithSvg--Atfua",property:e.action,formatter:n?o:s,onChange:e.onChange,dispatch:e.dispatch,dropdownShown:e.dropdownShown,svg:l,svgClassName:"prototype_action_dropdown--selectActionSvg--XfhUx",ui3Icon:r,recordingKey:n_.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,aR.nl)(),dropdownAlignment:d,dropdownWidth:u},function(e){let t=f.createElement(QA,{key:"NONE",value:"NONE",icon:f.createElement(QL,{action:"NONE"}),recordingKey:n_.Pt(e,"clear-option"),disabled:!1}),n=f.createElement(QA,{key:"NAVIGATE_TO",value:"NAVIGATE_TO",icon:f.createElement(QL,{action:"NAVIGATE_TO"}),recordingKey:n_.Pt(e,"navigate-to-option"),disabled:!1}),a=f.createElement(QA,{key:"SWAP_STATE_TO",value:"SWAP_STATE_TO",icon:f.createElement(QL,{action:"SWAP_STATE_TO"}),recordingKey:n_.Pt(e,"swap-state-to-option"),disabled:!ei.glU.isSelectionContainedInStateOrStateInstance()}),l=f.createElement(QA,{key:"GO_BACK",value:"GO_BACK",icon:f.createElement(QL,{action:"GO_BACK"}),recordingKey:n_.Pt(e,"back-option"),disabled:!1}),r=f.createElement(QA,{key:"SCROLL_TO",value:"SCROLL_TO",icon:f.createElement(QL,{action:"SCROLL_TO"}),recordingKey:n_.Pt(e,"scroll-to-option"),disabled:!1}),i=f.createElement(QA,{key:"OPEN_URL",value:"OPEN_URL",icon:f.createElement(QL,{action:"OPEN_URL"}),recordingKey:n_.Pt(e,"url-option"),disabled:!1}),o=f.createElement(QA,{key:"OPEN_OVERLAY",value:"OPEN_OVERLAY",icon:f.createElement(QL,{action:"OPEN_OVERLAY"}),recordingKey:n_.Pt(e,"open-overlay-option"),disabled:!1}),s=f.createElement(QA,{key:"SWAP_WITH",value:"SWAP_WITH",icon:f.createElement(QL,{action:"SWAP_WITH"}),recordingKey:n_.Pt(e,"swap-with-option"),disabled:!1}),c=f.createElement(QA,{key:"CLOSE_OVERLAY",value:"CLOSE_OVERLAY",icon:f.createElement(QL,{action:"CLOSE_OVERLAY"}),recordingKey:n_.Pt(e,"close-option"),disabled:!1}),d=f.createElement(QA,{key:"SET_VARIABLE",value:"SET_VARIABLE",icon:f.createElement(QL,{action:"SET_VARIABLE"}),recordingKey:n_.Pt(e,"set-variable"),disabled:!1}),u=(0,y.kc)().prototype_set_mode_action&&f.createElement(QA,{key:"SET_VARIABLE_MODE",value:"SET_VARIABLE_MODE",icon:f.createElement(QL,{action:"SET_VARIABLE_MODE"}),recordingKey:n_.Pt(e,"set-variable-mode"),disabled:!1}),m=!e.isNestedInConditional&&f.createElement(QA,{key:"CONDITIONAL",value:"CONDITIONAL",icon:f.createElement(QL,{action:"CONDITIONAL"}),recordingKey:n_.Pt(e,"conditional"),disabled:!1}),p=f.createElement(ow.sK,{key:"first-divider"}),_=f.createElement(ow.sK,{key:"second-divider"}),g=f.createElement(ow.sK,{key:"third-divider"}),h=(0,n6.GS)()?[t,p,n,a,l,r,i,_,o,s,c,g,d,u,m]:[t,p,n,a,l,_,d,u,m,r,i,g,o,s,c];if(e.showVideoActions){let t=[f.createElement(ow.sK,{key:"fourth-divider"}),f.createElement(QA,{key:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",value:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",icon:f.createElement(QL,{action:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS"}),recordingKey:n_.Pt(e,"update-media-play-pause-options"),disabled:!1}),f.createElement(QA,{key:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",value:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",icon:f.createElement(QL,{action:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS"}),recordingKey:n_.Pt(e,"update-media-mute-unmute-options"),disabled:!1}),f.createElement(QA,{key:"UPDATE_MEDIA_SKIP_TO",value:"UPDATE_MEDIA_SKIP_TO",icon:f.createElement(QL,{action:"UPDATE_MEDIA_SKIP_TO"}),recordingKey:n_.Pt(e,"update-media-skip_to"),disabled:!1}),f.createElement(QA,{key:"UPDATE_MEDIA_SKIP_BY_OPTIONS",value:"UPDATE_MEDIA_SKIP_BY_OPTIONS",icon:f.createElement(QL,{action:"UPDATE_MEDIA_SKIP_BY_OPTIONS"}),recordingKey:n_.Pt(e,"update-media-skip-by-options"),disabled:!1})];h=h.concat(t)}return h.filter(Boolean)}(e))}var QD=n(983405),QR=n(533573),QM=n(773833),QF=n(912547);let QB="prototype_action_verbose_title--actionNameInsertion--aF4kI",QU="prototype_action_verbose_title--actionName--qWJL3",QH="prototype_action_verbose_title--actionNameUI3--JAYsG",QG=()=>{let e=(0,_.d4)(e=>e.mirror.sceneGraph);return f.useMemo(()=>new Th.cP(e),[e])};function QV({action:e,isNestedInConditional:t,isNarrowPanel:n,onClick:a}){var l;let r=(0,QT.YT)()===QT.Oz.TWO_COL,i=t||n,o=(0,SL.u)((0,xM.hS)(e.targetVariable)&&e.targetVariable&&"id"in e.targetVariable?null==(l=e.targetVariable)?void 0:l.id:void 0),s=(0,xM.hS)(e.targetVariable)&&e.targetVariable&&"nodeFieldAlias"in e.targetVariable?(0,QM.aA)(e.targetVariable.nodeFieldAlias.stablePathToNode,e.targetVariable.nodeFieldAlias.indexOrKey):void 0,c=(null==o?void 0:o.name)??(null==s?void 0:s.name),d=QG(),u=new Th.Z6((0,n6.GS)()),m=(0,Th._X)(e),p=(0,xM.E7)(m),_=f.createElement(ry.U,{svg:(0,QI.Yb)(p)},(0,QI.av)(p)),g=e=>{if(!e.connectionType||(0,xM.gl)(e.connectionType))return null;let t=nb()({[QU]:!0,[QH]:r}),n=nb()({"prototype_action_verbose_title--actionDestination--JZ-gU":!0,"prototype_action_verbose_title--actionDestinationUI3--ZGxbq":r});switch(e.connectionType){case"NONE":case"SET_VARIABLE_MODE":return null;case"INTERNAL_NODE":case"BACK":case"CLOSE":case"UPDATE_MEDIA_RUNTIME":{let a=e.transitionNodeID;if((0,xM.gl)(a))return f.createElement("div",{className:t},(0,eN.t)("proto.variant_actions.mixed"));if(void 0===a)return null;let l=lg.dI(a),r=d.format(l);return f.createElement("div",{className:n},r)}case"URL":{let a=e.connectionURL;if(!a)return null;if((0,xM.gl)(a))return f.createElement("div",{className:t},(0,eN.t)("proto.variant_actions.mixed"));return f.createElement("div",{className:n},a)}case"SET_VARIABLE":if(!e.targetVariableData||(0,xM.gl)(e.targetVariableData))return null;return f.createElement("div",{className:"prototype_action_verbose_title--setVariablePreviewContainer--6omxy"},f.createElement(Qw.y3,{targetVariableData:e.targetVariableData,onClick:nf.lQ,showVariableThumbnails:!1,isNarrowPanel:i,isInConditional:!0}));case"CONDITIONAL":{if((0,xM.gl)(e)||(0,xM.gl)(e.conditionalActions)||!e.conditionalActions)return null;let t=e.conditionalActions.length>0?e.conditionalActions[0].condition:void 0;return f.createElement(Qw.y3,{targetVariableData:t,onClick:nf.lQ,isInConditional:!0,showVariableThumbnails:!1})}default:(0,nm.xb)(e.connectionType)}},h=nb()({[QF.Li]:i&&!r,[QF.O8]:!i&&!r,[QF.kE]:r}),E=nb()({"prototype_action_verbose_title--iconContainer--jqarD":!0,"prototype_action_verbose_title--iconContainerUI3--yBP0-":r});return f.createElement("div",{className:h,onClick:a,role:"button",tabIndex:0},f.createElement(QD.Y1,{horizontalAlignItems:"space-between",width:"fill-parent"},f.createElement("div",{className:E},_),(e=>{let t=p?u.format(p):"Undefined",n=nb()({[QU]:!0,[QH]:r});if((0,xM.gl)(e.connectionType)&&(t=(0,eN.t)("fullscreen.mixed")),!e.connectionType||(0,xM.gl)(e.connectionType)||"NONE"===e.connectionType||"BACK"===e.connectionType||"CLOSE"===e.connectionType)return f.createElement(f.Fragment,null,f.createElement("div",{className:n},t));var a=g(e);switch(e.connectionType){case"INTERNAL_NODE":if("SWAP_STATE"===e.navigationType&&(a=null),a){if("OVERLAY"===e.navigationType)return f.createElement(f.Fragment,null,f.createElement("div",{className:QB},(0,eN.tx)("proto.action_overlay_title",{overlayFrameName:f.createElement("span",null,a)})));if("SWAP"===e.navigationType)return f.createElement(f.Fragment,null,f.createElement("div",{className:n},(0,eN.t)("proto.action_swap_overlay_title")),a)}return f.createElement(f.Fragment,null,f.createElement("div",{className:n},t),a);case"UPDATE_MEDIA_RUNTIME":return f.createElement(f.Fragment,null,f.createElement("div",{className:n},t),a);case"URL":return f.createElement(f.Fragment,null,f.createElement("div",{className:n},a?(0,eN.t)("proto.action_url_title"):(0,eN.t)("proto.action_open_link")),a);case"SET_VARIABLE":{let l=e.targetVariableData&&(0,xM.hS)(e.targetVariableData)&&e.targetVariableData.resolvedType===ei.rXF.COLOR,i=nb()({"prototype_action_verbose_title--actionNameInsertionColor--isir- prototype_action_verbose_title--actionNameInsertion--aF4kI":!0,"prototype_action_verbose_title--actionNameInsertionColorUI3--Apj0i":r});if(c&&a)return f.createElement(f.Fragment,null,f.createElement("div",{className:l?i:QB},(0,eN.tx)("proto.action_set_variable_title",{variableName:f.createElement("span",{className:"prototype_action_verbose_title--variableNameContainer--XeJX2"},f.createElement(w2.w,{text:c,isDeleted:!!o&&(0,QR.eF)(o)})),variableValue:f.createElement("span",{className:"prototype_action_verbose_title--variableDestinationContainer--RXbKo prototype_action_verbose_title--variableNameContainer--XeJX2"},a)})));return f.createElement(f.Fragment,null,f.createElement("div",{className:n},t))}case"SET_VARIABLE_MODE":return f.createElement(f.Fragment,null,f.createElement("div",{className:n},(0,eN.t)("proto.action_set_variable_mode")));case"CONDITIONAL":return f.createElement(f.Fragment,null,f.createElement("div",{className:n},r?(0,eN.t)("proto.if"):(0,eN.t)("proto.action_conditional_title")),a);default:(0,nm.xb)(e.connectionType)}})(e)))}var QK=n(736656),QW=n(789529),Qz=n.n(QW),Qj=n(636149),QJ=n.n(Qj),QY=n(675551),QX=n.n(QY),Qq=n(184058),QZ=n.n(Qq),QQ=n(100039),Q$=n(994481);let Q0="prototype_set_variable_mode_controls--dropdownRow--vl5z4",Q1="missing";class Q2 extends ow.l6{}class Q5 extends ow.c${}class Q4 extends ow.l6{}class Q3 extends ow.c${}let Q6={},Q7=(0,vc.fv)();function Q8(){let e=(0,SL.h6)()||Q6,t=(0,w1.iR)(),n=f.useMemo(()=>{let n=QX()(t,(e,t)=>{var n;return{collectionID:e.node_id,collectionName:e.name,key:e.key,modeOptions:(null==(n=e.modes)?void 0:n.map(t=>({modeId:{guid:t.id,collectionKey:e.key},name:t.name,isCompatible:!0})))||[],explicitMode:null,inheritMode:null,fileKey:Q7(e)}});return Qz()({},e,n)},[t,e]),a=f.useMemo(()=>Object.entries(n).map(([e,t])=>({setKey:e,modeData:t,isLocal:void 0===t.fileKey})),[n]),l=f.useMemo(()=>Object.values(a).filter(e=>{var t,n;return(null==(t=e.modeData)?void 0:t.modeOptions)&&(null==(n=e.modeData)?void 0:n.modeOptions.length)>1}),[a]),r=f.useMemo(()=>QZ()(l.map(e=>e.modeData.fileKey??QQ.BH)),[l]),i=(0,SL.el)(r),[o,s]=f.useMemo(()=>{let{_local:e,_unknownFile:t,...n}=QJ()(l,e=>e.isLocal?"_local":e.modeData.fileKey&&void 0===i[e.modeData.fileKey]?"_unknownFile":e.modeData.fileKey),a=Object.entries(n).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>[{fileKey:e,fileName:i[e]},...t]).flat(1);return t&&(a.push({fileKey:QQ.BH,fileName:(0,eN.t)("variables.mode_properties_panel.used_variables.subheading")}),a.push(...t)),[e??[],a]},[i,l]),c=(0,w1.d2)(),d=f.useCallback(e=>{let t=c[(0,Wy.yG)(e)],n=l.find(t=>t.setKey===e);if(n)return(e=>{var n;if(e)return void 0===t&&(t=e.modeData.modeOptions[0].modeId.guid),null==(n=e.modeData.modeOptions.find(e=>e.modeId.guid!==t&&(t=e.modeId.guid,!0)))?void 0:n.modeId.guid})(n)},[c,l]),u=l.length>0?l[0]:void 0,m=null==u?void 0:u.setKey,p=null==u?void 0:u.modeData.collectionID,g=f.useMemo(()=>m&&d(m),[m,d]),h=(0,_.wA)();return{localVariableSets:o,allVariableSets:l,firstVariableSet:u,firstVariableSetID:p,firstVariableSetMode:g,getDefaultNewModeForVariableCollectionKey:d,reportAnalyticsEventWhenSelected:e=>{let t=ei.mSn.getVariableSetInfoForSetModeAnalytics(e);h((0,YP.Zh)({name:"prototype.set_mode_select_variable_set",params:{...t}}))},subscribedVariableSetsWithSections:s}}function Q9({targetVariableSetID:e,targetVariableModeID:t,deprecatedTargetVariableSetKey:n,updateSelectionProperties:a,recordingKey:l,actionIndexPath:r}){let{getDefaultNewModeForVariableCollectionKey:i,allVariableSets:o,reportAnalyticsEventWhenSelected:s}=Q8(),{shouldShowAdvancedPrototypingPaywall:c,showAdvancedPrototypingVariablesModal:d}=(0,QT.zt)(),u=(0,n6.GS)();f.useEffect(()=>{if(!n||(0,xM.gl)(n))return;let e=o.find(e=>e.setKey===n);e?((0,o2.Lo)("SetVariableModeControls","updating variable set key to non-deprecated id value"),a({targetVariableSetKey:void 0,targetVariableSetID:null==e?void 0:e.modeData.collectionID})):((0,o2.Lo)("SetVariableModeControls","attempted to update variable set key to non-deprecated id value, but could not find it in the list of variable sets, will just clear out the bad data."),a({targetVariableSetKey:void 0}))},[n,o,a]);let[m,p]=f.useMemo(()=>{let t=(0,xM.gl)(e)||void 0===e?e:function(e,t){let n=e.find(e=>e.modeData.collectionID===t);if(n)return n;let a=LH.gr.toRefIfSubscribed(t);if(a)return e.find(e=>e.setKey===a.key)}(o,e)||Q1,n=(()=>{if(!(0,xM.gl)(t)&&void 0!==t&&t!==Q1)return t})();return[t,n]},[e,o]),_=f.createElement($n,{selectedVariableSet:m,onChange:e=>{c?d():(s(e.modeData.collectionID),a({targetVariableSetID:e.modeData.collectionID,targetVariableModeID:i(e.setKey)}))},actionIndexPath:r}),g=u?f.createElement(Q$.cS,{input:_,label:(0,eN.tx)("proto.set_variable_mode.collection_label")}):f.createElement(iy.fI,{recordingKey:n_.Pt(l,"selectTargetVariableSet")},_),h=f.createElement($r,{selectedVariableSetKey:p&&p.setKey,selectedVariableModeID:t,onChange:e=>{c?d():a({targetVariableModeID:e})},actionIndexPath:r}),E=u?f.createElement(Q$.cS,{input:h,label:(0,eN.tx)("proto.set_variable_mode.mode_label")}):f.createElement(iy.fI,{recordingKey:n_.Pt(l,"selectTargetVariableMode")},h);return f.createElement("div",{className:u?void 0:a8.cx.relative.$},g,p&&E)}let $e={format:e=>void 0===e?(0,eN.t)("proto.prototype_panel.edit_set_mode.none"):e===Q1?(0,eN.t)("proto.prototype_panel.edit_set_mode.missing_collection"):e.modeData.collectionName,isEqual:(e,t)=>void 0!==e&&void 0!==t&&e!==Q1&&t!==Q1&&(e.setKey===t.setKey||e.modeData.collectionID===t.modeData.collectionID)};function $t(e,t){return"fileKey"in e?[t&&f.createElement(ow.sK,{key:e.fileKey+"divider"}),f.createElement(Q5,{isHeader:!0,key:e.fileKey+"header",formattedValue:e.fileName})]:f.createElement(Q5,{key:e.setKey,value:e})}function $n({selectedVariableSet:e,onChange:t,actionIndexPath:n}){let a=(0,_.wA)(),l=(0,nT.U)(),r="set-variable-mode--select-variable-set-"+n,{localVariableSets:i,allVariableSets:o,subscribedVariableSetsWithSections:s}=Q8();return f.createElement(Q2,{id:r,className:Q0,property:e,formatter:$e,dispatch:a,dropdownShown:(null==l?void 0:l.type)===r?l:null,onChange:e=>{(0,xM.gl)(e)||void 0===e||e===Q1||t(e)}},o.length>0?[i.length>0&&f.createElement(Q5,{key:n_.Pt(r,"local_variables"),isHeader:!0,formattedValue:(0,eN.t)("variables.mode_properties_panel.local_variables.subheading")}),...i.map(e=>$t(e,!1)),...s.map((e,t)=>$t(e,i.length>0||t>0))]:[])}let $a={format:e=>void 0===e?(0,eN.t)("proto.prototype_panel.edit_set_mode.none"):e===Q1?(0,eN.t)("proto.prototype_panel.edit_set_mode.missing_mode"):(null==e?void 0:e.name)??""};function $l(e){return f.createElement(Q3,{key:e.modeId.guid,value:e})}function $r({selectedVariableSetKey:e,selectedVariableModeID:t,onChange:n,actionIndexPath:a}){let l=(0,_.wA)(),r=(0,nT.U)(),i="set-variable-mode--select-variable-mode-"+a,{allVariableSets:o}=Q8(),s=f.useMemo(()=>{var t;return null==(t=o.find(t=>t.setKey===e))?void 0:t.modeData.modeOptions},[e,o]),c=f.useMemo(()=>(0,xM.gl)(t)||void 0===t?t:(null==s?void 0:s.find(e=>e.modeId.guid===t))||Q1,[t,s]);return f.createElement(Q4,{id:i,className:Q0,property:c,formatter:$a,dispatch:l,dropdownShown:(null==r?void 0:r.type)===i?r:null,onChange:e=>{!e||(0,xM.gl)(e)||e===Q1||n(e.modeId.guid)}},s&&(null==s?void 0:s.map($l)))}var $i=n(939791),$o=n(485463),$s=n(775664),$c=n(420186),$d=n(218973),$u=n(251518),$m=n(410465),$p=n(910392),$f=n(909666),$_=n(442458);let $g=$s.TI;function $h({children:e}){return(0,n6.GS)()?f.createElement(Q$.TN,null,e):f.createElement(iy.fI,{className:"overlay_panel--fplCheckboxRow--EYTAZ checkbox--_checkboxRow--oEhow"},e)}function $E({interactionType:e,recordingKey:t,actionIndexPath:n,nodeId:a}){let[l,r]=f.useState(!1),[i,o]=f.useState(new r4.Mi),s=(0,_.wA)(),c=(0,n6.GS)(),d="{ "+n.join(", ")+" }",{destinationOverlayBackgroundColor:u,destinationOverlayBackgroundType:m,destinationOverlayPositionType:p,destinationOverlayBackgroundInteraction:g}=(0,N.R)(e=>{var t,n,a,l,r,i,o,s;return{destinationOverlayBackgroundColor:null==(n=null==(t=e.mirror.selectionProperties.actionIndexPathToOverlaySettings)?void 0:t[d])?void 0:n.destinationOverlayBackgroundColor,destinationOverlayBackgroundType:null==(l=null==(a=e.mirror.selectionProperties.actionIndexPathToOverlaySettings)?void 0:a[d])?void 0:l.destinationOverlayBackgroundType,destinationOverlayPositionType:null==(i=null==(r=e.mirror.selectionProperties.actionIndexPathToOverlaySettings)?void 0:r[d])?void 0:i.destinationOverlayPositionType,destinationOverlayBackgroundInteraction:null==(s=null==(o=e.mirror.selectionProperties.actionIndexPathToOverlaySettings)?void 0:o[d])?void 0:s.destinationOverlayBackgroundInteraction}}),h=f.useRef(),E=f.useRef(),v=f.useCallback(()=>{r(!1)},[r]),y=f.useCallback(()=>{if(l)v();else{r(!0);let e=c?oQ.findDOMNode(E.current):oQ.findDOMNode(h.current);o((0,$c.cn)(e))}},[l,v,c]),b=f.useCallback(e=>{let t=e?"SOLID_COLOR":"NONE";o4.l7.user("overlay-background-type-edit-scope",()=>{ei.X3B.setOverlayBackgroundType(lg.dI(a),t)}),s((0,YP._P)({name:"Overlay background visible changed",params:{backgroundType:t}}))},[s,a]),C=f.useCallback(e=>{let t=e?"CLOSE_ON_CLICK_OUTSIDE":"NONE";o4.l7.user("overlay-background-interaction-edit-scope",()=>{ei.X3B.setOverlayBackgroundInteraction(lg.dI(a),t)}),s((0,YP._P)({name:"Overlay background interaction changed",params:{backgroundInteraction:t}}))},[s,a]),w=f.useCallback(()=>(0,xM._W)(u,{r:0,g:0,b:0,a:.25}),[u]),T=f.useCallback((e,t)=>{t!==hf.zk.NO&&o4.l7.user("overlay-background-color-edit-scope",()=>{ei.X3B.setOverlayBackgroundColor(lg.dI(a),e)})},[a]),x=f.useCallback((e,t)=>{T(e,hf.zk.YES)},[T]),S=f.useCallback((e,t)=>{let n=w();T({r:n.r,g:n.g,b:n.b,a:e},t)},[w,T]),k=f.useCallback(e=>{o4.l7.user("overlay-position-type-edit-scope",()=>{ei.X3B.setOverlayPositionType(lg.dI(a),e)}),s((0,YP._P)({name:"Overlay position changed",params:{position:e}}))},[s,a]),I=w(),A=w().a,O=(0,xM.E7)(p),L="CLOSE_ON_CLICK_OUTSIDE"===(0,xM.E7)(g),P="SOLID_COLOR"===(0,xM.E7)(m),D=f.createElement("div",{className:"overlay_panel--colorValueContainer--gJtb9 paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},f.createElement(IT.J,{onClick:P?y:()=>{},color:I,opacity:A,recordingKey:n_.Pt(t,"chit"),className:"overlay_panel--chit--Zn66r paint_panels--chit--twQEy"}),f.createElement(BJ.AN,{className:c?"overlay_panel--colorInputUI3--ozOrK paint_panels--colorInput--nSz13":"overlay_panel--colorInput--6yyym paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:$g,property:I,disabled:!P,onChange:x,recordingKey:n_.Pt(t,"colorInput"),noBorderOnFocus:!0}),f.createElement($d.Pd,{className:"overlay_panel--opacity--vrrjV paint_panels--opacityInputContainer--oqlsk",value:A,onValueChange:S,dispatch:s,disabled:!P,noBorderOnFocus:!0,recordingKey:n_.Pt(t,"opacity")}));return f.createElement(iy.Zk,{className:c?"overlay_panel--overlayPanelUI3--GLqgD":"overlay_panel--overlayPanel--l-Hts"},!c&&f.createElement(iy.fI,null,f.createElement(iy.xw,{faded:!0,className:"overlay_panel--overlayPanelTitle--e9pjs"},(0,eN.tx)("proto.overlay_settings"))),f.createElement($x,{overlayPositionType:O,onOverlayPositionTypeChange:k,recordingKey:t}),!("ON_HOVER"===e||"ON_PRESS"===e)&&f.createElement($h,null,f.createElement($o.S,{label:f.createElement(oE.J,null,(0,eN.tx)("proto.close_when_clicking_outside")),recordingKey:n_.Pt(t,"closeOnClickOutside"),onChange:C,checked:L})),f.createElement($h,null,f.createElement($o.S,{label:f.createElement(oE.J,null,c?(0,eN.tx)("proto.overlay_panel.background"):(0,eN.tx)("proto.add_background")),recordingKey:n_.Pt(t,"addBackgroundBehindOverlay"),onChange:b,checked:P})),P&&(c?f.createElement(Q$.cS,{ref:E,label:(0,eN.tx)("proto.overlay_panel.background"),input:D}):f.createElement(iy.fI,{ref:h}," ",D," ")),l&&f.createElement($u.sk,{disabledVariableIds:new Set,title:(0,eN.t)("proto.background"),initialPosition:i,color:I,boundVariable:null,onChange:T,onClose:v,recordingKey:n_.Pt(t,"colorPicker")}))}class $v extends ow.l6{}class $y extends ow.c${}class $b extends f.PureComponent{constructor(){super(...arguments),this.titleFormatter=new Th.Cr,this.renderOverlayPositionOption=(e,t)=>f.createElement($y,{key:t,value:e,recordingKey:n_.Pt(this.props,e)})}render(){let e=["CENTER","TOP_LEFT","TOP_CENTER","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"].map(this.renderOverlayPositionOption);return f.createElement($v,{id:this.props.recordingKey??"overlay-position_select",className:this.props.className,chevronClassName:"overlay_panel--chevron--7RTA-",inputClassName:"overlay_panel--input--tGHHB",dropdownWidth:lw.DxS,property:this.props.property,formatter:this.titleFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:n_.Pt(this.props,"select")},e,f.createElement(ow.sK,null),this.renderOverlayPositionOption("MANUAL",10))}}$b.displayName="OverlayPositionDropdown";class $C extends $m.I{}class $w extends $m.Y{}class $T extends f.PureComponent{render(){return f.createElement($C,{className:this.props.className,property:this.props.property,onChange:this.props.onChange,recordingKey:this.props.recordingKey},f.createElement($w,{value:"CENTER",tooltip:(0,eN.t)("proto.tooltip_overlay_position_center"),svg:$f.A,recordingKey:n_.Pt(this.props,"center")}),f.createElement($w,{value:"TOP_LEFT",tooltip:(0,eN.t)("proto.tooltip_overlay_position_top_left"),svg:$_.A,recordingKey:n_.Pt(this.props,"top-left")}),f.createElement($w,{value:"BOTTOM_CENTER",tooltip:(0,eN.t)("proto.tooltip_overlay_position_bottom_center"),svg:$p.A,recordingKey:n_.Pt(this.props,"bottom-center")}))}}function $x({overlayPositionType:e,onOverlayPositionTypeChange:t,recordingKey:n}){let a=(0,n6.GS)(),l=(0,_.wA)(),r=(0,nT.U)(),i=f.createElement($b,{className:"overlay_panel--overlayPositionDropdown--ZxxSI",property:e,dispatch:l,dropdownShown:r,onChange:t,recordingKey:n_.Pt(n,"overlayPositionDropdown")}),o=f.createElement($T,{property:e,onChange:t,recordingKey:n_.Pt(n,"overlayPositionControl"),className:"overlay_panel--overlayPositionControl--SWngJ"});return a?f.createElement(Q$.cS,{label:(0,eN.tx)("proto.overlay_panel.position"),input:i}):f.createElement(iy.fI,null,i,o)}var $N=n(393333),$S=n(301036);function $k(e){let t=`interaction-panel-create-action-${e.recordingKey}`;var{showing:n,toggle:a,hide:l}=(0,nT.B)(t);let r=(0,f.useRef)(null),i=e.recordingKey,{shouldShowAdvancedPrototypingPaywall:o,showAdvancedPrototypinglMultipleActionsModal:s}=(0,QT.zt)(),c=(0,f.useCallback)(()=>{!e.skipPaywall&&o?s():a()},[e.skipPaywall,o,s,a]),d=n_.rf(n_.Pt(i,"createActionDropdown"),"click",c),u=(0,QT.YT)()===QT.Oz.TWO_COL,m=(0,QT.SJ)(),p=(0,QT.qv)(m,e.isNestedInConditional),_=nb()({[QF.x1]:e.renderButton,[QF.xm]:!e.renderButton&&!u,[QF.U3]:!e.renderButton&&u});return f.createElement(f.Fragment,null,f.createElement("button",{ref:r,className:_,onClick:d,"aria-label":(0,eN.t)("proto.prototype_panel.create_action_button"),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":e.isNestedInConditional?(0,eN.t)("proto.prototype_panel.add_nested_action"):(0,eN.t)("proto.prototype_panel.add")},e.renderButton?f.createElement(ry.U,{svg:IF.A},f.createElement(nu.e,null)):(0,eN.tx)("fullscreen.properties_panel.click_plus_to_add_new_action")),n&&r.current&&f.createElement(nN.Cf,{arrowOffsetFromRectLeft:17,leanPadding:0,minWidth:130,lean:"right",targetRect:r.current.getBoundingClientRect(),hidePointWhenContentOffScreen:!0},p.map((t,n)=>(0,QT.vc)(t)?f.createElement(nC.W.Separator,{key:`type_${n}`}):f.createElement($I,{onClose:l,addButtonPressed:e.addButtonPressed,key:t,recordingKey:i,actionType:t}))))}function $I({actionType:e,onClose:t,addButtonPressed:n,recordingKey:a}){let l=f.useCallback(()=>{n((0,QT.Bs)(e)),t()},[t,e,n]),r=n_.rf(n_.Pt(a,"createActionOption",e),"click",l),i=(0,n6.GS)(),o=(0,QI.Yb)(e),s=(0,QI.av)(e),c=new Th.Z6(i),d=e?c.format(e):"Undefined";return f.createElement(nC.W.Option,{className:QF.BP,onClick:r},f.createElement(ry.U,{className:QF.QE,svg:o},s),f.createElement("div",{"aria-label":d},d))}let $A="prototype_conditional_controls--conditionalRowUI3--rQlu6",$O="prototype_conditional_controls--conditionIcon--Npk57";var $L=n(381809),$P=n(527967),$D=n(5068);function $R({onDeleteAction:e,updateMultipleDestinationNodes:t,updateSelectionProperties:n,updateCondition:a,updateActions:l,onAddAction:r,autoOpenVariablePicker:i,isSelected:o,handleMouseDownUI3:s,...c}){let d=c.conditionalActions,u=(null==d?void 0:d.actions)?null==d?void 0:d.actions:[],m=(null==d?void 0:d.condition)?null==d?void 0:d.condition:void 0,p=(0,QT.YT)()===QT.Oz.TWO_COL,_=p?$A:"prototype_conditional_controls--conditionalRowIf--25FqB prototype_conditional_controls--conditionalRow--u0PaS",g=f.createElement(Qw.KN,{resolvedType:ei.rXF.BOOLEAN,targetVariableData:m,updateSelectionProperties:n,recordingKey:c.recordingKey,updateConditionInConditionalAction:a,showVariableThumbnails:!0,isNarrowPanel:!0}),h=f.createElement("div",{className:"prototype_conditional_controls--addButton--vlYLn"},f.createElement($k,{addButtonPressed:r,recordingKey:n_.Pt(c.recordingKey,"addActionToIfButton"),renderButton:!0,isNestedInConditional:!0})),E=f.createElement(f.Fragment,null,p?f.createElement("span",{className:"prototype_conditional_controls--conditionIconUI3--zcwx0"},(0,eN.tx)("proto.else")):f.createElement(a2.B,{className:$O,svg:$L.A}),u.length>0&&f.createElement("div",{className:"prototype_conditional_controls--addButtonForElse--ogBWu prototype_conditional_controls--addButton--vlYLn"},f.createElement($k,{addButtonPressed:r,recordingKey:n_.Pt(c.recordingKey,"addActionToElseButton"),renderButton:!p,isNestedInConditional:!0}))),v=p?f.createElement("div",{className:"prototype_conditional_controls--elseBlockRowUI3--VXjmO",onMouseDown:s},E):f.createElement(iy.fI,{className:p?$A:"prototype_conditional_controls--conditionalRow--u0PaS"},E);return f.createElement(f.Fragment,null,c.ifStatement&&f.createElement("div",{className:_},!p&&f.createElement(fy.Y,{direction:"horizontal",spacing:4},f.createElement("span",{className:p?"prototype_conditional_controls--conditionalRowConditionUI3--M2mOx":"prototype_conditional_controls--conditionalRowCondition--kn-f7"},f.createElement(fy.Y,{direction:"horizontal",spacing:0},f.createElement(a2.B,{className:$O,svg:$P.A}),f.createElement(fy.Y,{direction:"horizontal",spacing:0},(0,xM.hS)(m)&&g),f.createElement(a2.B,{className:"prototype_conditional_controls--icon--JV1i0",svg:$D.default}))),u.length>0&&h)),!c.ifStatement&&v,u&&u.map((a,l)=>f.createElement(eeg,{key:l,updateMultipleDestinationNodes:t.appendActionIndex(l),action:a,recordingKey:n_.Pt(c.recordingKey,"conditional-action-row",l),updateSelectionProperties:n.appendActionIndex(l),onDeleteAction:()=>e(l),interactionType:c.interactionType,actionIndexPath:[c.actionIndexPath[0],c.actionIndexPath[1],l],numActions:u.length,isNestedInConditional:!0,stateManagementVersion:c.stateManagementVersion,selectedInteractions:c.selectedInteractions,onDrop:c.onDrop,onSelect:c.onSelect,onExpand:c.onExpand,onAddAction:r,selectedActionIndex:c.selectedActionIndex,expandedRows:c.expandedRows,autoOpenVariablePicker:i})),0===u.length&&f.createElement(eeg,{key:0,updateMultipleDestinationNodes:t.appendActionIndex(0),action:c.emptyAction,recordingKey:n_.Pt(c.recordingKey,"conditional-action-row",0),updateSelectionProperties:n.appendActionIndex(0),onDeleteAction:()=>e(0),interactionType:c.interactionType,actionIndexPath:[c.actionIndexPath[0],c.actionIndexPath[1],0],numActions:u.length,isNestedInConditional:!0,stateManagementVersion:c.stateManagementVersion,selectedInteractions:c.selectedInteractions,onDrop:c.onDrop,onSelect:c.onSelect,onExpand:c.onExpand,onAddAction:r,selectedActionIndex:c.selectedActionIndex,expandedRows:c.expandedRows,autoOpenVariablePicker:i}))}function $M(e,t,n){return function(a){var l=[...t];l.length>e?l[e].condition=a:l.push({condition:0===e?a:void 0,actions:[]},{condition:1===e?a:void 0,actions:[]}),n({conditionalActions:l})}}function $F({onDrop:e,onSelect:t,onExpand:n,action:a,updateMultipleDestinationNodes:l,updateSelectionProperties:r,interactionType:i,recordingKey:o,stateManagementVersion:s,selectedInteractions:c,actionIndexPath:d,selectedActionIndex:u,expandedRows:m,autoOpenVariablePicker:p,onNewActionAdded:g,handleMouseDownUI3:h}){let E=(0,_.wA)(),v=(0,eb.p8)("currentPage"),y=(0,QT.YT)()===QT.Oz.TWO_COL,b=y?u.equals(d):void 0,{shouldShowAdvancedPrototypingPaywall:C,showAdvancedPrototypingConditionalActionsModal:w}=(0,QT.zt)(),T=(0,xM.hS)(a.conditionalActions)&&a.conditionalActions?a.conditionalActions:[],x=e=>function(t){var n=[...T];n.length>e?n[e].actions=[...t]:n.push({actions:t}),r({conditionalActions:n})},N=e=>function(t){var n=[...T],a=0;if(n.length>e){var l=n[e].actions;l?l.push(t):l=[t],a=l.length}else n.push({actions:0===e?[t]:[]},{actions:1===e?[t]:[]}),a=1;"SET_VARIABLE"===t.connectionType&&(p.current=!0),r({conditionalActions:n}),g&&g(new $S.Op([d[0],e,a-1])),E((0,YP._P)({name:"Prototype add action",params:{action:t.connectionType?t.connectionType:"NONE",source:"panel",page_id:v,actionInConditionalAction:!0}}))},S=e=>function(t){if(C)w();else{var n=[...T];let a=T[e],l=[];if(a&&a.actions)for(let e=0;e<a.actions.length;e++){let n=a.actions[e];e!==t?l.push(n):E((0,YP._P)({name:"Prototype delete action",params:{action:n.connectionType?n.connectionType:"NONE",source:"panel",page_id:v,actionInConditionalAction:!0}}))}n[e].actions=l,r({conditionalActions:n})}},k=T.length>0?T[0]:void 0,I=T.length>1?T[1]:void 0;return f.createElement("div",{style:y?{position:"relative"}:void 0},(0,xM.gl)(a.conditionalActions)&&f.createElement(QD.Y1,null,f.createElement("div",{className:"prototype_conditional_controls--mixedConditionalText--6O32b",onClick:()=>{var e=[];e.push({},{}),r({conditionalActions:e})},role:"button",tabIndex:0},(0,eN.t)("fullscreen.properties_panel.click_to_replace_mixed_content"))),(0,xM.hS)(a.conditionalActions)&&f.createElement(f.Fragment,null,f.createElement($R,{key:0,conditionalActions:k,recordingKey:n_.Pt(o,"conditional-block",0),updateCondition:$M(0,T,r),updateActions:x(0),onAddAction:N(0),updateMultipleDestinationNodes:l.appendActionIndex(0),onDeleteAction:S(0),interactionType:i,updateSelectionProperties:r.appendActionIndex(0),ifStatement:!0,stateManagementVersion:s,selectedInteractions:c,actionIndexPath:[d[0],0],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:u,autoOpenVariablePicker:p,expandedRows:m,emptyAction:{ifStatement:!0,action:a},isSelected:b,handleMouseDownUI3:h}),f.createElement($R,{key:1,conditionalActions:I,recordingKey:n_.Pt(o,"conditional-block",1),updateCondition:$M(1,T,r),updateActions:x(1),onAddAction:N(1),updateMultipleDestinationNodes:l.appendActionIndex(1),onDeleteAction:S(1),interactionType:i,updateSelectionProperties:r.appendActionIndex(1),ifStatement:!1,stateManagementVersion:s,selectedInteractions:c,actionIndexPath:[d[0],1],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:u,autoOpenVariablePicker:p,expandedRows:m,emptyAction:{ifStatement:!1,action:a},isSelected:b,handleMouseDownUI3:h})))}function $B({updateSelectionProperties:e,conditionalActions:t,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:a,...l}){let r=t.length>0?t[0]:void 0,i=(null==r?void 0:r.condition)?null==r?void 0:r.condition:void 0,o=nb()({"prototype_conditional_controls--standaloneIfConditional--GLFDU":!0,"prototype_conditional_controls--placeholderText--esG0u":!i});return f.createElement(f.Fragment,null,f.createElement(Q$.cS,{input:null,label:(0,eN.tx)("proto.condition")}),f.createElement($i.Ad,{appendedClassName:"prototype_conditional_controls--conditionalActionRightPadding--xpK6Z",label:null,input:(0,xM.hS)(i)?f.createElement("div",{className:o},f.createElement(Qw.KN,{resolvedType:ei.rXF.BOOLEAN,targetVariableData:i,updateSelectionProperties:e.appendActionIndex(0),recordingKey:l.recordingKey,updateConditionInConditionalAction:$M(0,t,e),autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:a,showVariableThumbnails:!0,isNarrowPanel:!0})):null}))}var $U=n(510879),$H=n(830002);class $G extends ow.c${}class $V extends ow.l6{}class $K extends f.PureComponent{constructor(e){super(e),this.loadDestinationsFromFullscreen=()=>{let e=ei.baT.ALL;"SCROLL_TO"===this.props.action?e=ei.baT.SCROLL_TO:"SWAP_STATE_TO"===this.props.action&&(e=ei.baT.STATES);let{viableIds:t,disabledIds:n}=ei.X3B.getTransitionDestinationsOnActiveCanvas(e);return new Promise((e,a)=>{this.setState({viableIds:t,disabledIds:n},e)})},this.onOptionFocus=e=>{aT.Uc(e??"")},this.renderGroupedScrollableNodes=(e,t)=>{let n=QJ()(e.filter(e=>this.nodeNameFormatter.hasNameForNode(e)),e=>{var n,a;return e===t&&(0,xM.hS)(t)?null==(n=(0,ey.Ql)(this.props.scene,e))?void 0:n.guid:null==(a=this.props.scene.get(e))?void 0:a.parentGuid}),a=Object.keys(n);(0,ey.X4)(a,this.nodeNameFormatter.format.bind(this.nodeNameFormatter));let{tlfId:l,index:r}=(0,ey.H_)(this.props.scene,a);return l&&r&&(a.splice(r,1),a=[l,...a]),a.reduce((e,t,a)=>(0!==a&&e.push(f.createElement(ow.sK,{key:a})),e.push(f.createElement($G,{key:`disabled-${t}`,value:t+" ",recordingKey:n_.Pt(this.props,`disabled-option-${t}`),disabled:!0})),n[t].forEach((t,n)=>{e.push(f.createElement($G,{key:`enabled-${t+n}`,value:t,recordingKey:n_.Pt(this.props,`viable-option-${n}`),disabled:!1}))}),e),[])},this.state={viableIds:[],disabledIds:[]},this.nodeNameFormatter=new Th.cP(e.scene)}render(){let e=this.props.nodeId===xM.oV?xM.oV:lg.dI(this.props.nodeId),t=this.state.viableIds;(0,xM.hS)(e)&&e!==lg.AD&&-1===t.indexOf(e)&&(t=t.concat([e]));let n=this.state.disabledIds,a=`prototype-destination-select-${this.props.recordingKey}`,l="SCROLL_TO"!==this.props.action?t.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>f.createElement($G,{key:`enabled-${e}`,value:e,recordingKey:n_.Pt(this.props,`viable-option-${t}`),disabled:!1})):this.renderGroupedScrollableNodes(t,e),r=n.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>f.createElement($G,{key:`disabled-${e}`,value:e,recordingKey:n_.Pt(this.props,`disabled-option-${t}`),disabled:!0})),i=this.props.isUI3?f.Fragment:iy.fI;return f.createElement(i,null,f.createElement($V,{id:a,dataTestId:"destination-select",className:this.props.className,chevronClassName:"prototype_destination_dropdown--chevron--pmWtI",inputClassName:"prototype_destination_dropdown--input--rzglN",dropdownWidth:lw.DxS,property:e,formatter:this.nodeNameFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:n_.Pt(this.props,"select"),willShowDropdown:this.loadDestinationsFromFullscreen,onOptionFocus:this.onOptionFocus,hideDropdownWhenContainerMoves:!(0,aR.nl)()},l,0!==n.length&&0!==t.length&&f.createElement(ow.sK,null),r))}}let $W=f.memo(function(e){let t=(0,af.tS)(),n=(0,af._G)(),a=(0,_.d4)($z),l=(0,_.d4)(bi.qd),r=(0,_.d4)(bi.dK),i=(0,$U.D)(l,r),o=(0,_.d4)($j),s=f.useMemo(()=>(0,SY.cP)(o,t,n,e.actionIndexPath),[o,t,n,e.actionIndexPath]),c=f.useMemo(()=>(0,SY.cP)(a,t,n),[a,t,n]),d=s||c;if(!d||d.mode!==l8.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)return null;let{allStates:u,stateGroupModel:m,selectedStates:p,selectedStatesPropertyValues:g}=d,h=m.propertySortOrder||[],E=m.propertyValues;return E?f.createElement($H.lS,{sortedProperties:h,stateGroupPropertyValues:E,selectedStatesPropertyValues:g,selectedStates:p,allStates:u,onSelectProperty:t=>{let n={};for(let e of Object.keys(t)){let a=t[e].symbol.node_id;for(let t of(n[e]=a,i[e]||[]))n[t]=a;for(let e of l)n[e]||(n[e]=a)}e.onChange(n)},recordingKey:e.recordingKey,hideErrorsPanel:!0,shouldIndent:!0,extended:!0}):null});function $z(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function $j(e){return e.mirror.selectionProperties.prototypeDestinationStateGroupSelectionInfo}var $J=n(169231),$Y=n(939143),$X=n(656963),$q=n(511787);let $Z="prototype_set_variable_controls--dropdownAndIconContainer--6m3Tw",$Q="prototype_set_variable_controls--icon---HzDt",$$="prototype_set_variable_controls--placeholderText--PBIqf";function $0({targetVariableData:e,targetVariable:t,updateSelectionProperties:n,autoOpenVariablePicker:a,...l}){let r=f.useRef(null),i=(0,_.wA)(),o=(0,n6.GS)(),s=(0,_.d4)(e=>e.variablePickerShown),c=(0,SL.tZ)((0,xM.hS)(t)&&"id"in t?t.id:void 0),d=(0,SL.u)((0,xM.hS)(t)&&"id"in t?t.id:void 0),[u,m]=f.useState("");(0,np.h)(()=>{a&&!0===a.current&&(g(),a.current=!1)});let p=(0,SL.BQ)((0,xM.hS)(t)&&"id"in t?t.id:void 0)??(0,QM.m9)((0,xM.hS)(t)&&"nodeFieldAlias"in t?t.nodeFieldAlias:void 0);f.useEffect(()=>{void 0!==e&&p&&"MIXED"!==p&&(0,xM.hS)(e)&&e.resolvedType!==p.resolvedType&&!((0,QM.tz)(e.resolvedType)&&(0,QM.tz)(p.resolvedType))&&n({targetVariableData:void 0})},[p,n,e]);let g=()=>{let e=r.current.getBoundingClientRect();i((0,$J.C)({type:"variable-picker-set-variable-action",isShown:!0,resolvedType:ei.rXF.STRING,initialPosition:new r4.Mi(e.left-20,e.top),key:l.recordingKey,onVariableSelected:b}))},h=f.useCallback(()=>{i((0,$J.B)())},[i]),[E,v]=f.useState(!1),b=f.useCallback(t=>{if(void 0!==t&&t.node_id){let a={targetVariable:{id:t.node_id}},l=ei.CWU.getVariableResolvedValue(t.node_id,lg.AD);!e&&t.resolvedType===ei.rXF.COLOR&&l&&(a.targetVariableData=l??void 0),n(a),i((0,YP.Zh)({name:"prototype.variable_selected",params:{collectionId:t.variableSetId,variableId:t.node_id,variableType:t.resolvedType}})),v(!0)}},[i,e,n]),C=f.useCallback(e=>{e.value.stablePath.map(e=>lg.sH(e))&&(n({targetVariable:{nodeFieldAlias:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}),v(!0))},[n]),w=f.useMemo(()=>(0,y.kc)().prototype_expression_props?{type:"COMPONENT_PROPS",layout:"list"}:{type:"LOCAL_VARIABLES",layout:"list"},[]);f.useEffect(()=>{let e=ei.Ez5.prototypingEditorState().colorPickerEyedropperVarData;return(0,aN.lu)(e,{onChangeImmediate(){let t=e.getCopy();t&&n({targetVariableData:t})}})},[n]);let T="nodeFieldAlias"in t?(0,QM.aA)(t.nodeFieldAlias.stablePathToNode,t.nodeFieldAlias.indexOrKey):void 0,x=T?(0,QM.Xx)(T.varValue.resolvedType):null,N=null;if((0,xM.gl)(t))N=null;else if((null==p?void 0:p.resolvedType)===ei.rXF.COLOR)N=(0,xM.gl)(e)?f.createElement("div",{className:"prototype_set_variable_controls--targetVariableDataMixedContainer--H6uGu"},(0,eN.t)("fullscreen.mixed")):f.createElement(f.Fragment,null,f.createElement($X.g,{variableValue:e??p,onChange:e=>{n({targetVariableData:e})},recordingKey:n_.Pt(l.recordingKey,"variableValueInput"),setVariableAction:!0,innerContainerClassName:"prototype_set_variable_controls--variableColorInputContainer--NaOmp"}));else{let t=l.isNestedInConditional?"prototype_set_variable_controls--absoluteIconInConditional--BbEmW":"prototype_set_variable_controls--absoluteIcon--1XpBF",a=(null==d?void 0:d.resolvedType)??((null==T?void 0:T.varValue.resolvedType)===ei.rXF.TEXT_DATA?ei.rXF.STRING:null==T?void 0:T.varValue.resolvedType)??ei.rXF.BOOLEAN;N=f.createElement("div",{className:o?void 0:a8.cx.ml12.$},f.createElement("div",{className:$Z},f.createElement(Qw.KN,{resolvedType:a,targetVariableData:e,autoOpenExpressionBuilder:E,setAutoOpenExpressionBuilder:v,updateSelectionProperties:n,recordingKey:l.recordingKey,isNarrowPanel:l.isNarrowPanel,showVariableThumbnails:!0}),!o&&f.createElement(a2.B,{className:nb()($Q,t),svg:$D.default})))}let S=nb()({"prototype_set_variable_controls--targetVariableDropdown--IZwoF":!o&&!l.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownNarrow--WWi-t prototype_set_variable_controls--targetVariableDropdown--IZwoF":!o&&l.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownUI3--Pz71q":o,[$$]:o&&!(c||T)}),k=f.createElement(a7.D8,{recordingKey:n_.Pt(l.recordingKey,"selectTargetVariable"),onClick:g},f.createElement("div",{className:o?void 0:(0,xM.hS)(t)?"prototype_set_variable_controls--targetVariableLabel--AFCqK":"prototype_set_variable_controls--targetVariableLabelInactive--zHWCC prototype_set_variable_controls--targetVariableLabel--AFCqK",ref:r},f.createElement(fy.Y,null,f.createElement("div",{className:S},f.createElement("div",{className:$Z},(0,xM.gl)(t)?f.createElement("div",{className:nb()(a8.cx.pt2.$,a8.cx.pb2.$)},(0,eN.t)("fullscreen.mixed")):c?f.createElement(w2.w,{text:c,thumbnailValue:p,isDeleted:!!d&&(0,QR.eF)(d)}):T?f.createElement(w2.w,{text:T.name,thumbnailValue:x,isDeleted:!1,colorTheme:w2.J.COMPONENT}):f.createElement("div",{className:nb()(a8.cx.pt2.$,a8.cx.pb2.$,o?"prototype_set_variable_controls--placeholderTextColorUI3--Pc-4N":void 0)},o?(0,eN.t)("proto.select_variable.short"):(0,eN.t)("proto.select_variable")),!o&&f.createElement(a2.B,{className:$Q,svg:$D.default})))))),I=o?f.createElement(Q$.cS,{input:k,label:(0,eN.tx)("proto.variable")}):k,A=nb()({"prototype_set_variable_controls--setVariableToContainerNarrow--HHbHQ prototype_set_variable_controls--setVariableToContainer--kxsCZ":!o&&l.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainer--kxsCZ":!o&&!l.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainerUI3--pGbDe":o,[$$]:o&&!e&&(null==p?void 0:p.resolvedType)!==ei.rXF.COLOR}),O=f.createElement("div",{className:A,"data-testid":"set-variable-container"},N),L=o?null!==N?f.createElement(Q$.cS,{label:(0,eN.tx)("proto.variable.value"),input:O}):null:O;return f.createElement("div",{className:o?void 0:a8.cx.relative.$},I,s.isShown&&"variable-picker-set-variable-action"===s.type&&s.key===l.recordingKey?f.createElement(f.Fragment,null,f.createElement(ae.vx,{title:"",headerSize:"hidden",initialPosition:s.initialPosition,onClose:h,dragHeaderOnly:!1,initialWidth:216,canRenderBelowViewport:!0},(0,y.kc)().prototype_expression_props?f.createElement($Y.jc,{selectedItem:d,disabledVariableIds:new Set,currentView:w,toggleLayout:nf.lQ,pickerType:"fields",setControlRightButtons:f.createElement($q.f,{resolvedTypes:[ei.rXF.BOOLEAN,ei.rXF.STRING,ei.rXF.FLOAT,ei.rXF.COLOR]}),onVariableSelected:b,onClose:h,recordingKey:n_.Pt(l.recordingKey,"variablePickerForSelection"),searchQuery:u,onSearchInputChange:m,onComponentPropSelected:C}):f.createElement($Y.YK,{selectedItem:d,disabledVariableIds:new Set,currentView:w,toggleLayout:nf.lQ,pickerType:"fields",setControlRightButtons:f.createElement($q.f,{resolvedTypes:[ei.rXF.BOOLEAN,ei.rXF.STRING,ei.rXF.FLOAT,ei.rXF.COLOR]}),onVariableSelected:b,onClose:h,recordingKey:n_.Pt(l.recordingKey,"variablePickerForSelection"),searchQuery:u,onSearchInputChange:m})),f.createElement($Y.$3,{onClose:h})):null,L)}var $1=n(347082);let $2=(0,lt.ex)("prototype_state_management_info",function(){let e=f.createElement("a",{className:a8.cx.cursorPointer.colorTextTooltipSecondary.$,href:"https://help.figma.com/hc/articles/14397859494295",rel:"noopener noreferrer",target:"_blank",onMouseDown:e=>{e.stopPropagation(),e.preventDefault()}},(0,eN.tx)("proto.state_management.info_tooltip_learn_more")),t=f.createElement("span",null,f.createElement("strong",null,(0,eN.tx)("proto.animation_panel.preserve_scroll_position")));return f.createElement("div",{className:"prototype_state_management_info_tooltip--stateManagementMoreInfo---gER1 tooltip--text--Ll1mS"},(0,eN.tx)("proto.state_management.info_tooltip",{PreserveScrollPositionBold:t,LearnMoreLink:e}))});var $5=n(394781);let $4="prototype_state_management_panel--checkboxRow--2u02e checkbox--_checkboxRow--oEhow",$3="prototype_state_management_panel--expandCaret--uuDge";function $6({transition:e,navigationType:t,recordingKey:n,showPreserveScrollPosition:a,showResetVideoState:l,showResetInteractiveComponentState:r,updateSelectionProperties:i,stateManagementVersion:o,selectedInteractions:s}){let c=(0,_.wA)(),d=(0,n6.GS)(),[u,m]=f.useState(!d),p=f.useContext(QK.c);if((0,QT.YT)()===QT.Oz.TWO_COL&&p===QK.P.LEFT)return null;let g=(0,QT.LH)(o),h=f.createElement($o.S,{onChange:t=>{c((0,YP._P)({name:"Preserve Scroll Changed",params:{newValue:t}})),i({...function(e){if((0,xM.hS)(e.preserveScroll))return{transitionPreserveScroll:e.preserveScroll}}({...e,preserveScroll:t})})},checked:!0===e.preserveScroll,mixed:(0,xM.gl)(e.preserveScroll),recordingKey:n_.Pt(n,"preserve-scroll-check"),label:f.createElement(oE.J,null,(0,eN.tx)("proto.animation_panel.preserve_scroll_position"))}),E=d?f.createElement(Q$.TN,null,h):f.createElement(iy.fI,{className:$4},h),v=f.createElement($o.S,{onChange:t=>{c((0,YP._P)({name:"Reset Scroll Position Changed",params:{newValue:t,noodleUpgradedThisSession:$5.zZ.haveAnyInteractionsBeenUpgraded(s)}})),i({...function(e){if((0,xM.hS)(e.resetScrollPosition))return{transitionResetScrollPosition:e.resetScrollPosition}}({...e,resetScrollPosition:t})})},checked:!0===e.resetScrollPosition,mixed:(0,xM.gl)(e.resetScrollPosition),recordingKey:n_.Pt(n,"reset-scroll-position-check"),label:f.createElement(oE.J,null,(0,eN.tx)("proto.animation_panel.reset_scroll_position"))}),y=f.createElement("div",{"data-tooltip-type":nx.Ib.SPECIAL,"data-tooltip":$2,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":240,className:d?"prototype_state_management_panel--stateManagementPanelTooltipUI3--x5MQ3":void 0},f.createElement(BG.In,{icon:"info-16"})),b=d?f.createElement(Q$.TN,null,v," ",y):f.createElement(iy.fI,{className:$4},v),C=f.createElement($o.S,{onChange:t=>{c((0,YP._P)({name:"Reset Component State Changed",params:{newValue:t,noodleUpgradedThisSession:$5.zZ.haveAnyInteractionsBeenUpgraded(s)}})),i({...function(e){if((0,xM.hS)(e.resetInteractiveComponents))return{transitionResetInteractiveComponents:e.resetInteractiveComponents}}({...e,resetInteractiveComponents:t})})},checked:!0===e.resetInteractiveComponents,mixed:(0,xM.gl)(e.resetInteractiveComponents),recordingKey:n_.Pt(n,"reset-component-state-check"),label:f.createElement(oE.J,null,(0,eN.tx)("proto.animation_panel.reset_component_state"))}),w=d?f.createElement(Q$.TN,null,C):f.createElement(iy.fI,{className:$4},C),T=f.createElement($o.S,{onChange:t=>{c((0,YP._P)({name:"Reset Video Position Changed",params:{newValue:t}})),i({...function(e){if((0,xM.hS)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}({...e,resetVideoPosition:t})})},checked:!0===e.resetVideoPosition,mixed:(0,xM.gl)(e.resetVideoPosition),recordingKey:n_.Pt(n,"reset-video-position-check"),label:f.createElement(oE.J,null,(0,QT.LH)(o)?(0,eN.tx)("proto.state_management.reset_video_state"):(0,eN.tx)("proto.animation_panel.reset_video_state"))}),x=d?f.createElement(Q$.TN,null,T):f.createElement(iy.fI,{className:$4},T),N=f.createElement(iy.Zk,{className:`prototype_state_management_panel--stateManagementPanel--sYaaj ${(0,QT.kM)(o)&&"prototype_state_management_panel--stateManagementPanelWithVersion--AovOP"}`},!d&&f.createElement(iy.fI,null,f.createElement(iy.xw,{className:"prototype_state_management_panel--panelTitle--Nr4Eh",faded:!0},(0,eN.tx)("proto.state_management")),!(0,QT.kM)(o)&&y),(0,QT.uU)(o)&&a&&E,l&&(0,QT.uU)(o)&&x,g&&b,g&&r&&w,g&&l&&x,(0,xM.gl)(o)&&f.createElement(fy.Y,{direction:"horizontal",padding:{horizontal:12,vertical:12}},f.createElement(iy.UZ,null,(0,eN.tx)("proto.state_management.mixed_state_update")))),S=()=>{m(!u)},k=f.createElement(a7.D8,{key:"expand-caret",recordingKey:n_.Pt(n,"expand-caret"),onMouseDown:S,role:"presentation"},f.createElement(ry.U,{svg:u?Cz.A:Ol.A},u?f.createElement(ER.O,{className:$3}):f.createElement(IW.k,{className:$3}))),I=f.createElement("div",{className:"prototype_state_management_panel--expandRow--RVDCp",onMouseDown:S,role:"presentation"},k,f.createElement(a7.oj,null,(0,eN.tx)("proto.state")));return f.createElement($1.p,{name:"prototype_state_management_panel"},d&&I,(u||!d)&&N)}class $7 extends ow.c${}class $8 extends ow.l6{}let $9=lg.AD;class eee extends Th.cP{format(e){return e===$9||null===e?(0,eN.t)("proto.target_video_node_name_formatter.this_video"):super.format(e)}}function eet(e){let{viableSameFrameVideoIds:t,disabledSameFrameVideoIds:n,scene:a,dropdownShown:l,targetVideoNodeID:r,isVideoSelected:i,onChange:o}=e,s=(0,_.wA)(),[c,d]=f.useState(()=>i?new eee(a):new Th.cP(a));t.sort((e,t)=>{let n=c.format(e),a=c.format(t);return n.localeCompare(a)}),i&&t.unshift($9);let u=t.length>0&&n.length>0,m=`prototype-target-video-select-${e.recordingKey}`,p=(0,n6.GS)(),g=f.createElement($8,{id:m,dataTestId:"target-video-select",className:"prototype_target_video_dropdown--targetVideoDropdown--6hKF-",chevronClassName:"prototype_target_video_dropdown--chevron--jgz53",inputClassName:"prototype_target_video_dropdown--input--infAK",property:(0,xM.gl)(r)?r:lg.dI(r),formatter:c,onChange:o,dispatch:s,dropdownShown:l,recordingKey:n_.Pt(e,"select"),onOptionFocus:e=>{aT.Uc(e??"")},dropdownAlignment:"left"},t.filter(e=>c.hasNameForNode(e)).map((t,n)=>f.createElement($7,{key:`enabled-${n}`,value:t,recordingKey:n_.Pt(e,`viable-option-${n}`),disabled:!1})),u&&f.createElement(ow.sK,null),n.filter(e=>c.hasNameForNode(e)).map((t,n)=>f.createElement($7,{key:`disabled-${n}`,value:t,recordingKey:n_.Pt(e,`viable-option-${n}`),disabled:!0})));return p?f.createElement(Q$.cS,{input:g,label:(0,eN.tx)("proto.video_dropdown.label")}):g}function een({action:e,recordingKey:t,onURLChange:n,onOpenInNewTabChange:a}){let l=(0,n6.GS)(),r=f.createElement(a1.ks,{className:l?"prototype_open_url_action_options--urlInputUI3--H-JfT":"prototype_open_url_action_options--urlInput--T-tGT",dataTestId:"url-input",placeholder:(0,eN.t)("proto.interaction.example_com"),value:(0,xM.gl)(e.connectionURL)?(0,eN.t)("fullscreen.mixed"):(0,xM._W)(e.connectionURL,""),onChange:n,recordingKey:n_.Pt(t,"urlTextInput"),autoFocus:!1}),i=f.createElement($o.S,{label:f.createElement(oE.J,null,(0,eN.tx)("proto.action_open_url_in_new_tab")),onChange:a,recordingKey:n_.Pt(t,"open-url-in-new-tab-check"),checked:void 0===e.openUrlInNewTab||!0===e.openUrlInNewTab});return f.createElement(f.Fragment,null,l?f.createElement(Q$.cS,{label:(0,eN.tx)("proto.open_url.text_input_label"),input:r}):r,l?f.createElement(Q$.TN,null,i):f.createElement(iy.fI,{className:"prototype_open_url_action_options--checkboxRow--mu17T checkbox--_checkboxRow--oEhow"},i))}var eea=n(588599);function eel({updateSelectionProperties:e,action:t,extraScrollOffset:n,showScrollToOptions:a,recordingKey:l}){let{smallNudgeAmount:r,bigNudgeAmount:i}=(0,tM.sT)(),o=(0,_.wA)(),s=(0,n6.GS)(),c=(t,n)=>(a,l)=>{t&&e({extraScrollOffset:{...t,[n]:a}},{shouldCommit:l})},d=(0,xM._W)(n,{x:0,y:0});if(!a||"SCROLL_TO"!==t)return null;let u=f.createElement($d.gq,{className:s?void 0:QF.U,inputClassName:s?QF.oM:QF.hF,value:d.y,wheelMultiplier:r,scrubMultiplier:r,smallNudgeAmount:r,bigNudgeAmount:i,onValueChange:c(d,"y"),dispatch:o,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("proto.trigger.y_offset"),tooltipForScreenReadersOnly:!1,recordingKey:n_.Pt(l,"extraScrollOffsetY")},s?f.createElement("span",{className:QF.QK},(0,eN.tx)("proto.scroll_options.scroll_offset.y")):f.createElement(a2.B,{className:QF.QK,svg:eea.A})),m=f.createElement($d.gq,{className:s?void 0:QF.sC,inputClassName:s?QF.oM:QF.hF,value:d.x,wheelMultiplier:r,scrubMultiplier:r,smallNudgeAmount:r,bigNudgeAmount:i,onValueChange:c(d,"x"),dispatch:o,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("proto.trigger.x_offset"),tooltipForScreenReadersOnly:!1,recordingKey:n_.Pt(l,"extraScrollOffsetX")},s?f.createElement("span",{className:QF.QK},(0,eN.tx)("proto.scroll_options.scroll_offset.x")):f.createElement(a2.B,{className:QF.Kh,svg:eea.A}));return s?f.createElement(Q$.Cm,{label:(0,eN.tx)("proto.scroll_options.offset"),leftInput:m,rightInput:u}):f.createElement(iy.fI,null,u,m)}function eer(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0Zm1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-6.5-3.5a.5.5 0 0 0-1 0V12a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12.5 11.793V8.5Z",clipRule:"evenodd"}))}let eei="prototype_video_action_options--chevron--mkNyv",eeo="prototype_video_action_options--input--3-cEi",ees=new Th.js,eec=new Th.Z6;function eed({action:e,onChange:t,updateSelectionProperties:n,dropdownShown:a,recordingKey:l}){let r=(0,n6.GS)(),i=(0,Th.Od)(e),o=(0,xM.E7)(e.mediaAction),s="UPDATE_MEDIA_RUNTIME"===(0,xM.E7)(e.connectionType),c="SKIP_TO"===o,d="SKIP_FORWARD"===o||"SKIP_BACKWARD"===o,u="PLAY"===o||"PAUSE"===o||"TOGGLE_PLAY_PAUSE"===o,m="MUTE"===o||"UNMUTE"===o||"TOGGLE_MUTE_UNMUTE"===o,p=(0,_.wA)(),g=(0,tM.RU)(),h=f.useCallback(e=>{n({mediaSkipToTime:e}),p((0,YP._P)({name:"Media skip to time changed",params:{value:e}}))},[p,n]),E=`prototype-media-action-select-${l}`,v="prototype_video_action_options--shortDropdown--NOXXv",y=a&&a.type===E?ees:eec,b=f.createElement(QO,{id:E,dataTestId:"media-play-pause-select",className:v,chevronClassName:eei,inputClassName:eeo,property:i,formatter:y,onChange:t,dispatch:p,dropdownShown:a,recordingKey:n_.Pt(l,"select")},f.createElement(QA,{key:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",value:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",recordingKey:n_.Pt(l,"toggle-play-pause-option"),disabled:!1}),f.createElement(QA,{key:"UPDATE_MEDIA_PLAY",value:"UPDATE_MEDIA_PLAY",recordingKey:n_.Pt(l,"play-option"),disabled:!1}),f.createElement(QA,{key:"UPDATE_MEDIA_PAUSE",value:"UPDATE_MEDIA_PAUSE",recordingKey:n_.Pt(l,"pause-option"),disabled:!1})),C=f.createElement(QO,{id:E,dataTestId:"media-mute-unmute-select",className:v,chevronClassName:eei,inputClassName:eeo,property:i,formatter:y,onChange:t,dispatch:p,dropdownShown:a,recordingKey:n_.Pt(l,"select")},f.createElement(QA,{key:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",value:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",recordingKey:n_.Pt(l,"toggle-mute-unmute-option"),disabled:!1}),f.createElement(QA,{key:"UPDATE_MEDIA_MUTE",value:"UPDATE_MEDIA_MUTE",recordingKey:n_.Pt(l,"mute-option"),disabled:!1}),f.createElement(QA,{key:"UPDATE_MEDIA_UNMUTE",value:"UPDATE_MEDIA_UNMUTE",recordingKey:n_.Pt(l,"unmute-option"),disabled:!1})),w=f.createElement(QO,{id:E,dataTestId:"media-skip-by-select",className:v,chevronClassName:eei,inputClassName:eeo,property:i,formatter:y,onChange:t,dispatch:p,dropdownShown:a,recordingKey:n_.Pt(l,"select"),dropdownWidth:160},f.createElement(QA,{key:"UPDATE_MEDIA_SKIP_FORWARD",value:"UPDATE_MEDIA_SKIP_FORWARD",recordingKey:n_.Pt(l,"skip-forward-option"),disabled:!1}),f.createElement(QA,{key:"UPDATE_MEDIA_SKIP_BACKWARD",value:"UPDATE_MEDIA_SKIP_BACKWARD",recordingKey:n_.Pt(l,"skip-backward-option"),disabled:!1})),T=f.createElement($d.qd,{className:"prototype_video_action_options--timestampContainer---DdaI",inputClassName:"prototype_video_action_options--timestamp--luOrs",dataTestId:"mediaSkipToTime-input",dispatch:p,value:e.mediaSkipToTime||0,onValueChange:h,wheelMultiplier:g/1e3,scrubMultiplier:g/1e3,max:3600,displayFractions:!0,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("proto.trigger.timestamp_to_set_to"),tooltipForScreenReadersOnly:!0,recordingKey:n_.Pt(l,"mediaSkipToTimeInput")},r?f.createElement(eer,null):void 0),x="SKIP_BACKWARD"===o?(0,eN.t)("proto.trigger.duration_to_jump_backward"):(0,eN.t)("proto.trigger.duration_to_jump_forward"),N=f.createElement($d.dE,{className:"prototype_video_action_options--timeAmountContainer--5kpHn",dataTestId:"mediaSkipByAmount-input",dispatch:p,value:e.mediaSkipByAmount||5,onValueChange:e=>{n({mediaSkipByAmount:e}),p((0,YP._P)({name:"Media skip by amount changed",params:{value:e}}))},wheelMultiplier:g/1e3,scrubMultiplier:g/1e3,max:3600,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":x,tooltipForScreenReadersOnly:!0,recordingKey:n_.Pt(l,"mediaSkipByAmountInput")});if(!s)return null;if(r){if(u)return f.createElement(Q$.cS,{input:b,label:(0,eN.tx)("proto.video_options.behavior")});if(m)return f.createElement(Q$.cS,{input:C,label:(0,eN.tx)("proto.video_options.behavior")});if(d)return f.createElement(f.Fragment,null,f.createElement(Q$.cS,{input:w,label:(0,eN.tx)("proto.video_options.direction")}),f.createElement(Q$.cS,{input:N,label:(0,eN.tx)("proto.video_options.offset")}));if(c)return f.createElement(Q$.cS,{input:T,label:(0,eN.tx)("proto.video_options.timestamp")})}return f.createElement(iy.fI,null,u&&b,m&&C,d&&w,d&&N,c&&T)}function eeu({action:e,recordingKey:t,interactionType:n,onActionChange:a,updateMultipleDestinationNodes:l,updateSelectionProperties:r,stateManagementVersion:i,autoOpenVariablePicker:o,autoOpenExpressionBuilder:s,setAutoOpenExpressionBuilder:c,...d}){let u=(0,_.wA)(),m=(0,nT.U)(),{scene:p,selectionProperties:g}=(0,N.R)(e=>({scene:e.mirror.sceneGraph,selectionProperties:e.mirror.selectionProperties})),h=(0,n6.GS)(),E=(0,QT.YT)(),v=E===QT.Oz.SINGLE_COL,y=E===QT.Oz.TWO_COL,b=f.useContext(QK.c),C=y&&b===QK.P.RIGHT,w="SET_VARIABLE"===(0,xM.E7)(e.connectionType),T="SET_VARIABLE_MODE"===(0,xM.E7)(e.connectionType),x="CONDITIONAL"===(0,xM.E7)(e.connectionType),S="INTERNAL_NODE"===(0,xM.E7)(e.connectionType),k="INTERNAL_NODE"===(0,xM.E7)(e.connectionType)&&"SWAP_STATE"===(0,xM.E7)(e.navigationType),I="URL"===(0,xM.E7)(e.connectionType),A=S||"BACK"===(0,xM.E7)(e.connectionType)||"CLOSE"===(0,xM.E7)(e.connectionType),O="UPDATE_MEDIA_RUNTIME"===(0,xM.E7)(e.connectionType),L=(0,QI.dq)(g),P=(0,xP.uQ)(),D=[],R=[];if(P){let{viableIds:e,disabledIds:t}=ei.X3B.getVideoNodesOnSameTlfAsNode(P);D=e,R=t}let M=lg.dI((0,xM.E7)(e.transitionNodeID)),F=null!=M&&M!==lg.AD,B=S&&(!(0,xM.hS)(e.transitionNodeID)||F),U=(0,xM.E7)(e.navigationType),H=S&&"OVERLAY"===(0,xM.E7)(U),G=(0,QT.hU)(e.transitionType,e.easingType,e.easingFunction,e.transitionDuration,e.transitionShouldSmartAnimate,e.transitionPreserveScroll,e.transitionResetVideoPosition,e.openUrlInNewTab,e.transitionResetScrollPosition,e.transitionResetInteractiveComponents),V=A&&!H&&("INSTANT"===G.behavior||"DISSOLVE"===G.behavior),K=S&&"OVERLAY"===(0,xM.E7)(e.navigationType)&&F,W=S&&(H||"SWAP"===(0,xM.E7)(U)),z=!O&&(0,QT.oc)(e),j=(0,QT.GB)(e),J=(0,QT.uU)(i)?V||z:(0,QT.Fp)(i,e.connectionType,e.navigationType),{selectedInteractions:Y}=(0,Qv.Ay)(QE.J.NORMAL),X=Y.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>Qf.d({nodeID:e.sourceNodeID,interactionID:e.id})),q=f.useCallback(e=>{let t=lg.sH(e);t&&r({transitionNodeID:t}),u((0,YP._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(X),destinationTlfId:e}}))},[u,r,X]),Z=f.useCallback(e=>{l(e),u((0,YP._P)({name:"Variant based prototyping UI changed",params:{source:"panel"}})),u((0,YP._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(X)}}))},[l,u,X]),Q=f.useCallback(e=>{r({connectionURL:e.target.value})},[r]),$=(0,Th.Od)(e),ee=nb()({[QF.Ph]:!h,[QF.Ti]:d.isNestedInConditional&&!v&&!C}),et=S&&!k,en=f.createElement($K,{className:QF.iR,dispatch:u,dropdownShown:m,onChange:q,nodeId:e.transitionNodeID||lg.Hr,scene:p,recordingKey:n_.Pt(t,"destinationDropdown"),action:$,isUI3:h}),ea=f.createElement(eel,{action:$,showScrollToOptions:"SCROLL_TO"===$,extraScrollOffset:e.extraScrollOffset,updateSelectionProperties:r,recordingKey:n_.Pt(t,"scrollOptionsPanel")}),el=f.createElement($E,{interactionType:n,updateSelectionProperties:r,recordingKey:n_.Pt(t,"overlaySettings"),actionIndexPath:d.actionIndexPath,nodeId:e.transitionNodeID||lg.Hr});return f.createElement("div",{className:ee},et&&(h?f.createElement(f.Fragment,null,f.createElement(Q$.cS,{label:W?(0,eN.tx)("proto.overlay"):(0,eN.tx)("proto.destination"),input:en}),ea,K&&el):en),I&&f.createElement(een,{action:e,recordingKey:t,onOpenInNewTabChange:e=>{r({openUrlInNewTab:e}),u((0,YP._P)({name:"Open Url In New Tab Changed",params:{value:e}}))},onURLChange:Q}),O&&f.createElement(eet,{dropdownShown:m,scene:p,targetVideoNodeID:e.transitionNodeID||lg.Hr,recordingKey:n_.Pt(t,"targetVideoDropdown"),viableSameFrameVideoIds:D,disabledSameFrameVideoIds:R,isVideoSelected:L,onChange:q}),f.createElement(eed,{dropdownShown:m,action:e,onChange:a,updateSelectionProperties:r,recordingKey:t}),!h&&ea,w&&f.createElement("div",{className:h?void 0:a8.cx.ml4.$},f.createElement($0,{className:QF.PB,dispatch:u,onChange:q,nodeId:e.transitionNodeID||lg.Hr,targetVariable:e.targetVariable||{id:""},targetVariableData:e.targetVariableData,updateSelectionProperties:r,recordingKey:n_.Pt(t,"setVariableControls"),action:$,isNestedInConditional:d.isNestedInConditional,isNarrowPanel:d.isNestedInConditional||d.isNarrowPanel,autoOpenVariablePicker:o})),T&&f.createElement("div",{className:h?void 0:a8.cx.ml4.$},f.createElement(Q9,{dispatch:u,targetVariableSetID:e.targetVariableSetID,targetVariableModeID:e.targetVariableModeID,deprecatedTargetVariableSetKey:e.targetVariableSetKey,updateSelectionProperties:r,recordingKey:n_.Pt(t,"setVariableControls"),actionIndexPath:d.actionIndexPath.join(",")})),x&&(C?f.createElement($B,{recordingKey:n_.Pt(t,"conditionalActionSection","conditional-block",0),autoOpenExpressionBuilder:s,setAutoOpenExpressionBuilder:c,updateSelectionProperties:r,conditionalActions:(0,xM.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]}):f.createElement($F,{updateSelectionProperties:r,recordingKey:n_.Pt(t,"conditionalActionSection"),action:e,updateMultipleDestinationNodes:l,interactionType:n,stateManagementVersion:i,selectedInteractions:d.selectedInteractions,actionIndexPath:d.actionIndexPath,onDrop:d.onDrop,onSelect:d.onSelect,onExpand:d.onExpand,onNewActionAdded:d.onNewActionAdded,selectedActionIndex:d.selectedActionIndex,expandedRows:d.expandedRows,autoOpenVariablePicker:o,handleMouseDownUI3:d.handleMouseDownUI3})),k&&f.createElement("div",{className:a8.cx.ml0.$},f.createElement($W,{onChange:Z,nodeId:e.transitionNodeID||lg.Hr,recordingKey:n_.Pt(t,"consumption"),actionIndexPath:d.actionIndexPath})),B&&f.createElement(f.Fragment,null,h&&f.createElement("div",{className:QF.x}),f.createElement($N.X7,{transition:G,interactionType:n,navigationType:e.navigationType,recordingKey:n_.Pt(t,"animationPanel"),updateSelectionProperties:r,isNarrowPanel:d.isNestedInConditional||d.isNarrowPanel,stateManagementVersion:i})),K&&!h&&el,J&&f.createElement(f.Fragment,null,h&&f.createElement("div",{className:QF.x}),f.createElement($6,{connectionType:e.connectionType,transition:G,navigationType:e.navigationType,recordingKey:n_.Pt(t,"stateManagementPanel"),updateSelectionProperties:r,showPreserveScrollPosition:V,showResetVideoState:!!z,showResetInteractiveComponentState:!!j,stateManagementVersion:i,selectedInteractions:d.selectedInteractions})))}var eem=n(344525),eep=n(323110),eef=n(482725);let ee_=Symbol("ACTION_ROW");function eeg({updateMultipleDestinationNodes:e,updateSelectionProperties:t,onDeleteAction:n,stateManagementVersion:a,selectedInteractions:l,autoOpenVariablePicker:r,autoOpenExpressionBuilder:i,setAutoOpenExpressionBuilder:o,...s}){let c=(0,_.wA)(),{shouldShowAdvancedPrototypingPaywall:d,showAdvancedPrototypingVariablesModal:u,showAdvancedPrototypingConditionalActionsModal:m}=(0,QT.zt)(),p=(0,nT.U)(),g=(0,QT.SJ)(),{firstVariableSetMode:h,firstVariableSetID:E}=Q8(),v=s.action,y=s.isNestedInConditional&&(0,$S.qQ)(s.action),b=!!v.connectionType&&"CONDITIONAL"===v.connectionType,C=(0,n6.GS)(),w=(0,QT.YT)(),T=w===QT.Oz.SINGLE_COL,x=w===QT.Oz.TWO_COL,N=f.useContext(QK.c),k=x&&N===QK.P.RIGHT,I=x&&N===QK.P.LEFT,A=!((0,xM.gl)(s.action)||["CLOSE","NONE"].includes(v.connectionType))&&!C;var O=s.selectedActionIndex.equals(s.actionIndexPath);let L=1===s.selectedActionIndex.path.length&&s.isNestedInConditional&&s.actionIndexPath[0]===s.selectedActionIndex.path[0];var P=void 0===s.expandedRows||void 0!==s.expandedRows.find(e=>e.equals(s.actionIndexPath));C&&(P=!!T||!I||b);let D=f.useCallback(()=>{(A||T)&&s.onExpand(s.actionIndexPath)},[A,T,s]),[R,M]=f.useState(!1);f.useEffect(()=>{if(b){let e=setTimeout(()=>{M(!0)},0);return()=>clearTimeout(e)}M(!0)},[b]);let F=b&&!P,B=b&&P,U=f.useRef(null),[H,G]=(0,S.fp)(QT.hV),{position:V,dragItem:K}=(0,Qx.h4)(()=>({type:ee_,element:U,item:s.action,dropPositionThreshold:B?.2:F?1/3:.5,getDeepestTargetOnly:!0,canDrag:!!I||!P,onDrop(e){s.onDrop(e),G(!0)}})),W=f.useMemo(()=>{let e=U.current;if(!e||!V||k)return;if(K&&"CONDITIONAL"===K.connectionType&&s.isNestedInConditional||(0,$S.qQ)(K)){G(!1);return}let t=y?Qx.Nz.BEFORE:V;var n,a,l=void 0;let r=(null==(a=null==(n=e.offsetParent)?void 0:n.firstElementChild)?void 0:a.scrollTop)??0;return t===Qx.Nz.BEFORE?l=e.offsetTop-r:t===Qx.Nz.AFTER&&(l=e.offsetTop+e.offsetHeight-r),G(!0),l},[V,k,K,s.isNestedInConditional,y,G]),z=V&&b&&!P&&V===Qx.Nz.INSIDE&&"CONDITIONAL"!==K.connectionType,j=n_.rf(s.recordingKey,"mousedown",e=>{P||(O=!0,s.onSelect(s.actionIndexPath,!0))}),J=n_.rf(s.recordingKey,"mousedown",e=>{O=!1,s.onSelect(s.actionIndexPath,!1)}),Y=n_.rf(s.recordingKey,"click",e=>{s.onSelect(s.actionIndexPath,!0)}),X=n_.rf(s.recordingKey,"mousedown",e=>{(0,$S.qQ)(s.action)||s.onSelect(s.actionIndexPath,!0)}),q=e=>{var n=!0,a=!1;switch(e){case"NONE":t({connectionType:"NONE"});break;case"NAVIGATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE"});break;case"OPEN_OVERLAY":t({connectionType:"INTERNAL_NODE",navigationType:"OVERLAY"});break;case"SCROLL_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SCROLL_TO"});break;case"SWAP_WITH":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP"});break;case"SWAP_STATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP_STATE"});break;case"GO_BACK":t({connectionType:"BACK"});break;case"CLOSE_OVERLAY":t({connectionType:"CLOSE"});break;case"OPEN_URL":t({connectionType:"URL"});break;case"SET_VARIABLE":d?(n=!1,u()):(t({connectionType:"SET_VARIABLE"}),r.current=!0);break;case"SET_VARIABLE_MODE":d?(n=!1,u()):t({connectionType:"SET_VARIABLE_MODE",targetVariableSetID:E,targetVariableModeID:h});break;case"UPDATE_MEDIA_PLAY":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PLAY"});break;case"UPDATE_MEDIA_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PAUSE"});break;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_PLAY_PAUSE"});break;case"UPDATE_MEDIA_MUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"MUTE"});break;case"UPDATE_MEDIA_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"UNMUTE"});break;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_MUTE_UNMUTE"});break;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_FORWARD"});break;case"UPDATE_MEDIA_SKIP_BACKWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_BACKWARD"});break;case"UPDATE_MEDIA_SKIP_TO":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_TO"});break;case"CONDITIONAL":a=!0,d?(n=!1,m()):(t({connectionType:"CONDITIONAL"}),C&&o&&o(!0))}if(C||P||D(),x&&s.onExpand(s.actionIndexPath,a),n){let t=l.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>Qf.d({nodeID:e.sourceNodeID,interactionID:e.id}));c((0,YP._P)({name:"Prototype action changed",params:{action:e,source:"panel",connectorIds:JSON.stringify(t)}}))}},Z=s.isNestedInConditional?QF.It:QF.ft,Q=nb()({[QF.wu]:!I,[QF.zX]:I&&H}),$=f.createElement(ry.U,{svg:eep.A},f.createElement(Qk,{className:QF._2}));if(y&&s.onAddAction)return f.createElement("div",{className:I?QF.LW:void 0},W&&f.createElement("hr",{className:Z,style:{transform:`translateY(${W}px)`}}),I&&s.isNestedInConditional&&$,f.createElement("div",{className:Q,ref:U},f.createElement($k,{addButtonPressed:s.onAddAction,recordingKey:n_.Pt(s.recordingKey,"addAction"),isNestedInConditional:!0})));let ee=(0,Th._X)(v),et="NONE"!==ee,en=(P||!et)&&!I,ea=s.numActions>1,el=(s.numActions>1||s.isNestedInConditional)&&!I,er=nb()({[QF.$l]:!0,[QF.KY]:I&&!s.isNestedInConditional,[QF.Iw]:I&&!s.isNestedInConditional&&H,[QF.DM]:I&&s.isNestedInConditional,[QF.vs]:I&&s.isNestedInConditional&&H,[QF.M9]:I&&s.isNestedInConditional&&L&&H,[QF.I_]:I&&b&&!O&&H,[QF.Cu]:O&&!C,[QF.PE]:O&&I&&!s.isNestedInConditional,[QF.Ze]:z,[QF.Op]:s.isNestedInConditional&&!C}),ei=nb()({[QF.rn]:!0,[QF.Gu]:I,[QF.Ti]:s.isNestedInConditional&&!C&&!k,[QF.Yo]:s.isNestedInConditional&&C&&!k}),eo=f.createElement(a2.B,{key:"expand-caret",className:QF.GE,svg:P?Cz.A:Ol.A,recordingKey:n_.Pt(s.recordingKey,"expandCaret"),onClick:D}),es=f.createElement(QV,{action:v,isNestedInConditional:s.isNestedInConditional,isNarrowPanel:s.isNarrowPanel&&ea,onClick:C?Y:void 0}),ec=f.createElement(QP,{className:"NONE"===ee||C?void 0:eem.fH,dispatch:c,dropdownShown:p,onChange:q,action:ee,recordingKey:n_.Pt(s.recordingKey,"actionDropdown"),showVideoActions:g,isNestedInConditional:s.isNestedInConditional}),ed=f.createElement(iy.K0,{className:C?QF.gG:QF.hH,onClick:n,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("proto.prototype_panel.delete"),"aria-label":(0,eN.t)("proto.prototype_panel.delete"),recordingKey:n_.Pt(s.recordingKey,"actionDeleteButton")},f.createElement(ry.U,{svg:eef.A},f.createElement(Qm.O,null))),eu=f.createElement(iy.fI,{className:ei,onDoubleClick:D},A&&eo,en?f.createElement("span",{className:QF.P2},ec):es,el&&ed),em=en?ec:es,ep=f.createElement(a7.D8,{className:ei,onDoubleClick:D},A&&eo,el?f.createElement($i.DE,{appendedClassName:QF.Jw,label:null,input:em,icon:ed}):f.createElement($i.Ad,{appendedClassName:QF.Jw,label:null,input:em})),ef=(0,eN.tx)("proto.action"),e_=f.createElement(a7.D8,{className:ei},T||k?f.createElement(Q$.cS,{label:ef,input:em}):em),eg=C?e_:ep,eh=nb()({[QF.Oe]:!0,[QF.h2]:O,[QF.Ob]:b});return f.createElement("div",{className:er,ref:U,role:"button",tabIndex:0,onMouseDown:C?void 0:j,onMouseUp:C?void 0:J},void 0!==W&&f.createElement("hr",{className:Z,style:{transform:`translateY(${W}px)`}}),I?f.createElement("div",{className:eh,role:"button",tabIndex:0,onMouseDown:C?X:void 0},s.isNestedInConditional&&$,eg):C?eg:eu,P&&R&&f.createElement(eeu,{updateMultipleDestinationNodes:e,action:v,onActionChange:q,recordingKey:s.recordingKey,updateSelectionProperties:t,interactionType:s.interactionType,stateManagementVersion:a,selectedInteractions:l,isNestedInConditional:s.isNestedInConditional,isNarrowPanel:s.isNarrowPanel,actionIndexPath:s.actionIndexPath,onDrop:s.onDrop,onSelect:s.onSelect,onExpand:s.onExpand,onNewActionAdded:s.onNewActionAdded,selectedActionIndex:s.selectedActionIndex,expandedRows:s.expandedRows,autoOpenVariablePicker:r,autoOpenExpressionBuilder:i,setAutoOpenExpressionBuilder:o,handleMouseDownUI3:X}))}var eeh=n(427113),eeE=n(682331),eev=n(73349);function eey({onChange:e,value:t,shouldFocusKeyCaptureField:n,setShouldFocusKeyCaptureField:a}){let l;let r=(0,eev._i)(null==t?void 0:t.keyCodes),i=t=>e({keyCodes:t,triggerDevice:"KEYBOARD"}),[o,s]=f.useState(!1),c=f.useRef(null);f.useEffect(()=>{(!t||!t.keyCodes||0===t.keyCodes.length)&&n&&c.current&&(a(!1),c.current.focus(),s(!0))},[a,n,t]),f.useEffect(()=>{if(!o)return()=>{};let t=new eeE.L,n=t.onPress(t=>{e({keyCodes:[t.buttons[0]],triggerDevice:t.controllerType}),requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})});return t.start(),()=>{n.release(),t.end()}},[e,o]);let d=null,u=(0,eev.E8)(t),m=(0,n6.GS)();return o?l=f.createElement(eeb,null,m?(0,eN.tx)("proto.keyCapture.press_key_lowercase"):(0,eN.tx)("proto.keyCapture.press_key")):(null==t?void 0:t.triggerDevice)==="KEYBOARD"&&r?d=(0,eev.U8)(r):u?d=u:l=f.createElement(eeb,null,m?(0,eN.tx)("proto.keyCapture.click_to_set_key"):(0,eN.tx)("proto.keyCapture.click_to_select")),f.createElement(iy.rp,{ref:c,className:"prototype_key_capture_field--root--bD21s","data-tooltip-type":nx.Ib.TEXT,"data-tooltip":d&&d.length>10?d:null,onFocus:()=>s(!0),onBlur:()=>s(!1),onKeyDown:e=>{e.preventDefault(),e.stopPropagation();let t=e.which||e.keyCode;!eev.RI.has(t)&&eev.pu[t]&&(t===(null==r?void 0:r.keyCode)&&e.repeat?i((0,eev.wb)({keyCode:t,metaKey:e.metaKey||r.metaKey,shiftKey:e.shiftKey||r.shiftKey,ctrlKey:e.ctrlKey||r.ctrlKey,altKey:e.altKey||r.altKey})):i((0,eev.wb)({...e,keyCode:t})),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},recordingKey:"keycapture"},d??l)}function eeb({children:e}){return f.createElement("span",{className:"prototype_key_capture_field--placeholder--gWUKF"},e)}var eeC=n(634238);class eew extends ow.l6{}class eeT extends ow.c${}let eex=new Th.VG,eeN=new Th.EX,eeS=new Th.JV,eek=new Th.Eq;function eeI(e){let t=(0,_.wA)(),n=(0,nT.U)(),a=(0,n6.GS)(),{showVideoV2Triggers:l}=(0,N.R)(e=>{var t;return{allStatesInSelection:(null==(t=e.mirror.selectionProperties.stateGroupSelectionInfo)?void 0:t.mode)===ei.iCO.STATE,allTopLevelFramesInSelection:!!e.mirror.selectionProperties.allTopLevelFramesInSelection,showVideoV2Triggers:(0,QI.dq)(e.mirror.selectionProperties)}}),r=(0,S.md)(eeC.NE),i=(t,n)=>{let r=f.createElement("div",{className:"transition_interaction_dropdown--prototypeInteractionIcon---njby"},(0,QI.e7)(t));return f.createElement(eeT,{key:n,value:t,icon:a?r:void 0,recordingKey:n_.Pt(e,t),disabled:!function(t){var n;if("NONE"===t)return!0;let a=!!e.interactionsOnSelectedNodes&&e.interactionsOnSelectedNodes.every(t=>e.interactionsOnSelectedNodes&&lg.aI(t.sourceNodeID,e.interactionsOnSelectedNodes[0].sourceNodeID))&&!(0,xM.hS)(e.property),r=(null==(n=function(){if(e.interactionsOnSelectedNodes)return new Set(e.interactionsOnSelectedNodes.map(e=>{var t;return null==(t=null==e?void 0:e.event)?void 0:t.interactionType}).filter(e=>void 0!==e))}())?void 0:n.has(t))&&(0,xM.hS)(e.property)&&e.property!==t;return(!a&&!r||!!["ON_KEY_DOWN","DRAG","ON_VOICE","ON_MEDIA_HIT"].includes(t))&&("AFTER_TIMEOUT"===t?!e.interactionContainsOpenLinkAction:"ON_MEDIA_HIT"===t||"ON_MEDIA_END"===t?l:(!e.interactionContainsOpenLinkAction||"ON_CLICK"===t||"MOUSE_UP"===t)&&(!e.interactionContainsUpdateMediaRuntime||"ON_HOVER"!==t&&"ON_PRESS"!==t&&"DRAG"!==t)&&(!e.interactionOnlyContainsBack||"ON_HOVER"!==t&&"ON_PRESS"!==t))}(t)})},o=["NONE"].map(i),s=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","ON_KEY_DOWN"].map(i),c=["MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].map(i),d=["ON_MEDIA_HIT","ON_MEDIA_END"].map(i),u=["AFTER_TIMEOUT"].map(i),m=r?"ON_MEDIA_HIT"!==e.property?eeN:eek:"ON_MEDIA_HIT"!==e.property?eex:eeS,p=f.useCallback(e=>e-24,[]),g=(0,xM.E7)(e.property);return f.createElement(eew,{id:"interaction-type-select",className:e.className,chevronClassName:"transition_interaction_dropdown--chevron--pyzhq",dataTestId:"interaction-select",property:e.property,formatter:m,icon:a&&g?(0,QI.e7)(g):void 0,onChange:e.onChange,dispatch:t,dropdownShown:n,recordingKey:n_.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,aR.nl)(),dropdownAlignment:p,dropdownWidth:160},o,f.createElement(ow.sK,null),s,f.createElement(ow.sK,null),c,f.createElement(ow.sK,null),u,l&&[f.createElement(ow.sK,{key:""}),...d])}let eeA={keyCodes:[],triggerDevice:"KEYBOARD"};function eeO(e,t,n,a){return n?f.createElement(Q$.cS,{label:e,input:t,appendedClassName:a?void 0:QF.dU}):f.createElement(iy.fI,null,t)}function eeL(e){let{detailPropsMultipleActions:t,interactionsOnSelectedNodesAndComponents:n,updateSelectionProperties:a}=(0,Qv.Ay)(e.category),{interactionType:l="NONE",transitionTimeout:r=.8,mediaHitTime:i=0,interactionMaintained:o=!1,interactionDuration:s=.3,keyTrigger:c=eeA}=t.interactionEvent,d=(e,t)=>{if(e.connectionType===t)return e;if("CONDITIONAL"===e.connectionType)for(let n of(0,xM.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]){let e=n.actions?n.actions.find(e=>e.connectionType===t):void 0;if(void 0!==e)return e}return null},u=void 0!==t.interactionActions.find(e=>d(e,"URL")),m=void 0!==t.interactionActions.find(e=>d(e,"UPDATE_MEDIA_RUNTIME")),p=1===t.interactionActions.length&&"BACK"===t.interactionActions[0].connectionType,g=void 0!==t.interactionActions.find(e=>d(e,"CONDITIONAL"));return function(e){let t=(0,_.wA)(),n=e.updateSelectionProperties,a=(0,tM.RU)(),[l,r]=f.useState(!1),i=(0,n6.GS)(),o=(0,QT.YT)(),s=o===QT.Oz.SINGLE_COL,c=o===QT.Oz.TWO_COL,d=!0===(0,xM.E7)(e.maintained),u=(0,xM.E7)(e.keyTrigger),m="ON_KEY_DOWN"===(0,xM.E7)(e.interactionType),p="AFTER_TIMEOUT"===(0,xM.E7)(e.interactionType),g="ON_MEDIA_HIT"===(0,xM.E7)(e.interactionType),h=["MOUSE_IN","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].indexOf((0,xM.E7)(e.interactionType)||"")>-1,E=f.createElement(eeI,{className:QF.sQ,property:e.interactionType,onChange:a=>{b7.sn.start("interaction_details_changed"),n({interactionType:a}),t((0,YP._P)({name:"Prototype Interaction Type Changed",params:{newType:a,oldType:(0,xM._W)(e.interactionType,"MIXED")}})),"ON_KEY_DOWN"===a&&r(!0)},interactionContainsOpenLinkAction:e.interactionContainsOpenLinkAction,interactionContainsUpdateMediaRuntime:e.interactionContainsUpdateMediaRuntime,interactionOnlyContainsBack:e.interactionOnlyContainsBack,recordingKey:n_.Pt(e,"interactionDropdown"),interactionsOnSelectedNodes:e.interactionsOnSelectedNodes}),v=i?s?f.createElement(Q$.cS,{label:(0,eN.tx)("proto.trigger"),input:E}):f.createElement("div",{className:QF.BX},E):f.createElement(iy.fI,{className:nb()(QF.SG,QF.QT)},E,f.createElement("div",{className:QF.LY},e.headerButtons)),y=f.createElement(f.Fragment,null,p&&eeO((0,eN.tx)("proto.delay"),f.createElement($d.W4,{className:i?QF.Lp:QF.Zp,inputClassName:i?QF.Gl:void 0,dataTestId:"timeout-input",dispatch:t,value:e.timeout,onValueChange:e=>{n({transitionTimeout:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:20,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:n_.Pt(e,"timeoutInput")},i?f.createElement(eeh.A,null):void 0),i,s),m&&eeO((0,eN.tx)("proto.key"),f.createElement(eey,{onChange:e=>{n({keyTrigger:e})},value:u,shouldFocusKeyCaptureField:l,setShouldFocusKeyCaptureField:r}),i,s),g&&eeO((0,eN.tx)("proto.time"),f.createElement($d.qd,{displayFractions:!0,className:QF.Ym,inputClassName:QF.vE,dataTestId:"mediaHitTime-input",dispatch:t,value:e.mediaHitTime,onValueChange:e=>{n({mediaHitTime:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:3600,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("proto.trigger.video_hit_time"),tooltipForScreenReadersOnly:!0,recordingKey:n_.Pt(e,"mediaHitTimeInput")},i?f.createElement(eer,null):void 0),i,s),h&&eeO((0,eN.tx)("proto.delay"),f.createElement($d.W4,{className:i?QF.Lp:QF.aq,inputClassName:i?QF.Gl:QF.p0,dataTestId:"duration-input",dispatch:t,value:d?e.interactionDuration:void 0,onValueChange:e=>{n(e&&e>0?{interactionMaintained:!0,interactionDuration:e}:{interactionMaintained:!1})},min:0,allowEmpty:!0,placeholder:(0,eN.t)("proto.trigger.add_delay_placeholder"),wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:n_.Pt(e,"delayInput")},i?f.createElement(eeh.A,null):void 0),i,s));return i?f.createElement("div",{className:c?QF.eU:void 0},v,y):f.createElement("div",{className:QF.cF},v,y)}({...e,updateSelectionProperties:a,interactionType:l,interactionContainsOpenLinkAction:u,interactionContainsUpdateMediaRuntime:m,interactionOnlyContainsBack:p,interactionContainsConditionalAction:g,timeout:r,maintained:o,interactionDuration:s,mediaHitTime:i,keyTrigger:c,interactionsOnSelectedNodes:n,recordingKey:n_.Pt(e.recordingKey,QT.Qe)})}let eeP="prototype_interaction_edit_modal--contentContainer--bo2b4",eeD="prototype_interaction_edit_modal--ui3TwoColContentContainer--x9vrG",eeR="prototype_interaction_edit_modal--ui3WithStateMgmtVersionPanel--9HgX1",eeM="prototype_interaction_edit_modal--ui3SingleColContentContainer--uF-ir",eeF="prototype_interaction_edit_modal--dividerHorizontal--3wvnB",eeB="prototype_interaction_edit_modal--ui3InteractionsPanelContentRight--bVfG8";function eeU(e){let{selectedInteractions:t,makeUpdateSelectionPropertiesForActionIndex:n,makeUpdateMultipleDestinationNodesForActionIndex:a,differentLengthActions:l,mergedActions:r}=(0,Qv.Ay)(e.category),i="NONE"!==(0,xM.E7)(e.interactionType),o=void 0!==r.find(e=>"CONDITIONAL"===e.connectionType),{selectedActionIndex:s,onSelect:c}=e,d=(0,n6.GS)(),u=(0,QT.YT)(),m=u===QT.Oz.SINGLE_COL,p=u===QT.Oz.TWO_COL,{expandedRows:_,setExpandedRows:g,deleteButtonPressed:h,newActionIndexPath:E,resetNewActionIndexPath:v}=e;f.useEffect(()=>{!E||(null==E?void 0:E.equals([]))||(d?c(E.path,!0):(g([..._,E]),c([],!1)),v())},[_,g,E,v,c,d]);let y=f.useCallback(e=>{_.find(t=>t.equals(e))?g(_.filter(t=>!t.equals(e))):g([..._,new $S.Op(e)])},[_,g]),b=f.useCallback(n=>{var a,l=n.dropItem;if((0,xM.gl)(l)||(0,$S.qQ)(n.dragItem))return;let r=e.interactionsOnSelectedNodes;if(!r||!t)return;for(var i=0;i<(null==t?void 0:t.length);i++){let e=t[i];if(e&&e.actions){let r=e.actions,o=(0,$S.Vp)(r,s,_,l,n.position);if(o.newSelectedActionIndex&&p&&c(o.newSelectedActionIndex.path,!0),o.newActions&&(t[i].actions=o.newActions,d||c([],!1)),o.newExpandedRows){if(p){let e=[];null==(a=o.newActions)||a.forEach((t,n)=>{"CONDITIONAL"===t.connectionType&&e.push(new $S.Op([n]))}),g(e)}else g(o.newExpandedRows)}}}let o=r.map(e=>t.find(t=>t.id===e.id)??e);et.Y5.updateSelectionProperties({prototypeInteractions:o})},[_,g,e.interactionsOnSelectedNodes,s,t,c,d,p]),C=nb()({"prototype_interaction_edit_modal--panelUI3--WK3CN":d,"prototype_interaction_edit_modal--panelUI3TwoColumn--V5gi4":p});return f.createElement(Qx.hh,null,f.createElement(iy.Zk,{className:C},e.shouldHideTitle?null:f.createElement(iy.fI,null,f.createElement(iy.U8,{title:(0,eN.t)("proto.interaction.interaction"),dataTooltipContentKey:QS,dataTooltipTimeoutDelay:50})),f.createElement("div",null,(i||d)&&f.createElement(f.Fragment,null,m&&f.createElement(f.Fragment,null,f.createElement(eeL,{category:e.category,recordingKey:QT.dJ,headerButtons:f.createElement(f.Fragment,null)}),f.createElement("div",{className:"prototype_interaction_edit_modal--dividerHorizontalUI3--HMCeE"})),l&&f.createElement(fy.Y,{direction:"horizontal",padding:{horizontal:16,vertical:12}},f.createElement(iy.UZ,null,(0,eN.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!l&&f.createElement(f.Fragment,null,null==r?void 0:r.map((l,i)=>f.createElement(eeg,{key:i,updateMultipleDestinationNodes:a(i),action:l,recordingKey:n_.Pt(e.recordingKey,QT.eG,i),updateSelectionProperties:n(i),onDeleteAction:()=>h(i),interactionType:e.interactionType,actionIndexPath:[i],numActions:r.length,isNestedInConditional:!1,isNarrowPanel:!o,stateManagementVersion:e.stateManagementVersion,selectedInteractions:t,onDrop:b,onSelect:e.onSelect,onExpand:y,selectedActionIndex:s,autoOpenVariablePicker:e.autoOpenVariablePicker,expandedRows:_,onNewActionAdded:e.onNewActionAdded,autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder})))))))}function eeH({transition:e,recordingKey:t,updateSelectionProperties:n,stateManagementVersion:a,selectedInteractions:l}){let r=(0,_.wA)(),i=(0,n6.GS)(),o=(0,QT.YT)()===QT.Oz.SINGLE_COL,s=()=>{for(let t of(Z.az.trackDefinedEvent("prototype.state_management_noodle_upgraded",{num_interactions:l.length,preserve_scroll_position_value:!!e.preserveScroll}),l))(0,QT.uU)(t.stateManagementVersion)&&t.id&&t.sourceNodeID&&$5.zZ.recordInteractionUpgraded(t.id,t.sourceNodeID);n({...(0,xM.hS)(e.preserveScroll)&&(0,xM.hS)(a)?{transitionResetScrollPosition:!e.preserveScroll}:{},stateManagementVersion:1}),r(eS.F.enqueue({type:"state-management-updated",message:(0,eN.t)("proto.state_management.visual_bell_updated_message"),button:{text:(0,eN.t)("proto.state_management.visual_bell_update_all"),action:()=>{et.Y5.triggerActionInUserEditScope("update-interactions-state-management-on-page"),r(eS.F.enqueue({type:"state-management-updated-all",message:(0,eN.t)("proto.state_management.visual_bell_update_all_message")}))}}}))},c=()=>{Z.az.trackDefinedEvent("prototype.state_management_noodle_reverted",{num_interactions:l.length}),n({stateManagementVersion:0})},d=1===a?f.createElement(a1.jG,{className:"prototype_state_management_version_panel--revertButton--Svmg9",recordingKey:n_.Pt(t,"revert-state-management-version"),onClick:c,"data-testid":"revert-state-management-button"},(0,eN.tx)("proto.state_management.revert_controls")):f.createElement(a1.nR,{recordingKey:n_.Pt(t,"update-state-management-version"),onClick:s},(0,eN.tx)("proto.state_management.update_controls")),u=o?va.IK:va.$n,m=1===a?f.createElement(u,{variant:"secondary",onClick:c,recordingKey:n_.Pt(t,"revert-state-management-version"),"data-testid":"revert-state-management-button"},(0,eN.tx)("proto.state_management.revert_controls")):f.createElement(u,{variant:"primary",onClick:s,recordingKey:n_.Pt(t,"update-state-management-version")},(0,eN.tx)("proto.state_management.update_controls")),p=1===a?(0,eN.tx)("proto.state_management.new_controls"):(0,eN.tx)("proto.state_management.old_controls"),g=f.createElement("a",{target:"_blank",rel:"noopener",href:"https://help.figma.com/hc/articles/14397859494295",className:i?void 0:"prototype_state_management_version_panel--link--i5iDD blue_link--blueLink--9rlnd"},i?(0,eN.tx)("proto.state_management.controls_help_link_new"):(0,eN.tx)("proto.state_management.controls_help_link")),h=f.createElement("div",{className:"prototype_state_management_version_panel--versionControls--siAOf"},f.createElement(iy.JU,{className:"prototype_state_management_version_panel--label--vvYMX"},p,g),f.createElement("div",{className:"prototype_state_management_version_panel--buttonContainer--rJZ-y"},d)),E=f.createElement("div",{className:"prototype_state_management_version_panel--containerUI3--V5tpG"},f.createElement(oE.J,null,p),g,m),v=f.createElement("div",{className:"prototype_state_management_version_panel--containerUI3TwoCol--AAp8u"},f.createElement("span",{className:"prototype_state_management_version_panel--labelWrapperUI3--37g5A"},f.createElement(oE.J,null,p)),f.createElement("span",{className:"prototype_state_management_version_panel--helpLinkWrapperUI3--BttuC"},g),m);return f.createElement($1.p,{name:"prototype_state_management_version_panel"},f.createElement(iy.Zk,{className:i?"prototype_state_management_version_panel--panelUI3--8-Db5":void 0},i?o?E:v:h))}let eeG="created_noodle";function eeV(e){let{shouldHideTitle:t=!1,category:n,newActionIndexPath:a}=e,l=(0,QT.YT)()===QT.Oz.TWO_COL,{detailProps:r,detailPropsMultipleActions:i,interactionsOnSelectedNodesAndComponents:o,updateSelectionProperties:s,selectedInteractions:c}=(0,Qv.Ay)(e.category);(0,np.h)(()=>{if(void 0!==b7.sn.get(eeG)){let e=b7.sn.stop(eeG);(0,Z.sx)(eeG,{elapsedMs:e,numConnectors:c.length},{forwardToDatadog:!0})}});let{showPanel:d,transition:u}=(0,QT.n6)(r,i,c),{interactionType:m="NONE",interactionMaintained:p=!1,interactionDuration:_=.3,keyTrigger:g=eeA,transitionTimeout:h=.8,mediaHitTime:E=0}=i.interactionEvent,v=(0,QT.iC)(c),y=f.createElement(eeU,{interactionType:m,timeout:h,mediaHitTime:E,maintained:p,interactionDuration:_,keyTrigger:g,recordingKey:n_.Pt(e,QT.Qe),shouldHideTitle:t,interactionsOnSelectedNodes:o,category:n,stateManagementVersion:v,autoOpenVariablePicker:e.autoOpenVariablePicker,newActionIndexPath:a,resetNewActionIndexPath:e.resetNewActionIndexPath,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,selectedActionIndex:e.selectedActionIndex,expandedRows:e.expandedRows,setExpandedRows:e.setExpandedRows,deleteButtonPressed:e.deleteButtonPressed,autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder});return f.createElement("div",null,y,!l&&d&&f.createElement(eeH,{transition:u,recordingKey:n_.Pt(e,"stateManagementVersionPanel"),updateSelectionProperties:s,stateManagementVersion:v,selectedInteractions:c}))}var eeK=n(360803),eeW=n(102165);function eez(e,t,n){var a;let[l,r,i]=e.path,o=t[l].conditionalActions;if((0,xM.hS)(o)){let e=(null==(a=null==o?void 0:o[r].actions)?void 0:a.length)??0;if(i>=e){if(0===e){n([l],!0);return}n([l,r,i-1],!0);return}}}function eej(e,t,n){let a=e.path[0]>=t.length,l=0===e.path.length;if(a){n([t.length-1],!0);return}if(l){n([0],!0);return}}var eeJ=n(277687);let eeY=()=>{ei.glU.setSelectedInteractions([]),et.Y5.deselectProperty()},eeX=f.memo(function(){let e=(0,_.d4)(ee$),t=(0,Qv.HS)(),{selectedInteractions:n}=(0,Qv.Ay)(t),a=n.length>0,[l,r]=f.useState(!1),i=n_.v_(QT.dJ,"keydown",t=>"Shift"!==t.key?n_.aH:(r(!0),e&&a)?void 0:n_.aH),o=n_.v_(QT.dJ,"keyup",t=>"Shift"!==t.key?n_.aH:(r(!1),e&&a)?void 0:n_.aH);if(f.useEffect(()=>(document.addEventListener("keydown",i),document.addEventListener("keyup",o),()=>{document.removeEventListener("keydown",i),document.removeEventListener("keyup",o)}),[i,o]),!e||!a)return null;let s=n.some(e=>{var t;return null==(t=e.actions)?void 0:t.some(e=>"CONDITIONAL"===e.connectionType)});return f.createElement(eeq,{category:t,containsConditional:s,pressingShiftKey:l,initialX:e.initialX,initialY:e.initialY,shouldPin:e.shouldPin,setPressingShiftKey:r})}),eeq=f.memo(function({category:e,containsConditional:t,pressingShiftKey:n,initialX:a,initialY:l,shouldPin:r,setPressingShiftKey:i}){let o=(0,_.wA)(),[s,c]=f.useState(!1),[,d]=(0,S.fp)(eeW.x),u=(0,f.useRef)(null),[m,p]=f.useState(!1),g=r||s,h=(0,n6.GS)(),E=(0,QT.YT)(),v=E===QT.Oz.SINGLE_COL,b=E===QT.Oz.TWO_COL,[C,w]=f.useState(new $S.Op(h?[0]:[])),{selectedInteractions:T,differentLengthActions:x,interactionsOnSelectedNodesAndComponents:N,mergedActions:k,detailProps:I,detailPropsMultipleActions:A,updateSelectionProperties:O}=(0,Qv.Ay)(e);var L=C.path.length>0?C:new $S.Op([0]);let P=L.isConditional(),D=(e,t)=>L=new $S.Op(e);h&&L.path[0]>=k.length&&!P?eej(C,k,D):h&&P&&eez(C,k,D);let R=f.useCallback((e,t)=>{t?w(new $S.Op(e)):w(new $S.Op([]))},[]);f.useEffect(()=>{if((0,FY.vA)(k.length>0,"the interactions panel should always have actions if rendered"),!h)return;let e=C.isConditional();if(e){if(e){eez(C,k,R);return}}else{eej(C,k,R);return}},[k,C,h,R]);let{shouldShowAdvancedPrototypingPaywall:M,showAdvancedPrototypinglMultipleActionsModal:F}=(0,QT.zt)();var B=[];b?k.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&B.push(new $S.Op([t]))}):k.length<4&&k.forEach((e,t)=>{B.push(new $S.Op([t]))});let[U,H]=f.useState(B),G=n&&!g&&!m,V=t?(0,lf.jz)(bW.prototypeInteractionModalExpandedWidth):(0,lf.jz)(bW.prototypeInteractionModalWidth),K=V/2,[W,z]=f.useState(r),j=(0,lb._X)({subscribeToUpdates_expensive:!r}),J=f.useCallback(()=>{s||(o((0,YP._P)({name:"prototype_interaction_details_modal_dragged"})),c(!0))},[o,s,c]),Y=f.useMemo(()=>{let e=new r4.Mi(a,l);if(r)return t?new r4.Mi(e.x-32,e.y):e;{let t=(0,lb.$g)(j,e);return new r4.Mi(t.x-V/2,t.y+V/8)}},[V,a,l,t,r,j]);f.useEffect(()=>{if(!n)return;let e=e=>{!e.shiftKey&&n&&i(!1)};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}},[n,i]),f.useEffect(()=>{d(G)},[d,G]),f.useEffect(()=>{z(r)},[r]),f.useEffect(()=>()=>{o((0,YP._P)({name:"prototype_interaction_details_modal_closed"}))},[o]);let X=f.useRef(null),[q,Z]=f.useState(!1);f.useEffect(()=>{var e;q&&(Z(!1),null==(e=X.current)||e.scrollToBottom())},[q,Z,X]);let[Q,$]=f.useState(new $S.Op([])),ee=(0,af.q5)(),en=f.useCallback((e,t)=>{let n=e.event.clipboardData||window.clipboardData;switch(t){case uP.zy.COPY:case uP.zy.CUT:{let a=JSON.parse(JSON.stringify(T)),l=(0,eeK.l)(a),r=AC.fG((null==ee?void 0:ee.key)||null,{prototypeInteractions:l});if(AC.C4(n,r,""),t===uP.zy.CUT){let e=[];for(let t of T){let{sourceNodeID:n,id:a}=t;n&&a&&e.push(Qf.d({nodeID:n,interactionID:a}))}o4.l7.user("delete-prototype-interactions",()=>ei.glU.deleteInteractions(e)),et.Y5.deselectProperty()}e.accept()}}},[null==ee?void 0:ee.key,T]),ea=f.useRef(!1),[el,er]=f.useState(!1),{firstVariableSetMode:eo,firstVariableSetID:es}=Q8(),ec=(0,eb.p8)("currentPage"),ed=f.useCallback((e,t,n,a)=>{o((0,YP._P)({name:"Prototype delete action",params:{action:e,source:"panel",connector_id:t,page_id:n,actionInConditionalAction:a}}))},[o]),eu=f.useCallback(e=>{if(N&&T){var t=!1,n=!1;if(M)F();else{for(let r=0;r<(null==T?void 0:T.length);r++){let i=T[r],o=[];if(i&&i.actions){var a=0,l=[];for(let r=0;r<i.actions.length;r++){let s=i.actions[r];if(r!==e)void 0!==U.find(e=>e.equals([r]))&&l.push(new $S.Op([a])),o.push(s),a++;else{let e=i.id?i.id:lg.Hr;ed(s.connectionType?s.connectionType:"NONE",(0,lg.dI)(e),ec),r===i.actions.length-1&&(t=!0),2===i.actions.length&&(n=!0)}H(l)}T[r].actions=o}}let r=N.map(e=>T.find(t=>t.id===e.id)??e);et.Y5.updateSelectionProperties({prototypeInteractions:r}),n&&h&&H([new $S.Op([0])]),t&&b&&w(new $S.Op([e-1]))}}},[N,T,M,F,U,ec,ed,b,h]),em=f.useCallback(e=>{var t;if(!N||!T)return;let n=e.isConditional();if(M)F();else if(n){var a=!1,l=!1;let[t,n,d]=e.path;for(var r=[],i=0;i<T.length;i++){let e=T[i],u=e.actions;if(u){for(var o=[],s=0;s<u.length;s++)if(s!==t||"CONDITIONAL"!==u[s].connectionType)o.push(u[s]);else{var c=u[s].conditionalActions;if(!c)continue;let t=c.map((t,r)=>{if(r!==n)return t;{let n=t.actions;if(!n)return t;let r=n[d];if(r){let t=e.id?e.id:lg.Hr;ed(r.connectionType?r.connectionType:"NONE",(0,lg.dI)(t),ec,!0)}let i=n.filter((e,t)=>t!==d);return a=n&&d===n.length-1,l=0===i.length,{...t,actions:i}}});u[s].conditionalActions=t,o.push(u[s])}e.actions=o,r.push(e)}}et.Y5.updateSelectionProperties({prototypeInteractions:r}),l?w(new $S.Op([e.path[0]])):!l&&a&&w(new $S.Op([e.path[0],n,d-1]))}else eu(e.path[0]);null==(t=document.activeElement)||t.blur()},[N,T,M,F,eu,ec,ed]),ep=nb()({[eeP]:!0,"prototype_interaction_edit_modal--ui3TwoColScrollContainer--IWuQ4":b}),ef=f.createElement(i6.P,{className:ep,useBottomPinning:!b,ref:X,allowScrollAndZoomOver:!0,"data-not-draggable":!0},(0,y.kc)().prototype_ai_auto_adv_proto&&f.createElement(QC,null),f.createElement(eeV,{shouldHideTitle:!0,recordingKey:b?n_.Pt("leftCol",QT.dJ):QT.dJ,category:e,autoOpenVariablePicker:ea,newActionIndexPath:Q,resetNewActionIndexPath:()=>{$(new $S.Op([]))},onNewActionAdded:e=>{$(e)},selectedActionIndex:C,onSelect:R,expandedRows:U,setExpandedRows:H,deleteButtonPressed:eu,autoOpenExpressionBuilder:el,setAutoOpenExpressionBuilder:er})),e_=1===T.length,eg=T[0],eh=eg.actions&&eg.actions.length<2,eE=eg.actions&&1===eg.actions.length&&eg.actions[0],ev=!eE||"NONE"===eE.connectionType,ey=e_&&eh&&ev;var eC=lg.Hr;let ew=f.createElement($k,{skipPaywall:ey,addButtonPressed:e=>{if(!T)return;if(("CONDITIONAL"===e.connectionType||"SET_VARIABLE"===e.connectionType||"SET_VARIABLE_MODE"===e.connectionType)&&M){F();return}"SET_VARIABLE_MODE"===e.connectionType&&(e.targetVariableSetID=es,e.targetVariableModeID=eo),"SET_VARIABLE"===e.connectionType&&ea&&(ea.current=!0),h&&"CONDITIONAL"===e.connectionType&&er(!0);let t=!1;var n,a,l,r,i,s,c,d,u,m=null,p=h&&!x&&!ey&&T[0].actions&&1===T[0].actions.length;if(x||ey)for(var f=0;f<T.length;f++){let t=T[f];t.actions=[e];let n=t.id,a=t.sourceNodeID;(0,QT.uU)(t.stateManagementVersion)&&n&&a&&$5.zZ.recordInteractionUpgraded(n,a),t.stateManagementVersion=1}else for(var f=0;f<T.length;f++){let o=T[f];if(o.actions){if((0,QT.uU)(o.stateManagementVersion)&&(o.id&&o.sourceNodeID&&$5.zZ.recordInteractionUpgraded(o.id,o.sourceNodeID),null==(n=o.actions)||n.forEach(e=>{e.transitionResetScrollPosition=!e.transitionPreserveScroll})),b){if(C.isConditional()){let n=C.path[0],c=C.path[1],d=C.path[2],u=null==(a=o.actions)?void 0:a[n],m=(null==(r=null==(l=u.conditionalActions)?void 0:l[c].actions)?void 0:r.length)??0;n===o.actions.length-1&&d===m-1&&(t=!0),null==(s=null==(i=u.conditionalActions)?void 0:i[c].actions)||s.splice(d+1,0,e)}else{let n=C.path[0]+1;n===o.actions.length&&(t=!0),null==(c=o.actions)||c.splice(n,0,e)}}else null==(d=o.actions)||d.push(e);eC=o.id?o.id:lg.Hr}else o.actions=[e],eC=o.id?o.id:lg.Hr;if(o.stateManagementVersion=1,b){let e=[...C.path];e[e.length-1]+=1,m=new $S.Op([...e])}else m=new $S.Op([o.actions.length-1])}let _=N.map(e=>T.find(t=>t.id===e.id)??e);if(et.Y5.updateSelectionProperties({prototypeInteractions:_}),p||b){var g=[];null==(u=_[0].actions)||u.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&g.push(new $S.Op([t]))}),H(g)}Z&&(!b||t)&&Z(!0),$&&$(m),o((0,YP._P)({name:"Prototype add action",params:{action:e.connectionType?e.connectionType:"NONE",source:"panel",connector_id:(0,lg.dI)(eC),page_id:ec}}))},renderButton:!0,recordingKey:QT.dJ,isNestedInConditional:b&&C.isConditional()}),eT=T.some(e=>{var t;return void 0!==e.actions&&(null==(t=e.actions)?void 0:t.length)>1}),ex=!C.isConditional()&&!eT,eS=f.createElement(vJ.K,{onClick:()=>em(C),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("proto.prototype_panel.delete"),"aria-label":(0,eN.t)("proto.prototype_panel.delete"),disabled:ex,recordingKey:n_.Pt(QT.dJ,"actionDeleteButton")},f.createElement(ry.U,{svg:eef.A},f.createElement(Qm.O,null))),ek=f.createElement("div",{className:"prototype_interaction_edit_modal--ui3FooterContainer--oYsXM"},ew," ",eS),eI=f.createElement(QK.c.Provider,{value:QK.P.LEFT},f.createElement("div",{className:"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeft--UYWSG"},f.createElement(eeL,{category:e,recordingKey:QT.dJ,headerButtons:f.createElement(f.Fragment,null)}),f.createElement("div",{className:eeF}),ef,f.createElement("div",{className:eeF}),f.createElement(f.Fragment,null,ek))),eA=k.length>0?f.createElement(QK.c.Provider,{value:QK.P.RIGHT},f.createElement(i6.P,{allowScrollAndZoomOver:!0,"data-not-draggable":!0},f.createElement(eeZ,{selectedActionIndex:L,handleExpandUI3:(e,t)=>{!t&&k.length>1?H(U.filter(t=>!t.equals(e))):U.find(t=>t.equals(e))||H([...U,new $S.Op(e)])},autoOpenVariablePicker:ea,autoOpenExpressionBuilder:el,setAutoOpenExpressionBuilder:er}))):null,{showPanel:eO,transition:eL}=(0,QT.n6)(I,A,T),eP=(0,QT.iC)(T),eD=b?f.createElement(f.Fragment,null,f.createElement("div",{className:"prototype_interaction_edit_modal--ui3TwoColInnerContainer--ZvJj2"},eI,f.createElement("div",{className:"prototype_interaction_edit_modal--dividerVertical--Noi1C"}),eA),eO&&f.createElement(eeH,{transition:eL,recordingKey:n_.Pt(QT.dJ,"stateManagementVersionPanel"),updateSelectionProperties:O,stateManagementVersion:eP,selectedInteractions:T})):ef;return f.createElement(Qw.ht.Provider,{value:f.useMemo(()=>({autoCloseOnScroll:!g}),[g])},f.createElement(Bo.vL,{name:"Prototype Draggable modal",className:"prototype_interaction_edit_modal--prototypeDraggableModal--njJ6A",handleClipboard:en},f.createElement(ae.vx,{ref:u,dataTestId:"in-context-prototype-interaction-edit-modal",title:t=>f.createElement("div",{className:"prototype_interaction_edit_modal--onboardingRow--UlvE0"},f.createElement(eeQ,{category:e,recordingKey:QT.dJ,createActionTrigger:ew,closeButton:t})),containerClassName:nb()({[eeP]:!0,[eeD]:b,[eeR]:b&&eO,[eeM]:v,"prototype_interaction_edit_modal--abovePropertiesPanel--hFejC":W,"prototype_interaction_edit_modal--belowPropertiesPanel--f1Jfl":!W,"prototype_interaction_edit_modal--modalExpandedWidth--IDl6k":t&&!h,"prototype_interaction_edit_modal--modalWidth--cCH7B":!t&&!h,"prototype_interaction_edit_modal--hideModal--RSp-R":G}),contentContainerClassName:nb()({[eeP]:!0,[eeD]:b,[eeR]:b&&eO,[eeM]:v}),headerClassName:"prototype_interaction_edit_modal--multilineInteractionDetailsHeader--OE8Wr",allowWheelPassthrough:!0,initialPosition:Y,headerSize:"small",onClose:eeY,recordingKey:"interactionDetailsModal",arrowPosition:r?void 0:ae.F_.TOP,arrowRelativeX:r?void 0:K,onDragStart:()=>{z(!0),J()},canRenderBelowViewport:!0,allowAutoExpanding:!0,dragHeaderOnly:!0,onFocus:()=>p(!0)},h?eD:ef)))});function eeZ({selectedActionIndex:e,autoOpenVariablePicker:t,handleExpandUI3:n,autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:l}){var r;let i=(0,Qv.HS)(),{selectedInteractions:o,mergedActions:s,makeUpdateSelectionPropertiesForActionIndex:c,makeUpdateMultipleDestinationNodesForActionIndex:d,detailPropsMultipleActions:u}=(0,Qv.Ay)(i),m=e.path[0],p=d(m),_=c(m),g=(0,QT.iC)(o),h=u.interactionEvent.interactionType??"NONE";if(e.isConditional()){let n=e.path[1],i=e.path[2],c=s[m],d=null==(r=((0,xM.hS)(c.conditionalActions)&&c.conditionalActions?c.conditionalActions:[])[n].actions)?void 0:r[i];return d?f.createElement("div",{className:eeB},f.createElement(eeg,{key:i,updateMultipleDestinationNodes:p.appendActionIndex(n).appendActionIndex(i),action:d,recordingKey:n_.Pt(QT.dJ,QT.Qe,QT.eG,m),updateSelectionProperties:_.appendActionIndex(n).appendActionIndex(i),onDeleteAction:nf.lQ,interactionType:h,actionIndexPath:e.path,numActions:s.length,isNestedInConditional:!0,stateManagementVersion:g,selectedInteractions:o,onDrop:nf.lQ,onSelect:nf.lQ,onExpand:nf.lQ,selectedActionIndex:e,expandedRows:[e],autoOpenVariablePicker:t,autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:l})):null}return f.createElement("div",{className:eeB},f.createElement(eeg,{key:m,updateMultipleDestinationNodes:p,action:s[m],recordingKey:n_.Pt(QT.dJ,QT.Qe,QT.eG,m),updateSelectionProperties:_,onDeleteAction:nf.lQ,interactionType:h,actionIndexPath:[m],numActions:s.length,isNestedInConditional:!1,stateManagementVersion:g,selectedInteractions:o,onDrop:nf.lQ,onSelect:nf.lQ,onExpand:n,selectedActionIndex:e,autoOpenVariablePicker:t,expandedRows:[e],autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:l}))}function eeQ({category:e,recordingKey:t,closeButton:n,createActionTrigger:a}){let l=(0,_.wA)(),{selectedInteractions:r}=(0,Qv.Ay)(e),i=(0,QT.YT)(),o=i===QT.Oz.TWO_COL,s=i===QT.Oz.SINGLE_COL,c=(()=>{if(1!==r.length)return 0;let e=r[0],t={nodeID:e.sourceNodeID,interactionID:e.id};return ei.X3B.getMatchingInteractions(Qf.d(t)).length})(),d=(0,y.kc)().prototype_hide_matching_noodles&&1===r.length&&c>1&&f.createElement(vJ.K,{as:"button",actionOnPointerDown:!0,tabIndex:-1,onClick:()=>{if(1!==r.length)return;let e=r[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=ei.X3B.getMatchingInteractions(Qf.d(t));ei.glU.selectInteractionsAndSourceNodes(n);let a=(0,eN.t)("proto.interaction_details.visual_bell.selected_n_matching_interactions",{total_num_interactions:n.length});et.Y5.showVisualBellWithUndo("selected-matching-noodles",a,!1),l((0,YP._P)({name:"prototype_select_matching_interactions",params:{num_connectors:n.length}}))},onMouseEnter:()=>{if(1!==r.length)return;let e=r[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=ei.X3B.getMatchingInteractions(Qf.d(t));ei.glU.hoverInteractions(n)},onMouseLeave:()=>ei.glU.hoverInteractions([]),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:c}),"aria-label":(0,eN.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:c})},f.createElement(ry.U,{svg:eeJ.A},f.createElement(Qp.A,null))),u=f.createElement(eeL,{category:e,recordingKey:t,headerButtons:f.createElement(f.Fragment,null,d,a,n)}),m=f.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeader--Ka7aM"},(0,eN.tx)("proto.interaction_details.header"),f.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeaderButtons--UqykU"},d,n)),p=f.createElement(f.Fragment,null,(0,eN.tx)("proto.interaction_details.header"),f.createElement("div",{className:"prototype_interaction_edit_modal--ui3CollapsedModalHeaderButtons--7yPuD"},d,a,n));return o?m:s?p:u}let ee$=e=>{var t;return(null==(t=e.pickerShown)?void 0:t.id)===nz.o$?e.pickerShown:null};var ee0=n(198868),ee1=n(294868);class ee2{static getCanvasColorSpace(e={}){var t;let n=(0,W_.dX)("fullscreen"),a=null==(t=null==n?void 0:n.getContext((0,Wf.ap)()?"webgl2":"webgl"))?void 0:t.drawingBufferColorSpace;if("srgb"===a);else if("display-p3"===a)return e.returnString?ei.RYP[ei.RYP.DISPLAY_P3]:ei.RYP.DISPLAY_P3;return e.returnString?ei.RYP[ei.RYP.SRGB]:ei.RYP.SRGB}static setCanvasColorSpace(e){let t=(0,W_.dX)("fullscreen"),n=null==t?void 0:t.getContext((0,Wf.ap)()?"webgl2":"webgl");"drawingBufferColorSpace"in n&&(n.drawingBufferColorSpace=e)}static getDocumentColorProfile(e={}){if(void 0===ei.H4l)throw Error("ColorManagementStateJs is not defined");return e.returnString?ei.ywP[ei.H4l.documentColorProfile().getCopy()]:ei.H4l.documentColorProfile().getCopy()}static async debugImagesFromSelection(){async function e(e){for(let t of["image/png","image/jpeg","image/heic"])try{return await ee1.EC.decodeAsync(e,t,0,0,!0)}catch(e){}return null}let t=(0,ee0.D)();for(let n of t.currentPage.selection){for(let a=0;a<n.fills.length;a++){let l=n.fills[a];if("IMAGE"===l.type){let r=t.getImageByHash(l.imageHash);if(!r)continue;let i=await r.getBytesAsync(),o=await e(i);if(o){let e={id:n.id,type:"fill",index:a,imageHash:l.imageHash,colorProfile:ei.RYP[o.colorProfile],bytes:i};(0,o2.ED)("ColorManagementDebug","images",e,{logToConsole:ei.NUh.ALWAYS})}}}for(let a=0;a<n.strokes.length;a++){let l=n.strokes[a];if("IMAGE"===l.type){let r=t.getImageByHash(l.imageHash);if(!r)continue;let i=await r.getBytesAsync(),o=await e(i);if(o){let e={id:n.id,type:"stroke",index:a,imageHash:l.imageHash,colorProfile:ei.RYP[o.colorProfile],bytes:i};(0,o2.ED)("ColorManagementDebug","images",e,{logToConsole:ei.NUh.ALWAYS})}}}}}}function ee5(){return f.useEffect(()=>((0,y.kc)().ee_color_management_debug&&(window.colorManagementDebug=ee2),()=>{"colorManagementDebug"in window&&delete window.colorManagementDebug}),[]),null}var ee4=n(54025),ee3=n(706966),ee6=n(818614),ee7=n(971076);function ee8(){let{Sprig:e}=(0,aP.A)(),t=(0,S.md)(aj.Lk),n=(0,ee3.I)(),{loaded:a,query:l,sessionId:r}=function(){let[e,t]=(0,f.useState)(!1),{currentSearch:n}=(0,S.md)(ee4.WP),a=(0,S.md)(ee7.hO.currentSearchAtom),l=(0,S.md)(aj.dd);(0,f.useEffect)(()=>{let e=(null==n?void 0:n.result.status)==="loaded",l=(null==a?void 0:a.result.status)==="loaded";e&&l&&t(!0)},[null==n?void 0:n.result.status,null==a?void 0:a.result.status]);let r="";return(null==n?void 0:n.input.type)==="input-text"&&(r=n.input.query),{loaded:e,query:r,sessionId:l}}(),i=(0,f.useRef)(null),o=(0,f.useRef)(!1),s=(0,f.useCallback)(()=>{i.current&&(clearTimeout(i.current),i.current=null)},[]),c=(0,f.useCallback)(()=>{e("track","quick_actions_assets_tab_search",{query:l,sessionId:r}),o.current=!0},[e,l,r]);return(0,f.useEffect)(()=>{if((0,y.kc)().assets_tab_sprig_tracking&&!o.current)return t===ee6.J.ASSETS&&a&&(n?i.current=setTimeout(()=>{c()},3e4):(c(),s())),s},[t,s,a,n,c]),null}var ee9=n(78584),ete=n(71825),ett=n(46415),etn=n(402603);let eta=0;class etl{constructor(){this.work=()=>{let e=this.jobs.shift();if(e)try{let t=e.callback();e.resolve(t)}catch(t){e.reject(t)}},this.jobs=[]}isDone(){return 0===this.numJobs()}numJobs(){return this.jobs.length}cancelJobs(e){this.jobs=this.jobs.filter(t=>-1===e.indexOf(t.jobId))}queueJob(e){let t,n;let a=new Promise((e,a)=>{t=e,n=a}),l=++eta;return this.jobs.push({jobId:l,resolve:t,reject:n,callback:e}),{promise:a,jobId:l}}}let etr={requestAnimationFrame:e=>requestAnimationFrame(e),computeElapsedTime:e=>{let t=Date.now();return e(),Date.now()-t}},eti=new class{constructor(e={}){this.tick=()=>{if(!this.isTickScheduled)throw Error("wat, how did tick() get called if we're not ticking?");let e=0,t=0;for(;t<this.msPerTick&&!this.queuedWorker.isDone();)t+=this.utils.computeElapsedTime(this.queuedWorker.work),e++;this.debug&&console.log(`did ${e} jobs in ${t} ms`),this.isTickScheduled=!1,this.queuedWorker.isDone()||this.requestTick()},this.requestTick=()=>{this.isTickScheduled||(this.isTickScheduled=!0,this.utils.requestAnimationFrame(this.tick))},this.numJobs=()=>this.queuedWorker.numJobs(),this.queueJob=e=>{let{promise:t,jobId:n}=this.queuedWorker.queueJob(e);return this.requestTick(),{promise:t,jobId:n}},this.queuedWorker=new etl,this.isTickScheduled=!1,this.msPerTick=e.msPerTick||6,this.utils=e.utils||etr,this.debug=!0===e.debug}cancelJobs(e){this.queuedWorker.cancelJobs(e)}}({debug:!1});var eto=n(162620),ets=n(968783),etc=n(471224);let etd="export_picker--header--Wz6np",etu="export_picker--labelWithoutCheckbox--3zcNc export_picker--label--43URE",etm="export_picker--button--PiGDo";var etp=n(957412);let etf=(0,lf.hG)(lw.zK5);function et_(){let e=(0,af.q5)(),t=(0,_.d4)(e=>e.exportableItems),n=(0,_.d4)(e=>e.dropdownShown),a=!!e&&(0,TT.Pe)(e),l=(0,Ij.Av)(),r=(0,_.d4)(e=>e.saveAsState),i=(0,_.d4)(e=>e.mirror.appModel.currentPage),o=(0,_.wA)(),s=new r4.Mi(window.innerWidth-etf,l+12);return f.useEffect(()=>{o((0,ets.HR)())},[o]),f.createElement(ae.vx,{title:(0,eN.t)("fullscreen.properties_panel.export"),headerSize:"small",initialPosition:s,onClose:()=>{o(K.XE())},dragHeaderOnly:!0,headerClassName:"export_picker--modalHeader--f3fKx"},f.createElement("div",{className:"export_picker--exportModalContainer---vmI7"},f.createElement(etE,{exports:t,isCopyExportRestricted:a,width:etf,dispatch:o,dropdownShown:n,saveAsState:r,currentPage:i})))}let etg=new Bj.mz;function eth({nodeID:e,title:t,filename:n,exportSetting:a,colorProfile:l=ei.RYP.SRGB,...r}){let[i,o]=(0,f.useState)({size:"",warning:"",warningTooltip:""}),[s,c]=(0,f.useState)("");(0,f.useEffect)(()=>{let r={guid:e,title:t,filename:n,exportSetting:a},i=ei.glU.getExportWarningAndSize(r);if(i){let{size:e,warning:t,warningTooltip:n}=i;o({size:e,warning:t,warningTooltip:n})}else console.error("Failed to export",r);let s=!!a.contentsOnly,d=(0,xM.gl)(a)?l:(0,eto.A)([a],l),{jobId:u}=eti.queueJob(()=>{let t=Sc._G(new r4.Mi(32,32),e,s),n="";t&&t.pixels&&t.pixelSize&&t.displaySize&&(n=Sc.Pv(t.pixels,t.pixelSize,d)),c(n)});return()=>eti.cancelJobs([u])},[l,a,n,e,t]);let{onToggleChecked:d,isChecked:u,isDisabled:m}=r,{imageType:p}=a,_=r.warning??i.warning,g=r.warningTooltip??i.warningTooltip,h=(0,f.useId)(),E=`${h}-input`,v=`${h}-desc`;return f.createElement("div",{className:"export_picker--row--lVRtp"},f.createElement("label",{htmlFor:E,className:"export_picker--label--43URE"},f.createElement(ete.W,{id:E,checked:u,onChange:d,disabled:m,"aria-describedby":v}),f.createElement("div",{className:"export_picker--thumbContainer--xwXyl",onClick:t=>{t.preventDefault(),ei.glU.panToNode(e)},"aria-hidden":"true"},!!s&&f.createElement("img",{src:s,className:"export_picker--thumb--pKbcx","data-tooltip-type":nx.Ib.TEXT,"data-tooltip":n,alt:""})),f.createElement("div",{className:"export_picker--nameInfo--03piR export_picker--twoRows--PAHTA"},f.createElement("div",{className:"export_picker--name--HuhHU ellipsis--ellipsis--Tjyfa"},t),_&&f.createElement("div",{className:"export_picker--warningRow--PMwtO"},f.createElement(a2.B,{className:"export_picker--warningIcon--fgSRz",svg:etp.A,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":g}),f.createElement("span",{className:"export_picker--warning--qpraF ellipsis--ellipsis--Tjyfa"},_)))),f.createElement("div",{className:"export_picker--settingsInfo--H9DJ1 export_picker--twoRows--PAHTA",id:v},f.createElement("div",null,etg.format(a.constraint)," ",p),f.createElement("div",null,i.size)))}class etE extends f.PureComponent{constructor(){super(...arguments),this.state={downloadStarted:!1,exportingStarted:!1,exportingProgress:0,exportingTotal:0,exportingJobIds:[]},this.onCancel=()=>{this.props.dispatch(K.XE())},this.onExport=()=>{if(this.props.isCopyExportRestricted||((0,Z.sx)("Export Picker Exported"),this.state.downloadStarted||this.state.exportingStarted||this.isExporting()))return;let e=this.props.exports.items.filter(e=>this.props.exports.checked[e.itemID]);if(0===e.length)return;let t=[this.props.currentPage];ri.xY.includeOutsideContents(e.map(e=>e.exportSetting))||(t=e.map(e=>e.nodeID)),this.setState({downloadStarted:!0}),(0,etc.Dc)(etc.hV.Export,this.props.saveAsState,this.props.dispatch,()=>{this.setState({exportingStarted:!0,downloadStarted:!1}),this.exportItemsWithFullscreen(e)},t,"export-picker")},this.exportItemsWithFullscreen=e=>{let t=e.map(e=>({guid:e.nodeID,title:e.title,filename:e.filename,exportSetting:e.exportSetting})),n=0;ei.glU.clearExportedItems();let a=t.map(e=>eti.queueJob(()=>ei.glU.exportItem(e))),l=a.map(e=>e.promise);l.forEach(e=>e.then(()=>this.setState({exportingProgress:++n}))),this.setState({exportingProgress:0,exportingTotal:t.length,exportingJobIds:a.map(e=>e.jobId)}),Promise.all(l).then(()=>{this.setState({exportingJobIds:[]}),ei.glU.saveExportedItems(),this.props.dispatch(K.XE()),this.props.dispatch(ett.rg())})},this.setAllChecked=e=>{this.props.exports.items.forEach((t,n)=>{this.props.dispatch(etn.G({itemID:t.itemID,checked:e}))})},this.setChecked=(e,t)=>{this.props.dispatch(etn.G({itemID:e.itemID,checked:t}))},this.isChecked=e=>this.props.exports.checked[e.itemID]}isExporting(){return this.state.exportingJobIds&&this.state.exportingJobIds.length>0}componentWillUnmount(){this.isExporting()&&eti.cancelJobs(this.state.exportingJobIds)}renderHeader(){if(this.isExporting())return f.createElement("div",{className:etd},f.createElement("label",{className:etu},(0,eN.tx)("fullscreen.export.preparing_exporting_progress_of_exporting_total",{exportingProgress:this.state.exportingProgress,exportingTotal:this.state.exportingTotal})),f.createElement(a1.nR,{className:etm,onClick:this.onCancel},(0,eN.tx)("fullscreen.export.cancel")));if(this.state.exportingStarted||!this.props.saveAsState.startTime&&this.state.downloadStarted)return f.createElement("div",{className:etd},f.createElement("label",{className:etu},(0,eN.tx)("fullscreen.export.exporting")));if(this.state.downloadStarted){if(!(this.props.saveAsState.totalImagesToDownload>0))return f.createElement("div",{className:etd},f.createElement("label",{className:etu},(0,eN.tx)("fullscreen.export.downloading")));{let e=Math.min(this.props.saveAsState.totalImagesToDownload,this.props.saveAsState.totalImagesToDownload-this.props.saveAsState.remainingImagesToDownload);return f.createElement("div",{className:etd},f.createElement("label",{className:etu},(0,eN.tx)("fullscreen.export.downloading_progress",{downloadingProgress:e,downloadingTotal:this.props.saveAsState.totalImagesToDownload})),f.createElement(a1.nR,{className:etm,onClick:this.onCancel},(0,eN.tx)("fullscreen.export.cancel")))}}{let e=this.props.exports.items||[],t=e.filter(this.isChecked).length,n=e.length,a=n===t;return f.createElement("div",{className:etd},f.createElement($o.S,{checked:a,mixed:!a&&t>0,onChange:()=>this.setAllChecked(!a),label:f.createElement(oE.J,null,(0,eN.tx)("fullscreen.export.num_selected_of_total_selected",{numSelected:t,total:n}))}),f.createElement(a1.nR,{className:nb()(etm,"export_picker--flexRight--PFS7g"),disabled:!t,onClick:this.onExport,autoFocus:!0},(0,eN.tx)("fullscreen.export.export")))}}render(){let e=this.props.exports.items&&this.props.exports.items.length>0;return f.createElement("div",null,f.createElement("div",{className:"export_picker--modal--FoIpV"},this.renderHeader(),f.createElement(i6.P,{width:this.props.width,className:"export_picker--scrollContainer--F9sI6"},!e&&f.createElement("div",{className:"export_picker--emptyModal--x2aqt"},(0,eN.tx)("fullscreen.export.no_selected_layers_with_export")),f.createElement(er.ZH,null,({documentExportColorProfile:t})=>e&&this.props.exports.items.map((e,n)=>f.createElement(eth,{key:n,colorProfile:t,isDisabled:this.isExporting(),isChecked:this.isChecked(e),onToggleChecked:()=>this.setChecked(e,!this.isChecked(e)),...e}))))))}}etE.displayName="ExportPicker";var etv=n(586651),ety=n(483990),etb=n(623738),etC=n(154979),etw=n(169006),etT=n(324597),etx=n(586281),etN=n(480952),etS=n(501256),etk=n(542479),etI=n(631378);function etA(e){return f.createElement("div",null,(0,etT.Dz)(e.token.content))}function etO(e){let t=(0,_.d4)(e=>e.mirror.appModel.keyboardShortcuts);return f.createElement("div",{style:dA.sx.colorText.px14.$,className:e.isSelected?"action_autocomplete_input--rowSelected--62Uvp autocomplete_permissions--contactRowSelected--xYJKX autocomplete_permissions--contactRow--DRMiv":"action_autocomplete_input--row--HRsbZ autocomplete_permissions--contactRow--DRMiv"},f.createElement(fy.Y,null,f.createElement(sc.E,null,(0,etw.f)(e.searchResult)),f.createElement(fy.M,null),f.createElement(sc.E,null,e.searchResult.shortcutText??(0,tl.c1)(t,(0,etT.Dz)(e.searchResult)))))}function etL({onAutocompleteChange:e}){let t=(0,etN.uj)(),n=(0,etN.c4)(),a=(0,_.d4)(e=>e.mirror.appModel),l=(0,_.d4)(e=>e.selectedView),r=(0,_.d4)(e=>{var t;return null==(t=e.user)?void 0:t.locale}),i=(0,etx.M)({isReadOnly:a.isReadOnly,extensionMenuProps:n,includeDisabled:!0}),o=new etI.x(a,l,[...t,...i],{includeDisabled:!0,acceptsUnicode:"ja"===r}),[s,c]=f.useState((0,etS.Rs)());return f.createElement(etk.P,{autoFocus:!0,autocompleteResultsClassName:a8.cx.maxW300.$,autocomplete:s,placeholder:(0,eN.t)("fullscreen_actions.search_menus_commands_and_plugins"),onChange:t=>{c(t),e(t)},validateToken:nf.lQ,searchResults:e=>o.searchIncludeKey(a,e.inputValue).filter(([e,t])=>!t.parametersRequired).map(([e,t])=>({id:`${(0,etT.Dz)(t)}-${t.pluginId}-${(0,etw.f)(t)}`,searchKey:e,...t})),SearchResultComponent:etO,TokenComponent:etA})}var etP=n(613122);let etD="\u{1F310}";var etR=(e=>(e[e.NOT_PRESSED=0]="NOT_PRESSED",e[e.PRESSED=1]="PRESSED",e[e.PRESSED_FIRST_TIME=2]="PRESSED_FIRST_TIME",e[e.HELD=3]="HELD",e[e.COMPLETED_TAB_ANIMATION=4]="COMPLETED_TAB_ANIMATION",e))(etR||{}),etM=(e=>(e[e.FIGJAM=0]="FIGJAM",e[e.DESIGN=1]="DESIGN",e[e.DEV_MODE=2]="DEV_MODE",e[e.SLIDES=3]="SLIDES",e))(etM||{});function etF(e,t){return e in t?t[e].map(e=>e.text).filter(e=>-1===e.toLowerCase().indexOf("num")).map(etH.splitStringIntoKeys):null}function etB(e,t){let n=e.map(e=>{let n=etF(e,t);return null==n||0===n.length?null:n[0]}).filter(gq.Vq);if(0===n.length)return null;if(1===n.length)return rg.k.warn("combineShortcuts: Could not find bindings to combine. \nactions: %o",e),null;let a=n[0].slice(0,-1),l=n.map(e=>e.length-1===a.length&&e.slice(0,-1).filter((e,t)=>e===a[t]).length===a.length?e.slice(-1)[0]:null).filter(gq.Vq);return l.length!==e.length?(rg.k.warn("combineShortcuts: Bindings length mismatch. \nactions: %o, shortcuts %s and %s",e,n[0].join(""),n[1].join("")),null):[[...a,l]]}let etU=class e extends f.PureComponent{constructor(){super(...arguments),this.state={pressed:0,animationDelays:this.calculateAnimationDelays(this.props)},this.prettifyKeyLabel=e=>e.replace(/\u23B5/,(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.space")).replace(/\u21E5/,`\u21E5 ${(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.tab")}`).replace(/\u21DE/,`\u21DE ${(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.pg_up")}`).replace(/\u21DF/,`\u21DF ${(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.pg_dn")}`).replace(/\u2196/,`\u2196 ${(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.home")}`).replace(/\u2198/,`\u2198 ${(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.end")}`).replace(/\u238B/,`\u238B ${(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.esc")}`).replace(/\u21A9/,`\u21A9 ${(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.enter")}`),this.getTooltipText=e=>{switch(e){case"\u2318":return(0,eN.t)("whiteboard.keyboard_shortcuts.tooltip.command");case"\u21E7":return(0,eN.t)("whiteboard.keyboard_shortcuts.tooltip.shift");case"\u2325":return(0,eN.t)("whiteboard.keyboard_shortcuts.tooltip.option_alt");case"\u2303":return(0,eN.t)("whiteboard.keyboard_shortcuts.tooltip.control");case"\u232B":return(0,eN.t)("whiteboard.keyboard_shortcuts.tooltip.backspace");case"\u2190":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.left");case"\u2192":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.right");default:return null}},this.renderCharKeyBox=(e,t)=>{let n=this.prettifyKeyLabel(e),a=n.startsWith(etD),l=n.length>1&&!a?etP.SR:etP.FU,r=this.state.animationDelays[t]?{animationDelay:`${this.state.animationDelays[t]}ms`}:{};return f.createElement("span",{key:n+t,className:l,style:r,"data-tooltip-show-immediately":"true","data-tooltip-show-above":"true","data-tooltip-type":nx.Ib.TEXT,"data-tooltip":this.getTooltipText(e)},n)},this.renderKeyBindings=e=>{let t=[],n=0;return e.forEach(e=>{if("string"==typeof e)t.push(this.renderCharKeyBox(e,n)),n++;else{let a=this.renderCharKeyBox(e[0],n),l=this.renderCharKeyBox(e[1],n+1);t.push(a),t.push(f.createElement("div",{key:`${e[0]}-${e[1]}`,className:etP.Uo},(0,eN.tx)("whiteboard.keyboard_shortcuts.and"))),t.push(l),n+=2}}),f.createElement("span",{className:etP.pi},t)},this.triggerUnpressed=()=>{this.setState({pressed:0})},this.triggerPressed=()=>{4!=this.state.pressed&&2!=this.state.pressed&&(clearTimeout(this.pressedTimeout),this.pressedTimeout=setTimeout(()=>this.triggerUnpressed(),500),3!=this.state.pressed&&(1==this.state.pressed?this.setState({pressed:3}):this.setState({pressed:1})))},this.triggerPressedFirstTime=()=>{this.setState({pressed:2}),clearTimeout(this.pressedTimeout),setTimeout(()=>this.triggerUnpressed(),1200)},this.triggerCompletedTab=()=>{this.setState({pressed:4}),clearTimeout(this.pressedTimeout),setTimeout(()=>this.triggerUnpressed(),4e3)}}static shortcutUsedCount(e,t){if(null==t)return 0;switch(e){case"align-centers":return Math.min(t["align-horizontal-center"]||0,t["align-vertical-center"]||0);case"align-left-right":return Math.min(t["align-left"]||0,t["align-right"]||0);case"align-top-bottom":return Math.min(t["align-top"]||0,t["align-bottom"]||0);case"distribute-spacing":return Math.min(t["distribute-horizontal-spacing"]||0,t["distribute-vertical-spacing"]||0);case"text-font-size-adjust":return Math.min(t["text-font-size-increase"]||0,t["text-font-size-decrease"]||0);case"text-letter-spacing-adjust":return Math.min(t["text-letter-spacing-increase"]||0,t["text-letter-spacing-decrease"]||0);case"text-indent-and-dedent-list":return Math.min(t["text-indent-list"]||0,t["text-dedent-list"]||0);case"text-line-height-adjust":return Math.min(t["text-line-height-increase"]||0,t["text-line-height-decrease"]||0);case"bold-and-italic":return Math.min(t["toggle-bold"]||0,t["text-toggle-italic"]||0);case"text-bold-adjust":return Math.min(t["text-bold-increase"]||0,t["text-bold-decrease"]||0);case"bulleted-and-numbered-list":return Math.min(t["text-toggle-unordered-list"]||0,t["text-toggle-ordered-list"]||0);default:return t[e]||0}}calculateAnimationDelays(e){let t=[];for(var n=0;n<5;n++){let n=0;e.allTabsCompletedAnimation?n=-Math.floor(2e3*Math.random()):e.tabCompletedFirstTimeAnimation&&null!=e.tabCompletedAnimationKeyPosition&&(n=110*Math.abs(e.keyPosition-e.tabCompletedAnimationKeyPosition)+100),t.push(n)}return t}UNSAFE_componentWillReceiveProps(t){let n=e.shortcutUsedCount(this.props.shortcutKey,this.props.usedKeyboardShortcuts),a=e.shortcutUsedCount(t.shortcutKey,t.usedKeyboardShortcuts);if(this.props.allTabsCompletedAnimation!=t.allTabsCompletedAnimation||this.props.tabCompletedFirstTimeAnimation!=t.tabCompletedFirstTimeAnimation){let e=this.calculateAnimationDelays(t);this.setState({animationDelays:e})}t.tabCompletedFirstTimeAnimation&&!this.props.tabCompletedAnimation&&t.tabCompletedAnimation?this.triggerCompletedTab():n!=a&&this.props.shortcutKey==t.shortcutKey&&(1==a?this.triggerPressedFirstTime():this.triggerPressed())}render(){let t,n;try{t=this.props.customName?this.props.customName:this.props.displayName?(0,ety.A)(this.props.displayName):(0,ety.A)(this.props.shortcutKey)}catch(e){console.error(e),t=this.props.shortcutKey}let a=e.shortcutUsedCount(this.props.shortcutKey,this.props.usedKeyboardShortcuts)>0,l=e.keybindingsForShortcut(this.props.shortcutKey,this.props.useNumbersForOpacity,this.props.appModelKeyboardShortcuts),r=null;return l&&(r=this.renderKeyBindings(l[0])),n=this.props.allTabsCompletedAnimation?etP.Ve:4==this.state.pressed?etP.T7:2==this.state.pressed?etP.Q3:3==this.state.pressed?etP.u$:1==this.state.pressed?etP.b3:a?etP.k3:etP.J8,l&&f.createElement("tr",{className:n,key:this.props.shortcutKey},this.props.icon&&(this.props.editorType===eq.nT.Design||this.props.editorType===eq.nT.DevHandoff)&&f.createElement("td",{className:etP.mH},f.createElement(a2.B,{svg:this.props.icon,className:etP.cw})),f.createElement("td",{className:etP.QL},t,this.props.usage&&f.createElement("div",{className:etP.CI},this.props.usage)),f.createElement("td",{className:etP.qH},r))}};etU.displayName="Shortcut",etU.specialKeys=["Backspace","Delete","Down","End","Enter","Home","Left","Page Down","Page Up","Right","Tab","Up"],etU.getLocalizedSpecialKey=e=>{switch(e){case"Backspace":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.backspace");case"Delete":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.delete");case"Down":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.down");case"End":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.end");case"Enter":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.enter");case"Home":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.home");case"Left":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.left");case"Page Down":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.page_down");case"Page Up":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.page_up");case"Right":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.right");case"Tab":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.tab");case"Up":return(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.up")}},etU.splitStringIntoKeys=e=>{let t=[],n=(0,y.kc)().ce_mac_page_shortcuts&&dE.y.isApple();for(;e.length>0;)if(e.startsWith("Ctrl+"))t.push((0,eN.t)("whiteboard.keyboard_shortcuts.key_label.ctrl")),e=e.slice(5);else if(e.startsWith("Shift+"))t.push((0,eN.t)("whiteboard.keyboard_shortcuts.key_label.shift")),e=e.slice(6);else if(e.startsWith("Alt+"))t.push((0,eN.t)("whiteboard.keyboard_shortcuts.key_label.alt")),e=e.slice(4);else if(e.startsWith("Win+"))t.push((0,eN.t)("whiteboard.keyboard_shortcuts.key_label.win")),e=e.slice(4);else if(n&&e.startsWith("Page Up"))t.push(etD),t.push("\u2191"),e=e.slice(7);else if(n&&e.startsWith("Page Down"))t.push(etD),t.push("\u2193"),e=e.slice(9);else{let n=!1;for(let a=0;a<etU.specialKeys.length;a++){let l=etU.specialKeys[a];if(e.startsWith(l)){t.push(etU.getLocalizedSpecialKey(l)),e=e.slice(l.length),n=!0;break}}n||(t.push(e[0]),e=e.slice(1))}return t},etU.keybindingsForShortcut=(e,t,n)=>{if(!n)return null;let a=function(e,t){let n=dE.y.isApple(),a=n?"\u2325":C.Ay.chromeos?(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.search"):(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.alt"),l=n?"\u2318":(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.ctrl"),r=n?"\u21A9":(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.enter"),i=n?"\u238B":(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.esc"),o=n?"\u21E7":(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.shift"),s=(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.drag"),c=(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.click"),d=(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.dbl_click"),u=Object.entries({"align-left-right":etB(["align-left","align-right"],e),"align-top-bottom":etB(["align-top","align-bottom"],e),"align-centers":etB(["align-horizontal-center","align-vertical-center"],e),copy:[[l,"C"]],"center-resize-drag":[[a]],"crop-image":[[a,d]],cut:[[l,"X"]],"deep-select":[[l,c]],"deep-select-rectangle":[[l,s]],"deselect-all":[[i]],duplicate:[[a]],"ignore-constraints":[[l]],"measure-to-selection":[[a]],"move-while-resizing":[["\u23B5"]],pan:[["\u23B5",s]],paste:[[l,"V"]],"request-edit-mode":[[r]],"resize-proportionally":[[o]],"swap-instance":[[a]],"text-letter-spacing-adjust":etB(["text-letter-spacing-decrease","text-letter-spacing-increase"],e),"text-line-height-adjust":etB(["text-line-height-decrease","text-line-height-increase"],e),"text-font-size-adjust":etB(["text-font-size-decrease","text-font-size-increase"],e),"text-bold-adjust":etB(["text-bold-decrease","text-bold-increase"],e),"bold-and-italic":etB(["toggle-bold","text-toggle-italic"],e),"stamp-or-reaction-wheel":[["E"]],"set-tool-section":[["F"]],"bulleted-and-numbered-list":etB(["text-toggle-ordered-list","text-toggle-unordered-list"],e),"distribute-spacing":etB(["distribute-horizontal-spacing","distribute-vertical-spacing"],e),"text-indent-and-dedent-list":etB(["text-indent-list","text-dedent-list"],e),"straight-connector":[[o,s]],"edit-text":[[r]],"set-opacity-00":t?[["0","0"]]:[[o,"0","0"]],[ea.dz]:n?[["\u2318","\u2303","\u2192"]]:[[(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.ctrl"),"F6"]],[ea.Jt]:n?[["\u2318","\u2303","\u2190"]]:[[o,(0,eN.t)("whiteboard.keyboard_shortcuts.key_label.ctrl"),"F6"]],"quick-create-immutable-frame":etF("quick-create",e),"stamp-on-node":etF("quick-create",e),"outline-stroke-transition":etF("outline-stroke-with-migration-notice",e)||etF("outline-stroke",e),"toggle-outlines-transition":etF("toggle-outlines-with-migration-notice",e)||etF("toggle-outlines",e)}).reduce((e,[t,n])=>((0,gq.Vq)(n)&&(e[t]=n),e),{});return n?{...u,"bend-tool":[["\u2318"]]}:u}(n,t);return e in n?etF(e,n):e in a?a[e]:null};let etH=etU;function etG(){let[e,t]=f.useState({step:"NOT_CURRENTLY_ADDING"}),n=(0,Q.lg)(),a=(0,aN.J2)(ei.Ez5.editorState().useNumbersForOpacity),l=(0,_.d4)(e=>e.usedKeyboardShortcuts),r=(0,_.d4)(e=>e.mirror.appModel.keyboardShortcuts),i="ADDING_WAITING_FOR_KEY_REGISTRATION"===e.step&&e.menuItem,o=f.createRef(),s=f.useCallback(n=>{n.stopPropagation(),n.preventDefault();let a=function(e){let t=(0,ex.v7)(),n=[];if(e.metaKey&&n.push("Meta"),e.altKey&&n.push("Alt"),e.shiftKey&&n.push("Shift"),e.ctrlKey&&n.push("Control"),"MetaRight"===e.code||"MetaLeft"===e.code||"ShiftRight"===e.code||"ShiftLeft"===e.code||"ControlRight"===e.code||"ControlLeft"===e.code||"AltRight"===e.code||"AltLeft"===e.code);else if(t===ei.aTn.UNKNOWN){let t=ei.glU.stringKeyFromWebEventKeycode(e.keyCode);n.push(t)}else{let a=ei.glU.stringKeyFromWebEventCode(e.code,t);n.push(a)}return etC.Gm.getKeyboardShortcutFromText(n.join("+"),null)}(n),l=a&&"Escape"===a.key;if(a&&"ADDING_WAITING_FOR_KEY_REGISTRATION"===e.step&&i&&!l){let e,t;if("None"===a.key)return;i.action?(e=ei.XpX.FULLSCREEN,t=i.action):(e=ei.XpX.NON_FULLSCREEN,t=i.searchKey),(0,etb.L3)(e,t,(0,etC.t4)(a))}t({step:"NOT_CURRENTLY_ADDING"})},[i,e.step]);return f.useEffect(()=>{var t;"ADDING_WAITING_FOR_KEY_REGISTRATION"===e.step&&(null==(t=o.current)||t.focus())},[o,e.step]),f.createElement("div",{className:etP.PG},f.createElement("div",{className:etP.fi},f.createElement(fy.Y,{direction:"vertical",height:"fill-parent",padding:{vertical:10}},f.createElement(sc.E,{color:"menu",fontSize:14},(0,eN.tx)("keyboard_settings.custom_keyboard_shortcuts")),f.createElement(n5.$,{variant:"primary",icon:"plus-32",onClick:()=>t({step:"ADDING_WAITING_FOR_ACTION_INPUT"})},f.createElement(sc.E,null,(0,eN.tx)("keyboard_settings.custom_keyboard_shortcuts.add"))),f.createElement(fy.M,null),f.createElement(iU.Ex,{className:a8.cx.mt4.$,text:"Internal only - #feat-custom-keyboard-shortcuts",color:iU.zE.WARNING,onClick:()=>(0,r_.FJ)("https://figma.slack.com/archives/C055MQJ2E5P","_blank")}))),f.createElement("div",{className:etP.fi,style:dA.sx.pt32.overflowYScroll.add({maxHeight:"162px"}).$},Object.values((0,etb.Uc)()).map(({action:e,type:t})=>f.createElement(fy.Y,{key:`custom-shortcuts-${e}`,width:"fill-parent",height:"hug-contents"},f.createElement(etH,{customName:"FULLSCREEN"===t?void 0:e,shortcutKey:e,editorType:(0,eq.wN)(n),keyPosition:0,useNumbersForOpacity:a,usedKeyboardShortcuts:l,appModelKeyboardShortcuts:r}),f.createElement(iG.K0,{className:"keyboard_shortcut_panel_custom_tab--deleteButton--xf9nN",onClick:()=>(0,etb.C4)("FULLSCREEN"===t?ei.XpX.FULLSCREEN:ei.XpX.NON_FULLSCREEN,e),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("whiteboard.keyboard_shortcuts.delete.shortcut")},f.createElement(Qm.O,null)))),"ADDING_WAITING_FOR_ACTION_INPUT"===e.step&&f.createElement("div",{className:a8.cx.relative.mt4.$},f.createElement(etL,{onAutocompleteChange:e=>{let n=e.tokens[0];n&&t({step:"ADDING_WAITING_FOR_KEY_REGISTRATION",menuItem:n.content})}})),"ADDING_WAITING_FOR_KEY_REGISTRATION"===e.step&&f.createElement(fy.Y,{height:"hug-contents",verticalAlignItems:"center"},f.createElement(sc.E,{color:"menu"},(0,etw.f)(e.menuItem)),f.createElement(fy.M,null),f.createElement("div",{className:a8.cx.py4.$},f.createElement("div",{className:nb()(etP.k3,etP.pi)},f.createElement(n5.$,{ref:o,variant:"primary",onKeyDown:s},f.createElement(sc.E,null,(0,eN.tx)("keyboard_settings.custom_keyboard_shortcuts.press_key")))))),f.createElement("div",{style:dA.sx.h150.$})))}let etV="keyboard_rows--row--8eEsv",etK="ISO_ENTER",etW="SPACER";function etz({createKey:e}){return f.createElement("div",{className:etV},e("Backquote"),e("Digit1"),e("Digit2"),e("Digit3"),e("Digit4"),e("Digit5"),e("Digit6"),e("Digit7"),e("Digit8"),e("Digit9"),e("Digit0"),e("Minus"),e("Equal"),e("IntlYen"),e("Backspace",113))}function etj({createKey:e,isBackslashRow2:t}){let n=null==t?e("Backslash"):t?e("Backslash"):e(etK,90);return f.createElement("div",{className:etV},e("Tab",90),e("KeyQ"),e("KeyW"),e("KeyE"),e("KeyR"),e("KeyT"),e("KeyY"),e("KeyU"),e("KeyI"),e("KeyO"),e("KeyP"),e("BracketLeft"),e("BracketRight"),n)}function etJ({createKey:e,isBackslashRow2:t}){let n=null==t?e("Backslash"):t?null:e("Backslash"),a=null==t?e("Enter",60):t?e("Enter",60):e(etW,20);return f.createElement("div",{className:etV},e("CapsLock",120),e("KeyA"),e("KeyS"),e("KeyD"),e("KeyF"),e("KeyG"),e("KeyH"),e("KeyJ"),e("KeyK"),e("KeyL"),e("Semicolon"),e("Quote"),n,a)}function etY({createKey:e}){return f.createElement("div",{className:etV},e("ShiftLeft",134),e("IntlBackslash"),e("KeyZ"),e("KeyX"),e("KeyC"),e("KeyV"),e("KeyB"),e("KeyN"),e("KeyM"),e("Comma"),e("Period"),e("Slash"),e("IntlRo"),e("ShiftRight",94))}function etX({createKey:e}){return C.Ay.mac?f.createElement("div",{className:etV},e("Fn"),e("ControlLeft"),e("AltLeft"),e("MetaLeft"),e("Space",500),e("MetaRight"),e("AltRight")):f.createElement("div",{className:etV},e("Fn"),e("ControlLeft"),e("MetaLeft"),e("AltLeft"),e("Space",500),e("AltRight"),e("ControlRight"))}let etq="keyboard_shortcut_panel_layout_tab--row--MilbG",etZ="keyboard_shortcut_panel_layout_tab--column--SzOhn keyboard_shortcut_panel--column--lHvov",etQ="keyboard_shortcut_panel_layout_tab--wideColumn--tR6V-";var et$=n(497789);function et0(e){switch(e){case ei.aTn.CHINESE:case ei.aTn.KOREAN:case ei.aTn.US_QWERTY:case ei.aTn.UNKNOWN:case ei.aTn.DVORAK:return!0;default:return!1}}function et1({label:e,width:t}){return f.createElement("div",{style:{flexGrow:t??1},className:"keyboard_shortcut_panel_layout_tab--key--zFiya keyboard_shortcut_panel--singleCharKeyBox--DD6s1 keyboard_shortcut_panel--shortcutBox--9Ltqp"},e)}function et2({layout:e}){let t=(0,f.useCallback)(t=>"Space"===t?" ":ei.glU.getKeyboardLayoutAsJSON(e)[t],[e]),n=(e,n)=>{if(e!==etK&&e!==etW){let a=t(e);return a?f.createElement(et1,{key:e,width:n,label:a}):null}return e===etK?f.createElement("div",{style:{flexGrow:n??1},className:"keyboard_shortcut_panel_layout_tab--enterISOKeyContainer--PK7LJ keyboard_shortcut_panel_layout_tab--key--zFiya keyboard_shortcut_panel--singleCharKeyBox--DD6s1 keyboard_shortcut_panel--shortcutBox--9Ltqp"},f.createElement(a2.B,{className:"keyboard_shortcut_panel_layout_tab--enterISOKey--AbX2h",svg:et$.A})):e===etW?f.createElement("div",{style:{flexGrow:n??1},className:"keyboard_shortcut_panel_layout_tab--spacerKey--g8rv4 keyboard_shortcut_panel_layout_tab--key--zFiya keyboard_shortcut_panel--singleCharKeyBox--DD6s1 keyboard_shortcut_panel--shortcutBox--9Ltqp"},t("Enter")):null};return f.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--keyboardContainer--JLzz1"},f.createElement("div",{className:etq},f.createElement(etz,{createKey:n})),f.createElement("div",{className:etq},f.createElement(etj,{createKey:n,isBackslashRow2:et0(e)})),f.createElement("div",{className:etq},f.createElement(etJ,{createKey:n,isBackslashRow2:et0(e)})),f.createElement("div",{className:etq},f.createElement(etY,{createKey:n})),f.createElement("div",{className:nb()(etq,"keyboard_shortcut_panel_layout_tab--row5--TBfPa")},f.createElement(etX,{createKey:n})))}let et5=async()=>{if(!em.eD)return null;let e=await em.eD.getKeyboardLayout();return e?(0,eA.pB)(e):null};class et4 extends ow.c${}function et3({layout:e,setPreviewedLayout:t}){let n=(0,_.wA)(),a=(0,_.d4)(e=>e.dropdownShown),[l,r]=(0,f.useState)(e),[i,o]=(0,f.useState)();et5().then(e=>{i!==e&&o(e)});let s=(0,f.useMemo)(()=>{let e=i?f.createElement(et4,{key:i,value:i}):null,t=(0,ex.GP)().map(e=>{if(isNaN(parseInt(e)))return null;let t=parseInt(e);return t===i?null:{name:(0,ex.As)(t),layoutOption:t}}).filter(gq.Vq).sort((e,t)=>e.layoutOption===ei.aTn.UNKNOWN?1:t.layoutOption===ei.aTn.UNKNOWN?-1:e.name.localeCompare(t.name)).map(({layoutOption:e})=>f.createElement(et4,{key:e,value:e}));return null!=e?[f.createElement(et4,{key:(0,eN.t)("keyboard_settings.detected"),formattedValue:(0,eN.t)("keyboard_settings.detected"),disabled:!0}),e,f.createElement(ow.sK,{key:"divider-1"}),f.createElement(et4,{key:(0,eN.t)("keyboard_settings.other_layouts"),formattedValue:(0,eN.t)("keyboard_settings.other_layouts"),disabled:!0}),...t]:t},[i]),c=f.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--selectorWrapper--ecEHm"},f.createElement(ow.l6,{id:"keyboard-layout-select",property:l,dispatch:n,autoFocus:!1,className:"keyboard_shortcut_panel_layout_tab--selectorContainer--BWtmR",dropdownClassName:nz.s4,inputClassName:"keyboard_shortcut_panel_layout_tab--selectorInputContainer--z1tfj",chevronClassName:"keyboard_shortcut_panel_layout_tab--selectorChevron--ZnCbX",formatter:{format:e=>(0,ex.As)(e)},onMouseDown:e=>{e.stopPropagation()},onChange:e=>{r(e),(0,ex.rd)({layout:e})},onOptionFocus:t,dropdownShown:a,recordingKey:"keyboardLayoutSelector"},s));return f.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--selectorRow--QPlYR"},f.createElement("span",{className:"keyboard_shortcut_panel_layout_tab--selectorLabelText--3jkuk"},(0,eN.t)("keyboard_settings.keyboard_layout_panel_selector")),f.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--selectorDropdownContainer--0rd1S"},c))}function et6({layout:e,setPreviewedLayout:t}){let n=(0,eN.t)("keyboard_settings.figma_keyboard_shortcuts_won_t_automatically_change_if_you_change_your_system_keyboard_layout");return f.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--leftColumnWrapper--8Jn1P"},f.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--keyboardSelectorContainerSection--gTvK9"},f.createElement(et3,{layout:e,setPreviewedLayout:t})),f.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--keyboardDescriptionSection--yD9L-"},e===ei.aTn.UNKNOWN?null:n),f.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--keyboardLearnMoreSection--PV6Hj"},f.createElement("a",{className:"keyboard_shortcut_panel_layout_tab--learnMoreLink--bOFxg",href:"https://help.figma.com/hc/articles/5665442977431",target:"_blank",rel:"noopener"},(0,eN.tx)("keyboard_settings.request_a_new_layout_or_learn_more"))))}function et7(){let e=(0,aN.J2)(ei.Ez5.editorState().keyboardLayoutPreference),[t,n]=(0,f.useState)();return f.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--contents--8vVa7 keyboard_shortcut_panel--contents--8ae0D"},f.createElement("div",{className:nb()(etZ,etQ)},f.createElement(et6,{layout:e,setPreviewedLayout:n})),f.createElement("div",{className:nb()(etZ,etQ,"keyboard_shortcut_panel_layout_tab--keyboardVisualColumn--5Hw4F")},f.createElement(et2,{layout:t??e})))}var et8=n(811641),et9=n(481103),ene=n(586779),ent=n(964829);class enn extends f.PureComponent{render(){return f.createElement("div",{className:etP.fi},f.createElement("table",null,this.props.children))}}enn.displayName="Column";class ena extends f.PureComponent{render(){let e=f.Children.toArray(this.props.children).filter(e=>!!e);if(0===e.length)return null;let t=this.props.caption?(0,ety.A)(this.props.caption):null;return f.createElement("tbody",null,t&&f.createElement("tr",null,f.createElement("th",{className:etP.xQ,colSpan:3},t)),e)}}function enl(e,t,n){if(void 0===t&&void 0===n)return!0;let a=e=>{let a=!0;return void 0!==n&&a&&(a=n!==e),void 0!==t&&(Array.isArray(t)?a&&(a=t.includes(e)):a&&(a=t===e)),a};return e===eq.nT.Design?a(etM.DESIGN):e===eq.nT.DevHandoff?a(etM.DEV_MODE):e===eq.nT.Whiteboard?a(etM.FIGJAM):e===eq.nT.Slides&&a(etM.SLIDES)}function enr(e){return!e||e.every(e=>(0,y.kc)()[e])}ena.displayName="Category";class eni extends f.Component{constructor(e){super(e),this.keyShortcutPositionsInTab={},this.shortcutList={[et8.Jq.ESSENTIAL]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.essential"),includeInEditorType:[etM.DESIGN,etM.SLIDES],columns:[[{shortcuts:[{shortcutKey:"toggle-ui",usage:(0,eN.tx)("fullscreen.keyboard_shortcuts_panel.toggle_ui_description")}]}],[{shortcuts:[this.props.hasSubscribedLibraries?{shortcutKey:"component-insert",displayName:this.componentInsertDisplayName(),usage:(0,eN.tx)("fullscreen.keyboard_shortcuts_panel.component_insert_description")}:{shortcutKey:"toggle-dropper",usage:(0,eN.tx)("fullscreen.keyboard_shortcuts_panel.toggle_dropper_description")}]}],[{shortcuts:[{shortcutKey:"toggle-menu",displayName:(0,ie.gn)()?"toggle-actions-menu":"toggle-menu",usage:(0,eN.tx)("fullscreen.keyboard_shortcuts_panel.toggle_menu_description")}]}]]},[et8.Jq.TOOLS]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.tools"),columns:[[{shortcuts:[{shortcutKey:"set-tool-default",displayName:"set-tool-default-desc-figma",icon:(0,aw.SD)(l8.NLJ.SELECT),includeInEditorType:[etM.DESIGN,etM.SLIDES]},{shortcutKey:"set-tool-default-figjam",displayName:"set-tool-default-desc-figjam",icon:(0,aw.SD)(l8.NLJ.SELECT),includeInEditorType:etM.FIGJAM},{shortcutKey:"create-slide",displayName:"create-slide",icon:(0,aw.SD)(l8.NLJ.FRAME),includeInEditorType:etM.SLIDES},{shortcutKey:"set-tool-frame",displayName:"set-tool-frame-desc",icon:(0,aw.SD)(l8.NLJ.FRAME),includeInEditorType:etM.DESIGN},{shortcutKey:"set-tool-pen",displayName:"set-tool-pen-desc",icon:(0,aw.SD)(l8.NLJ.VECTOR_PEN),includeInEditorType:etM.DESIGN},{shortcutKey:"set-tool-sticky",includeInEditorType:etM.FIGJAM},{shortcutKey:"set-tool-connector-straight",includeInEditorType:etM.FIGJAM},{shortcutKey:"set-tool-connector-elbowed",includeInEditorType:etM.FIGJAM},{shortcutKey:"set-tool-pencil",displayName:"set-tool-pencil-desc",icon:(0,aw.SD)(l8.NLJ.VECTOR_PENCIL),includeInEditorType:etM.DESIGN},{shortcutKey:"set-tool-pencil",displayName:"set-tool-marker",includeInEditorType:etM.FIGJAM}]}],[{shortcuts:[{shortcutKey:"set-tool-type",displayName:"set-tool-type-desc",icon:(0,aw.SD)(l8.NLJ.TYPE),hideInEditorType:etM.DEV_MODE},{shortcutKey:"set-tool-table",icon:(0,aw.SD)(l8.NLJ.TABLE)},{shortcutKey:"set-tool-section",includeInEditorType:etM.FIGJAM},{shortcutKey:"set-tool-rectangle",displayName:"set-tool-rectangle-desc",icon:(0,aw.SD)(l8.NLJ.SHAPE_RECTANGLE),hideInEditorType:etM.DEV_MODE},{shortcutKey:"set-tool-ellipse",displayName:"set-tool-ellipse-desc",icon:(0,aw.SD)(l8.NLJ.SHAPE_ELLIPSE),hideInEditorType:etM.DEV_MODE},{shortcutKey:"set-tool-line",displayName:"set-tool-line-desc",icon:(0,aw.SD)(l8.NLJ.SHAPE_LINE),includeInEditorType:etM.DESIGN},{shortcutKey:"toggle-publish",includeInEditorType:etM.FIGJAM},{shortcutKey:"place",includeInEditorType:etM.FIGJAM},{shortcutKey:"set-tool-arrow",displayName:"set-tool-arrow-desc",icon:(0,aw.SD)(l8.NLJ.SHAPE_ARROW),includeInEditorType:etM.DESIGN},{shortcutKey:"set-tool-comments",icon:(0,aw.SD)(l8.NLJ.COMMENTS),includeInEditorType:etM.DEV_MODE},{shortcutKey:"set-tool-annotate",icon:(0,aw.SD)(l8.NLJ.ANNOTATE),includeInEditorType:etM.DEV_MODE},{shortcutKey:"set-tool-measure",icon:(0,aw.SD)(l8.NLJ.MEASURE),includeInEditorType:etM.DEV_MODE}]}],[{shortcuts:[{shortcutKey:"start-chat",includeInEditorType:etM.FIGJAM},{shortcutKey:"stamp-or-reaction-wheel",includeInEditorType:etM.FIGJAM},{shortcutKey:"set-tool-code-block",includeInEditorType:etM.FIGJAM},{shortcutKey:"set-tool-comments",icon:(0,aw.SD)(l8.NLJ.COMMENTS),hideInEditorType:etM.DEV_MODE},{shortcutKey:"toggle-dropper",icon:ent.A,includeInEditorType:etM.DESIGN},{shortcutKey:"set-tool-slice",displayName:"set-tool-slice-desc",icon:(0,aw.SD)(l8.NLJ.SLICE),includeInEditorType:etM.DESIGN}]}]]},[et8.Jq.VIEW]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.view"),columns:[[{shortcuts:[{shortcutKey:"toggle-ui"},{shortcutKey:"toggle-multiplayer-cursors"},{shortcutKey:"enter-design-mode"},{shortcutKey:"enter-inspect-mode",hideInEditorType:etM.SLIDES}]}],[{shortcuts:[{shortcutKey:"pan",includeInEditorType:etM.FIGJAM},{shortcutKey:"zoom-in",includeInEditorType:etM.FIGJAM},{shortcutKey:"zoom-out",includeInEditorType:etM.FIGJAM},{shortcutKey:"zoom-reset",includeInEditorType:etM.FIGJAM},{shortcutKey:"toggle-rulers",includeInEditorType:etM.DESIGN},{shortcutKey:"toggle-outlines-transition",includeInEditorType:etM.DESIGN},{shortcutKey:"toggle-pixel-preview",includeInEditorType:etM.DESIGN},{shortcutKey:"toggle-shown-layout-grids",includeInEditorType:[etM.DESIGN,etM.SLIDES]},{shortcutKey:"toggle-grid",includeInEditorType:etM.DESIGN}]}],[{shortcuts:[{shortcutKey:"zoom-to-fit",includeInEditorType:etM.FIGJAM},{shortcutKey:"zoom-to-selection",includeInEditorType:etM.FIGJAM},{shortcutKey:"toggle-layers",includeInEditorType:etM.DESIGN},{shortcutKey:"toggle-publish",displayName:"toggle-publish-desc",includeInEditorType:etM.DESIGN},{shortcutKey:"toggle-library",includeInEditorType:etM.DESIGN},{shortcutKey:"show-design-panel",includeInEditorType:etM.DESIGN},{shortcutKey:"show-prototype-panel",includeInEditorType:etM.DESIGN}]}]]},[et8.Jq.ZOOM]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.zoom"),hideInEditorType:etM.FIGJAM,columns:[[{shortcuts:[{shortcutKey:"pan"},{shortcutKey:"zoom-in"},{shortcutKey:"zoom-out"},{shortcutKey:"zoom-reset"}]}],[{shortcuts:[{shortcutKey:"zoom-to-fit"},{shortcutKey:"zoom-to-selection"},{shortcutKey:"next-artboard"},{shortcutKey:"previous-artboard"}]}],[{shortcuts:[{shortcutKey:"page-previous"},{shortcutKey:"page-next"},{shortcutKey:"previous-artboard-same-zoom"},{shortcutKey:"next-artboard-same-zoom"}]}]]},[et8.Jq.TEXT]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.text"),hideInEditorType:etM.DEV_MODE,columns:[[{shortcuts:[{shortcutKey:"bold-and-italic"},{shortcutKey:"text-toggle-underline"},{shortcutKey:"text-edit-hyperlink"},{shortcutKey:"text-toggle-strikethrough"},{shortcutKey:"bulleted-and-numbered-list"}]}],[{shortcuts:[{shortcutKey:"text-align-left",includeInEditorType:etM.DESIGN},{shortcutKey:"text-align-center",includeInEditorType:etM.DESIGN},{shortcutKey:"text-align-right",includeInEditorType:etM.DESIGN},{shortcutKey:"text-align-justified",includeInEditorType:[etM.DESIGN,etM.SLIDES]},{shortcutKey:"text-style-normal",includeInEditorType:etM.FIGJAM},{shortcutKey:"text-style-h3",includeInEditorType:etM.FIGJAM},{shortcutKey:"text-style-h2",includeInEditorType:etM.FIGJAM},{shortcutKey:"text-style-h1",includeInEditorType:etM.FIGJAM},{shortcutKey:"text-style-title",includeInEditorType:etM.FIGJAM}]}],[{shortcuts:[{shortcutKey:"text-font-size-adjust",includeInEditorType:etM.DESIGN},{shortcutKey:"text-bold-adjust",includeInEditorType:etM.DESIGN},{shortcutKey:"text-letter-spacing-adjust",includeInEditorType:etM.DESIGN},{shortcutKey:"text-line-height-adjust",includeInEditorType:etM.DESIGN},{shortcutKey:"text-align-left",includeInEditorType:etM.FIGJAM},{shortcutKey:"text-align-center",includeInEditorType:etM.FIGJAM},{shortcutKey:"text-align-right",includeInEditorType:etM.FIGJAM},{shortcutKey:"text-indent-and-dedent-list",includeInEditorType:etM.FIGJAM}]}]]},[et8.Jq.SHAPE]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.shape"),includeInEditorType:etM.DESIGN,columns:[[{shortcuts:[{shortcutKey:"set-tool-pen",icon:(0,aw.SD)(l8.NLJ.VECTOR_PEN)},{shortcutKey:"set-tool-pencil",icon:(0,aw.SD)(l8.NLJ.VECTOR_PENCIL)}]},{caption:"while-editing-shape",shortcuts:[{shortcutKey:"set-tool-paint-bucket",icon:(0,aw.SD)(l8.NLJ.VECTOR_PAINT_BUCKET)},{shortcutKey:"bend-tool",icon:(0,aw.SD)(l8.NLJ.VECTOR_BEND)}]}],[{shortcuts:[{shortcutKey:"remove-fill"},{shortcutKey:"remove-stroke"},{shortcutKey:"swap-fill-and-stroke"},{shortcutKey:"outline-stroke-transition"},{shortcutKey:"flatten-selection"}]}],[{caption:"after-selecting-points",shortcuts:[{shortcutKey:"join-selection"},{shortcutKey:"smooth-join-selection"},{shortcutKey:"delete-and-heal-selection"}]}]]},[et8.Jq.SELECT]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.selection"),includeInEditorType:etM.DESIGN,columns:[[{shortcuts:[{shortcutKey:"select-all"},{shortcutKey:"select-inverse"},{shortcutKey:"deselect-all"},{shortcutKey:"deep-select"}]}],[{shortcuts:[{shortcutKey:"select-child"},{shortcutKey:"select-parent"},{shortcutKey:"select-next-sibling"},{shortcutKey:"select-previous-sibling"},{shortcutKey:"select-matching"}]}],[{shortcuts:[{shortcutKey:"group-selection"},{shortcutKey:"ungroup-selection"},{shortcutKey:"frame-selection"},{shortcutKey:"toggle-shown-for-selected-nodes"},{shortcutKey:"toggle-locked-for-selected-nodes"}]}]]},[et8.Jq.CURSOR]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.cursor"),includeInEditorType:etM.DESIGN,columns:[[{caption:"while-pointing",shortcuts:[{shortcutKey:"measure-to-selection"}]},{caption:"while-moving",shortcuts:[{shortcutKey:"duplicate"}]}],[{caption:"while-clicking",shortcuts:[{shortcutKey:"deep-select"}]},{caption:"while-dragging-to-select",shortcuts:[{shortcutKey:"deep-select-rectangle"}]}],[{caption:"while-resizing",shortcuts:[{shortcutKey:"center-resize-drag"},{shortcutKey:"resize-proportionally"},{shortcutKey:"ignore-constraints",displayName:"ignore-constraints-desc"}]}]]},[et8.Jq.COPY]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.copy"),includeInEditorType:etM.DEV_MODE,columns:[[],[{shortcuts:[{shortcutKey:"copy",includeInEditorType:etM.DEV_MODE},{shortcutKey:"copy-as-png",includeInEditorType:etM.DEV_MODE}]}],[]]},[et8.Jq.EDIT]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.edit"),hideInEditorType:etM.DEV_MODE,columns:[[{shortcuts:[{shortcutKey:"copy"},{shortcutKey:"cut"},{shortcutKey:"paste"},{shortcutKey:"paste-to-replace",includeInEditorType:etM.DESIGN},{shortcutKey:"paste-over-selection"},{shortcutKey:"export-selection-or-current-page",displayName:"export-selection-or-current-page-desc",includeInEditorType:etM.FIGJAM}]}],[{shortcuts:[{shortcutKey:"enter-slides-design-mode",includeInEditorType:etM.SLIDES},{shortcutKey:"enter-slides-mode",includeInEditorType:etM.SLIDES}]}],[{shortcuts:[{shortcutKey:"bring-forward",includeInEditorType:etM.FIGJAM},{shortcutKey:"send-backward",includeInEditorType:etM.FIGJAM},{shortcutKey:"bring-to-front",includeInEditorType:etM.FIGJAM},{shortcutKey:"send-to-back",includeInEditorType:etM.FIGJAM},{shortcutKey:"group-selection",includeInEditorType:etM.FIGJAM},{shortcutKey:"duplicate-in-place",includeInEditorType:etM.DESIGN},{shortcutKey:"rename-selection",includeInEditorType:etM.DESIGN},{shortcutKey:"export-selected-exportables",displayName:"export-selected-exportables-desc",includeInEditorType:etM.DESIGN},{shortcutKey:"canvas-search",includeInEditorType:etM.DESIGN}]}],[{shortcuts:[{shortcutKey:"toggle-locked-for-selected-nodes",includeInEditorType:etM.FIGJAM},{shortcutKey:"canvas-search",includeInEditorType:etM.FIGJAM},{shortcutKey:"undo",includeInEditorType:etM.FIGJAM},{shortcutKey:"redo",includeInEditorType:etM.FIGJAM},{shortcutKey:"copy-as-png",includeInEditorType:etM.DESIGN},{shortcutKey:"copy-properties",includeInEditorType:etM.DESIGN},{shortcutKey:"paste-properties",includeInEditorType:etM.DESIGN}]}]]},[et8.Jq.TRANSFORM]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.transform"),includeInEditorType:etM.DESIGN,columns:[[{shortcuts:[{shortcutKey:"flip-horizontal"},{shortcutKey:"flip-vertical"},{shortcutKey:"mask-selection"}]}],[{shortcuts:[{shortcutKey:"request-edit-mode",displayName:"edit-shape-or-image"},{shortcutKey:"place"}]}],[{shortcuts:[{shortcutKey:"set-opacity-00"},{shortcutKey:"set-opacity-1"},{shortcutKey:"set-opacity-5"},{shortcutKey:"set-opacity-0"}]}]]},[et8.Jq.ARRANGE]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.arrange"),includeInEditorType:etM.DESIGN,columns:[[{shortcuts:[{shortcutKey:"bring-forward"},{shortcutKey:"send-backward"},{shortcutKey:"bring-to-front"},{shortcutKey:"send-to-back"}]}],[{shortcuts:[{shortcutKey:"align-left-right"},{shortcutKey:"align-top-bottom"},{shortcutKey:"align-centers"},{shortcutKey:"distribute-spacing"},{shortcutKey:"tidy-up"}]}],[{shortcuts:[{shortcutKey:"stack-selection"},{shortcutKey:"unstack-selection"},{shortcutKey:"run-multi-stack-auto-layout",featureFlags:["auto_auto_layout"]}]}]]},[et8.Jq.COMPONENTS]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.components"),includeInEditorType:etM.DESIGN,columns:[[{shortcuts:[{shortcutKey:"toggle-publish",displayName:"toggle-publish-desc"},{shortcutKey:"toggle-library"},{shortcutKey:"create-symbol"},{shortcutKey:"detach-instance"}]}],[{shortcuts:[{shortcutKey:"component-insert",displayName:this.componentInsertDisplayName()}]},{caption:"while-inserting-a-component",shortcuts:[{shortcutKey:"swap-instance"}]}]]},[et8.Jq.ACCESSIBILITY]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.accessibility"),includeInEditorType:etM.FIGJAM,columns:[[{shortcuts:[{shortcutKey:"select-next-node"},{shortcutKey:"select-previous-node"},{shortcutKey:"select-parent"},{shortcutKey:"select-child"}]}],[{shortcuts:[{shortcutKey:ea.dz},{shortcutKey:ea.Jt}]}]]},[et8.Jq.ADVANCED]:{displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.advanced"),includeInEditorType:etM.FIGJAM,columns:[[{caption:"while-editing-shape-or-sticky",shortcuts:[{shortcutKey:"quick-create-immutable-frame"}]},{caption:"while-text-shape-or-sticky-selected",shortcuts:[{shortcutKey:"edit-text"}]}],[{caption:"while-stamping",shortcuts:[{shortcutKey:"stamp-on-node"}]}],[{shortcuts:[{shortcutKey:"align-left-right"},{shortcutKey:"align-top-bottom"},{shortcutKey:"align-centers"},{shortcutKey:"tidy-up"},{shortcutKey:"straight-connector"}]}]]}},this.state={activeTab:this.props.initActiveTab??this.getDefaultActiveTab(this.props.editorType),completedTabs:this.getCompletedTabs(this.props.usedKeyboardShortcuts),allTabsCompleted:this.allTabsCompleted(this.getCompletedTabs(this.props.usedKeyboardShortcuts)),tabCompletedAnimation:!1,tabCompletedFirstTimeAnimation:!1,allTabsCompletedAnimation:!1},this.onNavClick=e=>{this.setState({activeTab:e,completedTabs:this.state.completedTabs,allTabsCompleted:this.state.allTabsCompleted,tabCompletedFirstTimeAnimation:!1,tabCompletedAnimation:!1,allTabsCompletedAnimation:this.state.allTabsCompletedAnimation})},this.getTabs=()=>{let e=[],t=this.props.editorType===eq.nT.Design?etP.CJ:"";for(let n in this.shortcutList)enl(this.props.editorType,this.shortcutList[n].includeInEditorType,this.shortcutList[n].hideInEditorType)&&enr(this.shortcutList[n].featureFlags)&&e.push({displayName:this.shortcutList[n].displayName,id:n,active:this.state.activeTab==n,className:nb()(etP.Mf,t)});if(this.props.editorType===eq.nT.Design){let n={id:"spacer",className:nb()(etP.Mf,t)};e.push(n)}return e.push({displayName:(0,eN.tx)("whiteboard.keyboard_shortcuts.tab.layout"),id:"layout",active:"layout"===this.state.activeTab,className:nb()(etP.Mf,t)}),this.props.isCKSLabEnabled&&e.push({displayName:(0,eN.tx)("keyboard_settings.custom_tab"),id:"custom",active:"custom"===this.state.activeTab,className:nb()(etP.Mf,t)}),e},this.replayAllTabsCompletedAnimation=()=>{this.state.allTabsCompletedAnimation?this.stopAllTabsCompletedAnimation():this.playAllTabsCompletedAnimation(this.state.completedTabs)},this.onClose=()=>{this.props.dispatch(ek.FU({tab:null})),et.Y5.triggerAction("toggle-keyboard-shortcuts")},this.onTablistKeyDown=e=>{var t,n,a,l;if("ArrowLeft"===e.key&&0===(0,b.sN)(e)){let n=null==(t=this.tabRefs.current)?void 0:t.findIndex(e=>!!e&&e.id===this.state.activeTab);if(!this.tabRefs.current||null==n)return;let a=n-1;for(;!this.tabRefs.current[a]&&a>0;)a--;0===n&&(a=this.tabRefs.current.length-1),this.tabRefs.current[a].focus(),this.onNavClick(this.tabRefs.current[a].id),e.preventDefault()}else if("ArrowRight"===e.key&&0===(0,b.sN)(e)){let t=null==(n=this.tabRefs.current)?void 0:n.findIndex(e=>!!e&&e.id===this.state.activeTab);if(!this.tabRefs.current||null==t)return;let a=t+1;for(;!this.tabRefs.current[a]&&a<this.tabRefs.current.length-1;)a++;t===this.tabRefs.current.length-1&&(a=0),this.tabRefs.current[a].focus(),this.onNavClick(this.tabRefs.current[a].id),e.preventDefault()}else if("Home"===e.key)this.tabRefs.current&&this.onNavClick(this.tabRefs.current[0].id),e.preventDefault();else if("End"===e.key)this.tabRefs.current&&this.onNavClick(this.tabRefs.current[this.tabRefs.current.length-1].id),e.preventDefault();else if("Tab"===e.key&&0===(0,b.sN)(e))null==(a=this.tabPanelRef.current)||a.focus(),e.preventDefault();else if("Escape"===e.key){if(null==(l=this.tabListRef.current)||l.blur(),this.tabRefs.current){let e=this.tabRefs.current.findIndex(e=>!!e&&e.id===this.state.activeTab);this.tabRefs.current[e].blur()}e.preventDefault()}else"Enter"===e.key?e.preventDefault():(0,Aw.f7)(e)},this.tabRefs=f.createRef(),this.tabListRef=f.createRef(),this.tabPanelRef=f.createRef()}componentInsertDisplayName(){return this.props.isUI3?"component-insert-display-name-ui3":"component-insert-display-name"}componentDidMount(){var e;null==(e=this.tabListRef.current)||e.focus()}getDefaultActiveTab(e){return e===eq.nT.Design?"essential":e===eq.nT.DevHandoff?"view":"tools"}getCompletedTabs(e,t){let n=t??this.props.editorType,a={};for(let t in this.shortcutList){let l=!0;for(let a of this.shortcutList[t].columns)for(let t of a)if(enl(n,t.includeInEditorType,t.hideInEditorType)){for(let a of t.shortcuts)if(enl(n,a.includeInEditorType,a.hideInEditorType)&&etH.keybindingsForShortcut(a.shortcutKey,this.props.useNumbersForOpacity,this.props.appModelKeyboardShortcuts)&&!(etH.shortcutUsedCount(a.shortcutKey,e)>0)){l=!1;break}}a[t]=l}return a}findChangedKey(e,t,n){for(let a of this.shortcutList[e].columns)for(let e of a)for(let a of e.shortcuts)if(etH.keybindingsForShortcut(a.shortcutKey,this.props.useNumbersForOpacity,this.props.appModelKeyboardShortcuts)){let e=etH.shortcutUsedCount(a.shortcutKey,t);if(etH.shortcutUsedCount(a.shortcutKey,n)>e)return a.shortcutKey}return null}allTabsCompleted(e){let t=!0;for(var n in e)if(!e[n]){t=!1;break}return t}playAllTabsCompletedAnimation(e){this.setState({completedTabs:e,allTabsCompleted:!0,tabCompletedFirstTimeAnimation:!1,tabCompletedAnimation:!1,allTabsCompletedAnimation:!0})}stopAllTabsCompletedAnimation(){this.setState({allTabsCompletedAnimation:!1})}playCompletedTabFirstTimeAnimation(e,t){setTimeout(()=>this.setState({completedTabs:t,tabCompletedFirstTimeAnimation:!0,tabCompletedAnimationKeyPosition:this.keyShortcutPositionsInTab[e],tabCompletedAnimation:!0}),1500),setTimeout(()=>this.setState({tabCompletedFirstTimeAnimation:!1,tabCompletedAnimation:!1}),6e3)}UNSAFE_componentWillReceiveProps(e){var t,n,a,l;let r=this.state.activeTab,i=r;r&&this.props.editorType!==e.editorType&&!enl(e.editorType,null==(n=null==(t=this.shortcutList)?void 0:t[r])?void 0:n.includeInEditorType,null==(l=null==(a=this.shortcutList)?void 0:a[r])?void 0:l.hideInEditorType)&&(i=this.getDefaultActiveTab(e.editorType));let o=this.getCompletedTabs(this.props.usedKeyboardShortcuts),s=this.getCompletedTabs(e.usedKeyboardShortcuts);if(this.allTabsCompleted(s)&&!this.allTabsCompleted(o))this.playAllTabsCompletedAnimation(s);else{let t=this.state.activeTab in et8.Jq?this.findChangedKey(this.state.activeTab,this.props.usedKeyboardShortcuts,e.usedKeyboardShortcuts):null;t&&s[this.state.activeTab]&&!o[this.state.activeTab]&&this.playCompletedTabFirstTimeAnimation(t,s)}this.setState({completedTabs:s,allTabsCompleted:this.allTabsCompleted(s),activeTab:i})}renderTabContents(){let e;let t={usedKeyboardShortcuts:this.props.usedKeyboardShortcuts,appModelKeyboardShortcuts:this.props.appModelKeyboardShortcuts};this.keyShortcutPositionsInTab={};let n=0,a=e=>(n++,this.keyShortcutPositionsInTab[e.shortcutKey]=n,enl(this.props.editorType,e.includeInEditorType,e.hideInEditorType)&&enr(e.featureFlags))?f.createElement(etH,{shortcutKey:e.shortcutKey,key:`shortcut-${this.state.activeTab}-${n}`,icon:e.icon,displayName:e.displayName,editorType:this.props.editorType,usage:e.usage,keyPosition:n,tabCompletedFirstTimeAnimation:this.state.tabCompletedFirstTimeAnimation,tabCompletedAnimation:this.state.tabCompletedAnimation,tabCompletedAnimationKeyPosition:this.state.tabCompletedAnimationKeyPosition,allTabsCompletedAnimation:this.state.allTabsCompletedAnimation,useNumbersForOpacity:this.props.useNumbersForOpacity,...t}):null,l=this.shortcutList[this.state.activeTab]?this.shortcutList[this.state.activeTab].columns.map((e,n)=>f.createElement(enn,{...t,key:`column-${n}`},e.map((e,l)=>enl(this.props.editorType,e.includeInEditorType,e.hideInEditorType)?f.createElement(ena,{caption:e.caption,key:`category-${n}-${l}`,...t},e.shortcuts.map(a)):null))):[];e=this.state.tabCompletedFirstTimeAnimation?etP.iV:this.state.completedTabs[this.state.activeTab]?etP.xd:etP.Y0,"layout"===this.state.activeTab&&(e=etP.Y0);let r="essential"===this.state.activeTab?f.createElement(f.Fragment,null,f.createElement("div",{className:etP.pG},(0,eN.tx)("whiteboard.keyboard_shortcuts.essential_keyboard_shortcuts")),f.createElement("div",{className:etP.Bz},l)):"layout"===this.state.activeTab?f.createElement("div",{className:etP.PG},f.createElement(et7,null)):"custom"===this.state.activeTab&&this.props.isCKSLabEnabled?f.createElement(etG,null):f.createElement("div",{className:etP.PG},l);return f.createElement("div",{role:"tabpanel",ref:this.tabPanelRef,id:et8.xC,"aria-labelledby":this.state.activeTab,className:e,tabIndex:0,"data-fullscreen-intercept":!0},r)}render(){let e=this.getTabs(),t=this.props.editorType===eq.nT.Design?etP.CJ:"",n=etP.C$;for(let a=0;a<e.length;a++){let l=e[a];if((0,et8.$w)(l)&&l.active){e[a].className=this.state.tabCompletedFirstTimeAnimation?nb()(etP.Ug,t):nb()(etP.yR,t),a>0?e[a-1].className=nb()(etP.gK,t):n=etP.JA,a<e.length-1?e[a+1].className=nb()(etP.hM,t):n=etP.NZ;break}}return f.createElement("div",{className:etP.Ku,"data-fullscreen-intercept":!0},f.createElement("div",{role:"tablist",ref:this.tabListRef,"aria-label":(0,eN.t)("keyboard_settings.keyboard_shortcuts"),className:n,onKeyDown:this.onTablistKeyDown,tabIndex:0},f.createElement(et8.Qz,{tabInfo:e,completedTabs:this.state.completedTabs,onNavClick:this.onNavClick,recordingKey:this.props.recordingKey,ref:this.tabRefs}),f.createElement("button",{className:etP.Nk,onClick:this.onClose,"aria-label":(0,eN.t)("general.close"),"data-fullscreen-intercept":!0},f.createElement(a2.B,{svg:dM.default})),this.state.allTabsCompleted&&f.createElement("div",{className:this.state.allTabsCompletedAnimation?etP.Yk:etP.C_,onClick:this.replayAllTabsCompletedAnimation},f.createElement(a2.B,{svg:this.state.allTabsCompletedAnimation?et9.A:ene.A}))),this.renderTabContents())}}function eno(e){let t=(0,n6.GS)(),n=(0,_.d4)(e=>Object.keys(e.library.subscriptions.forCurrentOrg).length>0),a=(0,L.o3)(L.nt.customKeyboardShortcuts),l=(0,_.d4)(e=>e.usedKeyboardShortcuts),r=(0,_.d4)(e=>e.keyboardShortcutPanel.tab),i=(0,_.d4)(e=>e.mirror.appModel.keyboardShortcuts),o=(0,_.d4)(e=>"fullscreen"===e.selectedView.view?e.selectedView.editorType:eq.nT.Design),s=(0,aN.J2)(l8.Ez5.editorState().useNumbersForOpacity),c=(0,_.wA)();return f.createElement(eni,{recordingKey:e.recordingKey,usedKeyboardShortcuts:l,initActiveTab:r,appModelKeyboardShortcuts:i,editorType:o,hasSubscribedLibraries:n,useNumbersForOpacity:s,dispatch:c,isCKSLabEnabled:a,isUI3:t})}eni.displayName="KeyboardShortcutPanel";var ens=n(624875),enc=n(991167),end=n(555024),enu=n(368832),enm=n(201140),enp=n(323653),enf=n(650322),en_=n(206144),eng=n(654923);let enh="banners--bannerLabel--3jj-4";function enE(){let e=(0,CY.B)(),t=(0,CY.w)(),n=f.useCallback(()=>{e.hidden||e.onClick(CX.i$.TopBanner)},[e]);return e.hidden||t?null:f.createElement(a1.tM,{className:"banners--bannerButton--G4mb8",onClick:n,disabled:e.disabled},e.label)}function env(){let e=(0,aM.n)(),t=(0,CY.w)();return e?f.createElement("div",{className:enh},(0,eN.tx)("dev_handoff.paywall.banner.description_starter_viewer",{title:f.createElement("strong",null,(0,eN.tx)("dev_handoff.paywall.banner.title"))})):t?f.createElement("div",{className:enh},(0,eN.tx)("dev_handoff.paywall.banner.description_pending",{title:f.createElement("strong",null,(0,eN.tx)("dev_handoff.paywall.request_pending"))})):f.createElement("div",{className:enh},(0,eN.tx)("dev_handoff.paywall.banner.description",{title:f.createElement("strong",null,(0,eN.tx)("dev_handoff.paywall.banner.title"))}))}function eny(){let e=(0,bV.M)();return f.createElement("div",{className:enh},(0,eN.tx)("dev_handoff.paywall.banner.description_in_trial",{numDays:(null==e?void 0:e.totalGraceDays)??bU.Hw9,title:f.createElement("strong",null,(0,eN.tx)("dev_handoff.paywall.request_pending"))}))}var enb=n(995852),enC=n(107877),enw=n(746869),enT=n(668526),enx=n(851363),enN=n(437749),enS=n(828702),enk=n(127987);let enI=JSON.parse('{"safari":"16","firefox":"101","chrome":"88","edge":"121","deprecatedOn":"2024-03-18T08:00:00.000Z"}');var enA=n(478398),enO=n(819258),enL=n(315457),enP=n(10388),enD=n(87171);let enR=({})=>{if(!(0,y.kc)().desktop_deprecation_banner)return;let e=(0,em.GN)();if(null==e||S.zl.get(enp.Pi))return;let t=(0,eN.t)("banner.desktop_app_deprecation.description",{deprecationDate:(null==e?void 0:e.toDate())??new Date});return{id:dp.om.DesktopDeprecationBanner,dismissible:!0,bannerType:dp.x1.WARN,icon:enD.A,mainText:(0,eN.t)("banner.desktop_app_deprecation.title"),description:t,button:{buttonText:(0,eN.t)("banner.desktop_app_deprecation.learn_more"),onClick:()=>tg.Ay.unsafeRedirect("https://figma.com/downloads","_blank")},dismissedAtom:enp.Pi}},enM=({state:e,dispatch:t,context:n})=>{var a,l,r,i;let o=null==(a=e.openFile)?void 0:a.teamId,s=o?e.teams[o]:null,c=o&&(0,mK.canEditTeam)(o,e),d=null==(l=e.openFile)?void 0:l.canEdit,u=s&&!(0,cw.n0)(s)&&!s.student_team&&(0,cw.oc)(s.id,e);if(u){let a=s.student_team_state===enx.kU.STUDENT_TEAM_CURRENT||s.student_team_state===enx.kU.STUDENT_TEAM_EXPIRED,l=!!(null==(r=n.lockedTeamInfo)?void 0:r.checkIfEligibleForLockedRedesign(u&&!a)),m=(0,ag.$A)(e.selectedView);if(l&&!d){let n=!!s.stripe_customer_id,a=(null==(i=e.openFile)?void 0:i.editorType)===a_._Y.WHITEBOARD?(0,eN.t)("locked_team.banner.this_board_is_part_of_a_locked_team"):(0,eN.t)("locked_team.banner.this_file_is_part_of_a_locked_team"),l=f.createElement("div",{style:dA.sx.add({marginLeft:"-32px"}).$},(0,eN.tx)(m?"locked_team.banner.all_of_this_teams_work_is_currently_view_only_dev_mode":"locked_team.banner.all_of_this_teams_work_is_currently_view_only",{learnMoreLink:c?f.createElement(f.Fragment,null,f.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),null==t||t(ty.to({type:enS.t,data:{teamId:o,canEditTeam:!0}}))}},(0,eN.tx)("locked_team.banner.learn_more"))):f.createElement(f.Fragment,null)})),r=n?(0,eN.t)("locked_team.banner.reactivate_professional"):(0,eN.t)("locked_team.banner.upgrade_to_professional");return{id:dp.om.StarterTeamOverFreeLimitAndLocked,bannerType:dp.x1.WARN_SOFT,icon:f.createElement(enm.s,null),mainText:a,description:l,button:c?{buttonText:r,onClick:()=>t(enb.WX({teamId:o,selectedView:e.selectedView})),className:enA.Vg}:void 0}}if(!l&&!m){let n;return n=c?f.createElement("span",null,f.createElement("b",{style:dA.sx.fontSemiBold.$},(0,eN.tx)("banner.free_limit_locked.team_locked_over_starter_limits",{teamName:s.name})," "),(0,eN.tx)("banner.free_limit_locked.upgrade_team_or_lower_usage",{teamName:s.name,learnMoreLink:f.createElement(f.Fragment,null,f.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),null==t||t(ty.to({type:enk.v,data:{teamId:o}}))}},(0,eN.tx)("banner.free_limit_locked.learn_more")))})):f.createElement("span",null,f.createElement("b",{style:dA.sx.fontSemiBold.$},(0,eN.tx)("banner.free_limit_locked.team_locked_over_starter_limits",{teamName:s.name}))," ",(0,eN.tx)("banner.free_limit_locked.ask_your_team_admin_for_details")),{id:dp.om.StarterTeamOverFreeLimitAndLocked,bannerType:dp.x1.WARN,icon:enD.A,mainText:(0,eN.t)("banner.free_limit_locked.locked"),description:n,button:c?{buttonText:(0,eN.t)("banner.free_limit_locked.upgrade_now"),onClick:()=>t(enb.WX({teamId:o,selectedView:e.selectedView})),className:enA.n3}:void 0}}}},enF=({state:e})=>{let t=e.mirror.appModel.multiplayerSessionState!==ei.kul.UNJOINED,n=!e.mirror.appModel.isReadOnly;if(e.showingUpgradeBanner)return{id:dp.om.MultiplayerSessionUpgrade,bannerType:dp.x1.INFO,icon:enD.A,mainText:(0,eN.t)("banner.multiplayer_session_upgrade.page_out_of_date"),description:t?(0,eN.t)("banner.multiplayer_session_upgrade.out_of_date.connected"):(0,eN.t)("banner.multiplayer_session_upgrade.out_of_date.not_connected"),button:{buttonText:n?(0,eN.t)("banner.multiplayer_session_upgrade.save_and_reload"):(0,eN.t)("banner.multiplayer_session_upgrade.reload"),onClick:()=>{(0,Z.sx)("Upgrade Banner Clicked"),ei.h3O.startUpgrade()}}}};function enB({hubFile:e}){return(0,eng._)(e)?(0,eN.tx)("banner.freemium_preview.this_is_just_a_preview"):(0,eN.tx)("banner.freemium_preview.get_the_full_file_on_community")}function enU({hubFile:e}){return(0,eng._)(e)?(0,eN.tx)("banner.freemium_preview.you_purchased_this_file_already"):(0,eN.tx)("banner.freemium_preview.this_is_just_a_preview_of_the_file_you_can_buy_on_community")}function enH({hubFile:e}){let t=(0,eng._)(e),n=t?"":`?${enC.Tb}`;return f.createElement(en_.A6,{to:`/community/file/${e.id}${n}`},f.createElement(a1.tM,{trackingProperties:{trackingDescriptor:t?ar.c.OPEN_IN_COMMUNITY:ar.c.BUY_THE_RESOURCE}},t?(0,eN.tx)("banner.freemium_preview.open_in_community"):(0,eN.tx)("banner.freemium_preview.buy_the_resource")))}let enG=[({})=>{let{deprecatedOn:e,...t}=enI,n=new Date(e);if(n>new Date(new Date().getTime()+24192e5)||!C.Ay.isUnsupportedBrowser(t))return;let a=n>new Date?(0,eN.t)("banner.browser_deprecation.description",{deprecationDate:n}):(0,eN.t)("banner.browser_deprecation.description_now");return{id:dp.om.BrowserDeprecationBanner,dismissible:!0,bannerType:dp.x1.WARN,icon:enD.A,mainText:(0,eN.t)("banner.browser_deprecation.title"),description:a,button:{buttonText:(0,eN.t)("banner.browser_deprecation.learn_more"),onClick:()=>tg.Ay.redirect("https://help.figma.com/hc/en-us/articles/360039827194-Figma-browser-requirements","_blank")}}},enR,enF,({state:e,dispatch:t})=>{let n=e.openFile,a=null==n?void 0:n.teamId,l=a?e.teams[a]:null,r=a&&(0,mK.canAdminTeam)(a,e);if(l&&l.subscription===a_.Qh.PAST_DUE)return{id:dp.om.ProTeamPastDue,bannerType:dp.x1.WARN,icon:enD.A,mainText:(0,eN.t)("banner.pro_team_past_due.locked"),description:r?(0,eN.t)("banner.pro_team_past_due.update_payment_source.can_admin",{teamName:l.name}):(0,eN.t)("banner.pro_team_past_due.update_payment_source.no_admin",{teamName:l.name}),button:r?{buttonText:(0,eN.t)("banner.pro_team_past_due.update_payment"),onClick:()=>{null==t||t(nI.$T({view:"teamAdminConsole",teamId:a,teamAdminConsoleViewTab:enT.I.SETTINGS}))}}:void 0}},({state:e,dispatch:t})=>{let n=e.openFile,a=null==n?void 0:n.teamId,l=a?e.teams[a]:null,r=a&&(0,mK.canAdminTeam)(a,e);if(l&&l.subscription===a_.Qh.GRACE_PERIOD)return{id:dp.om.ProTeamChargeFailed,bannerType:dp.x1.WARN,icon:enD.A,mainText:(0,eN.t)("banner.pro_team_charge_failed.payment_failed"),description:r?(0,eN.t)("banner.pro_team_charge_failed.unsuccessful_team_charge.can_admin",{teamName:l.name}):(0,eN.t)("banner.pro_team_charge_failed.unsuccessful_team_charge.no_admin",{teamName:l.name}),button:r?{buttonText:(0,eN.t)("banner.pro_team_charge_failed.update_payment"),onClick:()=>{null==t||t(nI.$T({view:"teamAdminConsole",teamId:a,teamAdminConsoleViewTab:enT.I.SETTINGS}))}}:void 0,dismissible:!0}},({state:e,dispatch:t})=>{let n=e.openFile,a=null==n?void 0:n.teamId,l=a?e.teams[a]:null,r=a&&(0,mK.canAdminTeam)(a,e);if(l&&l.subscription===a_.Qh.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED){let e=r?f.createElement("span",null,(0,eN.tx)("banner.pro_team_no_monthly_sub.over_limit_as_admin.seat_rename",{contactSupportLink:f.createElement("a",{href:`mailto:${(0,y.W4)()}`},(0,eN.tx)("banner.pro_team_no_monthly_sub.contact_support"))})):f.createElement("span",null,(0,eN.tx)("banner.pro_team_no_monthly_sub.over_team_limit_without_admin.seat_rename",{teamName:l.name}));return{id:dp.om.ProTeamNoMonthlySubEditorCountExceeded,bannerType:dp.x1.WARN,icon:enD.A,mainText:(0,eN.t)("banner.pro_team_no_monthly_sub.locked"),description:e,button:r?{buttonText:(0,eN.t)("banner.pro_team_no_monthly_sub.manage_plan"),onClick:()=>{null==t||t(nI.$T({view:"teamAdminConsole",teamId:a,teamAdminConsoleViewTab:enT.I.SETTINGS}))}}:void 0}}},({state:e,dispatch:t})=>{var n;let a=e.openFile,l=null==a?void 0:a.teamId,r=l?e.teams[l]:null;if(!r||!a)return;let i=(0,mK.canEditTeam)(r.id,e),o=(0,cw.oc)(r.id,e),s=enw.ng.canSeeExpiredProTrialBanner(e.userTeamFlags,r,e),c=null==(n=e.userTeamFlags[r.id])?void 0:n[enw.lg];if(s&&(o||i&&!c)){let n,l,s;return o?(s=dp.x1.WARN_SOFT,n=i?(0,eN.tx)("banner.pro_trial_expiry.locked_description",{lowerUsageLink:f.createElement("button",{onClick:e=>{e.preventDefault(),null==t||t(ty.to({type:enk.v,data:{teamId:r.id}}))}},(0,eN.tx)("banner.pro_trial_expiry.lower_usage")),upgradeLink:f.createElement(Y.$z,{onClick:n=>{n.preventDefault(),t(enb.WX({teamId:r.id,selectedView:e.selectedView}))}},(0,eN.tx)("banner.pro_trial_expiry.upgrade"))}):(0,eN.tx)("banner.pro_trial_expiry.locked_description_for_viewer_on_team",{teamName:r.name}),l={buttonText:(0,eN.t)("banner.pro_trial_expiry.move_this_file_cta"),onClick:()=>(0,enN.h)({key:a.key,name:a.name,folder_id:a.folderId,team_id:a.teamId,editor_type:a.editorType,parent_org_id:a.parentOrgId},null,t)}):(s=dp.x1.INFO,n=(0,eN.tx)("banner.pro_trial_expiry.expiry_description",{teamName:r.name}),l={buttonText:(0,eN.t)("banner.pro_trial_upgrade_cta.upgrade_to_professional"),onClick:()=>t(enb.WX({teamId:r.id,selectedView:e.selectedView}))}),{id:dp.om.ProTrialsExpiryBanner,bannerType:s,icon:enD.A,mainText:(0,eN.t)("banner.pro_trial_expiry.title"),dismissible:!o,onDismiss:o?void 0:()=>{t(b2.bE({all_team_flags:[{team_id:r.id,flags:{[enw.lg]:!0}}]}))},description:n,button:i?l:void 0}}},enM,({state:e,dispatch:t})=>{var n;if((0,TT.R$)(e.user,e.currentUserOrgId)){let a=e.orgById[e.user.external_restricted_org_id].name,l=e.openFile,r=!!l&&(null==(n=e.fileByKey[l.key])?void 0:n.viewer_export_restricted);if(a)return{id:dp.om.ExternalContentControlBanner,bannerType:dp.x1.WARN,icon:enD.A,mainText:(0,eN.tx)("external_collaboration_restricted.banner.title"),description:(0,eN.tx)("external_collaboration_restricted.banner.restriction_description",{organizationName:a}),button:r?void 0:{buttonText:(0,eN.t)("external_collaboration_restricted.banner.export_file"),onClick:()=>{(null==l?void 0:l.editorType)==="design"?t(K.u1({id:nz.C9})):t(K.TB({selectionArea:0,canvasArea:0,nodeCounts:{selectionNodeCount:0,canvasNodeCount:0,selectionStickyCount:0,canvasStickyCount:0,selectionTableCount:0,canvasTableCount:0}}))}},dismissible:!1}}},({state:e,dispatch:t})=>{let n=e.openFile;if(e.currentUserOrgId&&(null==n?void 0:n.project)&&(0,L0.n3)(n.project))return{id:dp.om.OrphanedOrgDraftsFile,bannerType:dp.x1.WARN,icon:enD.A,mainText:(0,eN.t)("banner.orphaned_projects.file_in_an_abandoned_project"),description:(0,eN.t)("banner.orphaned_projects.move_to_project"),button:{buttonText:(0,eN.t)("banner.orphaned_projects.back_to_files"),onClick:()=>null==t?void 0:t(nI.$T({view:"recentFiles"}))}}},({state:e,dispatch:t})=>{let n=e.openFile,a=null==n?void 0:n.teamId,l=a?e.teams[a]:null;if(!(e.currentUserOrgId&&(null==n?void 0:n.project)&&(0,L0.n3)(n.project))&&!l&&n&&(0,cw.f4)(n.folderId,n.teamId,e))return{id:dp.om.PersonalProjectDeprecatedFile,bannerType:dp.x1.WARN,icon:enD.A,mainText:(0,eN.t)("banner.personal_projects.locked"),description:f.createElement(f.Fragment,null,(0,eN.tx)("banner.personal_projects.deprecation_message",{learnMoreLink:f.createElement("a",{href:"/pricing-faq#what-changes-for-me"},(0,eN.tx)("banner.personal_projects.learn_more"))})),button:{buttonText:(0,eN.t)("banner.personal_projects.back_to_files"),onClick:()=>null==t?void 0:t(nI.$T({view:"recentFiles"}))}}},({state:e,context:t})=>{var n,a;let l=e.openFile,r=null==(n=e.openFile)?void 0:n.teamId,i=r?e.teams[r]:null;if(r&&e.user&&i&&!(null==(a=t.workshopInfo)?void 0:a.enabled)&&(null==l?void 0:l.canEditIgnoreEduGracePeriod)&&e.teams[r]&&(0,enf.GU)(e.userEduGracePeriods,(0,enf.cn)(e.user),r,!!e.teams[r].student_team).showAccessRestricted)return{id:dp.om.EduGracePeriodAccessRestricted,bannerType:dp.x1.WARN,icon:enD.A,mainText:(0,eN.t)("banner.edu_grace_period.verification_required"),description:(0,eN.t)("banner.edu_grace_period.editing_restricted_on_file",{teamName:i.name}),button:{buttonText:(0,eN.t)("banner.edu_grace_period.verify_status_button"),onClick:()=>tg.Ay.redirect("/education/apply","_blank")}}},({state:e,context:t})=>{var n,a;let l=e.openFile,r=null==(n=e.openFile)?void 0:n.teamId,i=r?e.teams[r]:null;if(r&&e.user){let n=i&&!(null==(a=t.workshopInfo)?void 0:a.enabled)&&(null==l?void 0:l.canEditIgnoreEduGracePeriod)&&e.teams[r]&&(0,enf.GU)(e.userEduGracePeriods,(0,enf.cn)(e.user),r,!!e.teams[r].student_team).showReminder,o=(0,enf.zR)(e.userEduGracePeriods,r);if(n)return{id:dp.om.EduGracePeriodShowReminder,bannerType:dp.x1.INFO,icon:enL.A,mainText:(0,eN.t)("banner.edu_grace_period.verification_required"),description:(0,eN.t)("banner.edu_grace_period.grace_period_team_reminder",{teamName:i.name,endDate:o}),dismissible:!0,button:{buttonText:(0,eN.t)("banner.edu_grace_period.verify_status_button"),onClick:()=>tg.Ay.redirect("/education/apply","_blank")}}}},({state:e,dispatch:t,context:n})=>{let a=e.openFile,l=n.workshopInfo,r=e.user;if(!(null==l?void 0:l.enabled)||!a||!r)return;let i=!a.isTryFile&&!a.parentOrgId&&a.folderId===r.drafts_folder_id,o=e.userFlags.dismissed_figjam_try_drafts_banner;if(i&&!o){let e=(0,cF.A)(),n=Math.ceil((0,cF.A)(l.until).diff(e,"hours",!0));return{id:dp.om.FigJamTryDraftsBanner,bannerType:dp.x1.INFO,icon:enL.A,mainText:n>1?(0,eN.t)("figjam_try.drafts_banner_title_more_time",{num_hours:n}):(0,eN.t)("figjam_try.drafts_banner_title_1_hour_or_less"),description:(0,eN.t)("figjam_try.drafts_banner_description"),onDismiss:()=>null==t?void 0:t(j.b({dismissed_figjam_try_drafts_banner:!0})),dismissible:!0,button:{buttonText:(0,eN.t)("figjam_try.move_file"),onClick:()=>(0,enN.h)({key:a.key,name:a.name,folder_id:a.folderId,team_id:a.teamId,editor_type:a.editorType,parent_org_id:a.parentOrgId},null,t)}}}},({state:e,dispatch:t,context:n})=>{let a=e.openFile,l=n.workshopInfo,r=e.user,i=null==a?void 0:a.key,o=!!(null==a?void 0:a.isTryFile),s=e.userFlags.dismissed_figjam_try_claim_banner;if(!o||C.Ay.isMeetDevice||!r||!(null==l?void 0:l.enabled)||!i||s)return;let c=(0,cF.A)(),d=Math.ceil((0,cF.A)(l.until).diff(c,"hours",!0)),u=()=>{t(tv.Q({file_key:i}))};return{id:dp.om.FigJamTryClaimBanner,bannerType:dp.x1.INFO,icon:enL.A,mainText:d>1?(0,eN.t)("figjam_try_v2.timer_hours_left",{hoursLeft:d}):(0,eN.t)("figjam_try.claim_banner_title_1_hour_or_less"),description:(0,eN.t)("figjam_try_v2.logged_in.after_that_this_board_will_be_deleted"),onDismiss:()=>null==t?void 0:t(j.b({dismissed_figjam_try_claim_banner:!0})),dismissible:!0,button:{buttonText:(0,eN.t)("figjam_try_v2.claim_file_logged_in"),onClick:()=>u()}}},({state:{openFile:e,figFileDuplicatedFromHubFile:t,hubFiles:n}})=>{if(!e)return;let a=t[e.key];if(!a||!a.isPreview)return;let l=n[a.hubFileId];if(l&&l.monetized_resource_metadata)return{id:dp.om.FreemiumPreviewBanner,bannerType:dp.x1.INFO,icon:enL.A,dismissible:!1,mainText:f.createElement(enB,{hubFile:l}),description:f.createElement(enU,{hubFile:l}),button:{type:dp.MA.CUSTOM,element:f.createElement(enH,{hubFile:l})}}},({state:e,dispatch:t})=>{let n=e.userFlags.dismissed_desktop_download_banner_prompt;if("fullscreen"===e.selectedView.view&&!n&&!em.eD&&(0,y.kc)().desktop_download_banner_prompt)return{id:dp.om.DesktopDownloadBanner,bannerType:dp.x1.INFO,icon:enP.A,mainText:(0,eN.t)("banner.desktop_download_title"),description:(0,eN.t)("banner.desktop_download_description"),button:{buttonText:(0,eN.t)("banner.desktop_download_button"),onClick:()=>{tg.Ay.redirect(`/download/desktop/${C.Ay.mac?"mac":"win"}`,"_blank")}},dismissible:!0,onDismiss:()=>null==t?void 0:t(j.b({dismissed_desktop_download_banner_prompt:!0}))}}],enV=[enR,enM,enF,({state:e,context:t})=>{var n,a;let l=(0,Ce.P)(e),r=(0,a9.ZT)(e);if((0,ag.$A)(e.selectedView)&&(null==(n=t.devModeInfo)||!n.canAccessDevMode)&&(null==(a=t.devModeInfo)||!a.shouldSeeBlockingModal))return{id:dp.om.DevModePaywallBanner,bannerType:dp.x1.INFO,dismissible:!1,mainText:f.createElement(env,null),icon:enO.A,button:{type:dp.MA.CUSTOM,element:f.createElement(enE,null)},dataTestId:"dev-mode-paywall-banner",additionalTrackingProperties:{currentPlan:l,teamId:r}}},({state:e,dispatch:t,context:n})=>{var a,l;if((0,ag.$A)(e.selectedView)&&(null==(a=n.devModeInfo)?void 0:a.isInTrial)&&!e.userFlags.dev_mode_has_dismissed_in_trial_banner&&(null==(l=n.devModeInfo)||!l.shouldSeeBlockingModal))return{id:dp.om.DevModeInTrialBanner,bannerType:dp.x1.INFO,dismissible:!0,onDismiss:()=>null==t?void 0:t(j.b({dev_mode_has_dismissed_in_trial_banner:!0})),mainText:f.createElement(eny,null),icon:enO.A,dataTestId:"dev-mode-trial-banner"}}],enK=[({state:e})=>{if(e.showingFileCreationFailureBanner)return{id:dp.om.FileCreationFailureBanner,bannerType:dp.x1.WARN,dismissible:!1,mainText:(0,eN.tx)("banner.file_creation_failure.title"),description:(0,eN.tx)("banner.file_creation_failure.description")}}];function enW(e,t){for(let n of t){let t=n(e);if(t)return t}}function enz(e){let t=function(e){let t=(0,_.d4)(e=>e),[n,a]=(0,f.useState)(t),l=(0,_.wA)(),r=(0,tC.nF)(),i=(0,Au.Mk)(),o=function(){var e,t;let n=(0,af.tS)()??"",a=(0,eW.Rs)(eJ.oBY,{key:n});return{canAccessDevMode:(0,U._I)(),isInTrial:!!(null==(t=null==(e=a.data)?void 0:e.file)?void 0:t.hasPermission),shouldSeeBlockingModal:(0,al.m3)()}}(),s=(0,n3.Yz)(),c=(0,enu.A)((0,f.useCallback)(e=>{a(e)},[]),1e3,{leading:!0,trailing:!0});(0,f.useEffect)(()=>{c(t)},[t,c]),(0,f.useEffect)(()=>()=>c.cancel(),[c]);let d=(0,f.useRef)(),u=(0,f.useMemo)(()=>{let t=function(e,t,n){let{openFile:a}=n;if(!a)return enW({state:e,dispatch:t,context:n},enK);let l=a.teamId,r=l?e.teams[l]:null;if(!l||r)return enW({state:e,dispatch:t,context:n},(0,ag.$A)(e.selectedView)?enV:enG)}(n,l,{...e,devModeInfo:o,lockedTeamInfo:{checkIfEligibleForLockedRedesign:s},memoryUsageInfo:i,workshopInfo:r}),a=d.current;return(null==t?void 0:t.id)!==(null==a?void 0:a.id)||(null==t?void 0:t.mainText)!==(null==a?void 0:a.mainText)?t:a},[n,s,e,o,l,i,r]);return d.current=u,u}(e.context),n=(0,_.d4)(e=>e.mirror.appModel.showUi),[a,l]=(0,f.useState)(n&&!!t),r=(null==t?void 0:t.additionalTrackingProperties)||{},i=null==t?void 0:t.id;f.useEffect(()=>{l(n&&!!i)},[n,i]);let o=(0,Q.lg)(),s=(0,ag.ks)();if(!a||!t)return f.createElement(f.Fragment,null);let c={bannerId:dp.om[t.id],bannerType:t.bannerType,bannerLocation:e.context.location,...r};return f.createElement(Y.fu,{name:"TopBanner",properties:c},f.createElement(dm.C,{key:t.id,content:t,onDismiss:()=>l(!1),editorType:s?eq.nT.DevHandoff:(0,eq.wN)(o),dataTestId:t.dataTestId}))}(0,y.b5)()&&enG.push(({state:e})=>{var t;if((null==(t=e.openFile)?void 0:t._name)==="_BANNERTEST PAYMENT")return{id:dp.om.TestWarningBanner,bannerType:dp.x1.WARN,icon:enD.A,mainText:"Payment failed",description:"Our last attempted charge was unsuccessful. Please update your payment source as soon as possible. File editing will be locked after 3 more failed attempts.",button:{buttonText:"Update payment",onClick:()=>{}},dismissible:!0}},({state:e})=>{var t;if((null==(t=e.openFile)?void 0:t._name)==="_BANNERTEST OOM")return{id:dp.om.TestOOMBanner,bannerType:dp.x1.WARN,icon:enD.A,mainText:"80% of memory used",customElem:f.createElement("div",{className:enA.DB},f.createElement(P9,{memoryUsagePercent:80})),description:f.createElement(f.Fragment,null,f.createElement("b",{style:dA.sx.fontSemiBold.$},"This file is almost out of browser memory.")," Remove content to lower memory use to 50% or less. This will ensure you can continue to work in this file safely."),button:{buttonText:"Show memory-reduction tips",onClick:()=>{}}}},({state:e})=>{var t;if((null==(t=e.openFile)?void 0:t._name)==="_BANNERTEST EDU")return{id:dp.om.TestInfoBanner,bannerType:dp.x1.INFO,icon:enL.A,mainText:"File in Education Team",description:"This file is in an Education team. To keep editing this file after 00/00, verify that you're a student or educator.",button:{buttonText:"Verify status",onClick:()=>tg.Ay.redirect("/education/apply","_blank")}}});var enj=n(287928);function enJ(){var e;let t=Array.from((0,aN.J2)(null==(e=ei.Ez5)?void 0:e.uiState().autoLayoutShortcutHints).values()),n=(0,S.md)(aj.Bu),a=dE.y.isApple(),l=e=>{switch(e){case ei.oeV.IGNORE_AUTOLAYOUT:return{displayName:(0,eN.t)("fullscreen.auto_layout_hints.ignore_auto_layout"),shortcutText:a?"\u2303 Ctrl":"S"};case ei.oeV.PREVENT_NESTING:return{displayName:(0,eN.t)("fullscreen.auto_layout_hints.prevent_nesting"),shortcutText:(0,eN.t)("fullscreen.auto_layout_hints.space_key")};case ei.oeV.FORCE_INSERTION:return{displayName:(0,eN.t)("fullscreen.auto_layout_hints.force_insertion"),shortcutText:a?"\u2318":"Ctrl"}}},r=e=>e.isValid?e.isActive?"auto_layout_hints--activeShortcutWithTextContainer--dkT1S auto_layout_hints--shortcutWithTextContainer--uEquz":"auto_layout_hints--shortcutWithTextContainer--uEquz":"auto_layout_hints--invalidShortcutWithTextContainer--gvHLT auto_layout_hints--shortcutWithTextContainer--uEquz";return t?f.createElement("div",{className:nb()("auto_layout_hints--root--MJKU2",{"auto_layout_hints--rootAdjustedForQA--YZlbt":n})},f.createElement("div",{className:"auto_layout_hints--hintsBarContainer--3DyGD"},t.sort((e,t)=>e.shortcut-t.shortcut).map((e,t)=>{let n=l(e.shortcut);return f.createElement("div",{className:r(e),key:t},f.createElement("div",{className:e.isActive&&e.isValid?"auto_layout_hints--activeShortcutContainer--bj0CD auto_layout_hints--shortcutContainer--mIecl":"auto_layout_hints--shortcutContainer--mIecl"},n.shortcutText.length>0?f.createElement("div",{className:"auto_layout_hints--smallShortcutText--lHZ8Q utilities--bodySmall--JyKR1"},n.shortcutText):f.createElement(nw.S,{shortcut:n.shortcutText})),f.createElement("p",null,n.displayName))}))):null}var enY=n(908225),enX=n(915914),enq=n(407909);let enZ=(0,f.memo)(function(){var e;let t=(0,_.wA)(),n=(0,eb.aV)(),a=(0,cu.kD)(),l=(0,uI.b4)(),r=(0,af.q5)(),i=(0,du.hC)(),o=(0,cu.ac)(),s=(0,uv.Td)(),c=(0,Q.lg)(),d=(0,tu.sO)(),u=(0,ew.iZ)(),m=(null==u?void 0:u.id)&&a&&a.publishedByUserId===u.id,p=(0,cu.J3)();if(!i||n||!a||s||null===o)return null;let g=o&&p===cu.kN.CAN_PUBLISH,h={type:dp.MA.STRUCTURED,onClick:()=>{a&&r&&l({templateIdentifier:{type:EI.vt.TeamTemplate,file_key:a.fileKey},templateName:a.name})},trackingDescriptor:ar.c.USE_IN_NEW_FILE,buttonText:d?(0,eN.t)("slides.templates.banner.new_deck_button"):(0,eN.t)("whiteboard.delightful_toolbar.custom_template_banner.new_file_button")};if(g){if(!m)return f.createElement(dm.C,{onDismiss:nf.lQ,editorType:(0,eq.wN)(c),content:{id:dp.om.FileIsTeamTemplate,bannerType:dp.x1.INFO,icon:enq.A,mainText:(0,eN.t)("templates.banner.republish.primary_text"),description:(0,eN.t)("templates.banner.republish.secondary_text_not_owner"),button:h}});let e={type:dp.MA.STRUCTURED,onClick:()=>{(0,enY.Y)(t,a.fileKey,c,"editor-republish-banner")},trackingDescriptor:ar.c.PUBLISH_CHANGES,buttonText:(0,eN.t)("templates.banner.republish.republish_action")};return f.createElement(dm.C,{onDismiss:nf.lQ,editorType:(0,eq.wN)(c),content:{id:dp.om.FileIsTeamTemplate,bannerType:dp.x1.INFO,icon:enq.A,mainText:(0,eN.t)("templates.banner.republish.primary_text"),description:(0,eN.t)("templates.banner.republish.secondary_text"),button:e}})}let E=(null==(e=a.publishedByUser)?void 0:e.handle)?(0,eN.tx)("templates.banner.republish.you_re_viewing_a_template_made_by_publisher_name",{madeByPublisherName:f.createElement("span",{className:a8.cx.fontNormal.$},m?(0,eN.tx)("templates.banner.made_by_you"):(0,eN.tx)("templates.banner.republish.made_by_publisher_name",{publisherName:a.publishedByUser.handle}))}):(0,eN.t)("templates.banner.republish.you_re_viewing_a_template");return f.createElement(dm.C,{onDismiss:nf.lQ,editorType:(0,eq.wN)(c),content:{id:dp.om.FileIsTeamTemplate,bannerType:dp.x1.INFO,icon:enX.A,mainText:E,button:h}})});var enQ=n(747396);function en$({children:e}){let t=(0,_.d4)(e=>{var t;return(null==(t=e.universalInsertModal)?void 0:t.pinned)===r8.t.PINNED_AND_DOCKED_LEFT}),n=(0,n6.GS)(),a=(0,_.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),l=n&&a,r=(0,tM.qw)(),i=f.useMemo(()=>[EW.mW.RESOLVED,EW.mW.YOURS,EW.mW.CURRENT_PAGE],[]),o=f.useMemo(()=>[EW.qN.CREATION_DATE,EW.qN.UNREAD],[]),{xDelta:s,yDelta:c}=(0,Ej.m)(),d=f.useMemo(()=>{let e=(0,lf.hG)(lw.PXB),n=s;return t&&(n+=ia.AN+e),{xDelta:n,yDelta:c}},[t,c,s]),u=f.useMemo(()=>{let e=(0,lf.jz)(lw.LdP),t=0,n=0;return l&&(t+=e,n+=r),{maxHeightDelta:0,minBottomMarginDelta:t,minLeftMarginDelta:0,minRightMarginDelta:n}},[r,l]),m=f.useMemo(()=>{if(l)return{paddingRight:r}},[r,l]),p=f.useMemo(()=>({...Ej.y,sidebarFilters:i,sidebarSorts:o,dockPositionAdjustment:d,draggableModalBoundsAdjustment:u,commentPositionPaddingAdjustment:m}),[i,o,m,d,u]);return f.createElement(Ez.a.Provider,{value:p},e)}let en0={isDevHandoff:!0};function en1({children:e}){let t="ui3"===(0,h.DP)().version,n=(0,_.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.showUi}),a=t&&n,l=(0,tR.hA)(),r=(0,_.d4)(e=>e.mirror.appModel.currentPage),i=f.useContext(fP.kw),o=(0,tM.UX)(),s=(0,lf.jz)(lw.ZB$),c=f.useMemo(()=>[EW.mW.RESOLVED,EW.mW.YOURS,EW.mW.CURRENT_PAGE],[]),d=f.useMemo(()=>[EW.qN.CREATION_DATE,EW.qN.UNREAD],[]),u=(0,Ej.m)(),m=f.useMemo(()=>{let e=0,t=0;return a&&(e+=s,t+=o),{maxHeightDelta:0,minBottomMarginDelta:e,minLeftMarginDelta:0,minRightMarginDelta:t}},[s,o,a]),p=f.useMemo(()=>{if(a)return{paddingRight:o}},[o,a]),g=f.useCallback(e=>{var t;if(!l)return!1;let n=e&&r?null==(t=i.getCommentDestinationForCanvasPosition(e,r))?void 0:t.nodeId:void 0;return!n||!(0,ey.rV)(lE.q.instance,l,n)},[r,i,l]),E=f.useMemo(()=>{let e={...Ej.y,sidebarFilters:c,sidebarSorts:d,dockPositionAdjustment:u,draggableModalBoundsAdjustment:m,commentPositionPaddingAdjustment:p,linkGenerationParams:en0,isCommentingDisabledAtPosition:g,commentDisabledPositionBellMessage:(0,eN.t)("dev_handoff.workflows.focus_view.comments")};return l&&(e.filterBy="non_dev_mode_focus"),e},[c,d,u,m,p,g,l]);return f.createElement(Ez.a.Provider,{value:E},e)}var en2=n(228131);let en5={isFigJam:!0};function en4({children:e}){let t=(0,EG.Vi)(),n=(0,n6.GS)(),a=(0,_.d4)(e=>{var t;return(null==(t=e.universalInsertModal)?void 0:t.pinned)===r8.t.PINNED_AND_DOCKED_LEFT}),l=f.useMemo(()=>[EW.mW.RESOLVED,EW.mW.YOURS],[]),r=f.useMemo(()=>[EW.qN.CREATION_DATE,EW.qN.UNREAD],[]),i=(0,Ej.m)(),{xDelta:o,yDelta:s}=f.useMemo(()=>{if(n)return i;let e=(0,lf.jz)(lw.PXB),t=0;return a&&(t+=ax.gR+e),{xDelta:t,yDelta:0}},[a,n,i]),c=f.useMemo(()=>({xDelta:o,yDelta:s}),[o,s]),d=f.useMemo(()=>208,[]),u=f.useMemo(()=>{let e=new Map;return e.set(en2.b.DOCK_STYLE,ii._V),e.set(en2.b.ATTACHMENT_MODAL_BACKGROUND_COLOR,(0,hu.Bx)("light")),e},[]),m=f.useMemo(()=>{let e;let a=n?(0,lf.jz)(lw.LQy):(0,lf.jz)(lw.IuL),l=(0,lf.jz)(lw.rY4),r=0,i=0;return e=0-a,r+=a,t&&(i+=l),{maxHeightDelta:e,minBottomMarginDelta:r,minLeftMarginDelta:0,minRightMarginDelta:i}},[t,n]),p=f.useCallback(()=>{(0,JS.W)("left",()=>{})},[]),g=f.useMemo(()=>({showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,clusterBy:"page",orphanedBy:"deleted_pages",filterBy:"hidden_sections",sidebarFilters:l,sidebarSorts:r,dockPositionAdjustment:c,draggableModalBoundsAdjustment:m,onDockSideEffect:p,sidebarBottomPaddingAdjustment:d,styleOverrideMap:u,linkGenerationParams:en5}),[c,m,p,d,l,r,u]);return f.createElement(Ez.a.Provider,{value:g},e)}function en3({children:e}){let t=(0,_.d4)(e=>e.selectedView.editorType),n=f.useMemo(()=>{if(window.FigmaMobile)return t===eq.nT.Whiteboard?function({children:e}){return f.createElement(Ez.a.Provider,{value:enQ.Wo},e)}:function({children:e}){return f.createElement(Ez.a.Provider,{value:enQ.In},e)};switch(t){case eq.nT.Design:return en$;case eq.nT.Whiteboard:return en4;case eq.nT.Slides:return EX;case eq.nT.DevHandoff:return en1;default:return function({children:e}){return f.createElement(Ez.a.Provider,{value:Ej.y},e)}}},[t]);return f.createElement(n,null,e)}var en6=n(859703);let en7="eyedropper_v2--text--dOiTx",en8="eyedropper_v2--rowContents--dv3nr",en9="eyedropper_v2--chit--1D1ND",eae=(0,lf.jz)(lw.k22),eat=(0,lf.jz)(lw.ZAq),ean=f.createElement(nw.S,{shortcut:"shift"});function eaa({eyedropper:e,canvasRef:t,underlyingStyle:n,underlyingVariable:a}){let l;let[r,i]=f.useState(!1),o=f.useRef(null),s=(0,lb._X)({subscribeToUpdates_expensive:!0}),c=(0,EO.Ye)(),d=(0,Ij.Pg)(),{left:u,right:m}=(0,sd.LO)(),p=(0,tM.Ku)(),_=(0,hu.H0)(e.color)??hu.UE,g=(0,hu.H0)(e.resolvedVariableColor)??hu.UE,h=e.color,E="";n?(E=n.name,l=f.createElement("div",null,f.createElement("div",{className:"eyedropper_v2--styleCircle--rLPqT"}),f.createElement(IS.zi,{dsStyle:n,disableOutline:!0,disableTooltip:!0}))):a&&(E=a.name,l=f.createElement(IT.J,{className:en9,color:g,hideBorderShadow:!0})),p===ei.NVY.CSS?h=ei.NVY[ei.NVY.RGB]+" "+h:p!==ei.NVY.HEX&&(h=ei.NVY[p]+" "+h);let v=n||a?[ean]:[];return f.useEffect(()=>{let e=e=>{e.shiftKey&&i(!0)},t=e=>{e.shiftKey||"Shift"!==e.key||i(!1)},n=e=>{if(!o.current)return;let t={top:(0,dm.J)(),left:c?0:u,right:s.width-m,bottom:s.height-d-eat-8},n=e.clientX+13;e.clientX<t.left?n=t.left+13:e.clientX>t.right&&(n=e.clientX-eae-4);let a=e.clientY+14;e.clientY>t.bottom&&(a=Math.min(t.bottom,e.clientY-d-24)),o.current.style.transform=`translate(${n}px, ${a}px)`,o.current.style.visibility="visible"},a=()=>{o.current&&(o.current.style.visibility="hidden")};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),window.addEventListener("pointermove",n),window.addEventListener("pointerout",a),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t),window.removeEventListener("pointermove",n),window.removeEventListener("pointerout",a)}},[c,u,m,d,s.height,s.width]),f.createElement("div",{className:nb()("eyedropper_v2--eyedropperv2----W5m"),ref:o},f.createElement("div",{className:nb()("eyedropper_v2--loupeSamplingSquare--mt9xT")}),f.createElement("canvas",{ref:t}),f.createElement("div",null,f.createElement(eal,{icon:f.createElement(IT.J,{className:en9,color:_,hideBorderShadow:!0}),text:h,keyBadges:[],isSelected:!r}),f.createElement(eal,{icon:l,text:E,keyBadges:v,isSelected:r})))}function eal({icon:e,text:t,keyBadges:n,isSelected:a}){return f.createElement("div",{className:nb()("eyedropper_v2--menuRow--IGEss",a&&"eyedropper_v2--selectedRow--GlyoK")},f.createElement("div",{className:en8},f.createElement("div",{className:"eyedropper_v2--iconContainer--TVZ5N"},e),f.createElement("div",{className:en7},t)),f.createElement("div",{className:en8},n&&n.map((e,t)=>f.createElement("div",{className:nb()(en7,"eyedropper_v2--keyBadges--iTf8r"),key:t},e))))}let ear="eyedropper_view--label--PsjGr",eai="rgba(0, 0, 0, 0.1)";function eao(){let e=(0,_.d4)(e=>e.eyedropper),t=(0,_.d4)(e=>e.library.local.styles),n=(0,S.md)(en6.Cg),a=(0,_.d4)(e=>e.library.used__LIVEGRAPH.styles),l=(0,eb.p8)("showUi"),r=(0,SR.lz)(),i=(0,ag.ks)(),o=(0,Q.ow)(),s=(0,n6.GS)(),c=(0,y.kc)().ds_library_eye_dropper&&s,d=(0,tM.qw)(),u=document.createElement("canvas"),m=u.getContext("2d"),p=f.useRef(null),g={},h=c?7:17,E=c?7:10,v=c?48:h*E,b=v/2;if(f.useLayoutEffect(()=>{p.current&&N(p.current)}),!e)return null;let C=((0,y.kc)().ds_style_eye_dropper||c)&&(()=>{let l=e.assetId,r=e.variableSetModeId;if(""===l)return null;let i=null,o=null;if(LH.PK.isValid(l)?!(i=LH.PK.toGuidStrIfLocal(l))&&(o=LH.PK.toRefIfSubscribed(l))&&(i=LH.PK.fromRef(o)):LH.sD.isValid(l)&&(i=LH.sD.toString(l)),!i)return null;if(i in g)return g[i];if(i in t){let e={style:t[i]};return g[i]=e,e}if(i in n){let e={variable:n[i],variableModeId:r};return g[i]=e,e}if(o){let e=(0,xW.yh)(o.key,a,{}),t=null;return e&&(t={style:e},g[i]=t),t}let s=ei.CWU.getSubscribedVariableInfo(i);if(s){let e={variable:(0,Sd.ZI)(s),variableModeId:r};return g[i]=e,e}return null})(),w=t=>{t.save();{c?t.roundRect(0,0,48,48,5):t.arc(b,b,b-2,0,2*Math.PI,!1),t.clip();let{width:n,height:a,rgba:l,grid:r}=e;if(m){let e=m.createImageData(n,a);e.data.set(l),u.width=n,u.height=a,m.putImageData(e,0,0),t.imageSmoothingEnabled=!1,t.drawImage(u,0,0,v,v)}if(r){t.beginPath();let e=c?1:0,n=c?-.5:.5;for(let a=1;a<h;a++)n+=E,t.moveTo(n,e),t.lineTo(n,v-e),t.moveTo(e,n),t.lineTo(v-e,n);t.strokeStyle=c?eai:"rgba(51, 51, 51, 0.2)",t.stroke()}}t.restore()},T=e=>{c||(e.strokeStyle="white",e.strokeRect(b-E/2-.5,b-E/2-.5,E+2,E+2),e.strokeStyle="black",e.strokeRect(b-E/2+.5,b-E/2+.5,E,E))},x=e=>{if(c){e.beginPath(),e.roundRect(.5,.5,47,47,5),e.strokeStyle=eai,e.stroke();return}e.beginPath(),e.arc(b,b,b-1,0,2*Math.PI,!1),e.strokeStyle="white",e.stroke(),e.beginPath(),e.arc(b,b,b-2,0,2*Math.PI,!1),e.strokeStyle="black",e.stroke()},N=e=>{let t=e.getContext("2d");if(!t)return;let n=devicePixelRatio;e.width=v*n,e.height=v*n,t.scale(n,n),w(t),T(t),x(t)},k=l&&!o?s?i?r+(0,lf.jz)(lw.ms_):d+(0,lf.jz)(lw.ms_):i?r:(0,lf.jz)(lw.uj0):0;return c?f.createElement(eaa,{eyedropper:e,canvasRef:p,underlyingStyle:C&&(null==C?void 0:C.style)?C.style:void 0,underlyingVariable:C&&(null==C?void 0:C.variable)?C.variable:void 0}):f.createElement("div",{className:nb()({"eyedropper_view--container--Qpjgx":!0,"eyedropper_view--topToolbarShown--Aoby4":l,"eyedropper_view--topToolbarHidden--Auk7e":!l}),style:{width:v,height:v,right:(0,lf.jz)(lw.ms_)+k}},f.createElement("canvas",{ref:p}),(0,y.kc)().ds_style_eye_dropper?f.createElement("div",{className:ear,style:{left:3*E,right:3*E,top:2*b+E,lineHeight:1.5*E+"px",borderRadius:E/2,padding:E/2+"px"}},(()=>{if(C){if(C.style)return C.style.name;if(C.variable)return C.variable.name}return e.color})()):f.createElement("div",{className:ear,style:{left:3*E,right:3*E,top:b+4*E,lineHeight:2*E+"px",borderRadius:E}},e.color))}var eas=n(28928),eac=n(959232),ead=n(585878);let eau="figjam_export_pickers--selectRow--aTA0S figjam_export_pickers--row--iT7Hm",eam="figjam_export_pickers--label--a71ES",eap="figjam_export_pickers--dropdownPlaceholderText--JNOu2 ellipsis--ellipsis--Tjyfa",eaf="figjam_export_pickers--backgroundTypeIcon--s-7IZ",ea_="figjam_export_pickers--option--WG1Jy";class eag extends ow.l6{}class eah extends ow.c${}class eaE extends ow.l6{}class eav extends ow.c${}class eay extends ow.l6{}class eab extends ow.c${}let eaC={PNG:ei.v8u.PNG,JPG:ei.v8u.JPEG,CSV:ei.v8u.CSV,PDF:ei.v8u.PDF},eaw=e=>{switch(e){case ei.v8u.PNG:return"PNG";case ei.v8u.JPEG:return"JPG";case ei.v8u.CSV:return"CSV";case ei.v8u.PDF:return"PDF"}},eaT=e=>{switch(e){case ei.ZRE.SOLID:return(0,eN.t)("whiteboard.figjam_export.solid");case ei.ZRE.TRANSPARENT:return(0,eN.t)("whiteboard.figjam_export.transparent");case ei.ZRE.GRID:return(0,eN.t)("whiteboard.figjam_export.grid")}},eax=e=>{switch(e){case ei.EUU.TABLE:return(0,eN.t)("whiteboard.figjam_export.table");case ei.EUU.STICKY:return(0,eN.t)("whiteboard.figjam_export.sticky")}},eaN={format:e=>eaT(e)},eaS={format:e=>eax(e)},eak=e=>{switch(e){case"selection":return(0,eN.t)("whiteboard.figjam_export.selection_only");case"file":return(0,eN.t)("whiteboard.figjam_export.entire_file")}},eaI={format:e=>eak(e)},eaA=e=>{switch(e){case ei.v8u.CSV:return[];case ei.v8u.JPEG:return[ei.ZRE.SOLID,ei.ZRE.GRID];case ei.v8u.PNG:return[ei.ZRE.TRANSPARENT,ei.ZRE.SOLID,ei.ZRE.GRID];case ei.v8u.PDF:return[ei.ZRE.SOLID]}};function eaO(e,t){return eaA(t).includes(e)}function eaL(e){switch(e.background){case ei.ZRE.TRANSPARENT:return f.createElement("div",{className:eaf,style:{background:`url(${(0,eac.A)()})`,backgroundSize:"5px 5px"}});case ei.ZRE.GRID:return f.createElement("div",{className:`figjam_export_pickers--gridIcon--mPS09 thumbnail_DEPRECATED--lightModeDotGrid--ZUhXy thumbnail_DEPRECATED--thumbnailContainer--xPcsg ${eaf}`});case ei.ZRE.SOLID:return f.createElement("div",{className:`${eaf} figjam_export_pickers--solidIcon--Gt-95`})}}let eaP=f.memo(function(){let e=(0,_.wA)(),t=()=>{e(K._O())};return f.createElement(ead.XV,{title:(0,eN.t)("whiteboard.figjam_export.export"),headerClassName:"figjam_export_pickers--modalHeader--E6NRM",headerSize:"small",closeOnEsc:!0,onClose:t,minWidth:364,maxWidth:364},f.createElement(eaD,{onCancel:t,recordingKey:"exportSettingsPicker",dispatch:e}))});function eaD(e){let t=(0,nT.U)(),n=(0,aN.J2)(ei.Ez5.editorPreferences().exportSelectionSettings),a=(0,_.d4)(e=>e.exportSettingsPickerShown.pickerInfo??{selectionArea:0,canvasArea:0,nodeCounts:{selectionNodeCount:0,canvasNodeCount:0,selectionStickyCount:0,canvasStickyCount:0,selectionTableCount:0,canvasTableCount:0}}),[l,r]=f.useState(n.fileType),[i,o]=f.useState(n.contentType),[s,c]=f.useState(n.backgroundType),d=(0,_.d4)(e=>!!e.mirror.selectionProperties.numSelected),[u,m]=f.useState(d?"selection":"file"),[p,g]=f.useState(!1),h=e=>{r(e),eaO(s,e)||c(ei.ZRE.SOLID)},E=eaA(l).length>1,v=eaT(eaA(l)[0])||(0,eN.t)("whiteboard.figjam_export.no_background"),y=eaw(l),b=a.nodeCounts.selectionStickyCount>0||a.nodeCounts.canvasStickyCount>0,w=a.nodeCounts.selectionTableCount>0||a.nodeCounts.canvasTableCount>0,T=b||w;return f.createElement("div",{className:"figjam_export_pickers--modalContainer--ecxGT"},f.createElement("div",{className:"figjam_export_pickers--row--iT7Hm"},f.createElement(iy.JU,{className:eam},(0,eN.tx)("whiteboard.figjam_export.file_type")),f.createElement(BU.z,{className:"figjam_export_pickers--radioGroup--UXiC-",value:y,onChange:e=>h(eaC[e]),recordingKey:n_.Pt(e,"exportFileTypeRadioGroup")},(C.Ay.isIpadNative?[ei.v8u.PNG,ei.v8u.JPEG,ei.v8u.PDF]:[ei.v8u.PNG,ei.v8u.JPEG,ei.v8u.PDF,ei.v8u.CSV]).map(t=>{let n=t===ei.v8u.CSV&&!T;return f.createElement(BU.Z,{value:eaw(t),key:t,labelClassName:"figjam_export_pickers--radioLabel--zw-U-",recordingKey:n_.Pt(e,`exportFileTypeRadioGroup.${eaw(t)}`),disabled:n,"data-tooltip-type":n&&nx.Ib.TEXT,"data-tooltip":n&&(0,eN.t)("whiteboard.figjam_export.csv_disabled")},eaw(t))}))),l===ei.v8u.CSV&&f.createElement("div",{className:eau},f.createElement(iy.JU,{className:eam},(0,eN.tx)("whiteboard.figjam_export.content_type")),f.createElement(eaE,{id:"exportSettingsPickerContentTypeControl",className:"figjam_export_pickers--contentTypeSelect--Ioh5g",inputClassName:"figjam_export_pickers--contentTypeInput--3duA- figjam_export_pickers--input--YZm9H",dispatch:e.dispatch,property:i,onChange:o,formatter:eaS,recordingKey:n_.Pt(e,"contentTypeSelect"),dropdownShown:t,blurOnChange:!0},[ei.EUU.TABLE,ei.EUU.STICKY].map(t=>{let n=t===ei.EUU.STICKY&&!b||t===ei.EUU.TABLE&&!w;return f.createElement(eav,{value:t,key:t,disabled:n,additionalStylesClassName:ea_,recordingKey:n_.Pt(e,`contentTypeSelect.${eax(t)}`)},eax(t))}))),f.createElement("div",{className:eau},f.createElement(iy.JU,{className:eam},(0,eN.tx)("whiteboard.figjam_export.background")),!E&&f.createElement(iy.JU,{className:eap},v),E&&f.createElement(eag,{id:"exportSettingsPickerBackgroundTypeControl",className:"figjam_export_pickers--backgroundTypeSelect--eexDx",inputClassName:"figjam_export_pickers--input--YZm9H",dispatch:e.dispatch,property:s,onChange:c,formatter:eaN,recordingKey:n_.Pt(e,"backgroundTypeSelect"),dropdownShown:t,dropdownAlignment:"right",blurOnChange:!0,icon:f.createElement(eaL,{background:s,disabled:!1}),svgClassName:"figjam_export_pickers--svgStyles--G9Vof"},[ei.ZRE.GRID,ei.ZRE.TRANSPARENT,ei.ZRE.SOLID].map(t=>{let n=!eaO(t,l);return f.createElement(eah,{value:t,key:t,disabled:n,additionalStylesClassName:ea_,recordingKey:n_.Pt(e,`backgroundTypeSelect.${eaT(t)}`),height:32},f.createElement("div",{className:"figjam_export_pickers--backgroundOptionWrapper--DkFx1"},f.createElement(eaL,{background:t,disabled:n}),f.createElement("span",{className:"figjam_export_pickers--backgroundTypeLabel--b--Px ellipsis--ellipsis--Tjyfa"},eaT(t))))}))),f.createElement("div",{className:d?eau:"figjam_export_pickers--exportAreaPlaceholderRow--G7H-m figjam_export_pickers--selectRow--aTA0S figjam_export_pickers--row--iT7Hm"},f.createElement(iy.JU,{className:eam},(0,eN.tx)("whiteboard.figjam_export.export_area")),!d&&f.createElement(iy.JU,{className:eap},eak("file")),d&&f.createElement(eay,{id:"exportSettingsPickerExportAreaTypeControl",className:"figjam_export_pickers--exportAreaSelect--GP6S-",inputClassName:"figjam_export_pickers--exportAreaInput--AbQMJ figjam_export_pickers--input--YZm9H",dispatch:e.dispatch,property:u,onChange:m,formatter:eaI,recordingKey:n_.Pt(e,"exportAreaTypeSelect"),dropdownShown:t,blurOnChange:!0},["selection","file"].map(t=>f.createElement(eab,{key:t,value:t,additionalStylesClassName:ea_,recordingKey:n_.Pt(e,`exportAreaTypeOption.${eak(t)}`)},eak(t))))),f.createElement("div",{className:"figjam_export_pickers--buttonContainer---c6mP"},(()=>{if(!a)return!1;switch(l){case ei.v8u.PNG:case ei.v8u.JPEG:return("selection"===u?a.selectionArea:a.canvasArea)>=15e7;case ei.v8u.PDF:return("selection"===u?a.nodeCounts.selectionNodeCount:a.nodeCounts.canvasNodeCount)>=300;case ei.v8u.CSV:return!1}})()&&f.createElement("div",{className:"figjam_export_pickers--exportWarning--KzT0q text--fontPos11--2LvXf text--_fontBase--QdLsd"},f.createElement(a2.B,{className:"figjam_export_pickers--infoIcon--H0pOt",svg:P4.A}),(0,eN.tx)("whiteboard.figjam_export.exporting_may_take_a_minute_or_two")),f.createElement(a1.$$,{onClick:()=>{g(!0),e.dispatch(eas.n.set({message:(0,eN.t)("whiteboard.figjam_export.exporting"),showLoadingSpinner:!0,callback:()=>{ei.Ez5.editorPreferences().exportSelectionSettings.set({contentType:i,fileType:l,backgroundType:s}),"selection"===u?ei.glU.exportSelectionOrCurrentPage(!0,a.selectionArea,a.nodeCounts.selectionNodeCount):ei.glU.exportSelectionOrCurrentPage(!1,a.canvasArea,a.nodeCounts.canvasNodeCount),e.dispatch(ett.rg()),e.dispatch(K._O())}}))},recordingKey:n_.Pt(e,"exportButton"),disabled:p,className:"figjam_export_pickers--exportButtonStyles--KYDuq"},(0,eN.tx)("whiteboard.figjam_export.export"))))}var eaR=n(728268),eaM=n(105345),eaF=n(416393);function eaB({children:e,entryPoint:t,initialFeatureTab:n}){let a=(0,af.tS)(),l=(0,ew.iZ)(),r=(0,a9.ol)(),i=(0,Ce.O)(),o=(0,a6.U)(),s=(0,a3.U)("upsell"),c=(0,_.wA)(),d=(0,f.useCallback)(()=>{o("Dev Mode Paywall clicked",{type:"Design Mode Upsell",entryPoint:t},{forwardToDatadog:!0}),s("handoff"),c(ty.to({type:eaM.C,data:{initialFeatureTab:n}}))},[c,t,n,s,o]);return f.createElement(Y.fu,{name:"Dev Mode Upsell In Design Mode",properties:{currentPlan:i,teamId:null==r?void 0:r.id,userId:null==l?void 0:l.id,fileKey:a,upsell:t}},f.createElement("div",{className:"context_menus_upsells--upsellItem--DuX5N",onClick:d,tabIndex:0,role:"button"},f.createElement(a2.B,{svg:eaF.A}),f.createElement("span",null,e)))}function eaU(){return f.createElement(eaB,{entryPoint:"design_section_status",initialFeatureTab:"quick_handoff"},(0,eN.tx)("dev_handoff.paywall.ready_for_dev.upsell"))}function eaH(){return f.createElement(eaB,{entryPoint:"design_copy_as_code",initialFeatureTab:"advanced_inspection"},(0,eN.tx)("dev_handoff.paywall.codegen.upsell"))}function eaG(){return f.createElement(eaB,{entryPoint:"design_annotations",initialFeatureTab:"quick_handoff"},(0,eN.tx)("dev_handoff.paywall.annotations.upsell"))}var eaV=n(113853);async function eaK({paint:e,fileKey:t,dispatch:n}){var a;if(!t||"VIDEO"!==e.type||!e.video||!(null==(a=e.video)?void 0:a.hash))return eaz("Incorrect asset type"),null;n(eas.n.set({message:(0,eN.t)("whiteboard.figjam_export.exporting"),showLoadingSpinner:!0,callback:()=>{}}));let l=await (0,kZ.tW)({paint:e,fileKey:t});if(null===l)return eaz("Error getting download url for asset"),null;eaW(l)}let eaW=e=>{let t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("target","_blank"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},eaz=e=>{(0,o2.$D)(o5.e.FIGJAM_ENGAGEMENT,Error(`Error exporting video: ${e}`))};var eaj=n(640262),eaJ=n(465201),eaY=n(686759),eaX=n(450225),eaq=n(128803);function eaZ(e){return new URL(e).hostname.split(".").slice(-2).join(".")}var eaQ=n(248639),ea$=n(990922),ea0=n(850168),ea1=n(460289),ea2=n(892542),ea5=n(288641),ea4=n(772192),ea3=n(496470),ea6=n(779086),ea7=n(424950),ea8=n(319882),ea9=n(301922),ele=n(987850),elt=n(222478),eln=n(709731),ela=n(921717),ell=n(610043),elr=n(124257),eli=n(828736);let elo=(0,lf.hG)(lw.tui);class els extends f.PureComponent{items(){var e;let t=this.props.isPrototypeCanvasEditUiVisible&&!this.props.hasSelection?[{separator:!0},{action:"remove-interactions-on-page",flags:["edit"]}]:[],n=window.FigmaMobile,a=elv(this.props.appModel.showComments,this.props.selectedView,this.props.viewportInfo,this.props.clientX,this.props.clientY,this.props.dispatch,null==n?void 0:n.requestToAddDraftCommentPin),l=this.props.selectedView.editorType===eq.nT.Whiteboard,r=this.props.selectedView.editorType===eq.nT.Slides,i=(0,ag.$A)(this.props.selectedView),o=C.Ay.windows?"Ctrl+":"\u2318",s={action:"paste-here",flags:["edit"],displayText:l?(0,eN.t)("fullscreen_actions.paste"):void 0,shortcutText:l?`${o}V`:void 0},c={action:"paste-as-live-object",flags:["edit"],featureFlags:["live_paste"],displayText:(0,eN.t)("fullscreen_actions.paste-as-live-object")},d=!C.Ay.safari||(null==n?void 0:n.readClipboardData)?[s,c,l?{separator:!0}:null]:[],u={name:"start-chat",disabled:this.props.isJoinedToActiveVotingSession||this.props.isCursorChatDisabled,callback:(e,t,n,a)=>{ei.glU.triggerAction("set-tool-default",null),this.props.dispatch(X6.F6({position:{x:a.clientX||this.props.clientX,y:(a.clientY||this.props.clientY)-elo},source:"canvas_context_menu"}))}},m=this.props.canPublishOrgTemplate&&this.props.openFile?(0,eli.w)({dispatch:this.props.dispatch,fileKey:this.props.openFile.key,fileEditorType:this.props.openFile.editorType,isPublished:(0,cu.ZV)(null==(e=this.props.openFile)?void 0:e.template,this.props.org),source:"fullscreen-context-menu"}):null,p=[{action:"toggle-ui"},{action:"toggle-show-comments",displayText:(0,eN.t)("fullscreen.context_menu.show_hide_comments"),flags:["!slides"]},...l?[]:[{separator:!0},u],l?null:{action:"toggle-menu"},!this.props.userCanRunPlugins||r?null:(0,ep.qz)({...this.props,isReadOnly:this.props.appModel.isReadOnly},"contextmenu"),this.props.appModel.isReadOnly||i||r?null:(0,ef.Vd)(this.props,"contextmenu"),m,...t];return[...a,...d,{action:"unlock-all",flags:["edit","whiteboard"]},{separator:!0},...l?[u,{separator:!0}]:[],...p]}render(){let e=this.props.clientX,t=this.props.clientY;return f.createElement("div",{className:`${nz.Dm}`},f.createElement(etv.Q,{appModel:this.props.appModel,menuItems:(0,C7.WI)(this.items()),selectedView:this.props.selectedView,dispatch:this.props.dispatch,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!0,recordingKey:"canvasMenu",allowCodegenOptions:this.props.selectedView.editorType===eq.nT.Design,isLimitedDevMode:this.props.isLimitedDevMode,"aria-labelledby":this.props.ariaLabelledBy}))}}els.displayName="CanvasContextMenu";let elc=(0,_.Ng)((e,t)=>({...t,appModel:e.mirror.appModel,openFile:e.openFile,editorType:e.selectedView.editorType,orgEntity:(0,eh.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,isJoinedToActiveVotingSession:(0,ea1.gR)(e),hasSelection:Object.keys(e.mirror.sceneGraphSelection).length>0,isDevHandoff:(0,ag.$A)(e.selectedView)}))(els);function eld(e){let t=(0,e_.op)(),n=(0,e_.$1)(),a=(0,e_.cW)(),l=(0,e_.Be)(),r=l.orgPlugins,i=l.orgWidgets,o=(0,eg.h)("plugin"),s=(0,eg.h)("widget"),c=(0,e_.NU)(),d=(0,e_.qr)(),u=(0,e_.ZT)(),m=(0,ea9.S)(),p=(0,a6.am)();f.useEffect(()=>{p("Canvas Right Click")},[p]);let g=(0,lb._X)({subscribeToUpdates_expensive:!0}),h=(0,cu.J3)()===cu.kN.CAN_PUBLISH,E=(0,_.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),v=elb(),y=(0,e_.ll)();return f.createElement(elc,{...e,isPrototypeCanvasEditUiVisible:v,allSavedPlugins:l.plugins,recentlyUsedPlugins:t,localExtensions:n,publishedPlugins:a,viewportInfo:g,activeTextReviewPlugin:E,canPublishOrgTemplate:h,savedWidgetVersions:c,recentlyUsedWidgets:d,publishedWidgets:u,orgSavedPlugins:r,orgSavedWidgets:i,orgPrivatePlugins:o,orgPrivateWidgets:s,isCursorChatDisabled:m,pluginAllowlist:y})}class elu extends f.PureComponent{constructor(){super(...arguments),this.savepointMenuItems=(e,t)=>{let n=this.props.version,a=(0,ea6.p)(n),l={name:this.props.editName||"savepoint-edit",args:{version:n,checkpointKey:e},callback:t},r={name:"savepoint-restore",args:{version:n,checkpointKey:e},callback:t},i={name:"savepoint-duplicate",args:{version:n,checkpointKey:e},callback:t,disabled:this.props.disableDuplicate},o={name:"savepoint-clear",args:{version:n,checkpointKey:e},callback:t,disabled:!this.props.enableClear},s={name:"savepoint-link",args:{version:n,checkpointKey:e},callback:t},c=[];if(this.props.userCanEditFile?a?"branch_child_merge"===n.view?c.push(l,r,i,s):c.push(r,i,s):c.push(l,r,i,o,s):c.push(i,s),(0,y.kc)().version_diffing&&this.props.selectedView.editorType!==eq.nT.Whiteboard&&!(0,ag.$A)(this.props.selectedView)&&c.push({name:"savepoint-compare",args:{version:n,checkpointKey:e},callback:t}),(0,ag.$A)(this.props.selectedView)){let e=["savepoint-restore","savepoint-clear"];return c.filter(t=>!e.includes(t.name))}return c}}render(){let e=this.props.clientX,t=this.props.clientY,n=this.savepointMenuItems(this.props.checkpointKey,this.props.callback);return f.createElement("div",{className:`${nz.Dm}`},f.createElement(etv.Q,{appModel:this.props.appModel,menuItems:n,dispatch:this.props.dispatch,selectedView:this.props.selectedView,showPoint:!0,targetRect:{width:10,height:10,left:e-5,top:t+7,right:e+5,bottom:t+17},removeDisabledItems:!1,recordingKey:"savepointMenu"}))}}elu.displayName="SavepointContextMenu";let elm=(0,_.Ng)((e,t)=>({...t,appModel:e.mirror.appModel}))(elu),elp=(e,t)=>ei.glU.getObjectsListUnderCursor(e,t),elf=class e extends f.PureComponent{constructor(e){super(e),this.objectsListMouseEnter=e=>{aT.Uc(e)},this.objectsListMouseExit=()=>{aT.Uc("")},this.getSelectionGuid=()=>Object.keys(this.props.sceneGraphSelection)[0],this.getObjectsListMenu=(e,t)=>{let n=elp(e,t);if(null==n)return[];let a=[];for(let e of n){let t=e.nodeId;a.push({nodeId:t,args:{nodeId:t,name:e.name},action:"select-node",displayText:(0,eN.t)("fullscreen_actions.select-node",{name:e.name??""}),onMouseEnter:()=>this.objectsListMouseEnter(t),onMouseExit:this.objectsListMouseExit})}return a},this.getNodeType=()=>{let e=this.getSelectionGuid();return ei.glU.getNodeType(e)},this.getPageListForMoveToMenu=()=>{let e=this.props.appModel.pagesList;if(!this.props.userCanEditFile||null==e||e.length<2)return[];let t=[];for(let n of e)n.nodeId!==this.props.appModel.currentPage&&(n.isDivider?t.push({separator:!0}):t.push({name:n.name,args:{nodeId:n.nodeId,name:n.name},action:"page-move-to",displayText:(0,eN.t)("fullscreen_actions.page-move-to",{name:n.name??""})}));return t},this.state={pageItems:this.getPageListForMoveToMenu(),relatedComponentMenu:this.getRelatedComponentMenu(ei.iCO.NONE),relatedStateMenu:this.getRelatedComponentMenu(ei.iCO.STATE_INSTANCE),objectItems:this.getObjectsListMenu(this.props.clientX,this.props.clientY),nodeType:this.isFigjam()?this.getNodeType():null,hyperlink:this.isFigjam()?this.getHyperlinkUnderCursor():null}}getRelatedComponentMenu(e){var t,n;let a;if(e!==ei.iCO.NONE&&e!==ei.iCO.STATE_INSTANCE)return null;let l=(0,ea3.SY)(this.props.masterSymbolGUID,this.props.dispatch,(null==(t=this.props.openFile)?void 0:t.key)||"",(0,vu.l)((null==(n=this.props.openFile)?void 0:n.libraryKey)??""),this.props.fileByKey,this.props.library,this.props.sceneGraph,this.props.sceneGraphSelection,this.props.fileVersion,e,this.props.stateGroupSelectionInfo);if(0===l.length)return null;a=e===ei.iCO.STATE_INSTANCE?"relatedComponentMenuSwapVariants":"relatedComponentMenu";let r=this.props.clientX,i=this.props.clientY;return{items:l,showPoint:!1,parentRect:{width:10,height:10,left:r+100,top:i,right:r+110,bottom:i-10},recordingKey:a,dispatch:this.props.dispatch,depth:0,onSelectItem:()=>{}}}getHyperlinkUnderCursor(){return ei.glU.getHyperlinkUnderCursor(this.props.clientX,this.props.clientY)}selectLayerMenu(){return!this.props.isObjectsPanelMenu&&this.state.objectItems.length>1?this.state.objectItems:[]}textEditModeMenu(){let e=this.getCopyPasteMenu(),t=this.getCopyExportMenu(),n=this.props.spellCheckPreference,a=this.props.appModel.spellCheckSuggestions,l=a||!n?[{name:"spell-check-menu",flags:["design","whiteboard","slides"],children:[(0,ea0.x)(),{separator:!0},...(0,ea0.A)()]},...this.props.userCanRunPlugins?(0,ep.dL)(this.props,"contextmenu"):[]]:[];return[...n||this.props.appModel.activeTextReviewPlugin?ely(a,this.props.editorType):[],...l,{separator:!0},...this.getTableCellMenu(),{separator:!0},...e,{separator:!0},...this.isFigjam()?t:[]]}getThumbnailMenu(e){return{name:et.Y5.getFileThumbnailMenuItemName(),args:{label:e?(0,eN.t)("fullscreen_actions.restore_default_thumbnail"):(0,eN.t)("fullscreen_actions.set_as_thumbnail")},flags:["edit","!slides"],callback:()=>{this.props.openFile&&this.props.dispatch(gP.$m({file_key:this.props.openFile.key,thumbnail_guid:e?null:this.getSelectionGuid()}))}}}selectedEmbedOrLinkPreviewHasValidUrl(){var e,t;return(null==(e=this.props.widgetSelectionInfo)?void 0:e.pluginID)===eaQ.k.EMBED_WIDGET&&this.props.embedData&&(this.props.embedData.url||this.props.embedData.srcUrl)||(null==(t=this.props.widgetSelectionInfo)?void 0:t.pluginID)===eaQ.k.LINK_PREVIEW_WIDGET&&this.props.linkPreviewData&&this.props.linkPreviewData.url}isFigjam(){return"fullscreen"===this.props.selectedView.view&&this.props.selectedView.editorType===eq.nT.Whiteboard}getCopyLinkMenu(){let e=this.selectedEmbedOrLinkPreviewHasValidUrl()?"FigJam":"";return{name:"copy-link",args:{label:(0,eN.t)("fullscreen.context_menu.copy_link",{editorSpecifierString:e})},displayText:this.isFigjam()&&this.state.nodeType?function(e){switch(e){case ei.Z6A.STICKY:return(0,eN.t)("fullscreen_actions.copy-link-to-sticky");case ei.Z6A.CONNECTOR:return(0,eN.t)("fullscreen_actions.copy-link-to-connector");case ei.Z6A.WIDGET:return(0,eN.t)("fullscreen_actions.copy-link-to-widget");case ei.Z6A.STAMP:return(0,eN.t)("fullscreen_actions.copy-link-to-stamp");case ei.Z6A.SECTION:return(0,eN.t)("fullscreen_actions.copy-link-to-section");case ei.Z6A.TEXT:return(0,eN.t)("fullscreen_actions.copy-link-to-text");case ei.Z6A.TABLE:return(0,eN.t)("fullscreen_actions.copy-link-to-table");case ei.Z6A.WASHI_TAPE:return(0,eN.t)("fullscreen_actions.copy-link-to-washi-tape");case ei.Z6A.SHAPE_WITH_TEXT:return(0,eN.t)("fullscreen_actions.copy-link-to-shape");case ei.Z6A.INSTANCE:return(0,eN.t)("fullscreen_actions.copy-link-to-instance");default:return(0,eN.t)("fullscreen_actions.copy-link-to-this")}}(this.state.nodeType):void 0,callback:()=>{let e;if(!this.props.openFile)return;let t=!(0,ag.$A)(this.props.selectedView)&&this.props.attributionContextKey,n=(0,tR.Wl)(this.props.selectedView),a=(0,tR.s4)(this.props.selectedView),l=(0,P0.P)(this.props.selectedView),r=(0,LE.jN)({file:this.props.openFile,nodeId:this.getSelectionGuid(),isDevHandoff:(0,ag.$A)(this.props.selectedView),isReadOnly:this.props.appModel.isReadOnly,isFigJam:this.isFigjam(),isDevModeOverview:n,devModeFocusId:a,attributionContext:t?(0,ea2.b)(this.props.attributionContextKey,ea2.d.FULLSCREEN_CONTEXT_MENU):null});if((0,y.kc)().ce_copy_labelled_links){let t=lE.q.instance.get(this.getSelectionGuid());e=t?t.name:this.props.openFile.name}this.props.dispatch(gP.S({fileKey:this.props.openFile.key,url:r,label:e,source:ea2.d.FULLSCREEN_CONTEXT_MENU,visualBellMessageOverride:(()=>{if(this.isFigjam()&&this.state.nodeType)return function(e){switch(e){case ei.Z6A.STICKY:return(0,eN.t)("visual_bell.copy_link_to_sticky");case ei.Z6A.CONNECTOR:return(0,eN.t)("visual_bell.copy_link_to_connector");case ei.Z6A.WIDGET:return(0,eN.t)("visual_bell.copy_link_to_widget");case ei.Z6A.STAMP:return(0,eN.t)("visual_bell.copy_link_to_stamp");case ei.Z6A.SECTION:return(0,eN.t)("visual_bell.copy_link_to_section");case ei.Z6A.TEXT:return(0,eN.t)("visual_bell.copy_link_to_text");case ei.Z6A.TABLE:return(0,eN.t)("visual_bell.copy_link_to_table");case ei.Z6A.WASHI_TAPE:return(0,eN.t)("visual_bell.copy_link_to_washi_tape");case ei.Z6A.SHAPE_WITH_TEXT:return(0,eN.t)("visual_bell.copy_link_to_shape");case ei.Z6A.INSTANCE:return(0,eN.t)("visual_bell.copy_link_to_instance");default:return(0,eN.t)("visual_bell.copy_link")}}(this.state.nodeType);if(l){let e=lE.q.instance.get(this.getSelectionGuid());if(e)return(0,eN.t)("copy_to_clipboard.slides.link_to_slide_copied_to_clipboard",{name:e.name})}})()}))}}}getCopyHyperlinkMenu(){let e=(()=>{let e=this.state.hyperlink;if(!e||""===e)return null;if(e.startsWith("mailto:")){let t=e.substring(7);if(t)return{displayText:(0,eN.t)("fullscreen_actions.copy-email",{email:t}),linkToCopy:t,visualBellText:(0,eN.t)("visual_bell.copy_email",{email:t})}}else if(e.startsWith("tel:")){let t=e.substring(4);if(t)return{displayText:(0,eN.t)("fullscreen_actions.copy-phone",{number:t}),linkToCopy:t,visualBellText:(0,eN.t)("visual_bell.copy_phone",{number:t})}}else{let t=eaZ(e);if(t)return{displayText:(0,eN.t)("fullscreen_actions.copy-hyperlink",{hyperlink:t}),linkToCopy:e,visualBellText:(0,eN.t)("visual_bell.copy_hyperlink",{hyperlink:t})}}})();return e?{name:"copy-hyperlink",displayText:e.displayText,callback:()=>(0,ea5.UA)(this.props.dispatch,e.linkToCopy,"ContextMenu",e.visualBellText)}:null}getImageToProfilePicture(){if(!this.props.user||!this.props.fillPaints||(0,xM.gl)(this.props.fillPaints))return null;let e=this.props.fillPaints.findIndex(e=>"IMAGE"===e.type);if(e<0)return null;let t=this.props.fillPaints[e];return{name:"set-image-as-profile-picture",args:{label:"Set image as profile picture"},flags:["view_restricted","whiteboard"],featureFlags:["figjam_canvas_image_to_avatar"],callback:()=>{(0,eaV.V8)(t,this.props.user,this.props.dispatch)}}}getMaybeEmbedOrLinkPreviewWidgetMenu(){var e,t,n;if(!this.selectedEmbedOrLinkPreviewHasValidUrl())return null;let a=(null==(e=this.props.embedData)?void 0:e.url)||(null==(t=this.props.embedData)?void 0:t.srcUrl)||(null==(n=this.props.linkPreviewData)?void 0:n.url),l=eaZ(decodeURIComponent(a));return{name:"labeled-menu-item",args:{label:(0,eN.t)("fullscreen_actions.copy-hyperlink",{hyperlink:l})},callback:()=>{!function(e,t){let n=decodeURIComponent(t);(0,eaY.Dk)(n),(0,eaq.Rm)(eaX.yc.COPY_LINK,n),e(eS.F.enqueue({type:"copy-preview",message:(0,eN.t)("visual_bell.copy_hyperlink",{hyperlink:eaZ(n)}),error:!1}))}(this.props.dispatch,a)}}}getMaybeEmbedDeactivateMenu(){var e;return(null==(e=this.props.widgetSelectionInfo)?void 0:e.pluginID)!==eaQ.k.EMBED_WIDGET||this.props.widgetSelectionInfo.widgetID!==ei.Ez5.embedUiState().activeEmbedData.getCopy().embedNodeId?null:{name:"labeled-menu-item",args:{label:"Deactivate preview"},callback:()=>{ei.glU.deactivateEmbed()}}}getExportVideo(){var e;if(!this.props.fillPaints||(0,xM.gl)(this.props.fillPaints))return null;let t=this.props.fillPaints.find(e=>"VIDEO"===e.type);if(!t)return null;let n=null==(e=this.props.openFile)?void 0:e.key;return{action:"export-selected-video",flags:["view_restricted","whiteboard"],platforms:["!ipad"],displayText:(0,eN.t)("fullscreen.context_menu.export_selected_video"),callback:(e,a,l)=>{eaK({paint:t,fileKey:n,dispatch:l})}}}selectedDefaultLibraryComponents(){var e;let t=Object.keys(this.props.sceneGraphSelection);if(0===t.length)return!1;let n=null==(e=this.props.sceneGraph.get(t[0]))?void 0:e.symbolId;if(!n)return!1;let a=(0,xW.yW)(this.props.sceneGraph.get(n));return!!a&&(0,xW.td)(this.props.library,a)}getMoveToMenu(){return this.state.pageItems.length>=1?{action:"page-move-to-menu",flags:["edit"],children:this.state.pageItems,name:"page-move-to-menu"}:null}getFigJamRemovePluginActionsMenu(){if(this.props.selectedView.editorType===eq.nT.Design)return null;let t=e=>this.props.dispatch(r3.af({id:e,resourceType:uL.bD.PLUGIN})),n=(0,x1.vA)(this.props.pluginRelaunchData,this.props.publishedPlugins,this.props.localExtensions,this.props.orgEntity,this.props.numSelected||0,(n,a)=>e.refreshCache.debounceRefresh(n,()=>t(n),a),TS.FW.FIGJAM),a=[],l=new Set;for(let e of n)l.has(e.pluginTypeAndID)||(a.push({name:e.plugin.name,plugin_id:e.plugin.plugin_id}),l.add(e.pluginTypeAndID));return 0===a.length?null:{name:"remove-plugin-actions",children:[...a.map(({name:e,plugin_id:t})=>({name:"plugins-menu-item",callback:()=>ei.NfO.removeRelaunchDataFromSelection(t),args:{extensionName:e}})),{separator:!0},{name:"remove-all-plugin-actions",callback:()=>a.map(({plugin_id:e})=>ei.NfO.removeRelaunchDataFromSelection(e))}]}}getMainComponentActionsMenu(){if(this.props.isLimitedDevMode)return null;let e=(0,tl.Yh)(this.props.appModel,"find-symbol")&&!this.selectedDefaultLibraryComponents(),t=(0,tl.Yh)(this.props.appModel,"push-changes-to-main"),n=(0,tl.Yh)(this.props.appModel,"restore-symbol-or-state-group"),a=(0,tl.Yh)(this.props.appModel,"add-variant"),l=(0,tl.Yh)(this.props.appModel,"publish-selection"),r=[e,t,n,a,l].filter(Boolean).length;if(0===r)return null;if(1===r){if(e)return{action:"find-symbol"};if(a)return{action:"add-variant",flags:["edit"]};if(l)return{action:"publish-selection",flags:["edit"]}}return{action:"main-component",children:[{action:"find-symbol"},{action:"push-changes-to-main",flags:["edit"]},{action:"restore-symbol-or-state-group",flags:["edit"]},{action:"publish-selection",flags:["edit"]},{action:"add-variant",flags:["edit"]}]}}getTableCellMenu(){let e=(0,tl.Yh)(this.props.appModel,"delete-table-contents"),t=(0,tl.Yh)(this.props.appModel,"delete-current-table-row")||(0,tl.Yh)(this.props.appModel,"delete-current-table-column");return[{action:"move-table-row-up",flags:["edit"]},{action:"move-table-row-down",flags:["edit"]},{action:"move-table-column-left",flags:["edit"]},{action:"move-table-column-right",flags:["edit"]},{separator:!0},{action:"add-table-column-before",flags:["edit"]},{action:"add-table-column-after",flags:["edit"]},{separator:!0},{action:"add-table-row-above",flags:["edit"]},{action:"add-table-row-below",flags:["edit"]},{separator:!0},{action:"delete-table-contents",flags:["edit"],shortcutText:e&&!t?"\u232B":void 0},{action:"delete-current-table-column",flags:["edit"],shortcutText:!e&&t?"\u232B":void 0},{action:"delete-current-table-row",flags:["edit"],shortcutText:!e&&t?"\u232B":void 0}]}getCopyPasteMenu(){let e;let t=window.FigmaMobile,n=!C.Ay.safari||!!(null==t?void 0:t.readClipboardData),a=!this.props.isObjectsPanelMenu&&!this.props.isSingleSlideViewCarousel&&n,l=this.props.isTextEditModeMenu,r=(0,aI.C7)()&&this.props.hasFragmentSearchPermission&&this.props.isUI3,i=[{action:"copy-text"},{action:"copy-as-code",children:[{action:"copy-as-css"},{action:"copy-as-css-recursive"},{action:"copy-as-ios"},{action:"copy-as-android"},...!this.props.canAccessDevMode&&this.props.canAccessDevModeEntryPoint?[{separator:!0},{render:()=>f.createElement(eaH,null),optionHeight:40}]:[]]},{action:"copy-as-svg"},{action:"copy-as-png"},...this.props.canCopyLink?[this.getCopyLinkMenu()]:[],{separator:!0},{action:"copy-properties",flags:["view_restricted"]},{action:"paste-properties",flags:["edit"]}],o=C.Ay.windows?"Ctrl+":"\u2318";switch(this.props.selectedView.editorType){case eq.nT.Design:case eq.nT.Sites:case eq.nT.Slides:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${o}C`}:null,a?{action:"paste-here",flags:["edit"],displayText:(0,eN.t)("fullscreen_actions.paste-here"),shortcutText:l?`${o}V`:void 0}:this.props.isSingleSlideViewCarousel?{action:"paste",flags:["edit"],displayText:(0,eN.t)("fullscreen_actions.paste"),shortcutText:`${o}V`}:null,n?{action:"paste-as-live-object",flags:["edit"],featureFlags:["live_paste"],displayText:l?(0,eN.t)("fullscreen_actions.paste-as-live-object"):void 0}:null,n?{action:"paste-to-replace",flags:["edit"],displayText:l?(0,eN.t)("fullscreen_actions.paste-and-match-style"):void 0,shortcutText:l?`${o}\u21E7V`:void 0}:null,{action:"copy-paste-menu",flags:["edit"],children:i},{action:"copy-as-menu",flags:["!edit"],children:i},{action:"duplicate-in-place",flags:["edit","slides"],displayText:(0,eN.t)("fullscreen_actions.duplicate-in-place"),shortcutText:`${o}D`},r?{action:"find-inspiration",flags:["edit","!slides"]}:null,(0,y.kc)().asset_suggestions_inspect_fragment?{action:"inspect-fragment",flags:["!slides"]}:null,...(0,eaj.x)({isOrgMember:this.props.isOrgMember})];break;case eq.nT.DevHandoff:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${o}C`}:null,this.props.isLimitedDevMode?null:{action:"copy-text"},this.props.isLimitedDevMode?null:{action:"copy-as-svg"},this.props.isLimitedDevMode?null:{action:"copy-as-png"},this.props.isLimitedDevMode?null:{action:"copy-layer-name"},this.props.canCopyLink?this.getCopyLinkMenu():null];break;default:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${o}C`}:null,a?{action:"paste",flags:["edit"],displayText:(0,eN.t)("fullscreen_actions.paste"),shortcutText:`${o}V`}:null,a?{action:"paste-as-live-object",flags:["edit"],featureFlags:["live_paste"],displayText:l?(0,eN.t)("fullscreen_actions.paste-as-live-object"):void 0}:null,n?{action:"paste-to-replace",flags:["edit"],displayText:(0,eN.t)("fullscreen_actions.paste-to-replace")}:null,...(0,eaj.x)({isOrgMember:this.props.isOrgMember})]}return e}getCopyExportMenu(){return[...this.props.canCopyLink?[this.getCopyLinkMenu(),this.getCopyHyperlinkMenu()]:[],this.getMaybeEmbedOrLinkPreviewWidgetMenu(),this.getMaybeEmbedDeactivateMenu(),{action:"copy-as-png"},{action:"export-selection-or-current-page",flags:["view_restricted","whiteboard"],displayText:(0,eN.t)("fullscreen.context_menu.export_selection")},this.getExportVideo()]}rulerGuideMenu(e,t){let n="toggle-rulers",a=[e===ei._0v.Y?{action:"remove-vertical-guides"}:{action:"remove-horizontal-guides"},{separator:!0},{action:n,displayText:(0,eN.t)("fullscreen.ruler_guide_context_menu.hide_rulers"),shortcutText:(0,tl.c1)(this.props.appModel.keyboardShortcuts,n)}],l=[{action:"remove-guide"}];switch(t){case ei.bQY.RULER:return a;case ei.bQY.GUIDE:return l;case ei.bQY.BOTH:return l.concat(...a);default:return[]}}singleSlideViewCarouselMenu(){return[...this.getCopyPasteMenu(),{separator:!0},{action:"delete-selection",flags:["slides"]},{separator:!0},{action:"create-slide",flags:["slides"]},{action:"select-all-slides",flags:["slides"]},...this.skipSlidesMenu()]}skipSlidesMenu(){let e=(()=>{for(let e of Object.keys(this.props.sceneGraphSelection)){let t=lE.q.instance.get(e);if(!(null==t?void 0:t.isSlide()))return!1}return!0})(),t=Object.keys(this.props.sceneGraphSelection).length>1;return e?[{separator:!0},(()=>{for(let e of Object.keys(this.props.sceneGraphSelection)){let t=lE.q.instance.get(e);if(!(null==t?void 0:t.isSlide())||!(null==t?void 0:t.isSkippedSlide))return!1}return!0})()?{action:t?"unskip-slides":"unskip-slide",flags:["slides"],featureFlags:["piper_skip_slides"]}:{action:t?"skip-slides":"skip-slide",flags:["slides"],featureFlags:["piper_skip_slides"]}]:[]}contextMenu(){var e;let{objectItems:t,relatedComponentMenu:n,relatedStateMenu:a}=this.state,l=this.props.appModel,r=this.props.selectedView.editorType===eq.nT.Design,i=this.props.selectedView.editorType===eq.nT.Slides,o=(0,aA.Vj)(this.props.selectedView),s=(r||o)&&(0,tl.Yh)(this.props.appModel,"select-node-menu")&&!this.props.isObjectsPanelMenu&&t.length>1,c=this.props.isObjectsPanelMenu,{withinMeter:d}=(0,ele.X)(elt.JT.AUTO_RENAME_LAYERS),u=c&&this.props.hasAIPermission&&(0,aI.AL)()&&(0,aI.Ii)()&&d&&this.props.isUI3,m=window.FigmaMobile,p=elv(l.showComments,this.props.selectedView,this.props.viewportInfo,this.props.clientX,this.props.clientY,this.props.dispatch,null==m?void 0:m.requestToAddDraftCommentPin),_=(0,tl.Yh)(this.props.appModel,"swap-to-related-symbol"),g=(0,tl.Yh)(this.props.appModel,"swap-to-related-state"),h=this.props.isPrototypeCanvasEditUiVisible?[{separator:!0},{action:"remove-interactions-on-selection",flags:["edit"]},{action:"add-prototype-starting-point",flags:["edit"]},{action:"delete-prototype-starting-point",flags:["edit"]}]:[],E=this.getCopyPasteMenu(),v=this.getCopyExportMenu(),b=[s?{action:"select-node-menu",children:t,name:"select-node-menu"}:null,this.getMoveToMenu(),{action:"move-to-file",flags:["edit"]}],C=!r,w=i?[]:[C?{separator:!0}:null,this.props.userCanRunPlugins?(0,ep.qz)(this.props,"contextmenu"):null,this.props.appModel.isReadOnly?null:(0,ef.Vd)(this.props,"contextmenu")],T=(0,y.kc)().internal_only_debug_tools,x=T&&1===this.props.numSelected,N=(0,y.kc)().convert_to_thumbnail_frame,k=this.props.spellCheckPreference,I=this.props.appModel.spellCheckSuggestions,A=S.zl.get(ea7.Tm),O=(0,y.kc)().figjam_ai_piper_action_transitions,L=!A&&O&&this.props.hasSlidesAiTextEnabled&&this.props.isSlidesMode;return[...k||this.props.appModel.activeTextReviewPlugin?ely(I,this.props.editorType):[],{separator:!0},...this.getTableCellMenu(),{separator:!0},...p,...E,{separator:!0},{action:"delete-selection",flags:["whiteboard","slides"]},{separator:!0},L?{action:"slides-rewrite-text",flags:["slides"],featureFlags:["figjam_ai_piper_text_manipulation","figjam_ai_piper_action_transitions"],callback:()=>(0,ea7.mD)(this.props.dispatch,{source:"context_menu"})}:null,{separator:!0},...this.isFigjam()?v:[],{separator:!0},...b,{action:"bring-to-front",flags:["edit"]},{action:"bring-forward",flags:["edit","slides"]},{action:"send-backward",flags:["edit","slides"]},{action:"send-to-back",flags:["edit"]},{separator:!0},{action:"create-responsive-set",flags:["edit","sites"]},{action:"set-as-default-responsive-set",flags:["edit","sites"]},{action:"replace-selected-frame-with-section",flags:["edit","!slides"]},{action:"replace-selected-section-with-frame",flags:["edit","!slides"]},{action:"group-selection",flags:["edit"]},{action:"frame-selection",flags:["edit"]},{action:"create-section-from-selection",flags:["edit","!slides"]},{action:"ungroup-selection",flags:["edit"],displayText:(0,eN.t)("fullscreen.context_menu.ungroup")},c?{action:"rename-selection",flags:["edit"],displayText:(0,eN.t)("fullscreen.context_menu.rename")}:null,u?{name:"auto-rename-layers",flags:["edit"],displayText:(0,eN.t)("fullscreen.context_menu.auto_rename_layers"),rightIcon:f.createElement(yp.W,{variant:ell.x.ON_MENU}),callback:()=>{(0,ie.$I)(this.props.dispatch,{moduleToOpen:{type:"custom",module:f.createElement(elr.A,{source:"context-menu"}),beforeModuleOpen:()=>{(0,eln.B3)(elt.JT.AUTO_RENAME_LAYERS),(0,eln.Ag)(elt.JT.AUTO_RENAME_LAYERS,M8.Ay,{source:"context_menu",overwriteNames:!1})},name:ela.S.RENAME_LAYERS_TOAST},trackingData:{source:"placeholder_<SelectionContextMenuInner>"}})}}:null,{action:"flatten-selection",flags:["edit","!slides"],displayText:(0,eN.t)("fullscreen.context_menu.flatten")},{action:"outline-stroke",flags:["edit","!slides"],shortcutText:(0,tl.c1)(this.props.appModel.keyboardShortcuts,"outline-stroke-with-migration-notice")||(0,tl.c1)(this.props.appModel.keyboardShortcuts,"outline-stroke")},{action:"mask-selection",flags:["edit","!slides"],get displayText(){switch(ei.Ez5.editorState().selectionIsMask.getCopy()){case ei.F84.OFF:case ei.F84.MIXED:return(0,eN.t)("fullscreen_actions.mask-selection");case ei.F84.ON:return(0,eN.t)("fullscreen.menu.remove_mask")}}},this.props.canSetAsFileThumbnail&&!this.props.appModel.isReadOnly?this.getThumbnailMenu(this.getSelectionGuid()===(null==(e=this.props.openFile)?void 0:e.thumbnailGuid)):null,{separator:!0},{action:this.props.propertiesPanelShouldShowRemoveAutoLayout?"unstack-selection":"stack-selection",flags:["design","edit"]},(0,eaJ.K)((0,tl.Yh)(this.props.appModel,"run-multi-stack-auto-layout"),(0,tl.Yh)(this.props.appModel,"destroy-all-auto-layout"),(0,tl.Yh)(this.props.appModel,"resize-to-fit")),{action:"create-symbol",flags:["edit"]},{action:"create-template",flags:["edit"],featureFlags:["dse_templates_proto"]},{action:"create-module",flags:["edit"],featureFlags:["dse_editor_templates_v1"]},_&&n?{name:"swap-to-related-symbol",flags:["edit"],childDropdown:n}:null,g&&a?{name:"swap-to-related-state",flags:["edit"],childDropdown:a}:null,{action:"reset-symbol",flags:["edit"]},{action:"detach-instance",flags:["edit"]},this.getMainComponentActionsMenu(),...C?[]:w,this.getFigJamRemovePluginActionsMenu(),{separator:!0},{action:"toggle-shown-for-selected-nodes",flags:["edit"],displayText:(0,eN.t)("fullscreen.context_menu.show_hide")},{action:"toggle-locked-for-selected-nodes",flags:["edit"],displayText:(0,eN.t)("fullscreen.context_menu.lock_unlock")},{action:"unlock-all",flags:["edit","whiteboard"]},{separator:!0},{action:"flip-horizontal",flags:["edit"]},{action:"flip-vertical",flags:["edit"]},{separator:!0},{action:"remove-annotations",flags:["dev_handoff"]},{separator:!0},...C?w:[],{separator:!0},this.getImageToProfilePicture(),...h,...i?this.skipSlidesMenu():[],x?{separator:!0}:null,x?{action:"debug-inspect-layer-figma-scope"}:null,N?{action:"convert-to-thumbnail-frame"}:null,T?{action:"debug-print-as-test-code"}:null]}render(){let e=this.props.clientX,t=this.props.clientY,n=(0,C7.WI)(this.props.isTextEditModeMenu?this.textEditModeMenu():this.props.isSelectLayerMenu?this.selectLayerMenu():this.props.isRulerGuideMenu?this.rulerGuideMenu(this.props.axis,this.props.rulerGuideContextMenuType):this.props.isSingleSlideViewCarousel?this.singleSlideViewCarouselMenu():this.contextMenu());return f.createElement("div",{className:`${nz.Dm}`},f.createElement(etv.Q,{appModel:this.props.appModel,sceneGraph:this.props.sceneGraph,selectedView:this.props.selectedView,sceneGraphSelection:this.props.sceneGraphSelection,menuItems:n,dispatch:this.props.dispatch,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!0,isLimitedDevMode:this.props.isLimitedDevMode,recordingKey:"layerMenu"}))}};function el_(e){let t=(0,_.d4)(af.tB),n=(0,e_.Tg)(),a=(0,lb._X)({subscribeToUpdates_expensive:!0}),l=(0,eB.ud)(),r=(0,U._I)(),i=(0,U.U4)(),o=(0,_.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),s=elb(),c=(0,_.wA)(),d=(0,e_.ll)(),u=(0,e_.Be)(),m=u.orgPlugins,p=(0,eg.h)("plugin"),g=(0,aN.J2)((0,tM.UK)().spellCheckPreference),h=(0,N.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection),n=1===t.length?lE.q.instance.get(t[0]):null,a=null!=n&&("FRAME"===n.type&&!n.resizeToFit||"SYMBOL"===n.type||"SECTION"===n.type),l=e.selectedView.editorType;return{appModel:e.mirror.appModel,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,localExtensions:e.localPlugins,userCanRunPlugins:(0,TT.GP)(e),sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,library:e.library,masterSymbolGUID:e.mirror.selectionProperties.masterSymbolGUID,propertiesPanelShouldShowRemoveAutoLayout:e.mirror.selectionProperties.propertiesPanelShouldShowRemoveAutoLayout,orgEntity:(0,eh.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,user:e.user,fillPaints:e.mirror.selectionProperties.fillPaints,canSetAsFileThumbnail:a&&!(null==n?void 0:n.isInstanceSublayer),canCopyLink:e.mirror.selectionProperties.canCopyLinkToSelection,fileVersion:e.fileVersion,stateGroupSelectionInfo:e.mirror.selectionProperties.stateGroupSelectionInfo,widgetSelectionInfo:e.mirror.selectionProperties.selectedWidgetInfo,publishedCanvasWidgetVersions:e.publishedCanvasWidgetVersions,embedData:e.mirror.selectionProperties.embedData,linkPreviewData:e.mirror.selectionProperties.linkPreviewData,pluginRelaunchData:e.mirror.selectionProperties.pluginRelaunchData,numSelected:e.mirror.selectionProperties.numSelected,attributionContextKey:e.sharingAttributionContextKey,editorType:l,isOrgMember:(0,mK.canMemberOrg)(e.currentUserOrgId,e),isDevHandoff:l===eq.nT.DevHandoff,isLimitedDevMode:(0,ag.$A)(e.selectedView)&&!(0,U.tn)(e)}}),E=(0,aq.vh)(),v=(0,ea7.Ne)(),y=(0,aq.LC)(),b=(0,vo.FS)(),C=(0,n6.GS)();return f.createElement(elf,{...e,...h,dispatch:c,spellCheckPreference:g,isPrototypeCanvasEditUiVisible:s,openFile:t,fileByKey:l,allSavedPlugins:u.plugins,recentlyUsedPlugins:n,viewportInfo:a,activeTextReviewPlugin:o,editorType:h.editorType,pluginAllowlist:d,orgSavedPlugins:m,orgPrivatePlugins:p,canAccessDevMode:r,canAccessDevModeEntryPoint:i,hasAIPermission:E,hasSlidesAiTextEnabled:v,isSlidesMode:b,hasFragmentSearchPermission:y,isUI3:C})}function elg(e){let t=(0,_.d4)(af.tB),n=(0,e_.Tg)(),a=(0,lb._X)({subscribeToUpdates_expensive:!0}),l=(0,eB.ud)(),r=(0,U._I)(),i=(0,U.U4)(),o=(0,_.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),s=elb(),c=(0,_.wA)(),d=(0,e_.ll)(),u=(0,e_.Be)(),m=u.orgPlugins,p=(0,eg.h)("plugin"),g=(0,aN.J2)((0,tM.UK)().spellCheckPreference),h=(0,N.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection),n=1===t.length?lE.q.instance.get(t[0]):null,a=null!=n&&("FRAME"===n.type&&!n.resizeToFit||"SYMBOL"===n.type||"SECTION"===n.type),l=e.selectedView.editorType;return{appModel:e.mirror.appModel,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,localExtensions:e.localPlugins,userCanRunPlugins:(0,TT.GP)(e),sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,library:e.library,masterSymbolGUID:e.mirror.selectionProperties.masterSymbolGUID,propertiesPanelShouldShowRemoveAutoLayout:e.mirror.selectionProperties.propertiesPanelShouldShowRemoveAutoLayout,orgEntity:(0,eh.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,user:e.user,fillPaints:e.mirror.selectionProperties.fillPaints,canSetAsFileThumbnail:a&&!(null==n?void 0:n.isInstanceSublayer),canCopyLink:e.mirror.selectionProperties.canCopyLinkToSelection,fileVersion:e.fileVersion,stateGroupSelectionInfo:e.mirror.selectionProperties.stateGroupSelectionInfo,widgetSelectionInfo:e.mirror.selectionProperties.selectedWidgetInfo,publishedCanvasWidgetVersions:e.publishedCanvasWidgetVersions,embedData:e.mirror.selectionProperties.embedData,linkPreviewData:e.mirror.selectionProperties.linkPreviewData,pluginRelaunchData:e.mirror.selectionProperties.pluginRelaunchData,numSelected:e.mirror.selectionProperties.numSelected,attributionContextKey:e.sharingAttributionContextKey,editorType:l,isOrgMember:(0,mK.canMemberOrg)(e.currentUserOrgId,e),isDevHandoff:l===eq.nT.DevHandoff,isLimitedDevMode:(0,ag.$A)(e.selectedView)&&!(0,U.tn)(e)}}),E=(0,aq.vh)(),v=(0,ea7.Ne)(),y=(0,aq.LC)(),b=(0,vo.FS)(),C=(0,n6.GS)();return f.createElement(elf,{...e,...h,dispatch:c,spellCheckPreference:g,isPrototypeCanvasEditUiVisible:s,openFile:t,fileByKey:l,allSavedPlugins:u.plugins,recentlyUsedPlugins:n,viewportInfo:a,activeTextReviewPlugin:o,editorType:h.editorType,pluginAllowlist:d,orgSavedPlugins:m,orgPrivatePlugins:p,canAccessDevMode:r,canAccessDevModeEntryPoint:i,isSingleSlideViewCarousel:!0,hasAIPermission:E,hasSlidesAiTextEnabled:v,isSlidesMode:b,hasFragmentSearchPermission:y,isUI3:C})}function elh({expandElement:e,guid:t,...n}){let a=(0,_.d4)(e=>e.mirror.sceneGraphSelection),l=(0,_.d4)(e=>e.mirror.appModel),r=(0,_.d4)(e=>e.mirror.sceneGraph),i=(0,tR.hA)()??void 0,o=(0,_.d4)(e=>e.openFile),s=(0,_.d4)(e=>e.mirror.selectionProperties.canCopyLinkToSelection),c=(0,cp.Fk)((e,t)=>{let n=e.get(t);return n?n.canHaveAnnotation:null},t),d=(0,cp.Fk)((e,t)=>{let n=e.get(t);return!!n&&n.annotations.length>0},t),u=(0,_.wA)(),m=C.Ay.windows?"Ctrl+":"\u2318",p=[e?{name:"expand-element",callback:e}:null,{separator:!0},c?{name:d?"edit-annotation":"add-annotation",callback:()=>{S.zl.set(ea8.J,!0)}}:null,{separator:!0},navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${m}C`}:null,{action:"copy-text"},{action:"copy-as-svg"},{action:"copy-as-png"},{action:"copy-layer-name"},s?{name:"copy-link",args:{label:(0,eN.t)("fullscreen.context_menu.copy_link",{editorSpecifierString:""})},callback:()=>{if(!o)return;let e=(0,LE.jN)({file:o,nodeId:t,isDevHandoff:!0,devModeFocusId:i,isReadOnly:!0,isFigJam:!1,attributionContext:null});u(gP.S({fileKey:o.key,url:e,source:ea2.d.FULLSCREEN_CONTEXT_MENU,visualBellMessageOverride:void 0}))}}:null],g=n.clientX,h=n.clientY;return f.createElement("div",{className:`${nz.Dm}`},f.createElement(etv.Q,{appModel:l,sceneGraph:r,selectedView:n.selectedView,sceneGraphSelection:a,menuItems:p.filter(kt.t),dispatch:u,showPoint:!1,targetRect:{width:10,height:10,left:g+100,top:h,right:g+110,bottom:h-10},removeDisabledItems:!0,recordingKey:"codeMenu"}))}function elE({...e}){let t=(0,_.d4)(e=>e.mirror.sceneGraphSelection),n=(0,_.d4)(e=>e.mirror.appModel),a=(0,_.d4)(e=>e.mirror.sceneGraph),l=(0,_.wA)(),r=C.Ay.windows?"Ctrl+":"\u2318",i=[];navigator.clipboard&&navigator.clipboard.write&&i.push({name:"copy",shortcutText:`${r}C`,callback:()=>{e.onCopyText()}});let o=e.clientX,s=e.clientY;return f.createElement("div",{className:`${nz.Dm}`},f.createElement(etv.Q,{appModel:n,sceneGraph:a,selectedView:e.selectedView,sceneGraphSelection:t,menuItems:i,dispatch:l,showPoint:!1,targetRect:{width:10,height:10,left:o+100,top:s,right:o+110,bottom:s-10},removeDisabledItems:!0,recordingKey:"codeMenu"}))}function elv(e,t,n,a,l,r,i){return e&&n&&t.commentsEnabled&&C.Ay.isIpadNative?[{name:"add-comment",callback:()=>{!function(e,t,n,a,l){if(!e)return;let r={x:t,y:n-elo};if(l)l({x:r.x,y:r.y,width:36.8,height:36.8});else{let t=(0,lb.$$)(e,r);a(Xv.vV({anchorPosition:t})),a(Xv.CX())}}(n,a,l,r,i)}},{separator:!0}]:[]}function ely(e,t){var n,a,l;if(!e)return[];let r=!!(null==e?void 0:e.figma);return[...function(e,t){var n,a;let{figma:l,textReviewPlugin:r}=e,i=e=>{if(!e)return[];let n=[],a=(null==e?void 0:e.suggestions)||[],l=(null==e?void 0:e.rangeStart)||0,r=(null==e?void 0:e.rangeEnd)||0;for(let e of a.slice(0,3))n.push({action:"replace-selected-text",flags:["design","whiteboard","slides"],displayText:e,recordingKey:`replace-selected-text-${n.length}`,args:{replacementText:e,rangeStart:l,rangeEnd:r},callback(){let e=(0,$.pi)({editorType:(0,eq.oD)(t)});(0,Z.sx)("Spell Check Suggestion Clicked",{productType:e})}});return n},o=i(l),s=i(r);return o.length||s.length?!o.length&&s.length?[{header:!0,name:(null==(n=(0,eE.SH)())?void 0:n.plugin.name)||"Plugin"},...s]:o.length&&!s.length?o:[...o,{name:"replace-selected-text",displayText:(null==(a=(0,eE.SH)())?void 0:a.plugin.name)||"Plugin",children:s}]:[{header:!0,flags:["design","whiteboard"],name:(0,eN.t)("spell_check.no_suggestions_found")}]}(e,t),{separator:!0},...r&&(null==(n=null==e?void 0:e.figma)?void 0:n.rangeText)?[(l=null==(a=null==e?void 0:e.figma)?void 0:a.rangeText,{name:"spell-check-menu-add-word",flags:["design","whiteboard","slides"],callback:async(e,t,n)=>{try{let e=await iD.Ay.post("/api/spell-check-words",{word:l});if(200===e.status){let e=await (0,ea$.Xw)();await e.addWords([l]),et.Y5.triggerAction("redo-spell-checking")}else(0,o2.x1)("spell_check_add_word_error","spell check add word failed http request",{responseStatus:e.status,responseData:e.data},{reportAsSentryError:!0})}catch(e){e.message.includes("The word provided already exists in your dictionary")||(rg.k.error(e),(0,o2.x1)("spell_check_add_word_error","spell check add word error",{err:e},{reportAsSentryError:!0}))}}})]:[]]}function elb(){return(0,aN.J2)((0,aT.aY)())===ei.FAf.PROTOTYPE}function elC({clientX:e,clientY:t,selectedView:n}){let a=(0,_.wA)(),l=(0,_.d4)(e=>e.mirror.appModel),r=(0,af.q5)(),i=f.useCallback(()=>{a(wd.lW({stringToCopy:(0,LE.jN)({file:r,isDevHandoff:!0,isDevModeOverview:!0,isReadOnly:!0,isFigJam:!1,attributionContext:null}),successText:(0,eN.t)("permissions.copy_link_button.visual_bell.copy_summary_link")}))},[a,r]),o=[{name:"page-copy-link",displayText:(0,eN.t)("dev_handoff.status.copy_summary_link"),callback:i}];return f.createElement("div",{className:`${nz.Dm}`},f.createElement(etv.Q,{appModel:l,menuItems:o,dispatch:a,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!1,recordingKey:"overviewMenu"}))}elf.displayName="SelectionContextMenu",elf.refreshCache=new ea4.O(cF.A.duration(1,"day"));var elw=n(802915),elT=n(780700);function elx(){let e=(0,nT.U)(),t=(0,_.wA)(),n=(0,elT.Gt)(null==e?void 0:e.data.pluginId,null==e?void 0:e.data.triggeredFrom),a=(0,elT.dR)(null==e?void 0:e.data.pluginId,null==e?void 0:e.data.triggeredFrom),l=(0,elw.t)(null==e?void 0:e.data.pluginId,n,a);if(!e)return null;let r=e.data.target.height+e.data.target.width>0;return f.createElement(iV.j,{showPoint:r,items:l,onSelectItem:e=>{e.callback&&e.callback("",null,t)},parentRect:e.data.target,dispatch:t,lean:r?"left":"right"})}var elN=n(559681),elS=n(742934);function elk({clientX:e,clientY:t,selectedView:n,targetItem:a,paint:l,onPaintChange:r}){let i=(0,_.wA)(),{appModel:o,sceneGraph:s,sceneGraphSelection:c}=(0,N.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),d=(0,elN.k1)(),u=[];return"DOCUMENT_COLOR"===a.type?u.push({name:"slides-move-to-theme-colors",recordingKey:"moveToThemeColors",callback:()=>{let e=d(a.documentColor);if(!e)return;let t=LH.sD.toKiwi(e);t&&l&&(0,xM.hS)(l)&&l.color&&(0,hu.DA)(l.color,a.documentColor)&&r((0,elS.FW)(t),hf.zk.YES)}}):(u.push({name:"slides-edit-theme-color",recordingKey:"edit",callback:a.onEdit}),u.push({name:"slides-delete-theme-color",recordingKey:"delete",callback:()=>{ei.CWU.deleteVariable(a.variableId)}})),f.createElement("div",{className:nz.Dm},f.createElement(etv.Q,{appModel:o,sceneGraph:s,selectedView:n,sceneGraphSelection:c,menuItems:u,dispatch:i,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!0,recordingKey:"slidesColorPickerContextMenu"}))}var elI=n(563042),elA=n(666456);let elO=(0,cV.Ju)(function({sectionId:e,initialTemplateId:t,initialShelfId:n,onConfirm:a,onCancel:l}){let r=(0,af.tS)();return f.createElement(Y.fu,{name:"section_preset_picker_confirmation_modal_shown",properties:{fileKey:r,sectionId:e,initialTemplateCategory:n,initialTemplateId:t,templateType:uO.n.HubFile}},f.createElement(cK.Rw,{confirmationTitle:f.createElement("div",null,f.createElement("p",{className:nb()(a8.cx.fontSemiBold.font15.$,"section_preset_picker--alertHeader--oa08R")},(0,eN.tx)("whiteboard.section_preset_picker.confirmation_modal.header")),(0,eN.tx)("whiteboard.section_preset_picker.confirmation_modal.description")),confirmText:(0,eN.t)("whiteboard.section_preset_picker.confirmation_modal.confirm_text"),cancelText:(0,eN.t)("whiteboard.section_preset_picker.confirmation_modal.cancel_text"),onConfirm:a,onCancel:l}))},"SectionPresetPickerConfirmationModal");function elL({name:e,leadingIcon:t,onIconClick:n}){return f.createElement("div",{className:"section_preset_picker--headerItemContainer--0R5QO dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L"},f.createElement("button",{className:nb()("section_preset_picker--headerIconButton--tDLql section_preset_picker--iconBase--HKG97",{"section_preset_picker--hover--GYcQi":n}),onClick:n},f.createElement(a2.B,{svg:t})),f.createElement("div",{className:"section_preset_picker--headerText--XZRQV section_preset_picker--textContainer--dyEMF text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L"},e))}var elP=n(865141),elD=n(851202);function elR(){return f.createElement("div",{className:"section_preset_picker--loadingSpinnerContainer--OM30n"},f.createElement(re.kt,null))}function elM({name:e,description:t,iconUrl:n}){return f.createElement(elB,{name:e,description:t,iconUrl:n,trailingIcon:f.createElement(a2.B,{className:"section_preset_picker--chevronRight--hORsb",svg:elD.A}),itemType:"shelf"})}function elF({name:e,description:t,iconUrl:n,isSelected:a,iconBackgroundColor:l}){return f.createElement(elB,{name:e,description:t,iconUrl:n,trailingIcon:a?f.createElement(a2.B,{svg:elP.A}):void 0,iconBackgroundColor:l,itemType:"template"})}function elB({name:e,description:t,itemType:n,iconUrl:a,trailingIcon:l,iconBackgroundColor:r}){return f.createElement("div",{className:nb()({"section_preset_picker--shelfItemContainer--KochN section_preset_picker--bodyItemContainer--Ani9M dropdown--option--JMVCh dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L":"shelf"===n,"section_preset_picker--templateItemContainer--tCRxk section_preset_picker--bodyItemContainer--Ani9M dropdown--option--JMVCh dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L":"template"===n})},f.createElement("div",{className:nb()({"section_preset_picker--shelfItemIcon--MASDu section_preset_picker--iconBase--HKG97":"shelf"===n,"section_preset_picker--templateItemIcon--eWzYK section_preset_picker--iconBase--HKG97":"template"===n}),style:{backgroundColor:r}},a&&f.createElement("img",{src:a,alt:(0,eN.t)("whiteboard.section_preset_picker.shelf.thumbnail")})),f.createElement("div",{className:"section_preset_picker--textContainer--dyEMF text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},f.createElement("div",{className:"section_preset_picker--nameText--LS4BG"},e),f.createElement("div",{className:"section_preset_picker--descriptionText--OCJkN"},t)),l&&f.createElement("div",{className:"section_preset_picker--trailingIcon--X-run section_preset_picker--iconBase--HKG97"},l))}var elU=n(251344);function elH(){return(0,nS.R)()?301:285}var elG=n(527335),elV=n(192283);let elK="section_preset_item",elW=/^Section(\s\d+)?$/,elz=(0,lf.jz)(lw.IuL),elj=(0,lf.jz)(lw.LQy);function elJ({sectionId:e,sectionName:t,initialShelfId:n,initialTemplateId:a,showAlertOnSelect:l}){let r,i;let o=(0,_.wA)(),s=(0,af.tS)(),c=(0,S.md)(_x.g),d="hasData"===c.state?c.data:[],u=0!==d.length,[m,p]=(0,f.useState)(n),[g,h]=(0,f.useState)(!1),[E,v]=(0,f.useState)(!1),y=(0,vp.fG)(),b=function(){let e=(0,af.tS)(),t=(0,_.d4)(e=>e.fileVersion),n=(0,e2.Xr)(elA.ME);return(0,f.useCallback)((a,l)=>n({fileKey:e,fileVersion:t,template:a},l),[e,t,n])}(),C=(0,e2.Xr)(elA.Yq),w=(0,e2.Xr)(elA.pn),T=(0,e2.Xr)(elA.bj),x=(0,S.md)(elA.oh),N=(0,S.md)(elA.pF),k=(0,mP.q)(),I=(0,S.md)(elA.pg),A=function(e,t){let n=(0,lb._X)({subscribeToUpdates_expensive:!0}),a=n.zoomScale,l=elH(),r=(0,f.useMemo)(()=>{let t=lE.q.instance.get(e);if(!t)return null;let n=t.absoluteBoundingBox;return{canvasSpaceSectionTopLeft:t.canvasSpaceSectionTopLeft,canvasSpaceSectionOrigin:{x:n.x,y:n.y}}},[a,e]);if(!r)return null;let{canvasSpaceSectionTopLeft:i,canvasSpaceSectionOrigin:o}=r,s=(0,lb.Z0)(n,{x:i.x,y:i.y},!0),c={x:s.x-8,y:s.y},d=(0,lb.Z0)(n,o,!0),u=Math.max(c.y+n.y,n.y+8),m={top:u,bottom:u+200,height:200,left:0,right:c.x,width:l},p={x:(0,lb.Qt)(t.x,0,a,0),y:(0,lb.Qt)(t.y,0,a,0)};return{contextMenuRect:m,mouseBoundaryRect:{x:c.x,y:d.y+n.y,width:p.x+8,height:p.y}}}(e,N),O=elH(),L=(0,nS.R)(),P=f.useRef(!1),D=f.useCallback(()=>{C(),w(),h(!1)},[C,w]);(0,f.useEffect)(()=>{let e=setTimeout(()=>{v(!0)},500);return()=>clearTimeout(e)},[]),(0,f.useEffect)(()=>()=>{P.current||(C(),w())},[C,w]);let R=null==A?void 0:A.mouseBoundaryRect;if((0,f.useEffect)(()=>{if(!g||!R)return;let e=(0,eu.s)(function(e){var t;let n=(null==(t=document.activeElement)?void 0:t.id)??"";(!R||e.clientX>R.x+R.width||e.clientX<R.x||e.clientY>R.y+R.height||e.clientY<R.y)&&!n.includes(elK)&&D()},16);return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[D,g,R]),!A)return null;let{contextMenuRect:M}=A,F=(n,l,r)=>{if(k&&s&&!I&&(h(!1),(null==x?void 0:x.template.id)!==n.template.id)){if(C(),n.template.id===a){w();return}n.type===uO.n.HubFile&&(0,uI.Zg)({insert:()=>b(n,{moveViewportAfterPreview:!1,priority:"user-visible",previewManager:{nodeType:ei.Z6A.SECTION,options:{nodeId:e,newName:elW.test(t)||l&&t===l?r:null,shelfId:n.category??"",templateId:n.template.id,templateName:(0,vp.gY)(n)}}}),template:n,fileKey:s,dispatch:o,triggeredFrom:"section-preset",userTriggered:!1,isPreview:!0})}},B=e=>{(0,uI.Zg)({insert:()=>T({selectTemplateAfterCommit:!1,moveViewportAfterCommit:!1,priority:"user-visible",editScopeType:o4.zk.USER}),template:e,fileKey:s,dispatch:o,triggeredFrom:"section-preset",userTriggered:!0})},U=t=>{k&&s&&!I&&t.template.id!==a&&(P.current=!0,l?o((0,ty.to)({type:elO,data:{sectionId:e,initialTemplateId:a,initialShelfId:n,onConfirm:()=>B(t),onCancel:()=>D()}})):B(t))},H=m?d.find(e=>e.id===m):void 0;if(H){r={displayText:H.title,render:()=>f.createElement(elL,{name:H.title,leadingIcon:elG.A,onIconClick:()=>{p(null),C()}}),preventDismissOnSelected:!0};let e=n&&a?(0,elU.bO)(d,n,a):null;i=H.shelf_content.map((t,n)=>{var l;let r={type:uO.n.HubFile,template:t,category:m},{name:i,description:o}=y(r),s=(0,elI.$J)(o).trim(),c=(null==(l=(r.template.client_meta?JSON.parse(r.template.client_meta):{}).preset_picker)?void 0:l.thumbnail_url_dark_bg)??"";return{displayText:i,render:()=>f.createElement(elF,{name:i,description:s,iconUrl:c,isSelected:a===r.template.id,iconBackgroundColor:(0,elU.j3)(n)}),onMouseEnter:()=>{F(r,e,i)},callback:()=>U(r)}})}else r={displayText:"Edit section name",render:()=>f.createElement(elL,{name:(0,eN.t)("whiteboard.section_preset_picker.shelf.title"),leadingIcon:elV.A}),preventDismissOnSelected:!0},i=d.map(t=>({displayText:t.title,render:()=>{var e;return f.createElement(elM,{name:t.title,description:t.description,iconUrl:null==(e=t.shelf_meta.preset_picker)?void 0:e.thumbnail_url})},preventDismissOnSelected:!0,callback:()=>{(0,Z.sx)("section_preset_picker_category_clicked",{fileKey:s,sectionId:e,selectedCategory:t.id,initialTemplateCategory:n,initialTemplateId:a}),p(t.id),C()}}));if(!u){if(!E)return null;i.push({displayText:"Loading",render:()=>f.createElement(elR,null),disabled:!0})}return f.createElement(Y.fu,{name:"section_preset_picker_shown",enabled:u,properties:{fileKey:s,sectionId:e,initialTemplateCategory:n,initialTemplateId:a,templateType:uO.n.HubFile}},f.createElement(iV.j,{items:[r,...i],recordingKey:elK,showPoint:!1,parentRect:M,depth:0,onSelectItem:e=>{e.callback&&e.callback("",null,o)},onMouseLeaveMenu:e=>{if(e.clientX>=M.right){h(!0);return}D()},dispatch:o,minBottomMargin:L?elj:elz,lean:"left",leanPadding:0,type:nN.it.PRESET_PICKER,minWidth:O,disableDropdownScrollContainer:!0,displayOverTarget:!0,preventZoom:!0}))}function elY(e){return{attachmentId:e.id,attachmentUploadedAt:e.uploadedAt.toString(),imageUrlPrefix:function(e){if(-1!==e.search("blob"))return"blob";let t=e.search("/images/");if(-1!==t)return e.substring(0,t)}(e.imageUrl)}}function elX(e){let t=(0,_.wA)(),n=(0,_.d4)(e=>e.mirror.appModel),a=e.clientX,l=e.clientY,r=async t=>{let n=await fetch(e.attachment.imageUrl,{mode:"cors"}),a=await n.blob();if(!t)return a;if("image/jpeg"===a.type||"image/gif"===a.type){let e=await createImageBitmap(a),t=document.createElement("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");return null==n||n.drawImage(e,0,0),new Promise(e=>{t.toBlob(t=>{e(t)},"image/png")})}return a},i=[{name:"download-attachment",callback:async()=>{try{await r(!1).then(n=>{let a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=(0,eN.t)("comments.attachment_default_name",{fileExtension:n.type.split("/")[1]}),l.click(),URL.revokeObjectURL(a),(0,Z.sx)("Comment Attachment Download Success",elY(e.attachment)),t(eS.F.enqueue({message:(0,eN.t)("comments.download_attachment_success"),type:"attachment-download"}))})}catch(n){(0,Z.sx)("Comment Attachment Download Failure",elY(e.attachment)),(0,o2.$D)(o5.e.FEEDBACK,n),t(eS.F.enqueue({message:(0,eN.t)("comments.download_attachment_error"),type:"attachment-download",error:!0}))}}},{name:"copy-attachment",callback:async()=>{t(eS.F.enqueue({message:(0,eN.t)("comments.copying_attachment"),type:"copy-attachment",icon:uN.zX.SPINNER}));try{await r(!0).then(async n=>{let a=new ClipboardItem({[n.type]:n});await navigator.clipboard.write([a]).then(()=>{(0,Z.sx)("Comment Attachment Copy Success",elY(e.attachment)),t(eS.F.enqueue({message:(0,eN.t)("comments.copy_attachment_success"),type:"copy-attachment"}))})})}catch(n){(0,Z.sx)("Comment Attachment Copy Failure",elY(e.attachment)),(0,o2.$D)(o5.e.FEEDBACK,n),t(eS.F.enqueue({message:(0,eN.t)("comments.copy_attachment_error"),type:"copy-attachment",error:!0}))}}}];return f.createElement(etv.Q,{appModel:n,menuItems:i,targetRect:{width:10,height:10,left:a+100,top:l,right:a+110,bottom:l-10},showPoint:!1,selectedView:e.selectedView,recordingKey:"comment-context-menu",dispatch:t})}var elq=n(91425);function elZ({targetInViewport:e,annotationsCount:t,selectedView:n}){var a;let l=(0,_.wA)(),r=(0,_.d4)(e=>e.mirror.appModel),i=(0,_.d4)(e=>e.mirror.sceneGraph),o=(0,a3.U)("annotations_button"),s=(0,lb.ni)(),c=(0,U._I)(),d=(0,U.U4)(),u=(a=()=>o("handoff"),c?[{name:"view-annotations",callback:a,flags:["design"]}]:d?[{header:!0,name:(0,eN.t)("dev_handoff.annotation.number_annotations",{count:t})},{separator:!0},{render:()=>f.createElement(eaG,null),optionHeight:32,flags:["design"]}]:[{header:!0,name:(0,eN.t)("dev_handoff.annotation.number_annotations",{count:t})}]),m=e.origin.x+s.x,p=e.origin.y+s.y,g={left:m,top:p,right:m+e.size.x,bottom:p+e.size.y,width:e.size.x,height:e.size.y};return f.createElement("div",{className:nz.Dm},f.createElement(etv.Q,{appModel:r,sceneGraph:i,selectedView:n,menuItems:u,dispatch:l,showPoint:!0,targetRect:g,removeDisabledItems:d,recordingKey:"annotationsButtonMenu",minWidth:50,allowDisabledOnly:!d}))}var elQ=n(440535);function el$(e){let t=(0,_.wA)(),n=(0,ay.I_)(),a=(0,_.d4)(e=>e.mirror.appModel);if(!(0,_.d4)(e=>(0,f1.U2)(e.selectedView)))return null;let{thread:l}=e,r=!!l.comments.find(e=>e.isUnread),i=!!l.isPendingFromSinatra,o=null,s=n.commentReceipts;s&&(o=r?{name:"mark-as-read",callback:()=>{t(Xv.AY({receiptsAPI:s,thread:l}))}}:{name:"mark-as-unread",callback:()=>{t(Xv.QY({receiptsAPI:s,comment:l.comments[0]}))}});let c=[];i||((0,elQ.m)(l.sidebarItemType)?c.push({name:"resolve",callback:()=>{t(Xv.hx({thread:l,resolved:!0}))},disabled:null!=l.commentPin},o,{name:"copy-link",callback:()=>{e.copyLink(l.comments[0])}},{separator:!0}):c.push({name:"copy-link",callback:()=>{e.copyLink(l.comments[0])}},{separator:!0})),c.push({action:"toggle-show-comments",displayText:(0,eN.t)("fullscreen.context_menu.hide_comments")});let d=c.filter(e=>e).map(e=>e),u={width:224,height:129,left:e.pinClientRect.x,top:e.pinClientRect.y,right:e.pinClientRect.x+e.pinClientRect.width,bottom:e.pinClientRect.y+e.pinClientRect.height};return f.createElement(etv.Q,{appModel:a,menuItems:d,targetRect:u,showPoint:!1,selectedView:e.selectedView,recordingKey:"comment-context-menu",dispatch:t})}function el0({pageId:e,clientX:t,clientY:n,selectedView:a}){let l=(0,_.wA)(),r=(0,_.d4)(e=>e.mirror.appModel),i=(0,cp.Fk)((e,t)=>{var n;return null==(n=e.get(t))?void 0:n.isPageDivider},e),o=[{action:"page-copy-link",args:{nodeId:e},disabled:i}];return f.createElement("div",{className:`${nz.Dm}`},f.createElement(etv.Q,{appModel:r,menuItems:o,dispatch:l,selectedView:a,showPoint:!1,targetRect:{width:10,height:10,left:t+100,top:n,right:t+110,bottom:n-10},removeDisabledItems:!1,recordingKey:"pageMenu"}))}var el1=n(396226),el2=n(300874),el5=n(454351),el4=n(206089),el3=n(129531),el6=n(391993);function el7({clientX:e,clientY:t,pageIds:n,selectedView:a,shouldShowDuplicateOption:l}){let r=(0,_.wA)(),i=(0,uR.Bq)(),o=(0,_.d4)(e=>e.mirror.appModel),s=(0,af.q5)(),c=(0,eb.p8)("pagesList"),d=(0,cm.HZ)(),u=el1.F.useShouldHideStarterCtaForOpenFile(),m=1===n.length?function({pageId:e,openFile:t,pagesList:n,team:a,shouldShowDuplicateOption:l,shouldPaywallForDraftsPageLimitV1:r,dispatch:i,hideUpsellPlanCta:o,newFileState:s}){var c;let d=n.length,u=n.filter(e=>!e.isDivider).length,m=n.find(t=>t.nodeId===e),p=!!m&&m.isDivider,f=()=>(0,y.kc)().move_page_to_new_file&&m&&t?((0,o2.ED)("getPageMoveMenuItem","Parameters",{pageId:e,folderId:"1",fileKey:t.key}),{name:"page-move-to-new-file",callback:()=>{!function(e,t,n,a,l={},r=!0){if(!e)return;let i={...l,type:el5.A.FILE,fileKey:e.key,file:e,afterFileMove:void 0,isMovePageToNewFile:r,page_id:n};t(ty.to({type:el4.J,data:i}))}({key:t.key,name:t.name,folder_id:t.folderId,team_id:t.teamId,editor_type:t.editorType},i,e)}}):null,_=l?(c=p?(0,eN.t)("fullscreen_actions.divider-duplicate"):(0,eN.t)("fullscreen_actions.page-duplicate"),t&&((0,cw.J9)({openFile:t,pageCount:d})||r({openFile:t,pageCount:d}))?{name:"page-duplicate",callback:()=>{i((0,ty.to)({type:el3.DV,data:{team:a,resource:el2.vL.PAGE,action:enx.ZN.DUPLICATE_PAGE,editorType:t.editorType,currentPlan:el1.F.Plan.STARTER,upsellPlan:el1.F.Plan.PRO,hideUpsellPlanCta:o}}))},displayText:c}:{action:"page-duplicate",args:{nodeId:e},loadingIndicatorString:"Duplicating",displayText:c}):null;return p?[_,f(),{action:"page-delete",args:{nodeIds:[e]},loadingIndicatorString:"Deleting",displayText:(0,eN.t)("fullscreen_actions.divider-delete")}]:[{action:"page-copy-link",args:{nodeId:e}},{separator:!0},{action:"page-rename",args:{nodeId:e},displayText:(0,eN.t)("fullscreen_actions.pages-rename",{pageCount:1})},_,f(),{separator:!0},{action:"page-delete",callback:()=>i(FX.PK({})),args:{nodeIds:[e]},loadingIndicatorString:"Deleting",disabled:1===u,displayText:(0,eN.t)("fullscreen_actions.pages-delete",{pageCount:1})},...(0,y.kc)().piper_present_summary&&m&&t&&t.editorType===a_._Y.WHITEBOARD?[{separator:!0},{name:"create-outline-from-figjam-pages",callback:()=>(0,el6.D)([e],i,s)}]:[null]]}({pageId:n[0],team:s?s.team:null,shouldShowDuplicateOption:l,openFile:s,pagesList:c,shouldPaywallForDraftsPageLimitV1:d,dispatch:r,hideUpsellPlanCta:u,newFileState:i}):function({pageIds:e,pagesList:t,dispatch:n,newFileState:a}){let l=new Set(t.filter(e=>!e.isDivider).map(e=>e.nodeId)),r=e.filter(e=>l.has(e)),i=r.length;return 0===i?[]:[{action:"batch-page-rename",args:{nodeIds:r},displayText:(0,eN.t)("fullscreen_actions.pages-rename",{pageCount:i})},{separator:!0},{action:"page-delete",callback:()=>n(FX.PK({})),args:{nodeIds:r},loadingIndicatorString:"Deleting",displayText:(0,eN.t)("fullscreen_actions.pages-delete",{pageCount:i}),disabled:l.size<=i},...((t,n)=>{if(!(0,y.kc)().piper_present_summary)return[null];let a=S.zl.get(af.yV);return a&&a.editorType===a_._Y.WHITEBOARD?[{separator:!0},{name:"create-outline-from-figjam-pages",callback:()=>(0,el6.D)(Array.from(e),t,n)}]:[null]})(n,a)]}({pageIds:n,pagesList:c,dispatch:r,newFileState:i});return f.createElement("div",{className:`${nz.Dm}`},f.createElement(etv.Q,{appModel:o,menuItems:(0,C7.WI)(m),dispatch:r,selectedView:a,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!1,isLimitedDevMode:!1,recordingKey:"pageMenu"}))}let el8=(0,e4.eU)("");function el9({onResult:e}){let[t,n]=(0,S.fp)(el8),a=(0,f.useCallback)(e=>{n(e.target.value)},[n]),l=(0,_.d4)(e=>(0,ag.$A)(e.selectedView)),r=(0,f.useCallback)(()=>{e(t),n("")},[t,e,n]),i=f.useCallback(e=>{switch(e.keyCode){case b.Uz.SPACE:case b.Uz.ENTER:r(),e.stopPropagation();return}},[r]);return f.createElement("div",{className:"ready_status_menu_item--menuItemContainer--Uy01z","data-preferred-theme":"dark","data-editor-theme":l?"dev-handoff":"design"},f.createElement(a1.ks,{placeholder:(0,eN.t)("dev_handoff.status.menu_note_placeholder"),type:"textarea",value:t,onChange:a,maxLength:1e3,className:"ready_status_menu_item--textInput--iqTJf",onKeyDown:e=>{e.stopPropagation(),"Enter"!==e.key||e.shiftKey||r()},autoFocus:!0,"data-preferred-theme":l?void 0:"dark"}),f.createElement(a1.vd,{onClick:r,onKeyDown:i,className:"ready_status_menu_item--comfirmButton--BsFi9",recordingKey:"markReady"},(0,eN.tx)("dev_handoff.status.menu_note_button")))}let ere="status_context_menu--headerStrong--9G-Jb";function ert({targetInViewport:e,nodeId:t,selectedView:n}){let a=(0,_.wA)(),l=(0,_.d4)(e=>e.mirror.appModel),r=new lE.q,i=(0,lh.mJ)(t),o=!!(null==i?void 0:i.hasReadyStatus),s=!!(null==i?void 0:i.hasCompletedStatus),c=o||s,d=(0,VJ.D)()&&!!(null==i?void 0:i.hasBeenEditedSinceLastStatusChange),u=(0,af.q5)(),m=(0,a3.U)("status_label_menu"),p=(0,lb.ni)(),g=(0,U._I)(),h=(0,U.U4)(),E=(0,VJ.D)(),v=g&&E,y=(0,tl.Yh)(l,"set-selection-completed-status"),b=(0,tl.Yh)(l,"mark-incomplete"),C=(0,a6.U)(),w=(0,Q.E3)(),[,T]=(0,S.fp)(I0),x=(0,f.useMemo)(()=>ei.w3z.isReadOnly(ei.SES.NODE_STATUS),[]),k=ei.w3z.canEditNodeStatus(),I=h&&x&&!g,A=(0,N.R)(e=>"fullscreen"===e.selectedView.view?{...e.selectedView,editorType:eq.nT.DevHandoff,focusViewBackNavigation:{toEditorType:e.selectedView.editorType,toOverview:!1},devModeFocusId:t}:e.selectedView),O=(0,cm.dh)(),L=(0,f.useMemo)(()=>{if(!u)return[];let e=b?{name:"status-mark-as-ready",callback:()=>{sL.z4.setNodesReady(!0,[t],"canvas",null)},flags:["dev_handoff","design"]}:null,l=y?{name:"status-mark-as-completed",callback:()=>{sL.z4.setNodesCompleted([t],"canvas")},flags:["dev_handoff","design"]}:null,r=o?l:e,i={name:"ready-status-copy-dev-link",callback:()=>{let e=(0,LE.jN)({file:u,nodeId:t,isDevHandoff:!0});a(gP.S({fileKey:u.key,url:e,source:ea2.d.STATUS_DROPDOWN_MENU}))},flags:["dev_handoff","design"]},p=h?[{name:"ready-status-open-in-dev-mode",callback:()=>{m("handoff")},flags:["design"]},i]:[i],_={separator:!0,flags:["design","dev_handoff"]},g=[_,{render:()=>f.createElement(eaU,null),optionHeight:32,flags:["design"]}],E=[{name:"enter-dev-mode-focus-view",callback:()=>{C("Dev Mode Canvas Focus Entry Clicked",{nodeId:"devModeFocusId"in A?A.devModeFocusId:""}),m("handoff"),T(w===eq.nT.DevHandoff?"dev_mode_canvas":"design_canvas"),a(nI.$T(A))},flags:["design","dev_handoff"]},{name:"status-copy-focus-link",callback:()=>{let e=(0,LE.jN)({file:u,nodeId:O,isDevHandoff:!0,devModeFocusId:(null==n?void 0:n.devModeFocusId)??t});a(gP.S({fileKey:u.key,url:e,source:ea2.d.STATUS_DROPDOWN_MENU}))},flags:["dev_handoff","design"],alwaysShowCheckMarkOffset:!1}],x=v&&!sL.z4.getIsExtension()?E:p;if(!k)return[...x,...I?g:[]];let N=[...x,...r?[_,r]:[],_,{name:"status-remove",callback:()=>{sL.z4.setNodesReady(!1,[t],"canvas",null)},flags:["dev_handoff","design"],alwaysShowCheckMarkOffset:!1},...I?g:[]];return c?d?[{name:"completed-status-remark-as-ready",displayText:s?(0,eN.t)("dev_handoff.status.menu_title_design_changed_since_completed"):(0,eN.t)("dev_handoff.status.menu_title_design_changed_since_ready"),displayTextClassName:ere,children:N,showDotDotDotButton:!0},{render:()=>f.createElement(el9,{onResult:e=>{sL.z4.setNodesReady(!0,[t],"canvas",e??null),a(nI.oB())}}),preventDismissOnSelected:!0,preventSelectOnMouseEnter:!0,allowClickThrough:!0,flags:["design","dev_handoff"]}]:N:[{header:!0,name:(0,eN.t)("dev_handoff.status.menu_title_start_handoff_title"),displayTextClassName:ere},{render:()=>f.createElement(el9,{onResult:e=>{sL.z4.setNodesReady(!0,[t],"canvas",e??null),a(nI.oB())}}),flags:["design","dev_handoff"]}]},[u,y,b,O,o,h,k,I,t,m,a,v,c,d,A,null==n?void 0:n.devModeFocusId,s,w,T,C]),P=e.origin.x+p.x,D=e.origin.y+p.y,R={left:P,top:D,right:P+e.size.x,bottom:D+e.size.y,width:e.size.x,height:e.size.y};return f.createElement("div",{className:`${nz.Dm}`},f.createElement(etv.Q,{appModel:l,sceneGraph:r,selectedView:n,menuItems:L,dispatch:a,showPoint:!0,targetRect:R,removeDisabledItems:!0,recordingKey:"readyStatusMenu",minWidth:176}))}function ern(e){let t=(0,_.d4)(e=>!e.mirror.appModel.isReadOnly),n=(0,_.d4)(e=>e.openFile),a=(0,ew.iZ)();(0,_.d4)(e=>(null==n?void 0:n.team)||null);let l=(0,e_.JI)(),r=(0,_.d4)(e=>{var t;return!!(null==(t=e.openFile)?void 0:t.canEdit)}),i=(0,_.wA)(),o=e.dropdownShown.type,s=(0,elq.v)();if(o===nz.K9){let{clientX:n,clientY:a}=e.dropdownShown.data;return f.createElement(el_,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1})}if(o===nz.wi){let{clientX:n,clientY:a}=e.dropdownShown.data;return f.createElement(el_,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isSelectLayerMenu:!0,isObjectsPanelMenu:!1})}if(o===nz.ku){let{clientX:n,clientY:a}=e.dropdownShown.data;return f.createElement(el_,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1,isTextEditModeMenu:!0})}if(o===nz.t4){let{clientX:n,clientY:a,axis:r,rulerGuideContextMenuType:i}=e.dropdownShown.data;return f.createElement(el_,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1,isTextEditModeMenu:!1,isRulerGuideMenu:!0,axis:r,rulerGuideContextMenuType:i})}if(o===nz.Rb){let{clientX:n,clientY:a}=e.dropdownShown.data;return f.createElement(el_,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0})}if(o===nz.W_){let{clientX:n,clientY:a}=e.dropdownShown.data;return f.createElement(eld,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0,ariaLabelledBy:e.ariaLabelledBy})}if(o===nz.LO)return f.createElement(elx,null);else if(o===nz.SA){let{clientX:t,clientY:n,pageId:a}=e.dropdownShown.data;return f.createElement(el0,{pageId:a,clientX:t,clientY:n,selectedView:e.selectedView})}else if(o===nz.bx){let{clientX:t,clientY:n}=e.dropdownShown.data;return f.createElement(elC,{clientX:t,clientY:n,selectedView:e.selectedView})}else if(o===nz.d2){let{clientX:t,clientY:n,pageIds:a,shouldShowDuplicateOption:l}=e.dropdownShown.data;return f.createElement(el7,{pageIds:a,clientX:t,clientY:n,selectedView:e.selectedView,shouldShowDuplicateOption:l})}else if(o===nz.$O){let{clientX:t,clientY:n,version:a,checkpointKey:i,callback:o,editName:s,enableClear:c,disableDuplicate:d}=e.dropdownShown.data;return f.createElement(elm,{version:a,checkpointKey:i,clientX:t,clientY:n,selectedView:e.selectedView,userCanEditFile:r,userCanRunPlugins:l,isObjectsPanelMenu:!1,editName:s,enableClear:c,disableDuplicate:d,callback:o})}else if(o===nz.VJ){let{comment:t,parentRect:n,thread:l,isUnread:r}=e.dropdownShown.data;return f.createElement(eaR.V,{dispatch:i,comment:t,parentRect:n,currentUser:a,isUnread:r,thread:l,copyLink:s})}else if(o===nz.Z7){let{thread:t,pinClientRect:n}=e.dropdownShown.data;return f.createElement(el$,{selectedView:e.selectedView,thread:t,pinClientRect:n,copyLink:s})}else if(o===nz.DT){let{attachment:t,clientX:n,clientY:a}=e.dropdownShown.data;return f.createElement(elX,{attachment:t,selectedView:e.selectedView,clientX:n,clientY:a})}else if(o===nz.i){let{clientX:n,clientY:a,stringToCopy:r,expandElement:i,guid:o}=e.dropdownShown.data;return f.createElement(elh,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0,stringToCopy:r,expandElement:i,guid:o})}else if(o===nz.Sl){let{clientX:n,clientY:a,onCopyText:r}=e.dropdownShown.data;return f.createElement(elE,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0,onCopyText:r})}else if(o===nz.WJ){let{targetInViewport:n,nodeId:a}=e.dropdownShown.data;return f.createElement(ert,{targetInViewport:n,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0,nodeId:a})}else if(o===nz.XX){let{targetInViewport:n,annotationsCount:a}=e.dropdownShown.data;return f.createElement(elZ,{targetInViewport:n,annotationsCount:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0})}else if(o===nz.si){let{sectionId:n,initialShelfId:a,initialTemplateId:r,sectionName:i,showAlertOnSelect:o}=e.dropdownShown.data;return f.createElement(elJ,{sectionId:n,sectionName:i,initialShelfId:a,initialTemplateId:r,showAlertOnSelect:o,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0})}else if(o===nz.U3){let{clientX:n,clientY:a}=e.dropdownShown.data;return f.createElement(elg,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1})}else if(o===nz.kX){let{clientX:t,clientY:n,targetItem:a,paint:l,onPaintChange:r}=e.dropdownShown.data;return f.createElement(elk,{clientX:t,clientY:n,selectedView:e.selectedView,targetItem:a,paint:l,onPaintChange:r})}else if(o===nz.J7){let{clientX:n,clientY:a}=e.dropdownShown.data;return f.createElement(Cl.mh,{clientX:n,clientY:a,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1,isTextEditModeMenu:!0})}return null}var era=n(75472);function erl(){let e=(0,e2.Xr)(gz.mH),t=(0,gj.XC)((0,S.md)(gz.a8));return(0,y.kc)().cursor_bot&&t?f.createElement("div",{className:h3.CR,"data-testid":"cursor-bot-fullscreen-event-blocker",onClick:()=>{e(!0)}}):null}function err({background:e,showSpinner:t}){let n=f.useContext(fP.kw),{x:a,y:l,width:r}=n.getViewportInfo(),i={background:e},o=window.innerWidth-r;return n&&(i={...i,width:`calc(100vw - ${o}px)`,height:`calc(100vh - ${l}px)`,top:`${l}px`,left:`${a}px`}),f.createElement("div",{className:"loading_overlay--pageSyncing--9AqbU"},f.createElement("div",{className:nb()("loading_overlay--blurredOverlay--79bya",nz.Dm),style:i}),t&&f.createElement(re.dW,{className:"loading_overlay--pageSyncingSpinner--rjAvP"}))}function eri(){var e;let t=(0,a6.U)(),n=(0,_.d4)(e=>e.selectedView),a=null==(e=(0,_.d4)(e=>e.versionHistory))?void 0:e.isLoadingPage,l=(0,ga.DP)(),{isLoading:r}=(0,Am.v9)({selectedView:n,isLoadingVersionHistory:a,theme:l}),i=(0,_.d4)(e=>e.mirror.appModel.multiplayerSessionState),o=(0,Ag.y)(),s=(0,_.wA)(),[c,d]=f.useState(null),u=(0,v.ZC)(r);return f.useEffect(()=>{if((0,y.kc)().long_page_change_notif){if(ei.h3O.isIncrementalSession()&&r)r!==u&&o&&i!==ei.kul.JOINED&&(d(Date.now()),s(eS.F.enqueue({message:"Page change may take longer during staging deploy",error:!1,delay:3e3,type:"long-page-change",timeoutOverride:1/0})));else{let e=c?Date.now()-c:0;e<3e3||e>9e3?(s(eS.F.dequeue({matchType:"long-page-change"})),d(null)):setTimeout(()=>{s(eS.F.dequeue({matchType:"long-page-change"})),d(null)},Math.max(0,9e3-e))}}},[r,i,o,s,c,u]),f.createElement(ero,{onPageLoadingFinish:e=>{t("page_loading_overlay",{timeElapsedMs:e})},selectedView:n,isLoadingVersionHistory:a,theme:l})}function ero({onPageLoadingFinish:e,selectedView:t,isLoadingVersionHistory:n,theme:a}){let{isLoading:l,isLoadingMissingFonts:r,background:i}=(0,Am.v9)({selectedView:t,isLoadingVersionHistory:n,theme:a});return((0,f.useEffect)(()=>{if(!l){let t=b7.sn.tryStop("page_loading_overlay");t&&e&&e(t)}},[l,e]),l)?(b7.sn.get("page_loading_overlay")||b7.sn.start("page_loading_overlay"),f.createElement(err,{background:i,showSpinner:!r})):null}var ers=n(763142),erc=n(947087),erd=n(99888),eru=n(720756),erm=n(458516);class erp extends n_.o6{constructor(e){super(e),this.onKeyDownFromFullscreen=e=>{e.accept(),this.props.onKeyDown(e.event)},this.onContainerClick=e=>{e.stopPropagation()}}componentDidMount(){super.componentDidMount(),document.addEventListener("keydown",this.props.onKeyDown)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("keydown",this.props.onKeyDown)}render(){let e={left:window.innerWidth/2-200,top:window.innerHeight/8,width:400};return f.createElement(Bo.vL,{name:this.props.recordingKey||"",handleKeyDown:this.onKeyDownFromFullscreen,focusOnMount:!0},f.createElement(nC.W.Dropdown,{className:`${erm.DU} ${nz.Dm}`,style:e,"data-testid":this.props["data-testid"]},f.createElement("div",{onClick:this.onContainerClick},this.props.children)))}}class erf extends n_.o6{constructor(e){super(e),this.scrollContainerRef=f.createRef()}scrollElementAtIndexIntoView(e){if(this.props.resultCount>=10){let t=this.scrollContainerRef.current.getScrollTop(),n=32*e,a=32*e+32;n<t?this.scrollContainerRef.current.scrollTo(n):a>t+304&&this.scrollContainerRef.current.scrollTo(a-304)}}render(){let e=this.props.resultCount,t=Math.min(Math.max(e,1),10);return f.createElement(i6.P,{ref:this.scrollContainerRef,width:400,height:32*t+(e>=10?-16:8),hideScrollbar:!0,role:this.props.role,contentId:this.props.id},this.props.children,f.createElement("div",{style:{height:8}}))}}var er_=n(28177),erg=n(774419),erh=n(377849);let erE="Loading suggestions...";function erv(e){(0,nm.vA)(null!==e,"We should never be in the middle state if there are no optional parameters")}class ery extends n_.o6{constructor(e){let t;if(super(e),this.searchInputRef=f.createRef(),this.scrollContainerRef=f.createRef(),this.searchBarRef=f.createRef(),this.primaryPlaceholderTextRef=f.createRef(),this.ranWithParameters=!1,this.runArgs=null,this.loadingTimerID=null,this.pendingLoadingMessage=null,this.firstOptionalIndex=null,this.eventID=0,this.onSuggestions=e=>{switch(e.type){case"SUGGESTIONS":{let t=this.getDropdownItems(e.suggestions,this.state.searchQuery,this.state.activeParameterIndex),n=t.findIndex(e=>(function(e){return"freeform"!==e&&"skip"!==e})(e)),a=n>=0?n:this.state.activeItemIndex,l=t.length||!this.state.searchQuery?null:(0,eN.t)("fullscreen_actions.no_matches");this.clearLoadingMessage(),this.setState({activeItemIndex:a,items:t,errorMessage:l});break}case"ERROR":this.clearLoadingMessage(),this.setState({items:this.getDropdownItems([],this.state.searchQuery,this.state.activeParameterIndex),errorMessage:e.message||(0,eN.t)("fullscreen_actions.no_matches")});break;case"LOADING":this.setLoadingMessage(e.message)}},this.onBackspace=()=>{var e;let t=this.state.activeParameterIndex,n=null;if("middle"===t){if(erv(this.firstOptionalIndex),0===this.firstOptionalIndex){this.props.onExitParameterEntry();return}n=this.firstOptionalIndex-1}else if("final"===t)n=this.props.parameters.length-1;else{if(0===t){this.props.onExitParameterEntry();return}n=t-1}let a={...this.state.parameterValues},l=null==(e=this.getParameterForIndex(n))?void 0:e.key;l&&delete a[l],this.setParameterIndex(n,a)},this.onTextChange=e=>{let t;let n=this.state.activeParameterIndex;if("middle"===n)erv(this.firstOptionalIndex),t=this.firstOptionalIndex;else{if("final"===n)return;t=n}let a=this.props.parameters[t];this.triggerInputEvent({parameterValues:this.state.parameterValues,currentParameter:a,currentSearchQuery:e}),this.setLoadingMessage(erE),this.setState({searchQuery:e,items:this.getDropdownItems([],e,t),activeItemIndex:0,activeParameterIndex:t,mouseMoved:!1,errorMessage:""})},this.onSelectItem=(e,t)=>{let n;let a=this.state.activeParameterIndex;if("final"===a){"enter"===t&&this.launchPluginWithParameters(this.state.parameterValues);return}let l={...this.state.parameterValues};if("middle"!==a){if(0===this.state.items.length)return;let n=this.props.parameters[a];if(e<0||e>=this.state.items.length){let l="Trying to select suggestion at invalid index";console.error(l),(0,o2.Lo)("PluginParameterEntry","invalid index",{index:e,items:this.state.items.length,currentIndex:a,parameter:n.name,keyPress:t}),(0,o2.$D)(o5.e.EXTENSIBILITY,Error(l));return}let r=this.state.items[e];"skip"===r||("freeform"===r?l[n.key]={name:this.state.searchQuery}:((0,nm.KF)(!this.state.loadingMessage,"Selected item while loading"),l[n.key]=r))}let r=this.firstOptionalIndex;if("middle"===a){if(erv(this.firstOptionalIndex),"enter"===t){this.launchPluginWithParameters(l);return}n=this.firstOptionalIndex}else if(a===this.props.parameters.length-1){if("enter"===t){this.launchPluginWithParameters(l);return}n="final"}else n=null!==r&&a===r-1?"tab"===t?r:"middle":a+1;this.setParameterIndex(n,l),this.searchInputRef.current.focus()},this.onKeyDown=n_.C0(this,"keydown",e=>{var t,n;let a=e=>{let t=this.state.activeItemIndex+e;return t<0?this.state.items.length-1:t%this.state.items.length},l=C.Ay.mac?(0,b.vN)(e,b.xH.META):(0,b.vN)(e,b.xH.CONTROL);switch(e.keyCode){case b.Uz.ENTER:e.preventDefault(),this.onSelectItem(this.state.activeItemIndex,"enter");break;case b.Uz.TAB:e.preventDefault(),this.onSelectItem(this.state.activeItemIndex,"tab");break;case b.Uz.DOWN_ARROW:if(e.preventDefault(),this.state.items.length>0){let e=a(1);this.setState({activeItemIndex:e}),null==(t=this.scrollContainerRef.current)||t.scrollElementAtIndexIntoView(e)}break;case b.Uz.UP_ARROW:if(e.preventDefault(),this.state.items.length>0){let e=a(-1);this.setState({activeItemIndex:e}),null==(n=this.scrollContainerRef.current)||n.scrollElementAtIndexIntoView(e)}break;case b.Uz.BACKSPACE:0===this.state.searchQuery.length?(e.preventDefault(),this.onBackspace(),e.stopPropagation()):("final"===this.state.activeParameterIndex||"middle"===this.state.activeParameterIndex)&&e.preventDefault();break;case b.Uz.ESCAPE:e.preventDefault(),this.props.dispatch(nI.oB());break;case b.Uz.P:case b.Uz.FORWARD_SLASH:l&&(e.preventDefault(),this.props.dispatch(nI.oB()));break;case b.Uz.EQUALS:case b.Uz.DASH:l&&(e.preventDefault(),"-"===e.key?et.Y5.triggerAction("zoom-out"):et.Y5.triggerAction("zoom-in"));break;case b.Uz.R:case b.Uz.S:case b.Uz.D:case b.Uz.E:case b.Uz.F:case b.Uz.O:if(l){e.preventDefault();let t=this.state.searchQuery+e.key;this.onTextChange(t)}}}),this.onSearchChange=n_.Z7(this,"change",e=>{let t=e.currentTarget.value;this.onTextChange(t)}),this.renderResult=(e,t,n)=>{let a,l="",r="";return"skip"===t?(l=`Skip "${e.name}"`,r="skip"):"freeform"===t?(l=this.state.searchQuery,r="skip"):(l=t.name,r=t.name,a=erx(t,erm.ZR)),f.createElement(erT,{recordingKey:n_.Pt(this.props,"suggestion",r),active:n===this.state.activeItemIndex,key:n,suggestion:l,onClick:e=>this.onSelectItem(n,"enter"),onMouseMove:()=>{this.state.mouseMoved||this.setState({mouseMoved:!0,activeItemIndex:n})},icon:a,onMouseEnter:()=>{this.state.mouseMoved&&this.setState({activeItemIndex:n})}})},(0,o2.Lo)("PluginParameterEntry","Starting parameter entry for plugin",{parameters:e.parameters,displayName:e.displayName,parameterOnly:e.parameterOnly,pluginId:e.pluginId,pluginLocalFileId:e.pluginLocalFileId,command:e.command}),0===e.parameters.length)throw Error("Must specify at least one parameter");let n=e.parameters.findIndex(e=>e.optional);this.firstOptionalIndex=n<0?null:n,t=e.initialParameterValues?"final":e.parameters[0].optional?"middle":0,this.handler=this.runPlugin();let a=this.getParameterForIndex(t);a&&this.triggerInputEvent({parameterValues:{},currentParameter:a,currentSearchQuery:""}),this.setLoadingMessage("Loading plugin..."),this.state={searchQuery:"",items:[],errorMessage:null,loadingMessage:null,activeItemIndex:0,parameterValues:e.initialParameterValues||{},activeParameterIndex:t,mouseMoved:!1,hidePluginName:!1}}getParameterForIndex(e){return"middle"===e||"final"===e?null:this.props.parameters[e]}getCurrentParameter(){return this.getParameterForIndex(this.state.activeParameterIndex)}runPlugin(){var e;let t=null;if(this.props.pluginId?this.props.allSavedPlugins[this.props.pluginId]?t=this.props.allSavedPlugins[this.props.pluginId]:this.props.publishedPlugins[this.props.pluginId]&&(t=(0,x1.uF)(this.props.publishedPlugins[this.props.pluginId])):this.props.pluginLocalFileId&&(t=this.props.localExtensions[this.props.pluginLocalFileId]),!t)throw Error("Plugin not runnable");let{canRun:n}=(0,x1.JT)({plugin:t,editorType:this.props.editorType});if(!n)throw Error("Plugin not runnable");this.runArgs={plugin:t,command:this.props.command||"",queryMode:!0,runMode:"default",triggeredFrom:"parameter-entry",openFileKey:(null==(e=this.props.openFile)?void 0:e.key)||"",deferRunEvent:!0,isWidget:!1};let a=(0,x2.D)();return TN.R.instance.enqueue({mode:"run-forever",runPluginArgs:this.runArgs}),a}async triggerInputEvent(e){this.eventID++;let t=this.eventID,n=await this.handler;this.eventID===t&&n.triggerParameterInputEvent({...e,onSuggestions:e=>{this.eventID===t&&this.onSuggestions(e)}})}updateLayout(){let e=0===this.state.activeParameterIndex&&!this.props.parameters[0].optional;if(void 0===this.state.placeholderWidth&&!e){if(this.primaryPlaceholderTextRef.current){let e=Math.min(250,Math.max(this.primaryPlaceholderTextRef.current.offsetWidth,120));this.setState({placeholderWidth:e})}else this.setState({placeholderWidth:0})}let t=this.searchBarRef.current,n=t.offsetWidth<t.scrollWidth;e||!n||this.state.hidePluginName||this.setState({hidePluginName:!0}),t.scrollLeft=t.scrollWidth}componentDidMount(){super.componentDidMount(),(0,Z.sx)(eru.yh,(0,eru.ov)({...this.props,qaVersion:erd.U3})),this.searchInputRef.current.focus(),this.updateLayout()}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.updateLayout()}componentWillUnmount(){super.componentWillUnmount(),this.ranWithParameters||(0,w9.wY)();let e=(0,eru.O8)(this.props.parameters,this.state.parameterValues);this.ranWithParameters&&e.requiredEntered!==e.requiredCount&&((0,o2.Lo)("PluginParameterEntry","Parameter entry mismatch",{requiredParameters:this.props.parameters,parameterValues:this.state.parameterValues}),(0,o2.$D)(o5.e.EXTENSIBILITY,Error("Plugin ran successfully with parameters, but not all parameters were recorded")));let t=(0,eru.ov)({...this.props,qaVersion:erd.U3});(0,Z.sx)(eru.rj,{...t,success:this.ranWithParameters,parametersEntered:e.entered,requiredParametersEntered:e.requiredEntered,optionalParametersEntered:e.optionalEntered})}getDropdownItems(e,t,n){if("middle"===n||"final"===n)return[];let a=e.slice(),l=this.props.parameters[n];t.length>0&&l.allowFreeform&&a.unshift("freeform");let r=this.props.parameters[n];return 0===t.length&&r.optional&&a.unshift("skip"),a}setLoadingMessage(e){if(this.loadingTimerID){this.pendingLoadingMessage=e;return}this.pendingLoadingMessage=e,this.loadingTimerID=setTimeout(()=>{this.setState({loadingMessage:this.pendingLoadingMessage}),this.loadingTimerID=null,this.pendingLoadingMessage=null},300)}clearLoadingMessage(){this.loadingTimerID&&(clearTimeout(this.loadingTimerID),this.loadingTimerID=null),this.setState({loadingMessage:null})}setParameterIndex(e,t){let n=this.getParameterForIndex(e);n&&((0,o2.Lo)("PluginParameterEntry","setParameterIndex",{nextParameter:n.name}),this.triggerInputEvent({parameterValues:t,currentParameter:n,currentSearchQuery:""}));let a=!(0===e&&!this.props.parameters[0].optional)&&this.state.hidePluginName;this.searchInputRef.current.focus(),this.setLoadingMessage(erE),this.setState({searchQuery:"",items:this.getDropdownItems([],"",e),activeItemIndex:0,activeParameterIndex:e,parameterValues:t,mouseMoved:!1,errorMessage:null,placeholderWidth:void 0,hidePluginName:a})}launchPluginWithParameters(e){if(this.setState({parameterValues:e}),this.handler.then(async t=>{let{isCancelled:n}=await (0,erc.y)(this.runArgs);n||t.triggerRunEvent({command:"parameters",parameters:e})}),this.runArgs){let t=this.runArgs;if(this.runArgs=null,t.queryMode=!1,t.deferRunEvent=!1,t.parameterValues=e,this.props.recentlyUsedCommandName){let e=this.props.recentlyUsedCommandName;this.props.dispatch(K.Rw({currentDisplayName:e,newCommand:{displayName:e,runPluginArgs:t}}))}(0,eE.C3)(t)}this.ranWithParameters=!0,this.props.dispatch(nI.oB())}renderResults(){if("middle"===this.state.activeParameterIndex)return f.createElement("div",{className:er_.wM},f.createElement("div",{className:er_.FV},f.createElement("div",{className:er_.h8},(0,eN.tx)("fullscreen_actions.plugin_parameters.tab")),f.createElement("div",{className:er_.w8},(0,eN.tx)("fullscreen_actions.plugin_parameters.to_enter_optional_parameters"))),f.createElement("div",{className:er_.FV},f.createElement("div",{className:er_.h8},(0,eN.tx)("fullscreen_actions.plugin_parameters.enter")),f.createElement("div",{className:er_.w8},(0,eN.tx)("fullscreen_actions.plugin_parameters.to_run_plugin"))));if("final"===this.state.activeParameterIndex)return null;let e=this.props.parameters[this.state.activeParameterIndex],t=null;if(this.state.errorMessage?t=f.createElement("div",{className:erm.Tk},this.state.errorMessage):this.state.loadingMessage&&(t=f.createElement("div",{className:erm.Tk},this.state.loadingMessage)),0===this.state.items.length)return t;let n=t?this.state.items.length+1:this.state.items.length;return f.createElement(erf,{ref:this.scrollContainerRef,resultCount:n},this.state.items.map((t,n)=>this.renderResult(e,t,n)),t)}renderCurrentParameters(){var e;let t=null==(e=this.getCurrentParameter())?void 0:e.key,n=erw(this.props.parameters,this.state.parameterValues,t);return f.createElement(f.Fragment,null,f.createElement(erC,{key:"plugin-name",value:this.state.hidePluginName?void 0:this.props.displayName,icon:function(e,t,n){if(!n)return f.createElement(a2.B,{className:er_.nW,svg:erg.A,ariaLabel:"plugin icon"});{let a=e[n];return a||(a=t[n]&&(0,x1.uF)(t[n])),f.createElement(Tn.V,{className:er_.nW,plugin:a,alt:"plugin icon"})}}(this.props.allSavedPlugins,this.props.publishedPlugins,this.props.pluginId)}),n)}placeholderElement(){let e=this.state.activeParameterIndex,t=this.state.searchQuery.length>0;if("final"===e)return f.createElement(f.Fragment,null);if("middle"===e){let e=(0,C7.WI)(this.props.parameters.map(e=>e.optional?e.name:null)).join(", ");return f.createElement("span",{ref:this.primaryPlaceholderTextRef},(0,eN.tx)("fullscreen_actions.plugin_parameters.optional_optional_names",{optionalNames:e}))}{let n=this.props.parameters[e],a=this.props.parameters.slice(e);if(n.optional){let e=a.map(e=>e.name);return t&&(e[0]=""),f.createElement("span",{ref:this.primaryPlaceholderTextRef},e.join(", "))}{let e=(0,C7.WI)(a.map(e=>e.optional?null:e.name)),n=(0,C7.WI)(a.map(e=>e.optional?e.name:null));return t&&(e[0]=""),f.createElement("span",null,f.createElement("span",{ref:this.primaryPlaceholderTextRef},e.join(", ")),n.length>0&&f.createElement(f.Fragment,null,f.createElement("span",{className:er_.yL,key:"divider"},"|"),f.createElement("span",{key:"optionalParams"},(0,eN.tx)("fullscreen_actions.plugin_parameters.optional_optional_names",{optionalNames:n.join(", ")}))))}}}render(){let e=this.getCurrentParameter(),t=null==e?void 0:e.description,n=this.placeholderElement(),a="final"===this.state.activeParameterIndex?er_.ed:er_.Kf,l={minWidth:this.state.placeholderWidth?`${this.state.placeholderWidth}px`:void 0},r=this.renderResults();return f.createElement(erp,{recordingKey:this.props.recordingKey||"",onKeyDown:this.onKeyDown},f.createElement("div",{className:erm.$P},f.createElement(a2.B,{svg:erh.A,className:erm.qc}),f.createElement("div",{className:er_.ON,ref:this.searchBarRef},this.renderCurrentParameters(),f.createElement("div",{className:a},f.createElement("input",{ref:this.searchInputRef,className:er_.t6,onChange:this.onSearchChange,value:this.state.searchQuery,maxLength:150,spellCheck:!1,style:l}),f.createElement("div",{className:er_.l4},f.createElement("div",{className:er_.qf},f.createElement("span",{className:er_.CZ},this.state.searchQuery),n))))),!!t&&f.createElement("div",{className:nb()({[er_.WL]:!0,[er_.$8]:!r})},t),r)}}ery.displayName="PluginParameterEntry";let erb=(0,_.Ng)(function(e){let t=e.selectedView.editorType;return{openFile:e.openFile,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,allSavedPlugins:e.installedPluginVersions.plugins,localExtensions:e.localPlugins,orgEntity:(0,eh.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,editorType:t,userCanRunPlugins:(0,TT.GP)(e),activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin}},function(e){return{dispatch:e}})(ery);function erC(e){return f.createElement("div",{className:er_.Io},e.icon&&f.createElement("span",null,e.icon),e.value&&f.createElement("span",null,e.value))}function erw(e,t,n){return e.filter(e=>t[e.key]&&e.key!==n).map(e=>t[e.key]&&t[e.key].name&&f.createElement(erC,{icon:erx(t[e.key],er_.nW),key:e.key,value:t[e.key].name}))}class erT extends n_.o6{constructor(){super(...arguments),this.onClick=n_.cZ(this,"click",e=>{if(!this.props.onClick)return n_.aH;this.props.onClick(e)})}render(){let e=`${this.props.active?erm.ix:erm.Ke}`;return f.createElement("div",{className:e,onClick:this.onClick,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter},f.createElement("div",{className:erm.EA},this.props.icon),f.createElement("div",{className:er_.iu},f.createElement("div",{className:erm.D6},this.props.suggestion)))}}function erx(e,t){let n="";if(e.iconUrl)n=e.iconUrl;else if(e.icon&&"string"==typeof e.icon)n="data:image/svg+xml;base64,"+ers.aj(e.icon);else{if(!e.icon||"string"==typeof e.icon)return;n="data:application/octet-stream;base64,"+ers.lF(e.icon)}return f.createElement(erN,{className:t,src:n})}erT.displayName="ParameterSuggestion";class erN extends n_.o6{render(){let e=new URL(this.props.src);return e.hostname===window.location.hostname?((0,o2.$D)(o5.e.EXTENSIBILITY,Error("same-origin URL blocked in UntrustedImage")),f.createElement(f.Fragment,null)):["https:","http:","data:","blob:"].includes(e.protocol)?f.createElement("img",{src:this.props.src,className:this.props.className,crossOrigin:"anonymous",alt:""}):((0,o2.$D)(o5.e.EXTENSIBILITY,Error("Unexpected protocol blocked in UntrustedImage")),f.createElement(f.Fragment,null))}}erN.displayName="UntrustedImage";var erS=n(865618),erk=n(516703),erI=n(824767),erA=n(176857),erO=n(999140);function erL(e){let t={name:"",actions:e.map(e=>({key:(0,etw.e)(e),isDisabled:!!e.disabled,resultType:e.pluginId?erd.l4.EXTENSION:erd.l4.ACTION}))};return(0,erO.i6)([t])}function erP({itemPath:e}){let t=f.useRef(null),n=f.useRef(null),a=f.useRef(null),l=f.useRef(null),[r,i]=f.useState("full"),o=(0,v.ZC)(e);f.useEffect(()=>{e!==o&&"full"!==r&&i("full"),"full"===r&&s()},[o,e,r]);let s=()=>{var e,r,o,s,c;let d=null==(e=n.current)?void 0:e.offsetWidth,u=null==(r=l.current)?void 0:r.offsetWidth,m=null==(o=a.current)?void 0:o.offsetWidth,p=null==(s=t.current)?void 0:s.scrollWidth,f=null==(c=t.current)?void 0:c.clientWidth;void 0!==d&&void 0!==u&&void 0!==m&&p&&f&&f<p&&(d+u>f?i("plugin"):i("path"))};if(1===e.length)return f.createElement("span",{ref:l},e[0]);let c=e.slice(1,e.length-1),d=f.createElement(a2.B,{svg:Vo.A,className:erm.VU}),u=f.createElement("span",{ref:n},"plugin"===r?"...":e[0],d),m=f.createElement("span",{ref:a},"plugin"!==r&&f.createElement(f.Fragment,null,"path"===r?f.createElement(f.Fragment,null,"...",d):c.map((e,t)=>f.createElement("span",{key:t},e," ",d))));return f.createElement("div",{ref:t,className:erm.D6},u,m,f.createElement("span",{ref:l},e[e.length-1]))}function erD({runPluginArgs:e,itemParameterArgs:t}){let[n,a]=f.useState(!1),l=f.useRef(null);f.useEffect(()=>{let e=l.current;e.offsetWidth<e.scrollWidth&&!n&&a(!0)},[n]);let r=e.parameterValues;if(r){let e=erw(t.parameters,r);return f.createElement("div",{className:er_.ON,ref:l},f.createElement(erC,{key:"plugin-name",value:n?void 0:t.displayName}),e)}return f.createElement(f.Fragment,null)}var erR=n(901304),erM=n(31470),erF=n(34904),erB=n(539615),erU=n(816679),erH=n(575126),erG=n(961803);let erV=e=>(0,etT.Zj)(e)&&!e.hideCheckForQuickCommand;class erK extends n_.o6{constructor(e){super(e),this.searchInputRef=f.createRef(),this.scrollContainerRef=f.createRef(),this.listboxId=(0,ez.g)(),this.resultPrefix=(0,ez.g)(),this.delayedCloseTimerID=0,this.updateQueryAndResults=e=>{let t;if(e){let n=this.searchIndex.search(this.props.appModel,e.trim());t=this.sortedByEnabledSearchResults(n)}else t=this.recentlyUsedItemsMenu();this.logSearchResults(e,t),this.setState({searchQuery:e,searchResults:t,activeItemIndex:0,mouseMoved:!1})},this.logSearchResults=(e,t)=>{this.props.quickActionsSessionId&&this.props.fireQueryResultTrackingEvent({quickActionsSessionId:this.props.quickActionsSessionId,quickActionsQueryId:this.props.latestQuerySessionIdRef.current,searchQuery:e,numSearchResults:this.state.searchResults.length,currentSelection:this.props.currentSelection,module:ee6.J.ALL,moduleFilters:null,qaVersion:erd.U3,searchQueryResults:erL(t)})},this.cancelDelayedClose=()=>{0!==this.delayedCloseTimerID&&(clearTimeout(this.delayedCloseTimerID),this.delayedCloseTimerID=0)},this.onClick=n_.cZ(this,"click",e=>{(null==e?void 0:e.button)!==0||this.state.searchResults.length>0||this.setState({searchResults:this.searchIndex.list(this.props.appModel)})}),this.onKeyDown=n_.C0(this,"keydown",e=>{let t=e=>{if(this.state.searchResults.length>0){let t=this.state.activeItemIndex+e,n=t<0?this.state.searchResults.length-1:t%this.state.searchResults.length,a=1!==this.state.searchResults.length||!this.state.displayAriaActiveDescendant;this.setState({activeItemIndex:n,displayAriaActiveDescendant:a}),this.scrollContainerRef.current.scrollElementAtIndexIntoView(n)}},n=(0,b.vN)(e,b.xH.CONTROL),a=C.Ay.mac?(0,b.vN)(e,b.xH.META):n,l=C.Ay.mac&&n;switch(e.keyCode){case b.Uz.ENTER:{e.preventDefault();let t=this.state.searchResults[this.state.activeItemIndex];t&&o4.l7.user(`quick-actions-select-${t.name??t.action??"unknown"}`,()=>{this.onSelectItem(t)});break}case b.Uz.ESCAPE:e.preventDefault(),this.cancelDelayedClose(),this.props.dispatch(nI.oB());break;case b.Uz.N:case b.Uz.DOWN_ARROW:if(e.keyCode===b.Uz.N&&!l){(0,Aw.jr)(e,Aw.W0.NO);break}e.preventDefault(),this.cancelDelayedClose(),t(1);break;case b.Uz.P:case b.Uz.UP_ARROW:if(e.keyCode===b.Uz.P&&!l){(0,Aw.jr)(e,Aw.W0.NO);break}e.preventDefault(),this.cancelDelayedClose(),t(-1);break;case b.Uz.TAB:{e.preventDefault();let t=this.state.searchResults[this.state.activeItemIndex];t&&t.itemParameterArgs&&(this.onStartParameterMode(t.itemParameterArgs,t,"tab"),this.logActionSelectedEvent(t));break}case b.Uz.R:case b.Uz.S:case b.Uz.D:case b.Uz.E:case b.Uz.F:case b.Uz.O:if(a){e.preventDefault();let t=this.state.searchQuery+e.key;this.updateQueryAndResults(t)}break;default:"Meta"!==e.key&&"Ctrl"!==e.key&&this.cancelDelayedClose(),(0,Aw.jr)(e,Aw.W0.NO)}}),this.onSearchChange=n_.Z7(this,"change",e=>{let t=e.currentTarget.value;this.updateQueryAndResults(t)}),this.onSelectItem=(e,t)=>{if(e.disabled)this.cancelDelayedClose();else{let n=!1;if(e.itemParameterArgs){if(e.runPluginArgs&&!this.state.searchQuery)TN.R.instance.enqueue({mode:"run-forever",runPluginArgs:e.runPluginArgs}),n=!0;else if(e.parametersRequired){this.onStartParameterMode(e.itemParameterArgs,e,(null==t?void 0:t.type)==="click"?"click":"enter"),this.logActionSelectedEvent(e);return}}if(e.callback&&!n&&(e.callback((0,etT.Dz)(e),e.args,this.props.dispatch),n=!0),e.action&&(aC.VU.get(e.action,"quick-actions",e.args)(t),n=!0),n&&this.addToRecentlyUsedCommands(e,e.runPluginArgs),this.logActionSelectedEvent(e),"toggle-publish"===e.action&&(0,n2.YQ)({id:"insert-component-onboarding-event"}),erV(e)&&!(0,aR.PN)()){this.cancelDelayedClose(),this.delayedCloseTimerID=setTimeout(()=>{this.props.dispatch(nI.oB())},300);return}this.props.dispatch(nI.oB())}},this.renderResult=(e,t)=>{let n=t===this.state.activeItemIndex;return f.createElement(erj,{role:"option",id:this.getResultId(t),key:e.action||t,recordingKey:n_.Pt(this.props,e.action||"searchResult"),active:n,disabled:!!e.disabled,appModel:this.props.appModel,item:e,isLastItem:t===this.state.searchResults.length-1,actionIcon:this.getActionIcon(e),onClick:t=>this.onSelectItem(e,t),onMouseMove:()=>{this.state.mouseMoved||this.setState({mouseMoved:!0,activeItemIndex:t})},onMouseEnter:()=>{this.state.mouseMoved&&this.setState({activeItemIndex:t})},allSavedPlugins:this.props.pluginAndWidgetMenuArgs.allSavedPlugins,publishedPlugins:this.props.pluginAndWidgetMenuArgs.publishedPlugins,searchQuery:this.state.searchQuery})},this.searchIndex=this.createSearchIndex(),this.state={searchQuery:"",searchResults:this.recentlyUsedItemsMenu(),activeItemIndex:0,displayAriaActiveDescendant:!0,mouseMoved:!1}}componentDidUpdate(e,t){super.componentDidUpdate(e,t),(0,b_.c2)(this.props.pluginAndWidgetMenuArgs,e.pluginAndWidgetMenuArgs)||(this.searchIndex=this.createSearchIndex())}createSearchIndex(){let e=(0,etx.M)({extensionMenuProps:this.props.pluginAndWidgetMenuArgs,isReadOnly:this.props.appModel.isReadOnly,includeDisabled:!0});return new etI.x(this.props.appModel,this.props.selectedView,[...this.props.fullscreenMenuItems,...e],{includeDisabled:!0,acceptsUnicode:(0,erA.LN)()})}componentDidMount(){super.componentDidMount(),this.searchInputRef.current.focus()}logActionSelectedEvent(e){let{createMetrics:t}=this.props.interactionMetrics;(0,erR.kp)({item:e,searchQuery:this.state.searchQuery,qaVersion:erd.U3,numSearchResults:this.state.searchResults.length,searchPosition:this.state.activeItemIndex,moduleFilters:null,...t()})}recentlyUsedItemsMenu(){return(0,C7.WI)(this.props.recentlyUsedQuickCommands.map(e=>{let t=this.searchIndex.getItem(this.props.appModel,e.displayName);return t&&e.runPluginArgs&&(t.runPluginArgs=e.runPluginArgs),t}))}sortedByEnabledSearchResults(e){let t=e.filter(e=>!e.disabled),n=e.filter(e=>e.disabled);return t.concat(n)}addToRecentlyUsedCommands(e,t){let n=(0,etw.f)(e),a=this.props.recentlyUsedQuickCommands.filter(e=>e.displayName!==n&&!!this.searchIndex.getItem(this.props.appModel,e.displayName));a.length>=3&&a.pop(),a.unshift({displayName:n,runPluginArgs:t}),this.props.dispatch(K.PQ(a)),this.props.updateFrecencyHistory(e,this.state.searchQuery)}getActionIcon(e){var t;if("plugins-menu-item"===e.name){let n;return(e.pluginId&&(n=this.props.pluginAndWidgetMenuArgs.allSavedPlugins[e.pluginId]||(null==(t=this.props.pluginAndWidgetMenuArgs.recentlyUsedPlugins)?void 0:t.find(t=>t.plugin_id===e.pluginId))),n)?f.createElement(Tn.V,{className:erm.ZR,plugin:n,role:"presentation"}):f.createElement(a2.B,{className:erm.pB,svg:erG.A,ariaLabel:`${e.name} icon`})}if(e.iconType&&"external_link"===e.iconType)return f.createElement(a2.B,{svg:erH.A})}onStartParameterMode(e,t,n){this.addToRecentlyUsedCommands(t),this.props.onStartParameterEntry(e,t,n)}getResultId(e){return this.resultPrefix+"-"+e}renderResults(){let e=this.state.searchResults;if(this.state.searchQuery){if(0===this.state.searchResults.length)return f.createElement("div",{className:erm.Tk},(0,eN.tx)("fullscreen_actions.no_matches"))}else if(0===this.state.searchResults.length)return null;return f.createElement(erf,{id:this.listboxId,ref:this.scrollContainerRef,resultCount:e.length,role:"listbox"},e.map(this.renderResult))}render(){let e=this.state.searchQuery||this.state.searchResults.length;return f.createElement(erp,{recordingKey:this.props.recordingKey||"",onKeyDown:this.onKeyDown,"data-testid":"quick-actions"},f.createElement("div",{className:erm.$P},f.createElement(a2.B,{svg:erh.A,className:erm.qc}),f.createElement("input",{ref:this.searchInputRef,className:erm.Rt,placeholder:(0,ety.A)("quick-actions-modal-placeholder"),onChange:this.onSearchChange,onClick:this.onClick,value:this.state.searchQuery,maxLength:150,spellCheck:!1,dir:"auto",role:"combobox","aria-autocomplete":"list","aria-owns":this.listboxId,"aria-controls":this.listboxId,"aria-expanded":e?"true":"false","aria-activedescendant":e&&(this.state.displayAriaActiveDescendant||this.state.searchResults.length>1)?this.getResultId(this.state.activeItemIndex):void 0})),this.renderResults())}}erK.displayName="QuickActions";let erW=(0,_.Ng)(function(e,t){var n;return{pluginAndWidgetMenuArgs:t.pluginAndWidgetMenuArgs,fullscreenMenuItems:t.fullscreenMenuItems,interactionMetrics:t.interactionMetrics,fireQueryResultTrackingEvent:t.fireQueryResultTrackingEvent,currentSelection:t.currentSelection,updateFrecencyHistory:t.updateFrecencyHistory,appModel:e.mirror.appModel,selectedView:e.selectedView,recentlyUsedQuickCommands:e.recentlyUsedQuickCommands,onStartParameterEntry:t.onStartParameterEntry,locale:null==(n=e.user)?void 0:n.locale,quickActionsSessionId:t.quickActionsSessionId,latestQuerySessionIdRef:t.latestQuerySessionIdRef}},function(e){return{dispatch:e}})(erK);function erz(e){let t=(0,etN.c4)(),n=(0,etN.uj)(),a=(0,erR.Sk)(),{addFrecencyUsage:l}=(0,erI.fJ)(),r=(0,_.d4)(erk.l),i=(0,erO.Ev)(),o=(0,S.md)(aj.dd),s=(0,S.md)(aj.Rt),c=(0,O.F)(s);return f.createElement(erW,{...e,pluginAndWidgetMenuArgs:t,fullscreenMenuItems:n,interactionMetrics:a,updateFrecencyHistory:l,fireQueryResultTrackingEvent:i,currentSelection:r,quickActionsSessionId:o,latestQuerySessionIdRef:c})}function erj(e){let t=(0,aN.J2)((0,tM.UK)().showQuickCommandRankDebug);return f.createElement(erJ,{...e,showQuickCommandRankDebug:t})}class erJ extends n_.o6{constructor(e){super(e),this.onClick=n_.cZ(this,"click",e=>{if(!this.props.onClick)return n_.aH;this.props.onClick(e)}),this.getDisplayText=()=>{let e=this.props.item;if(e.itemParameterArgs&&e.runPluginArgs&&!this.props.searchQuery)return f.createElement(erD,{runPluginArgs:e.runPluginArgs,itemParameterArgs:e.itemParameterArgs,pluginId:this.props.item.pluginId,allSavedPlugins:this.props.allSavedPlugins,publishedPlugins:this.props.publishedPlugins});if(e.itemPath){let t=e.itemPath;return f.createElement(erP,{itemPath:t})}let t=(0,etw.f)(e);return this.props.showQuickCommandRankDebug&&void 0!==e.stringMatchScore&&void 0!==e.popularityScore&&(t=`M${e.stringMatchScore} P${e.popularityScore}: `+t),f.createElement("div",{className:erm.D6},t)},erV(this.props.item)?this.state={itemIsChecked:(0,etT.WJ)(this.props.appModel,this.props.item)}:this.state={}}componentDidUpdate(e,t){super.componentDidUpdate(e,t),null!=this.state.itemIsChecked&&this.setState({itemIsChecked:(0,etT.WJ)(this.props.appModel,this.props.item)})}render(){let e=this.props.item,t=this.getDisplayText(),n=(0,etT.Dz)(e),a=e.shortcutText||(0,tl.c1)(this.props.appModel.keyboardShortcuts,n),l=void 0!==this.props.item.runPluginArgs,r=e.args&&e.menuActionType&&"run-local-plugin"===e.menuActionType&&(!e.runPluginArgs||this.props.searchQuery),i="plugins-menu-item"===e.name&&!!e.itemParameterArgs&&e.itemParameterArgs.parameters.length>0,o=null;void 0!==this.state.itemIsChecked?o=f.createElement(erY,{checked:this.state.itemIsChecked,disabled:this.props.disabled}):this.props.actionIcon&&(o=this.props.actionIcon);let s=`${this.props.active?erm.ix:erm.Ke} ${this.props.disabled?erm.wn:""}`;return f.createElement("div",{className:s,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter,onClick:this.onClick,id:this.props.id,role:this.props.role,"aria-disabled":this.props.disabled||void 0,"aria-checked":this.props.item.checked},f.createElement("div",{className:erm.EA},o),f.createElement("div",{className:erm.V4},t,r&&f.createElement("div",{className:erm.Vu},(0,eN.tx)("fullscreen_actions.development"))),a&&!i&&f.createElement("div",{className:erm.LE},f.createElement(nw.S,{shortcut:a})),!a&&i&&f.createElement("div",{className:erm.LE},f.createElement("div",{className:erm.Hq},(0,eN.tx)("fullscreen_actions.tab")),l&&f.createElement("div",{className:erm.w8},(0,eN.tx)("fullscreen_actions.to_edit")),f.createElement(a2.B,{svg:erU.A})),!a&&e.isRepairCommand&&(0,y.kc)().internal_only_debug_tools&&f.createElement("div",{style:dA.sx.colorBgTertiary.p8.bRadius8.borderBox.flex.itemsCenter.justifyCenter.mr8.h16.add({fontSize:"8px"}).$},"REPAIR"))}}function erY(e){return"ui3"===(0,h.DP)().version?f.createElement("div",{className:erm.kv},f.createElement(erS.S,{checked:e.checked,disabled:e.disabled})):e.checked?e.disabled?f.createElement(a2.B,{className:erm.pX,svg:erB.A}):f.createElement(a2.B,{className:erm.NL,svg:erF.A}):f.createElement(a2.B,{svg:erM.A})}function erX({parameterEntryArgs:e,fireTrackingEvent:t}){var n;let[a,l]=f.useState(),[r,i]=f.useState(!0),o=(0,e2.Xr)(aj.dd);if(f.useEffect(()=>{if(r){i(!1);let n=(0,ez.g)();o(n),t(n),e&&l({args:e})}},[e,r,t,o]),!a)return f.createElement(erz,{recordingKey:"quickActions",onStartParameterEntry:(e,t,n)=>{let a;switch(n){case"tab":a="quick-actions-tab";break;case"enter":a="quick-actions-enter";break;case"click":a="quick-actions-click";break;default:(0,nm.xb)(n)}l({args:{...e,triggeredFrom:a},item:t})}});{let{args:e,item:t}=a,r=t?(0,etw.f)(t):void 0;return f.createElement(erb,{recordingKey:"parameterEntry",parameters:e.parameters,displayName:e.displayName,pluginId:e.pluginId,pluginLocalFileId:e.pluginLocalFileId,command:e.command,triggeredFrom:e.triggeredFrom,parameterOnly:e.parameterOnly,onExitParameterEntry:()=>{l(void 0)},initialParameterValues:null==(n=null==t?void 0:t.runPluginArgs)?void 0:n.parameterValues,recentlyUsedCommandName:r})}}erJ.displayName="QuickActionsResult";var erq=n(432704),erZ=n(315964),erQ=n(486788),er$=n(65633),er0=n(891487),er1=n(724790),er2=n(356235),er5=n(273602);let er4=(0,lf.jz)(lw.j4N);function er3(e){var t;let n=f.useRef(null),a=(0,e2.Xr)(aj.fq),l=(0,C8.w)(n),r=(0,tt.xn)();(0,f.useEffect)(()=>((null==l?void 0:l.height)&&a(l.height),()=>{a(0)}),[l,a]);let[i]=(0,S.fp)(aj.Sf),o=null==(t=null==i?void 0:i.current)?void 0:t.getBoundingClientRect(),s=!!(o&&o.height>0),c=(0,f.useMemo)(()=>s?{bottom:er4+r+((null==o?void 0:o.height)||0)+8}:null,[r,s,null==o?void 0:o.height]);return f.createElement(f.Fragment,null,f.createElement("div",{ref:n,style:{bottom:72,...c},className:nb()([er2.tT,nz.Dm]),"data-testid":"quick-actions-v2"},f.createElement(er7,null,e.children)))}function er6(e){return f.createElement(er3,null,e.children)}function er7(e){let t=(0,er1.x)(),n=f.useRef(null),a=(0,e2.Xr)(aj.IH);(0,f.useEffect)(()=>(n.current&&a(n),()=>{a(null)}),[a]);let l=Math.max(t??0,396);return f.createElement("div",{ref:n,style:{maxWidth:er5.X,minWidth:l},className:nb()([er2.N8,nz.Dm]),"data-cancel-insertable-resource-drag-and-drop":"true"},e.children)}var er8=n(818150),er9=n(695426),eie=n(644233),eit=n(849232),ein=n(100140),eia=n(954244);function eil(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.586 8.501 15.5 6.416 13.414 8.5l2.086 2.086L17.586 8.5Zm-1.379-2.793a1 1 0 0 0-1.414 0l-2.086 2.086a1 1 0 0 0 0 1.414l2.086 2.086a1 1 0 0 0 1.414 0l2.086-2.085a1 1 0 0 0 0-1.415l-2.086-2.086ZM7 14h3v3H7v-3Zm-1 0a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-3Zm11 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm1 0a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM6.086 6.336A2 2 0 0 1 8.5 6.018a2 2 0 0 1 2.414 3.147l-1 1-.707.707a1 1 0 0 1-1.414 0l-.707-.707-1-1a2 2 0 0 1 0-2.829Zm2.414 1 .293-.293a1 1 0 0 1 1.414 1.414l-1 1-.707.708-.707-.708-1-1a1 1 0 0 1 1.414-1.414l.293.293Z",clipRule:"evenodd"}))}var eir=n(419527),eii=n(708652);function eio(){return(0,N.R)(e=>{let t={};for(let n in e.mirror.appModel)(0,tl.vg)(n)&&(t[n]=e.mirror.appModel[n]),"isReadOnly"===n&&(t.isReadOnly=e.mirror.appModel.isReadOnly);return t})}var eis=n(340860),eic=n(143984);function eid(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("mask",{id:"fpl-icon-24-plugin-small-a",width:"11",height:"14",x:"6.5",y:"5",fill:"#000",maskUnits:"userSpaceOnUse"},f.createElement("path",{fill:"#fff",d:"M6.5 5h11v14h-11z"}),f.createElement("path",{fillRule:"evenodd",d:"M12 6a1 1 0 0 0-.941 1.338c.015.044.032.087.049.131.07.186.142.373.142.57V8.5H7.5V9H8v1a2 2 0 1 1 0 4v1h-.5v.5h3.75v.46c0 .198-.072.385-.142.57l-.05.132a1 1 0 1 0 1.883 0c-.015-.044-.032-.087-.049-.131-.07-.186-.142-.373-.142-.57V15.5h3.75V15H16v-1a2 2 0 1 1 0-4V9h.5v-.5h-3.75v-.46c0-.198.072-.385.142-.57l.05-.132A1 1 0 0 0 12 6Z",clipRule:"evenodd"})),f.createElement("path",{fill:"var(--color-icon)",d:"m11.059 7.338-.942.338.941-.338Zm.049.131.934-.356-.934.356ZM11.25 8.5v1a1 1 0 0 0 1-1h-1Zm-3.75 0v-1a1 1 0 0 0-1 1h1Zm0 .5h-1a1 1 0 0 0 1 1V9ZM8 9h1a1 1 0 0 0-1-1v1Zm0 1H7a1 1 0 0 0 1 1v-1Zm0 4v-1a1 1 0 0 0-1 1h1Zm0 1v1a1 1 0 0 0 1-1H8Zm-.5 0v-1a1 1 0 0 0-1 1h1Zm0 .5h-1a1 1 0 0 0 1 1v-1Zm3.75 0h1a1 1 0 0 0-1-1v1Zm-.142 1.03-.935-.356.935.357Zm-.05.132-.94-.338.94.338Zm1.883 0-.94.338.94-.338Zm-.049-.131-.934.356.934-.356ZM12.75 15.5v-1a1 1 0 0 0-1 1h1Zm3.75 0v1a1 1 0 0 0 1-1h-1Zm0-.5h1a1 1 0 0 0-1-1v1Zm-.5 0h-1a1 1 0 0 0 1 1v-1Zm0-1h1a1 1 0 0 0-1-1v1Zm0-4v1a1 1 0 0 0 1-1h-1Zm0-1V8a1 1 0 0 0-1 1h1Zm.5 0v1a1 1 0 0 0 1-1h-1Zm0-.5h1a1 1 0 0 0-1-1v1Zm-3.75 0h-1a1 1 0 0 0 1 1v-1Zm.142-1.03-.934-.357.934.356Zm.05-.132L12 7l.941.338ZM12 7V5a2 2 0 0 0-2 2h2Zm0 0h-2a2 2 0 0 0 .117.676L12 7Zm.042.113A6.307 6.307 0 0 1 12 7l-1.883.676.056.15 1.869-.713Zm.208.927c0-.413-.15-.775-.208-.927l-1.869.713c.039.1.057.151.07.196.01.038.007.04.007.018h2Zm0 .46v-.46h-2v.46h2Zm-4.75 1h3.75v-2H7.5v2Zm1-.5v-.5h-2V9h2ZM8 8h-.5v2H8V8Zm1 2V9H7v1h2Zm2 2a3 3 0 0 0-3-3v2a1 1 0 0 1 1 1h2Zm-3 3a3 3 0 0 0 3-3H9a1 1 0 0 1-1 1v2Zm1 0v-1H7v1h2Zm-1.5 1H8v-2h-.5v2Zm1-.5V15h-2v.5h2Zm2.75-1H7.5v2h3.75v-2Zm1 1.46v-.46h-2v.46h2Zm-.208.927c.058-.152.208-.514.208-.927h-2c0-.021.004-.02-.007.018a2.473 2.473 0 0 1-.07.196l1.869.713ZM12 17c.011-.033.025-.067.042-.113l-1.869-.713-.056.15L12 17Zm0 0-1.883-.676A2 2 0 0 0 10 17h2Zm0 0h-2a2 2 0 0 0 2 2v-2Zm0 0v2a2 2 0 0 0 2-2h-2Zm0 0h2a2 2 0 0 0-.117-.676L12 17Zm-.042-.113L12 17l1.883-.676-.056-.15-1.869.713Zm-.208-.927c0 .413.15.775.208.927l1.869-.713a2.473 2.473 0 0 1-.07-.196c-.01-.038-.007-.04-.007-.018h-2Zm0-.46v.46h2v-.46h-2Zm4.75-1h-3.75v2h3.75v-2Zm-1 .5v.5h2V15h-2Zm1-1H16v2h.5v-2Zm.5 1v-1h-2v1h2Zm-4-3a3 3 0 0 0 3 3v-2a1 1 0 0 1-1-1h-2Zm3-3a3 3 0 0 0-3 3h2a1 1 0 0 1 1-1V9Zm1 1V9h-2v1h2Zm-1 0h.5V8H16v2Zm-.5-1.5V9h2v-.5h-2Zm-2.75 1h3.75v-2h-3.75v2Zm-1-1.46v.46h2v-.46h-2Zm.208-.927c-.058.152-.208.514-.208.927h2c0 .021-.004.02.007-.018.013-.045.031-.096.07-.196l-1.869-.713ZM12 7a6.339 6.339 0 0 1-.042.113l1.869.713.056-.15L12 7Zm0 0 1.883.676A2 2 0 0 0 14 7h-2Zm0 0h2a2 2 0 0 0-2-2v2Z",mask:"url(#fpl-icon-24-plugin-small-a)"}))}var eiu=n(758271),eim=n.n(eiu),eip=n(199629),eif=n.n(eip),ei_=n(781267),eig=n(170786),eih=(e=>(e.RECENTS="recents",e.DESIGN_TOOLS="design_tools",e.RIFFING_AND_WRITING="riffing_and_writing",e.IMAGE_EDITING="image_editing",e.COLLABORATION_TOOLS="collaboration_tools",e.HANDOFF_TOOLS="handoff_tools",e.VIEWER_TOOLS="viewer_tools",e.SUGGESTIONS="suggestions",e.COMMON_SETTINGS="common_settings",e))(eih||{});function eiE(e){if("plugins-menu-item"===e.name)return e.extensionSearchString||"";let t=(0,etT.Dz)(e);return(0,ety.A)("displayForQuickCommand"in e&&e.displayForQuickCommand?e.displayForQuickCommand:t,e.args)}function eiv(){let e=(0,_.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel});return(t,n,a=!1)=>{let l=t[n];if(l&&(a||!l.disabled&&(!l.action||(0,tl.Yh)(e,n))))return l}}function eiy(e){switch(e){case eih.RECENTS:return 0;case eih.DESIGN_TOOLS:return 1;case eih.RIFFING_AND_WRITING:return 2;case eih.IMAGE_EDITING:return 3;case eih.COLLABORATION_TOOLS:return 4;case eih.HANDOFF_TOOLS:return 5;case eih.VIEWER_TOOLS:return 6;case eih.SUGGESTIONS:return 7;case eih.COMMON_SETTINGS:return 8;case null:return 100;default:return(0,nm.xb)(e)}}var eib=n(652875),eiC=n(248513),eiw=n(124008),eiT=n(853284),eix=n(335218),eiN=n(260726);let eiS=new Map([[elt.JT.FIRST_DRAFT,eih.DESIGN_TOOLS],[elt.JT.MAGIC_LINK,eih.DESIGN_TOOLS],[elt.JT.AUTO_RENAME_LAYERS,eih.DESIGN_TOOLS],[elt.JT.CONTENT_FILL,eih.DESIGN_TOOLS],[elt.JT.REWRITE_TEXT,eih.RIFFING_AND_WRITING],[elt.JT.SLIDES_REWRITE_TEXT,eih.RIFFING_AND_WRITING],[elt.JT.SHORTEN_TEXT,eih.RIFFING_AND_WRITING],[elt.JT.TRANSLATE_TEXT,eih.RIFFING_AND_WRITING],[elt.JT.GENERATE_IMAGE,eih.IMAGE_EDITING],[elt.JT.REMOVE_BACKGROUND,eih.IMAGE_EDITING]]),eik=[["set-tool-comments",eih.COLLABORATION_TOOLS],["present-as-prototype",eih.COLLABORATION_TOOLS],["set-tool-measure",eih.HANDOFF_TOOLS],["set-tool-annotate",eih.HANDOFF_TOOLS],["zoom-to-fit",eih.VIEWER_TOOLS],["export-selected-exportables",eih.VIEWER_TOOLS],["copy-as-png",eih.VIEWER_TOOLS]],eiI=[["request-to-edit",eih.COLLABORATION_TOOLS],["set-tool-comments",eih.COLLABORATION_TOOLS],["present-as-prototype",eih.COLLABORATION_TOOLS],["zoom-to-fit",eih.VIEWER_TOOLS],["page-next",eih.VIEWER_TOOLS],["export-selected-exportables",eih.VIEWER_TOOLS],["toggle-rulers",eih.VIEWER_TOOLS]];var eiA=(e=>(e.DESIGN_EDITOR_AI="DESIGN_EDITOR_AI",e.DESIGN_EDITOR_NO_AI="DESIGN_EDITOR_NO_AI",e.DESIGN_VIEWER="DESIGN_VIEWER",e.DEV_MODE="DEV",e.NONE="NONE",e))(eiA||{});function eiO(){let e=(0,lh.VW)();return null!==e&&!e.isSlide()}function eiL(e,t){let n=(0,_.d4)(e=>e.selectedView);return f.useMemo(()=>new etI.x(e,n,t,{includeDisabled:!0,acceptsUnicode:(0,erA.LN)()}),[e,n,t])}function eiP(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",d:"m16.7 7.7.315-1.26c.126-.505.844-.505.97 0L18.3 7.7l1.26.315c.505.126.505.844 0 .97L18.3 9.3l-.315 1.26c-.126.505-.844.505-.97 0L16.7 9.3l-1.26-.315c-.505-.126-.505-.844 0-.97L16.7 7.7Z"}),f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9 5.5a.5.5 0 0 1 1 0V7h3.5a.5.5 0 0 1 0 1h-1.282l-.054.16c-.503 1.488-1.086 2.54-2.03 3.708l1.527 1.907a.5.5 0 1 1-.781.625l-1.407-1.758c-.689.77-1.54 1.63-2.62 2.711a.5.5 0 1 1-.707-.706c1.146-1.148 2.013-2.028 2.693-2.798L7.21 9.812a.5.5 0 0 1 .781-.624l1.504 1.879c.773-.986 1.248-1.869 1.668-3.067H5.5a.5.5 0 0 1 0-1H9V5.5Zm5.039 5.808A.5.5 0 0 1 14.5 11h.5a.5.5 0 0 1 .461.308l1.667 4 .834 2a.5.5 0 1 1-.924.384L16.334 16h-3.166l-.706 1.692a.5.5 0 1 1-.922-.384l.833-2 1.667-4ZM15.917 15l-1.167-2.8-1.167 2.8h2.334Z",clipRule:"evenodd"}))}var eiD=n(52339);function eiR(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",d:"m9.4 16.5.28-1.12c.083-.333.557-.333.64 0l.28 1.12 1.12.28c.333.082.333.556 0 .64l-1.12.28-.28 1.119c-.083.333-.557.333-.64 0l-.28-1.12-1.12-.28c-.333-.083-.333-.557 0-.64l1.12-.28Z"}),f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6.224 15.447a.5.5 0 0 1-.448-.894l4-2a.5.5 0 1 1 .448.894l-4 2ZM12 11.441 6.224 8.553a.5.5 0 0 0-.448.894l5.995 2.998.01.005 1.673.836-.25 1.753a2.45 2.45 0 0 0 1.329 2.537l.243.121a2.177 2.177 0 1 0 1.948-3.894l-2.49-1.245a.367.367 0 0 0-.02-.01L13.117 12l1.095-.548a.498.498 0 0 0 .021-.01l2.49-1.245a2.177 2.177 0 0 0-1.947-3.893l-.244.121a2.45 2.45 0 0 0-1.33 2.538l.251 1.751-1.454.727Zm2.194-2.62.203 1.422 1.88-.94a1.177 1.177 0 1 0-1.053-2.105l-.244.122a1.45 1.45 0 0 0-.786 1.501Zm0 6.359.203-1.422 1.88.94a1.177 1.177 0 0 1-1.053 2.105l-.244-.122a1.449 1.449 0 0 1-.786-1.501Z",clipRule:"evenodd"}))}function eiM(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M16.5 6A1.5 1.5 0 0 1 18 7.5v6a.5.5 0 0 1-1 0V10h-6v7h2.5a.5.5 0 0 1 0 1h-6A1.5 1.5 0 0 1 6 16.5v-9A1.5 1.5 0 0 1 7.5 6h9ZM10 17v-7H7v6.5a.5.5 0 0 0 .5.5H10ZM7 9h10V7.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5V9Zm9.7 7.7.315-1.26c.126-.505.844-.505.97 0l.315 1.26 1.26.315c.505.126.505.844 0 .97l-1.26.315-.315 1.26c-.126.505-.844.505-.97 0L16.7 18.3l-1.26-.315c-.505-.126-.505-.844 0-.97l1.26-.315Z",clipRule:"evenodd"}))}var eiF=n(258316),eiB=n(202512),eiU=n(667859),eiH=n(908946),eiG=n(341831),eiV=n(664406),eiK=n(296799),eiW=n(351631),eiz=n(118377),eij=n(670652),eiJ=n(284615),eiY=n(232309),eiX=n(637382),eiq=n(883216),eiZ=n(726710),eiQ=n(118567),ei$=n(573591),ei0=n(701997),ei1=n(207204),ei2=n(599280),ei5=n(711376),ei4=n(801886),ei3=n(277080),ei6=n(763764);let ei7={[ei4.GS.DEFAULT]:[{"font/title/bold":{fontName:{family:"Plus Jakarta Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Plus Jakarta Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Plus Jakarta Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/medium":{fontName:{family:"Plus Jakarta Sans",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Plus Jakarta Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/label/medium":{fontName:{family:"Plus Jakarta Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Plus Jakarta Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Outfit",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/title/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/body/bold":{fontName:{family:"Outfit",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/label/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Inter",style:"Semi Bold"},letterSpacing:{units:"PERCENT",value:-2.5}},"font/title/regular":{fontName:{family:"Inter",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2.5}},"font/body/bold":{fontName:{family:"Inter",style:"Semi Bold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/medium":{fontName:{family:"Inter",style:"Medium"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/regular":{fontName:{family:"Inter",style:"Regular"},letterSpacing:{units:"PERCENT",value:-.5}},"font/label/medium":{fontName:{family:"Inter",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Inter",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Public Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Public Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/medium":{fontName:{family:"Public Sans",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-.5}},"font/label/medium":{fontName:{family:"Public Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}}],[ei4.GS.SERIF]:[{"font/title/bold":{fontName:{family:"Domine",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Domine",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Outfit",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/label/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Roboto Serif",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Roboto Serif",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Public Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/medium":{fontName:{family:"Public Sans",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-.5}},"font/label/medium":{fontName:{family:"Public Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}}]};function ei8(e){return e[Math.floor(Math.random()*e.length)]}function ei9(e){let t={numberVariableMap:{},colorVariableMap:{}},n="true"===e[ei4.u7.DARK_MODE];for(let[a,l]of Object.entries(e||{}))switch(a.split("/")[0]){case ei4.u7.COLOR:let e=(0,hu.tK)(l);if(!e)continue;t.colorVariableMap[a]=(0,ei6.qO)(e,n?ei3.lH.DARK:ei3.lH.LIGHT);break;case ei4.u7.CORNER_RADIUS:case ei4.u7.SPACING:let r=parseFloat(l);!isNaN(r)&&r>=ei5.Xy&&r<=ei5.Ne&&(t.numberVariableMap[a]=r);break;case ei4.u7.FONT:switch(l){case ei4.GS.SERIF:case ei4.GS.DEFAULT:t.fontVariableMap=ei8(ei7[l]);break;default:t.fontVariableMap=ei8(ei7[ei4.GS.DEFAULT])}}return{darkMode:n,variableMaps:t}}var eoe=n(112825),eot=n(747202),eon=n(640209);let eoa="plugin_playground";function eol(e){let t=e.match(/```jsx([\s\S]*?)(```|$)/);return t?t[1].trim():""}async function eor(e){await new Promise(t=>{setTimeout(()=>{t()},e)})}let eoi=(0,tp.n)(async function(e,t,n=()=>!0,a){let l=(await yg.Ay.design.firstDraftGenerateV2Stream(e,(0,eot.Lp)({clientLifecycleId:a}))).getReader(),r={};try{for(;;){let e=l.read(),{done:a,value:i}=await e;if(a||(i.theme&&(r.theme=i.theme??{}),i.dsKit&&(r.dsKit=i.dsKit),i.jsx&&(r.jsx+=i.jsx),i.trace&&(r.trace=i.trace),i.presets&&(r.presets=i.presets),!n()))break;t(r)}}finally{l.releaseLock()}});function eoo(e){return Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{})}(0,tp.n)(async function(e){return(await eon.Gh.postFirstDraftMatchPresetModes({kit_key:e.kitKey,is_local:e.isLocal,user_prompt:e.userPrompt})).data.meta});var eos=n(341092),eoc=n(247368),eod=n(202655),eou=n(853069);function eom(e,t){if("string"==typeof e&&1===t.parsedDefs.length){let n=t.parsedDefs[0].devFriendlyProp;if("key"in n)return{[n.key]:e}}return e}function eop(e,t){if("object"==typeof e){if(t in e)return e[t];for(let[n,a]of Object.entries(e))if(n.toLowerCase()===t.toLowerCase())return a}}async function eof(e,t,n){var a;let l=lE.q.instance,r={componentProps:{},componentPropsNested:{},nestedInstancesVisibility:{},sharedPluginData:{...null==e?void 0:e.sharedPluginData}},i={};for(let o of t.parsedDefs){let s=function e(t,n){let a;if("object"==typeof t){switch(n.type){case"SIMPLE":case"IMAGE":case"GROUPED_INSTANCE_SWAP":t&&(a=eop(t,n.key));break;case"SIMPLE_CHOICE":if(t&&n.key in t){let e=eop(t,n.key);n.validOptions.includes(e)?a=e:(0,o2.xi)("first-draft",`Expected ${n.key} to be oneOf: ${JSON.stringify(n.validOptions)} but got: ${e}`,{componentProps:t,devFriendlyProp:n})}break;case"DERIVED_BOOLEAN":a=!!e(t,n.devFriendlyProp);break;case"ARRAY":if(t){let e=eop(t,n.key);Array.isArray(e)&&(a=e[n.index]),void 0===a&&(a=eop(t,n.nonArrayKey)),void 0===a&&0===n.index&&n.originalKey&&(a=eop(t,n.originalKey))}break;default:(0,nm.xb)(n)}if(void 0===a)return a;switch(n.valueType){case"BOOLEAN":if("boolean"==typeof a)break;return;case"STRING":if("string"==typeof a)break;return}return a}}(e,o.devFriendlyProp),c=void 0===s;if("ARRAY"===o.devFriendlyProp.type||"GROUPED_INSTANCE_SWAP"===o.def.type)for(let e of(0,eod.wn)(t.componentId,o))r.nestedInstancesVisibility[e]=!c;if(!c)switch(o.def.type){case"NESTED_INSTANCE":{let e=(0,eoc.Ye)(o.def.componentId);if(e){if(s=eom(s,e),"ARRAY"===o.devFriendlyProp.type){let e=o.devFriendlyProp.key;if(0===o.devFriendlyProp.index){i[e]={};let t=new Set;for(let e of Object.values(o.def.tagsByParentComponentId))for(let n of Object.keys(e.fixedVariantProperties??{}))t.add(n);for(let n of t)i[e][n]=eop(s,n)}else s={...s,...i[e]}}let a=await eof(s,e,n);for(let e of(0,eod.wn)(t.componentId,o))r.componentPropsNested[e]=a}break}case"BOOLEAN":case"VARIANT":case"TEXT":r.componentProps[o.rawProp]=s;break;case"INSTANCE_SWAP":{let e=(0,eot.cl)(o.def.defaultValue),l=(0,eoc.Ye)(o.def.defaultValue);if(e&&l){let i=eom(s,l),c=[];if(null==(a=e.parentNode)?void 0:a.isStateGroup){for(let t of e.parentNode.reversedChildrenNodes)if("SYMBOL"===t.type){let e=t.variantProperties();if(e&&Object.entries(e).some(([e,t])=>i[e]===t)&&Object.entries(e).every(([e,t])=>!(e in i)||i[e]===t)){c=Object.keys(e),r.componentProps[o.rawProp]=t.guid;break}}}let d=Object.fromEntries(Object.entries(i).filter(([e,t])=>!c.includes(e)));if(0!==Object.keys(d).length){let e=await eof(d,l,n),a=(0,eod.wn)(t.componentId,o);for(let n of(0===a.length&&(0,o2.xi)("first-draft","Could not find any instances for this prop",{componentId:t.componentId,def:JSON.stringify(o.def)}),a))r.componentPropsNested[n]=e}}break}case"GROUPED_INSTANCE_SWAP":{let e=(0,eot.cl)(o.def.defaultValue);if(e&&"SYMBOL"===e.type){let t=!1,n="object"==typeof s?(null==s?void 0:s.type)??(null==s?void 0:s.description):"";if(n){let a=(0,eou.Lq)(o.def.groupName,e,n);if(a){t=!0,r.componentProps[o.rawProp]=a;break}}if(!t){let e=(null==s?void 0:s.description)??(null==s?void 0:s.type)??"";e&&(r.sharedPluginData[o.rawProp]=e)}}break}case"IMAGE":r.sharedPluginData[o.rawProp]=(null==s?void 0:s.id)??(null==s?void 0:s.description)??(null==s?void 0:s.alt)??"";break;case"SLOT":{let e=Array.isArray(s)?s[0]:s;if(!e)break;let a=n.getCustomJSXElementOrNull(e.type);if((null==a?void 0:a.type)==="SIMPLE"){let l=a.typeInfo;r.componentProps[o.rawProp]=l.defaultNodeId;let i=await eof(e.props,l,n);for(let e of(0,eod.wn)(t.componentId,o))r.componentPropsNested[e]=i}else{let t=await n.createNodeFromJSX(e),a=o4.l7.ai("first-draft-setup-slot-node",()=>{let e=l.get(ei.CUU.createSymbolFromNode(t.guid,ei.Sie.PLUGIN));return e&&(e.name=`Slot for ${o.rawProp}`),e});if(a){let e=await n.getOrCreateSlotParent(n);o4.l7.ai("first-draft-setup-slot-node",()=>{e.appendChild(a)}),r.componentProps[o.rawProp]=a.guid}}break}default:(0,nm.xb)(o.def)}}return r}class eo_{constructor({dsKitKey:e,reuseCache:t,publishedComponentToInsertResult:n,customJSXElementByName:a}){this.dsKitKey=e,this.reuseCache=t,this.publishedComponentToInsertResult=n,this.customJSXElementByName=a??{}}getComponentTypeSortOrder(e){switch(e){case"BUILDING_BLOCK":return 0;case"NONE":return 1;case"GROUPED_COMPONENT":return 2;default:return 3}}getCustomJSXElementOrNull(e){let t=e.toLowerCase();if(!t.startsWith(eod.FE.toLowerCase()))return null;if(t in this.customJSXElementByName)return this.customJSXElementByName[t];for(let[e,n]of Object.entries(this.publishedComponentToInsertResult))if("error"!==n.status&&e.toLowerCase()===t){let e=(0,eoc.Ye)(n.guid);if(e){let n=eog(e,{});if(n)return this.customJSXElementByName[t]=n,n}}let n=(0,eoc.DY)(t,{rootNodes:{dsKitKey:this.dsKitKey}});for(let e of(0===Object.keys(this.publishedComponentToInsertResult).length&&n.sort((e,t)=>this.getComponentTypeSortOrder(e.componentType)-this.getComponentTypeSortOrder(t.componentType)),n)){let n=eog(e,this.publishedComponentToInsertResult);if(n)return this.customJSXElementByName[t]=n,n}return this.customJSXElementByName[t]=null,null}async renderCustomJSXElementOrNull(e,t){let n=this.getCustomJSXElementOrNull(e.type);return n?await eoh(n,e,t):null}}function eog(e,t){if((0,eou.vR)(e))return null;if(Object.entries(t).length>0){let n=t[e.jsxName];if(!n||"error"===n.status||!(n.key===e.key&&n.version===e.version))return null}return{type:"SIMPLE",name:e.jsxName,typeInfo:e}}async function eoh(e,t,n){if(!e)return null;let{type:a,props:l,children:r}=t;try{switch(e.type){case"SIMPLE":{let t=e.typeInfo,a=t.defaultNodeId,i=await eof({...l,children:r},t,n);return{type:"Instance",props:{componentId:a,componentProps:i.componentProps,componentPropsNested:i.componentPropsNested,nestedInstancesVisibility:i.nestedInstancesVisibility,sharedPluginData:Object.fromEntries(Object.entries({...i.sharedPluginData,type:t.jsxName}).map(([e,t])=>"string"!=typeof t?[e,JSON.stringify(t)]:[e,t]))},children:[]}}case"GROUP":throw Error("Not implemented");default:(0,nm.xb)(e)}}catch(e){(0,o2.$D)(o5.e.FEEDBACK,e,{extra:{type:a,props:l}})}return null}var eoE=n(897459);let eov=(e,t)=>t(e).body.map(e=>eoy(e)),eoy=(e,t)=>{switch(e.type){case"JSXAttribute":if(null===e.value)return!0;return eoy(e.value,t);case"JSXElement":case"JSXFragment":return eow(e,t);case"JSXExpressionContainer":return eoy(e.expression,t);case"JSXText":return e.value.replace(/\s+/g," ").trim();case"JSXArrayExpression":return e.elements.map(e=>eoy(e,t));case"JSXObject":let n={};for(let t of e.properties)t.key&&t.value&&(n[t.key.name||t.key.value]=eoy(t.value));return n;case"ArrayExpression":return e.elements.map(e=>eoy(e,t));case"BinaryExpression":switch(e.operator){case"-":return eoy(e.left)-eoy(e.right);case"!=":return eoy(e.left)!=eoy(e.right);case"!==":return eoy(e.left)!==eoy(e.right);case"*":return eoy(e.left)*eoy(e.right);case"**":return eoy(e.left)**eoy(e.right);case"/":return eoy(e.left)/eoy(e.right);case"%":return eoy(e.left)%eoy(e.right);case"+":return eoy(e.left)+eoy(e.right);case"<":return eoy(e.left)<eoy(e.right);case"<=":return eoy(e.left)<=eoy(e.right);case"==":return eoy(e.left)==eoy(e.right);case"===":return eoy(e.left)===eoy(e.right);case">":return eoy(e.left)>eoy(e.right);case">=":return eoy(e.left)>=eoy(e.right)}return;case"CallExpression":let a=eoy(e.callee);if(void 0===a){(0,o2.$D)(o5.e.FEEDBACK,Error("The CallExpression could not be resolved, resulting in an undefined return value."),{extra:{expression:e}});return}return a(...e.arguments.map(t=>eoy(t,e.callee)));case"ConditionalExpression":return eoy(e.test)?eoy(e.consequent):eoy(e.alternate);case"ExpressionStatement":return eoy(e.expression);case"Identifier":if(t&&e.name in t)return t[e.name];return({})[e.name];case"Literal":return e.value;case"LogicalExpression":let l=eoy(e.left);if("||"===e.operator&&l)return l;if("&&"===e.operator&&l||"||"===e.operator&&!l)return eoy(e.right);return!1;case"MemberExpression":return eob(e,t);case"ObjectExpression":let r={};return e.properties.forEach(e=>{r[e.key.name||e.key.value]=eoy(e.value)}),r;case"TemplateElement":return e.value.cooked;case"TemplateLiteral":return[...e.expressions,...e.quasis].sort((e,t)=>e.start<t.start?-1:1).map(e=>eoy(e)).join("");case"UnaryExpression":switch(e.operator){case"+":return e.argument.value;case"-":return-e.argument.value;case"!":return!e.argument.value}return;case"ArrowFunctionExpression":return(e.async||e.generator)&&(0,o2.$D)(o5.e.FEEDBACK,Error("Async and generator arrow functions are not supported.")),(...t)=>{let n={};return e.params.forEach((e,a)=>{n[e.name]=t[a]}),eoy(e.body,n)}}},eob=(e,t)=>{var n,a;let{object:l}=e,r=[(null==(n=e.property)?void 0:n.name)??JSON.parse((null==(a=e.property)?void 0:a.raw)??'""')];if("Literal"!==e.object.type)for(;l&&["MemberExpression","Literal"].includes(null==l?void 0:l.type);){let{property:e}=l;l.computed?r.unshift(eoy(e,t)):r.unshift((null==e?void 0:e.name)??JSON.parse((null==e?void 0:e.raw)??'""')),l=l.object}let i=eoy(l,t);try{let e=i,t=r.reduce((t,n)=>(e=t,t[n]),i);if("function"==typeof t)return t.bind(e);return t}catch{let t=(null==l?void 0:l.name)||"unknown";(0,o2.$D)(o5.e.FEEDBACK,Error("Unable to parse member expression."),{extra:{target:i,name:t,path:r,expression:e}})}},eoC=e=>"JSXIdentifier"===e.type?e.name:`${eoC(e.object)}.${eoC(e.property)}`,eow=(e,t)=>{let n;let{children:a=[]}=e,l="JSXElement"===e.type?e.openingElement:e.openingFragment,r=("JSXElement"===e.type?eoC(l.name):"").trim();if(n=(n=a.map(e=>eoy(e,t))).filter(e=>"string"==typeof e?""!==e.trim():!!e),"string"==typeof e)return e.trim();let i={};return l.attributes&&(i=l.attributes.reduce((e,t)=>{let n=t.name.name,a=eoT(t);return e[n]=a,e},{})),e.isPartial&&(i.isPartial=NaN),{type:r,props:i,children:n}},eoT=e=>{let t=e.value;return null===t||eoy(t)};async function eox(e){try{var t;return t=(await Promise.all([n.e(2510),n.e(6856)]).then(n.bind(n,514132))).parseLoose,e?eov(e,t).filter(eoN):null}catch{}return null}function eoN(e){return"object"==typeof e&&null!==e&&void 0!==e.type&&void 0!==e.props&&void 0!==e.children}function eoS(e){let t;switch(null==e?void 0:e.toLowerCase()){case"small":t="w-60";break;case"medium":t="w-80";break;default:t="w-100"}return`flex flex-col ${t}`}function eok(e){return eoN(e)?e:{type:"AutoLayout",props:{className:"w-1 h-1"},children:[]}}function eoI(e){return e&&Array.isArray(e)?e.map(eok):[]}function eoA(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[t,e]))}let eoO={none:1,tight:1.25,snug:1.375,normal:1.2,relaxed:1.625,loose:2},eoL={3:12,4:16,5:20,6:24,7:28,8:32,9:36,10:40},eoP={px:1,0:0,"0.5":2,1:4,"1.5":6,2:8,"2.5":10,3:12,"3.5":14,4:16,5:20,6:24,7:28,8:32,9:36,10:40,11:44,12:48,14:56,16:64,20:80,24:96,28:112,32:128,36:144,40:160,44:176,48:192,52:208,56:224,60:240,64:256,72:288,80:320,96:384,100:400},eoD={0:0,xs:320,sm:384,md:448,lg:512,xl:576,"2xl":672,"3xl":768,"4xl":896,"5xl":1024,"6xl":1152,"7xl":1280},eoR={none:0,"":4,sm:2,md:6,lg:8,xl:12,"2xl":16,"3xl":24,full:9999},eoM={black:"#000000",white:"#ffffff","slate-50":"#f8fafc","slate-100":"#f1f5f9","slate-200":"#e2e8f0","slate-300":"#cbd5e1","slate-400":"#94a3b8","slate-500":"#64748b","slate-600":"#475569","slate-700":"#334155","slate-800":"#1e293b","slate-900":"#0f172a","slate-950":"#020617","gray-50":"#f9fafb","gray-100":"#f3f4f6","gray-200":"#e5e7eb","gray-300":"#d1d5db","gray-400":"#9ca3af","gray-500":"#6b7280","gray-600":"#4b5563","gray-700":"#374151","gray-800":"#1f2937","gray-900":"#111827","gray-950":"#030712","neutral-50":"#fafafa","zinc-100":"#f4f4f5","zinc-200":"#e4e4e7","zinc-300":"#d4d4d8","zinc-400":"#a1a1aa","zinc-500":"#71717a","zinc-600":"#52525b","zinc-700":"#3f3f46","zinc-800":"#27272a","zinc-900":"#18181b","zinc-950":"#09090b","neutral-100":"#f5f5f5","neutral-200":"#e5e5e5","neutral-300":"#d4d4d4","neutral-400":"#a3a3a3","neutral-500":"#737373","neutral-600":"#525252","neutral-700":"#404040","neutral-800":"#262626","neutral-900":"#171717","neutral-950":"#0a0a0a","stone-50":"#fafaf9","stone-100":"#f5f5f4","stone-200":"#e7e5e4","stone-300":"#d6d3d1","stone-400":"#a8a29e","stone-500":"#78716c","stone-600":"#57534e","stone-700":"#44403c","stone-800":"#292524","stone-900":"#1c1917","stone-950":"#0c0a09","red-50":"#fef2f2","red-100":"#fee2e2","red-200":"#fecaca","red-300":"#fca5a5","red-400":"#f87171","red-500":"#ef4444","red-600":"#dc2626","red-700":"#b91c1c","red-800":"#991b1b","red-900":"#7f1d1d","red-950":"#450a0a","orange-50":"#fff7ed","orange-100":"#ffedd5","orange-200":"#fed7aa","orange-300":"#fdba74","orange-400":"#fb923c","orange-500":"#f97316","orange-600":"#ea580c","orange-700":"#c2410c","orange-800":"#9a3412","orange-900":"#7c2d12","orange-950":"#431407","amber-50":"#fffbeb","amber-100":"#fef3c7","amber-200":"#fde68a","amber-300":"#fcd34d","amber-400":"#fbbf24","amber-500":"#f59e0b","amber-600":"#d97706","amber-700":"#b45309","amber-800":"#92400e","amber-900":"#78350f","amber-950":"#451a03","yellow-50":"#fefce8","yellow-100":"#fef9c3","yellow-200":"#fef08a","yellow-300":"#fde047","yellow-400":"#facc15","yellow-500":"#eab308","yellow-600":"#ca8a04","yellow-700":"#a16207","yellow-800":"#854d0e","yellow-900":"#713f12","yellow-950":"#422006","lime-50":"#f7fee7","lime-100":"#ecfccb","lime-200":"#d9f99d","lime-300":"#bef264","lime-400":"#a3e635","lime-500":"#84cc16","lime-600":"#65a30d","lime-700":"#4d7c0f","lime-800":"#3f6212","lime-900":"#365314","lime-950":"#1a2e05","green-50":"#f0fdf4","green-100":"#dcfce7","green-200":"#bbf7d0","green-300":"#86efac","green-400":"#4ade80","green-500":"#22c55e","green-600":"#16a34a","green-700":"#15803d","green-800":"#166534","green-900":"#14532d","green-950":"#052e16","emerald-50":"#ecfdf5","emerald-100":"#d1fae5","emerald-200":"#a7f3d0","emerald-300":"#6ee7b7","emerald-400":"#34d399","emerald-500":"#10b981","emerald-600":"#059669","emerald-700":"#047857","emerald-800":"#065f46","emerald-900":"#064e3b","emerald-950":"#022c22","teal-50":"#f0fdfa","teal-100":"#ccfbf1","teal-200":"#99f6e4","teal-300":"#5eead4","teal-400":"#2dd4bf","teal-500":"#14b8a6","teal-600":"#0d9488","teal-700":"#0f766e","teal-800":"#115e59","teal-900":"#134e4a","teal-950":"#042f2e","cyan-50":"#ecfeff","cyan-100":"#cffafe","cyan-200":"#a5f3fc","cyan-300":"#67e8f9","cyan-400":"#22d3ee","cyan-500":"#06b6d4","cyan-600":"#0891b2","cyan-700":"#0e7490","cyan-800":"#155e75","cyan-900":"#164e63","cyan-950":"#083344","sky-50":"#f0f9ff","sky-100":"#e0f2fe","sky-200":"#bae6fd","sky-300":"#7dd3fc","sky-400":"#38bdf8","sky-500":"#0ea5e9","sky-600":"#0284c7","sky-700":"#0369a1","sky-800":"#075985","sky-900":"#0c4a6e","sky-950":"#082f49","blue-50":"#eff6ff","blue-100":"#dbeafe","blue-200":"#bfdbfe","blue-300":"#93c5fd","blue-400":"#60a5fa","blue-500":"#3b82f6","blue-600":"#2563eb","blue-700":"#1d4ed8","blue-800":"#1e40af","blue-900":"#1e3a8a","blue-950":"#172554","indigo-50":"#eef2ff","indigo-100":"#e0e7ff","indigo-200":"#c7d2fe","indigo-300":"#a5b4fc","indigo-400":"#818cf8","indigo-500":"#6366f1","indigo-600":"#4f46e5","indigo-700":"#4338ca","indigo-800":"#3730a3","indigo-900":"#312e81","indigo-950":"#1e1b4b","violet-50":"#f5f3ff","violet-100":"#ede9fe","violet-200":"#ddd6fe","violet-300":"#c4b5fd","violet-400":"#a78bfa","violet-500":"#8b5cf6","violet-600":"#7c3aed","violet-700":"#6d28d9","violet-800":"#5b21b6","violet-900":"#4c1d95","violet-950":"#2e1065","purple-50":"#faf5ff","purple-100":"#f3e8ff","purple-200":"#e9d5ff","purple-300":"#d8b4fe","purple-400":"#c084fc","purple-500":"#a855f7","purple-600":"#9333ea","purple-700":"#7e22ce","purple-800":"#6b21a8","purple-900":"#581c87","purple-950":"#3b0764","fuchsia-50":"#fdf4ff","fuchsia-100":"#fae8ff","fuchsia-200":"#f5d0fe","fuchsia-300":"#f0abfc","fuchsia-400":"#e879f9","fuchsia-500":"#d946ef","fuchsia-600":"#c026d3","fuchsia-700":"#a21caf","fuchsia-800":"#86198f","fuchsia-900":"#701a75","fuchsia-950":"#4a044e","pink-50":"#fdf2f8","pink-100":"#fce7f3","pink-200":"#fbcfe8","pink-300":"#f9a8d4","pink-400":"#f472b6","pink-500":"#ec4899","pink-600":"#db2777","pink-700":"#be185d","pink-800":"#9d174d","pink-900":"#831843","pink-950":"#500724","rose-50":"#fff1f2","rose-100":"#ffe4e6","rose-200":"#fecdd3","rose-300":"#fda4af","rose-400":"#fb7185","rose-500":"#f43f5e","rose-600":"#e11d48","rose-700":"#be123c","rose-800":"#9f1239","rose-900":"#881337","rose-950":"#4c0519"},eoF={0:0,5:.05,10:.1,20:.2,25:.25,30:.3,40:.4,50:.5,60:.6,70:.7,75:.75,80:.8,90:.9,95:.95,100:1},eoB={thin:100,extralight:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},eoU={xs:12,sm:14,base:16,lg:18,xl:20,"2xl":24,"3xl":30,"4xl":36,"5xl":48,"6xl":60,"7xl":72,"8xl":96,"9xl":128},eoH=eoA(eoP),eoG=eoA(eoU),eoV=eoA(eoR),eoK=eoA(eoB),eoW=eoA(eoM),eoz=eoA(eoL),eoj=/^\[(?:([a-z-]+):)?(.+)\]$/i;function eoJ(e){let t=eoj.exec(e);if(t&&t[2].endsWith("px")){let e=t[2].slice(0,t[2].length-2);return eoE.y$.isInteger(e)?Number(e):null}return null}let eoY=/\s+/;function eoX(e){return eoq(`${e}${e}`)}function eoq(e){return Math.min(Math.max(parseInt(e,16)/255,0),1)}function eoZ(e,t,n,a=1){return isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)?null:{r:e,g:t,b:n,a}}function eoQ(e){let t=e.a??1,n=Math.round(255*e.r).toString(16),a=Math.round(255*e.g).toString(16),l=Math.round(255*e.b).toString(16),r=Math.round(255*t).toString(16);return 1===n.length&&(n="0"+n),1===a.length&&(a="0"+a),1===l.length&&(l="0"+l),1===r.length&&(r="0"+r),"#"+n+a+l+(1!==t?r:"")}function eo$(e){let t=e.slice(1).join("-");if("transparent"===t)return[];let n=t.split("/"),a=n[0],l=n[1]??"",r=eoM[a]??function(e){let t=eoj.exec(e);return t&&t[2].startsWith("#")?t[2]:null}(a);if(!r||!r.match(/^#?[0-9a-f]{3,8}$/i))return null;if(!l||!eoF[l])return r;let i=function(e,t=!1,n=1){let a=/[^0-9a-f]*([0-9a-f]*)/i.exec(e.trim());if(!a)return null;let l=a[1];if(l.length>=8&&t)return eoZ(eoq(l.substring(0,2)),eoq(l.substring(2,4)),eoq(l.substring(4,6)),eoq(l.substring(6,8)));if(7===l.length&&t)return eoZ(eoq(l.substring(0,2)),eoq(l.substring(2,4)),eoq(l.substring(4,6)),eoX(l[6]));if(l.length>=6)return eoZ(eoq(l.substring(0,2)),eoq(l.substring(2,4)),eoq(l.substring(4,6)),n);if(5===l.length&&t)return eoZ(eoX(l[0]),eoX(l[1]),eoX(l[2]),eoq(l.substring(3,5)));if(4===l.length&&t)return eoZ(eoX(l[0]),eoX(l[1]),eoX(l[2]),eoX(l[3]));if(l.length>=3)return eoZ(eoX(l[0]),eoX(l[1]),eoX(l[2]),n);if(2===l.length){let e=eoq(l);return eoZ(e,e,e,n)}else if(1===l.length){let e=eoX(l);return eoZ(e,e,e,n)}return null}(r);return i&&eoF[l]&&(i.a=eoF[l]??1),i}function eo0(e){return eoH[e]||`[${e.toFixed(0)}px]`}function eo1(e){return eoW[e]||`[${e}]`}function eo2(e){let t=eoV[e];return e>=999?"full":t||`[${e.toFixed(0)}px]`}function eo5(e,t){let n={},a=(0,eoE.QP)(e),l=a.includes("flex-col")?"vertical":"horizontal";for(let e of a.split(eoY)){let{classParts:a,isNegative:r}=function(e){let t=!1,n=e.split("-");return""===n[0]&&1!==n.length&&(t=!0,n.shift()),{classParts:n,isNegative:t}}(e);!function(e,t,n){let a=()=>{let n=eoP[e[1]]??eoJ(e[1])??0;return t?-1*n:n};switch(e[0]){case"p":n.padding={top:a(),bottom:a(),left:a(),right:a()};break;case"pt":n.padding=n.padding||{},n.padding.top=a();break;case"pb":n.padding=n.padding||{},n.padding.bottom=a();break;case"pl":n.padding=n.padding||{},n.padding.left=a();break;case"pr":n.padding=n.padding||{},n.padding.right=a();break;case"py":n.padding=n.padding||{},n.padding.top=a(),n.padding.bottom=a();break;case"px":n.padding=n.padding||{},n.padding.left=a(),n.padding.right=a()}}(a,r,n),function(e,t,n){let a=()=>{let n=eoP[e[1]]??eoJ(e[1])??0;return t?-1*n:n};switch(e[0]){case"m":n.margin={top:a(),bottom:a(),left:a(),right:a()};break;case"mt":n.margin=n.margin||{},n.margin.top=a();break;case"mb":n.margin=n.margin||{},n.margin.bottom=a();break;case"ml":n.margin=n.padding||{},n.margin.left=a();break;case"mr":n.margin=n.margin||{},n.margin.right=a();break;case"my":n.margin=n.margin||{},n.margin.top=a(),n.margin.bottom=a();break;case"mx":n.margin=n.margin||{},n.margin.left=a(),n.margin.right=a()}}(a,r,n),function(e,t){if("rounded"!==e[0])return;let n=()=>{let t=e.length-1;return eoR[e[t]]??eoJ(e[t])??0};if(1===e.length){t.cornerRadius={topLeft:4,topRight:4,bottomLeft:4,bottomRight:4};return}if(2===e.length){t.cornerRadius={topLeft:n(),topRight:n(),bottomLeft:n(),bottomRight:n()};return}switch(t.cornerRadius=t.cornerRadius||{},e[1]){case"t":t.cornerRadius.topLeft=n(),t.cornerRadius.topRight=n();break;case"e":case"r":t.cornerRadius.bottomRight=n(),t.cornerRadius.topRight=n();break;case"b":t.cornerRadius.bottomRight=n(),t.cornerRadius.bottomLeft=n();break;case"s":case"l":t.cornerRadius.bottomLeft=n(),t.cornerRadius.topLeft=n();break;case"ss":case"tl":t.cornerRadius.topLeft=n();break;case"se":case"tr":t.cornerRadius.topRight=n();break;case"es":case"bl":t.cornerRadius.bottomLeft=n();break;case"ee":case"br":t.cornerRadius.bottomRight=n()}}(a,n),function(e,t){switch(e[0]){case"block":case"inline-block":case"inline":case"flex":case"inline-flex":case"table":case"inline-table ":case"table-caption":case"table-cell ":case"table-column ":case"table-column-group ":case"table-footer-group ":case"table-header-group ":case"table-row-group":case"table-row":case"flow-root":case"grid":case"inline-grid":case"hidden":case"visible":t.hidden=-1!==e.indexOf("hidden")}}(a,n),function(e,t,n){if("bg"!==e[0]&&"text"!==e[0]||n&&("bg"===e[0]&&"Text"===n||"text"===e[0]&&"Text"!==n))return;let a=eo$(e);a&&(t.fill=a)}(a,n,t??""),"opacity"===a[0]&&(n.opacity=eoF[a[1]]??function(e){let t=eoj.exec(e);if(t&&t[2]){let e=t[2];return eoE.y$.isNumber(e)?Number(e):null}return null}(a[1])??1),function(e,t){if("flex"===e[0])switch(e[1]){case"nowrap":t.wrap=!1;break;case"wrap":t.wrap=!0;break;case"row":case"row-reverse":t.direction="horizontal";break;case"col":case"col-reverse":t.direction="vertical"}}(a,n),function(e,t){if("leading"===e[0]){let n=(()=>{let t=e.length-1,n=eoO[e[t]];if("normal"===e[t])return"auto";if(n)return`${(100*n).toFixed(0)}%`;let a=eoL[e[t]];if(a)return a;let l=eoJ(e[t]);if(l)return l;let r=function(e){let t=eoj.exec(e);if(t&&t[2].endsWith("%")){let e=t[2].slice(0,t[2].length-1);return eoE.y$.isInteger(e)?Number(e):null}return null}(e[t]);return r?`${r.toFixed(0)}%`:null})();n&&(t.lineHeight=n)}}(a,n),function(e,t,n){if("justify"===e[0]){let a="vertical"===t?"verticalAlignItems":"horizontalAlignItems";switch(e[1]){case"start":n[a]="start";break;case"end":n[a]="end";break;case"center":n[a]="center";break;case"between":n.spacing="auto"}}if("items"===e[0]){let a="vertical"===t?"horizontalAlignItems":"verticalAlignItems";switch(e[1]){case"start":n[a]="start";break;case"end":n[a]="end";break;case"center":n[a]="center";break;case"baseline":"horizontal"===t&&(n[a]="baseline")}}}(a,l,n),function(e,t,n){let a=()=>"full"===e[1]?"fill-parent":"fit"===e[1]?"hug-contents":eoP[e[1]]??eoJ(e[1])??void 0;if("w"===e[0]){let e=a();void 0!==e&&("Line"===n?t.length=e:t.width=e);return}if("h"===e[0]){let e=a();void 0!==e&&(t.height=e)}}(a,n,t??""),function(e,t){let n=()=>{let t=e.length-1;return"max"===e[0]&&"w"===e[1]&&eoD[e[t]]?eoD[e[t]]:eoP[e[t]]??eoJ(e[t])??void 0};if("min"===e[0]){if("w"===e[1]){let e=n();void 0!==e&&(t.minWidth=e);return}if("h"===e[1]){let e=n();void 0!==e&&(t.minHeight=e);return}}if("max"===e[0]){if("w"===e[1]){let e=n();void 0!==e&&(t.maxWidth=e);return}if("h"===e[1]){let e=n();void 0!==e&&(t.maxHeight=e)}}}(a,n),function(e,t,n){if("Text"===n||"border"!==e[0])return;let a=()=>{"stroke"in t||(t.stroke="#000000")};if(1===e.length){t.strokeWidth=1,a();return}if(2===e.length&&eoE.y$.isInteger(e[1])){switch(e[1]){case"0":t.strokeWidth=0,a();break;case"2":t.strokeWidth=2,a();break;case"4":t.strokeWidth=4,a();break;case"6":t.strokeWidth=6,a();break;case"8":t.strokeWidth=8,a()}return}let l=eo$(e);l&&(t.stroke=l)}(a,n,t??""),function(e,t){if("text"===e[0]){let n=(()=>{let t=e.length-1;return eoU[e[t]]??eoJ(e[t])})();n&&(t.fontSize=n)}}(a,n),function(e,t){if("font"===e[0]){let n=(()=>{let t=e.length-1;return eoB[e[t]]})();n&&(t.fontWeight=n)}}(a,n),function(e,t){switch(e){case"italic":t.italic=!0;break;case"not-italic":t.italic=!1;break;case"underline":t.textDecoration="underline";break;case"linethrough":t.textDecoration="strikethrough";break;case"uppercase":t.textCase="upper";break;case"lowercase":t.textCase="lower";break;case"capitalize":t.textCase="title";break;case"normal-case":t.textCase="original"}}(e,n),function(e,t){if(e.startsWith("text-"))switch(e){case"text-left":t.horizontalAlignText="left";break;case"text-center":t.horizontalAlignText="center";break;case"text-right":t.horizontalAlignText="right";break;case"text-justify":t.horizontalAlignText="justified"}if(e.startsWith("align-"))switch(e){case"align-top":t.verticalAlignText="top";break;case"align-middle":t.verticalAlignText="center";break;case"align-bottom":t.verticalAlignText="bottom"}}(e,n),function(e,t,n){if("gap"!==e[0])return;let a=(()=>{let n=e.length-1,a=eoP[e[n]]??eoJ(e[n])??void 0;return t?-1*a:a})();if(void 0!==a){if(2===e.length){n.spacing={horizontal:a,vertical:a};return}switch(n.spacing=n.spacing||{},e[1]){case"x":n.spacing.horizontal=a;break;case"y":n.spacing.vertical=a}}}(a,r,n),function(e,t,n){let a=()=>{let n=e.length-1,a=eoP[e[n]]??eoJ(e[n])??0;return t?-1*a:a};switch(e[0]){case"top":n.y={type:"top",offset:a()};break;case"left":n.x={type:"left",offset:a()};break;case"bottom":n.y={type:"bottom",offset:a()};break;case"right":n.x={type:"right",offset:a()}}}(a,r,n)}return n}function eo4(...e){return(0,eoE.QP)(e.join(" "))}let eo3={Unhandled:function({className:e,msg:t=""}){return{type:"AutoLayout",props:{className:eo4("flex justify-center items-center",e??"","border bg-red-100 border-red-100")},children:[{type:"Text",props:{},children:[t]}]}},VStack:function({children:e,...t}){return esn({...t,direction:"vertical",children:e})},HStack:function({children:e,...t}){return esn({...t,direction:"horizontal",children:e})},Box:esa,Image:function({description:e,w:t,aspect:n,className:a="",sharedPluginData:l}){let r=[],i=36;return"small"===t?(i=12,r.push(est("w",12))):"regular"===t?r.push(est("w",36)):"large"===t?(i=85.5,r.push("w-[342px]")):(i=t,r.push(est("w",t))),"video"===n?r.push(est("h",9*i/16)):r.push(est("h",i)),{type:"AutoLayout",props:{sharedPluginData:{...l,isImage:"true",description:e},className:eo4("flex p-2 bg-[#eee]",...r,a)},children:[{type:"Text",props:{className:"text-sm opacity-50 w-full h-full"},children:[e??"Image description"]}]}},DummyBlock:function({text:e}){return{type:"AutoLayout",props:{direction:"vertical",className:"w-full h-fit p-4 min-h-[100px] border-[#eee]"},children:[{type:"Text",props:{},children:[e]}]}},MobileSingleCol:({header:e,mainContent:t,footer:n})=>({type:"AutoLayout",props:{className:"w-[393px] min-h-[852px] flex flex-col",sharedPluginData:{type:"VStack",isLayoutNode:"true"}},children:[eok(e),{type:"AutoLayout",props:{className:"w-full flex flex-col",sharedPluginData:{type:"VStack",fillContainerHeight:"true"},overflow:"visible",name:"Main Content"},children:eoI(t)},eok(n)]}),DesktopSingleCol:({header:e,mainContent:t,footer:n})=>({type:"AutoLayout",props:{className:"w-[1440px] min-h-[900px] px-12 flex flex-col",sharedPluginData:{type:"VStack",isLayoutNode:"true"}},children:[eok(e),{type:"AutoLayout",props:{className:"w-full flex py-12",sharedPluginData:{type:"HStack"},overflow:"visible",name:"Container"},children:[{type:"AutoLayout",props:{className:"w-full flex flex-col",sharedPluginData:{type:"VStack"},overflow:"visible",name:"Main Content"},children:eoI(t)}]},eok(n)]}),DesktopTwoColWithLeftSidebar:({header:e,sidebarContent:t,sidebarWidth:n,mainContent:a,footer:l})=>{let r=eoS(n);return{type:"AutoLayout",props:{className:"w-[1440px] min-h-[900px] px-12 flex flex-col",sharedPluginData:{type:"VStack",isLayoutNode:"true"}},children:[eok(e),{type:"AutoLayout",props:{className:"w-full flex gap-12",sharedPluginData:{type:"HStack"},name:"Container"},children:[{type:"AutoLayout",props:{className:r,sharedPluginData:{type:"VStack"},overflow:"hidden",name:"Sidebar"},children:eoI(t)},{type:"AutoLayout",props:{className:"w-full flex flex-col",sharedPluginData:{type:"VStack"},overflow:"hidden",name:"Main Content"},children:eoI(a)}]},eok(l)]}},DesktopTwoColWithRightSidebar:({header:e,mainContent:t,sidebarContent:n,sidebarWidth:a,footer:l})=>{let r=eoS(a);return{type:"AutoLayout",props:{className:"w-[1440px] min-h-[900px] px-12 flex flex-col",sharedPluginData:{type:"VStack",isLayoutNode:"true"}},children:[eok(e),{type:"AutoLayout",props:{className:"w-full flex gap-12",sharedPluginData:{type:"HStack"},name:"Container"},children:[{type:"AutoLayout",props:{className:"w-full flex flex-col",sharedPluginData:{type:"VStack"},name:"Main Content"},children:eoI(t),overflow:"hidden"},{type:"AutoLayout",props:{className:r,sharedPluginData:{type:"VStack"},overflow:"hidden",name:"Sidebar"},children:eoI(n)}]},eok(l)]}},div:esa,p:({children:e,...t})=>({type:"Text",props:{width:"fill-parent",...t},children:e})},eo6=new Set(["AutoLayout","Frame","Rectangle","Ellipse","Text","SVG","Image","Line","Fragment","Span","Instance"]);async function eo7(e,t,n){if((null==t?void 0:t.type)==="Text"||(null==t?void 0:t.type)==="Span")return e.trim();let a=(null==t?void 0:t.props)??{};return await ese({type:"Text",props:{width:"hug-contents",height:"hug-contents",...a},children:[e]},t,n)}async function eo8(e,t,n){var a,l,r;if(!eoN(e))return null;let{type:i,props:o,children:s}=e;if(o&&"class"in o&&!("className"in o)&&(o.className=o.class,delete o.class),(""===i||"React.Fragment"===i)&&(i="Fragment"),(null==o?void 0:o.children)&&(s=Array.isArray(null==o?void 0:o.children)?null==o?void 0:o.children:[null==o?void 0:o.children],delete o.children),s=(s??[]).flat(10),i in eo3){let e=eo3[i]({...o,children:s});return await ese(e,t,n)}let c=(await Promise.all((s??[]).flat(10).map(t=>ese(t,e,n)))).filter(Boolean);"Instance"===i&&n.getCustomJSXElementOrNull(o.component)&&(i=o.component,delete o.component);let d=await n.renderCustomJSXElementOrNull({type:i,props:o,children:c});if(d)return null==(a=n.instrumentation)||a.trackComponentLookupSuccess(),d;if(!eo6.has(i))return(null==(l=n.instrumentation)||l.trackComponentLookupFailure(),(0,y.kc)().first_draft_debug)?await ese({type:"Unhandled",props:{msg:`Unknown node type: ${i}`,className:(null==o?void 0:o.className)??""},children:[]},t,n):null;let{className:u,margin:m,...p}=o??{};if(u)for(let[e,t]of Object.entries(eo5(u,i)))p[e]=t;return null==(r=n.instrumentation)||r.trackPrimitiveUsage(),{type:i,props:p,children:c}}async function eo9(e,t){return(await Promise.all(e.map(e=>ese(e,null,t)))).filter(e=>!!e)}function ese(e,t,n){return"string"==typeof e?eo7(e,t,n):eoN(e)?eo8(e,t,n):Promise.resolve(null)}function est(e,t){return"mobile-screen-width"===t?`${e}-96`:"mobile-screen-height"===t?`${e}-[568px]`:"hug"===t?`${e}-fit`:"full"===t?`${e}-full`:`${e}-[${Math.round(4*t)}px]`}function esn({direction:e,children:t,className:n=""}){let a="vertical"===e;return{type:"AutoLayout",props:{sharedPluginData:{type:a?"VStack":"HStack"},className:eo4("flex items-start w-fit h-fit",a?"flex-col":"flex-row",n)},children:t}}function esa(e){return esn({...e,direction:"vertical"})}function esl(e){let t=new Set,n=new Set;return e.forEach(e=>{7===e.length?t.add(e):n.add(e)}),[Array.from(t),Array.from(n)]}function esr(e,t){let{bg:n,content:a}=t,l=(0,hu.HD)(e)?ei3.lH.DARK:ei3.lH.LIGHT,r=(0,hu.F_)(e),i=(0,hb.oB)(e),o=n.filter(e=>e!==r),[s,c]=esl(o),d=function(e){let t={};return e.forEach(e=>{t[e]=(t[e]||0)+1}),t}(o),u=s.sort((e,t)=>d[t]-d[e]),m=u.find(e=>{let t=(0,hu.tK)(e);if(!t)return!1;let n=(0,hb.oB)(t);return(0,ei6.x)(n.l,l)&&!(0,rE.xN)(n.l,i.l,.12)});if(m)return m;let[p,f]=esl(a),_=p.find(e=>{let t=(0,hu.tK)(e);return t&&(0,ei3.Yx)((0,hb.oB)(t).l,ei3.lg.CONTENT)});if(_)return _;if((0,ei6.x)(i.l,l)&&!(0,ei6.c4)(i.l))return r;let g=c.sort((e,t)=>d[t]-d[e]).find(e=>{let t=(0,hu.tK)(e);if(!t)return!1;let n=(0,hb.oB)(t);return(0,ei6.x)(n.l,l)});return g?g:f.find(e=>{let t=(0,hu.tK)(e);return t&&(0,ei3.Yx)((0,hb.oB)(t).l,ei3.lg.CONTENT)})||(u.length?u[0]:p.length?p[0]:r)}function esi(e,t,n,a,l){e&&function e(t,n,a,l){if(t.name.toLowerCase().includes("swatch"))return;let r=a[t.guid];if((0,ei6.oR)({node:t,getNewColor:n,options:{...l,modeChanged:!1,role:(0,ei3.Dk)(t),originalSL:r}}),t.childrenNodes.length){let r=t.fills.some(e=>"IMAGE"===e.type),i=(0,ei6.gU)(t.fills,r?void 0:l.parentFillColor);t.childrenNodes.forEach(t=>{e(t,n,a,{...l,parentFillColor:i})})}}(e,(e,n)=>(0,ei6.Jv)(e,{...n,brandColor:t}),a,{mode:n,currentBrandHex:l})}function eso(e){let t=(0,ei6.X6)(e);if(t)return(0,hu.HD)(t)?ei3.lH.DARK:ei3.lH.LIGHT}function ess(e,t,n){e&&function e(t,n,a){let l=t.fills.some(e=>"IMAGE"===e.type),r=!l&&a.modeChanged;if((0,ei6.oR)({node:t,getNewColor:n,options:{...a,modeChanged:r,role:(0,ei3.Dk)(t)}}),t.childrenNodes){let i=(0,ei6.gU)(t.fills,l?void 0:a.parentFillColor);t.childrenNodes.forEach(t=>{e(t,n,{...a,modeChanged:r,parentFillColor:i})})}}(e,(e,t)=>(0,ei6.Jv)(e,{...t,brandColor:void 0}),{mode:t,modeChanged:!0,currentBrandHex:n})}var esc=n(220441),esd=n(104064),esu=n(850213),esm=n(405551);function esp(e,t,n){let a=ei.XJn.getCustomizableVariableName(n.guid,e);if(!a)return;let l=(0,esm.tm)(a);if(l)return t[l]}let esf={bottomLeftRadius:"rectangleBottomLeftCornerRadius",bottomRightRadius:"rectangleBottomRightCornerRadius",topLeftRadius:"rectangleTopLeftCornerRadius",topRightRadius:"rectangleTopRightCornerRadius"},es_={itemSpacing:"stackSpacing",paddingTop:"stackTopPadding",paddingBottom:"stackBottomPadding",paddingLeft:"stackLeftPadding",paddingRight:"stackRightPadding"};async function esg(e,t,n){var a;let l=ei.XJn.inheritedTextStyleGuid(e.guid);if(null===l)return;let r=lE.q.instance.get(l);if(r&&(null==(a=n.variableMaps)?void 0:a.fontVariableMap)&&"fontFamily"in r.boundVariablesForStyle){let a=r.boundVariablesForStyle.fontFamily,l=function(e,t,n){let a=ei.XJn.getCustomizableVariableName(t.guid,e);if(!a)return null;let l=(0,esm.tm)(a);return l?n[l]??null:null}(a.id,e,n.variableMaps.fontVariableMap);if(l)try{await (0,esc.E)(l.fontName),o4.l7.ai("first-draft-set-font-name",()=>{e.fontName=l.fontName,l.letterSpacing&&(e.letterSpacing=l.letterSpacing)}),t[a.id]=l.fontName.family}catch(e){(0,o2.$D)(o5.e.FEEDBACK,e)}}}async function esh(e){await Promise.all(e.node.childrenNodes.map(t=>esE({...e,node:t}))),(0,esu.V5)(e.node)}async function esE(e){var t;let{node:n,variableOverrideMap:a,theme:l,colorOptions:r}=e;!function(e,t){if("HORIZONTAL"===e.stackMode||"VERTICAL"===e.stackMode)for(let[n,a]of Object.entries(es_)){let l=e.boundVariables&&e.boundVariables[n];l&&o4.l7.ai("first-draft-override-spacing",()=>{if(t.variableMaps){let n=esp(l.id,t.variableMaps.numberVariableMap,e)??void 0;void 0!==n&&(e[a]=(0,esd.nV)(e[a],n,1))}})}}(n,l),function(e,t,n){if(e.boundVariables)for(let[a,l]of Object.entries(esf)){let r=e.boundVariables&&e.boundVariables[a];r&&o4.l7.ai("first-draft-override-radius",()=>{if(null==n?void 0:n.variableMaps){let a=esp(r.id,n.variableMaps.numberVariableMap,e)??void 0;if(void 0!==a){let n=(0,esd.UO)(e,e[l],a,1);e[l]=n,t[r.id]=n}}})}}(n,a,l),"TEXT"===n.type&&await esg(n,a,l);let i=n.fills.some(e=>"IMAGE"===e.type),o=!i&&r.modeChanged;if(t={node:n,getNewColor:(e,t)=>{let a=t.varId&&l?function(e,t,n){if(!t.variableMaps)return;let a=ei.XJn.getCustomizableVariableName(n.guid,e);if(!a)return;let l=(0,esm.tm)(a);if(l)return t.variableMaps.colorVariableMap[l]}(t.varId,l,n):void 0;return(0,ei6.Jv)(e,{...t,brandColor:a})},variableOverrideMap:a,options:{...r,modeChanged:o,role:(0,ei3.Dk)(n)}},o4.l7.ai("first-draft-override-paints",()=>{(0,ei6.oR)(t)}),n.childrenNodes.length){let e=(0,ei6.gU)(n.fills,i?void 0:r.parentFillColor);await esh({node:n,variableOverrideMap:a,theme:l,colorOptions:{...r,modeChanged:o,parentFillColor:e}})}}async function esv(e,t,n){var a,l;let r=Object.keys((null==(a=null==n?void 0:n.variableMaps)?void 0:a.colorVariableMap)??{}).length>0||Object.keys((null==(l=null==n?void 0:n.variableMaps)?void 0:l.numberVariableMap)??{}).length>0;n&&r&&await esE({node:e,variableOverrideMap:t,theme:n,colorOptions:{mode:n.darkMode?ei3.lH.DARK:ei3.lH.LIGHT,modeChanged:!!n.darkMode}})}async function esy(e){for(let t of(0,eot._F)(e,["INSTANCE","FRAME"],{sharedPluginData:{namespace:"jsx",keys:["theme"]}})){(0,ei1.xF)(t.guid);let e=t.getSharedPluginData("jsx","theme");if(e)try{let n=JSON.parse(e),a=ei9(n);await esv(t,{},a)}catch(t){(0,o2.x1)("First Draft theming","Failed to parse theme",{themeStr:e,e:t})}}}var esb=n(33604);let esC="Slot Parent";async function esw(e){var t;for(let e of(null==(t=lE.q.instance.getCurrentPage())?void 0:t.reversedChildrenNodes)??[])if(e.name===esC)return e;return await e.createNodeFromJSX({type:"AutoLayout",props:{name:esC,className:"flex flex-col w-fit h-fit"},children:[]})}async function esT(e,t){return await eo9(e,t)}async function esx(e){let t=(0,ee0.D)({enableNativeJsx:!0});t.skipInvisibleInstanceChildren=!0;let n=lE.q.instance;return await Promise.all(e.map(async(e,a)=>{let l=await t.createNodeFromJSXAsync(e),r=n.get(l.id);return 0===a&&(r.localOpacity=0),r}))}async function esN(e,t,n){o4.l7.ai("first-draft-override-paints",()=>{let n=(0,esb.uP)(e,{ignoreOpacity:!0}),a=(0,esb.rO)(e,n),l=t.darkMode?ei3.lH.DARK:ei3.lH.LIGHT;l===ei3.lH.DARK&&a.colors.text[0]&&(0,hu.HD)(a.colors.text[0])&&ess(e,l),l===ei3.lH.LIGHT&&a.colors.text[0]&&!(0,hu.HD)(a.colors.text[0])&&ess(e,l);let r=(0,hu.tK)(t.brandColor);r&&esi(e,r,l,{})}),o4.l7.ai("first-draft-remove-fill",()=>{e.fills=[]});let a=(0,esb.uP)(e,{ignoreOpacity:!0}),l=(0,esb.rO)(e,a);try{await (0,esb.jR)(e,(0,esb.k5)({fontFamilies:l.fontFamilies},{fontFamilies:t.fontFamilies}),n)}catch(e){(0,o2.$D)(o5.e.FEEDBACK,Error("first-draft: applyThemeProperties font failed to load"))}}async function esS(e,t,n){let a={};for(let l of e){if(o4.l7.ai("first-draft-set-plugin-data",()=>{if(n.frameName&&l.name!==n.frameName&&(l.name=n.frameName),t&&l.setSharedPluginData(eoa,"jsx",t),n.theme&&l.setSharedPluginData(eoa,"theme",JSON.stringify(n.theme)),n.sharedPluginData)for(let[e,t]of Object.entries(n.sharedPluginData))l.setSharedPluginData(eoa,e,t)}),(0,ei1.jZ)(l,n.dsKitKey,n.clientLifecycleId),n.autoFillParent&&l&&(0,ei1.tG)(l),n.theme&&await esv(l,a,n.theme),n.themeProperties){if(!n.deviceType)throw Error("deviceType must be provided if themeProperties is provided");await esN(l,n.themeProperties,n.deviceType)}n.isEval&&await esy(l)}return{themeOverrideMap:a}}async function esk({prevJsxJSON:e,jsxStr:t,jsxJSON:n,prevExpandedJsx:a,options:l},r){let i=function(e,t){let n=new eo_({dsKitKey:e.dsKitKey,reuseCache:!!e.prevNodeId,publishedComponentToInsertResult:e.componentNameToInsertResult??{},customJSXElementByName:e.componentNameToCustomJSXElement??{}}),a={getCustomJSXElementOrNull:e=>n.getCustomJSXElementOrNull(e),renderCustomJSXElementOrNull:async e=>await n.renderCustomJSXElementOrNull(e,a),getOrCreateSlotParent:esw,createNodeFromJSX:async e=>{let t=await esT([e],a),[n]=await esx(t);return n.removeLocalOpacity(),n},instrumentation:t};return a}(l,r),o=lE.q.instance,s=(0,ee0.D)({enableNativeJsx:!0});if(s.skipInvisibleInstanceChildren=!0,null==r||r.resetComponentStats(),!l.prevNodeId){if(0!==e.length)throw Error("prevJsxJSON should be null");let a=await esT(n,i);if(a.length>1)throw Error("Not implemented");let[r]=await esx(a);o4.l7.ai("first-draft-insert-jsx",()=>{if(l.parentNodeId){let e=o.get(l.parentNodeId);if(!e)throw(0,o2.x1)("first-draft","Could not find parent node with parentNodeId",{parentNodeId:l.parentNodeId}),Error("Could not find parent node with parentNodeId");let t=[r];for(let n of(t.reverse(),t))l.insertAtIndex?l.insertAtIndex===e.childrenGuids.length?e.appendChild(n):e.insertChild(n,l.insertAtIndex):e.appendChild(n)}}),null==r||r.materializeDescendants();let s=await esS([r],t,l);return await (0,ei1.U_)(r,l),r.removeLocalOpacity(),{insertNodeIds:[r.guid],expandedJsx:a,customizationResult:s}}let c=o.get(l.prevNodeId);if(!c)throw(0,o2.x1)("first-draft","Could not find node with prevNodeId",{prevNodeId:l.prevNodeId}),Error("Could not find node with prevNodeId");let d=await esT(n,i);if(1!==a.length||1!==d.length)throw Error("Not implemented");let u=await s.reconcileNodeFromJSXAsync({id:c.guid},a[0],d[0]),m=o.get(u.id);null==m||m.materializeDescendants();let p=await esS([m],t,l);return l.shouldAnimateLoading&&l.doneTextLayerIds&&function(e,t,n){let a=[];for(let l of((0,ey.hV)(e,t,e=>{"TEXT"===e.type&&a.push(e)}),a))n.has(l.guid)||((0,ei1.us)(l)?(ei.zuo.cancelAllAnimationsForNode(l.guid),n.add(l.guid)):ei.zuo.isAnimating(l.guid)||l.setOpacityWithAnimation(1,yv._E.forOpacityOscillation(45,.25,.8,60),"first-draft-text-layer-opacity"))}(o,m,l.doneTextLayerIds),m.guid!==l.prevNodeId&&await (0,ei1.U_)(m,l),{insertNodeIds:[m.guid],expandedJsx:d,customizationResult:p}}var esI=n(785052),esA=n(742808);Gb.object({runtimeDuration:Gb.number(),firstByteReceivedAtOffset:Gb.number(),jsxStreamDuration:Gb.number(),numComponents:Gb.number(),componentLookupSuccesses:Gb.number(),primitiveComponents:Gb.number(),componentLookupFailures:Gb.number(),numImages:Gb.number(),imageFailures:Gb.number(),imageSuccesses:Gb.number(),firstImageLoadedAtOffset:Gb.number(),lastStreamByteReceivedAtOffset:Gb.number(),imageDurations:Gb.array(Gb.object({start:Gb.number(),end:Gb.number(),duration:Gb.number(),status:Gb.enum(["success","failure"])}))});class esO{constructor(e){this.type=e,this.startTime=0,this.instrumentationData={runtimeDuration:-1,firstByteReceivedAtOffset:-1,jsxStreamDuration:-1,numComponents:0,primitiveComponents:0,componentLookupSuccesses:0,componentLookupFailures:0,numImages:0,imageFailures:0,imageSuccesses:0,firstImageLoadedAtOffset:-1,lastStreamByteReceivedAtOffset:-1,imageDurations:[]},this.imageProgressEmitter=new esI.b("imageProgressEmitter")}start(){this.startTime=Date.now()}trackFirstByteReceived(){-1===this.instrumentationData.firstByteReceivedAtOffset&&(this.instrumentationData.firstByteReceivedAtOffset=Date.now()-this.startTime)}resetComponentStats(){this.instrumentationData.numComponents=0,this.instrumentationData.componentLookupSuccesses=0,this.instrumentationData.componentLookupFailures=0,this.instrumentationData.primitiveComponents=0,this.imageProgressEmitter.trigger("statusChanged")}trackComponentLookup(){this.instrumentationData.jsxStreamDuration=Date.now()-this.instrumentationData.firstByteReceivedAtOffset-this.startTime,this.instrumentationData.numComponents+=1}trackPrimitiveUsage(){this.instrumentationData.primitiveComponents+=1,this.instrumentationData.jsxStreamDuration=Date.now()-this.instrumentationData.firstByteReceivedAtOffset-this.startTime}trackComponentLookupSuccess(){this.trackComponentLookup(),this.instrumentationData.componentLookupSuccesses+=1}trackComponentLookupFailure(){this.trackComponentLookup(),this.instrumentationData.componentLookupFailures+=1}trackLastStreamByteReceived(){this.instrumentationData.lastStreamByteReceivedAtOffset=Date.now()-this.startTime,this.instrumentationData.jsxStreamDuration=this.instrumentationData.lastStreamByteReceivedAtOffset-this.instrumentationData.firstByteReceivedAtOffset}trackFinished(e){this.instrumentationData.runtimeDuration=Date.now()-this.startTime;let t={type:this.type,status:e},n=[{metric:"first_draft.client.runtime_duration",value:this.instrumentationData.runtimeDuration,tags:t}];-1!==this.instrumentationData.firstByteReceivedAtOffset&&(n.push({metric:"first_draft.client.num_components",value:this.instrumentationData.numComponents,tags:t},{metric:"first_draft.client.component_lookup_failures",value:this.instrumentationData.componentLookupFailures,tags:t},{metric:"first_draft.client.first_byte_received_at_offset",value:this.instrumentationData.firstByteReceivedAtOffset,tags:t},{metric:"first_draft.client.jsx_stream_duration",value:this.instrumentationData.jsxStreamDuration,tags:t},{metric:"first_draft.client.num_images",value:this.instrumentationData.numImages,tags:t},{metric:"first_draft.client.last_stream_byte_received_at_offset",value:this.instrumentationData.lastStreamByteReceivedAtOffset,tags:t}),this.instrumentationData.numImages>0&&n.push({metric:"first_draft.client.image_failures",value:this.instrumentationData.imageFailures,tags:t},{metric:"first_draft.client.image_successes",value:this.instrumentationData.imageSuccesses,tags:t},{metric:"first_draft.client.first_image_loaded_at_offset",value:this.instrumentationData.firstImageLoadedAtOffset,tags:t})),(0,esA.rI)(n)}async logImageLoad(e){let t="success",n=Date.now()-this.startTime;try{this.instrumentationData.numImages++,this.imageProgressEmitter.trigger("statusChanged"),await e()}catch(e){throw t="failure",e}finally{let e=Date.now()-this.startTime;this.instrumentationData.imageDurations.push({start:n,end:e,duration:e-n,status:t}),-1===this.instrumentationData.firstImageLoadedAtOffset&&(this.instrumentationData.firstImageLoadedAtOffset=e),"success"===t?this.instrumentationData.imageSuccesses++:this.instrumentationData.imageFailures++,this.imageProgressEmitter.trigger("statusChanged")}}}function esL(e){let t=new Set([]),n=[...e];for(;n.length;){let e=n.pop();if(e){for(let a of(e.type.startsWith(eod.FE)&&t.add(e.type),e.children))"string"!=typeof a&&n.push(a);for(let t of Object.values(e.props))if("string"!=typeof t){if(eoN(t))n.push(t);else if(Array.isArray(t))for(let e of t)eoN(e)&&n.push(e)}}}return t}async function esP(e,t,n){var a;if((null==t?void 0:t.type)!=="LIBRARY")throw Error("Can only insert library components");if(!n)return(0,o2.$D)(o5.e.FEEDBACK,Error("[First Draft] Attempted to insert component without kitContents")),{status:"error"};let l=function(e,t){let n=t.toLowerCase();if(e.components[n]){let t=e.components[n];return{assetType:"component",key:t.key,version:t.version}}if(e.state_groups[n]){let t=e.state_groups[n];return{assetType:"state_group",key:t.key,version:t.version}}return null}(n,e);if(!l)return{status:"error"};let{assetType:r,key:i,version:o}=l;if("component"===r){let t=ei.XJn.getComponentByKeyAndVersion(i,o);if(t)return{status:"success",key:i,version:o,jsxName:(0,eod.WG)(e),guid:t}}if("state_group"===r){let t=ei.XJn.getStateGroupByKeyAndVersion(i,o);if(t)return{status:"success",key:i,version:o,jsxName:(0,eod.WG)(e),guid:t}}try{let e=(null==(a=ET.D)?void 0:a.getState().fileVersion)||0,t=await (0,iD.GD)(`/api/file_proxy/${r}/${i}/version/${o}/canvas`,{fv:e.toString()},{responseType:"arraybuffer"}),n=new Uint8Array(t.response),l=ei.NfO.deserializeProductComponentFromBuffer(i,n),s=lE.q.instance.get(l);if(!s)throw Error("Deserialized component not found in scene graph");return{status:"success",key:i,version:o,jsxName:(0,eod.WG)(s.name),guid:l}}catch(e){if(e instanceof iD.Dr&&e.status>=400)return{status:"error"};throw e}}let esD=(0,tp.n)(async function(e,t){var n;let a=await iD.Ay.post(`/api/first_draft/kit_contents/${e.key}`,{jsx_names:t});return(null==(n=null==a?void 0:a.data)?void 0:n.meta)??null});async function esR({dsKitKey:e,jsxJSON:t,componentNameToInsertResult:n}){if("LIBRARY"!==e.type)return;let a=esL(t),l=new Set;for(let e of a)e in n||l.add(e);if(0===l.size)return;let r=await esD(e,Array.from(l)),i={components:eoo((null==r?void 0:r.components)??{}),state_groups:eoo((null==r?void 0:r.state_groups)??{})};await Promise.all(Array.from(l).map(async t=>{let a=await esP(t,e,i);return"success"===a.status&&(n[a.jsxName]=a),a}))}let esM=e=>Object.keys(e).includes("id");async function esF(e){let t=await eox(e);if(!t||0===t.length)return t;let n=function(e){let t=e.lastIndexOf(">");return -1!==t?e.substring(0,t+1):e}(e);if(!n||!n.endsWith(">"))return t;let a=await eox(n);if(!a||0===a.length)return t;let l=1,r=e=>{if(e&&"object"==typeof e)for(let[t,n]of Object.entries(e))t.startsWith("image")?Array.isArray(n)?n.every(esM)&&(e[t]=n.map(()=>{let e={id:l.toString()};return l++,e})):esM(n)?(e[t]={id:l.toString()},l++):r(n):r(n)};return function e(t,n,a){let l=!0;for(let r=0;r<t.length;r++){let i=t[r],o=n[r];if(!o||!i){l=!1;break}if("string"==typeof o){"string"!=typeof i&&(l=!1),l=i===o;continue}if("string"!=typeof i){if(i.type!==o.type){l=!1;continue}for(let[t,n]of(e(i.children,o.children,a)||(l=!1),Object.entries(o.props))){let r=i.props[t];if(eoN(n)&&eoN(r))e([r],[n],a)||(l=!1);else if(Array.isArray(n)&&Array.isArray(r))for(let t=0;t<n.length;t++)t>=r.length&&(l=!1),eoN(n[t])&&eoN(r[t])?e([r[t]],[n[t]],a)||(l=!1):Eo()(r[t],n[t])||(l=!1);else"isPartial"===t?l=r===n:Eo()(r,n)||(l=!1)}l&&a(o)}}return l}(a,t,e=>{("Image"===e.type||"Instance"===e.type||e.type.startsWith("Component"))&&(r(e.props),e.props={...e.props,sharedPluginData:{...e.props.sharedPluginData,isDone:"true"}})}),t}async function esB(e,t,n={}){var a,l;let r=eol(e.jsxStr),i=await esF(r);if(!i||0===i.length||i.some(e=>!e)||!(void 0!==(l=i[0]).type&&""!==l.type)||(n.prevJsxStr??"")===r)return{};await (null==(a=n.onBeforeInsertJSX)?void 0:a.call(n,i));let o={prevNodeId:n.prevNodeId,isIncomplete:!function(e){var t;let n=e.match(/<([^\/\s>]+)[^>]*>/),a=null==(t=e.match(/<\/([^>]+)>/g))?void 0:t.pop();return!!n&&!!a&&n[1]===a.replace("</","").replace(">","")}(r),autoFillParent:!0,insertBehavior:"viewport-ease",shouldGenerateImages:!0,...e.options},{insertNodeIds:s,customizationResult:c,expandedJsx:d}=await esk({jsxStr:r,jsxJSON:i,prevJsxJSON:n.prevJsxJSON??[],prevExpandedJsx:n.prevExpandedJsx??[],options:o},t);return{insertNodeIds:s,customizationResult:c,jsxStr:r,jsxJSON:i,expandedJsx:d}}function esU({onAfterInsertPartialJsx:e,onReset:t,onImageProgress:n,shouldContinueStream:a,clientLifecycleId:l,insertType:r}){let i=(0,f.useRef)({}),o=(0,f.useRef)(null),s=(0,f.useRef)({}),c=(0,f.useRef)({}),d=(0,f.useRef)({}),u=(0,f.useRef)(new esO(r||"generate")),m=(0,f.useCallback)(async t=>{var n,r,c,p,_;try{i.current.isRunning=!0,i.current.donePromise=(async()=>{var n,r,c;try{let e={jsxStrLength:null==(n=t.jsxStr)?void 0:n.length,options:{parentNodeId:t.options.parentNodeId,isIncomplete:t.options.isIncomplete,prevNodeId:t.options.prevNodeId},clientLifecycleId:l},a={...e,jsxStr:t.jsxStr};(0,o2.ED)("first-draft","Inserting Streamed JSX Updates",e,{createSentryBreadcrumb:!0,logToConsole:o2.NU.NEVER}),(0,o2.ED)("first-draft","Inserting Streamed JSX Updates",a,{createSentryBreadcrumb:!1}),i.current.doneTextLayerIds=i.current.doneTextLayerIds||new Set,i.current.componentNameToCustomJSXElement=i.current.componentNameToCustomJSXElement||{},i.current.componentNameToInsertResult=i.current.componentNameToInsertResult||{};let{insertNodeIds:r,customizationResult:c,jsxJSON:d,jsxStr:m,expandedJsx:p}=await esB({...t,options:{...t.options,componentNameToInsertResult:i.current.componentNameToInsertResult,componentNameToCustomJSXElement:i.current.componentNameToCustomJSXElement,shouldAnimateLoading:(0,y.kc)().first_draft_animations,doneTextLayerIds:i.current.doneTextLayerIds,clientLifecycleId:l}},u.current,{prevNodeId:o.current,prevJsxStr:i.current.jsxStr,prevJsxJSON:i.current.jsxJSON,prevExpandedJsx:i.current.expandedJsx,onBeforeInsertJSX:async e=>{await esR({jsxJSON:e,dsKitKey:t.options.dsKitKey,componentNameToInsertResult:i.current.componentNameToInsertResult??{}})}});if(!r){if(void 0===d)return;throw Error("Failed to insert any nodes")}if(r.length>1)throw Error("Expected at most one node to be inserted");(0,ei1.OJ)(r[0]),o.current!==r[0]&&(o.current&&(0,yf.ks)(o.current),(0,yf.Vm)(r[0],f.createElement(f.Fragment,null),{overflowHidden:!0})),o.current=r[0],s.current={...s.current,...(null==c?void 0:c.themeOverrideMap)??{}},i.current.jsxStr=m,i.current.jsxJSON=d,i.current.expandedJsx=p,i.current.queuedEffects=i.current.queuedEffects||{}}catch(e){(0,o2.$D)(o5.e.FEEDBACK,e instanceof Error?e:Error(e)),o.current&&!lE.q.instance.get(o.current)&&(o.current=null,i.current.jsxStr=void 0,i.current.jsxJSON=void 0,i.current.expandedJsx=void 0)}try{if(o.current){if(null==(r=t.options)?void 0:r.shouldGenerateImages){if(t.options.imageArgs)(0,ei1.Ms)({containingNodeId:o.current,queuedEffects:i.current.queuedEffects,shouldContinueStream:a,imagesTrace:d.current,jsxJSON:i.current.jsxJSON,initialUserPrompt:(null==(c=t.options.imageArgs)?void 0:c.initialUserPrompt)||"",clientLifecycleId:l,instrumentationRef:u});else throw Error("Tried to generate images without image args")}(0,ei1.D9)(o.current,i.current.queuedEffects,t.options),(0,ei1.fE)({containingNodeId:o.current}),null==e||e(o.current)}}catch(e){(0,o2.$D)(o5.e.FEEDBACK,e instanceof Error?e:Error(e))}})(),await i.current.donePromise,i.current.insertAgainWhenDone&&((0,o2.ED)("first-draft","Re-Inserting JSX Updates (Immediate)",{jsxStrLength:null==(r=null==(n=i.current.lastArgs)?void 0:n.jsxStr)?void 0:r.length,options:{parentNodeId:null==(c=i.current.lastArgs)?void 0:c.options.parentNodeId,isIncomplete:null==(p=i.current.lastArgs)?void 0:p.options.isIncomplete,prevNodeId:null==(_=i.current.lastArgs)?void 0:_.options.prevNodeId}}),i.current.insertAgainWhenDone=!1,await m(i.current.lastArgs))}finally{i.current.isRunning=!1}},[e,a,l]),p=(0,q.A)(m,500,{leading:!0,maxWait:1e3}),_=(0,f.useCallback)(async()=>{for(p.isPending()&&await p.flush();i.current.isRunning;)i.current.donePromise&&await i.current.donePromise,await eor(10);let e=i.current.queuedEffects??{};(await Promise.allSettled(Array.from(Object.values(e)))).forEach(e=>{"rejected"!==e.status||e.reason instanceof eos.G1&&500>(0,eos.Iu)(e.reason)||(0,o2.$D)(o5.e.FEEDBACK,e.reason)})},[p]),g=(0,f.useCallback)(async()=>{var e;try{await _()}finally{if(null==t||t(),o.current&&((0,yf.ks)(o.current),(0,ei1.RY)(o.current)),i.current.lastArgs){let t=Object.keys(s.current).length>0;await (0,ei1.oT)(null==(e=i.current.lastArgs.options)?void 0:e.dsKitKey,o.current,ei.oVz.CURRENT,{detachVariables:t})}o.current=null,i.current={},c.current={},d.current={}}},[_,t]),h=(0,f.useCallback)(e=>(i.current.lastArgs=e,i.current.isRunning)?(i.current.insertAgainWhenDone=!0,Promise.resolve()):(null==p?void 0:p(e))||Promise.resolve(),[p]);return(0,f.useEffect)(()=>{let e=u.current;if(!n)return;let t=()=>n(e.instrumentationData.imageSuccesses,e.instrumentationData.numImages);return e.imageProgressEmitter.on("statusChanged",t),()=>{e.imageProgressEmitter.removeListener("statusChanged",t)}},[u,n]),{insertJSX:h,resetAsync:g,flushPending:_,nodeIdRef:o,imagesTraceRef:d,themeOverrideMapRef:s,instrumentationRef:u}}async function esH(e={}){let{sleepTime:t=100}=e;await new Promise(e=>setTimeout(e,t))}async function*esG(e,t={}){let{chunksPerYield:n=20,useWords:a=!0}=t;if(a){let a=e.split(" "),l=[];for(let e=0;e<a.length;e+=n)l.push(...a.slice(e,e+n)),await esH(t),yield l.join(" ")}else{let a=e.split(""),l=[];for(let e=0;e<a.length;e+=n)l.push(...a.slice(e,e+n)),await esH(t),yield l.join("")}}function esV(){return{loadingComponentType:"ComponentLoading",shouldGenerateImages:!0}}function esK({mockStreamOptions:e,onInsertJSXDone:t,onAfterInsertPartialJsx:n,shouldContinueStream:a,clientLifecycleId:l,insertType:r}){let i=(0,af.tS)(),[o,s]=(0,f.useState)(null),c=(0,aA.cJ)(),d=(0,f.useRef)(void 0),u=(0,f.useRef)(void 0),m=(0,f.useRef)(null),[p,_]=(0,f.useState)({loaded:0,total:0}),{insertJSX:g,resetAsync:h,flushPending:E,nodeIdRef:v,imagesTraceRef:y,instrumentationRef:b,themeOverrideMapRef:C}=esU({onAfterInsertPartialJsx:e=>{var t;if(c&&e){let n=lE.q.instance.get(e);(null==n?void 0:n.isResponsiveNode)&&((null==(t=null==n?void 0:n.parentNode)?void 0:t.childrenNodes)??[]).length>1&&(o4.l7.ai("first-draft-sites-page-remove",()=>{var e;null==(e=n.parentNode)||e.childrenNodes[0].removeSelfAndChildren()}),setTimeout(()=>{ei.glU.triggerAction("goto-layer",{args:{nodeId:e}})},200))}null==n||n(e)},onReset:()=>{d.current=void 0,_({loaded:0,total:0})},onImageProgress:(e,t)=>{_({loaded:e,total:t})},shouldContinueStream:a,clientLifecycleId:l,insertType:r}),{isRunning:w,runPrompt:T,runPromptMocked:x}=function({onPromptOutput:e,onBeforeRunPrompt:t,onRunPromptSuccess:n,onRunPromptError:a,shouldContinueStream:l,mockStreamOptions:r,clientLifecycleId:i}){let[o,s]=(0,f.useState)(!1),c=(0,f.useRef)({}),d=(0,f.useCallback)(async(r,i)=>{if(!o)try{c.current={},s(!0),null==t||t(i),await r(t=>{null==e||e(t,i),c.current=t},l),await (null==n?void 0:n(c.current,i))}catch(e){throw await (null==a?void 0:a(e,c.current,i)),e}finally{s(!1)}},[o,t,e,a,n,l]);return{isRunning:o,runPrompt:(0,f.useCallback)(async(e,t)=>await d(async(t,n)=>{await eoi(e,t,n,i)},t),[i,d]),runPromptMocked:(0,f.useCallback)(async(e,t)=>await d(async t=>{if(await esH(r),!e.dsKit)throw Error("dsKit is required in mockedResponse");let n=e.dsKit,a=e.theme??{},l=e.jsx??"";for await(let e of(t({theme:a}),await esH(r),esG(l,r)))t({dsKit:n,theme:a,jsx:e});t({dsKit:n,theme:a,jsx:l})},t),[d,r])}}({mockStreamOptions:e,shouldContinueStream:a,clientLifecycleId:l,onBeforeRunPrompt:e=>{if(e.analyticsOptions){let{dsKitType:t,isLocal:n,kitKey:a}=esW(null,e.insertJSXOptions);(0,Z.sx)("First Draft: Layout Generation Started",{file_key:i,generateId:l,clientLifecycleId:l,dsKitType:t,isLocal:n,kitKey:a},{forwardToDatadog:!0,batchRequest:!0})}},onRunPromptSuccess:async(e,n)=>{b.current.trackLastStreamByteReceived(),await E(),e.trace&&s({...e.trace,children:[...e.trace.children,...Object.values(y.current)]});let r=eol(e.jsx??"");if(!e.dsKit&&!v.current)throw Error("No dsKit in prompt output");if(r&&!v.current)throw Error("JSX was present in the prompt output but no node was inserted");if(await (null==t?void 0:t(v.current,C.current,m.current,u.current??[])),n.analyticsOptions){let{dsKitType:t,isLocal:r,kitKey:o}=esW(e,n.insertJSXOptions),s={promptOutput:JSON.stringify({dsKit:e.dsKit,theme:e.theme,presets:e.presets}),timeElapsedMs:Date.now()-n.analyticsOptions.startTime,dsKitType:t,isLocal:r,kitKey:o,file_key:i,generateId:l,clientLifecycleId:l};a&&!a()?(b.current.trackFinished("stopped"),(0,Z.sx)("First Draft: Layout Generation Ended",{...s,nodeId:v.current,status:"failed",reason:"stopped",instrumentationData:JSON.stringify(b.current.instrumentationData)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})):v.current?(b.current.trackFinished("success"),(0,Z.sx)("First Draft: Layout Generation Ended",{...s,nodeId:v.current,status:"completed",instrumentationData:JSON.stringify(b.current.instrumentationData)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})):(b.current.trackFinished("failure"),(0,Z.sx)("First Draft: Layout Generation Ended",{...s,status:"failed",reason:"empty generation",instrumentationData:JSON.stringify(b.current.instrumentationData)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}))}},onRunPromptError:(e,t,n)=>{var a;b.current.trackFinished("failure"),t.trace&&s(t.trace);let{dsKitType:r,isLocal:o,kitKey:c}=esW(t,n.insertJSXOptions),d={promptOutput:JSON.stringify({dsKit:t.dsKit??{},jsx:t.jsx??"",theme:t.theme??{}}),error:e.toString(),timeElapsedMs:Date.now()-((null==(a=n.analyticsOptions)?void 0:a.startTime)??0),dsKitType:r,isLocal:o,kitKey:c,file_key:i,clientLifecycleId:l},u=(0,o2.$D)(o5.e.FEEDBACK,e,{extra:d});(0,Z.sx)("First Draft: Layout Generation Ended",{...d,status:"failed",reason:"error",nodeId:v.current,sentryEventId:u,instrumentationData:JSON.stringify(b.current.instrumentationData)})},onPromptOutput:(e,t)=>{if(b.current.trackFirstByteReceived(),e.dsKit&&e.theme){if(d.current||(d.current=function(e,t){try{return ei9(e)}catch(n){return n instanceof Error&&(0,o2.$D)(o5.e.FEEDBACK,Error(`[First Draft theme] Error parsing theme from output: ${n.message}`),{extra:{...t,theme:JSON.stringify(e),error:n}}),{}}}(e.theme,{generateId:l})),!u.current&&e.presets&&(u.current=e.presets),e.dsKit.isLocal){let e=t.insertJSXOptions.dsKitKey.pageId;if(!e)throw Error("No pageId in insertJSXOptions");m.current={type:"LOCAL",pageId:e}}else m.current={type:"LIBRARY",key:e.dsKit.kitKey};if(e.jsx)return g({jsxStr:e.jsx,options:{...t.insertJSXOptions,theme:d.current,dsKitKey:m.current}})}}}),N=(0,eoe.B)(),S=(0,f.useCallback)(async e=>{"LOCAL"===e.dsKitKey.type&&i&&await (0,ei2.p4)(i,e,N)},[i,N]),k=(0,f.useCallback)(async(e,t,n)=>{let a;if(w)return{nodeId:null,success:!0};await h();let{designSystem:r}=t;try{r&&await S(r)}catch(e){return(0,o2.$D)(o5.e.FEEDBACK,e),{nodeId:null,success:!1,error:e}}let i=function(e,t){if(!t)return{userPrompt:e};if("LOCAL"!==t.dsKitKey.type)return{userPrompt:e,kitKey:t.dsKitKey.key,isLocal:!1};let n=ei.XJn.getKitKey(t.dsKitKey.pageId);if(!n)throw Error("Failed to get a kitKey for local kit");return{userPrompt:e,kitKey:n,isLocal:!0}}(e,r),o={};if(c){let e=lE.q.instance.getCurrentPage();if(e){let t=1===e.childrenNodes.length&&e.childrenNodes[0].isResponsiveSet&&1===e.childrenNodes[0].childrenNodes.length&&e.childrenNodes[0].childrenNodes[0].isResponsiveNode&&0===e.childrenNodes[0].childrenNodes[0].childrenNodes.length,n=null;t?(aT.wr(),(0,lC.S)("panel"),aT.Dh([e.childrenGuids[0]])):o4.l7.ai("first-draft-sites-page-create",()=>{ei.glU.createResponsiveSet(null)}),n=lE.q.instance.get(ei.glU.getFirstSelectedNodeIdForCurrentPage()),o.parentNodeId=null==n?void 0:n.guid,o.createNewSitesWebpage=!0,o.frameName="Primary"}}try{b.current.start(),await T(i,{insertJSXOptions:{frameName:e,imageArgs:{initialUserPrompt:e},...esV(),...n,...o,sharedPluginData:{userPrompt:e,...n.sharedPluginData},dsKitKey:null==r?void 0:r.dsKitKey},analyticsOptions:{startTime:b.current.startTime,clientLifecycleId:l}})}catch(e){a=e}let s=v.current;if(await h(),s&&!lE.q.instance.get(s))throw Error("Failed to insert node");return et.Y5.commit(),{nodeId:s,success:!a,error:a}},[w,h,T,v,l,S,c,b]);return{submitPromptMocked:(0,f.useCallback)(async(e,t)=>{if(w)return{nodeId:null,success:!0};await h(),await x(e,{insertJSXOptions:{...esV(),...t,imageArgs:{initialUserPrompt:"website"}},analyticsOptions:null});let n=v.current;return await h(),{nodeId:n,success:!0}},[w,h,x,v]),submitPrompt:k,isRunning:w,executionTrace:o,imageProgress:p}}function esW(e,t){var n;let a=t.dsKitKey,l=(null==a?void 0:a.type)??"AUTO",r=(null==a?void 0:a.type)==="LOCAL",i=a?"key"in a?a.key:a.pageId:(null==(n=null==e?void 0:e.dsKit)?void 0:n.kitKey)??null;return{dsKitOption:a,dsKitType:l,isLocal:r,kitKey:i}}var esz=n(332366),esj=n(992795);let esJ={"gpt-4-turbo-2024-04-09":{name:"GPT-4 Turbo",model:"gpt-4-turbo-2024-04-09"},"gpt-4o-2024-05-13":{name:"GPT-4o",model:"gpt-4o-2024-05-13"}};async function esY({model:e,selectedEval:t,kit:n,customEvalPrompts:a}){let l="LIBRARY"===n.dsKitKey.type?n.dsKitKey.key:ei.XJn.getKitKey(n.dsKitKey.pageId)??"",r="LOCAL"===n.dsKitKey.type,{data:{meta:{s3_key:i}}}=await eon.Gh.postFirstDraftRunEvals({model:e,kitKey:l,selectedEval:t,isLocal:r,evalPrompts:a});return new Promise(e=>{let t=0,n=setInterval(async()=>{t+=1;try{let a=await eon.Gh.getFirstDraftsEvalStatus({s3Key:i}),l=a.data.meta.status;"success"===l?(clearInterval(n),e(a.data.meta)):("failed"===l||t>=9)&&(clearInterval(n),e(null))}catch{}},2e4)})}function esX({selectedKitOption:e,clientLifecycleId:t}){let n=(0,_.wA)(),{evalSetsQueryStatus:a,evalSets:l}=function(){let[e]=(0,eK.IT)(esq(null));return{evalSetsQueryStatus:e.status,evalSets:e.data??[]}}(),[r,i]=(0,f.useState)(!1),[o,s]=(0,f.useState)(!1),[c,d]=f.useState(""),[u,m]=(0,f.useState)(!1),[p,g]=f.useState(null),[h,E]=f.useState(esJ["gpt-4-turbo-2024-04-09"]),v=(0,_.d4)(Iy.ao),[y,b]=(0,f.useState)(!1);(0,f.useEffect)(()=>{l.length&&null==p&&g(l[0])},[l,p]);let C=(0,f.useMemo)(()=>(null==e?void 0:e.type)==="KIT"&&"LOCAL"===e.kit.dsKitKey.type,[e]),w=(0,f.useCallback)(()=>{if(o)try{let e=JSON.parse(c);if(!Array.isArray(e))return;return e.map(e=>e.trim()).filter(e=>e.length>0)??void 0}catch(e){console.error("Unable to parse custom prompts list",e);return}},[c,o]),T=(0,f.useCallback)(()=>e&&"AUTO"!==e.type?C&&u?(0,eot.Ol)(e.kit)??e.kit:e.kit:null,[e,C,u]),x=(0,f.useCallback)(async()=>{if(y||!p)return;let e=T();if(e)try{b(!0);let a=w(),l=a?`Running evals with ${a.length} custom prompts...`:`Running evals for ${p}...`;n(eS.F.enqueue({type:"FIRST_DRAFT_EVAL",timeoutOverride:1/0,message:l}));let i=await esY({kit:e,model:h.model,selectedEval:p,customEvalPrompts:a});if(!i){n(eS.F.enqueue({type:"FIRST_DRAFT_EVAL",message:"Evals failed. Please try again.",error:!0}));return}await esQ({kit:e,batch:i,shouldGenerateImages:r,clientLifecycleId:t})}catch(e){(0,o2.x1)("first-draft","Error running evals",{error:e}),n(eS.F.enqueue({type:"FIRST_DRAFT_EVAL",message:"Eval failed. Please check the console for more information.",error:!0}))}finally{b(!1)}},[y,p,T,w,n,h.model,r,t]);return f.createElement(fy.Y,{padding:{vertical:12},direction:"vertical"},f.createElement("div",{className:a8.cx.cursorPointer.flex.itemsCenter.wFull.$},f.createElement(sc.E,{fontSize:11,fontWeight:"medium"},"Evals")),f.createElement(fy.Y,null,f.createElement(esj.ms,{selected:p,onSelectedChange:e=>g(e),placeholder:"Select eval set",labelForSelectedItem:e=>e,displayAboveTarget:!0,lean:"right",items:l.map(e=>({type:"checkableOption",value:e,text:e})),disabled:"loaded"!==a}),f.createElement(esj.ms,{selected:h,onSelectedChange:e=>E(e),placeholder:"Model",labelForSelectedItem:e=>e.name,displayAboveTarget:!0,lean:"right",items:Object.values(esJ).map(e=>({type:"option",value:e,text:e.name}))}),f.createElement(va.$n,{variant:"secondary",onClick:x},"Run evals"),f.createElement(esZ,{disabled:y,onUpload:e=>{let n=T();n&&esQ({kit:n,batch:e,shouldGenerateImages:r,clientLifecycleId:t})}})),f.createElement(fy.Y,null,f.createElement($o.S,{checked:r,disabled:y,onChange:()=>i(e=>!e),label:f.createElement(oE.J,null,"Gen images")}),f.createElement($o.S,{checked:o,disabled:y,onChange:()=>s(e=>!e),label:f.createElement(oE.J,null,"Custom prompts")}),C&&f.createElement($o.S,{checked:u,disabled:y,onChange:()=>m(e=>!e),label:f.createElement(oE.J,null,"Use published kit version")}),C&&v&&f.createElement(CD.Z,{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":"You currently have unpublished changes to your library kit.\nPublish library updates before running evals to ensure the current kit version is used."})),o&&f.createElement("textarea",{className:a8.cx.resizeNone.wFull.colorBgSecondary.px12.py8.bRadius5.$,rows:3,value:c,placeholder:'Enter custom eval prompts as JSON array. E.g. ["prompt1", "prompt2"]',onChange:e=>d(e.target.value)}))}let esq=eK.M4.Query({fetch:async()=>(await eon.Gh.getFirstDraftAllEvalSets()).data.meta.eval_sets});function esZ({disabled:e,onUpload:t}){let n=f.useRef(null);return f.createElement(esz.n,{acceptedFileTypes:"json",singleFile:!0,isDisabled:e,svgAltText:"Upload eval",inputId:"first-draft-eval-upload",inputRef:n,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":"Upload eval",onFileInputChange:e=>()=>{var n,a;let l=null==(a=null==(n=e.current)?void 0:n.files)?void 0:a[0];if(l){let n=new FileReader;n.onload=n=>{var a;let l=null==(a=n.target)?void 0:a.result;if(l)try{let e=JSON.parse(l),n=eon.Xs.parse(e);t(n)}catch(e){console.error("Error uploading eval",e)}finally{e.current&&(e.current.value="")}},n.readAsText(l)}}},f.createElement(ry.U,{svg:IF.A},f.createElement(nu.e,null)))}async function esQ({batch:e,kit:t,shouldGenerateImages:n,clientLifecycleId:a}){try{ET.D.dispatch(eS.F.enqueue({type:"FIRST_DRAFT_EVAL",timeoutOverride:1/0,message:"Inserting evals..."}));let l=[],r=[];for(let t of e.eval_results){let e="",n=null;try{e=eol(t.jsx??""),n=await esF(e)}catch(e){n=[es1(String(e))]}let a=t.userPromptRaw??"";r.push({userPrompt:a,jsxJSON:n||[]});let i=[es0({title:"User Prompt",metadata:a}),{type:"AutoLayout",props:{className:"w-full",sharedPluginData:{isDone:"true",theme:JSON.stringify(t.theme??{})}},children:n??[]},es0({title:"Extracted JSX",metadata:e})];if(t.theme&&i.push(es0({title:"Theme",metadata:JSON.stringify(t.theme,null,2)})),t.trace){let e=es$(t.trace);e&&i.push(es0({title:"Examples in prompt",metadata:e})),i.push(es0({title:"Trace",metadata:JSON.stringify(t.trace),storeInPluginData:!0}))}l.push({type:"VStack",props:{className:"flex flex-col w-[425px] items-center gap-[48px] p-4"},children:i})}let i=[{type:"HStack",props:{name:"Eval Run Set",className:"flex flex-row w-fit h-fit p-4 gap-4 bg-slate-50"},children:l}],o={};"LIBRARY"===t.dsKitKey.type&&await esR({jsxJSON:i,dsKitKey:t.dsKitKey,componentNameToInsertResult:o});let{insertNodeIds:s}=await esk({jsxJSON:i,jsxStr:"",prevJsxJSON:[],prevExpandedJsx:[],options:{isEval:!0,dsKitKey:t.dsKitKey,autoFillParent:!0,componentNameToInsertResult:o,shouldAnimateLoading:!1,clientLifecycleId:a}},null);if(!s.length)return;let c=s[0];ET.D.dispatch(eS.F.enqueue({type:"FIRST_DRAFT_EVAL",timeoutOverride:1/0,message:"Populating icons & images..."}));let d=lE.q.instance.get(c),u=((null==d?void 0:d.childrenGuids)||[]).map((e,t)=>({id:e,...r[t]})),m=[];m.push((0,ei1.qV)({containingNodeId:c,options:{dsKitKey:t.dsKitKey},batchSize:15})),n&&m.push((async()=>{let e={};await (0,ei1.nY)({containingNodeArgs:u,batchSize:20,imagesTrace:e,clientLifecycleId:a}),await Promise.all(u.map(async({id:n})=>{e[n]&&await esk({jsxJSON:[es0({title:"Images Trace",metadata:JSON.stringify(e[n]),storeInPluginData:!0})],jsxStr:"",prevJsxJSON:[],prevExpandedJsx:[],options:{isEval:!0,dsKitKey:t.dsKitKey,autoFillParent:!0,componentNameToInsertResult:o,parentNodeId:n,insertBehavior:"inline",clientLifecycleId:a}},null)}))})()),await Promise.all(m),ET.D.dispatch(eS.F.enqueue({type:"FIRST_DRAFT_EVAL",message:"Eval Completed"}))}catch(e){(0,o2.x1)("first-draft","Error running evals",{error:e}),ET.D.dispatch(eS.F.enqueue({type:"FIRST_DRAFT_EVAL",message:"Eval failed. Please check the console for more information.",error:!0}))}}let es$=e=>{let t=e.jsx_messages;if(!t)return null;let n=null;for(let e of t){let t="system"===e.role;if(e.content){let a=e.content.indexOf("examples of good outputs");if(-1!==a){let l=e.content.substring(a);if(!t)return l;n=l}}}return n??null},es0=({metadata:e,title:t,storeInPluginData:n})=>{let a=[{type:"Text",props:{className:"w-full text-xs text-slate-500 text-left",sharedPluginData:{value:n?e:""}},children:[n?`${t.toUpperCase()} (Stored in pluginData)`:t.toUpperCase()]}];return n||a.push({type:"Text",props:{className:"w-full text-xs text-left"},children:[e]}),{type:"AutoLayout",props:{name:t,className:"p-4 gap-2 bg-white w-full flex-col"},children:a}},es1=e=>({type:"Text",props:{className:"text-red-500 w-full"},children:[e]});async function es2({kit:e,inputPrompt:t,openFileKey:n,customizableVariables:a}){let l="LIBRARY"===e.dsKitKey.type?e.dsKitKey.key:ei.XJn.getKitKey(e.dsKitKey.pageId)??"",r="LOCAL"===e.dsKitKey.type;r&&n&&await (0,ei2.p4)(n,e,a);let{data:{meta:{examples:i}}}=await eon.Gh.getFirstDraftRetrievedExamples({kitKey:l,isLocal:r,prompt:t});return i}function es5({selectedKit:e}){let t=(0,_.wA)(),n=(0,af.tS)(),[a,l]=f.useState(""),[r,i]=f.useState([]),o=(0,eoe.B)(),s=r.length>0;return f.createElement(fy.Y,{padding:{vertical:12},direction:"vertical"},f.createElement("button",{className:a8.cx.cursorPointer.flex.itemsCenter.wFull.$},f.createElement(sc.E,{fontSize:11,fontWeight:"medium"},"Examples Debug")),f.createElement("textarea",{className:a8.cx.resizeNone.wFull.colorBgSecondary.px12.py8.bRadius5.$,rows:1,value:a,placeholder:"Enter a prompt to retrieve examples",onChange:e=>l(e.target.value)}),f.createElement(va.$n,{variant:"secondary",onClick:async()=>{try{let t=await es2({kit:e,inputPrompt:a,openFileKey:n,customizableVariables:o});i(t)}catch(e){t(eS.F.enqueue({type:"FIRST_DRAFT_EXAMPLES_DEBUG",message:"Fetching examples failed. Please make sure you're using a published kit with examples.",error:!0}))}}},"Get examples"),s&&f.createElement("div",{style:{height:"300px",overflowY:"scroll"}},r.map((e,t)=>f.createElement(fy.Y,{direction:"horizontal",key:t,width:"fill-parent"},f.createElement("img",{src:e.thumbnail_url??void 0,alt:"No thumbnail",style:{height:"auto",width:"auto",maxHeight:"300px",maxWidth:"250px"}}),f.createElement("div",{style:{width:"200px",wordWrap:"break-word"}}," ",e.name)))))}var es4=n(137819),es3=n(25108);function es6({text:e}){return f.createElement("div",{className:nb()(a8.cx.flex.flexRow.$)},f.createElement(es4.i,{style:{marginLeft:-2}})," ",f.createElement("span",{className:nb()(a8.cx.pl4.$)},e))}function es7(e=!1){let{libraryKitsQueryStatus:t,localKits:n,libraryKits:a}=(0,es3.Ml)(),[l,r]=(0,f.useState)(null),i="loaded"===t;return(0,f.useEffect)(()=>{if(i&&null===l){if(e){let e=n[0]??a[0]??null;e&&r({type:"KIT",kit:e})}else if((0,y.kc)().first_draft_auto_select_kits&&a.length>1)r({type:"AUTO"});else{let e=a[0]??n[0]??null;e&&r({type:"KIT",kit:e})}}},[n,a,i,l,r,e]),{kitsAreLoaded:i,kitOptionDropdownItems:(0,f.useMemo)(()=>{let e=[];return a.length>0&&(e.push({type:"header",text:(0,eN.t)("first_draft.made_by_figma")}),(0,y.kc)().first_draft_auto_select_kits&&a.length>1&&e.push({type:"checkableOption",value:{type:"AUTO"},text:(0,eN.t)("first_draft.detect_via_prompt")}),e.push(...a.map(e=>({type:"checkableOption",value:{type:"KIT",kit:e},text:e.name})))),(0,y.kc)().first_draft_local_kits&&n.length>0&&(e.push({type:"separator"}),e.push({type:"header",text:(0,eN.t)("first_draft.current_file")}),e.push(...n.map(e=>({type:"checkableOption",value:{type:"KIT",kit:e},text:e.name})))),e},[a,n]),selectedKitOption:l,setSelectedKitOption:r}}function es8({items:e,kitsAreLoaded:t,selectedKitOption:n,setSelectedKitOption:a,recordingKey:l}){return f.createElement(esj.ms,{selected:n,onSelectedChange:a,placeholder:f.createElement(es6,{text:t?(0,eN.t)("first_draft.library_placeholder"):(0,eN.t)("first_draft.kits_loading")}),labelForSelectedItem:e=>"AUTO"===e.type?f.createElement(es6,{text:(0,eN.t)("first_draft.library_placeholder")}):f.createElement(es6,{text:e.kit.name}),displayAboveTarget:!0,lean:"right",items:e,recordingKey:n_.Pt(l,"kitPicker"),disabled:!t})}function es9({selectedKitOption:e,clientLifecycleId:t}){let n=(0,_.wA)(),[a,l]=f.useState(!1),[r,i]=f.useState(""),o=f.useCallback(async e=>{e&&((0,ei1.xF)(e),await Promise.resolve())},[]),{submitPromptMocked:s}=esK({onInsertJSXDone:o,mockStreamOptions:{sleepTime:100,chunksPerYield:1e6,useWords:!1},clientLifecycleId:t}),{submitPromptMocked:c}=esK({onInsertJSXDone:o,mockStreamOptions:{sleepTime:100,chunksPerYield:10,useWords:!1},clientLifecycleId:t}),d=f.useCallback(async()=>{if(!e){(0,o2.xi)("first-draft","insert called without a selected kit");return}if("AUTO"===e.type){(0,o2.xi)("first-draft","insert called without an invalid kit option");return}let t=ece(e);if(!t){(0,o2.xi)("first-draft","insert called without a valid dsKit");return}await c({dsKit:t,theme:{},jsx:"```jsx\n"+r},{dsKitKey:e.kit.dsKitKey,shouldGenerateImages:a})},[r,c,e,a]),u=f.useCallback(async()=>{if(!e){(0,o2.xi)("first-draft","insert called without a selected kit");return}if("AUTO"===e.type){(0,o2.xi)("first-draft","insert called without an invalid kit option");return}let t=ece(e);if(!t){(0,o2.xi)("first-draft","insert called without a valid dsKit");return}await s({dsKit:t,theme:{},jsx:"```jsx\n"+r},{dsKitKey:e.kit.dsKitKey,shouldGenerateImages:a})},[r,s,e,a]);return f.createElement(fy.Y,{padding:{vertical:12},direction:"vertical"},f.createElement("button",{className:a8.cx.cursorPointer.flex.itemsCenter.wFull.$},f.createElement(sc.E,{fontSize:11,fontWeight:"medium"},"Debug")),f.createElement("textarea",{className:a8.cx.resizeNone.wFull.colorBgSecondary.px12.py8.bRadius5.$,rows:3,value:r,placeholder:"Enter JSX to insert directly",onChange:e=>i(e.target.value)}),f.createElement(fy.Y,null,f.createElement($o.S,{checked:a,onChange:()=>l(e=>!e),label:f.createElement(oE.J,null,"Gen images")})),f.createElement(fy.Y,null,f.createElement(va.$n,{variant:"secondary",onClick:async()=>{await d(),n(eS.F.enqueue({message:"Finished insert"}))}},"Insert streaming"),f.createElement(va.$n,{variant:"secondary",onClick:async()=>{await u(),n(eS.F.enqueue({message:"Finished insert"}))}},"Insert all")))}function ece(e){if("AUTO"===e.type)return null;let t=e.kit.dsKitKey,n="LOCAL"===t.type?ei.XJn.getKitKey(t.pageId):t.key;return n?{kitKey:n,isLocal:"LOCAL"===t.type}:null}var ect=n(128247),ecn=n(354189);function eca(e){if(Array.isArray(e))return function(e){let t=e.map(e=>eca(e)).join(",");return`[${t}]`}(e);switch(typeof e){case"object":if(null===e)return"null";return function(e){let t=Object.entries(e).map(([e,t])=>`${JSON.stringify(e)}: ${eca(t)}`).join(",");return`{ ${t} }`}(e);case"string":if(e.startsWith("{"))return e;return JSON.stringify(e);case"number":case"boolean":case"undefined":return`${e}`;default:throw Error(`valueToString: Unknown value type for ${e}`)}}function ecl(e){return Object.entries(e).map(([e,t])=>{switch(typeof t){case"string":if(t.includes('"')&&!t.startsWith("{"))return{name:e,value:`{${eca(t)}}`};return{name:e,value:eca(t)};case"object":case"number":case"boolean":case"undefined":return{name:e,value:`{${eca(t)}}`};default:throw Error(`toReactProps: Unknown value type for ${t}`)}}).map(({name:e,value:t})=>`${e}=${t}`).join(" ")}class ecr{constructor(e,t){this.apiNode=e,this.getParentApiNode=t}get type(){return this.apiNode.type}get parent(){let e=this.getParentApiNode(this.apiNode.id);return e?new ecr(e,this.getParentApiNode):null}get isAutoLayout(){return"layoutMode"in this.apiNode&&"NONE"!==this.apiNode.layoutMode}get layoutDirection(){return"layoutMode"in this.apiNode?this.apiNode.layoutMode??"NONE":"NONE"}get padding(){if(!this.isAutoLayout)return null;let e="paddingTop"in this.apiNode?this.apiNode.paddingTop??0:0,t="paddingBottom"in this.apiNode?this.apiNode.paddingBottom??0:0,n="paddingLeft"in this.apiNode?this.apiNode.paddingLeft??0:0,a="paddingRight"in this.apiNode?this.apiNode.paddingRight??0:0;return e===t&&t===n&&n===a?e:{top:e,bottom:t,left:n,right:a}}get childrenGap(){return this.isAutoLayout?"primaryAxisAlignItems"in this.apiNode&&"SPACE_BETWEEN"===this.apiNode.primaryAxisAlignItems?"SPACE_BETWEEN":"itemSpacing"in this.apiNode?this.apiNode.itemSpacing??0:0:null}get layoutPosition(){var e,t;if((null==(e=this.parent)?void 0:e.isAutoLayout)&&(!("layoutPositioning"in this.apiNode)||"ABSOLUTE"!==this.apiNode.layoutPositioning)||"COMPONENT"===this.type&&(null==(t=this.parent)?void 0:t.type)==="COMPONENT_SET")return{type:"AUTO"};let{vertical:n,horizontal:a}=("constraints"in this.apiNode?this.apiNode.constraints:null)??{vertical:"TOP",horizontal:"LEFT"},{x:l,y:r}=this.computedPosition;return{type:"ABSOLUTE",xAxis:{type:a,value:l},yAxis:{type:n,value:r}}}get solidFillColorOrNull(){if("fills"in this.apiNode&&this.apiNode.fills&&0!==this.apiNode.fills.length){let e=this.apiNode.fills[0];if("SOLID"===e.type)return e.color}return null}get cornerRadius(){return"TEXT"===this.type?null:"rectangleCornerRadii"in this.apiNode&&this.apiNode.rectangleCornerRadii?{topLeft:this.apiNode.rectangleCornerRadii[0],topRight:this.apiNode.rectangleCornerRadii[1],bottomRight:this.apiNode.rectangleCornerRadii[2],bottomLeft:this.apiNode.rectangleCornerRadii[3]}:"cornerRadius"in this.apiNode?this.apiNode.cornerRadius??0:null}get backgroundColor(){return"TEXT"===this.apiNode.type?null:this.solidFillColorOrNull}get borderColor(){if("TEXT"===this.apiNode.type)return null;if("strokes"in this.apiNode&&this.apiNode.strokes&&0!==this.apiNode.strokes.length){let e=this.apiNode.strokes[0];if("SOLID"===e.type)return e.color}return null}get borderWidth(){if("TEXT"===this.apiNode.type||!("strokeWeight"in this.apiNode))return null;let e=this.apiNode.strokeWeight;if("number"!=typeof e)return null;let t="individualStrokeWeights"in this.apiNode?this.apiNode.individualStrokeWeights:null;if(t){let{top:e,bottom:n,left:a,right:l}=t;if(!(e===n&&n===a&&a===l))return{top:e,bottom:n,left:a,right:l}}return e}get textColor(){return"TEXT"!==this.apiNode.type?null:this.solidFillColorOrNull}get fontSize(){return"TEXT"!==this.apiNode.type?null:this.apiNode.style.fontSize??12}get textAlignHorizontal(){return"TEXT"!==this.apiNode.type?null:this.apiNode.style.textAlignHorizontal??"LEFT"}get textAlignVertical(){return"TEXT"!==this.apiNode.type?null:this.apiNode.style.textAlignVertical??"TOP"}get fontWeight(){return"TEXT"!==this.apiNode.type?null:this.apiNode.style.fontWeight}get fontFamily(){return"TEXT"!==this.apiNode.type?null:this.apiNode.style.fontFamily}get lineHeight(){if("TEXT"!==this.apiNode.type)return null;let e=this.apiNode.style;return"INTRINSIC_%"===e.lineHeightUnit?{type:"AUTO"}:"FONT_SIZE_%"!==e.lineHeightUnit&&"lineHeightPx"in e&&"number"==typeof e.lineHeightPx?{type:"PIXELS",value:e.lineHeightPx}:"PIXELS"!==e.lineHeightUnit&&"lineHeightPercentFontSize"in e&&"number"==typeof e.lineHeightPercentFontSize?{type:"PERCENT",value:e.lineHeightPercentFontSize}:null}get visible(){return!1===this.apiNode.visible}get textContent(){return"TEXT"!==this.apiNode.type?null:this.apiNode.characters??""}get computedPosition(){if(!("relativeTransform"in this.apiNode))throw Error("Property relativeTransform is missing. Make sure outputGeometry is true.");return{x:this.apiNode.relativeTransform[0][2],y:this.apiNode.relativeTransform[1][2]}}get layoutSize(){var e,t;let{width:n,height:a}=this.computedSize,l={width:{type:"FIXED",value:n},height:{type:"FIXED",value:a}};if(this.isAutoLayout||(null==(e=this.parent)?void 0:e.isAutoLayout)){let e="layoutSizingHorizontal"in this.apiNode&&this.apiNode.layoutSizingHorizontal;if(e)switch(e){case"FIXED":break;case"HUG":l.width={type:"HUG"};break;case"FILL":l.width={type:"FILL"};break;default:eci(e)}let t="layoutSizingVertical"in this.apiNode&&this.apiNode.layoutSizingVertical;if(t)switch(t){case"FIXED":break;case"HUG":l.height={type:"HUG"};break;case"FILL":l.height={type:"FILL"};break;default:eci(t)}}if((this.isAutoLayout||(null==(t=this.parent)?void 0:t.isAutoLayout))&&("minWidth"in this.apiNode&&(l.minWidth=this.apiNode.minWidth),"minHeight"in this.apiNode&&(l.minHeight=this.apiNode.minHeight),"maxWidth"in this.apiNode&&(l.maxWidth=this.apiNode.maxWidth),"maxHeight"in this.apiNode&&(l.maxHeight=this.apiNode.maxHeight)),"TEXT"===this.apiNode.type)switch(this.apiNode.style.textAutoResize){case"HEIGHT":l.height={type:"HUG"};break;case"WIDTH_AND_HEIGHT":l.height={type:"HUG"},l.width={type:"HUG"}}return l}get computedSize(){if(!("size"in this.apiNode))throw Error("Property size is missing. Make sure outputGeometry is true.");return{width:this.apiNode.size.x,height:this.apiNode.size.y}}get alignItems(){if(!this.isAutoLayout)return null;let e="counterAxisAlignItems"in this.apiNode?this.apiNode.counterAxisAlignItems:null;if(!e)return"START";switch(e){case"MIN":return"START";case"CENTER":return"CENTER";case"MAX":return"END";case"BASELINE":return"BASELINE";default:eci(e)}}get justifyContents(){if(!this.isAutoLayout)return null;let e="primaryAxisAlignItems"in this.apiNode?this.apiNode.primaryAxisAlignItems:null;if(!e)return"START";switch(e){case"MIN":return"START";case"CENTER":return"CENTER";case"MAX":return"END";case"SPACE_BETWEEN":return"SPACE_BETWEEN";default:eci(e)}}get children(){if("INSTANCE"===this.apiNode.type)return[];let e="children"in this.apiNode&&this.apiNode.children;return e?e.map(e=>new ecr(e,this.getParentApiNode)):[]}get tagName(){return"INSTANCE"===this.apiNode.type?"Component"+this.apiNode.name.split(" ").map(e=>{var t;return((null==(t=e[0])?void 0:t.toUpperCase())??"")+e.slice(1)}).join(""):"TEXT"===this.apiNode.type?"Text":"Box"}toTailwindClasses({ignorePosition:e=!1,layoutOnly:t=!1,positionOnly:n=!1,removeDefaults:a=!0}={}){var l,r,i,o;let s=[];if(!e){let e=this.layoutPosition;if("AUTO"!==e.type&&this.parent){s.push("absolute");let{xAxis:t,yAxis:n}=e;switch(t.type){case"LEFT":s.push(`left-${eo0(t.value)}`);break;case"RIGHT":{let e=this.computedSize,n=null==(l=this.parent)?void 0:l.computedSize;n&&s.push(`right-${eo0(n.width-t.value-e.width)}`)}}switch(n.type){case"TOP":s.push(`top-${eo0(n.value)}`);break;case"BOTTOM":{let e=this.computedSize,t=null==(r=this.parent)?void 0:r.computedSize;t&&s.push(`bottom-${eo0(t.height-n.value-e.height)}`)}}}}if(n)return s;let{width:c,height:d,minWidth:u,maxWidth:m,minHeight:p,maxHeight:f}=this.layoutSize;if("FILL"===c.type?s.push("w-full"):"FIXED"===c.type&&s.push(`w-${eo0(c.value)}`),"FILL"===d.type?s.push("h-full"):"FIXED"===d.type&&s.push(`h-${eo0(d.value)}`),"number"==typeof u&&s.push(`min-w-${eo0(u)}`),"number"==typeof m&&s.push(`max-w-${eo0(m)}`),"number"==typeof p&&s.push(`min-h-${eo0(p)}`),"number"==typeof f&&s.push(`max-h-${eo0(f)}`),t)return s;if(this.isAutoLayout){if(s.push("flex"),"VERTICAL"===this.layoutDirection&&s.push("flex-col"),!a||this.children.length>1){let e=this.childrenGap;"number"!=typeof e||a&&0===e||s.push(`gap-${eo0(e)}`)}switch(this.alignItems){case"START":a||s.push("items-start");break;case"END":s.push("items-end");break;case"CENTER":s.push("items-center");break;case"BASELINE":s.push("items-baseline")}switch(this.justifyContents){case"START":a||s.push("justify-start");break;case"END":s.push("justify-end");break;case"CENTER":s.push("justify-center");break;case"SPACE_BETWEEN":s.push("justify-between")}let e=this.padding;if("number"==typeof e)a&&0===e||s.push(`p-${eo0(e)}`);else if(e){if(e.top===e.bottom){let t;t=e.top,a&&0===t||s.push(`py-${eo0(e.top)}`)}else{let t,n;t=e.top,a&&0===t||s.push(`pt-${eo0(e.top)}`),n=e.bottom,a&&0===n||s.push(`pb-${eo0(e.bottom)}`)}if(e.left===e.right){let t;t=e.left,a&&0===t||s.push(`px-${eo0(e.left)}`)}else{let t,n;t=e.left,a&&0===t||s.push(`pl-${eo0(e.left)}`),n=e.right,a&&0===n||s.push(`pr-${eo0(e.right)}`)}}}let _=this.cornerRadius;if("number"==typeof _)a&&0===_||s.push(`rounded-${eo2(_)}`);else if(_){if(_.topLeft===_.topRight){let e;e=_.topLeft,a&&0===e||s.push(`rounded-t-${eo2(_.topLeft)}`)}else{let e,t;e=_.topLeft,a&&0===e||s.push(`rounded-tl-${eo2(_.topLeft)}`),t=_.topRight,a&&0===t||s.push(`rounded-tr-${eo2(_.topRight)}`)}if(_.bottomLeft===_.bottomRight){let e;e=_.bottomLeft,a&&0===e||s.push(`rounded-b-${eo2(_.bottomLeft)}`)}else{let e,t;e=_.bottomLeft,a&&0===e||s.push(`rounded-bl-${eo2(_.bottomLeft)}`),t=_.bottomRight,a&&0===t||s.push(`rounded-br-${eo2(_.bottomRight)}`)}}let g=this.backgroundColor;if(g){let e=eoQ(g);s.push(`bg-${eo1(e)}`)}let h=this.borderColor,E=this.borderWidth;if(h&&null!==E){let e=eoQ(h);s.push(`border-${eo1(e)}`);let t=e=>1===e?"":`-${[0,2,4,8].includes(e)?`${e}`:`[${e.toFixed(0)}px]`}`;"number"==typeof E?s.push(`border${t(E)}`):(E.top===E.bottom?s.push(`border-y${t(E.top)}`):(s.push(`border-t${t(E.top)}`),s.push(`border-b${t(E.bottom)}`)),E.left===E.right?s.push(`border-x${t(E.left)}`):(s.push(`border-l${t(E.left)}`),s.push(`border-r${t(E.right)}`)))}if("string"==typeof this.textContent){let e=this.fontSize,t=this.fontWeight;"number"!=typeof e||a&&15===e||s.push(`text-${eoG[i=e]||`[${i.toFixed(0)}px]`}`),"number"!=typeof t||a&&400===t||s.push(`font-${eoK[o=t]||`[${o.toFixed(0)}]`}`);let n=this.lineHeight;if(n)switch(n.type){case"AUTO":a||s.push("leading-normal");break;case"PIXELS":case"PERCENT":s.push(`leading-${function(e,t){switch(t){case"PIXELS":{let t=eoz[e];if(t)return t;return`[${e.toFixed(0)}px]`}case"PERCENT":for(let[t,n]of Object.entries(eoO))if(Math.round(100*n)===Math.round(e))return t;return`[${e.toFixed(0)}%]`;default:(0,nm.xb)(t)}}(n.value,n.type)}`)}let l=this.textColor;if(l){let e=eoQ(l);a&&"#000000"===e||s.push(`text-${eo1(e)}`)}switch(this.textAlignHorizontal){case"LEFT":a||s.push("text-left");break;case"RIGHT":s.push("text-right");break;case"CENTER":s.push("text-center");break;case"JUSTIFIED":s.push("text-justified")}switch(this.textAlignVertical){case"TOP":a||s.push("align-top");break;case"CENTER":s.push("align-middle");break;case"BOTTOM":s.push("align-bottom")}}return s}toJSX(){let e={id:this.apiNode.id},t=this.toTailwindClasses();0!==t.length&&(e.className=t.join(" "));let n=this.children,a=this.textContent?this.textContent:0!==this.children.length?n.map(e=>e.toJSX()).join(""):"";return a?`<${this.tagName} ${ecl(e)}>${a}</${this.tagName}>`:`<${this.tagName} ${ecl(e)} />`}toMinimalJSON(){let e={id:this.apiNode.id,name:this.apiNode.name,type:this.apiNode.type,layoutPosition:this.layoutPosition,layoutSize:this.layoutSize};return this.isAutoLayout&&(e.isAutoLayout=this.isAutoLayout,e.layoutDirection=this.layoutDirection,e.childrenGap=this.childrenGap,e.padding=this.padding,e.justifyContents=this.justifyContents,e.alignItems=this.alignItems),"string"==typeof this.textContent&&(e.fontSize=this.fontSize,e.fontWeight=this.fontWeight,e.fontFamily=this.fontFamily,e.textContent=this.textContent),this.children.length&&(e.children=this.children.map(e=>e.toMinimalJSON())),e}}function eci(e,t){throw Error(t??`Unexpected value: ${e}`)}class eco{constructor(){this.data=[]}append(e){return this.data.push(e),this}codefence(e,t="jsx"){return this.data.push("```"),this.data.push(t),this.data.push("\n"),this.data.push(e()),this.data.push("\n"),this.data.push("```"),this}newline(){return this.data.push("\n"),this}toString(){return this.data.join("")}}function ecs(e){return e.classPropName??"className"}function ecc(e,t={}){if(!e.symbolId)return{};let n=(0,eoc.Ye)(e.symbolId);if(!n)throw Error(`Could not find mainComponent for node ${e.guid}`);let a={};for(let[t,n]of Object.entries(e.componentProperties()))a[(0,eod.aX)(t)]=n;let l={};for(let t of n.parsedDefs){if("DERIVED_BOOLEAN"===t.devFriendlyProp.type||"ARRAY"===t.devFriendlyProp.type)continue;let n=t.devFriendlyProp.key;if(n in a){if("SIMPLE"===t.devFriendlyProp.type){let e=a[n].value;t.def.defaultValue!==e&&(l[n]=e);continue}if("SIMPLE_CHOICE"===t.devFriendlyProp.type){let e=t.devFriendlyProp.validOptions;if("INSTANCE_SWAP"===t.def.type){let t=(0,eot.cl)(a[n].value);if(!t)throw Error("Could not find component for componentProp");if("SYMBOL"===t.type){let a=Object.values(t.variantProperties??{})[0];-1!==e.indexOf(a)?l[n]=a:console.error(`Could not find ${a} in ${JSON.stringify(e)}`)}continue}if("VARIANT"===t.def.type){let t=a[n].value;-1!==e.indexOf(t)?l[n]=t:console.error(`Could not find ${t} in ${JSON.stringify(e)}`)}}}if("IMAGE"===t.def.type){let a=t.def.guidByParentComponentId[e.symbolId];if(a){let t=(0,eot.uN)(e.guid,a);if(t){let e=ecx(ecm(t));e&&(l[n]={description:e})}}}}let r=ecn.v.toString(ecn.v.fromGuid(e.guid)),i=r.startsWith("I")?r:`I${r};`;for(let t of(0,eot.g5)(e.guid))if(1===ecn.v.toString(ecn.v.fromGuid(t.guid)).replace(i,"").split(";").length&&t.isBubbled){let e=ecc(t,{isRoot:!1});Object.keys(e).length&&(l[(0,eod.aX)(t.name)]=e)}for(let[e,t]of Object.entries((0,eod.hM)(Object.keys(l))))for(let n of(l[e]=t.map(e=>l[e]),t))delete l[n];return(null==t?void 0:t.isRoot)||1!==n.parsedDefs.length||1!==Object.keys(l).length?l:Object.values(l)[0]}let ecd={};function ecu(e){if(e in ecd)return ecd[e].simpleNode;throw Error(`Did not initialize node cache for nodeId=${e}`)}function ecm(e){let t=ecn.v.toString(ecn.v.fromGuid(e));if(t in ecd)return ecd[t].apiNode;throw Error(`Did not initialize node cache for nodeId=${e}`)}function ecp(e,t){let n=[e];for(;0!==n.length;){let e=n.shift();e&&(t(e),"children"in e&&n.push(...e.children))}}function ecf(e){if("INSTANCE"===e.type){let t=(0,eoc.Ye)(e.componentId);if(null==t?void 0:t.jsxName)return t.jsxName}let t=function(e){let t=ecn.v.toGuid(ecn.v.fromString(e.id));return lE.q.instance.get(t)}(e);if(t){let e=t.getSharedPluginData("jsx","type");if(e&&"HStack"!==e&&"VStack"!==e)return e}return null}function ec_(e,t){var n,a;let l={};if(!t.skipNodeIds&&(!t.skipNodeIdsWithoutType||ecf(e))&&(l.id=e.id),t.includeName&&(l.name=e.name),t.includeType&&!("INSTANCE"===e.type&&!t.detachInstances)){let t=ecf(e);t&&(l.type=t)}if("DEFINITION"===t.componentUsageOrDefinition&&t.componentDefinitionTypeInfo&&"componentPropertyReferences"in e&&(null==(n=e.componentPropertyReferences)?void 0:n.visible)){let n=null==(a=e.componentPropertyReferences)?void 0:a.visible,r=t.componentDefinitionTypeInfo.parsedDefs.find(e=>e.rawProp===n);r&&(l.visible=`{${ecv(r.devFriendlyProp)}}`)}return l}function ecg(e,t){switch(t.classNameOptions){case"position-only":return e.toTailwindClasses({positionOnly:!0});case"layout-only":return e.toTailwindClasses({layoutOnly:!0});case"ignore-position":return e.toTailwindClasses({ignorePosition:!0});default:return e.toTailwindClasses()}}let ech="AutoLayout",ecE="Frame";function ecv(e){let t="DERIVED_BOOLEAN"===e.type?e.devFriendlyProp:e,n=t.key;return("index"in t&&(n+=`[${t.index}]`),"DERIVED_BOOLEAN"===e.type)?`!!${n}`:n}async function ecy(e,t){let n=(0,eod.BB)(e,{followInstances:!0}),a=[],l={};for(let e of n){let t=(0,eoc.Ye)(e.guid);if(!t)continue;let n=(0,eou.vR)(t);if(n){l[n]=l[n]||[],l[n].push(e);continue}a.push(ecm(e.guid))}let r=await Promise.all(a.map(async e=>await ecb(e,t)));for(let[e]of Object.keys(l))r.push({nodeId:null,prefixTypes:[],jsxStr:`function ${(0,eou.PJ)(e)}(props: ${(0,eou.VV)(e)}) {
// Returns an element that satisfies the description provided.
}`});return r}async function ecb(e,t){let n=(0,eoc.Ye)(e.id);if(!n)throw Error(`Could not find typeInfo for node: ${e.id}`);let a=Object.values(n.prefixTypes),l={...t,componentUsageOrDefinition:"DEFINITION",componentDefinitionTypeInfo:n},r=new eco,i=n.parsedDefs.map(e=>"DERIVED_BOOLEAN"===e.devFriendlyProp.type?"":"SIMPLE_CHOICE"===e.devFriendlyProp.type?"VARIANT"===e.def.type&&"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"GROUPED_INSTANCE_SWAP"===e.devFriendlyProp.type||"IMAGE"===e.devFriendlyProp.type?e.devFriendlyProp.key:"SIMPLE"===e.devFriendlyProp.type?"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"ARRAY"===e.devFriendlyProp.type?0!==e.devFriendlyProp.index?"":e.devFriendlyProp.key:void(0,nm.xb)(e.devFriendlyProp)).filter(Boolean).join(", ");if(r.append(`const ${n.jsxName}: React.FC<${n.propsTypeRepr.typeDefBody??"{}"}> = (`),i?r.append(`{${i}}) => {`):r.append(") => {"),r.newline(),"COMPONENT"===e.type&&(r.append(`  return ${await ecC(e,l)}`),r.newline(),r.append("}")),"COMPONENT_SET"===e.type){let t=!0;for(let n of(0,eot.Au)(e.id,["COMPONENT"])){if("SYMBOL"!==n.type||!n.variantProperties)continue;t||r.append(" else "),r.append("if ("),r.append(Object.entries(n.variantProperties).map(([e,t])=>`${e} === ${JSON.stringify(t)}`).join(" && ")),r.append(") {");let e=ecm(n.guid);r.append(`    return ${await ecC(e,l)}`),r.newline(),r.append("}"),t=!1}r.append("  return null;"),r.newline(),r.append("}")}return{nodeId:e.id,prefixTypes:a,jsxStr:r.toString()}}async function ecC(e,t){return await ecw(e,{...t,classNameOptions:"ignore-position"})||"null"}async function ecw(e,t){if(!1===e.visible)return null;let n=[];switch(e.type){case"INSTANCE":case"COMPONENT":case"SECTION":case"COMPONENT_SET":case"GROUP":case"FRAME":{if("INSTANCE"===e.type&&!t.detachInstances){n.push(function(e,t){var n;let a=(0,eot.So)(e.id,"INSTANCE"),l=(0,eoc.Ye)(e.componentId);if(!l)throw Error(`Could not find mainComponent for node ${e.id}`);let r=ec_(e,t),i=ecu(e.id);if(!t.skipClassNames){let e=ecg(i,{...t,classNameOptions:"position-only"});e.length&&(r[ecs(t)]=e.join(" "))}let o=(0,eou.vR)(l);if(o){let t=(0,eot.So)(e.componentId,"COMPONENT");return Object.assign(r,(0,eot.Kp)(o,t)),`<${(0,eou.PJ)(o)} ${ecl(r)}/>`}if(t.skipInstanceComponentProps||Object.assign(r,ecc(a,{isRoot:!0})),t.includeInstanceOverrides){let t=function(e){if(e.id.startsWith("I"))return null;let t=function(e){let t=ecm(e.componentId);if((null==t?void 0:t.type)!=="COMPONENT")return{};let n=new Set,a=[t];for(;0!==a.length;){let e=a.pop();if(!(!e||n.has(e.id)))for(let t of(n.add(e.id),function(e,t){let n=[];return ecp(e,e=>{e.type===t&&n.push(e)}),n}(e,"INSTANCE")))try{let e=ecm(t.componentId);(null==e?void 0:e.type)==="COMPONENT"&&a.push(e)}catch{}}let l={};for(let e of n)ecp(ecm(e),e=>{l[(0,eot.EJ)(e.id)]=e.id});return l}(e),n={},a=e=>e.split(";").slice(1).map(e=>t[e]??e).join(","),l=(e,t)=>{let l=ecm(e);if(l&&("characters"===t&&"TEXT"===l.type&&(n[a(e)]={children:l.characters}),"componentProperties"===t&&"INSTANCE"===l.type)){let t=a(e),l=(0,eot.So)(e,"INSTANCE");n[t]={props:ecc(l,{isRoot:!0})}}};for(let{id:t,overriddenFields:n}of e.overrides??[])for(let e of n)if("characters"===e||"componentProperties"===e){l(t,e);continue}return n}(e);t&&0!==Object.keys(t).length&&(r.overrides=t)}let s="";if("DEFINITION"===t.componentUsageOrDefinition&&t.componentDefinitionTypeInfo){let a=null==(n=e.componentPropertyReferences)?void 0:n.mainComponent,i=t.componentDefinitionTypeInfo.parsedDefs.find(n=>{var l;if(e.isExposedInstance&&"NESTED_INSTANCE"===n.def.type){for(let a of(0,eod.wn)((null==(l=t.componentDefinitionTypeInfo)?void 0:l.componentId)??"",n))if(a===e.id)return!0}return!!a&&n.rawProp===a});if(i){if("SLOT"===i.def.type)return`{${ecv(i.devFriendlyProp)}}`;if(1===l.parsedDefs.length){let e=l.parsedDefs[0].devFriendlyProp.key;e in r?r[e]=`{${ecv(i.devFriendlyProp)} ?? ${JSON.stringify(r[e])}}`:r[e]=`{${ecv(i.devFriendlyProp)}}`}else s=`{...${ecv(i.devFriendlyProp)}} `}}return`<${l.jsxName} ${ecl(r)} ${s}/>`}(e,t));break}if("COMPONENT"===e.type&&"DEFINITION"!==t.componentUsageOrDefinition){n.push(function(e,t){let n=ec_(e,t),a=(0,eoc.Ye)(e.id);if(!a)throw Error(`Could not find typeInfo for component: ${e.id}`);n.name=a.jsxName;let l=(0,eot.cl)(e.id);if(!l)throw Error(`Could not find node for component: ${e.id}`);return"variantProperties"in l&&Object.assign(n,l.variantProperties),`<ComponentType ${ecl(n)} />`}(e,t));break}let[[a,l,r],i]=await Promise.all([function(e,t){let n=ec_(e,t),a=ecx(e);a&&(n.description=a);let l=ecg(ecu(e.id),t);l.length&&(n[ecs(t)]=l.join(" "));let r=function(e,t,n,a){switch(e.type){case"COMPONENT":case"INSTANCE":case"FRAME":case"GROUP":if(n)return"Image";return t?a.autoLayoutTagName??ech:a.frameTagName??ecE;case"SECTION":return"Section";case"COMPONENT_SET":return t?a.autoLayoutTagName??ech:a.frameTagName??ecE;default:(0,nm.xb)(e)}}(e,-1!==l.indexOf("flex"),!!a,t);return[`<${r} ${ecl(n)}>`,`<${r} ${ecl(n)} />`,`</${r}>`]}(e,t),Promise.all(e.children.map(async e=>await ecw(e,{...t,classNameOptions:null})))]);if(i.length&&i.some(e=>e)){for(let e of(n.push(a),i))e&&n.push(e);n.push(r)}else n.push(l);break}case"TEXT":n.push(function(e,t){var n,a;let l=ec_(e,t),r=ecg(ecu(e.id),t);r.length&&(l[ecs(t)]=r.join(" "));let i="";return"DEFINITION"===t.componentUsageOrDefinition&&(null==(n=e.componentPropertyReferences)?void 0:n.characters)?i=`{${(0,eod.aX)(null==(a=e.componentPropertyReferences)?void 0:a.characters)}}`:(i=e.characters).includes('"')&&(i=`{${JSON.stringify(i)}}`),`<Text ${ecl(l)}>${i}</Text>`}(e,t));break;case"RECTANGLE":case"LINE":case"ELLIPSE":n.push(function(e,t){let n=ec_(e,t),a=ecg(ecu(e.id),t);switch(a.length&&(n[ecs(t)]=a.join(" ")),e.type){case"ELLIPSE":return`<Ellipse ${ecl(n)}/>`;case"RECTANGLE":return`<Rectangle ${ecl(n)}/>`;case"LINE":return`<Line ${ecl(n)}/>`;default:(0,nm.xb)(e)}}(e,t));break;case"SLICE":case"REGULAR_POLYGON":case"STAR":case"VECTOR":case"BOOLEAN_OPERATION":case"TABLE":case"TABLE_CELL":case"WASHI_TAPE":case"CONNECTOR":case"WIDGET":case"EMBED":case"STICKY":case"SHAPE_WITH_TEXT":case"LINK_UNFURL":n.push(await function(e,t){let n=ec_(e,t);n.type=e.type;let a=ecg(ecu(e.id),{...t,classNameOptions:"layout-only"});return a.length&&(n[ecs(t)]=a.join(" ")),Promise.resolve(`<Unhandled ${ecl(n)} />`)}(e,t));break;case"CANVAS":case"DOCUMENT":throw Error(`Unexpected node type: ${e.type}`);default:(0,nm.xb)(e)}return n.length>0?n.join(""):null}async function ecT({nodeIds:e,options:t}){let n=lE.q.instance,a=e.map(e=>n.get(e)).filter(e=>e&&"DOCUMENT"!==e.type&&"CANVAS"!==e.type);if(0===a.length)return{};!function(e,t){for(let t of(ecd={},function(e){let t=new Set,n=[];for(let a of e)t.has(a.guid)||(t.add(a.guid),n.push(a));return n}([...e,...(0,eod.BB)(e,{followInstances:!0})].map(e=>(function(e){let t=e;for(;t.parentGuid&&t.parentNode&&"CANVAS"!==t.parentNode.type;)t=t.parentNode;return t})(e)))))!function(e,t){let n=null==e?void 0:e.getFirstDraftJSON();if(!n)return;let a=n.document;if("DOCUMENT"===a.type||"CANVAS"===a.type)throw Error(`Unexpected node type ${a.type}`);Object.assign(ecd,function(e){let t={},n={},a=[e];for(;0!==a.length;){let e=a.pop();if(e&&(t[e.id]=e,"children"in e))for(let t of e.children)n[t.id]=e.id,a.push(t)}let l=e=>{let a=n[e];if(!a)return null;let l=t[a];if(!l)throw Error(`Could not find parentNode node: ${a}`);return l},r={};for(let[e,n]of Object.entries(t))r[e]={apiNode:n,simpleNode:new ecr(n,l)};return r}(a))}(t,0)}(a,0);let[l,r]=await Promise.all([(async()=>{let e=await Promise.all(a.map(e=>ecw(ecm(e.guid),t)));return 1===e.length?e[0]:["<Selection>",...e,"</Selection>"].join("\n")})(),(async()=>{if(!t.includeComponentDependencies)return[];let e=(0,eod.BB)(a,{followInstances:!0});return 0===e.length?[]:await ecy(e,t)})()]);return{jsxStr:l,jsxDefinitionInfo:r}}function ecx(e){if(!("fills"in e)||!e.fills.some(e=>"IMAGE"===e.type))return null;let t=e.id;e.id.startsWith("I")&&(t=ecn.v.toGuid(ecn.v.fromString(e.id)));let n=lE.q.instance.get(t);return n&&(null==n?void 0:n.getSharedPluginData("jsx","isImage"))==="true"&&e.fills.find(e=>"IMAGE"===e.type&&(null==n?void 0:n.getSharedPluginData("jsx","hash"))===e.imageRef)&&((null==n?void 0:n.getSharedPluginData("jsx","description"))||(null==n?void 0:n.getSharedPluginData("jsx","altText")))||null}function ecN(e,t){return ecT({nodeIds:Object.keys(e),options:{componentUsageOrDefinition:"USAGE",skipNodeIds:!1,detachInstances:!0,skipInstanceComponentProps:!1,includeInstanceOverrides:!0,includeComponentDependencies:!0,includeType:!0,skipNodeIdsWithoutType:t,classPropName:"class",autoLayoutTagName:"div",frameTagName:"div"}})}var ecS=n(213376);let eck="first_draft_prompt_history_";var ecI=n(749401);async function ecA(e,t,n){let a=lE.q.instance;for(let l of n.flatMap(e=>e.nodeWeightInfos)){let n=a.get(l.nodeId);if(!n)continue;let r=function(e,t,n,a){if(!ecI.z[t])return;let l=ecI.z[e];if(l)return l[n][a]}(t,n.fontName.family,e,l.weight),i=(null==r?void 0:r.style)??n.fontName.style;try{let e={family:t,style:i};await (0,esc.E)(e),o4.l7.user("first-draft-theme-modal-adjust-font-family",()=>{n.fontName=e})}catch(a){let e={family:t,style:"Regular"};await (0,esc.E)(e),o4.l7.user("first-draft-theme-modal-adjust-font-family",()=>{n.fontName=e})}o4.l7.user("first-draft-theme-modal-adjust-font-family",()=>{(null==r?void 0:r.letterSpacing)!==void 0&&(n.letterSpacing=r.letterSpacing)})}}var ecO=n(218549),ecL=n(503796);let ecP=new ecO.q(40);async function ecD({changes:e,makeChangesSessionId:t,clientLifecycleId:n,containingNodeId:a,instrumentationRef:l}){let r=lE.q.instance.get(e.affectedId);if(!r)return!1;let i=`${t}:${e.affectedId}`;if(ecP.has(i))return(0,o2.$D)(o5.e.FEEDBACK,Error("first-draft: Attempted to apply content changes twice"),{extra:{clientLifecycleId:n}}),!1;if(ecP.set(i,!0),!r.getSharedPluginData("jsx","isImage"))return o4.l7.ai("first-draft-iterate-text-content",()=>(function({node:e,textContent:t}){return"TEXT"!==e.type?((0,o2.xi)("first-draft","Update text called on a non-text node",{nodeId:e.guid,nodeType:e.type}),!1):(e.spliceCharacters(0,e.characters.length,t,"BEFORE"),!0)})({node:r,textContent:e.content})),!0;{let t=r.getSharedPluginData("jsx","background");return await l.current.logImageLoad(()=>(0,ecL.Og)({node:r,description:e.content,background:t,clientLifecycleId:n,containingNodeId:a})),!0}}async function ecR({action:e,insertJSX:t,options:{dsKitKey:n,storedTheme:a,currentTheme:l,imageArgs:r,rootNodeId:i}}){try{let{affectedId:o,jsxToInsert:s}=e,c=lE.q.instance.get(o);if(!c)throw Error("Could not find affected node in the scene");let d=lE.q.instance.get(i);if(!d)throw Error("Could not find root node in the scene");let u=(0,esb.BY)(d),m=c.parentNode;if(!m)throw Error("Could not find affected node in the scene");let p=m.childrenGuids.indexOf(o);if(-1===p)throw Error("Could not find affected node in the scene");let f="below";"insert"===e.type&&(f=e.insertBehavior);let _=await eox(s);if(!_||0===_.length)throw Error("Failed to parse JSX");let g=esL(_);if(0===g.size)throw Error("Only building blocks can be inserted or replaced");await t({jsxStr:"```jsx\n"+s+"\n```",options:{...esV(),insertBehavior:"inline",dsKitKey:n,theme:a,themeProperties:l,deviceType:u,parentNodeId:m.guid,insertAtIndex:"above"===f?p:p+1,imageArgs:r}}),"replace"===e.type&&o4.l7.ai("first-draft-make-changes-remove",()=>{c.removeSelfAndChildren()})}catch(t){throw(0,o2.$D)(o5.e.FEEDBACK,t,{extra:{action:e,dsKitKey:n}}),t}}var ecM=n(852299);function ecF(e){return/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(e)}function ecB(){let e=(0,eb.eY)(),t=Object.entries((0,eb.KH)()).filter(([e,t])=>t).map(([e])=>e),n=null;for(let a of t)if(n=function(t){let n="",a=t;for(;!n&&a;){let t=e.get(a);if(!t)break;t.getSharedPluginData(eoa,"userPrompt")&&(n=a),a=t.parentGuid||""}return n||null}(a))break;return n}var ecU=n(946465),ecH=n(395977),ecG=n(927924),ecV=n(646701),ecK=n(169566),ecW=n.n(ecK),ecz=(e=>(e.mobile="MOBILE",e.web="WEB",e))(ecz||{});function ecj(e=3,t){let n=(0,y.kc)().first_draft_new_prompt_pills,a=[{label:(0,eN.t)("first_draft.prompts.pricing_page.label"),prompt:(0,eN.t)("first_draft.prompts.pricing_page.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.sign_in_screen.label"),prompt:(0,eN.t)("first_draft.prompts.sign_in_screen.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.blog_post.label"),prompt:(0,eN.t)("first_draft.prompts.blog_post.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.portfolio.label"),prompt:(0,eN.t)("first_draft.prompts.portfolio.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.news_site.label"),prompt:(0,eN.t)("first_draft.prompts.news_site.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.onboarding.label"),prompt:(0,eN.t)("first_draft.prompts.onboarding.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.sign_in_screen.label"),prompt:(0,eN.t)("first_draft.prompts.sign_in_screen.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.blog_post.label"),prompt:(0,eN.t)("first_draft.prompts.blog_post.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.map_app_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.map_app_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.messaging_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.messaging_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.profile.label"),prompt:(0,eN.t)("first_draft.prompts.profile_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.travel_app_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.travel_app_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.social_feed_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.social_feed_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.ticketing_app.label"),prompt:(0,eN.t)("first_draft.prompts.ticketing_app.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.ride_sharing_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.ride_sharing_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.to_dos_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.to_dos_mobile.prompt"),type:"MOBILE"}];n&&a.push({label:(0,eN.t)("first_draft.prompts.homepage.label"),prompt:(0,eN.t)("first_draft.prompts.homepage.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.homepage.label"),prompt:(0,eN.t)("first_draft.prompts.homepage_2.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.video_player_streaming.label"),prompt:(0,eN.t)("first_draft.prompts.video_player_streaming.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.video_page_with_comments.label"),prompt:(0,eN.t)("first_draft.prompts.video_page_with_comments.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.search_results_travel.label"),prompt:(0,eN.t)("first_draft.prompts.search_results_travel.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.social_feed_text_heavy.label"),prompt:(0,eN.t)("first_draft.prompts.social_feed_text_heavy.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.profile.label"),prompt:(0,eN.t)("first_draft.prompts.profile_social_media.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.news_article.label"),prompt:(0,eN.t)("first_draft.prompts.news_article.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.landing_page.label"),prompt:(0,eN.t)("first_draft.prompts.landing_page_beauty.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.landing_page.label"),prompt:(0,eN.t)("first_draft.prompts.landing_page_tech.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.marketing_page_football.label"),prompt:(0,eN.t)("first_draft.prompts.marketing_page_football.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.shopping.label"),prompt:(0,eN.t)("first_draft.prompts.shopping_hifi.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.shopping.label"),prompt:(0,eN.t)("first_draft.prompts.product_details_shoes.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.admin_dashboard_saas.label"),prompt:(0,eN.t)("first_draft.prompts.admin_dashboard_saas.prompt"),type:"WEB"},{label:(0,eN.t)("first_draft.prompts.settings_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.settings_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.video_player_comments_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.video_player_comments_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.checkout_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.checkout_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.reviews_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.reviews_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.audio_player_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.audio_player_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.investing_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.investing_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.app_browsing_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.app_browsing_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.reservations_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.reservations_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.fitness_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.fitness_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.subscriptions_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.subscriptions_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.recipes_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.recipes_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.sports_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.sports_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.delivery_app_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.delivery_app_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.calendar_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.calendar_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.email_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.email_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.file_browser_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.file_browser_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.education_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.education_mobile.prompt"),type:"MOBILE"},{label:(0,eN.t)("first_draft.prompts.shopping_mobile.label"),prompt:(0,eN.t)("first_draft.prompts.shopping_mobile.prompt"),type:"MOBILE"});let l=a;if((null==t?void 0:t.type)==="KIT"){let e=t.kit.name.toLowerCase();e.includes("mobile")?l=l.filter(e=>"MOBILE"===e.type):e.includes("web")&&(l=l.filter(e=>"WEB"===e.type))}let r=ecW()(l),i={};for(let t of r){if(Object.keys(i).length>=e)break;let n=ecY(t.label);i[n]||(i[n]=t)}let o=Object.values(i).slice(0,e);return o.length<e?((0,o2.$D)(o5.e.FEEDBACK,Error(`Unable to generate ${e} unique presets`),{extra:{count:e,generatedCount:o.length,selectedPresetsObj:i,shuffledPresets:r}}),[]):o}function ecJ(e=1){let t=[{label:(0,eN.t)("first_draft.make_changes.prompt_labels.change_font"),prompt:(0,eN.t)("first_draft.make_changes.prompts.futuristic_font")},{label:(0,eN.t)("first_draft.make_changes.prompt_labels.colors"),prompt:(0,eN.t)("first_draft.make_changes.prompts.calming_colors")},{label:(0,eN.t)("first_draft.make_changes.prompts.make_it_pop"),prompt:(0,eN.t)("first_draft.make_changes.prompts.make_it_pop")},{label:(0,eN.t)("first_draft.make_changes.prompt_labels.round_corners"),prompt:(0,eN.t)("first_draft.make_changes.prompts.round_corners")},{label:(0,eN.t)("first_draft.make_changes.prompt_labels.colors"),prompt:(0,eN.t)("first_draft.make_changes.prompts.watermelon_theme")},{label:(0,eN.t)("first_draft.make_changes.prompt_labels.rewrite"),prompt:(0,eN.t)("first_draft.make_changes.prompts.punchier_text")},{label:(0,eN.t)("first_draft.make_changes.prompt_labels.imagery"),prompt:(0,eN.t)("first_draft.make_changes.prompts.vibrant_images")},{label:(0,eN.t)("first_draft.make_changes.prompt_labels.add"),prompt:(0,eN.t)("first_draft.make_changes.prompts.add_another_section")},{label:(0,eN.t)("first_draft.make_changes.prompt_labels.replace"),prompt:(0,eN.t)("first_draft.make_changes.prompts.replace_hero_image")}];return eim()(ecW()(t.filter(e=>""!==ecY(e.label))),e=>e.label).slice(0,e)}function ecY(e){return e.trim().toLowerCase()}var ecX=n(267344),ecq=n(879466);function ecZ({trace:e}){return f.createElement(er9.B,{justify:"space-between",align:"center",fullWidth:!0},f.createElement("span",{className:a8.cx.maxWFull.preWrap.textBodyMedium.$},(0,eN.tx)("first_draft.share_trace_nudge_in_modal",{weirdOutput:f.createElement("span",{className:a8.cx.textBodyMediumStrong.$},(0,eN.t)("first_draft.share_trace_nudge_weird_output"))})),f.createElement(ecH.r,{variant:"secondary",onAction:()=>{(0,ecq.j)(JSON.stringify(e,null,2),"trace.json")}},(0,eN.tx)("first_draft.share_trace")))}function ecQ(e){let{close:t}=(0,az.cq)();(0,eb.f4)(n=>{if(e)for(let e of Object.keys(n.mirror.sceneGraphSelection)){let n=lE.q.instance.get(e);if(n&&!n.isOrInFirstDraft){t();return}}})}var ec$=(e=>(e[e.READY_FOR_PROMPT=0]="READY_FOR_PROMPT",e[e.RUNNING=1]="RUNNING",e[e.FINISHED=2]="FINISHED",e[e.ERROR=3]="ERROR",e[e.ICANTDOTHIS=4]="ICANTDOTHIS",e))(ec$||{}),ec0=(e=>(e.PROMPT="prompt",e.THEME="theme",e))(ec0||{});let ec1={brandColor:hu.UE,displayBrandColor:hu.UE,colorMode:ei3.lH.LIGHT,spacing:1,radius:1,titleFonts:[],bodyFonts:[],labelFonts:[]};function ec2(e){let t=lE.q.instance.get(e);if(!t)return ec1;let n=(0,esb.BY)(t),a=(0,esb.uP)(t),l=(0,esb.Mz)(t,n),r=(0,ei6.X6)(t)??hu.UE,i=(0,hu.tK)(esr(r,a.colors))??hu.UE;return{brandColor:i,displayBrandColor:i,colorMode:eso(t)??ei3.lH.LIGHT,spacing:(0,esd.YB)(a.spacingValues),radius:(0,esd.nd)(a.radiusValues),titleFonts:l.title,bodyFonts:l.body,labelFonts:l.label}}function ec5({initialRootGuid:e}){let t=(0,ecU._M)({action:elt.JT.FIRST_DRAFT_MAKE_CHANGES,clientLifecycleId:void 0}),n=t.clientLifecycleId,a=(0,af.tS)(),{pop:l}=(0,az.cq)(),r=f.useCallback(()=>{(0,Z.sx)("First Draft: Error",{file_key:a,clientLifecycleId:n,view:"firstDraftMakeChanges"},{forwardToDatadog:!0,sendAsBeacon:!0})},[a,n]);return f.createElement(l7.tH,{boundaryKey:"FirstDraftMakeChanges",fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{clientLifecycleId:n,area:o5.e.FEEDBACK},onError:r},f.createElement(ec4,{recordingKey:"firstDraftMakeChangesView",onBack:l,initialRootGuid:e,aiTrackingContext:t}))}function ec4(e){let t=e.aiTrackingContext,n=t.clientLifecycleId,a=(0,ecV.GE)(elt.JT.FIRST_DRAFT_MAKE_CHANGES),[l,r]=f.useState(""),i=(0,af.tS)(),o=(0,eb.eY)(),s=ecB()||e.initialRootGuid,c=(0,eb.KH)(),d=(0,f.useMemo)(()=>s?o.get(s):null,[o,s]),{applyMakeChanges:u,resetMakeChanges:m,instrumentationRef:p}=function({clientLifecycleId:e}){let[t]=(0,f.useState)({current:(0,ez.g)()}),{insertJSX:n,resetAsync:a,instrumentationRef:l}=esU({clientLifecycleId:e,insertType:"makeChanges"});return{applyMakeChanges:(0,f.useCallback)(async(r,i)=>{let o=[];for(let e of("affectedId"in r&&o.push(r.affectedId),"destinationId"in r&&o.push(r.destinationId),o)){if(!function e(t,n,a){let l=t.get(n);return!!l&&(l.guid===a||!!l.parentGuid&&e(t,l.parentGuid,a))}(lE.q.instance,e,i.rootNodeId)){(0,o2.$D)(o5.e.FEEDBACK,Error("first-draft: Node does not have root node as ancestor"),{extra:{nodeId:e,action:r,...i}});return}if(e===i.rootNodeId){(0,o2.$D)(o5.e.FEEDBACK,Error("first-draft: Tried to mutate root node"),{extra:{nodeId:e,action:r,...i}});return}}switch(await a(),r.type){case"theme":{let{content:e}=r;e&&function(e,t,n){let a=lE.q.instance.get(e);if(!a)return;let l=(0,esb.BY)(a);if(["borderRadii","spacing","colors","fontFamilies"].some(e=>e in n)){let e=(0,esb.k5)(t,n);(0,esb.jR)(a,e,l)}let r=t.darkMode?ei3.lH.DARK:ei3.lH.LIGHT,i=t.brandColor??function(e){let t=(0,esb.uP)(e,{ignoreOpacity:!0});return esr((0,ei6.X6)(e)??hu.UE,t.colors)}(a),o="darkMode"in n?n.darkMode?ei3.lH.DARK:ei3.lH.LIGHT:void 0;if(o&&r!==o&&o4.l7.ai("first-draft-make-changes-theme-switch-mode",()=>{ess(a,o,i)}),"brandColor"in n&&n.brandColor){let e=(0,hu.tK)(n.brandColor);if(e){let t=(0,ei6.qO)(e,o??r);o4.l7.ai("first-draft-make-changes-theme-brand-color",()=>{esi(a,t,o??r??ei3.lH.LIGHT,{},i)})}}}(i.rootNodeId,i.currentTheme,e);break}case"text_or_image":await ecD({changes:r,makeChangesSessionId:t.current,clientLifecycleId:e,containingNodeId:i.rootNodeId,instrumentationRef:l});break;case"insert":case"replace":await ecR({action:r,options:i,insertJSX:n}),await a();break;case"remove":o4.l7.ai("first-draft-make-changes-remove",()=>{let e=lE.q.instance.get(r.affectedId);e&&e.removeSelfAndChildren()});break;case"move":{let{affectedId:e,destinationId:t,insertBehavior:n}=r;o4.l7.ai("first-draft-make-changes-move",()=>{let a=lE.q.instance,l=a.get(e),r=a.get(t),i=null==r?void 0:r.parentNode,o=(null==i?void 0:i.childrenGuids.indexOf(t))??-1;l&&i&&("above"===n?i.insertChild(l,o):"below"===n&&(o<i.childrenGuids.length-1?i.insertChild(l,o+1):i.appendChild(l)))});break}case"replaceClasses":{let{affectedId:e,classes:t}=r;for(let n of t)!function(e,t){let n=lE.q.instance.get(e);if(!n){(0,o2.xi)("applyToNode","Node not found",{guid:e});return}let a=function(e){switch(e.type){case"TEXT":return"Text";case"SYMBOL":case"INSTANCE":case"FRAME":return"AutoLayout";default:return null}}(n);if(!a){(0,o2.xi)("applyToNode","Unsupported element type",{type:n.type});return}let l=eo5(t,a);if("AutoLayout"===a&&l.direction){let e="vertical"===l.direction?"VERTICAL":"HORIZONTAL";"HORIZONTAL"!==e&&"WRAP"===n.stackWrap&&(n.stackWrap="NO_WRAP"),n.stackMode=e}for(let e of Object.keys(l)){let t=l[e];try{switch(e){case"width":"fill-parent"===t&&(n.stackHorizontalLayoutSize=ei.mKm.FILL_CONTAINER),"hug-contents"===t&&(n.stackHorizontalLayoutSize=ei.mKm.HUG_CONTENT),"number"==typeof t&&(n.stackHorizontalLayoutSize=ei.mKm.FIXED,n.resizeWithConstraints(t,n.size.y));break;case"height":"fill-parent"===t&&(n.stackVerticalLayoutSize=ei.mKm.FILL_CONTAINER),"hug-contents"===t&&(n.stackVerticalLayoutSize=ei.mKm.HUG_CONTENT),"number"==typeof t&&(n.stackVerticalLayoutSize=ei.mKm.FIXED,n.resizeWithConstraints(n.size.x,t));break;case"hidden":n.visible=!t;break;case"padding":"AutoLayout"===a&&"object"==typeof t&&t&&("top"in t&&"number"==typeof t.top&&(n.stackTopPadding=t.top),"bottom"in t&&"number"==typeof t.bottom&&(n.stackBottomPadding=t.bottom),"left"in t&&"number"==typeof t.left&&(n.stackLeftPadding=t.left),"right"in t&&"number"==typeof t.right&&(n.stackRightPadding=t.right));break;case"cornerRadius":if("AutoLayout"===a&&"object"==typeof t&&t){let e=!1;"topLeft"in t&&"number"==typeof t.topLeft&&(n.rectangleTopLeftCornerRadius=t.topLeft,e=!0),"bottomLeft"in t&&"number"==typeof t.bottomLeft&&(n.rectangleBottomLeftCornerRadius=t.bottomLeft,e=!0),"topRight"in t&&"number"==typeof t.topRight&&(n.rectangleTopRightCornerRadius=t.topRight,e=!0),"bottomRight"in t&&"number"==typeof t.bottomRight&&(n.rectangleBottomRightCornerRadius=t.bottomRight,e=!0),e&&(n.rectangleCornerRadiiIndependent=!0)}break;case"textDecoration":"TEXT"===n.type&&"string"==typeof t&&("underline"===t&&(n.textDecoration="UNDERLINE"),"strikethrough"===t&&(n.textDecoration="STRIKETHROUGH"),"none"===t&&(n.textDecoration="NONE"));break;case"textCase":"TEXT"===n.type&&"string"==typeof t&&("upper"===t&&(n.textCase="UPPER"),"lower"===t&&(n.textCase="LOWER"),"title"===t&&(n.textCase="TITLE"),"original"===t&&(n.textCase="ORIGINAL"),"small-caps"===t&&(n.textCase="SMALL_CAPS"),"small-caps-forced"===t&&(n.textCase="SMALL_CAPS_FORCED"));break;case"fontSize":"TEXT"===n.type&&"number"==typeof t&&(n.fontSize=t);break;case"spacing":"AutoLayout"===a&&("number"==typeof t?n.stackSpacing=t:"object"==typeof t&&t?("VERTICAL"===n.stackMode&&"vertical"in t&&"number"==typeof t.vertical&&(n.stackSpacing=t.vertical),"HORIZONTAL"===n.stackMode&&("horizontal"in t&&"number"==typeof t.horizontal&&(n.stackSpacing=t.horizontal),"WRAP"===n.stackWrap&&"vertical"in t&&"number"==typeof t.vertical&&(n.stackCounterSpacing=t.vertical))):"auto"===t&&(n.stackPrimaryAlignItems="SPACE_BETWEEN","WRAP"===n.stackWrap&&(n.stackCounterAlignContent="SPACE_BETWEEN")));break;case"minWidth":case"maxWidth":case"minHeight":case"maxHeight":"AutoLayout"===a&&"number"==typeof t&&(n[e]=t);break;case"opacity":"number"==typeof t&&(n.opacity=t);break;case"strokeWidth":"AutoLayout"===a&&"number"==typeof t&&(n.strokeWeight=t,n.borderStrokeWeightsIndependent=!1,n.borderTopWeight=t,n.borderBottomWeight=t,n.borderLeftWeight=t,n.borderRightWeight=t);break;case"lineHeight":if("Text"===a&&"string"==typeof t){let e=function(e){if("number"==typeof e)return{units:"PIXELS",value:e};if("auto"===e)return{units:"PERCENT",value:100};let t=parseFloat(e);return isNaN(t)?null:e.match(/.*%\w*/)?{units:"RAW",value:t/100}:e.match(/.*px\w*/)?{units:"PIXELS",value:t}:null}(t??"");e&&(n.lineHeight=e)}break;case"horizontalAlignText":"Text"===a&&"string"==typeof t&&("left"===t&&(n.textAlignHorizontal="LEFT"),"center"===t&&(n.textAlignHorizontal="CENTER"),"right"===t&&(n.textAlignHorizontal="RIGHT"),"justify"===t&&(n.textAlignHorizontal="JUSTIFIED"));break;case"verticalAlignText":"Text"===a&&"string"==typeof t&&("top"===t&&(n.textAlignVertical="TOP"),"center"===t&&(n.textAlignVertical="CENTER"),"bottom"===t&&(n.textAlignVertical="BOTTOM"));break;case"fill":"string"==typeof t&&ecF(t)&&(n.fillPaints={data:[{type:"SOLID",color:{...(0,ecM._0)(t),a:1},visible:!0,opacity:1,blendMode:"NORMAL"}],blobs:[]});break;case"stroke":"Text"!==a&&"string"==typeof t&&ecF(t)&&(n.strokePaints={data:[{type:"SOLID",color:{...(0,ecM._0)(t),a:1},visible:!0,opacity:1,blendMode:"NORMAL"}],blobs:[]});break;case"direction":break;case"verticalAlignItems":"AutoLayout"===a&&"VERTICAL"===n.stackMode&&("start"===t?n.stackPrimaryAlignItems="MIN":"center"===t?n.stackPrimaryAlignItems="CENTER":"end"===t&&(n.stackPrimaryAlignItems="MAX")),"AutoLayout"===a&&"HORIZONTAL"===n.stackMode&&("start"===t?n.stackCounterAlignItems="MIN":"center"===t?n.stackCounterAlignItems="CENTER":"end"===t?n.stackCounterAlignItems="MAX":"baseline"===t&&(n.stackCounterAlignItems="BASELINE"));break;case"horizontalAlignItems":"AutoLayout"===a&&"HORIZONTAL"===n.stackMode&&("start"===t?n.stackPrimaryAlignItems="MIN":"center"===t?n.stackPrimaryAlignItems="CENTER":"end"===t&&(n.stackPrimaryAlignItems="MAX")),"AutoLayout"===a&&"VERTICAL"===n.stackMode&&("start"===t?n.stackCounterAlignItems="MIN":"center"===t?n.stackCounterAlignItems="CENTER":"end"===t&&(n.stackCounterAlignItems="MAX"));break;case"wrap":"AutoLayout"===a&&"HORIZONTAL"===n.stackMode&&(n.stackWrap=t?"WRAP":"NO_WRAP");break;default:(0,o2.xi)("applyToNode","Unhandled property",{k:e,v:t,type:n.type})}}catch(a){(0,o2.xi)("applyToNode","Error setting property",{k:e,v:t,error:a,type:n.type})}}}(e,n)}}},[e,t,n,l,a]),resetMakeChanges:(0,f.useCallback)(()=>{t.current=(0,ez.g)()},[t]),instrumentationRef:l}}({clientLifecycleId:n}),[_,g]=f.useState(0),[h,E]=f.useState(Error((0,eN.t)("first_draft.something_went_wrong"))),[v,b]=f.useState(null),[C,w]=Wv.t.useTabs({prompt:!0,theme:!0},{defaultActive:"theme",recordingKey:n_.Pt(e,"tabs")});ecQ(2===_||3===_||4===_);let[T,x]=f.useState(ecX.m.COLOR),N=f.useRef(1),S=f.useRef(null);(0,f.useEffect)(()=>{S.current=l},[l]);let[k,I]=f.useState(Date.now()),O=f.useCallback(()=>{N.current+=1,p.current.trackFinished("stopped"),ec7(t,"stopped"),g(0)},[g,t,N,p]),L=f.useCallback(async()=>{var e;m();let l=N.current,r={file_key:i,clientLifecycleId:n,generation_id:null==(e=null==d?void 0:d.firstDraftData)?void 0:e.generationId};try{if(p.current.start(),g(1),b(null),I(Date.now()),!d)throw Error("Root node not found");let e=d&&d.getSharedPluginData(eoa,"userPrompt")||"",i=ec6(d),o="LOCAL"===i.type;Object.assign(r,{dsKitType:i.type,isLocal:"LOCAL"===i.type,kitKey:"LOCAL"===i.type?ei.XJn.getKitKey(i.pageId):i.key}),(0,Z.sx)("First Draft: Make Changes Started",{...r,hasNonRootNodeSelected:!(d.guid in c)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),(0,ecU.Dl)(t);let[{jsxStr:s},{jsxStr:m}]=await Promise.all([ecN({[d.guid]:!0},!1),ecN({[d.guid]:!0},!0)]);if(!s||!m){(0,Z.sx)("First Draft: Make Changes Ended",{...r,timeElapsedMs:Date.now()-k,status:"failed",reason:"infer-jsx-failed",hasNonRootNodeSelected:!(d.guid in c)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),ec7(t,"error"),g(2);return}let f=S.current||"",_=function(e){if(!(0,y.kc)().first_draft_prompt_history||!(0,y.kc)().first_draft_make_changes_history)return[];let t=(0,A.Q_)();if(!t)return[];let n=`${eck}${e}`,a=t.getItem(n);if(!a)return[];try{return Gb.array(ecS.Db).parse(JSON.parse(a))}catch{}return[]}(d.guid),h=d?JSON.parse(d.getSharedPluginData(eoa,"theme")||"{}"):{darkMode:!1},E=function(e){let t=(0,esb.uP)(e,{ignoreOpacity:!0}),n=esr((0,ei6.X6)(e)??hu.UE,t.colors),a=eso(e)??ei3.lH.LIGHT;return{...(0,esb.rO)(e,t),version:2,brandColor:n,darkMode:"dark"===a}}(d),v="LOCAL"===i.type?i.pageId:i.key,C=await yg.Ay.design.firstDraftMakeChanges({userPrompt:f,promptHistory:_,storedInitialPrompt:e,kitKey:v,isLocal:o,currentTheme:E,jsx:s,jsxInsertReplace:m},(0,eot.Lp)({clientLifecycleId:n}));_.push({prompt:f}),function(e,t){let n=(0,A.Q_)();if(!n)return;let a=`${eck}${e}`;n.setItem(a,JSON.stringify(t))}(d.guid,_);let w=C.getReader(),T=[];for(;;){let{done:n,value:o}=await w.read();if(l!==N.current){w.cancel();break}if(p.current.trackFirstByteReceived(),n&&p.current.trackLastStreamByteReceived(),(0,o2.Lo)("makeChanges","Response message",{message:o}),(null==o?void 0:o.trace)&&b(o.trace),null==o?void 0:o.action){if("replaceClasses"===o.action.type){(0,o2.xi)("makeChanges","Unsupported action",{action:o.action.type}),(0,esA.Rh)("first_draft.client.make_changes.unsupported_action",{action:o.action.type}),T.push(Promise.reject(new eos.G1("make_changes_unsupported",{})));continue}(0,Z.sx)("First Draft: Make Changes Prompt Action",{...r,action:o.action.type},{forwardToDatadog:!0,batchRequest:!0}),T.push(u(o.action,{dsKitKey:i,rootNodeId:d.guid,storedTheme:h,currentTheme:E,imageArgs:{initialUserPrompt:e}}))}if(n){let e=await Promise.allSettled(T);if(!T.length)throw(0,o2.xi)("makeChanges","No actions were applied from the prompt response"),(0,esA.Rh)("first_draft.client.make_changes.no_actions_applied"),new eos.G1("make_changes_unsupported",{});if(e.every(e=>"rejected"===e.status)){for(let t of e)if("rejected"===t.status)throw t.reason}(0,Z.sx)("First Draft: Make Changes Ended",{...r,status:"completed",timeElapsedMs:Date.now()-k,hasNonRootNodeSelected:!(d.guid in c)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),a(),ec7(t,"success"),p.current.trackFinished("success"),g(2),et.Y5.triggerAction("commit");break}}}catch(l){(0,o2.xi)("makeChanges","Error",{error:l});let e=l instanceof eos.G1,n={...r,timeElapsedMs:Date.now()-k,error:l.toString(),status:"failed",reason:"error"},a=e?"handled_internally":(0,o2.$D)(o5.e.FEEDBACK,l,{extra:n});(0,Z.sx)("First Draft: Make Changes Ended",{...n,sentryEventId:a},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),ec7(t,"error"),p.current.trackFinished("failure"),e&&("make_changes_unsupported"===l.type||"make_changes_moderated"===l.type)?((0,Z.sx)("First Draft: Make Changes Prompt Action",{...r,action:"make_changes_unsupported"===l.type?"iCantDoThis":"blocked"},{forwardToDatadog:!0,batchRequest:!0}),g(4)):g(3),E(l instanceof Error?l:Error("Unknown error"))}finally{l===N.current&&(N.current+=1)}},[i,n,N,p,d,c,t,k,u,m,a]),P=()=>{g(0)},D=v&&(0,y.kc)().cortex_execution_tracing;switch(_){case 1:return f.createElement(eiQ.F,{onStop:O,aiTrackingContext:t,recordingKey:n_.Pt(e,"running")},(0,eN.tx)("first_draft.making_changes"));case 3:return f.createElement(eiX.E,{error:h,customMessage:(0,eN.t)("first_draft.something_went_wrong"),recordingKey:n_.Pt(e,"error"),buttons:[{type:eiX.f.GO_BACK,callback:P}],extra:D?f.createElement(ecZ,{trace:v}):void 0,aiTrackingContext:t});case 4:let R=(0,eN.t)("first_draft.make_changes.i_cant_do_this");return h instanceof eos.G1&&"make_changes_moderated"===h.type&&(R=(0,eN.t)("ai.error.unsafe_or_harmful")),f.createElement(eiX.E,{error:h,customMessage:R,recordingKey:n_.Pt(e,"unsupported"),buttons:[{type:eiX.f.GO_BACK,callback:P}],extra:D?f.createElement(ecZ,{trace:v}):void 0,aiTrackingContext:t});case 2:let M=[];return(0,aI.KK)()&&!(0,y.kc)().first_draft_use_gemini&&M.push({type:eiZ.i.MAKE_CHANGES,callback:P}),f.createElement(eiZ.O,{content:D?f.createElement(ecZ,{trace:v}):void 0,recordingKey:n_.Pt(e,"iterate"),iterateOptions:M,aiTrackingContext:{...t,iteration_view_type:eiY.$J.SUCCESS_WITH_ITERATION},stayOpen:!0});case 0:return f.createElement(ec3,{promptValue:l,setPromptValue:r,rootNode:d,activeThemeTab:T,setActiveThemeTab:x,tabManager:w,tabPropsMap:C,handleSubmit:L,recordingKey:e.recordingKey,onBack:e.onBack,aiTrackingContext:t});default:(0,nm.xb)(_)}}function ec3({promptValue:e,setPromptValue:t,rootNode:n,activeThemeTab:a,setActiveThemeTab:l,tabManager:r,tabPropsMap:i,handleSubmit:o,recordingKey:s,onBack:c,aiTrackingContext:d}){let u=d.clientLifecycleId,[m,p]=f.useState(ecJ(1)[0].prompt),[_,g]=f.useState(ecJ(3)),[h,E]=f.useState(ec2((null==n?void 0:n.guid)??"")),v=f.useRef((0,esd.$L)(n)),C=f.useRef((0,esd.uq)(n)),w=f.useRef(h.radius),T=f.useRef(h.spacing);(0,f.useEffect)(()=>{v.current=(0,esd.$L)(n),C.current=(0,esd.uq)(n);let e=ec2((null==n?void 0:n.guid)??"");w.current=e.radius,T.current=e.spacing},[n]);let{close:x}=(0,az.cq)(),N=(0,af.tS)(),S=f.useMemo(()=>{var e;let t,a;let l={file_key:N,clientLifecycleId:u,generation_id:null==(e=null==n?void 0:n.firstDraftData)?void 0:e.generationId};return n&&(a="LOCAL"===(t=ec6(n)).type?t.pageId:t.key),Object.assign(l,{dsKitType:null!=t?t.type:null,kitKey:a}),l},[n,N,u]),k=h.colorMode,I=h.brandColor,A=h.displayBrandColor,O=h.radius,L=h.spacing,P=h.titleFonts,D=h.bodyFonts,R=h.labelFonts,M=(0,C4.ei)(null==n?void 0:n.guid),F=(0,oC.k9)(()=>M,[M]);f.useEffect(()=>{let e=ec2((null==n?void 0:n.guid)??"");E(t=>(0,rE.xN)((0,hb.oB)(t.brandColor).h,(0,hb.oB)(e.brandColor).h,.01)?{...e,displayBrandColor:t.brandColor}:e)},[F,null==n?void 0:n.guid]);let B=(0,enu.A)(e=>{(0,Z.sx)("First Draft: Make Changes Color Change",{...S,color:e},{forwardToDatadog:!0,batchRequest:!0})},5e3),U=f.useCallback(e=>{e!==k&&(o4.l7.user("first-draft-switch-color-mode",()=>{ess(n,e,(0,hu.F_)(h.brandColor))}),B(k),et.Y5.triggerAction("commit"),E({...h,colorMode:e}))},[h,n,k,B]),H=f.useMemo(()=>(function(e){let t={};if(!e)return t;let n=[e];for(;n.length>0;){let e=n.pop();if(e){if(e.fills.length>0){let n=(0,ei6.gU)(e.fills);if(n){let a=(0,hb.oB)(n);t[e.guid]={s:a.s,l:a.l}}}else if(e.strokePaints.data.length>0){let n=(0,ei6.gU)(e.strokePaints.data);if(n){let a=(0,hb.oB)(n);t[e.guid]={s:a.s,l:a.l}}}"childrenNodes"in e&&n.push(...e.childrenNodes)}}return t})(n),[n]),G=f.useRef(null),V=f.useRef(null),K=f.useCallback((e,t)=>{if(V.current)G.current=[e,V.current];else{V.current=e;let a=(0,hu.F_)(t);o4.l7.user("first-draft-apply-brand-color",()=>{esi(n,e,k,H,a)}),E({...h,brandColor:e,displayBrandColor:e}),setTimeout(()=>{if(V.current=null,G.current){let[e,t]=G.current;G.current=null,K(e,t)}},30)}},[n,k,H,h]),W=f.useCallback(e=>{B((0,hu.F_)(e)),K({...(0,ei6.qO)(e,k),a:1},I)},[B,k,K,I]),z=(0,enu.A)(e=>{(0,Z.sx)("First Draft: Make Changes Radius Change",{...S,radius:e},{forwardToDatadog:!0,batchRequest:!0})},1e3),j=(0,enu.A)(e=>{z(e),(0,esd.oP)(v.current,e,w.current)},100),J=f.useCallback((e,t)=>{t.commit&&et.Y5.triggerAction("commit"),e!==O&&(j(e),E({...h,radius:e}))},[O,h,j]),Y=(0,enu.A)(e=>{(0,Z.sx)("First Draft: Make Changes Spacing Change",{...S,spacing:e},{forwardToDatadog:!0,batchRequest:!0})},1e3),X=(0,enu.A)(e=>{Y(e),(0,esd.HS)(C.current,e,T.current)},100),q=f.useCallback((e,t)=>{t.commit&&et.Y5.triggerAction("commit"),e!==L&&(X(e),E({...h,spacing:e}))},[L,h,X]),Q=(0,enu.A)((e,t)=>{(0,Z.sx)("First Draft: Make Changes Font Change",{...S,font_location:e,font_type:t},{forwardToDatadog:!0,batchRequest:!0})},1e3),$=f.useCallback(e=>0===e.length?null:e[0].family,[]),ee=f.useCallback(async e=>{await ecA(ei4.lu.TITLE,e,P),Q("title",e),et.Y5.triggerAction("commit"),(null==n?void 0:n.guid)&&E(ec2(n.guid))},[P,Q,null==n?void 0:n.guid]),en=f.useCallback(async e=>{await ecA(ei4.lu.BODY,e,h.bodyFonts),Q("body",e),et.Y5.triggerAction("commit"),(null==n?void 0:n.guid)&&E(ec2(n.guid))},[h.bodyFonts,Q,null==n?void 0:n.guid]),ea=f.useCallback(async e=>{await ecA(ei4.lu.LABEL,e,h.labelFonts),Q("label",e),et.Y5.triggerAction("commit"),(null==n?void 0:n.guid)&&E(ec2(n.guid))},[h.labelFonts,Q,null==n?void 0:n.guid]),el=(0,f.useCallback)(e=>{(0,ecU.SX)({...d,...(0,ecU.Q0)(e),interaction:eiY.NI.GENERATE}),o()},[d,o]),er=f.createElement(ecH.r,{shortcuts:[{key:b.Uz.ENTER,modifier:[b.xH.META]}],onAction:el,disabled:!n||0===e.length,recordingKey:n_.Pt(s,"submit")},(0,eN.tx)("first_draft.make_changes")),ei=f.createElement(ecH.r,{shortcuts:[{key:b.Uz.ENTER,modifier:[b.xH.META]}],onAction:x,recordingKey:n_.Pt(s,"doneTheming")},(0,eN.tx)("first_draft.done_theming"));return f.createElement(f.Fragment,null,f.createElement(er9.B,{fullWidth:!0,align:"center",justify:"space-between",gap:0},"theme"===r.activeTab&&f.createElement(ei5.qn,{section:a,colorMode:k,onChangeColorMode:U,brandColor:A,onChangeColor:W,cornerRadiusStop:O,onChangeCornerRadiusStop:J,spacingStop:L,onChangeSpacingStop:q,titleFont:$(P),onChangeTitleFont:ee,bodyFont:$(D),onChangeBodyFont:en,labelFont:$(R),onChangeLabelFont:ea,recordingKey:n_.Pt(s,"themeEditorDrawer"),onBack:c})),f.createElement("div",{className:nb()(a8.cx.p8.relative.$,"theme"===r.activeTab&&"first_draft_make_changes_view--contentBoxed--L-H0e",a&&a8.cx.elevation500.radiusLarge.$),"data-testid":"readyForPromptView"},f.createElement(Wv.t.TabPanel,{...i.prompt},f.createElement(ecG.X,{value:e,onChange:t,onBack:c,recordingKey:n_.Pt(s,"prompt"),suggestion:m,suggestionPills:(0,y.kc)().first_draft_new_prompt_pills?_:void 0})),f.createElement(Wv.t.TabPanel,{...i.theme},f.createElement(ei5.JP,{activeTab:a,onTabChange:l,brandColor:A,cornerRadiusStop:O,spacingStop:L,titleFont:$(P),bodyFont:$(D),labelFont:$(R),recordingKey:n_.Pt(s,"themeEditor")})),f.createElement(er9.B,{fullWidth:!0,justify:"space-between"},f.createElement(Wv.t.TabStrip,{manager:r},f.createElement(Wv.t.Tab,{...i.theme},(0,eN.tx)("first_draft.style")),f.createElement(Wv.t.Tab,{...i.prompt},f.createElement("span",{"data-testid":"promptTabLabel"},(0,eN.tx)("first_draft.prompt")))),"prompt"===r.activeTab?er:ei)))}function ec6(e){let t=e.firstDraftData;if(t){if(t.kit.type===ei.AZ4.LOCAL)return{type:"LOCAL",pageId:ei.XJn.getPageIdFromKitKey(t.kit.key)??""};if(t.kit.type===ei.AZ4.LIBRARY)return{type:"LIBRARY",key:t.kit.key}}return JSON.parse(e.getSharedPluginData(eoa,"dsKitKey"))}function ec7(e,t){switch(t){case"success":(0,ecU.as)({...e,status:eiY.dM.COMPLETED,reason:"success"});break;case"error":(0,ecU.as)({...e,status:eiY.dM.FAILED,reason:eiY.F9.ERROR});break;case"stopped":(0,ecU.as)({...e,status:eiY.dM.FAILED,reason:eiY.F9.STOPPED})}}class ec8{constructor(e=1){this.queue=[],this.queue=[],this.concurrencyLimit=e,this.activeCount=0}postTask(e,t){return new Promise((n,a)=>{let l=async()=>{try{n(await e())}catch(e){a(e)}};this.queue.push([l,t]),this.doNextTask()})}async doNextTask(){if(0===this.queue.length||this.activeCount>=this.concurrencyLimit)return;let e=this.queue.shift();if(!e)return;let[t,n]=e;this.activeCount++;try{await scheduler.postTask(t,n)}catch(e){throw e}finally{this.activeCount--,this.doNextTask()}}}var ec9=n(438773),ede=n(750600),edt=n(821597),edn=n(420586);function eda({options:e,onSelect:t}){let[n,a]=f.useState(),l=f.useCallback((e,l)=>{t(e,{ev:l,prevOption:n}),a(e)},[t,n]);return f.createElement(edn._,null,f.createElement(edt.t,null),f.createElement(ede.x,{columns:6,gap:13.9,padding:0},e.map((e,t)=>f.createElement(edl,{key:t,column:t,presetOption:e,onSelect:l}))))}function edl({presetOption:e,onSelect:t}){let n={onAction:n=>t(e,n)};return f.createElement(ede.x.Item,{focusAction:n,primaryAction:n},f.createElement(ede.x.GridItemHighlight,null,f.createElement("div",{className:a8.cx.colorBgSecondary.b1.colorBorder.wFull.flex.alignCenter.justifyCenter.$,style:{aspectRatio:"1/1",height:"56px",overflow:"hidden",borderRadius:"8px",alignItems:"flex-start"}},f.createElement("img",{alt:"Preview of generation",src:e.dataURI,className:a8.cx.maxWFull.$,draggable:!1}))))}let edr=(0,S.E3)("draft_prompt_history",[]),edi=async({params:{selectedKitOption:e,promptValue:t,submitPrompt:n,shouldContinueStreamRef:a},abortController:l})=>{let r="KIT"===e.type?e.kit:null;l.signal.addEventListener("abort",()=>{a.current=!1});let i=await n(t,{designSystem:r},{shouldGenerateImages:!0});if(i.error)throw l.abort(),ei.XJn.clearFDScene(),i.error;if((null==i?void 0:i.success)&&!(null==i?void 0:i.nodeId))throw Error((0,eN.t)("first_draft.no_design_generated"));return{result:i}};function edo({recordingKey:e}){var t;let n=(0,eln.RL)(elt.JT.FIRST_DRAFT,edi),{start:a,stop:l,state:r,aiTrackingContext:i}=n,o=i.clientLifecycleId,s=(0,ecV.GE)(elt.JT.FIRST_DRAFT),c=(0,eb.eY)(),d=(0,af.tS)(),[u,m]=f.useState(""),[p,_]=f.useState([]),g=f.useRef(!0),h=f.useRef(null),E=f.useRef(null),v=f.useRef(new ec8(1)),[b,C]=f.useState(new Set),w=f.useRef({}),{kitsAreLoaded:T,kitOptionDropdownItems:x,selectedKitOption:N,setSelectedKitOption:S}=es7(),{close:k}=(0,az.cq)(),{promptHistory:I,addPromptToHistory:A}=(0,ec9.a)(edr,e=>e),[O,L]=(0,f.useState)(!1);ecQ(r===eln.qy.DONE||r===eln.qy.ERROR),f.useEffect(()=>()=>{ei.XJn.clearFDScene()},[]);let{submitPrompt:P,executionTrace:D,imageProgress:R}=esK({shouldContinueStream:f.useCallback(()=>g.current,[g]),onInsertJSXDone:f.useCallback(async(e,t,n,a)=>{e&&n&&((0,ei1.xF)(e),_(await (0,esu.xk)(n,e,a,t)))},[]),clientLifecycleId:o}),M=f.useCallback(async()=>{var e;if(r===eln.qy.RUNNING){(0,o2.xi)("first-draft","handleSubmit called while already running");return}if(!N){(0,o2.xi)("first-draft","handleSubmit called without a selected kit");return}A(u);let t=await a({selectedKitOption:N,promptValue:u,submitPrompt:P,shouldContinueStreamRef:g});(null==(e=null==t?void 0:t.result)?void 0:e.nodeId)&&(h.current=t.result.nodeId),s()},[r,N,a,u,P,g,A,s]),F=f.useCallback(()=>{l(),k()},[k,l]),B=(0,f.useCallback)(async(e,t)=>{var n;void 0!==t.prevOption&&e!==t.prevOption&&(0,ecU.hm)({...i,...(0,ecU.zQ)(t.ev),iteration_view_type:eiY.$J.SUCCESS_WITH_ITERATION,interaction:eiY.sd.GALLERY_SELECT,status:eiY.o2.COMPLETED,value:e.modeId||"null"}),(null==(n=t.ev.target)?void 0:n.item)&&(w.current[t.ev.target.index]=t.ev.target.item),await v.current.postTask(()=>{var t,n,a;if(h.current&&((null==(t=E.current)?void 0:t.modeId)??null)!==e.modeId){let t=(0,esu.DP)(e,h.current,b),l=c.get(t),r=null==l?void 0:l.firstDraftData,i=(null==(n=null==r?void 0:r.kit)?void 0:n.type)??null;(0,Z.sx)("First Draft: Multiple Options Selected",{preset_name:e.modeId,clientLifecycleId:o,isLocal:i===ei.AZ4.LOCAL||null,dsKitType:null!==i?i===ei.AZ4.LOCAL?"LOCAL":"LIBRARY":null,kitKey:(null==(a=null==r?void 0:r.kit)?void 0:a.key)??null,file_key:d},{forwardToDatadog:!0,batchRequest:!0}),C(new Set([h.current,...b])),h.current=t,E.current=e}},{})},[i,b,o,c,d]),U=(0,cp.Fk)((e,t)=>{for(let n of t)if(n){let t=e.get(n);if(t)return Object.values(t.explicitVariableModes())[0]??null}},[h.current,...b]);f.useEffect(()=>{if(E.current&&void 0!==U&&E.current.modeId!==U){let e=p.findIndex(e=>e.modeId===U);w.current[e]&&(E.current=p[e],w.current[e].fauxFocus())}},[U,p]);let H=()=>0===p.length?null:f.createElement(eda,{options:p,onSelect:B}),G=D&&(0,y.kc)().cortex_execution_tracing;switch(r){case eln.qy.INITIAL:return f.createElement(eds,{promptValue:u,setPromptValue:m,handleSubmit:M,promptHistory:I,kitOptionDropdownItems:x,selectedKitOption:N,setSelectedKitOption:S,kitsAreLoaded:T,recordingKey:e,aiTrackingContext:i});case eln.qy.RUNNING:return f.createElement(eiQ.F,{recordingKey:n_.Pt(e,"running"),onStop:F,aiTrackingContext:i,secondaryMessage:R.total&&R.loaded?(0,eN.t)("first_draft.x_of_y_images",{loaded:R.loaded,total:R.total}):void 0},(0,eN.tx)("first_draft.running"));case eln.qy.DONE:{let a=n.result;if(O)return f.createElement(ec5,{initialRootGuid:null==(t=a.result)?void 0:t.nodeId});let l=[];return(0,aI.KK)()&&!(0,y.kc)().first_draft_use_gemini&&l.push({type:eiZ.i.MAKE_CHANGES,callback:()=>{ei.XJn.clearFDScene(),L(!0)}}),f.createElement(eiZ.O,{content:(()=>{let e=[];G&&e.push(f.createElement(ecZ,{key:"trace",trace:D}));let t=H();return(t&&e.push(t),0===e.length)?null:f.createElement(fy.Y,{direction:"vertical",spacing:8},e)})(),iterateOptions:l,recordingKey:n_.Pt(e,"iterate"),aiTrackingContext:{...i,iteration_view_type:eiY.$J.SUCCESS_WITH_ITERATION},stayOpen:!0})}case eln.qy.ERROR:{let{error:t}=n;return f.createElement(eiX.E,{error:t,recordingKey:n_.Pt(e,"error"),extra:G?f.createElement(ecZ,{trace:D}):void 0,buttons:[{type:eiX.f.OK,callback:k}],aiTrackingContext:i})}case eln.qy.CANCELLED:return null;default:(0,nm.xb)(r)}}function eds({promptValue:e,setPromptValue:t,handleSubmit:n,promptHistory:a,kitOptionDropdownItems:l,selectedKitOption:r,setSelectedKitOption:i,kitsAreLoaded:o,recordingKey:s,aiTrackingContext:c}){let[d,u]=f.useState(ecj(4)),[m,p]=f.useState(!1),_=(0,f.useCallback)(e=>{(0,ecU.SX)({...c,interaction:eiY.NI.SELECT_KIT,interaction_type:eiY.bp.BUTTON_CLICK});let t=!Eo()(e,r);p(t),t&&u(ecj(4,e)),i(e)},[c,r,i]),g=(0,f.useCallback)(e=>{(0,ecU.SX)({...c,...(0,ecU.Q0)(e),interaction:eiY.NI.GENERATE}),n()},[c,n]);return f.createElement("div",{className:a8.cx.p8.borderBox.$,"data-testid":"readyForPromptView"},f.createElement(ecG.X,{value:e,onChange:t,suggestion:d[0].prompt,suggestionPills:d.slice(1),promptHistory:a,recordingKey:n_.Pt(s,"generate"),featureNameForInstrumentation:"first_draft",refocusToInput:m}),f.createElement(er9.B,{fullWidth:!0,justify:"space-between"},f.createElement(es8,{recordingKey:s,items:l,kitsAreLoaded:o,selectedKitOption:r,setSelectedKitOption:_}),f.createElement(ecH.r,{shortcuts:[{key:b.Uz.ENTER,modifier:[b.xH.META]}],onAction:g,recordingKey:n_.Pt(s,"generate"),disabled:0===e.length},(0,eN.tx)("first_draft.generate"))))}var edc=n(601902),edd=n(180163),edu=n(119081);let edm=[{callback:nf.lQ,action:elt.JT.TRANSLATE_TEXT,flags:edp(["edit","design"]),featureFlags:["qa_v2","qa_text_features"],tags:[eir.$.AI],quickAction:{beforeModuleOpen:()=>{(0,eln.B3)(elt.JT.TRANSLATE_TEXT)},alwaysEnabled:!0,module:{name:ela.S.TRANSLATE,module:f.createElement(function(){let e=[{key:"language",name:(0,eN.t)("ai_text_tools.translate.language"),allowFreeform:!1}],t=[{name:"Arabic",label:(0,eN.t)("ai_text_tools.translate.language.arabic")},{name:"Chinese (Simplified)",label:(0,eN.t)("ai_text_tools.translate.language.chinese_simplified")},{name:"Chinese (Traditional)",label:(0,eN.t)("ai_text_tools.translate.language.chinese_traditional")},{name:"Dutch",label:(0,eN.t)("ai_text_tools.translate.language.dutch")},{name:"English (United Kingdom)",label:(0,eN.t)("ai_text_tools.translate.language.english_uk")},{name:"English (United States)",label:(0,eN.t)("ai_text_tools.translate.language.english_us")},{name:"Tagalog",label:(0,eN.t)("ai_text_tools.translate.language.tagalog")},{name:"French",label:(0,eN.t)("ai_text_tools.translate.language.french")},{name:"German",label:(0,eN.t)("ai_text_tools.translate.language.german")},{name:"Hindi",label:(0,eN.t)("ai_text_tools.translate.language.hindi")},{name:"Indonesian",label:(0,eN.t)("ai_text_tools.translate.language.indonesian")},{name:"Italian",label:(0,eN.t)("ai_text_tools.translate.language.italian")},{name:"Japanese",label:(0,eN.t)("ai_text_tools.translate.language.japanese")},{name:"Korean",label:(0,eN.t)("ai_text_tools.translate.language.korean")},{name:"Malay",label:(0,eN.t)("ai_text_tools.translate.language.malay")},{name:"Polish",label:(0,eN.t)("ai_text_tools.translate.language.polish")},{name:"Portuguese (Brazil)",label:(0,eN.t)("ai_text_tools.translate.language.portuguese_brazil")},{name:"Portuguese (Portugal)",label:(0,eN.t)("ai_text_tools.translate.language.portuguese_portugal")},{name:"Russian",label:(0,eN.t)("ai_text_tools.translate.language.russian")},{name:"Spanish (Latin America)",label:(0,eN.t)("ai_text_tools.translate.language.spanish_latin_america")},{name:"Spanish (Spain)",label:(0,eN.t)("ai_text_tools.translate.language.spanish_spain")},{name:"Swedish",label:(0,eN.t)("ai_text_tools.translate.language.swedish")},{name:"Tamil",label:(0,eN.t)("ai_text_tools.translate.language.tamil")},{name:"Thai",label:(0,eN.t)("ai_text_tools.translate.language.thai")},{name:"Turkish",label:(0,eN.t)("ai_text_tools.translate.language.turkish")},{name:"Ukrainian",label:(0,eN.t)("ai_text_tools.translate.language.ukrainian")},{name:"Urdu",label:(0,eN.t)("ai_text_tools.translate.language.urdu")},{name:"Vietnamese",label:(0,eN.t)("ai_text_tools.translate.language.vietnamese")}],n=e=>e&&"parameters"===e.command&&e.parameters?{language:e.parameters.language.name}:null,a=(0,eN.t)("ai_text_tools.translate.running"),l=f.useRef(null),{onRun:r,resetText:i,cancel:o,longRunningAction:s,lastRun:c}=(0,ei$.Hd)({makeCortexRequest:({texts:e,parameters:t,authInfo:n})=>yg.Ay.shared.adjustText({texts:e,action:{type:"TRANSLATE",language:t.language},jsonMode:e.length>1},n),featureType:elt.JT.TRANSLATE_TEXT}),{state:d,aiTrackingContext:u,tasks:m}=s,{close:p}=(0,az.cq)(),g=(0,_.d4)(e=>(0,tl.Yh)(e.mirror.appModel,elt.JT.TRANSLATE_TEXT)),[h,E]=f.useState(g),v=m.length,y=m.filter(e=>e.state===eln.z8.FAILED).length;switch(d){case eln.qy.RUNNING:return f.createElement(eiQ.F,{onCancel:()=>{o(),p()},aiTrackingContext:u},a);case eln.qy.INITIAL:if(!h||!g)return f.createElement(eiq.A,{action:elt.JT.TRANSLATE_TEXT,actionLabel:(0,eN.tx)("fullscreen_actions.quick_actions.translate-text"),actionIcon:f.createElement(eiP,null),onPerform:()=>E(!0),getCustomDisabledTextFromSelectedNodes:e=>(0,ei$.bu)(e,{}),aiTrackingContext:u,instructionAction:{type:"learn_more",url:elt.Xi}},(0,eN.tx)("ai_text_tools.selection_instruction"));return f.createElement(ei0.ch,{parameters:e,actionLabel:!1,displayName:"",parameterOnly:!0,terminate:nf.lQ,hideOnRun:!1,handler:{triggerParameterInputEvent:({currentSearchQuery:e,onSuggestions:n})=>{let a=e.toLowerCase();n({type:"SUGGESTIONS",suggestions:t.filter(e=>e.name.toLowerCase().includes(a)).map(e=>({name:e.label}))})},triggerRunEvent:e=>{let t=n(e);t&&(r(t),l.current=t)}},triggeredFrom:"quick-actions"});case eln.qy.ERROR:let b;let{error:C}=s,w=null,T=[{type:eiX.f.TRY_AGAIN,callback:()=>{if(l.current)r(l.current);else throw new ei$.ay("Last parameters is null")}}];return C instanceof ei$.Vz&&(b=(0,eN.tx)("ai_text_tools.content_length_exceeded"),T=[]),C instanceof ei$.Jd&&(b=(0,eN.tx)("ai_text_tools.missing_fonts"),T=[]),v>0&&y>0&&y<v&&(w=(0,eN.tx)("ai_text_tools.translate.couldnt_count",{failed:y,total:v})),f.createElement(eiX.E,{buttons:T,error:s.error,messageOverrides:{[eiJ.BQ.CONTENT_LENGTH_LIMIT]:(0,eN.tx)("ai_text_tools.content_length_exceeded")},aiTrackingContext:u,customMessage:b,secondaryMessage:w});case eln.qy.DONE:return f.createElement(eiZ.O,{iterateOptions:[{type:eiZ.i.UNDO,callback:()=>{i(),p()}}],recordingKey:"translateText",aiTrackingContext:{...u,iteration_view_type:eiY.$J.DEFAULT_SUCCESS},targets:c?c.targets.map(e=>e.node.guid):[]});case eln.qy.CANCELLED:return null;default:(0,nm.xb)(d)}},null)}},iconType:f.createElement(eiP,null),searchSynonyms:["change language"]},{callback:nf.lQ,action:elt.JT.REWRITE_TEXT,flags:edp(["edit","design"]),featureFlags:["qa_v2","qa_text_features"],quickAction:{beforeModuleOpen:()=>{(0,eln.B3)(elt.JT.REWRITE_TEXT)},module:{name:ela.S.REWRITE,module:f.createElement(eij.w,null)},alwaysEnabled:!0},iconType:f.createElement(eiD.T,null),tags:[eir.$.AI],searchSynonyms:["revise this","modify this","adjust tone"]},{callback:()=>(0,ea7.mD)(ET.D.dispatch,{source:"quick_actions",toggle:!0}),action:elt.JT.SLIDES_REWRITE_TEXT,flags:edp(),featureFlags:["qa_v2","figjam_ai_piper_text_manipulation","slides_10_launch_tone_dial_update"],iconType:f.createElement(ym.V,null),tags:[eir.$.AI],searchSynonyms:["adjust tone","tone dial","professional","casual","concise","expanded"]},{callback:nf.lQ,action:elt.JT.SHORTEN_TEXT,flags:edp(["edit","design"]),featureFlags:["qa_v2","qa_text_features"],quickAction:{module:{name:ela.S.SHORTEN,module:f.createElement(function(){let[e,t]=f.useState(!1),{longRunningAction:n,lastParameters:a,onRun:l,cancel:r,lastRun:i}=(0,ei$.Hd)({makeCortexRequest:({texts:e,authInfo:t})=>yg.Ay.shared.adjustText({texts:e,action:{type:"SHORTEN"},jsonMode:e.length>1},t),featureType:elt.JT.SHORTEN_TEXT}),{state:o,aiTrackingContext:s,tasks:c}=n,d=(0,_.d4)(e=>(0,tl.Yh)(e.mirror.appModel,elt.JT.SHORTEN_TEXT)),[u]=f.useState(d);(0,f.useEffect)(()=>{!e&&u&&(t(!0),l(null))},[e,l,d,u]);let m=c.length,p=c.filter(e=>e.state===eln.z8.FAILED).length;switch(o){case eln.qy.INITIAL:return f.createElement(eiq.A,{action:elt.JT.SHORTEN_TEXT,actionIcon:f.createElement(eiR,null),actionLabel:(0,eN.tx)("fullscreen_actions.quick_actions.shorten-text"),onPerform:()=>{t(!0),l(null)},aiTrackingContext:s,getCustomDisabledTextFromSelectedNodes:e=>(0,ei$.bu)(e,{onlyAllowSingular:!0,instruction:(0,eN.tx)("ai_text_tools.select_text_singular")}),instructionAction:{type:"learn_more",url:elt.sH}},(0,eN.tx)("ai_text_tools.select_text_singular"));case eln.qy.RUNNING:return f.createElement(eiQ.F,{onCancel:()=>{r(),close()},aiTrackingContext:s},(0,eN.tx)("ai_text_tools.shorten.running"));case eln.qy.ERROR:let g;let{error:h}=n,E=[{type:eiX.f.TRY_AGAIN,callback:()=>l(a)}],v=null;return h instanceof ei$.Vz&&(g=(0,eN.tx)("ai_text_tools.content_length_exceeded"),E=[]),h instanceof ei$.Jd&&(g=(0,eN.tx)("ai_text_tools.missing_fonts"),E=[]),m>0&&p>0&&p<m&&(v=(0,eN.tx)("ai_text_tools.shorten.couldnt_count",{failed:p,total:m})),f.createElement(eiX.E,{buttons:E,error:n.error,messageOverrides:{[eiJ.BQ.CONTENT_LENGTH_LIMIT]:(0,eN.tx)("ai_text_tools.content_length_exceeded")},aiTrackingContext:s,customMessage:g,secondaryMessage:v});case eln.qy.DONE:return f.createElement(eiZ.O,{recordingKey:"shortenText",iterateOptions:[{type:eiZ.i.TRY_AGAIN,callback:()=>{l(a)}}],aiTrackingContext:{...s,iteration_view_type:eiY.$J.SUCCESS_WITH_ITERATION},targets:i?i.targets.map(e=>e.node.guid):void 0});case eln.qy.CANCELLED:return null;default:(0,nm.xb)(o)}},null)},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,eln.B3)(elt.JT.SHORTEN_TEXT)}},iconType:f.createElement(eiR,null),tags:[eir.$.AI],searchSynonyms:["make concise","condense","reduce","abbreviate","shorter"]},{callback:nf.lQ,action:elt.JT.FIRST_DRAFT,flags:["edit","design"],featureFlags:["qa_v2"],quickAction:{module:{module:f.createElement(function(){let e=(0,af.tS)(),{aiTrackingContext:t}=(0,eln.wj)(elt.JT.FIRST_DRAFT),n=t.clientLifecycleId,a=f.useCallback(()=>{(0,Z.sx)("First Draft: Error",{file_key:e,clientLifecycleId:n,view:"firstDraftGenerate"},{forwardToDatadog:!0,sendAsBeacon:!0})},[n,e]);return f.createElement(l7.tH,{boundaryKey:"FirstDraft",fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{clientLifecycleId:n,area:o5.e.FEEDBACK},onError:a},f.createElement(edo,{recordingKey:"firstDraftView"}))},null),name:ela.S.FIRST_DRAFT},beforeModuleOpen:()=>{(0,eln.B3)(elt.JT.FIRST_DRAFT)}},iconType:f.createElement(eiM,null),tags:[eir.$.AI],searchSynonyms:["first draft","generate design","create design","let's design"]},{callback:nf.lQ,action:elt.JT.FIRST_DRAFT_MAKE_CHANGES,flags:["edit","design"],featureFlags:["qa_v2","first_draft_native","first_draft_make_changes","first_draft_make_changes_reopen"],notFeatureFlags:["first_draft_use_gemini"],quickAction:{module:{module:f.createElement(function(){let e=ecB(),[t]=f.useState(e);return f.createElement(ec5,{initialRootGuid:t||null})},null),name:ela.S.FIRST_DRAFT_MAKE_CHANGES}},iconType:f.createElement(eiM,null),tags:[eir.$.AI],searchSynonyms:["make changes","adjust design","modify design","edit design"]},{callback:nf.lQ,action:elt.JT.FIRST_DRAFT_LINTING,flags:["edit","design"],featureFlags:["qa_v2","first_draft_native","first_draft_publish_ux"],quickAction:{module:{module:f.createElement(ect.S,null),name:ela.S.FIRST_DRAFT_LINT}},tags:[eir.$.AI]},{callback:nf.lQ,action:elt.JT.FIRST_DRAFT_DEBUG,flags:["edit","design"],featureFlags:["qa_v2","first_draft_native","first_draft_debug"],quickAction:{module:{module:f.createElement(function(){let{kitsAreLoaded:e,kitOptionDropdownItems:t,selectedKitOption:n,setSelectedKitOption:a}=es7(!0),l=f.useRef((0,ez.g)()).current,r=(null==n?void 0:n.type)==="KIT";return f.createElement("div",{className:a8.cx.p8.borderBox.$},f.createElement(es9,{selectedKitOption:n,clientLifecycleId:l}),f.createElement(esX,{selectedKitOption:n,clientLifecycleId:l}),r&&f.createElement(es5,{selectedKit:n.kit}),f.createElement(er9.B,{fullWidth:!0,justify:"space-between"},f.createElement(es8,{items:t,kitsAreLoaded:e,selectedKitOption:n,setSelectedKitOption:a})))},null),name:ela.S.FIRST_DRAFT_DEBUG}},tags:[eir.$.AI]},{name:elt.JT.FIND_INSPIRATION,action:elt.JT.FIND_INSPIRATION,args:{},tags:[eir.$.AI],flags:edp(["design"]),featureFlags:["qa_v2","asset_suggestions"],callback:nf.lQ,quickAction:{module:{module:f.createElement(gt.WS,null),name:ela.S.VISUAL_SEARCH},beforeModuleOpen:()=>(0,gt.jp)(ee7.G4.ACTIONS_LIST)},iconType:f.createElement(eiF.T,null),searchSynonyms:["visual search","image search","selection search","visual lookup","find matching"]},{action:elt.JT.REMOVE_BACKGROUND,featureFlags:["qa_v2","eai_image_tools"],tags:[eir.$.AI],flags:edp(["edit","design"]),iconType:f.createElement(eiB.$,null),quickAction:{module:{module:f.createElement(edc.A,null),name:ela.S.BACKGROUND_REMOVE_TOAST},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,eln.B3)(elt.JT.REMOVE_BACKGROUND),(0,tl.Yh)(ET.D.getState().mirror.appModel,elt.JT.REMOVE_BACKGROUND)&&(0,eln.Ag)(elt.JT.REMOVE_BACKGROUND,eiK.JY,{source:"quick-actions"})}},callback:nf.lQ,searchSynonyms:["clean up image","clean up picture","make transparent","delete background","erase background","eliminate background","isolate subject"]},{callback:nf.lQ,action:elt.JT.AUTO_RENAME_LAYERS,featureFlags:["qa_v2","eai_auto_rename_layers"],tags:[eir.$.AI],flags:["edit","design"],iconType:f.createElement(eiU._,null),quickAction:{module:{module:f.createElement(elr.A,{source:"quick-actions"}),name:ela.S.RENAME_LAYERS_TOAST},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,eln.B3)(elt.JT.AUTO_RENAME_LAYERS),(0,tl.Yh)(ET.D.getState().mirror.appModel,elt.JT.AUTO_RENAME_LAYERS)&&(0,eln.Ag)(elt.JT.AUTO_RENAME_LAYERS,M8.Ay,{source:"quick_actions",overwriteNames:!1})}},searchSynonyms:["rename all layers","name layers"]},{callback:nf.lQ,action:elt.JT.GENERATE_IMAGE,featureFlags:["qa_v2","eai_generate_image"],tags:[eir.$.AI],flags:edp(["edit","design"]),iconType:f.createElement(function(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.015 4.44 16.7 5.7l-1.26.315c-.505.126-.505.844 0 .97l1.26.315.315 1.26c.126.505.844.505.97 0L18.3 7.3l1.26-.315c.505-.126.505-.844 0-.97L18.3 5.7l-.315-1.26c-.126-.505-.844-.505-.97 0ZM6 7.5A1.5 1.5 0 0 1 7.5 6h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 0-.5.5v6.293l2.646-2.646a.5.5 0 0 1 .708 0L16.207 17h.293a.5.5 0 0 0 .5-.5v-6a.5.5 0 1 1 1 0v6a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 6 16.5v-9Zm1 9v-1.293l3-3L14.793 17H7.5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"}))},null),quickAction:{module:{module:f.createElement(edd.A,null),name:ela.S.GENERATE_IMAGE},beforeModuleOpen:()=>{(0,eln.B3)(elt.JT.GENERATE_IMAGE)}},searchSynonyms:["generate image","make a picture","generate graphic","generate picture","generate illustration","create image"]},{action:elt.JT.MAGIC_LINK,flags:["edit","design"],featureFlags:["qa_v2","prototype_ai_magic_link"],tags:[eir.$.AI],quickAction:{module:{module:f.createElement(edu.p,null),name:ela.S.MAGIC_LINK},alwaysEnabled:!0,beforeModuleOpen:()=>{ET.D.dispatch((0,YP.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"quick_actions"}})),(0,eln.B3)(elt.JT.MAGIC_LINK),(0,tl.Yh)(ET.D.getState().mirror.appModel,elt.JT.MAGIC_LINK)&&(0,eln.Ag)(elt.JT.MAGIC_LINK,eiW.eW,{})}},iconType:f.createElement(eiH.B,null),searchSynonyms:["magic link","add prototype links","add prototype connections","connect prototype","add interactions"]},{action:elt.JT.CONTENT_FILL,featureFlags:["qa_v2","ce_auto_content"],tags:[eir.$.AI],flags:["edit","design"],iconType:f.createElement(eiG.c,null),quickAction:{module:{module:f.createElement(eiz.X,null),name:ela.S.REGENERATE_TEXT_TOAST},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,eln.B3)(elt.JT.CONTENT_FILL),(0,tl.Yh)(ET.D.getState().mirror.appModel,elt.JT.CONTENT_FILL)&&(0,eln.Ag)(elt.JT.CONTENT_FILL,eiV.c,{guids:[],showToasts:!1,numExampleRows:1,source:"ACTIONS_MENU"})}},searchSynonyms:["fill content","content fill","lorem ipsum","rewrite placeholder text","replace duplicates","rewrite duplicates"]}];function edp(e=[]){return(0,y.kc)().piper_actions?[...e,"slides"]:e}function edf(){let e=(0,aq.vh)(),t=(0,aq.LC)();return(0,f.useMemo)(()=>edm.filter(n=>{for(let e of n.featureFlags||[])if(!(0,y.kc)()[e])return!1;return n.action===elt.JT.FIND_INSPIRATION?t:e}),[e,t])}var ed_=n(266173),edg=n(560776);function edh({title:e,subTitle:t,icon:n,onClose:a,dataTestId:l}){return f.createElement("div",{"data-testid":l,className:a8.cx.colorBgBrandTertiary.p8.bRadius8.$},f.createElement("div",{className:a8.cx.flex.gap8.$},n,f.createElement("div",{className:a8.cx.flex.flexColumn.flexGrow1.$},f.createElement("span",{className:"banner--title--gNQoq"},e),f.createElement("span",{className:"banner--subtitle--8K4pM"},t)),a?f.createElement(vJ.K,{onClick:a,"data-testid":"banner-close-icon","aria-label":(0,eN.t)("qa.dismiss")},f.createElement(lF.A,{style:{"--color-icon":"var(--color-icon-secondary)"}})):null))}function edE(){let e;let{reason:t,dismissKey:n}=function(){let e=(0,aq.nu)().sort((e,t)=>edv(e)-edv(t)),t={seen_no_ai_org_disabled:(0,eT.f)("seen_no_ai_org_disabled"),seen_no_ai_team_or_org_user:(0,eT.f)("seen_no_ai_team_or_org_user"),seen_no_ai_rolling_out:(0,eT.f)("seen_no_ai_rolling_out")};return(0,f.useMemo)(()=>{for(let n of e){let e=function(e){switch(e){case aq.ze.ROLLING_OUT:return"seen_no_ai_rolling_out";case aq.ze.TEAM_OR_ORG_DISABLED:return"seen_no_ai_org_disabled";case aq.ze.NON_PAID_SEAT:case aq.ze.NO_ORG_OR_TEAM_USER:case aq.ze.ORG_GUEST:return"seen_no_ai_team_or_org_user";case aq.ze.PERSONAL_DRAFT:case null:return null;default:(0,nm.xb)(e)}}(n);if(!e)return{reason:n};if(!t[e])return{reason:n,dismissKey:e}}return{reason:null}},[e,t])}(),a=(0,_.wA)(),l=(0,fF.yy)(),r=(0,S.md)(af.Hu),i=(0,eN.t)("qa.no_ai.title");switch(t){case null:return null;case aq.ze.PERSONAL_DRAFT:i=(0,eN.t)("qa.no_ai.title.personal_draft"),e=(0,eN.t)("qa.no_ai.subtitle.personal_draft");break;case aq.ze.TEAM_OR_ORG_DISABLED:i=(0,eN.t)("qa.no_ai.title.org_disabled"),e=(0,eN.t)("qa.no_ai.subtitle.org_disabled");break;case aq.ze.ROLLING_OUT:i=(0,eN.t)("qa.no_ai.title.rolling_out"),e=(0,eN.t)("qa.no_ai.subtitle.rolling_out");break;case aq.ze.NON_PAID_SEAT:case aq.ze.NO_ORG_OR_TEAM_USER:case aq.ze.ORG_GUEST:i=(0,eN.t)("qa.no_ai.title.not_available_here"),e=(0,eN.t)("qa.no_ai.subtitle.team_or_org_user_no_access",{orgOrTeamName:(null==l?void 0:l.name)||(null==r?void 0:r.name)||""});break;default:(0,nm.xb)(t)}return f.createElement("div",{className:a8.cx.mx8.mb8.$},f.createElement(edh,{title:i,subTitle:e,icon:f.createElement(J$.C,null),dataTestId:"no-ai-banner",onClose:n?()=>a(j.b({[n]:!0})):void 0}))}function edv(e){switch(e){case aq.ze.ROLLING_OUT:return 0;case aq.ze.PERSONAL_DRAFT:return 1;case aq.ze.NON_PAID_SEAT:case aq.ze.NO_ORG_OR_TEAM_USER:case aq.ze.ORG_GUEST:return 2;case aq.ze.TEAM_OR_ORG_DISABLED:return 3;case null:return 1e3;default:(0,nm.xb)(e)}}var edy=n(111431);let edb=e=>(0,etT.Zj)(e)&&!e.hideCheckForQuickCommand,edC=()=>{};function edw(e){var t;return null==(t=e.tags)?void 0:t.includes(eir.$.AI)}function edT({item:e,searchQuery:t,createCommonMetrics:n,searchIndex:a}){let{push:l}=(0,az.cq)(),r=(0,e_.Be)(),i=(0,e_.cW)(),{addFrecencyUsage:o}=(0,erI.fJ)(),s=(0,_.d4)(e=>e.recentlyUsedQuickCommands),c=(0,e_.D6)({searchLocalPlugins:!1,searchSavedPlugins:!0,searchPublishedPlugins:!0,searchRecentPlugins:!0,searchLocalWidgets:!1,searchSavedWidgets:!0,searchPublishedWidgets:!0,searchRecentWidgets:!0}),d=(0,etT.Dz)(e),u=(0,_.d4)(e=>e.mirror.appModel),m=(0,_.wA)(),{close:p}=(0,az.cq)(),g=(0,aN.J2)((0,tM.UK)().showQuickCommandRankDebug),h=(0,eb.p8)("keyboardShortcuts"),E=(0,ecV.uf)(),v=(0,f.useCallback)(()=>{p()},[p]),C=(0,q.A)(v,300);(0,f.useEffect)(()=>()=>{C.cancel()},[C]);let w=(0,f.useCallback)((e,t)=>{let n=(0,etw.f)(e),l=s.filter(e=>e.displayName!==n&&!!a.getItem(u,e.displayName));l.length>=3&&l.pop(),l.unshift({displayName:n,runPluginArgs:t}),m(K.PQ(l))},[u,m,s,a]),T=(0,f.useCallback)((e,a)=>{var r,i;if(C.isPending()&&C.cancel(),e.disabled)return;function s(){(0,erR.kp)(n()),w(e,e.runPluginArgs),o(e,t)}let c=!!e.itemParameterArgs;if(!(c||"enter"===a))return;let d=null;if(e.quickAction){let t={};if(("find-assets-matching"===e.name||"find-community-matching"===e.name)&&(t.shouldResetSearchQuery=!1),e.quickAction.beforeModuleOpen){let t=(0,ie._V)();e.quickAction.beforeModuleOpen(t)}l(e.quickAction.module,t),s();return}if(c)switch(E(),a){case"enter":if(e.runPluginArgs&&!t)d=async()=>{await TN.R.instance.enqueue({mode:"run-forever",runPluginArgs:e.runPluginArgs})};else if(e.parametersRequired){let t=e.itemParameterArgs;l({name:ela.S.PLUGIN_PARAMETER_ENTRY,module:f.createElement(ed_.r,{onExitParameterEntry:nf.lQ,triggeredFrom:"quick-actions",parameters:t.parameters,displayName:t.displayName,parameterOnly:t.parameterOnly,pluginId:t.pluginId,pluginLocalFileId:t.pluginLocalFileId,command:t.command,initialParameterValues:null==(r=e.runPluginArgs)?void 0:r.parameterValues,recentlyUsedCommandName:e?(0,etw.f)(e):void 0})}),s();return}break;case"tab":if(e.itemParameterArgs){let t=e.itemParameterArgs;l({name:ela.S.PLUGIN_PARAMETER_ENTRY,module:f.createElement(ed_.r,{onExitParameterEntry:nf.lQ,triggeredFrom:"quick-actions",parameters:t.parameters,displayName:t.displayName,parameterOnly:t.parameterOnly,pluginId:t.pluginId,pluginLocalFileId:t.pluginLocalFileId,command:t.command,initialParameterValues:null==(i=e.runPluginArgs)?void 0:i.parameterValues,recentlyUsedCommandName:e?(0,etw.f)(e):void 0})}),s();return}break;default:(0,nm.xb)(a)}e.callback&&!d?d=async()=>{e.callback&&await e.callback((0,etT.Dz)(e),e.args,m)}:e.action&&(d=async()=>{if(!e.action)return;let t=edC();if(t)return await t();aC.VU.get(e.action,"quick-actions",e.args)()}),s(),edb(e)&&!(0,aR.PN)()?C():e.keepMenuOpen||v(),d?d().then(E).catch(t=>{(0,o2.$D)(o5.e.EXTENSIBILITY,t,{extra:{item:e}})}):(0,o2.$D)(o5.e.EXTENSIBILITY,Error("No valid action triggered from quick actions"),{extra:{item:e}})},[o,w,v,C,n,m,l,t,E]),x=e.shortcutText||(0,tl.c1)(h,d),N="plugins-menu-item"===e.name&&!!e.itemParameterArgs&&e.itemParameterArgs.parameters.length>0,S=e.args&&e.menuActionType&&"run-local-plugin"===e.menuActionType,k=(()=>{if(e.itemParameterArgs&&e.runPluginArgs&&!t)return f.createElement(erD,{runPluginArgs:e.runPluginArgs,itemParameterArgs:e.itemParameterArgs,pluginId:e.pluginId,allSavedPlugins:r.plugins,publishedPlugins:i});if(e.itemPath){let t=e.itemPath;return f.createElement(erP,{itemPath:t})}return e.displayNode?e.displayNode:(0,etw.f)(e)})(),I=edb(e)?(0,etT.WJ)(u,e):void 0,A=e.name||e.action;return f.createElement(edg.B.Item,{key:A,primaryAction:{text:"Perform",shortcuts:[{key:b.Uz.ENTER},{key:b.Uz.TAB}],onAction:({shortcut:t})=>T(e,(null==t?void 0:t.key)===b.Uz.TAB?"tab":"enter")},actionLabel:!1,recordingKey:A,scrollMargin:"32px 0 16px 0"},f.createElement(eii._,{checked:I,disabled:e.disabled,label:k,icon:function(e){if("plugins-menu-item"===e.name){let t;return(e.pluginId&&(t=c(e.pluginId)),t&&!(0,TS.ZQ)(t))?f.createElement(Tn.V,{className:a8.cx.colorIcon.w20.h20.m2.bRadius4.$,plugin:t,role:"presentation"}):f.createElement(a2.B,{className:a8.cx.colorIcon.w20.h20.bRadius4.$,svg:edy.A,ariaLabel:`${e.name} icon`,autosize:!0})}if(e.iconType&&"string"==typeof e.iconType){var t;return"external_link"===(t=e.iconType)?f.createElement(a2.B,{svg:erH.A,className:a8.cx.colorIcon.$}):"import"===t?f.createElement(eia.R,null):"plus"===t?f.createElement(nu.e,null):"widget"===t?f.createElement(eil,null):void 0}if(e.iconType&&"string"!=typeof e.iconType)return e.iconType}(e),badge:S?f.createElement(ell.E,null,(0,eN.tx)("fullscreen_actions.development")):g?(()=>{let n="";if(e.searchSynonyms&&(n+=`Synonyms: ${e.searchSynonyms.join(", ")}`),!(0,aI.h8)())return null;let{details:a,score:l}=(0,erA.ou)((0,erI.x0)()).debugData(t,(0,etI._)(e).searchItem),r=`Score:${l.toFixed(2)}`;return f.createElement("div",{className:a8.cx.ml8.colorTextSecondary.noWrap.$,"data-tooltip":[a,n].filter(Boolean).join("\n"),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip-max-width":300},r)})():e.isRepairCommand&&(0,y.kc)().internal_only_debug_tools?f.createElement(ell.E,null,"REPAIR"):edw(e)&&e.disabled?f.createElement("div",{"data-tooltip":(0,eN.t)("qa.unavailable"),"data-tooltip-type":nx.Ib.TEXT,style:{"--color-icon":"var(--color-icon-disabled)"}},f.createElement(KS.b,null)):void 0,hoverBadges:(()=>{if(edw(e))return[f.createElement(yp.W,{key:"ai"})]})(),keyboardShortcut:x?f.createElement(nw.S,{shortcut:x}):N?f.createElement(f.Fragment,null,f.createElement("div",{className:a8.cx.colorBgTertiary.bRadius5.font11.h16.fontMedium.flex.itemsCenter.px4.mr8.$},(0,eN.tx)("whiteboard.ai_modal.hint_tab")),f.createElement(a2.B,{svg:erU.A,className:a8.cx.colorIcon.$})):void 0,dataTestId:A}))}function edx({setActiveTab:e}){let t=(0,erO.Ev)(),n=(0,S.md)(aj.Lk),a=(0,S.md)(aj.dd),l=(0,_.d4)(erk.l),r=(0,S.md)(aj.Rt),i=(0,f.useRef)(r),o=(0,S.md)(aj.Q8),s=(0,f.useDeferredValue)(o);(0,f.useEffect)(()=>{i.current=r},[r]);let c=function(){let e=(0,etN.uj)(),t=edf(),n=function(){let e=(0,_.d4)(e=>e.mirror.appModel.isReadOnly),t=(0,etN.c4)(),n=(0,f.useMemo)(()=>(0,etx.M)({isReadOnly:e,extensionMenuProps:t,includeDisabled:!0}),[e,t]),{loaded:a,extensions:l}=(0,S.md)(aj.P_),r=(0,e_.JI)(),i=(0,f.useMemo)(()=>(0,y.kc)().aug_exts_all_tab&&a&&r?l.map(e=>(function(e,t){let{extension:n,canRun:a}=e,l=[];(0,TS.k0)(n)?l.push("Widgets"):l.push("Plugins"),(0,TS.ZQ)(n)&&l.push("Development"),l.push(n.name);let r={name:"plugins-menu-item",extensionSearchString:l.join(" "),itemPath:[n.name],callback:function(e,t){if((0,TS.k0)(t))return()=>(0,eig.j)({pluginID:t.plugin_id,widgetName:t.name,pluginVersionID:(0,TS.ZQ)(t)?"":t.id,triggeredFrom:"quick-actions"});if((0,TS.ZQ)(t)){let n=(0,elT.hN)(t);return()=>(0,ei_.Im)(e,"quick-actions",n)}{let n=(0,elT.H0)(t);return()=>(0,ei_.Im)(e,"quick-actions",n)}}(t,n),pluginId:n.plugin_id,pluginLocalFileId:(0,TS.ZQ)(n)?n.localFileId:void 0,menuActionType:(0,TS.ZQ)(n)?"run-local-plugin":"run-installed-plugin",parametersRequired:n.manifest.parameterOnly,disabled:!a};return n.manifest.parameters&&(r.itemParameterArgs={parameters:n.manifest.parameters,displayName:n.manifest.name,pluginId:n.plugin_id,parameterOnly:n.manifest.parameterOnly}),r})(e,t)):[],[a,l,t,r]);return(0,y.kc)().aug_exts_all_tab?i:n}();return(0,f.useMemo)(()=>[...e,...n,{name:"wand-menu",callback:nf.lQ,children:t}],[e,t,n])}(),d=eio(),u=eiL(d,c),m=function(e,t,n,a){let l=(0,_.d4)(e=>e.recentlyUsedQuickCommands),r=(0,C7.WI)(l.map(n=>{let a=t.getItem(e,n.displayName);return a&&n.runPluginArgs&&(a.runPluginArgs=n.runPluginArgs),a})),{items:i}=function(e,t,n){let a=(0,aq.vh)(),l=(0,v.ZC)(a),r=function(e,t,n){let a=eiv(),l=t.map(e),r=function(){var e;let t=(0,ag.ks)(),n=null==(e=(0,af.q5)())?void 0:e.canEdit,a=(0,aq.vh)();return t?"DEV":!1===n?"DESIGN_VIEWER":n&&a?"DESIGN_EDITOR_AI":n&&!a?"DESIGN_EDITOR_NO_AI":"NONE"}(),i=function(e,t){let n=function(){let e=(0,_.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel}),t=eiv(),{frecencyByAction:n,frecencyByQuery:a}=(0,erI.fJ)(),l=(0,lh.Tv)(),r=(0,xP.VW)();return(0,f.useCallback)((i,o)=>{if(o)return[];let s=i.map(e),c=[],d=(0,erA.ou)({actions:n,queries:a}),u=1===l.length&&(null==r?void 0:r.type)==="SLIDE";if(0===l.length||u)return[...c=[elt.JT.FIRST_DRAFT,elt.JT.MAGIC_LINK,elt.JT.AUTO_RENAME_LAYERS,elt.JT.FIND_INSPIRATION,elt.JT.CONTENT_FILL,elt.JT.SLIDES_REWRITE_TEXT,elt.JT.REWRITE_TEXT,elt.JT.SHORTEN_TEXT,elt.JT.TRANSLATE_TEXT,elt.JT.GENERATE_IMAGE,elt.JT.REMOVE_BACKGROUND]].map(e=>t(s,e,!0)).filter(e=>!!e).sort((e,t)=>d.sort("",(0,etI._)(e).searchItem,(0,etI._)(t).searchItem));{let l,r;c.push(elt.JT.CONTENT_FILL,elt.JT.TRANSLATE_TEXT,elt.JT.REWRITE_TEXT,elt.JT.SHORTEN_TEXT,elt.JT.SLIDES_REWRITE_TEXT,elt.JT.REMOVE_BACKGROUND,elt.JT.FIRST_DRAFT_MAKE_CHANGES,elt.JT.AUTO_RENAME_LAYERS,elt.JT.MAGIC_LINK,elt.JT.FIND_INSPIRATION,elt.JT.GENERATE_IMAGE,elt.JT.FIRST_DRAFT);let i=[...c].map(e=>t(s,e)).filter(e=>!!e),o=i.sort((e,t)=>d.sort("",(0,etI._)(e).searchItem,(0,etI._)(t).searchItem)),u=Object.values(s).filter(t=>(0,tl.Yh)(e,t.name||t.action||"")&&!i.includes(t)&&!t.searchOnly&&!(t.featureFlags&&t.featureFlags.includes("internal_only_debug_tools"))&&(0,eiN.y)("",(0,eix.n)(t),{actions:n,queries:a})>0).sort((e,t)=>d.sort("",(0,etI._)(e).searchItem,(0,etI._)(t).searchItem));return u.length<4?(l=8-u.length,r=u.length):o.length<4?(l=o.length,r=8-o.length):(l=4,r=4),[...o.slice(0,l),...u.slice(0,r)]}},[e,t,n,a,null==r?void 0:r.type,l.length])}(),[a]=(0,f.useState)(()=>n(e,""));return a}(t,0),o=function(e,t){let n=!eiO();return(0,f.useCallback)(()=>{if(n){let e=[];for(let n of t){if(!n.action||n.disabled)continue;let t=eiS.get(n.action);t&&e.push([n.action,t])}return e}let a=[];for(let n of((0,tl.Yh)(e,elt.JT.FIRST_DRAFT_MAKE_CHANGES)&&a.push([elt.JT.FIRST_DRAFT_MAKE_CHANGES,eih.SUGGESTIONS]),t))n.action&&!n.disabled&&a.push([n.action,eih.SUGGESTIONS]);return a},[e,t,n])}(e,i),s=function(){let e=(0,xP.O1)(),t=(0,eb.p8)("activeCanvasEditModeType");return(0,f.useCallback)(()=>{if(!(null==e?void 0:e.length))return[["canvas-search-replace",eih.SUGGESTIONS],["select-all",eih.SUGGESTIONS],["undo",eih.SUGGESTIONS],["toggle-rulers",eih.COMMON_SETTINGS],["toggle-snapping-to-pixels",eih.COMMON_SETTINGS],["toggle-sidebar",eih.COMMON_SETTINGS],["toggle-ui",eih.COMMON_SETTINGS],["toggle-multiplayer-cursors",eih.COMMON_SETTINGS],["show-nudge-amount-picker",eih.COMMON_SETTINGS],["open-shortcuts",eih.COMMON_SETTINGS],["open-account-settings",eih.COMMON_SETTINGS]];if(1===e.length){let n=e[0],a=[["add-selection-ready-status",eih.SUGGESTIONS],["republish-selected-components",eih.SUGGESTIONS],["publish-changes-to-library",eih.SUGGESTIONS],["toggle-shown-for-selected-nodes",eih.SUGGESTIONS]],l=[["select-matching",eih.SUGGESTIONS],["outline-stroke",eih.SUGGESTIONS],["mask-selection",eih.SUGGESTIONS],["flatten-selection",eih.SUGGESTIONS],["unlock-all",eih.SUGGESTIONS],["convert-to-raster",eih.SUGGESTIONS],["toggle-shown-for-selected-nodes",eih.SUGGESTIONS]];if(t===ei.m1T.VECTOR)return[["flip-horizontal",eih.SUGGESTIONS],["flip-vertical",eih.SUGGESTIONS],["align-horizontal-center",eih.SUGGESTIONS],["align-vertical-center",eih.SUGGESTIONS]];switch(n.type){case"SYMBOL":return a;case"FRAME":if(n.isStateGroup)return a;if(n.isGroup)return l;return[["add-selection-ready-status",eih.SUGGESTIONS],["select-matching",eih.SUGGESTIONS],["stack-selection",eih.SUGGESTIONS],["run-multi-stack-auto-layout",eih.SUGGESTIONS],["copy-properties",eih.SUGGESTIONS],["unlock-all",eih.SUGGESTIONS],["convert-to-raster",eih.SUGGESTIONS],["toggle-shown-for-selected-nodes",eih.SUGGESTIONS],["replace-selected-frame-with-section",eih.SUGGESTIONS]];case"INSTANCE":return[["select-matching",eih.SUGGESTIONS],["detach-instance",eih.SUGGESTIONS],["reset-symbol",eih.SUGGESTIONS],["convert-to-raster",eih.SUGGESTIONS],["toggle-shown-for-selected-nodes",eih.SUGGESTIONS]];case"SLICE":return[["export-selected-exportables",eih.SUGGESTIONS],["convert-to-raster",eih.SUGGESTIONS],["toggle-shown-for-selected-nodes",eih.SUGGESTIONS]];case"WIDGET":return[["select-all-widgets",eih.SUGGESTIONS],["convert-to-raster",eih.SUGGESTIONS],["toggle-shown-for-selected-nodes",eih.SUGGESTIONS]];case"SECTION":return[["add-selection-ready-status",eih.SUGGESTIONS],["select-matching",eih.SUGGESTIONS],["unlock-all",eih.SUGGESTIONS],["toggle-shown-for-selected-nodes",eih.SUGGESTIONS],["replace-selected-section-with-frame",eih.SUGGESTIONS]];case"GROUP":return l;case"ELLIPSE":case"BOOLEAN_OPERATION":case"LINE":case"REGULAR_POLYGON":case"RECTANGLE":case"ROUNDED_RECTANGLE":case"STAR":case"VECTOR":return[["select-matching",eih.SUGGESTIONS],["flip-horizontal",eih.SUGGESTIONS],["mask-selection",eih.SUGGESTIONS],["flatten-selection",eih.SUGGESTIONS],["copy-properties",eih.SUGGESTIONS],["convert-to-raster",eih.SUGGESTIONS],["toggle-shown-for-selected-nodes",eih.SUGGESTIONS]];case"TEXT":return[["select-matching",eih.SUGGESTIONS],["outline-stroke",eih.SUGGESTIONS],["select-all-text",eih.SUGGESTIONS],["flatten-selection",eih.SUGGESTIONS],["convert-to-raster",eih.SUGGESTIONS],["toggle-shown-for-selected-nodes",eih.SUGGESTIONS]]}}return[["select-matching",eih.SUGGESTIONS],["frame-selection",eih.SUGGESTIONS],["create-symbol",eih.SUGGESTIONS],["create-multiple-symbols",eih.SUGGESTIONS],["toggle-locked-for-selected-nodes",eih.SUGGESTIONS],["export-selected-exportables",eih.SUGGESTIONS],["align-horizontal-center",eih.SUGGESTIONS],["align-vertical-center",eih.SUGGESTIONS]]},[e,t])}(),c=(0,f.useCallback)((e,t)=>{let n=a(l,e,!0);if(n)return{...n,category:t}},[a,l]),d=n.map(e=>({...e,category:eih.RECENTS})).filter(t=>void 0===t.action||(0,tl.Yh)(e,t.action)),u=(0,f.useCallback)(e=>{let t=e.map(([e,t])=>c(e,t));return eim()((0,C7.WI)([...d,...t]),eiE)},[d,c]),m=eiO(),p=(0,f.useMemo)(()=>{if(m&&!["DESIGN_EDITOR_NO_AI","DESIGN_EDITOR_AI"].includes(r)){var e;let t=(e=eih.SUGGESTIONS,i.map(t=>({...t,category:e})));return eim()((0,C7.WI)([...d,...t]),eiE)}switch(r){case"DESIGN_EDITOR_AI":return u(o());case"DEV":return u(eik);case"DESIGN_VIEWER":return u(eiI);case"DESIGN_EDITOR_NO_AI":return u(s());case"NONE":return[];default:(0,nm.xb)(r)}},[m,r,i,d,u,o,s]);return{suggestionMode:r,items:p}}(e,t,n),[i,o]=(0,f.useState)(r);return(0,f.useEffect)(()=>{a!==l&&o(r)},[a,l,r]),i}(e,t,r),o=""!==n,s=(0,f.useMemo)(()=>""===n?[]:t.search(e,n).slice(0,25),[e,t,n]),c=function(e,t){let n=(0,Q.my)()===eq.nT.Design,a=(0,af.q5)(),l=(0,eiT.V)(),r=(0,eiw.s)();return(0,f.useMemo)(()=>""!==e?[{name:"find-community-matching",args:{searchQuery:e},callback:()=>{},displayNode:(0,eN.tx)("fullscreen_actions.quick_actions.find-community-matching",{searchQuery:f.createElement(sc.E,{color:"secondary"},e)}),iconType:f.createElement(eis.N,null),quickAction:{module:{module:f.createElement(eiC.B$,{initialTab:eib.x.COMMUNITY}),name:ela.S.ASSETS_TAB_DETAIL_VIEW}},disabled:!l||!(0,aI.Xk)()},{name:"find-assets-matching",args:{searchQuery:e},callback:()=>{},displayNode:l&&(0,aI.Xk)()?(0,eN.tx)("fullscreen_actions.quick_actions.find-components-matching",{searchQuery:f.createElement(sc.E,{color:"secondary"},e)}):(0,eN.tx)("fullscreen_actions.quick_actions.find-assets-matching",{searchQuery:f.createElement(sc.E,{color:"secondary"},e)}),iconType:f.createElement(eic.K,null),quickAction:{module:{module:f.createElement(eiC.B$,null),name:ela.S.ASSETS_TAB_DETAIL_VIEW},beforeModuleOpen:e=>{(0,ee4.ES)({type:"input-text",query:e.searchQuery,assetTypeOption:{type:OK.I.ALL},isKnownLibrary:r})}},disabled:!n||!(null==a?void 0:a.canEdit)},{name:"find-extensions-matching",args:{searchQuery:e},displayNode:(0,eN.tx)("fullscreen_actions.quick_actions.find-extensions-matching",{searchQuery:f.createElement(sc.E,{color:"secondary"},e)}),iconType:f.createElement(eid,null),callback:()=>{t.setActiveTab(ee6.J.EXTENSIONS)},keepMenuOpen:!0,disabled:!n}].filter(e=>!e.disabled):[],[e,l,n,null==a?void 0:a.canEdit,r,t])}(n,a);return o?eim()([...s,...c],eiE):i}(d,u,s,{setActiveTab:e}),p=erL(m),g=m.length,h=function(e){let t=eif()(QJ()(e,e=>e.category),(e,t)=>({category:Object.values(eih).find(e=>t===e)||null,items:e})).sort((e,t)=>eiy(e.category)-eiy(t.category)),n=[],a=0;for(let{category:e,items:l}of t)n.push({category:e,items:l,globalIdxOfFirstItem:a}),a+=l.length;return n}(m);(0,f.useEffect)(()=>{n===ee6.J.ALL&&a&&t({quickActionsSessionId:a,quickActionsQueryId:i.current,searchQuery:s,numSearchResults:g,currentSelection:l,module:n,moduleFilters:null,qaVersion:erd.$L,searchQueryResults:p})},[t,n,a,s,g,l,p]);let{createMetrics:E}=(0,erR.Sk)();return f.createElement(f.Fragment,null,f.createElement(edg.B,{primary:!0,resultCount:g},f.createElement(edE,null),h.map(({category:e,items:t,globalIdxOfFirstItem:n})=>null!==e&&t.length>0&&h.length>1?f.createElement(edg.B.Section,{key:e,header:function(e){switch(e){case eih.RECENTS:return(0,eN.t)("qa.category.recents");case eih.DESIGN_TOOLS:return(0,eN.t)("qa.category.design_tools");case eih.RIFFING_AND_WRITING:return(0,eN.t)("qa.category.riffing_and_writing");case eih.IMAGE_EDITING:return(0,eN.t)("qa.category.image_editing");case eih.COLLABORATION_TOOLS:return(0,eN.t)("qa.category.collaboration_tools");case eih.HANDOFF_TOOLS:return(0,eN.t)("qa.category.handoff_tools");case eih.VIEWER_TOOLS:return(0,eN.t)("qa.category.viewer_tools");case eih.SUGGESTIONS:return(0,eN.t)("qa.category.suggestions");case eih.COMMON_SETTINGS:return(0,eN.t)("qa.category.common_settings");default:return(0,nm.xb)(e)}}(e)},t.map((e,t)=>f.createElement(edT,{key:eiE(e),item:e,searchQuery:s,searchIndex:u,createCommonMetrics:()=>({numSearchResults:g,qaVersion:erd.$L,searchQuery:s,searchPosition:n+t,item:e,moduleFilters:null,...E()})}))):t.map((e,t)=>f.createElement(edT,{key:eiE(e),item:e,searchQuery:s,searchIndex:u,createCommonMetrics:()=>({numSearchResults:g,qaVersion:erd.$L,searchQuery:s,searchPosition:n+t,item:e,moduleFilters:null,...E()})})))))}var edN=n(173842),edS=n(28298),edk=n(407798),edI=n(34762),edA=n(395771),edO=n(71425),edL=n(884484),edP=n(758137),edD=n(436318),edR=n(16366),edM=n(341255),edF=n(520103);function edB({augmentedExtension:e}){let{extension:t,publishedExtension:n}=e;if(!(0,TS.ZQ)(t))return f.createElement(Tn.V,{plugin:t,className:a8.cx.colorIcon.w20.h20.m2.bRadius4.$});let a=n&&(0,x1.Ar)(n);return a&&a.redirect_icon_url?f.createElement(Tn.V,{plugin:a,className:a8.cx.colorIcon.w20.h20.m2.bRadius4.$}):f.createElement(a2.B,{svg:edy.A,className:a8.cx.colorIcon.w20.h20.m2.bRadius4.$,dataTestId:"qa2-dev-plugin-icon",autosize:!0})}let edU=f.createContext(null);function edH({numResults:e,moduleFilters:t,children:n}){return f.createElement(edU.Provider,{value:{numResults:e,moduleFilters:t}},n)}function edG(){let e=f.useContext(edU),t=(0,S.md)(aj.Q8);if(!e)throw Error("useExtensionMetrics must be used within a ExtensionMetricsProvider");return{...e,searchQuery:t}}function edV({children:e,onPrimaryAction:t,onSecondaryAction:n,setActive:a,augmentedExtensionForLogging:l}){let r=edG();return f.createElement(edg.B.Item,{primaryAction:{shortcuts:[erZ.Hz],onAction:e=>{var n;l&&(0,erR.wI)({extensionId:l.extension.plugin_id,searchPosition:(null==(n=e.target)?void 0:n.index)??0,numSearchResults:r.numResults,searchQuery:r.searchQuery,moduleFilters:r.moduleFilters}),t(e)}},secondaryAction:{shortcuts:[erZ.r7],onAction:n},setActive:a,actionLabel:!1,recordingKey:"extension-list-item"},e)}var edK=n(727749),edW=n(258237),edz=n(782501),edj=n(632788);let edJ="EXTENSION_OPTIONS_DROPDOWN";function edY(e){let t=(0,nT.U)();return(0,TS.ZQ)(e)?(null==t?void 0:t.type)===edJ&&(null==t?void 0:t.data.extensionId)===e.plugin_id&&(null==t?void 0:t.data.localFileId)===e.localFileId:(null==t?void 0:t.type)===edJ&&(null==t?void 0:t.data.extensionId)===e.plugin_id&&(null==t?void 0:t.data.localFileId)===null}function edX(e){return e.types.has(erZ.Ag.RECENT)||e.types.has(erZ.Ag.USER_SAVED)||e.types.has(erZ.Ag.LOCAL)}function edq({extension:e}){let t=(0,_.wA)(),n=edY(e),a=f.useCallback(a=>{if(n)t(nI.oB());else{let n=a.currentTarget.getBoundingClientRect();t(nI.j7({type:edJ,data:{extensionId:e.plugin_id,localFileId:(0,TS.ZQ)(e)?e.localFileId:null,targetRect:n}}))}},[t,n,e]);return f.createElement("div",{className:a8.cx.flex.pl8.$},f.createElement("span",{role:"button",tabIndex:0,onClick:e=>{e.stopPropagation(),a(e)},onPointerUp:e=>{e.stopPropagation()},className:a8.cx.bgTransparent.h24.$,"data-testid":"extension-options-button"},f.createElement("div",null,f.createElement(Vz.J,null))))}function edZ(e){let{augmentedExtension:t}=e,{extension:n,publishedExtension:a,localPublishedExtension:l}=t,r=(0,nT.U)(),i=(0,TS.ZQ)(n)?n:l,o=(0,edL.NV)(i,a),s=(0,edL.OX)(a),c=(0,edL.x2)(n,a),d=(0,edL.qu)(i),u=function(e){let t=(0,_.wA)(),n=(0,eX.U_)(),a=(0,_.d4)(e=>{var t;return(0,eh.T9)({authedProfilesById:e.authedProfilesById,userId:null==(t=e.user)?void 0:t.id})});return(0,f.useCallback)(()=>{let{extension:l,types:r}=e;if(r.has(erZ.Ag.LOCAL)&&(0,TS.ZQ)(l)){t(edO.qR(l.localFileId));return}if(r.has(erZ.Ag.RECENT)){if(!n)return;t(((0,TS.k0)(l)?z.Kq:z.lD)({storeInRecentsKey:n,resourceId:l.plugin_id}))}if(r.has(erZ.Ag.USER_SAVED)){let e=(0,TS.k0)(l)?uL.vt.WIDGET:uL.vt.PLUGIN;t((0,edK.s1)({id:l.plugin_id,resourceType:e,communityProfile:a||void 0,source:edK.uR.INSERTS_MODAL}))}},[t,n,e,a])}(t),m=!!((0,TS.ZQ)(n)&&a),p=(0,edL.qi)(m,u),g=(0,edF.Ok)(t),h=(0,edL.xZ)(t),E=(0,ew.TA)(),v=!!a&&!!E&&((0,edW.Ro)(a,E)||(0,edz.Dd)(a,E));if(!edY(n))return null;let y=[],b=[],C=!!a;!(0,TS.ZQ)(n)&&(C?(o&&v&&y.push(o),y.push({displayText:(0,eN.t)("qa.extensions.view_details"),callback:g}),c&&v&&y.push(c),d&&v&&y.push(d),h&&v&&y.push(h),edX(t)&&b.push(p),s&&v&&b.push(s)):(0,o2.$D)(o5.e.EXTENSIBILITY,Error("[Quick Actions] Published extension is missing publishedExtension from Redux state"),{extra:{extensionId:n.plugin_id,isWidget:(0,TS.k0)(n),types:Array.from(t.types).toString()}})),(0,TS.ZQ)(n)&&(o&&y.unshift(o),C&&c&&y.push(c),!n.error&&d&&y.push(d),edX(t)&&b.push(p),s&&b.push(s));let w=y.some(Boolean)&&b.some(Boolean)?{displayText:"",separator:!0}:null;return f.createElement(edj.ms,{parentRect:null==r?void 0:r.data.targetRect,lean:"left",minWidth:64,items:[...y,w,...b].filter(e=>!!e)})}var edQ=n(545941),ed$=n(964197),ed0=n(641638);function ed1(e){var t;let{extension:n,publishedExtension:a,canRequest:l,canRun:r}=e,i=(0,cC.sZ)(),o=(0,ed0.RW)(),s=(0,ed$.a)(null==i?void 0:i.id,n.plugin_id,o.loaded?null==(t=o.data)?void 0:t.workspaceId:void 0);if((0,TS.bH)(n)&&i&&i.name)return{text:i.name};if((0,TS.ZQ)(n)&&a&&(0,edQ.AC)(a))return{text:(0,eN.t)("qa.extensions.in_review"),variant:ell.x.BRAND};if((0,TS.ZQ)(n))return{text:(0,eN.t)("qa.extensions.development")};if(r);else if(s)return{text:(0,eN.t)("qa.extensions.approval_pending")};else if(l)return{text:(0,eN.t)("qa.extensions.needs_approval")};return null}function ed2({text:e,variant:t}){return f.createElement(ell.E,{variant:t},f.createElement(Ca.G,{text:e}))}function ed5({augmentedExtension:e,active:t,submenuRef:n}){let{extension:a}=e,l=(0,TS.k0)(a)?f.createElement(sc.E,{color:"tertiary",fontSize:11},(0,eN.tx)("qa.extensions.widget")):f.createElement(sc.E,{color:"tertiary",fontSize:11},(0,eN.tx)("qa.extensions.plugin")),r=ed1(e);return f.createElement("div",{className:a8.cx.flex.itemsCenter.justifyBetween.wFull.$},f.createElement("div",{className:a8.cx.flex.itemsCenter.$},f.createElement(edB,{augmentedExtension:e}),f.createElement("div",{className:a8.cx.px8.$,style:dA.sx.add({maxWidth:r?"205px":"300px"}).$},f.createElement(Ca.G,{text:a.name})),f.createElement(edD.lM,{augmentedExtension:e,submenuRef:n}),r&&f.createElement("div",{style:dA.sx.add({maxWidth:"110px"}).$},f.createElement(ed2,{text:r.text,variant:r.variant}))),f.createElement("div",null,t?f.createElement(edq,{extension:a}):l))}let ed4=e=>{(0,eig.j)({pluginID:e.plugin_id,widgetName:e.name,pluginVersionID:"",triggeredFrom:"quick-actions"})};function ed3({manifestError:e}){return f.createElement("div",{className:a8.cx.alignLeft.font11.lh16.pl32.$},f.createElement(sc.E,{color:"danger"},e.msg),f.createElement("span",{role:"button",tabIndex:0,onClick:t=>{t.stopPropagation(),e.action()},className:a8.cx.underline.bgTransparent.colorTextDanger.$},e.buttonText))}function ed6({extension:e}){return f.createElement(edA.R,{className:a8.cx.font11.alignLeft.colorTextSecondary.lh16.pl32.$,text:e.localFilePath.replace("/manifest.json","")})}function ed7({augmentedExtension:e,submenuRef:t}){var n;let{extension:a}=e,l=(0,_.wA)(),{close:r}=(0,az.cq)(),i=(0,ecV._I)(),o=elT.dR(a.plugin_id,"quick-actions"),s=edY(a),c=(0,edD.q8)(a),d=(0,edD.U4)(a),u=(0,edD.S3)({submenuIsShown:d,extension:a}),m=(0,edR.t)(a,c),p=f.useCallback(()=>{if(s){l(nI.oB());return}(0,TS.k0)(a)?ed4(a):c&&t?u(t.current):o(),i(ecV.Gb.RUN_LOCAL_EXTENSION),m()&&r()},[s,a,r,l,o,i,m,c,u,t]),[g,h]=f.useState(!1),E=(0,edL.Pt)(null==(n=a.error)?void 0:n.type,a);return f.createElement(edV,{onPrimaryAction:p,setActive:h,augmentedExtensionForLogging:e},f.createElement("div",{className:a8.cx.flex.flexColumn.wFull.$},f.createElement(ed5,{augmentedExtension:e,active:g,submenuRef:t}),!E&&f.createElement(ed6,{extension:a}),E&&f.createElement(ed3,{manifestError:E})),f.createElement(edD.Xq,{extension:a}),f.createElement(edZ,{augmentedExtension:e}))}function ed8({augmentedExtension:e,submenuRef:t}){let{extension:n,canRun:a,canRequest:l}=e,r=(0,_.wA)(),i=edY(n),{onAction:o}=(0,edM.m)({augmentedExtension:e,submenuRef:t}),s=(0,edF.Ok)(e),[c,d]=f.useState(!1);return a||l?f.createElement(edV,{onPrimaryAction:()=>{if(i){r(nI.oB());return}o()},onSecondaryAction:s,setActive:d,augmentedExtensionForLogging:e},f.createElement(ed5,{augmentedExtension:e,active:c,submenuRef:t}),f.createElement(edD.Xq,{extension:n}),f.createElement(edZ,{augmentedExtension:e})):null}function ed9(e){return[{itemKey:"newPlugin",text:(0,eN.t)("whiteboard.inserts.plugin_development_options_new_plugin"),svg:nu.e,onAction:()=>{e(ty.Lo()),et.Y5.dispatch((0,ty.to)({type:edP.h,data:{resourceType:uL.bD.PLUGIN}}))}},{itemKey:"newWidget",text:(0,eN.t)("whiteboard.inserts.widget_development_options_new_widget"),svg:nu.e,onAction:()=>{e(ty.Lo()),et.Y5.dispatch((0,ty.to)({type:edP.h,data:{resourceType:uL.bD.WIDGET}}))}},{itemKey:"importFromManifest",text:(0,eN.t)("whiteboard.inserts.development_options_import"),svg:eia.R,onAction:()=>e((0,edO.JZ)({resourceType:"unknown"}))}]}function eue({itemKey:e,text:t,svg:n,onAction:a}){let l=edG();return f.createElement(edV,{onPrimaryAction:({target:t})=>{(0,erR.PV)({action:e,isAi:!1,module:ee6.J.EXTENSIONS,qaVersion:erd.$L,rankingAlgorithm:(0,erO.eg)(ee6.J.EXTENSIONS),searchPosition:(null==t?void 0:t.index)??0,isPlugin:!1,numSearchResults:l.numResults,searchQuery:l.searchQuery,moduleFilters:l.moduleFilters}),a()},augmentedExtensionForLogging:null},f.createElement("div",{className:a8.cx.flex.itemsCenter.alignLeft.wFull.justifyBetween.$},f.createElement("div",{className:a8.cx.flex.$},f.createElement(n,null),f.createElement("div",{className:a8.cx.ml8.$},t))))}var eut=n(792199),eun=n(357611),eua=n(971120),eul=n(103567);function eur({extension:e}){let t=(0,eul.R_)(e),n=(0,eul.JB)(e);return f.createElement("div",{className:a8.cx.mx8.mb8.p8.bRadius8.flex.justifyBetween.gap4.colorBgInfo.$,"data-testid":"extension-invite-row"},f.createElement("div",{className:a8.cx.flex.gap8.itemsCenter.font11.lh16.$},f.createElement(Lk.H8,{user:e.creator,size:Lk.Pf.MEDIUM}),f.createElement(eul.e2,{resource:e})),f.createElement("div",{className:a8.cx.flex.gap4.$},f.createElement(va.$n,{"data-testid":"decline-invite-button",onClick:e=>{e.stopPropagation(),n()},variant:"secondary"},f.createElement(sc.E,{fontSize:11},(0,eN.tx)("community.detail_view.decline"))),f.createElement(va.$n,{"data-testid":"accept-invite-button",onClick:e=>{e.stopPropagation(),t()}},f.createElement(sc.E,{fontSize:11},(0,eN.tx)("community.detail_view.accept")))))}function eui({invitedPlugins:e,invitedWidgets:t,selectedFilter:n}){let a=function({invitedPlugins:e,invitedWidgets:t,selectedFilter:n}){switch(n){case edk.BY.PLUGINS:return e;case edk.BY.WIDGETS:return t;case edk.BY.ALL:case edk.BY.DEVELOPMENT:return[...e,...t];case edk.BY.FROM_ORG:return[];default:(0,nm.xb)(n)}}({invitedPlugins:e,invitedWidgets:t,selectedFilter:n});return 0===a.length?null:f.createElement("div",{"data-testid":"extension-invite-section",className:a8.cx.flex.flexColumn.$},f.createElement(edg.B.Section,{header:(0,eN.t)("community.detail_view.invitations")},a.map(e=>f.createElement(eur,{key:e.id,extension:e}))))}var euo=n(947131),eus=n(958473),euc=n(794412),eud=n(110354);function euu({augmentedExtension:e}){let{extension:t,publishedExtension:n}=e,a=(0,TS.k0)(t)?(0,eN.tx)("qa.extensions.widget"):(0,eN.tx)("qa.extensions.plugin"),l=(null==n?void 0:n.unique_run_count)??0,r=(null==n?void 0:n.like_count)??0,i=n?f.createElement(eus.o,{publishedExtension:n,showTooltip:!1}):null,o=(0,eus.g)(n);return f.createElement("div",{className:a8.cx.flex.flexColumn.colorTextSecondary.textBodyMedium.$},f.createElement("div",{className:a8.cx.flex.flexRow.$},a,f.createElement(eum,null),f.createElement(a2.B,{svg:euc.A,className:a8.cx.mx2.colorIconSecondary.$}),f.createElement("div",{className:a8.cx.ml2.$},(0,eN.t)("qa.extensions.num_users",{numUsers:l,numUsersStr:(0,i3.$M)(l)})),f.createElement(eum,null),f.createElement(a2.B,{svg:eud.A,className:a8.cx.colorIconSecondary.$,style:dA.sx.add({margin:"3px"}).$}),f.createElement("div",{className:a8.cx.ml2.$},(0,i3.$M)(r)),o&&f.createElement(eum,null),i))}function eum(){return f.createElement("div",{className:a8.cx.w1.hFull.mx6.$,style:dA.sx.add({backgroundColor:"var(--color-border-fs)"}).$,"data-testid":"divider"})}function eup({augmentedExtension:e}){let{extension:t,canRun:n,canRequest:a}=e,{onAction:l}=(0,edM.m)({augmentedExtension:e,submenuRef:null}),r=(0,edF.Ok)(e);if(!n&&!a)return null;let i=(0,edQ.G8)(t,elI.$J);return f.createElement(edV,{onPrimaryAction:r,onSecondaryAction:l,augmentedExtensionForLogging:e},f.createElement("div",{className:a8.cx.flex.flexColumn.alignLeft.wFull.$},f.createElement("div",{className:a8.cx.flex.itemsCenter.overflowHidden.$},f.createElement(edB,{augmentedExtension:e}),f.createElement(euf,{augmentedExtension:e})),f.createElement("div",{className:a8.cx.flex.flexColumn.overflowHidden.ml32.$},f.createElement(Ca.G,{text:i,className:a8.cx.mb4.colorTextSecondary.textBodyMedium.$,showTooltip:euo.i.NEVER}),f.createElement(euu,{augmentedExtension:e}))))}function euf({augmentedExtension:e}){let{extension:t}=e,n=ed1(e);return f.createElement("div",{className:a8.cx.flex.itemsCenter.ml8.$},f.createElement("div",{className:a8.cx.pr8.colorText.textBodyLarge.$,style:dA.sx.add({maxWidth:n?"205px":"300px"}).$},f.createElement(Ca.G,{text:t.name})),n&&f.createElement("div",{style:dA.sx.add({maxWidth:"110px"}).$},f.createElement(ed2,{text:n.text,variant:n.variant})))}function eu_({augmentedExtensions:e,header:t,showExtensionDetails:n=!1,dataTestId:a}){let l=e.map(e=>{let t=f.createRef(),{key:a}=e;return(0,erQ.JT)(e)?f.createElement(ed7,{augmentedExtension:e,key:a,submenuRef:t}):n?f.createElement(eup,{augmentedExtension:e,key:a}):f.createElement(ed8,{augmentedExtension:e,key:a,submenuRef:t})});return f.createElement("div",{"data-testid":a,className:a8.cx.flex.flexColumn.$},t&&f.createElement(edg.B.Section,{header:t},l),!t&&l)}function eug({actions:e,dataTestId:t}){return f.createElement("div",{"data-testid":t,className:a8.cx.flex.flexColumn.$},e.map(({itemKey:e,...t})=>f.createElement(eue,{key:e,itemKey:e,...t})))}function euh({extensions:e}){let t=(0,f.useMemo)(()=>[...e].sort(erQ.bL),[e]);return 0===t.length?null:f.createElement(eu_,{augmentedExtensions:t,dataTestId:"my-extensions-section"})}function euE(){return f.createElement("div",{className:a8.cx.flex.wFull.mt16.justifyCenter.alignCenter.colorTextSecondary.$,"data-testid":"no-extensions-found"},(0,eN.tx)("qa.no_plugins_widgets_found"))}function euv({availableExtensions:e,selectedFilter:t}){let n=(0,erO.Ev)(),a=(0,S.md)(aj.Lk),l=(0,S.md)(aj.dd),r=(0,S.md)(aj.Rt),i=(0,_.d4)(erk.l),o=(0,_.wA)(),s=(0,e_.f6)(),c=(0,e_.wW)(),{loaded:d,extensions:u}=function(e){let t=(0,erQ.Oy)(),{loaded:n,extensions:a}=function(){let e=(0,_.wA)(),[t,n]=(0,f.useState)(!1),[a,l]=(0,f.useState)([]);return(0,f.useEffect)(()=>{let t={sort_by:enC.eg.POPULAR,editor_type:eun.k.Editors.FIGMA};Promise.all([(0,eut.nC)().filter(t).browse(eua.L.BrowseResourceTypes.PLUGINS),(0,eut.nC)().filter(t).browse(eua.L.BrowseResourceTypes.WIDGETS)]).then(([t,a])=>{let r=t.data.meta.resources,i=a.data.meta.resources,o=(0,C7.k4)([...r.slice(0,10),...i.slice(0,5)]);e(r3.Qi({publishedPlugins:o,src:"Quick Actions V2 suggested extensions"}));let s=o.map(e=>(0,x1.Ar)(e)).filter(e=>null!==e);n(!0),l(s)}).catch(()=>{n(!1),l([])})},[e]),{loaded:t,extensions:a}}(),l=a.map(e=>t(e,erZ.Ag.COMMUNITY));return{loaded:n,extensions:(0,erQ.ZM)([...e,...l])}}(e),{myExtensions:m,suggestedExtensions:p,otherExtensionsFromOrg:g}=function(e,t){let n=(0,erQ.vA)(t),a=[],l=[],r=[];return e.filter(e=>e.canRun||e.canRequest).filter(e=>n(e)).forEach(e=>{(0,erQ.wj)(e)?a.push(e):t===edk.BY.FROM_ORG&&(0,erQ.jb)(e)||t!==edk.BY.FROM_ORG&&(0,erQ.Nf)(e)?l.push(e):t===edk.BY.FROM_ORG&&r.push(e)}),{myExtensions:a,suggestedExtensions:l,otherExtensionsFromOrg:r}}(u,t),h=t===edk.BY.DEVELOPMENT?ed9(o):[],E=m.length+p.length+g.length+h.length,v=t===edk.BY.DEVELOPMENT,y=t===edk.BY.FROM_ORG,b=d||y||v,C=function({myExtensions:e,suggestedExtensions:t,otherExtensionsFromOrg:n,extensionActions:a}){let l=(0,erO.HD)("My Extensions",e),r=(0,erO.HD)("Suggested",t),i=(0,erO.HD)("Other Extensions from Org",n),o=(0,erO.NH)(a);return(0,erO.i6)([l,r,i,o])}({myExtensions:m,suggestedExtensions:p,otherExtensionsFromOrg:g,extensionActions:h});return((0,f.useEffect)(()=>{a===ee6.J.EXTENSIONS&&l&&b&&n({quickActionsSessionId:l,quickActionsQueryId:r,searchQuery:"",numSearchResults:E,currentSelection:i,module:a,moduleFilters:t,qaVersion:erd.$L,searchQueryResults:C})},[n,a,l,b,r,E,i,t,C]),0===E)?f.createElement(euE,null):f.createElement(edH,{numResults:E,moduleFilters:t},f.createElement(edg.B,{primary:!0,resultCount:E},f.createElement(eui,{invitedPlugins:s,invitedWidgets:c,selectedFilter:t}),f.createElement(euh,{extensions:m}),f.createElement(euy,{extensions:p,hasLoaded:b}),y&&f.createElement(eub,{extensions:g}),v&&f.createElement(euC,{actions:h})))}function euy({extensions:e,hasLoaded:t}){return t?0===e.length?null:f.createElement(eu_,{augmentedExtensions:e,header:(0,eN.t)("qa.suggested"),showExtensionDetails:!0}):f.createElement("div",{className:a8.cx.p8.$},f.createElement(edI.R,null))}function eub({extensions:e}){let t=(0,cC.sZ)();return t&&0!==e.length?f.createElement(eu_,{augmentedExtensions:e,header:(0,eN.t)("qa.other_extensions_from_org",{org_name:t.name}),showExtensionDetails:!0}):null}function euC({actions:e}){return f.createElement(eug,{actions:e,dataTestId:"extension-actions-section"})}var euw=n(463592),euT=n(508567);let eux=eK.M4.Query({fetch:async e=>(await euT.$W.getExtensions(e)).data.meta,enabled:e=>e.query.length>0,output:({data:e})=>e.results});function euN({availableExtensions:e,selectedFilter:t}){let n=(0,erO.Ev)(),a=(0,S.md)(aj.Lk),l=(0,S.md)(aj.dd),r=(0,S.md)(aj.Q8),[i]=(0,o1.A)(r,300),o=(0,S.md)(aj.Rt),s=(0,_.d4)(erk.l),c=(0,_.wA)(),{loading:d,publicExtensions:u,privateExtensions:m,localExtensions:p,actionItems:g}=function(e){let{loading:t,publicExtensions:n,privateExtensions:a,localExtensions:l}=function(e){let{status:t,results:n}=function(e){let t=function(e){switch(e){case eq.nT.Design:return eun.k.Editors.FIGMA;case eq.nT.Whiteboard:return eun.k.Editors.FIGJAM;case eq.nT.DevHandoff:return eun.k.Editors.DEV_MODE;default:return eun.k.Editors.ALL}}((0,Q.my)()),n=(0,fF.U5)(),a=(0,cC.dq)()??void 0,[{status:l,data:r}]=(0,r5.IT)(eux({query:e,editorType:t,orgSearch:n,currentOrgId:a}));return{status:l,results:r||{public:[],private:[]}}}(e),a=function(e){let t=(0,e_.$1)(),n=(0,f.useMemo)(()=>Object.values(t),[t]),a=(0,f.useMemo)(()=>new euw.Ef(n,eh.Ih),[n]);return(0,f.useMemo)(()=>a.search(e),[a,e])}(e);return(0,f.useMemo)(()=>{switch(t){case"loading":return{loading:!0,privateExtensions:[],publicExtensions:[],localExtensions:[]};case"loaded":let e=(null==n?void 0:n.public)??[],l=(null==n?void 0:n.private)??[];return{loading:!1,publicExtensions:e.map(e=>e.model),privateExtensions:l.map(e=>e.model),localExtensions:a};case"disabled":case"errors":return(0,o2.$D)(o5.e.EXTENSIBILITY,Error("[useSearchExtensions] Unable to fetch search results"),{tags:{status:t}}),{loading:!1,privateExtensions:[],publicExtensions:[],localExtensions:[]};default:(0,nm.xb)(t)}},[null==n?void 0:n.private,null==n?void 0:n.public,a,t])}(e);return{loading:t,publicExtensions:n,privateExtensions:a,localExtensions:l,actionItems:function(e){let t=(0,_.wA)(),n=(0,f.useMemo)(()=>ed9(t),[t]),a=(0,f.useMemo)(()=>new euw.Ef(n,eh.zd),[n]);return(0,f.useMemo)(()=>a.search(e),[a,e])}(e)}}(i);(0,f.useEffect)(()=>{let e=[...u,...m];0!==e.length&&c(r3.Qi({publishedPlugins:e,src:"Quick actions"}))},[c,m,u]);let{myExtensions:h,fromOrgExtensions:E,communityExtensions:v}=euA(function({publicExtensions:e,privateExtensions:t,localExtensions:n}){let a=(0,erQ.Oy)();return(0,f.useMemo)(()=>{let l=(e,t)=>e.map(e=>(0,x1.Ar)(e)).filter(e=>!!e).map(e=>a(e,t)),r=l(e,erZ.Ag.COMMUNITY),i=l(t,erZ.Ag.ORG_PRIVATE);return[...n.map(e=>a(e,erZ.Ag.LOCAL)),...i,...r]},[a,n,t,e])}({publicExtensions:u,privateExtensions:m,localExtensions:p}),e,t),y=h.length+E.length+v.length+g.length,b=function({myExtensions:e,actionItems:t,fromOrgExtensions:n,communityExtensions:a}){let l=(0,erO.HD)("My Extensions",e),r=(0,erO.NH)(t),i=(0,erO.HD)("From Org",n),o=(0,erO.HD)("From Community",a);return(0,erO.i6)([l,r,i,o])}({myExtensions:h,actionItems:g,fromOrgExtensions:E,communityExtensions:v});return((0,f.useEffect)(()=>{a===ee6.J.EXTENSIONS&&l&&!d&&n({quickActionsSessionId:l,quickActionsQueryId:o,searchQuery:i,numSearchResults:y,currentSelection:s,module:a,moduleFilters:t,qaVersion:erd.$L,searchQueryResults:b})},[s,n,a,y,l,o,t,d,b,i]),d)?f.createElement(edI.R,null):0===y?f.createElement(euE,null):f.createElement(edH,{numResults:y,moduleFilters:t},f.createElement(edg.B,{primary:!0,resultCount:y},f.createElement(euh,{extensions:h}),f.createElement(euS,{actions:g}),f.createElement(euk,{extensions:E}),f.createElement(euI,{extensions:v})))}function euS({actions:e}){return edG().moduleFilters!==edk.BY.DEVELOPMENT?null:f.createElement(eug,{actions:e,dataTestId:"extension-actions-section"})}function euk({extensions:e}){let t=(0,cC.sZ)();if(!t||0===e.length)return null;let[n,a]=O1()(e,e=>e.types.has(erZ.Ag.ORG_SAVED)),l=[...n,...a];return f.createElement(eu_,{augmentedExtensions:l,header:(0,eN.t)("qa.from_org_name",{org_name:t.name}),showExtensionDetails:!0,dataTestId:"from-org-extensions-section"})}function euI({extensions:e}){return 0===e.length?null:f.createElement(eu_,{augmentedExtensions:e,header:(0,eN.t)("qa.from_community"),showExtensionDetails:!0,dataTestId:"community-extensions-section"})}let euA=(e,t,n)=>{let a=(0,erQ.vA)(n),l=(0,f.useMemo)(()=>new Set(e.map(e=>e.key)),[e]),r=(0,f.useMemo)(()=>{let n=[...e,...t];return(0,erQ.ZM)(n)},[t,e]),i=[],o=[],s=[];return r.filter(e=>e.canRun||e.canRequest).filter(e=>a(e)).filter(e=>l.has(e.key)).forEach(e=>{(0,erQ.wj)(e)?i.push(e):(0,erQ.C5)(e)?o.push(e):(0,erQ.Nf)(e)&&s.push(e)}),{myExtensions:i,fromOrgExtensions:o,communityExtensions:s}};function euO({hasLoadedExtensions:e,extensions:t,selectedFilter:n}){let a=(0,S.md)(aj.Q8),l=(0,aj.JB)(),r=(0,Bl.AY)(edS.t);return((0,np.h)(()=>()=>{l(),r()}),e)?a?f.createElement(euN,{availableExtensions:t,selectedFilter:n}):f.createElement(euv,{availableExtensions:t,selectedFilter:n}):f.createElement(edI.R,null)}var euL=n(891682);function euP(){!function(){let e=(0,S.md)(aj.IH),{autoClose:t}=(0,az.cq)(),n=(0,f.useCallback)(()=>{let e=ET.D.getState();e.modalShown||e.dropdownShown||e.pickerShown||t()},[t]);!function({ref:e,handler:t,eventType:n="mousedown",eventOptions:a,recordingKey:l,enabled:r}){let i=(0,f.useCallback)(n=>{if(!(n.target instanceof Node))return;let a=n.target;a&&a.isConnected&&e&&(Array.isArray(e)?e.filter(e=>!!e.current).every(e=>e.current&&!e.current.contains(a)):e.current&&!e.current.contains(a))&&t(n)},[e,t]),o=(0,n_.rf)(l,n,i);(0,f.useEffect)(()=>{if(e&&r)return window.addEventListener(n,o,a),()=>{window.removeEventListener(n,o,a)}},[e,n,i,o,a,r])}({ref:e,handler:()=>setTimeout(n,0),eventType:"mousedown",eventOptions:!0,recordingKey:"click-to-dismiss",enabled:!0})}();let e=(0,_.d4)(e=>e.mirror.appModel),[t,n]=(0,S.fp)(aj.Q8),a=(0,e2.Xr)(aj.Rt),[l,r]=(0,S.fp)(edS.t),[i,o]=(0,S.fp)(aj.Lk),{loaded:s,extensions:c}=(0,S.md)(aj.P_),d=(0,_.wA)();f.useEffect(()=>d(r6.aq()),[d]);let u=(0,Q.my)(),m=u===eq.nT.Design,p=u===eq.nT.Slides,g=(0,af.q5)(),h=!!(m&&(null==g?void 0:g.canEdit)),E=(0,eiw.s)(),v=(0,eiT.V)();eV.YG.useInitSearch({disabled:!h});let y=i===ee6.J.ASSETS,{debouncedAssetSearch:C,clearAssetSearchAndCancelDebounce:w}=(0,ee4.TC)({debounceWait:300}),{debouncedFragmentTextSearch:T,clearFragmentSearchAndCancelDebounce:x}=(0,euL.S)({debounceWait:300,entryPoint:ee7.G4.ACTIONS_ASSETS_TAB}),{debouncedFragmentTextSearch:N,clearFragmentSearchAndCancelDebounce:k}=(0,euL.S)({debounceWait:300,entryPoint:ee7.G4.ACTIONS_ASSETS_TAB,overrideParams:{is_community:!0}}),I=!e.isReadOnly,A=f.useCallback(e=>{n(e),a((0,ez.g)()),(0,erO.lw)(),h&&((y||0===e.length)&&(C(e,{type:OK.I.ALL}),v&&T(e)),v&&(0,aI.Xk)()&&N(e))},[n,a,C,T,h,y,v,N]),O=f.useCallback(()=>{n(""),h&&(w(),v&&(x(),(0,aI.Xk)()&&k()))},[n,h,w,x,v,k]),L=f.useCallback(e=>{o(e),(0,erO.lw)()},[o]),P=f.useCallback(()=>{(0,eiC.mX)(t,()=>L(ee6.J.ASSETS),v,E,ee7.G4.ACTIONS_ASSETS_TAB)},[t,L,v,E]),D=f.useRef(null),R=(0,edN.U)(v),M=f.createElement(ein.fu,{value:i,onChange:nf.lQ,numItems:I?3:2},f.createElement(ein.oz,{tabId:ee6.J.ALL,onAction:()=>L(ee6.J.ALL),navigatingShortcut:{key:b.Uz.KEY_1,modifier:[b.xH.ALT]}},(0,eN.tx)("qa.all")),f.createElement(ein.oz,{tabId:ee6.J.ASSETS,onAction:P,navigatingShortcut:{key:b.Uz.KEY_2,modifier:[b.xH.ALT]}},(0,eN.tx)("qa.assets")),I&&f.createElement(ein.oz,{tabId:ee6.J.EXTENSIONS,onAction:()=>L(ee6.J.EXTENSIONS),navigatingShortcut:{key:b.Uz.KEY_3,modifier:[b.xH.ALT]}},(0,eN.tx)("qa.plugins_widgets"))),F=v?f.createElement("div",{className:a8.cx.flex.$},f.createElement(vJ.K,{"aria-label":(0,eN.t)("asset_suggestions.visual_search_icon_button_tooltip"),onClick:gt.KB,"data-tooltip":(0,eN.t)("asset_suggestions.visual_search_icon_button_tooltip"),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip-show-above":!0,recordingKey:(0,n_.Pt)("defaultView","visualSearchIconButton")},f.createElement(er8.A,null))):void 0,B=i===ee6.J.EXTENSIONS;return f.createElement(eie.n,{height:p?elt.Ru:elt.wC,recordingKey:"defaultView"},f.createElement(eit.v,{searchQuery:t,onSearchChange:A,onClear:O,endEnhancer:F,ref:D,placeholder:y?R:void 0}),(h||B)&&f.createElement("div",{className:a8.cx.px8.pb8.$},f.createElement(er9.b,{primary:!1,gap:8,fullWidth:!0,justify:"space-between"},h&&M,B&&f.createElement(edk.ox,{extensionFilter:l,setExtensionFilter:r}))),f.createElement(eie.n.Body,null,function(){switch(i){case ee6.J.ALL:return f.createElement(edx,{setActiveTab:L});case ee6.J.ASSETS:return f.createElement(eiC.tF,{searchHandle:D});case ee6.J.EXTENSIONS:return f.createElement(euO,{extensions:c,hasLoadedExtensions:s,selectedFilter:l});default:return(0,nm.xb)(i)}}()))}let euD=(0,e3.bt)(e=>e.mirror.appModel.currentTool);function euR(){let{current:e}=(0,az.cq)(),t=(0,aj.jh)();return((0,np.h)(()=>()=>{t()}),e)?f.createElement(f.Fragment,null,e.module):f.createElement(euP,null)}let euM=(e,t)=>{(0,erO.Mq)({...t,qaVersion:erd.$L,quickActionsSessionId:e,timeToShowModal:b7.sn.tryStop(erd.mP)||0,module:(0,er$.x)()})};function euF(){!function(){let e=(0,e2.Xr)(aj.P_),t=(0,e_.FG)(),n=(0,e_.AR)(),{loaded:a,userPlugins:l,userWidgets:r,orgPlugins:i,orgWidgets:o}=(0,e_.q3)(),s=(0,e_.ll)(),c=(0,e_.U6)(),d=(0,eg.h)("plugin"),u=(0,eg.h)("widget"),m=(0,e_.$1)(),p=(0,erQ.Oy)(),_=(0,f.useMemo)(()=>[{extensions:t,extensionType:erZ.Ag.RECENT},{extensions:n,extensionType:erZ.Ag.RECENT},{extensions:Object.values(l),extensionType:erZ.Ag.USER_SAVED},{extensions:Object.values(r),extensionType:erZ.Ag.USER_SAVED},{extensions:Object.values(i),extensionType:erZ.Ag.ORG_SAVED},{extensions:Object.values(o),extensionType:erZ.Ag.ORG_SAVED},{extensions:Object.values(s),extensionType:erZ.Ag.ALLOWLIST},{extensions:Object.values(c),extensionType:erZ.Ag.ALLOWLIST},{extensions:d,extensionType:erZ.Ag.ORG_PRIVATE},{extensions:u,extensionType:erZ.Ag.ORG_PRIVATE},{extensions:Object.values(m),extensionType:erZ.Ag.LOCAL}],[t,n,l,r,i,o,s,c,d,u,m]),g=(0,f.useMemo)(()=>{let e=a?_.map(({extensions:e,extensionType:t})=>e.map(e=>p(e,t))).flat():[];return(0,erQ.ZM)(e)},[_,p,a]);(0,f.useEffect)(()=>{a&&g&&e({loaded:a,extensions:g})},[a,g,e])}();let e=(0,e2.Xr)(aj.Bu),t=(0,ecV.Zq)(),n=(0,S.md)(aj.rE),a=(0,S.md)(aj.dd);(0,np.h)(()=>(e(!0),a&&euM(a,n||void 0),()=>{t(),e(!1)}));let l=(0,S.md)(euD),[r,i]=f.useState(!1),o=(0,L.o3)(L.nt.ui3),s=(0,v.ZC)(o),{close:c}=(0,az.cq)();return(0,f.useEffect)(()=>{euB(l)&&i(!0),s&&!o?c():r&&!euB(l)&&c()},[o,s,c,l,r]),f.createElement(erq.s,null,f.createElement(er0.s3,{name:"quickActions",recordingKey:"quickActions"},f.createElement(er6,null,f.createElement(euR,null))))}function euB(e){return e===ei.NLJ.SELECT}var euU=n(843059);function euH(e){let t=(0,q.A)(ie.KY,e.timeoutMs),[n,a]=f.useState(!1),l=f.useRef(null);return f.useEffect(()=>(n?t.cancel():t(),()=>{t.cancel()}),[t,n]),f.createElement("div",{ref:l,onPointerEnter:()=>{a(!0)},onPointerLeave:()=>{a(!1)}},e.children)}function euG(){var e,t;let n=ET.D.getState(),a=(0,erk.l)(n),l=(null==(e=n.openFile)?void 0:e.key)??"",r=(0,$.v5)(n.selectedView,null),i=(0,etN.uj)(),o=[...edf(),...i],s=eio(),c=eiL(s,o),d=(0,ie.el)(),u=d?c.list(s).find(e=>e.action===d.action):null,m=null==u?void 0:u.action,p=u?(0,etw.f)(u):null,_=(0,f.useCallback)(()=>{m&&(et.Y5.triggerAction(m,null==d?void 0:d.payload),(0,ie.KY)())},[m,null==d?void 0:d.payload]),g=(0,S.md)(aj.dd),h=(0,erO.vI)(),E=(0,aq.vh)(),v={action:m,source:"toast",quickActionsSessionId:g,currentSelection:a,qaVersion:erd.$L,fileKey:l,productType:r,role:h,hasAiFeatureAccess:E};return((0,np.h)(()=>{m&&(0,Z.sx)(erd.Sq,v,{forwardToDatadog:!0})}),u)?f.createElement(er0.s3,{name:"quickActions",recordingKey:"quickActions"},f.createElement(er6,null,f.createElement(eie.n,null,f.createElement(euH,{timeoutMs:1e4},f.createElement(euU.y,{onDismiss:ie.KY,recordingKey:"SuggestionToast"},f.createElement(er9.B,{justify:"space-between",align:"center",fullWidth:!0},f.createElement(er9.B,{gap:4,align:"center"},f.createElement("span",{style:{"--color-icon":"var(--color-icon-brand)"}},f.createElement(ym.V,null)),f.createElement(er9.B,{align:"center"},f.createElement("span",{className:a8.cx.textBodyMediumStrong.$},f.createElement(sc.E,{color:"brand"},(0,eN.tx)("qa.toast.suggestion"))),(null==(t=u.tags)?void 0:t.includes(eir.$.AI))&&f.createElement(yp.W,null))),f.createElement(ecH.r,{variant:"secondary",shortcuts:[{key:b.Uz.ENTER,modifier:[b.xH.META]}],onAction:()=>{_(),m&&(0,erO.mi)({...v,isAi:!0})},recordingKey:"SuggestionToast"},p))))))):(console.warn("No menu item found for suggested action."),null)}function euV(){let e=(0,S.md)(aj.Bu),t=(0,ie.el)();return e?f.createElement(euF,null):t?f.createElement(euG,null):null}var euK=n(62557),euW=n(212478),euz=n(278011),euj=n(488914),euJ=n(775058);let euY=f.createElement("svg",{width:"18",height:"16",viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{id:"ICON-templates"},f.createElement("line",{id:"Line 2",x1:"5.5",y1:"1",x2:"5.5",y2:"15",stroke:"black",strokeOpacity:"0.9"}),f.createElement("rect",{id:"Rectangle 2083",x:"0.5",y:"0.5",width:"17",height:"15",stroke:"black",strokeOpacity:"0.9"}),f.createElement("rect",{id:"Rectangle 7984",x:"1",y:"1",width:"4",height:"14",fill:"black",fillOpacity:"0.3"}))),euX=f.createElement("svg",{width:"18",height:"16",viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("line",{x1:"5.5",y1:"1",x2:"5.5",y2:"15",stroke:"black",strokeOpacity:"0.9"}),f.createElement("rect",{x:"0.5",y:"0.5",width:"17",height:"15",stroke:"black",strokeOpacity:"0.9"}));function euq(){let e=(0,dD.Gf)(),t="CLOSED"!==(0,S.md)(euj.Tb).type,n=(0,e2.Xr)(euj.UT),a=(0,e2.Xr)(euj.Cx),l=(0,ps.qU)();if(!e)return null;let r=()=>{t?a():(l(),n())};return f.createElement("div",null,f.createElement(a7.GG,{className:euJ.gb,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("whiteboard.mini_home.toggle_button"),onKeyDown:e=>(0,ea.hx)({e,onClickHandler:r}),onClick:r,tabIndex:0,"aria-label":(0,eN.t)("whiteboard.mini_home.toggle_button"),"data-onboarding-key":"in_editor_sidebar_toolbar"},t?euY:euX))}var euZ=n(760591);function euQ(){let e=(0,af.q5)();return f.createElement("div",{className:"extension_toolbar_left_items--leftToolbar--npGkc",tabIndex:0,onClick:()=>(0,TC._r)(),role:"button"},f.createElement(iG.K0,{svg:euZ.A,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.vscode.toolbar.back_button"),className:"extension_toolbar_left_items--back--JwiF5",disabled:!0}),f.createElement("div",{className:"extension_toolbar_left_items--fileNameText---u61D"},null==e?void 0:e.name))}var eu$=n(720248),eu0=n(671250);function eu1({focusModeEnabled:e,onClick:t}){return f.createElement("button",{"data-editor-theme":"dev-handoff",onClick:t,"data-tooltip":(0,eN.t)(e?"dev_handoff.vscode.exit_focus_mode":"dev_handoff.vscode.enter_focus_mode"),"data-tooltip-type":nx.Ib.TEXT},f.createElement(a2.B,{svg:e?eu0.A:eu$.A,className:"dev_handoff_toolbar_focus_button--focusModeIcon--LMEyU"}))}var eu2=n(197368),eu5=n(699731);function eu4(){let e=(0,_.wA)(),t=(0,aN.J2)(ei.Ez5.devHandoffState().focusMode);return f.createElement("div",{className:"extension_toolbar_right_items--buttons--3pMn8"},t&&f.createElement(tr.jX,null),f.createElement(eu1,{focusModeEnabled:t,onClick:()=>ei.w3z.setFocusModeEnabled(!t)}),f.createElement("button",{"data-editor-theme":"dev-handoff",onClick:()=>e(wd.lW({stringToCopy:window.location.toString()})),"data-tooltip":(0,eN.t)("dev_handoff.copy_link"),"data-tooltip-type":nx.Ib.TEXT},f.createElement(a2.B,{svg:eu2.A})),f.createElement("button",{"data-editor-theme":"dev-handoff",onClick:()=>TC.Qn(window.location.toString()),"data-tooltip":(0,eN.t)("dev_handoff.open_in_figma"),"data-tooltip-type":nx.Ib.TEXT},f.createElement(a2.B,{svg:eu5.A})))}let eu3="pages_sidebar_toolbar_ui2--selected--VbVrq";var eu6=n(770806),eu7=n(934640);function eu8(){return f.createElement(a2.B,{svg:eu6.A,ariaLabel:(0,eN.t)("pages_panel.toolbar.icon.addPage.aria_label"),dataTestId:"newPageToolbarIcon"})}function eu9({numberOfPages:e}){return e>9?f.createElement(a2.B,{svg:eu7.A,ariaLabel:(0,eN.t)("pages_panel.toolbar.icon.ellipis.aria_label"),dataTestId:"ellipsisPagesToolbarIcon"}):function({numberOfPages:e}){return f.createElement("span",{"data-testid":"pageCountToolbarIcon","aria-label":(0,eN.t)("pages_panel.toolbar.icon.pageCount.aria_label")},f.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 17H18L18 18H20L21 18V17V7.6875V4V3H20H7H6V4L6 6.00004L7 6.00004V4L20 4V7.6875V17ZM17 20.0001H4V7.00012H17V10.6876V20.0001ZM4 6.00012H17H18V7.00012V10.6876V20.0001V21.0001H17H4H3V20.0001V7.00012V6.00012H4Z",fillOpacity:"0.9"}),f.createElement("text",{id:"numberText",x:"10.5",y:"14.5",dominantBaseline:"middle",textAnchor:"middle",fontFamily:"Inter",fontWeight:"500",fontSize:"9"},e)))}({numberOfPages:e})}function eme(){let e=(0,S.md)(JI),t=(0,e2.Xr)(JA),n=(0,e2.Xr)(JO),a=(0,cm.rE)(),l=(0,a6.am)(),r=(0,_.d4)(e=>e.mirror.appModel.pagesList),i=(0,f.useMemo)(()=>r.filter(e=>!e.isDivider).length,[r]),o=(0,cm.nn)(),s=(0,_.wA)(),c=JM({nonDividerPageCount:i,isDropdownOpen:e}),d=()=>{l("pages_panel_open_toggle",{isPagesOpen:!e},{forwardToDatadog:!0}),e?n():(t(),s(j.b({[cx]:!0})))};if(!c)return null;switch(c){case JR.ADD_PAGE:return f.createElement(uV,{tooltipText:(0,eN.t)("pages_panel.toolbar.add_pages_tooltip"),isActive:e,onClick:()=>{a(null),d()},addLeftMargin:!1,recordingKey:"figjamPagesToolbarItem",onboardingKey:cN,dataTestId:"addPages"},f.createElement("div",{className:a8.cx.mxAuto.$},f.createElement(eu8,null)));case JR.VIEW_PAGES:return f.createElement("div",{className:"pages_sidebar_toolbar_ui2--toolbarItemContainer--az3u2"},f.createElement(a7.GG,{className:nb()("pages_sidebar_toolbar_ui2--toolbarItemButton--cNref","pages_sidebar_toolbar_ui2--withHover--zKrg8",{[eu3]:e}),recordingKey:"figjamPagesToolbarItem",dataTestId:"viewPages",onClick:d,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("pages_panel.toolbar.view_pages_tooltip"),"aria-label":(0,eN.t)("pages_panel.toolbar.view_pages_tooltip"),"aria-pressed":e,"data-onboarding-key":cN},f.createElement("div",{className:nb()("pages_sidebar_toolbar_ui2--iconContainer--XuPru")},f.createElement("div",{className:"pages_sidebar_toolbar_ui2--icon--wevM1"},f.createElement(eu9,{numberOfPages:i}))),f.createElement("div",{className:nb()("pages_sidebar_toolbar_ui2--textWrapper--HJ3UH text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",{[eu3]:e})},o)));default:(0,nm.xb)(c)}}function emt(){let e=(0,eb.aV)(),t=(0,_.d4)(e=>e.mirror.appModel.topLevelMode===ei.lyf.HISTORY),n=(0,y.kc)().figjam_pages_in_figjam,a=!(0,B.q8)()&&(0,uK.Uy)(),l=C.Ay.isMeetDevice;return t?f.createElement(f.Fragment,null,n&&f.createElement(eme,null)):f.createElement(f.Fragment,null,n&&f.createElement(eme,null),f.createElement(J9,null),a&&f.createElement(J1,null),f.createElement(uY,null),!e&&!l&&f.createElement(JX,null))}function emn(){let e=(0,eb.aV)(),t=(0,_.d4)(e=>e.mirror.appModel.topLevelMode===ei.lyf.HISTORY),n=(0,y.kc)().figjam_pages_in_figjam,a=!(0,B.q8)()&&(0,uK.Uy)(),l=C.Ay.isMeetDevice;return t?f.createElement(f.Fragment,null,n&&f.createElement(eme,null)):f.createElement(f.Fragment,null,a&&f.createElement(J1,null),f.createElement(uY,null),!e&&!l&&f.createElement(JX,null),n&&f.createElement(eme,null))}var ema=n(637820);function eml({variant:e}){switch(e){case"design":return f.createElement("div",{className:a8.cx.px8.$},f.createElement("div",{className:a8.cx.h16.px4.bRadius3.$,style:dA.sx.add({border:"1px solid var(--color-bg-design)",color:"var(--color-bg-design)"}).$},f.createElement(sc.E,{fontSize:9},(0,eN.tx)("fullscreen.toolbar.integ_zoom.beta"))));case"figjam":return f.createElement("div",{className:a8.cx.px8.$},f.createElement(iU.Ex,{text:(0,eN.t)("fullscreen.toolbar.integ_zoom.beta"),color:iU.zE.FIGJAM,subtle:!0}))}}function emr(e){let t=!e.user&&!C.Ay.isMeetDevice;return f.createElement(f.Fragment,null,(0,y.kc)().internal_only_debug_tools&&f.createElement(tr.bu,null),f.createElement(tr.n8,null),e.multiplayer&&e.editingFile&&f.createElement(Kx.Cv,{dropdownShown:e.dropdownShown,multiplayer:e.multiplayer,user:e.user}),t&&f.createElement(tr.tO,null),(0,Co.MP)()&&f.createElement(eml,{variant:"figjam"}))}function emi(){let e=(0,ew.iZ)(),t=(0,Co.ck)(),n=(0,nT.U)(),a=(0,_.d4)(e=>e.multiplayer),l=(0,af.q5)(),r=(0,Kw.dR)(),i=(0,Kw.Ww)(),o=(0,KC.B4)(),s=(0,_.wA)(),c=(0,_.d4)(e=>"prototype"===e.selectedView.view),d=(0,_.d4)(e=>e.mirror.appModel.topLevelMode===ei.lyf.HISTORY),u=f.useCallback(e=>{(0,Kx.Lx)(e,null==i?void 0:i.sessionID,s,c,a,r,o)},[null==i?void 0:i.sessionID,s,c,a,r,o]);(0,f.useEffect)(()=>{},[a,e]);let m=c?null:l,p=(0,tC.DG)((null==m?void 0:m.key)||"").enabled,g=(0,y.kc)().figjam_ui2_overhaul&&!d,h=!e&&!C.Ay.isMeetDevice,E=e?f.createElement(f.Fragment,null,i&&f.createElement(Kx.v7,{dropdownShown:n,multiplayer:a,currentUser:i,onUserClick:u})):f.createElement(Kx.cU,{dropdownShown:n,multiplayer:a,currentUser:i,onUserClick:u,editingFile:m});return f.createElement(f.Fragment,null,(0,y.kc)().internal_only_debug_tools&&f.createElement(tr.bu,null),f.createElement(tr.n8,null),a&&l&&f.createElement(f.Fragment,null,!t&&m&&e&&f.createElement(ema.k,{fileKey:m.key}),f.createElement("div",{className:a8.cx.flex.cursorDefault.selectNone.itemsCenter.$},f.createElement(i8.sK,null),E,g&&f.createElement(J9,null),m&&f.createElement(KN.w,{user:e,editingFile:m,isFileInWorkshop:p}))),h&&f.createElement(tr.tO,null),(0,Co.MP)()&&f.createElement(eml,{variant:"figjam"}))}var emo=n(367253),ems=n(203845),emc=n(309325);let emd=(0,cV.Ju)(function(e){let t=(0,_.wA)(),[n,a]=f.useState(""),[l,r]=f.useState(!1),i=(0,af.tS)(),o=(0,_.d4)(e=>i?e.loadingState[cY.loadingKeyForPayload({fileKey:i,emailAddress:n})]===cB.r.LOADING:null);return f.createElement(Y.fu,{name:"google_device_try_file_claim_modal"},f.createElement(cK.aF,{disableKeyboardEventPropagation:!0,className:cW.tQ,onHide:()=>(0,Z.sx)("google_meet_claim_email_modal_closed",{fileKey:i})},f.createElement("div",{className:cW.FS},f.createElement("h1",{className:cW.DX},(0,eN.tx)("google_device_try_file_modal.enter_email"))),f.createElement(cU.k0,{multiple:1}),f.createElement("div",{className:cW.FS},f.createElement("div",{className:cW.Kc},(0,eN.tx)("google_device_try_file_modal.enter_email.description"))),f.createElement(cU.k0,{multiple:3}),f.createElement(a1.il,{autoFocus:!0,type:"email",className:nb()(cW._2,l&&cW.cC),placeholder:(0,eN.t)("google_device_try_file_modal.enter_email.placeholder_email"),onChange:e=>{a(e.target.value)},value:n}),l&&f.createElement("div",{className:cW.mV},(0,eN.tx)("google_device_try_file_modal.enter_email.error_message")),f.createElement(cU.k0,{multiple:2}),f.createElement(a1.nD,{type:"submit",fullWidth:!0,onClick:a=>{if(a.preventDefault(),a.stopPropagation(),null==n||!1===(0,emo.xf)(n)||!i){r(!0);return}if(!i){t(cG.s.error((0,eN.t)("google_device_try_file_modal.error_saving_board")));return}e.onSubmitEmail({fileKey:i,emailAddress:n})}},f.createElement(cH.x,{isLoading:!!o,className:a8.cx.flex.justifyCenter.$},()=>(0,eN.tx)("google_device_try_file_modal.enter_email.button"))),f.createElement(cU.k0,{multiple:3}),f.createElement("div",{className:cW.NJ},(0,eN.tx)("google_device_try_file_modal.disclaimer",{tos:f.createElement(emc.V,{url:C.Ay.isMeetDevice?ems.A:ems.Uw,title:(0,eN.t)("google_device_try_file_modal.onboarding_disclaimer_tos")}),privacy_policy:f.createElement(emc.V,{url:C.Ay.isMeetDevice?ems.bO:ems.JD,title:(0,eN.t)("google_device_try_file_modal.onboarding_disclaimer_privacy_policy")})})),f.createElement(cU.k0,{multiple:1})))},"GOOGLE_DEVICE_TRY_FILE_CLAIM_MODAL"),emu=(0,cV.Ju)(function(e){let{email:t,onChangeEmail:n}=e,a=(0,_.wA)(),l=(0,af.tS)();return f.createElement(Y.fu,{name:"google_device_try_file_received_email_modal"},f.createElement(cK.aF,{disableClickOutsideToHide:!0,disableKeyboardEventPropagation:!0,className:cW.Kd},f.createElement("img",{src:"https://static.figma.com/uploads/b0feff5e4abc5e66f99064463f2ad5d0a7f6c072.png",alt:"",className:cW.ZQ}),f.createElement(cU.k0,{multiple:2}),f.createElement("div",{className:cW.FS},f.createElement("h1",{className:cW.DX},(0,eN.tx)("google_device_try_file_modal.got_mail"))),f.createElement(cU.k0,{multiple:1}),f.createElement("div",{className:cW.FS},f.createElement("div",{className:cW.Kc},(0,eN.tx)("google_device_try_file_modal.got_mail.description",{email:f.createElement("p",{className:cW.Fx},t)}))),f.createElement(cU.k0,{multiple:3}),f.createElement(a1.nD,{type:"close",fullWidth:!0,onClick:e=>{e.preventDefault(),e.stopPropagation(),a(ty.Ce())}},(0,eN.tx)("google_device_try_file_modal.got_mail.close")),f.createElement(cU.k0,{multiple:3}),f.createElement("div",{className:cW.NJ},(0,eN.tx)("google_device_try_file_modal.got_mail.email_not_received",{send_again_link:f.createElement(a1.Us,{className:cW.jH,onClick:n=>{if(n.preventDefault(),n.stopPropagation(),!l){a(cG.s.error((0,eN.t)("google_device_try_file_modal.error_saving_board")));return}e.onResendEmail({fileKey:l,emailAddress:t,isResentEmail:!0})},target:"_blank",trusted:!0},(0,eN.tx)("google_device_try_file_modal.got_mail.email_not_received.send_again"))})),f.createElement(cU.k0,{multiple:2}),f.createElement("div",{className:cW.NJ},(0,eN.tx)("google_device_try_file_modal.got_mail.wrong_address",{use_different_email_link:f.createElement(a1.Us,{className:cW.jH,onClick:e=>{e.preventDefault(),e.stopPropagation(),n()},target:"_blank",trusted:!0},(0,eN.tx)("google_device_try_file_modal.got_mail.wrong_address.use_different_email"))}))))},"GOOGLE_DEVICE_TRY_FILE_RECEIVED_EMAIL_MODAL");var emm=n(589462);function emp(e){let t=(0,cF.A)(),n=Math.ceil((0,cF.A)(e).diff(t,"minutes",!0));if(n>30){let e=Math.ceil(n/60);return(0,eN.t)("figjam_try.timer_hours_left",{hoursLeft:e})}if(n>=10){let e=10*Math.ceil(n/10);return(0,eN.t)("figjam_try.timer_minutes_left",{minutesLeft:e})}return(0,eN.t)("figjam_try.timer_less_than_ten_minutes_left")}function emf({until:e,ctaText:t,onCtaClick:n,isFigjam:a,tooltipText:l,showAndHideTooltipImmediately:r,isLoading:i,onExpire:o,onboardingKey:s}){let[c,d]=(0,f.useState)(emp(e));return(0,f.useEffect)(()=>{let t=setInterval(()=>{d(emp(e)),(0,cF.A)().isAfter((0,cF.A)(e))&&o&&o()},6e4);return()=>{clearInterval(t)}},[e,o]),f.createElement("div",{className:a?"countdown--figjamContainer--hlbVE countdown--container--WCLxZ":"countdown--designContainer--PVZIP countdown--container--WCLxZ","data-onboarding-key":s},f.createElement("div",{className:"countdown--timerContainer--L3IFQ","data-tooltip-type":nx.Ib.TEXT,"data-tooltip":l,"data-tooltip-show-immediately":r,"data-tooltip-hide-immediately":r},f.createElement(a2.B,{className:"countdown--icon--PREBw",svg:emm.A}),f.createElement("span",{className:"countdown--text--kN4nf ellipsis--ellipsis--Tjyfa","data-testid":"countdown-time"},c)),f.createElement(cH.x,{isLoading:!!i,className:"countdown--loading--DaaWQ"},()=>f.createElement(Y.$z,{className:"countdown--cta--JhE8T ellipsis--ellipsis--Tjyfa",onClick:()=>n(),trackingProperties:{buttonContext:t}},t)))}function em_(e){let t=(0,cF.A)(),n=Math.ceil((0,cF.A)(e).diff(t,"minutes",!0));if(n>30){let e=Math.ceil(n/60);return(0,eN.t)("figjam_try.meet_hardware.timer_hours_left",{hoursLeft:e})}if(n>=10){let e=10*Math.ceil(n/10);return(0,eN.t)("figjam_try.meet_hardware.timer_minutes_left",{minutesLeft:e})}return(0,eN.t)("figjam_try.meet_hardware.timer_less_than_ten_minutes_left")}function emg({until:e,ctaText:t,onCtaClick:n,tooltipText:a,showAndHideTooltipImmediately:l,isLoading:r,onExpire:i,onboardingKey:o}){let[s,c]=(0,f.useState)(em_(e));return(0,f.useEffect)(()=>{let t=setInterval(()=>{c(em_(e)),(0,cF.A)().isAfter((0,cF.A)(e))&&i&&i()},6e4);return()=>{clearInterval(t)}},[e,i]),f.createElement("div",{className:"countdown_meet_hardware--figjamContainer--libjf countdown_meet_hardware--container--gM5Hl","data-onboarding-key":o},f.createElement("div",{className:"countdown_meet_hardware--timerContainer--JsqME","data-tooltip-type":nx.Ib.TEXT,"data-tooltip":a,"data-tooltip-show-immediately":l,"data-tooltip-hide-immediately":l},f.createElement("img",{src:"https://static.figma.com/uploads/d2458a35e4543003186712a5c44448bc0949f82b",alt:"Wave hand icon",className:"countdown_meet_hardware--waveIcon--Lc-LT"}),f.createElement("span",{className:"countdown_meet_hardware--countdownText--Igbr2 ellipsis--ellipsis--Tjyfa","data-testid":"countdown-time"},s),f.createElement("span",{className:"countdown_meet_hardware--text--Ahn7z ellipsis--ellipsis--Tjyfa","data-testid":"countdown-time-text"},(0,eN.t)("figjam_try.meet_hardware.board_deletion_disclaimer"))),f.createElement(cH.x,{isLoading:!!r,className:"countdown_meet_hardware--loading--s6qrq"},()=>f.createElement(Y.$z,{className:"countdown_meet_hardware--cta--H8MOo ellipsis--ellipsis--Tjyfa",onClick:()=>n(),trackingProperties:{buttonContext:t}},t)))}let emh="figjam-try-countdown",emE="figjam-try-timed-tooltip-shown",emv=(0,cV.Ju)(function(){let e=(0,_.wA)(),t=(0,zC.B)(),n=()=>{e(ty.ES({type:emv.type}))};return f.createElement(Y.fu,{name:"FigJam Try - Timed Tooltip"},f.createElement(dq.OA,{targetKey:emh,shouldCenterArrow:ae.EL.FALLBACK,title:(0,eN.t)("figjam_try.timed_tooltip_headline"),topPadding:8,dismissModal:n,width:300-2*dq.uv,ctaText:(0,eN.t)("figjam_try.timed_tooltip_cta"),onClickPrimaryCta:()=>{n(),t({origin:"figjam_try_timed_tooltip",formState:tE.qB.SIGN_UP})},buttonContext:"Create account"},f.createElement("p",null,(0,eN.tx)("figjam_try.timed_tooltip_body"))))},"FigjamTryTimedTooltip");function emy(){let e=(0,tC.nF)(),t=(0,_.wA)(),n=(0,_.d4)(e=>!e.user),a=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),l=C.Ay.isMeetDevice,r=(0,_.d4)(e=>!!a&&e.loadingState[tv.Q.loadingKeyForPayload({file_key:a})]===cB.r.LOADING),i=(0,zC.B)(),o=(0,_.d4)(e=>!!e.modalShown),s=(0,f.useRef)((0,cF.A)().add(5,"minutes")),c=(0,ta.Kx)(),[d,u]=(0,f.useState)(!!(0,A.DN)().get(emE));(0,f.useEffect)(()=>{if(!d&&n&&!o&&!(null==c?void 0:c.shouldOptimizeForIpadApp)&&!l){let e=setInterval(()=>{(0,cF.A)().isSameOrAfter(s.current)&&(u(!0),(0,A.DN)().set(emE,1),t(ty.to({type:emv})))},6e4);return()=>{clearInterval(e)}}},[d,n,o,t,null==c?void 0:c.shouldOptimizeForIpadApp,l]);let m=(0,ta.pt)();if((0,f.useEffect)(()=>{m&&(m._claim_fig_jam_try_file=e=>{t(tv.Q({file_key:e}))})},[m,t]),(0,f.useEffect)(()=>{(null==c?void 0:c.updateFigJamTryExpiration)&&e.enabled&&e.until&&c.updateFigJamTryExpiration(e.until)},[c,e]),!e.enabled||!a)return null;let p=()=>{t(ty.to({type:emd,data:{onSubmitEmail:({fileKey:e,emailAddress:n})=>{t(cY({fileKey:e,emailAddress:n,onSuccess:h}))}}}))},g=({fileKey:e,emailAddress:n,isResentEmail:a})=>{t(cY({fileKey:e,emailAddress:n,isResentEmail:a}))},h=e=>{t(ty.to({type:emu,data:{email:e,onChangeEmail:p,onResendEmail:g}}))};return f.createElement(Y.fu,{name:"FigJam Try Countdown Timer"},l?f.createElement(emg,{until:e.until,ctaText:(0,eN.t)("figjam_try.save_board"),onCtaClick:()=>{t(ty.to({type:emd,data:{onSubmitEmail:({fileKey:e,emailAddress:n})=>{t(cY({fileKey:e,emailAddress:n,onSuccess:h}))}}}))},tooltipText:n?(0,eN.t)("figjam_try.timer_tooltip_anonymous"):(0,eN.t)("figjam_try.timer_tooltip_logged_in"),showAndHideTooltipImmediately:!0,isLoading:r,onboardingKey:emh}):f.createElement(emf,{until:e.until,ctaText:(0,eN.t)("figjam_try.save_board"),onCtaClick:()=>{n?i({origin:"figjam_try_countdown_timer",formState:tE.qB.SIGN_UP}):t(tv.Q({file_key:a}))},isFigjam:!0,tooltipText:n?(0,eN.t)("figjam_try.timer_tooltip_anonymous"):(0,eN.t)("figjam_try.timer_tooltip_logged_in"),showAndHideTooltipImmediately:!0,isLoading:r,onboardingKey:emh}))}var emb=n(447798);function emC(){let e=(0,_.d4)(Iy.ao),t=(0,S.md)(OY.Lc),{isLibraryModalShown:n,onToggleLibraryModal:a}=(0,OJ.u)({entrypoint:OH.r6.TOOLBAR_BUTTON,modalType:"editor",openToUpdatesTab:t}),l=t?(0,eN.t)("fullscreen.libraries_button.tooltip.updates_to_pull"):e?(0,eN.t)("fullscreen.libraries_button.tooltip.updates_to_push"):(0,eN.t)("fullscreen.libraries_button.tooltip.no_updates"),r=t||e;return(0,OX.Pf)({showBadge:r,hasChangesToPull:t}),f.createElement("span",{className:nb()(emb.WT,(0,uH.M)(!0,n))},f.createElement(C3.t,{svg:Oq.A,fallbackSvg:OZ.A,recordingKey:"actionLibraryButton",className:nb()(emb.gb),onMouseDown:a,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":l,"data-tooltip-submenu-open":n}),r&&f.createElement("span",{className:nb()(uH.I.updatesBadge)}))}var emw=n(232117);function emT(){let[e,t]=f.useState(!1),n=f.useRef(null),a=f.useRef(null),[l,r]=f.useState(null),i=(0,_.d4)(e=>e.mirror.appModel.pagesList),o=(0,_.d4)(e=>e.mirror.appModel.currentPage),s=i.find(e=>e.nodeId===o),c=(0,lb.RU)({subscribeToUpdates_expensive:!1})-(0,lf.hG)(lw.YI7)-((null==l?void 0:l.top)??0);if((0,VE.L)(n,()=>{e&&t(!1)}),!i)return null;async function d(e){await lE.q.instance.setCurrentPageFromNodeAsync(e),t(!1)}return f.createElement("div",{className:"toolbar_page_picker--pagePicker--GVgi5",ref:n},f.createElement("button",{className:"toolbar_page_picker--pagePickerButton--5Hmqt",ref:a,onClick:function(){var n;if(e)t(!1);else{let e=null==(n=a.current)?void 0:n.getBoundingClientRect();e&&(r(e),t(!0))}},"data-tooltip":(0,eN.t)("dev_handoff.pages_list"),"data-tooltip-type":nx.Ib.TEXT},f.createElement(FG,{pageGuid:o,margin:"marginRight",fallback:f.createElement(a2.B,{svg:emw.A,className:"toolbar_page_picker--pagePickerIcon--BvSvj"})}),f.createElement("span",{className:"toolbar_page_picker--pagePickerButtonContent--Sr4lK"},(null==s?void 0:s.name)||""),f.createElement(a2.B,{svg:Od.A,className:"toolbar_page_picker--pagePickerButtonChevron--MiHhI"})),e&&l&&f.createElement(nN.Cf,{targetRect:l,maxHeight:c,propagateCloseClick:!0},i.map(e=>f.createElement(nC.W.CheckableOption,{key:e.nodeId,checked:o===e.nodeId,onClick:()=>d(e.nodeId)},f.createElement(FG,{pageGuid:e.nodeId,margin:"marginRight"}),f.createElement("span",{className:"toolbar_page_picker--dropdownOptionContent--7gcmF"},e.name)))))}let emx="toolbar_vscode_frame_stepper--stepperButton--eRoSc",emN="toolbar_vscode_frame_stepper--stepperButtonDisabled--XSjQQ";function emS(){let e=(0,aN.J2)(ei.Ez5.devHandoffState().focusNodeId),t=(0,aN.J2)(ei.Ez5.devHandoffState().nodeIds),n=(0,eb.eY)(),a=e?t.indexOf(e):-1,l=null==n?void 0:n.get(e);if(!l||-1===a)return null;let r=0===a,i=a===t.length-1;return f.createElement("div",{className:"toolbar_vscode_frame_stepper--stepperContainer--ux6kR"},f.createElement(iG.K0,{svg:euZ.A,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.vscode.toolbar.previous_frame"),onClick:()=>ei.glU.triggerActionInUserEditScope("dev-handoff-focus-previous",{}),className:r?emN:emx,disabled:r}),f.createElement("span",{className:"toolbar_vscode_frame_stepper--stepperContent--hVi69"},(null==l?void 0:l.name)||""),f.createElement(iG.K0,{svg:Pc.A,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.vscode.toolbar.next_frame"),onClick:()=>ei.glU.triggerActionInUserEditScope("dev-handoff-focus-next",{}),className:i?emN:emx,disabled:i}))}let emk=(0,qh.ck)(),emI=f.memo(function({item:e}){let t=(0,_.d4)(t=>(0,ety.A)(e.label));return f.createElement("div",{key:`label-${e.label}`,className:emb.Pf},t)}),emA=f.memo(function({item:e,recordingKey:t}){let n=(0,_.d4)(t=>(0,tl.Yh)(t.mirror.appModel,e.action)),a=(0,_.d4)(t=>(0,ety.A)(e.action));return f.createElement(tr.QW,{key:`text-button-${e.action}`,action:e.action,isEnabled:n,text:a,recordingKey:t})}),emO=f.memo(function({item:e,disabled:t,recordingKey:n}){let a=e.children.filter(e=>!(0,lc.Zk)(e)||!e.featureFlags||e.featureFlags.every(e=>(0,y.kc)()[e])),l=(0,N.R)(e=>a.filter(t=>(0,lc.Zk)(t)&&(0,tl.Yh)(e.mirror.appModel,t.action))),r=(0,_.d4)(e=>l.length>0&&emL(l[0],e));if(0===l.length)return null;if(e.flyoutHideOptionsIfSingleEnabledAction&&1===l.length){var i;return f.createElement(tr.rA,{key:`action-button-${l[0].action}`,item:(i=l[0],{type:lc.ZU.ACTION,...i}),isEnabled:!0,isActive:r,recordingKey:n})}return 1===l.length&&"flatten-selection"===l[0].action?null:f.createElement(euW.xn,{key:`flyout-${e.name}`,item:{...e,children:a},disabled:t,recordingKey:n,styleActiveItem:!e.flyoutDoNotStyleActiveItem})});function emL(e,t){return"isActive"in e&&e.isActive?e.isActive(t):"propertyValue"in e&&void 0!==e.propertyValue&&t.mirror.appModel[e.property]===e.propertyValue}let emP=f.memo(function({item:e,recordingKey:t}){let{featureFlags:n=[]}=e,a=(0,_.d4)(t=>emL(e,t)),l=(0,_.d4)(t=>(0,tl.Yh)(t.mirror.appModel,e.action)&&n.every(e=>(0,y.kc)()[e])&&(!e.isAvailable||e.isAvailable(t)));return f.createElement(tr.rA,{key:`action-button-${e.action}`,item:e,isEnabled:l,isActive:a,recordingKey:t})}),emD=f.memo(function({item:e,numUnreadComments:t,recordingKey:n,canEdit:a}){let l=(0,_.d4)(t=>(0,tl.Yh)(t.mirror.appModel,e.action)),r=(0,nT.U)(),i=(0,_.d4)(t=>e.tool!==l8.NLJ.NONE&&e.tool===t.mirror.appModel.currentTool&&!(0,tl.TY)(r)),o=(0,_.d4)(e=>e.mirror.appModel.topLevelMode);return e.featureFlags&&!e.featureFlags.every(e=>(0,y.kc)()[e])?null:f.createElement(tr.T0,{key:`tool-button-${e.tool}`,dropdownShown:r,isEnabled:l,isActive:i,item:e,numUnreadComments:t,recordingKey:n,topLevelMode:o,isWide:e.isWideForEditors&&a})}),emR=f.memo(function({item:e,numUnreadComments:t,recordingKey:n}){let a=(0,_.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),l=(0,_.d4)(e=>e.mirror.appModel.currentTool),r=(0,_.d4)(e=>e.openFile),i=(0,_.d4)(e=>e.progressBarState.mode),o=(0,tw.T)(i),s=(0,_.d4)(e=>o?!(null==r?void 0:r.canEdit):e.mirror.appModel.isReadOnly),c=(0,_.d4)(e=>e.mirror.appModel.isSceneReadOnly),d=(0,_.d4)(e=>!!e.user);if(!e||c&&!e.nonEditorsAllowed||e.onlyShowInReadOnly&&!(s&&i!==l8.Oin.HIDE_UI)||e.hideInExtension&&sL.z4.getIsExtension()||!r&&e.newFileDisabled||!d&&!e.loggedOutAllowed||e.editModes&&-1===e.editModes.indexOf(a)||e.showForTools&&-1===e.showForTools.indexOf(l))return null;let u=e.dontChainRecordingKeys?e.recordingKey:n_.Pt(n,e.recordingKey);switch(e.type){case lc.ZU.LABEL:return f.createElement(emI,{item:e});case lc.ZU.TEXT_BUTTON:return f.createElement(emA,{item:e,recordingKey:u});case lc.ZU.FLYOUT:return f.createElement(emO,{item:e,disabled:o,recordingKey:u});case lc.ZU.ACTION:return f.createElement(emP,{item:e,recordingKey:u});case lc.ZU.TOOL:return f.createElement(emD,{item:e,numUnreadComments:t,recordingKey:u,canEdit:(null==r?void 0:r.canEdit)||!1});default:(0,nm.xb)(e)}}),emM=()=>{let e=(0,_.wA)(),t=(0,eb.p8)("activeCanvasEditModeType"),n=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.canEdit});return()=>{if((0,Tj.Ah)(t)){e((0,wq.Eg)());return}if(!n){e(G3.Fm({id:wq.V_})),et.Y5.triggerAction("enter-preview-mode");return}e(G3.Fm({id:wq.V_})),et.Y5.triggerAction("enter-layout-mode")}};function emF(e){let{recordingKey:t}=e,n=(0,_.d4)(e=>e.userStateLoaded),a=(0,eb.p8)("topLevelMode"),l=(0,_.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),r=(0,_.d4)(e=>e.selectedView),i=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.canEdit}),o=emM();return n&&(!(0,y.kc)().version_diffing||l!==l8.m1T.COMPARE_CHANGES)&&((0,Tj.Ah)(l)||a===l8.lyf.BRANCHING)&&(r.editorType===eq.nT.Design||r.editorType===eq.nT.DevHandoff)?f.createElement("div",{className:emb.dM},f.createElement(a1.$$,{key:i?"back-to-editing-btn":"back-to-viewing-btn",className:emb.uX,recordingKey:n_.Pt(t,"backToEditing"),onClick:o},(0,eN.tx)("fullscreen.toolbar.done"))):null}function emB(e){let t=f.useRef(null),n=f.useCallback(()=>{requestAnimationFrame(()=>{let e=t.current;e&&e.clientWidth!==innerWidth&&(e.style.width="99.999%",requestAnimationFrame(()=>{e.style.width=""}))})},[]),{multiplayer:a,dispatch:l,selectedView:r}=e,i=f.useCallback(e=>{ei.h3O.observeUser(e),a&&a.observingSessionID!==e&&a.sessionID!==e&&l(j.b({aware_of_observation_mode:!0}))},[a,l]);return(f.useEffect(()=>{addEventListener("resize",n),(0,ea.QP)("main_toolbar",null==t?void 0:t.current);let e=window.FigmaMobile;e&&(e._open_timer=()=>{S.zl.set(uM.Qs,{type:"OPEN"}),(0,Z.sx)(ps.Fn.OPEN,{source:ps.OO.IPAD_MENU})},e._close_timer=()=>{S.zl.set(uM.Qs,{type:"CLOSE"})});let a=window.FigmaMobile;return a&&(a._set_allow_draw_with_touch=e=>{ei.glU.setAllowDrawWithTouch(e)},a._unlock_all_objects=()=>{et.Y5.triggerActionInUserEditScope("unlock-all")},a._zoom_reset=()=>{et.Y5.triggerActionInUserEditScope("zoom-reset")},a._zoom_to_fit=()=>{et.Y5.triggerActionInUserEditScope("zoom-to-fit")},a._present=()=>{ei.h3O.startPresenting()},a._observe_user=e=>{i(e)},a._find_in_file=()=>{et.Y5.triggerActionInUserEditScope("canvas-search")},a._copy=()=>{et.Y5.triggerActionInUserEditScope("copy")},a._cut=()=>{et.Y5.triggerActionInUserEditScope("cut")},a._paste=()=>{et.Y5.triggerActionInUserEditScope("paste")},a._add_media=e=>{let t=e.map(e=>{let{encoded_data:t,mime_type:n}=e;return new Blob([(0,i3.Vs)(t)],{type:n})}),n=et.Y5.fileArrayToString(t);ei.glU.handleOpenFromJsonString(n,tc.wu.MOBILE_NATIVE_NAVBAR)},a._get_zoom_scale=()=>ei.glU.getViewportZoomScale(),a._get_prototype_status=()=>{let e=ei.X3B.currentPagePrototypeStatus(),t="";if(e!==ei.bOM.VALID)switch(e){case ei.bOM.NO_FRAMES:t=r.editorType===eq.nT.Slides?(0,eN.t)("proto.status_messages.a_presentation_needs_to_have_at_least_one_slide"):(0,eN.t)("proto.status_messages.a_prototype_needs_to_have_at_least_one_frame");break;case ei.bOM.INVALID_START_NODE:t=(0,eN.t)("proto.status_messages.a_prototype_with_connections_needs_a_valid_top_level_frame_as_the_origin");break;default:(0,nm.xb)(e)}return{status:e,message:t}}),()=>{(0,ea.QP)("main_toolbar",null),removeEventListener("resize",n)}},[i,r.editorType,n]),"fullscreen"===e.selectedView.view&&e.selectedView.editorType===eq.nT.Whiteboard)?f.createElement(emK,{dropdownShown:e.dropdownShown,isInitialized:e.isInitialized,multiplayer:e.multiplayer,numUnreadComments:e.numUnreadComments,openFile:e.openFile,progressBarMode:e.progressBarMode,recordingKey:e.recordingKey,showUi:e.showUi,user:e.user,ref:t}):f.createElement(emW,{devHandoffFocusMode:e.devHandoffFocusMode,dropdownShown:e.dropdownShown,isInitialized:e.isInitialized,multiplayer:e.multiplayer,numUnreadComments:e.numUnreadComments,openFile:e.openFile,progressBarMode:e.progressBarMode,recordingKey:e.recordingKey,selectedView:e.selectedView,showMissingFontsButton:e.showMissingFontsButton,showUi:e.showUi,user:e.user,ref:t})}function emU(e){return{openFile:e.openFile,dropdownShown:e.dropdownShown,modalShown:e.modalShown,loadingState:e.loadingState,user:e.user,userFlags:e.userFlags,multiplayer:e.multiplayer,userStateLoaded:e.userStateLoaded,topLevelMode:e.mirror.appModel.topLevelMode,isInitialized:e.mirror.appModel.isInitialized,progressBarMode:e.progressBarState.mode,activeVoiceCallExists:!!e.openFile&&e.openFile.key in e.voice.activeCall,showUi:e.mirror.appModel.showUi,isFreeUser:e.isFreeUser}}function emH(e){let t=(0,N.R)(emU),n=(0,_.d4)(e=>e.openFile),a=(0,_.d4)(e=>e.orgById),l=(0,_.d4)(e=>e.teams),r=(0,l9.YL)({openFile:n,teams:l,orgById:a}),i=(0,tC.$D)(),o=(0,aN.J2)(ei.Ez5.uiState().showMissingFontsButton),s=(0,aN.J2)(ei.Ez5.devHandoffState().focusMode),c=(0,eb.p8)("showUi"),d=(0,_.wA)();return FZ(),f.createElement(emB,{...(0,euK.d)(t),...e,dispatch:d,voiceEligibility:r,isWorkshopFile:i,showMissingFontsButton:o,devHandoffFocusMode:s,showUi:c})}function emG({numUnreadComments:e,recordingKey:t}){let n=(0,Q.E3)(),a=(0,ti.oV)(),l=(0,ti.rD)(),r=(0,U._I)();if((0,tR.l7)())return null;let i=(()=>{switch(n){case eq.nT.Whiteboard:return lc.FW.filter(e=>n!==eq.nT.Whiteboard||!a&&!l||e.type!==lc.ZU.TOOL||e.tool!==l8.NLJ.SELECT&&e.tool!==l8.NLJ.HAND);case eq.nT.DevHandoff:return lc._8.filter(e=>e.type!==lc.ZU.TOOL||e.tool!==l8.NLJ.ANNOTATE&&e.tool!==l8.NLJ.MEASURE||r);default:return lc.XU}})();return f.createElement(f.Fragment,null,i.map((n,a)=>f.createElement(emR,{key:a,item:n,numUnreadComments:e,recordingKey:t})))}function emV({renderDesignMiddleItems:e,renderFileName:t,renderFigjamTryCountdown:n}){let a=(0,aN.J2)(ei.Ez5.editorState().selectionEmpty),l=(0,wM.s)(!1),{topLevelMode:r,editMode:i}=(0,N.R)(e=>({topLevelMode:e.mirror.appModel.topLevelMode,editMode:e.mirror.appModel.activeCanvasEditModeType})),o=(0,_.d4)(e=>{let t=e.modalShown;return(null==t?void 0:t.type)===tA.e}),s=(0,af.q5)(),c=(0,eb.aV)(),d=(0,qh.ck)(),u=i===l8.m1T.COMMENTS||i===l8.m1T.PREVIEW||i===l8.m1T.BRANCHING||r===l8.lyf.HISTORY||r===l8.lyf.PREVIEW||r===l8.lyf.DEV_HANDOFF||r===l8.lyf.BRANCHING,m=(0,Q.ow)(),p=(0,tR.l7)(),g=!!(null==s?void 0:s.isTryFile)&&!o&&!c&&d,h=!o&&(m||a||u||c)&&!l,E=c||m?void 0:f.createElement(bd,null);return f.createElement("div",{key:"center-group","data-onboarding-key":at.lm,className:`${emb.GC} ${emb.V3}`},E,t(h&&!g),n(g),e(!h&&!m&&!g&&!p))}let emK=f.forwardRef(function(e,t){var n,a,l;let{loadingClassName:r,hideToolsClassName:i}=emz(e.progressBarMode,e.openFile,e.isInitialized),o=(0,dD.NC)((null==(n=e.user)?void 0:n.id)??null),s=emj(e.recordingKey),c=(a=e.numUnreadComments,l=e.recordingKey,f.useMemo(()=>new CO.H4(()=>{let e=[];return lc.D4.forEach((t,n)=>{let r=f.createElement(emR,{key:n,item:t,numUnreadComments:a,recordingKey:l});r&&e.push(r)}),e}),[a,l]));return f.createElement(Y.fu,{name:eQ.e0.EDITOR_TOOLBAR,trackingTargets:Pm.K.RCS},f.createElement("div",{onFocus:ea.FT,tabIndex:0}),f.createElement(IJ.V,null,f.createElement("div",{className:nb()(emb.KE,nz.Dm,r,emb.Jg,{[emb.R]:!e.showUi}),ref:t,role:"region","aria-label":(0,eN.t)("fullscreen.accessibility_dom.primary_toolbar_label")},f.createElement("div",{key:"left-group",className:`${emb.GC} ${emb.l3} ${i}`},o&&f.createElement(euq,null),f.createElement(tr.xG,{hideToolsClassName:i,recordingKey:e.recordingKey}),f.createElement(emG,{numUnreadComments:e.numUnreadComments,recordingKey:e.recordingKey}),!em.eD&&!o&&f.createElement(euz.Z,null),(0,y.kc)().figjam_ui2_overhaul?f.createElement(emn,null):f.createElement(emt,null),f.createElement(emF,{recordingKey:e.recordingKey})),f.createElement(emV,{renderFileName:e=>s.render({isVisible:e,className:emb.Xs,displayAs:"block"}),renderFigjamTryCountdown:e=>e&&f.createElement(emy,null),renderDesignMiddleItems:e=>c.render({isVisible:e,displayAs:"block"})}),f.createElement("div",{key:"right-group",className:`${emb.GC} ${emb.gt} ${i}`},(0,y.kc)().figjam_ui2_overhaul?f.createElement(emi,null):f.createElement(emr,{editingFile:e.openFile,dropdownShown:e.dropdownShown,user:e.user,multiplayer:e.multiplayer})))))}),emW=f.forwardRef(function(e,t){let n=(0,ag.$A)(e.selectedView),a=(0,tR.l7)(),l=n&&sL.z4.getIsExtension(),r=!emk&&!e.selectedView.isRecoveryMode&&!a,{devHandoffFocusMode:i,openFile:o,user:s}=e,{loadingClassName:c,hideToolsClassName:d}=emz(e.progressBarMode,e.openFile,e.isInitialized),u=((null==o?void 0:o.canEdit)??!1)&&!!s,m=emj(e.recordingKey),p=f.useMemo(()=>new CO.H4(()=>{let t=[];return lc.D4.forEach((n,a)=>{let l=f.createElement(emR,{key:a,item:n,numUnreadComments:e.numUnreadComments,recordingKey:e.recordingKey});l&&t.push(l)}),t}),[e.numUnreadComments,e.recordingKey]);return f.createElement(Y.fu,{name:eQ.e0.EDITOR_TOOLBAR,trackingTargets:Pm.K.RCS},f.createElement("div",{onFocus:ea.FT,tabIndex:0}),f.createElement(IJ.V,null,f.createElement("div",{className:nb()(emb.KE,nz.Dm,c,{[emb.R]:!e.showUi}),ref:t,role:"region","aria-label":(0,eN.t)("fullscreen.accessibility_dom.primary_toolbar_label")},f.createElement("div",{key:"left-group",className:`${emb.GC} ${emb.l3} ${d}`},!l&&f.createElement(tr.xG,{hideToolsClassName:d,recordingKey:e.recordingKey}),l&&i?f.createElement(euQ,null):f.createElement(f.Fragment,null,f.createElement(emG,{numUnreadComments:e.numUnreadComments,recordingKey:e.recordingKey}),f.createElement(emF,{recordingKey:e.recordingKey}))),l?i?f.createElement(emS,null):f.createElement(emT,null):f.createElement(emV,{renderFileName:e=>{var t,n;return e&&(null==(n=(t=lc.mb).isActive)?void 0:n.call(t,{}))?f.createElement(emR,{item:lc.mb,numUnreadComments:0}):m.render({isVisible:e,className:emb.Xs,displayAs:"block"})},renderFigjamTryCountdown:e=>e&&f.createElement(emy,null),renderDesignMiddleItems:e=>p.render({isVisible:e,displayAs:"block"})}),f.createElement("div",{key:"right-group",className:`${emb.GC} ${emb.gt} ${d}`},l?f.createElement(eu4,null):a&&e.multiplayer&&e.openFile?f.createElement("div",{className:emb.XA},f.createElement(Kx.Cv,{dropdownShown:e.dropdownShown,multiplayer:e.multiplayer,user:e.user})):f.createElement(f.Fragment,null,f.createElement(tr.n8,null),e.multiplayer&&e.openFile&&f.createElement(Kx.Cv,{dropdownShown:e.dropdownShown,multiplayer:e.multiplayer,user:e.user}),!e.user&&f.createElement(tr.tO,null),r&&f.createElement(ls,{recordingKey:e.recordingKey,extraPadding:u}),u&&f.createElement(emC,null),!emk&&f.createElement(emR,{item:lc.Fz,recordingKey:e.recordingKey,numUnreadComments:0}),e.showMissingFontsButton&&f.createElement(tr.w8,{recordingKey:e.recordingKey}),f.createElement(Ta.HT,{recordingKey:n_.Pt(e,"zoomMenu")}),(0,Co.MP)()&&f.createElement(eml,{variant:"design"}))))))});function emz(e,t,n){let a=(0,tw.T)(e);return{loadingClassName:a?emb.Lq:"",hideToolsClassName:!a||(null==t?void 0:t.canEdit)&&n?"":emb.yM}}function emj(e){return f.useMemo(()=>new CO.H4(()=>f.createElement(sQ.fH,{recordingKey:n_.Pt(e,"filenameView")})),[e])}function emJ(e){return(0,n6.GS)()?null:f.createElement(emH,{...e})}var emY=n(633410);function emX(e){return{selectedView:e.selectedView,user:e.user,currentUserOrgId:e.currentUserOrgId,comments:e.comments,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,multiplayerEmoji:e.multiplayerEmoji,eyedropper:e.eyedropper,needsUpgrade:e.needsUpgrade,progressBarState:e.progressBarState,showingReconnectingModal:e.showingReconnectingModal,showingOpenDesktopAppModal:e.showingOpenDesktopAppModal,openFile:e.openFile,exportSettingsPickerShown:e.exportSettingsPickerShown,pagesList:e.mirror.appModel.pagesList,timerModalState:e.timer.modalState,timerTime:e.timer.time,universalInsertModal:e.universalInsertModal,isCommentsToolSelected:e.mirror.appModel.currentTool===l8.NLJ.COMMENTS,loadingBackgroundColor:e.desktopNewTab.loadingBackgroundColor,isReadOnly:e.mirror.appModel.isReadOnly,currentPage:e.mirror.appModel.currentPage,hyperlinkLocation:e.mirror.appModel.hyperlinkLocation,onCanvasNameEditorInfo:e.mirror.appModel.onCanvasNameEditorInfo,topLevelMode:e.mirror.appModel.topLevelMode,showUi:e.mirror.appModel.showUi,showToolbar:!0,showKeyboardShortcuts:e.mirror.appModel.showKeyboardShortcuts,loadingEmbeds:e.mirror.appModel.loadingEmbeds,fileIsLoading:e.progressBarState.mode===l8.Oin.HIDE_UI||e.progressBarState.mode===l8.Oin.ON_AND_LOCKED,hasCursorBot:!!(0,y.kc)().internal_only_debug_tools||!!e.userFlags.has_cursor_bot_onboarding_v2}}function emq({fileKey:e}){let t=(0,_.wA)(),n=(0,_.Pj)(),a=(0,_.d4)(e=>e.isFullscreenDocumentLoaded),l=(0,Fq.jz)(),r=(0,jk.e_)()===jk.$_.ELIGIBLE,i=(0,cp.Fk)(e=>{var t;return null==(t=e.getCurrentPage())?void 0:t.guid});return f.useLayoutEffect(()=>{if(!a||!r)return;let o=n.getState(),s=null==l?void 0:l.find(e=>e.inProgress),c=o.mirror.appModel.votingSessionInfo,d=c.sessionId&&l?l.find(e=>e.id===c.sessionId):null;if(s){if(s.id!==c.sessionId){t(FX.au({}));let n=(0,mV.VP)(o.loadingState,FX.$c(e))||o.voting.lastInitiatedVotingSessionId===s.id;t(FX.H1({votingStage:n?ei.W8Y.JOINED:ei.W8Y.NOT_JOINED}))}}else c.sessionId&&!d?t(FX.H1({votingStage:ei.W8Y.NO_SESSION})):!s&&c.sessionId&&c.votingStage!==ei.W8Y.ENDED&&(t(((null==d?void 0:d.pageNodeId)&&(0,eW.oA)(d.pageNodeId))===i?FX.H1({sessionId:c.sessionId,votingStage:ei.W8Y.ENDED}):FX.H1({votingStage:ei.W8Y.NO_SESSION})),t(FX.D6("")))},[e,t,l,a,r,n,i]),null}function emZ(){let e=(0,_.d4)(e=>e.isFullscreenDocumentLoaded),t=f.useRef(!1);return f.useEffect(()=>{e&&!t.current&&((0,Ep.Z1)(),t.current=!0)},[e,t]),null}function emQ({children:e,versionHistoryEnabled:t=!0}){var n,a,l,r,i,o,s,c,d,u,m,p,g,h,E;let b=(0,N.R)(emX),w=(0,ay.n6)(),T=(0,_.wA)(),x=(0,ew.TA)(),S=b.openFile?b.openFile.key:"",k=(0,ee3.I)(),I=(0,aN.J2)(null==(n=ei.Ez5)?void 0:n.uiState().shouldShowAutoLayoutHintsIfExist),A=(0,aN.J2)(null==(a=ei.Ez5)?void 0:a.uiState().autoLayoutShortcutHints),O=(0,eW.Rs)(eJ.Jpz,{key:S}),L=!1;if(O&&"loaded"===O.status&&b.openFile){let e=O.data.file;if(e&&x){let t=e.linkAccess,n=null==(l=e.team)?void 0:l.isStarterTeam,a=(null==(i=null==(r=e.team)?void 0:r.isStudentTeam)?void 0:i.status)==="loaded"&&(0,eW.oA)(null==(o=e.team)?void 0:o.isStudentTeam),s=!!e.roles.find(e=>e.userId===x);b.openFile.canEdit&&t===a_.PQ.EDIT&&(n||a)&&!s&&(L=!0)}}let P=(0,nS.R)(),D=(null==(s=b.openFile)?void 0:s.editorType)==="design",R=(0,tR.l7)(),M=!b.showUi&&(0,tl.TY)(b.dropdownShown),F=(null==(c=b.dropdownShown)?void 0:c.type)===tl.jv,B=F?null==(u=null==(d=b.dropdownShown)?void 0:d.data)?void 0:u.parameterEntryArgs:void 0,U=(null==(p=null==(m=b.dropdownShown)?void 0:m.data)?void 0:p.fireQuickActionsTrackingEvent)||nf.lQ,H=b.selectedView.editorType,G=(0,v.ZC)(H);H!==G&&G&&T(K.PQ([]));let V=b.topLevelMode===l8.lyf.HISTORY,z=!(0,end.t)(),j=(0,f.useCallback)(e=>{T(W.eM({dataTransfer:e.dataTransfer,clientX:e.clientX,clientY:e.clientY}))},[T]),J=(0,f.useCallback)(e=>{et.Y5.reparentRootElement(e),e&&e.addEventListener("drop",j)},[j]);return f.createElement(f.Fragment,null,(0,y.kc)().ee_color_management_debug?f.createElement(ee5,null):null,S&&f.createElement(emq,{fileKey:S}),!(C.Ay.isIpad||C.Ay.isIpadNative||C.Ay.isMobileBrowser||C.Ay.isMeetDevice)&&f.createElement(emZ,null),f.createElement("div",{className:emY.MY,"data-forward-events-to-fullscreen":!0},f.createElement(en3,null,(0,y.kc)().cursor_bot&&D&&b.hasCursorBot&&f.createElement(erl,null),!R&&f.createElement("div",{key:"fullscreen-container",ref:J}),f.createElement(eri,null),b.showToolbar&&f.createElement(emJ,{numUnreadComments:w,selectedView:b.selectedView,recordingKey:"toolbarView"}),!b.fileIsLoading&&f.createElement(enz,{context:{location:"editor",openFile:b.openFile}}),(null==(g=b.openFile)?void 0:g.template)&&f.createElement(enZ,null),M&&f.createElement(etv.e,{key:"fullscreen-menu",dropdown:b.dropdownShown,recordingKey:"mainMenu"}),F&&f.createElement(l7.tH,{boundaryKey:"QuickActionsOuter",onError:()=>{T(eS.F.enqueue({message:"Unable to open quick actions",type:"react-error"}))},fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(erX,{key:"quick-actions",parameterEntryArgs:B,fireTrackingEvent:U})),f.createElement(ee8,null),k&&f.createElement(l7.tH,{boundaryKey:"QuickActionsV2",onError:()=>{T(eS.F.enqueue({message:"Unable to open quick actions",type:"react-error"}))},fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(euV,null)),P&&(0,y.kc)().ce_al_experiments_on&&I&&A.size>0&&f.createElement(enJ,null),e,b.showUi&&t&&V&&!P&&f.createElement("div",{className:emY.yL},f.createElement(Tj.yU,{recordingKey:"versionHistoryView"})),b.hyperlinkLocation&&f.createElement(era.c,{hyperlink:b.hyperlinkLocation,editorType:(0,eq.oD)(b.selectedView.editorType),dispatch:T,recordingKey:"hyperlinkEditor"}),f.createElement(ee9.yq,null),b.progressBarState.mode!==l8.Oin.OFF&&f.createElement(Xe.z2,{editorType:(0,eq.oD)(b.selectedView.editorType),progressBarMode:b.progressBarState.mode,progressBarType:b.progressBarState.type,left:0}),b.showingReconnectingModal&&f.createElement(enc.z,{clientType:"fullscreen"}),f.createElement(ZB,null),f.createElement(ZU,{showStartModal:L}),b.dropdownShown&&!z&&!C.Ay.isMeetDevice&&f.createElement(l7.tH,{boundaryKey:"FullscreenContextMenu",onError:()=>{T(eS.F.enqueue({message:"Unable to open context menu",type:"react-error"}))},fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(ern,{dropdownShown:b.dropdownShown,selectedView:b.selectedView,ariaLabelledBy:(0,eN.t)("fullscreen.fullscreen_view.context_menu.aria_label")})),(null==(h=b.pickerShown)?void 0:h.id)===nz.C9&&f.createElement(et_,null),b.exportSettingsPickerShown.isShown&&f.createElement(eaP,null),(null==(E=b.pickerShown)?void 0:E.id)===ens.O&&f.createElement(ens.S,{recordingKey:"nudgeAmountPicker"}),b.eyedropper&&f.createElement(eao,null))),f.createElement(enj.EmbeddedFigmaScopeView,null),b.showKeyboardShortcuts&&f.createElement(eno,{recordingKey:"keyboardShortcutPanel"}))}let em$=f.memo(({shouldShowDragAndDropBorder:e})=>{var t;let n=(0,eb.p8)("isReadOnly"),a=(0,_.d4)(e=>e.progressBarState),l=(0,eb.p8)("loadingEmbeds"),r=(0,aN.ut)(null==(t=ei.Ez5)?void 0:t.uiState().showCanvasSearch,!1),i=(0,l9.Lk)(),o=(0,f.useRef)(null),s=(0,_.d4)(e=>e.userFlags),c=!!(0,y.kc)().internal_only_debug_tools||!!s.has_cursor_bot_onboarding_v2,d=(0,_.d4)(e=>e.openFile),u=d?d.key:"",m=(0,_.d4)(e=>e.universalInsertModal),p=(0,_.wA)();return(0,W.Gb)(u),f.createElement(f.Fragment,null,f.createElement(er.ED,null),f.createElement(emQ,null,a.mode!==l8.Oin.OFF&&f.createElement("div",{className:emY._q}),f.createElement(bA.pO,{initialFilterState:{currentPage:!1}},l.map(e=>f.createElement(qm,{key:`loading-embed-${e}`,nodeId:e})),f.createElement(ZF,null),f.createElement(o7,null),r&&f.createElement(Qu,null),(0,y.kc)().ce_al_experiments_on&&f.createElement(Qu,null),f.createElement(qr,null),f.createElement(ql,null),f.createElement(rZ,null),f.createElement(ZK,{commentsDetailContainerRef:o}),(0,y.kc)().cursor_bot&&c&&f.createElement(h9,null),f.createElement(Z8,null),f.createElement(bF,null),f.createElement(hr.Nz,null),f.createElement("div",{ref:o}),f.createElement(Zz,null),!n&&f.createElement(eeX,null),f.createElement(X0,null),e&&f.createElement(hr.X5,null)),f.createElement(y9,{isFigjamEditor:!1,isDesignEditor:!0,openFile:d}),m.showing&&f.createElement(l7.tH,{boundaryKey:"FdBrowseResourceModal",onError:()=>{p(eS.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(is,null))),i&&f.createElement(Qt,{className:emY.PA},f.createElement(oZ,null)),f.createElement(bN,null))}),em0="dev_handoff_canvas_pill--dimension--WEwpp",em1="dev_handoff_canvas_pill--size--9ZpSZ";function em2(e){return e===ei.mKm.HUG_CONTENT?"Auto":e===ei.mKm.FILL_CONTAINER?"100%":"Fixed"}function em5(e){let t=(0,lh.mJ)(e);if(!t)return null;let n="INSTANCE"===t.type||"SYMBOL"===t.type||t.isStateGroup||t.isInstanceSublayer||t.isSymbolSublayer,a=!0;return"TEXT"===t.type&&(t.autoRename||t.characters.substring(0,10)===t.name.substring(0,10))&&(a=!1),{guid:t.guid,name:t.name,showName:a,type:t.type,isFigmaPurple:n,boundingBox:t.absoluteBoundingBox,hasEnabledStaticImagePaint:t.hasEnabledStaticImagePaint,isState:t.isState,isStateGroup:t.isStateGroup,isUIElement:(0,Uj.$F)(t)&&!t.isStateGroup,stackCounterAlignItems:t.stackCounterAlignItems,stackMode:t.stackMode,isGroup:t.isGroup,canHaveStatus:t.canHaveStatus,hasStatus:t.hasStatus,horizontalSizeMode:em2(ei.Qa7.stackHorizontalSize(t.guid)),verticalSizeMode:em2(ei.Qa7.stackVerticalSize(t.guid)),size:t.size,objectsPanelThumbnailId:t.objectsPanelThumbnailId}}function em4(e){let t=(0,rE.Cc)(0,2,(e-.1)*5);return(0,rE.qE)(t,0,2)}function em3(e){let t=em5(e.guid),n=(0,aN.J2)((0,tM.UK)().showGuids),a=(0,lh.uQ)(),l=f.useRef(null),r=f.useCallback(e=>-em4(e),[]),i=t&&(t.hasStatus||t.canHaveStatus&&t.guid===a)?e=>e-20:void 0;return t&&"SECTION"!==t.type?f.createElement(Qc,{ref:l,node:t,key:e.guid,offsetX:-2,offsetY:(0,y.kc)().dt_frame_status_canvas?r:void 0,largeBorderRadius:(0,y.kc)().dt_frame_status_canvas,maxWidth:i,dataTestId:"devHandoffLayerNamePill"},f.createElement("div",{className:"dev_handoff_canvas_pill--layerName--eX5Zu"},f.createElement(Qd,{node:t}),t.showName&&f.createElement("span",{className:"dev_handoff_canvas_pill--pillText--7B3-h ellipsis--ellipsis--Tjyfa"},t.name,n&&` (${e.guid})`))):null}let em6=e=>e.toLocaleString("en",{maximumFractionDigits:5,useGrouping:!1});function em7(e,t=0){let n=(0,wR.v4)(),a=(0,wz.qM)(n,t,em6),{variable:l,variableDisplayName:r,isSuggested:i}=(0,w1.xp)(e,t);return l?{value:r,isSuggested:i}:{value:a}}function em8(e){let t=em5(e.guid),{value:n,isSuggested:a}=em7("WIDTH",(null==t?void 0:t.size.x)??0),{value:l,isSuggested:r}=em7("HEIGHT",(null==t?void 0:t.size.y)??0),i=f.useCallback(e=>em4(e),[]);return t&&t.isUIElement?f.createElement(Qc,{node:t,key:e.guid,dataTestId:"devHandoffSizePill",centered:!0,bottom:!0,offsetY:(0,y.kc)().dt_frame_status_canvas?i:void 0,largeBorderRadius:(0,y.kc)().dt_frame_status_canvas},f.createElement("div",{className:"dev_handoff_canvas_pill--sizeInfo--pKiuc text--fontPos11--2LvXf text--_fontBase--QdLsd"},f.createElement("span",{className:em0},(0,eN.tx)("fullscreen.properties_panel.transform_panel.w")),f.createElement("span",null,t.horizontalSizeMode),f.createElement("span",{className:em1,"data-testid":"canvasPillWidth"},n),f.createElement("span",null,a&&f.createElement(a2.B,{svg:wp.A})),f.createElement("span",{className:em0},(0,eN.tx)("fullscreen.properties_panel.transform_panel.h")),f.createElement("span",null,t.verticalSizeMode),f.createElement("span",{className:em1,"data-testid":"canvasPillHeight"},l),f.createElement("span",null,r&&f.createElement(a2.B,{svg:wp.A})))):null}function em9(){let{hoveredNode:e,selection:t}=(0,N.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection)[0],n=e.mirror.appModel.hoveredNode;return{hoveredNode:n===aT.Hr?null:n,selection:t===aT.Hr?null:t}}),[n,a]=f.useState(!1),l=f.useCallback(e=>{e.altKey!==n&&a(e.altKey)},[n]);return(f.useEffect(()=>(document.addEventListener("pointermove",l),document.addEventListener("keyup",l),document.addEventListener("keydown",l),()=>{document.removeEventListener("pointermove",l),document.removeEventListener("keyup",l),document.removeEventListener("keydown",l)})),n)?null:f.createElement(f.Fragment,null,t&&e===t&&f.createElement(em8,{guid:t}),e&&f.createElement(em3,{guid:e}))}var epe=n(663668);let ept="annotation--annotationContainer--k4xiM",epn="annotation--wrapperEditing--C2Zlx",epa="annotation--createAnnotation--tWKSM annotation--_annotationBase--MPByC",epl="annotation--contentContainer--vSuqs",epr="annotation--properties--1p6UF",epi="annotation--noValue--HHQOU",epo="annotation--propertyOptionIconSvg--LypST",eps="annotation--icon--w1enR",epc="annotation--chit--3je6E",epd="annotation--solidPaint--ClR6h",epu="annotation--solidPaintValue--9PQMf annotation--_ellipsis--8F1VE",epm="annotation--variablePill--VNxoI";function epp({valueProps:e,isHovered:t,variableContainerClassName:n}){if("mixed"===e.format){let a=e.value.some(e=>!!e.variable);return f.createElement("div",{className:nb()("annotation--multipleVariableWrapper--OW3M1",a&&"annotation--vertical--zmpVv")},e.value.map((l,r)=>f.createElement("div",{key:r,className:"annotation--multipleVariableValue--5-5xk"},f.createElement(epp,{valueProps:l,isHovered:t,variableContainerClassName:n}),r<e.value.length-1&&!a&&f.createElement("span",null,", "))))}let a=`${(0,wu.m3)(e)}`;return e.variable?f.createElement(w2.w,{dataTestId:"styledValueVariable",containerClassName:nb()(epm,n),text:e.variable,disableHover:!0,isHovered:t,isInferred:e.isSuggestedVariable,tooltip:e.isSuggestedVariable?(0,eN.t)("dev_handoff.variables.inferred_value",{value:a}):a}):f.createElement(f.Fragment,null,a)}function epf({svg:e}){return f.createElement(a2.B,{svg:e,className:nb()(eps,epo)})}var ep_=n(258890),epg=n(996620),eph=n(957069);function epE({node:e,variable:t,isPreview:n=!1}){return t?n?f.createElement(f.Fragment,null,t.name):f.createElement(w2.w,{containerClassName:epm,text:t.name,disableHover:!0}):(0,Zq.rO)(e.stackPrimaryAlignItems)?(0,eN.tx)("dev_handoff.annotations.auto"):f.createElement(f.Fragment,null,(0,wu.nd)(e.stackSpacing,"px"))}function epv({node:e,isPreview:t=!1}){var n,a;let l=(0,SL.u)(null==(a=null==(n=e.boundVariables)?void 0:n.itemSpacing)?void 0:a.id);return f.createElement("div",{className:l?void 0:"annotation--spacingProperty--RCjSM annotation--coloredProperty--OTQ6l"},f.createElement("span",null,f.createElement(epE,{node:e,variable:l,isPreview:t})))}function epy({rawValues:e,variables:t,isPreview:n=!1}){var a;if(e.length!==t.length)throw Error("<ManySidedProperty /> must have the same number of rawValues and variables");let l=t.map((t,n)=>({value:e[n],format:"pixels",variable:null==t?void 0:t.name})),r=null==(a=l[0])?void 0:a.variable;for(let e of l)if(e.variable!==r){if(n)return(0,eN.tx)("fullscreen.mixed");return f.createElement(epp,{variableContainerClassName:epm,valueProps:{format:"mixed",value:l}})}return r?n?f.createElement(f.Fragment,null,r):f.createElement(epp,{variableContainerClassName:epm,valueProps:l[0]}):e.some(t=>t!==e[0])?n?(0,eN.tx)("fullscreen.mixed"):f.createElement(epp,{variableContainerClassName:epm,valueProps:{format:"pixels",value:e}}):f.createElement(epp,{variableContainerClassName:epm,valueProps:{format:"pixels",value:e[0]}})}function epb({node:e,isPreview:t=!1}){var n,a,l,r,i,o,s,c;let{stackTopPadding:d,stackRightPadding:u,stackBottomPadding:m,stackLeftPadding:p}=e,_=(0,SL.u)(null==(a=null==(n=e.boundVariables)?void 0:n.paddingTop)?void 0:a.id),g=(0,SL.u)(null==(r=null==(l=e.boundVariables)?void 0:l.paddingRight)?void 0:r.id),h=(0,SL.u)(null==(o=null==(i=e.boundVariables)?void 0:i.paddingBottom)?void 0:o.id),E=(0,SL.u)(null==(c=null==(s=e.boundVariables)?void 0:s.paddingLeft)?void 0:c.id),v=[_,g,h,E].some(e=>!!e);return f.createElement("div",{className:nb()(v?void 0:"annotation--paddingProperty--ckvG6 annotation--coloredProperty--OTQ6l")},f.createElement("span",null,f.createElement(epy,{rawValues:[d,u,m,p],variables:[_,g,h,E],isPreview:t})))}function epC({node:e}){if("WRAP"===e.stackWrap)return f.createElement(epf,{svg:eph.A});switch(e.stackMode){case"HORIZONTAL":return f.createElement(epf,{svg:ep_.A});case"VERTICAL":return f.createElement(epf,{svg:epg.A});default:return null}}function epw({node:e}){if("WRAP"===e.stackWrap)return(0,eN.tx)("fullscreen.properties_panel.stack_panel.wrap");switch(e.stackMode){case"HORIZONTAL":return(0,eN.tx)("dev_handoff.annotations.autolayout_horizontal");case"VERTICAL":return(0,eN.tx)("dev_handoff.annotations.autolayout_vertical");default:return null}}function epT({node:e}){if("NONE"===e.stackMode)return null;if("HORIZONTAL"===e.stackMode)switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return(0,eN.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,eN.tx)("dev_handoff.annotations.alignment.left");case"MAX":return(0,eN.tx)("dev_handoff.annotations.alignment.bottom_left");case"BASELINE":return(0,eN.tx)("dev_handoff.annotations.alignment.baseline_left")}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return(0,eN.tx)("dev_handoff.annotations.alignment.top_center");case"CENTER":return(0,eN.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,eN.tx)("dev_handoff.annotations.alignment.bottom_center");case"BASELINE":return(0,eN.tx)("dev_handoff.annotations.alignment.baseline_center")}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return(0,eN.tx)("dev_handoff.annotations.alignment.top_right");case"CENTER":return(0,eN.tx)("dev_handoff.annotations.alignment.right");case"MAX":return(0,eN.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return(0,eN.tx)("dev_handoff.annotations.alignment.baseline_right")}}switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return(0,eN.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,eN.tx)("dev_handoff.annotations.alignment.top_center");case"MAX":return(0,eN.tx)("dev_handoff.annotations.alignment.top_right");case"BASELINE":return null}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return(0,eN.tx)("dev_handoff.annotations.alignment.left");case"CENTER":return(0,eN.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,eN.tx)("dev_handoff.annotations.alignment.right");case"BASELINE":return null}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return(0,eN.tx)("dev_handoff.annotations.alignment.bottom_left");case"CENTER":return(0,eN.tx)("dev_handoff.annotations.alignment.bottom_center");case"MAX":return(0,eN.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return null}}}function epx(e,t){let n=(0,_.d4)(e=>e.library),a=(0,H6.f$)(e),l=(0,lh.mJ)(a);if(!e||!a||!l)return null;let r=(0,xW.Gp)(e.key,[a],n);if(!r)return null;let i=r.value;return"DANGLING"===r.kind&&(i.style_type=t),i.description=l.description,i.name=l.name,i.isLocal="LOCAL"===r.kind,i}function epN(e,t){if(1===t)return e;let n=(100*t).toLocaleString("en",{maximumFractionDigits:2})+"%";return`${e} \xb7 ${n}`}function epS(e,t,n){let{opacity:a=1}=e;switch(e.type){case"SOLID":{if(!e.color)return null;let{color:l}=e,{a:r=1}=l,i=n({...l,a:r*a},{alphaInPercent:!0});return t?t.name:i}case"GRADIENT_LINEAR":return epN((0,eN.t)("dev_handoff.selection_colors.gradient_linear"),a);case"GRADIENT_ANGULAR":return epN((0,eN.t)("dev_handoff.selection_colors.gradient_angular"),a);case"GRADIENT_DIAMOND":return epN((0,eN.t)("dev_handoff.selection_colors.gradient_diamond"),a);case"GRADIENT_RADIAL":return epN((0,eN.t)("dev_handoff.selection_colors.gradient_radial"),a);case"IMAGE":return epN((0,eN.t)("dev_handoff.annotations.image"),a);case"VIDEO":return epN((0,eN.t)("dev_handoff.annotations.video"),a);default:return null}}function epk({paints:e,styleRef:t,variables:n}){let a=null==n?void 0:n[0],l=(0,Ib.Ig)(),r=(0,SL.u)(null==a?void 0:a.id),i=epx(t,"FILL");return 0===e.length?null:i?f.createElement(f.Fragment,null,i.name):e.length>1?(0,eN.tx)("dev_handoff.annotations.multiple"):f.createElement(f.Fragment,null,epS(e[0],r,l))}function epI({paints:e}){let t=e[0];return f.createElement(IT.J,{className:epc,tabIndex:-1,paint:t,allowMouseDownPropagation:!0})}function epA({paint:e,variableAlias:t}){let n=(0,Ib.Ig)(),a=(0,SL.u)(null==t?void 0:t.id),l=epS(e,a,n);return l?f.createElement("div",{className:epd},f.createElement(IT.J,{className:epc,paint:e,tabIndex:-1,allowMouseDownPropagation:!0}),f.createElement("span",{className:epu,title:l},a?f.createElement(w2.w,{containerClassName:epm,text:l,disableHover:!0}):l)):null}function epO({styleRef:e,styleType:t,hideIcon:n=!1}){let a=epx(e,t);return(!function(e){let t=(0,_.d4)(e=>e.library),n=(0,H6.f$)(e),a=n?(0,xW.Gp)(e.key,[n],t):void 0;(0,xW.w$)(a)}(e),a)?f.createElement("div",{className:epd},!n&&f.createElement("div",{className:nb()("annotation--styleChit--yCQ3O annotation--chit--3je6E",eps)},f.createElement(IS.zi,{dsStyle:a})),f.createElement("span",{className:epu,title:a.name},a.name)):null}function epL({paints:e,styleRef:t,variables:n}){let{data:a}=e;return t?f.createElement(epO,{styleRef:t,styleType:"FILL"}):0===a.length?null:f.createElement("div",{className:"annotation--mixedValues--Z0qIk"},a.map((e,t)=>f.createElement(epA,{key:t,paint:e,variableAlias:null==n?void 0:n[t]})))}var epP=n(666139);function epD({effects:e}){if(0===e.length)return null;if(e.length>1)return(0,eN.tx)("fullscreen.mixed");switch(e[0].type){case"DROP_SHADOW":return(0,eN.tx)("dev_handoff.annotations.shadow");case"BACKGROUND_BLUR":return(0,eN.tx)("fullscreen.properties_panel.effects.background_blur");case"FOREGROUND_BLUR":return(0,eN.tx)("fullscreen.properties_panel.effects.layer_blur");case"INNER_SHADOW":return(0,eN.tx)("fullscreen.properties_panel.effects.inner_shadow");case void 0:return null}}function epR({effects:e,styleRef:t}){return f.createElement(f.Fragment,null,e.map((e,n)=>f.createElement(epF,{effect:e,styleRef:t,key:n})))}let epM=new Th.SU;function epF({effect:e,styleRef:t}){var n,a;let l=(0,Ib.Ig)(),r=t&&f.createElement(epB,{styleRef:t});switch(e.type){case"DROP_SHADOW":case"INNER_SHADOW":{let{color:t}=e,i=t?l(t,{alphaInPercent:!0}):null,o=[null==(n=e.offset)?void 0:n.x,null==(a=e.offset)?void 0:a.y,e.radius,e.spread].filter(e=>void 0!==e).join(", ");return f.createElement("div",null,r,f.createElement("span",null,f.createElement(epD,{effects:[e]})),t&&f.createElement(f.Fragment,null,f.createElement("span",null),f.createElement("div",{className:epd},f.createElement(IT.J,{className:nb()(epc,"annotation--chitInline--vG6cM"),color:t,allowMouseDownPropagation:!0}),f.createElement("span",{className:epu,title:i||void 0},i))),f.createElement("span",null),f.createElement("span",null,o),e.blendMode&&"NORMAL"!==e.blendMode&&f.createElement(f.Fragment,null,f.createElement("span",null),f.createElement("span",null,epM.format(e.blendMode))))}case"BACKGROUND_BLUR":case"FOREGROUND_BLUR":return f.createElement("div",null,r,f.createElement("span",null,f.createElement(epD,{effects:[e]})),void 0!==e.radius&&f.createElement("span",null,` ${(0,wu.nd)(e.radius,"px")}`));case void 0:return null}}function epB({styleRef:e}){let t=(0,H6.f$)(e),n=(0,lh.mJ)(t);return t&&n?f.createElement("div",null,n.name):null}let epU=e=>{switch(e){case"RIGHT":return(0,eN.t)("inspect_panel.typography.align_right");case"CENTER":return(0,eN.t)("inspect_panel.typography.align_center");case"JUSTIFIED":return(0,eN.t)("inspect_panel.typography.align_justified");case"LEFT":return(0,eN.t)("dev_handoff.annotations.align_left")}};function epH(){return f.createElement(a2.B,{svg:A4.A,className:nb()(eps,epo)})}function epG({textAlignHorizontal:e}){return f.createElement(f.Fragment,null,epU(e))}function epV({lineHeightOrMixed:e,variableAlias:t,isPreview:n}){let a=(0,SL.u)(null==t?void 0:t.id);if("mixed"===e)return(0,eN.tx)("fullscreen.mixed");if(a&&n)return f.createElement(f.Fragment,null,a.name);if("PERCENT"===e.units&&100===e.value)return(0,eN.tx)("dev_handoff.annotations.auto");let l="RAW"===e.units?{value:100*e.value,units:"PERCENT"}:e;return f.createElement(wu.lN,{variableContainerClassName:epm,valueProps:{format:"fig_number",value:l,variable:null==a?void 0:a.name}})}function epK({fontNameOrMixed:e,variableAlias:t,isPreview:n}){let a=(0,SL.u)(null==t?void 0:t.id);return"mixed"===e?(0,eN.tx)("fullscreen.mixed"):a&&n?f.createElement(f.Fragment,null,a.name):f.createElement(wu.lN,{variableContainerClassName:epm,valueProps:{value:e.family,variable:null==a?void 0:a.name}})}function epW({fontWeightOrMixed:e,variableAlias:t,isPreview:n}){let a=(0,SL.u)(null==t?void 0:t.id);return"mixed"===e?(0,eN.tx)("fullscreen.mixed"):(a&&a.resolvedType!==ei.rXF.FLOAT&&(a=null),a&&n)?f.createElement(f.Fragment,null,a.name):f.createElement(wu.lN,{variableContainerClassName:epm,valueProps:{value:e,variable:null==a?void 0:a.name}})}var epz=n(595869),epj=n(560185),epJ=n(30562),epY=n(438806),epX=n(904595),epq=n(235107),epZ=n(58502),epQ=n(144919);function ep$({node:e}){var t;let{symbolId:n}=e;if(!n)return f.createElement(f.Fragment,null);let a=lE.q.instance.get(n);if(!a)return f.createElement(f.Fragment,null);if(a.isState){let e=null==(t=a.parentNode)?void 0:t.name;return f.createElement(f.Fragment,null,`${e} (${a.name})`)}return f.createElement(f.Fragment,null,a.name)}let ep0=new Map([[ei.L5V.HEIGHT,{label:(0,eN.tx)("fullscreen.properties_panel.transform_panel.height"),category:"dimension",Icon:()=>f.createElement(epf,{svg:epY.A}),PreviewValue:({node:e})=>f.createElement(ep7,{value:e.size.y,variableAlias:e.boundVariables.height,isPreview:!0}),DisplayValue:({node:e})=>f.createElement(ep7,{value:e.size.y,variableAlias:e.boundVariables.height}),index:0}],[ei.L5V.MIN_HEIGHT,{label:(0,eN.tx)("fullscreen.properties_panel.stack_panel.minmax.min_height_tt"),category:"dimension",Icon:()=>f.createElement(epf,{svg:epY.A}),PreviewValue:({node:e})=>f.createElement(ep7,{value:e.minHeight,variableAlias:e.boundVariables.minHeight,isPreview:!0}),DisplayValue:({node:e})=>f.createElement(ep7,{value:e.minHeight,variableAlias:e.boundVariables.minHeight}),index:0}],[ei.L5V.MAX_HEIGHT,{label:(0,eN.tx)("fullscreen.properties_panel.stack_panel.minmax.max_height_tt"),category:"dimension",Icon:()=>f.createElement(epf,{svg:epY.A}),PreviewValue:({node:e})=>f.createElement(ep7,{value:e.maxHeight,variableAlias:e.boundVariables.maxHeight,isPreview:!0}),DisplayValue:({node:e})=>f.createElement(ep7,{value:e.maxHeight,variableAlias:e.boundVariables.maxHeight}),index:0}],[ei.L5V.WIDTH,{label:(0,eN.tx)("fullscreen.properties_panel.transform_panel.width"),category:"dimension",Icon:()=>f.createElement(epf,{svg:epq.A}),PreviewValue:({node:e})=>f.createElement(ep7,{value:e.size.x,variableAlias:e.boundVariables.width,isPreview:!0}),DisplayValue:({node:e})=>f.createElement(ep7,{value:e.size.x,variableAlias:e.boundVariables.width}),index:0}],[ei.L5V.MIN_WIDTH,{label:(0,eN.tx)("fullscreen.properties_panel.stack_panel.minmax.min_width_tt"),category:"dimension",Icon:()=>f.createElement(epf,{svg:epq.A}),PreviewValue:({node:e})=>f.createElement(ep7,{value:e.minWidth,variableAlias:e.boundVariables.minWidth,isPreview:!0}),DisplayValue:({node:e})=>f.createElement(ep7,{value:e.minWidth,variableAlias:e.boundVariables.minWidth}),index:0}],[ei.L5V.MAX_WIDTH,{label:(0,eN.tx)("fullscreen.properties_panel.stack_panel.minmax.max_width_tt"),category:"dimension",Icon:()=>f.createElement(epf,{svg:epq.A}),PreviewValue:({node:e})=>f.createElement(ep7,{value:e.maxWidth,variableAlias:e.boundVariables.maxWidth,isPreview:!0}),DisplayValue:({node:e})=>f.createElement(ep7,{value:e.maxWidth,variableAlias:e.boundVariables.maxWidth}),index:0}],[ei.L5V.CORNER_RADIUS,{label:(0,eN.tx)("fullscreen.properties_panel.transform_panel.corner_radius"),category:"dimension",Icon:()=>f.createElement(epf,{svg:epz.A}),PreviewValue:({node:e})=>f.createElement(ep5,{node:e,isPreview:!0}),DisplayValue:({node:e})=>f.createElement(ep5,{node:e}),index:0}],[ei.L5V.STACK_MODE,{label:(0,eN.tx)("dev_handoff.annotations.autolayout_mode"),category:"stack",Icon:({node:e})=>f.createElement(epC,{node:e}),PreviewValue:({node:e})=>f.createElement(epw,{node:e}),DisplayValue:({node:e})=>f.createElement(epw,{node:e}),index:0}],[ei.L5V.STACK_ALIGNMENT,{label:(0,eN.tx)("dev_handoff.annotations.alignment"),category:"stack",Icon:({node:e})=>f.createElement(epf,{svg:(0,xU.GN)(e)}),PreviewValue:({node:e})=>f.createElement(epT,{node:e}),DisplayValue:({node:e})=>f.createElement(epT,{node:e}),index:0}],[ei.L5V.STACK_SPACING,{label:(0,eN.tx)("inspect_panel.properties.gap"),category:"stack",Icon:({node:e})=>f.createElement(epf,{svg:"HORIZONTAL"===e.stackMode?epj.A:epJ.A}),PreviewValue:({node:e})=>f.createElement(epv,{node:e,isPreview:!0}),DisplayValue:({node:e})=>f.createElement(epv,{node:e}),index:0}],[ei.L5V.STACK_PADDING,{label:(0,eN.tx)("inspect_panel.properties.padding"),category:"stack",Icon:()=>f.createElement(epf,{svg:epX.A}),PreviewValue:({node:e})=>f.createElement(epb,{node:e,isPreview:!0}),DisplayValue:({node:e})=>f.createElement(epb,{node:e}),index:0}],[ei.L5V.TEXT_STYLE,{label:(0,eN.tx)("dev_handoff.annotations.text_style"),category:"text",Icon:epH,PreviewValue:({node:e})=>f.createElement(ep9,{styleRef:e.inheritedTextStyle}),DisplayValue:({node:e})=>f.createElement(epO,{styleRef:e.inheritedTextStyle,styleType:"TEXT",hideIcon:!0}),index:0}],[ei.L5V.FONT_FAMILY,{label:(0,eN.tx)("inspect_panel.typography.font"),category:"text",Icon:epH,PreviewValue:({node:e})=>{var t;return f.createElement(epK,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:null==(t=e.boundVariables.fontFamily)?void 0:t[0],isPreview:!0})},DisplayValue:({node:e})=>{var t;return f.createElement(epK,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:null==(t=e.boundVariables.fontFamily)?void 0:t[0]})},index:0}],[ei.L5V.FONT_STYLE,{label:(0,eN.tx)("inspect_panel.code.font_style"),category:"text",Icon:epH,PreviewValue:({node:e})=>f.createElement(f.Fragment,null,e.fontName.style),DisplayValue:({node:e})=>f.createElement(f.Fragment,null,e.fontName.style),index:0}],[ei.L5V.FONT_SIZE,{label:(0,eN.tx)("dev_handoff.annotations.font_size"),category:"text",Icon:epH,PreviewValue:({node:e})=>{var t;return f.createElement(ep7,{value:e.fontSizeOrMixed,variableAlias:null==(t=e.boundVariables.fontSize)?void 0:t[0],isPreview:!0})},DisplayValue:({node:e})=>{var t;return f.createElement(ep7,{value:e.fontSizeOrMixed,variableAlias:null==(t=e.boundVariables.fontSize)?void 0:t[0]})},index:0}],[ei.L5V.LINE_HEIGHT,{label:(0,eN.tx)("fullscreen.type_panel.line_height"),category:"text",Icon:epH,PreviewValue:({node:e})=>{var t;return f.createElement(epV,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:null==(t=e.boundVariables.lineHeight)?void 0:t[0],isPreview:!0})},DisplayValue:({node:e})=>{var t;return f.createElement(epV,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:null==(t=e.boundVariables.lineHeight)?void 0:t[0]})},index:0}],[ei.L5V.LETTER_SPACING,{label:(0,eN.tx)("fullscreen.type_panel.letter_spacing"),category:"text",Icon:epH,PreviewValue:({node:e})=>{var t;return f.createElement(ep8,{value:e.letterSpacingOrMixed,variableAlias:null==(t=e.boundVariables.letterSpacing)?void 0:t[0],isPreview:!0})},DisplayValue:({node:e})=>{var t;return f.createElement(ep8,{value:e.letterSpacingOrMixed,variableAlias:null==(t=e.boundVariables.letterSpacing)?void 0:t[0]})},index:0}],[ei.L5V.TEXT_ALIGN_HORIZONTAL,{label:(0,eN.tx)("dev_handoff.annotations.text_align"),category:"text",Icon:epH,PreviewValue:({node:e})=>f.createElement(epG,{textAlignHorizontal:e.textAlignHorizontal}),DisplayValue:({node:e})=>f.createElement(epG,{textAlignHorizontal:e.textAlignHorizontal}),index:0}],[ei.L5V.FONT_WEIGHT,{label:(0,eN.tx)("inspect_panel.typography.weight"),category:"text",Icon:epH,PreviewValue:({node:e})=>{var t;return f.createElement(epW,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:null==(t=e.boundVariables.fontStyle)?void 0:t[0],isPreview:!0})},DisplayValue:({node:e})=>{var t;return f.createElement(epW,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:null==(t=e.boundVariables.fontStyle)?void 0:t[0]})},index:0}],[ei.L5V.FILL,{label:(0,eN.tx)("fullscreen.properties_panel.fill.fill"),category:"paint",Icon:({node:e})=>f.createElement(epI,{paints:e.fillPaints.data}),PreviewValue:({node:e})=>f.createElement(epk,{paints:e.fillPaints.data,variables:e.boundVariables.fills,styleRef:e.inheritedFillStyle}),DisplayValue:({node:e})=>f.createElement(epL,{paints:e.fillPaints,styleRef:e.inheritedFillStyle,variables:e.boundVariables.fills}),index:0}],[ei.L5V.STROKE,{label:(0,eN.tx)("fullscreen.properties_panel.fill.stroke"),category:"paint",Icon:({node:e})=>f.createElement(epI,{paints:e.strokePaints.data}),PreviewValue:({node:e})=>f.createElement(epk,{paints:e.strokePaints.data,variables:e.boundVariables.strokes,styleRef:e.inheritedFillStyle}),DisplayValue:({node:e})=>f.createElement(epL,{paints:e.strokePaints,styleRef:e.inheritedFillStyleForStroke,variables:e.boundVariables.strokes}),index:0}],[ei.L5V.STROKE_WIDTH,{label:(0,eN.tx)("fullscreen.properties_panel.borders.stroke_width"),category:"paint",Icon:()=>f.createElement(epf,{svg:epZ.A}),PreviewValue:({node:e})=>f.createElement(ep4,{node:e,isPreview:!0}),DisplayValue:({node:e})=>f.createElement(ep4,{node:e}),index:0}],[ei.L5V.EFFECT,{label:(0,eN.tx)("inspect_panel.code.effect"),category:"paint",Icon:function(){return f.createElement(epf,{svg:epP.A})},PreviewValue:({node:e})=>f.createElement(epD,{effects:e.effects.filter(e=>e.visible)}),DisplayValue:({node:e})=>f.createElement(epR,{effects:e.effects.filter(e=>e.visible),styleRef:e.inheritedEffectStyle}),index:0}],[ei.L5V.OPACITY,{label:(0,eN.tx)("fullscreen.scrubbable.opacity"),category:"paint",Icon:()=>f.createElement(epf,{svg:epQ.A}),PreviewValue:({node:e})=>f.createElement(ep2,{node:e,isPreview:!0}),DisplayValue:({node:e})=>f.createElement(ep2,{node:e}),index:0}],[ei.L5V.COMPONENT,{label:(0,eN.tx)("dev_handoff.annotations.component"),category:"component",Icon:()=>f.createElement(epf,{svg:Na.A}),PreviewValue:ep$,DisplayValue:ep$,index:0}]]),ep1=0;function ep2({node:e,isPreview:t=!1}){let n=e.boundVariables.opacity,a=(0,SL.u)((null==n?void 0:n.id)??void 0);return a&&t?f.createElement(f.Fragment,null,a.name):f.createElement(epp,{variableContainerClassName:epm,valueProps:{format:"percent",value:e.opacity,variable:null==a?void 0:a.name}})}function ep5({node:e,isPreview:t=!1}){var n,a,l,r,i,o,s,c;let{rectangleTopLeftCornerRadius:d,rectangleTopRightCornerRadius:u,rectangleBottomRightCornerRadius:m,rectangleBottomLeftCornerRadius:p}=e,_=(0,SL.u)(null==(a=null==(n=e.boundVariables)?void 0:n.topLeftRadius)?void 0:a.id),g=(0,SL.u)(null==(r=null==(l=e.boundVariables)?void 0:l.topRightRadius)?void 0:r.id),h=(0,SL.u)(null==(o=null==(i=e.boundVariables)?void 0:i.bottomRightRadius)?void 0:o.id),E=(0,SL.u)(null==(c=null==(s=e.boundVariables)?void 0:s.bottomLeftRadius)?void 0:c.id);return f.createElement(epy,{rawValues:[d,u,m,p],variables:[_,g,h,E],isPreview:t})}function ep4({node:e,isPreview:t=!1}){return e.borderStrokeWeightsIndependent?f.createElement(ep6,{node:e,isPreview:t}):f.createElement(ep3,{node:e,isPreview:t})}function ep3({node:e,isPreview:t}){var n;let a=(0,SL.u)(null==(n=e.boundVariables.strokeWeight)?void 0:n.id);return a&&t?f.createElement(f.Fragment,null,a.name):f.createElement(epp,{variableContainerClassName:epm,valueProps:{value:e.strokeWeight,variable:null==a?void 0:a.name,format:"pixels"}})}function ep6({node:e,isPreview:t}){var n,a,l,r;let{borderTopWeight:i,borderRightWeight:o,borderBottomWeight:s,borderLeftWeight:c}=e,d=(0,SL.u)(null==(n=e.boundVariables.strokeTopWeight)?void 0:n.id),u=(0,SL.u)(null==(a=e.boundVariables.strokeRightWeight)?void 0:a.id),m=(0,SL.u)(null==(l=e.boundVariables.strokeBottomWeight)?void 0:l.id),p=(0,SL.u)(null==(r=e.boundVariables.strokeLeftWeight)?void 0:r.id);return f.createElement(epy,{rawValues:[i,o,s,c],variables:[d,u,m,p],isPreview:t})}function ep7({value:e,variableAlias:t,isPreview:n}){let a=(0,SL.u)(null==t?void 0:t.id);return null===e?null:"mixed"===e?(0,eN.tx)("fullscreen.mixed"):a&&n?f.createElement(f.Fragment,null,a.name):f.createElement(epp,{variableContainerClassName:epm,valueProps:{value:(0,wu.nd)(e,"px"),variable:null==a?void 0:a.name}})}function ep8({value:e,variableAlias:t,isPreview:n}){let a=(0,SL.u)(null==t?void 0:t.id);return"mixed"===e?(0,eN.tx)("fullscreen.mixed"):a&&n?f.createElement(f.Fragment,null,a.name):f.createElement(epp,{variableContainerClassName:epm,valueProps:{format:"fig_number",value:e,variable:null==a?void 0:a.name}})}function ep9({styleRef:e}){let t=(0,H6.f$)(e),n=(0,lh.mJ)(t);return n?f.createElement(f.Fragment,null,n.name):null}function efe(){let e=(0,a6.IL)(),t=(0,e2.Xr)(ea8.J),n=!!(0,tR.hA)();return f.useCallback(a=>{o4.l7.user("clear-annotations",()=>{a.setAnnotation(null);let l=(0,ey.kh)(lE.q.instance,a.guid);e("delete_annotation",{nodeId:a.guid,nodeType:a.type,tlfId:null==l?void 0:l.guid,isDevModeFocusView:n}),t(!1),(0,Vt.d)().lockMouseMoves.set(!1),et.Y5.triggerAction("commit")})},[t,e,n])}ep0.forEach(e=>{e.index=ep1++});var eft=n(462166);let efn=(0,lf.jz)("220px");var efa=(e=>(e[e.ALIGNED=0]="ALIGNED",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW",e))(efa||{});function efl(e,t,n){let{x:a,y:l,w:r,h:i}=e.absoluteBoundingBox,{x:o,w:s}=t.absoluteBoundingBox,{offsetX:c,offsetY:d,zoomScale:u}=n,m=a-o,p=o+s-(a+r),f=m<p,_=Math.min(Math.max(20*u,5),20);return f?{lineWidth:m*u+_,offsetX:(o-c)*u-_,offsetY:(l+i/2-d)*u,isLeftAligned:f}:{lineWidth:p*u+_,offsetX:(o+s-c)*u+_,offsetY:(l+i/2-d)*u,isLeftAligned:f}}function efr(e,t,n){let a=[];for(let t of e){let e=(n||t.height)+8;for(a.push({basis:t.offsetY-e/2,length:1,height:e});a.length>1&&function(e,t){let n=e.basis+e.height-t.basis;return!(n<=0)&&(e.height+=t.height,e.length+=t.length,e.basis-=n*t.height/e.height,!0)}(a[a.length-2],a[a.length-1]);)a.pop()}let l=0;for(let r of a){let{basis:a}=r;for(let i=0;i<r.length;i++){let r=e[l],i=(n||r.height)+8;t[r.node.guid]=a+i/2,a+=i,l++}}}function efi(e,t,n){let a=[],l=[],r={};for(let e of t)e.isLeftAligned?a.push(e):l.push(e);return efr(a,r,n?6:void 0),efr(l,r,n?6:void 0),t.map(t=>{let{y:n,h:a,w:l}=t.node.absoluteBoundingBox,i=r[t.node.guid],o=(n-e.offsetY)*e.zoomScale,s=t.lineWidth,c=0,d=0,u=t.lineWidth;return i<o?(c=1,d=o-i,u+=l/2*e.zoomScale):i>(n+a-e.offsetY)*e.zoomScale&&(c=2,d=i-(n+a-e.offsetY)*e.zoomScale,u+=l/2*e.zoomScale),{...t,offsetY:i,lineAlignment:c,lineHeight:d,lineWidth:u,originalLineWidth:s}})}function efo({node:e,setDimensions:t,offsetX:n,offsetY:a,lineWidth:l,originalLineWidth:r,lineHeight:i,lineAlignment:o,isLeftAligned:s,viewportInfo:c,shouldMinimize:d,canOverlapNode:u=!1,children:m}){let p=(0,a6.IL)(),g=(0,f.useRef)(null),E=(0,C8.w)(d?void 0:g),v=(0,_.d4)(e=>e.mirror.appModel.hoveredNode),[y,b]=(0,f.useState)(!1),C=(0,U._I)(),w=(0,F8.T)("quick_handoff"),T=(0,eb.dH)(),x="ui3"===(0,h.DP)().version,N=e.guid===v||y,k=(0,lh.uQ)(),I=(0,S.md)(ea8.J),A=I&&k===e.guid,O=d&&!A,L=T===l8.NLJ.ANNOTATE&&!N&&null!==k&&k!==e.guid,P=A||c.zoomScale>=.05&&(e.guid===k||e.annotations.length>0),D=(0,sd.LO)(),R=f.useCallback(e=>{(0,Vt.d)().lockMouseMoves.set(e)},[]);(0,f.useLayoutEffect)(()=>{E&&t(e.guid,E)},[e.guid,E,t]);let M={top:`${c.y+c.height/2}px`,left:`${c.x+c.width/2}px`,transform:`translate(${n}px, calc(${a}px - 50%))`};return f.createElement("div",{ref:g,className:nb()("annotation--annotationWrapper--pKMw2",{"annotation--wrapperMinimized--UOExu":O&&!N,[epn]:A}),style:M,"data-testid":"annotationWrapper"},P&&f.createElement(f.Fragment,null,f.createElement("div",{className:nb()("annotation--annotationLine--jr4Mc",{"annotation--annotationLineLeftAligned--W-1DZ":s,"annotation--annotationLineAboveNode--WwqWD":o===efa.ABOVE,"annotation--annotationLineBelowNode--JeafT":o===efa.BELOW}),style:{width:l,height:i}},f.createElement("div",{className:nb()("annotation--annotationLineStartDot--x6RNc",{"annotation--annotationLineStartDotHovered--Chqa7":!C&&N})}),f.createElement("div",{className:"annotation--annotationLineEndDot--Lsq0a"})),f.createElement("div",{onClick:C?void 0:w,onMouseOut:()=>{R(!1),b(!1)},onMouseOver:()=>{I||(R(!0),aT.Uc(e.guid),O&&!y&&p("hover_minimized_annotation",{nodeId:e.guid,nodeType:e.type}),b(!0))},className:nb()({"annotation--annotationLeftAligned--FHQRp":s,"annotation--annotationRightAligned--VrH8e":!s,"annotation--annotationHovered--QUHJv":!A&&N}),style:{transform:function(e,t,n,a,l,r,i,o){let s=ei.Ez5.isFullscreenYScrollbarNeeded()&&!o;if(n){let n=`calc(${-a}px - ${e.width/2}px + ${i.left}px + 4px)`,o=r?`calc(${l+t*e.zoomScale}px - 100% - 8px)`:`calc(${l}px - 100% - 8px)`;return`translate(min(${o}, max(-100%, ${n})), 0)`}{let n=r?`calc(-${l+t*e.zoomScale}px + 8px)`:`calc(-${l}px + 8px)`,o=`calc(${e.width/2}px - ${a}px - 100% - ${i.right}px - ${s?16:4}px)`;return`translate(max(${n}, min(0px, ${o})), 0)`}}(c,e.absoluteBoundingBox.w,s,n,r,u,D,x)}},f.createElement("div",{className:nb()("annotation--annotationHoverTarget--4y3Xc",{"annotation--annotationHoverTargetLeftAligned--G1twU":s})}),C&&(!O||N)&&m(L))))}var efs=n(378789);function efc({viewportInfo:e,nodeInfo:t,setDimensions:n}){let a=function(){let e=(0,a6.IL)(),{Sprig:t}=(0,aP.A)(),n=!!(0,tR.hA)();return f.useCallback((a,l,r)=>{o4.l7.user(r?"edit-annotation":"create-annotation",()=>{a.setAnnotation(l);let i=(0,ey.kh)(lE.q.instance,a.guid),o={nodeType:a.type,nodeId:a.guid,tlfId:(null==i?void 0:i.guid)??a.guid,hasText:!!l.label,numProperties:l.properties.length,isDevModeFocusView:n};r?e("edit_annotation",o):(e("create_annotation",o),t("track","create_annotation")),et.Y5.triggerAction("commit")})},[t,e,n])}(),l=efe(),r=(0,e2.Xr)(ea8.J),{node:i}=t,o=i.annotations[0],[s,c]=f.useState((null==o?void 0:o.label)??""),[d,u]=f.useState((null==o?void 0:o.properties)??[]),m=f.useCallback(()=>{let e=o&&(""!==o.label||o.properties.length>0),t=0===(0,epe.A)(s).length;t&&0===d.length?o&&l(i):a(i,{label:t?"":s,properties:d},e),r(!1),(0,Vt.d)().lockMouseMoves.set(!1)},[o,s,d,l,i,a,r]);return f.createElement(f.Fragment,null,f.createElement(eff,{viewportInfo:e,onPointerDown:m}),f.createElement(efo,{key:t.node.guid,node:t.node,viewportInfo:e,shouldMinimize:!1,offsetX:t.offsetX,offsetY:t.offsetY,lineWidth:t.lineWidth,originalLineWidth:t.originalLineWidth,lineHeight:t.lineHeight,lineAlignment:t.lineAlignment,isLeftAligned:t.isLeftAligned,setDimensions:n,canOverlapNode:!0},()=>f.createElement(efd,{node:t.node,saveAnnotation:m,inputText:s,setInputText:c,inputProperties:d,setInputProperties:u})))}function efd({node:e,saveAnnotation:t,inputText:n,setInputText:a,inputProperties:l,setInputProperties:r}){let i=(0,a6.IL)(),o=efe(),[s,c]=f.useState(-1),[d,u]=f.useState(!1),[m,p]=f.useState(!1),_=f.useRef(null),g=f.useRef(null),h=f.useRef(null),{availableProperties:E,selectedProperties:v}=f.useMemo(()=>{let t=[],n=[];for(let a of efu)l.some(e=>e.type===a.type)?n.push(a):(0,eft.J)(e,a.type,!0)&&t.push(a);return{availableProperties:t,selectedProperties:n}},[e,l]);f.useEffect(()=>{i("show_annotation_dialog",{nodeId:e.guid,nodeType:e.type})},[i,e.guid,e.type]);let y=f.useCallback(()=>{var e;null==(e=_.current)||e.focus()},[]),b=f.useCallback(e=>{c(-1),u(!1),r([...l,{type:e}])},[r,l]);function C(e){r(l.filter(t=>t.type!==e)),y()}let w=f.useCallback(()=>{(0,Vt.d)().lockMouseMoves.set(!1)},[]),T=f.useCallback((e,t)=>{if(c(e),p(t),t&&g.current){for(let t of g.current.children)if(t.getAttribute("data-property-type")===`property-${E[e]}`){t.focus();break}}},[c,p,E]),x=f.useCallback(()=>{var e;d?(u(!1),c(-1),null==(e=h.current)||e.focus()):t()},[d,t]),N=f.useCallback(()=>{d&&(-1===s?T(E.length-1,!0):s>0&&T(s-1,!0))},[E.length,s,T,d]),S=f.useCallback((e,t)=>{if(d){-1===s?T(0,!0):s<E.length-1&&T(s+1,!0);return}e&&!t&&(u(!0),T(0,!0))},[E.length,d,s,T]),k=(0,n_.v_)("createAnnotation","keydown",(0,f.useCallback)(e=>{var t;"Escape"===e.key?x():"ArrowUp"===e.key?(N(),e.stopPropagation()):"ArrowDown"===e.key?(S(e.ctrlKey||e.metaKey,e.shiftKey),e.stopPropagation()):("Enter"===e.key||" "===e.key)&&s>=0&&s<E.length&&(b(E[s].type),e.preventDefault(),null==(t=h.current)||t.focus())},[E,S,N,x,s,b]));f.useEffect(()=>(document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}),[k]);let I=n_.qP("annotationLabelInput","submit",a),A=n_.qP("annotationLabelInput","enter",t),O=e=>{u(!d),e?T(0,!0):c(-1)},L=0===n.length&&0===v.length;return f.createElement(Bo.vL,{name:"create-annotation",focusOnMount:!0,handleKeyDown:e=>{let{event:n}=e;"Escape"===n.key&&(e.accept(),t())}},f.createElement("div",{onPointerDown:vm.dG},f.createElement("div",{className:nb()(epa,nz.Dm)},f.createElement("div",{className:nb()(epl,{"annotation--contentContainerNoProperties--pc2WE":0===v.length})},f.createElement("div",{dir:"auto"},f.createElement(xY.X,{fallback:null,errorFallback:null,mountBehavior:"focus",placeholder:(0,eN.t)("dev_handoff.annotations.add_annotation"),defaultValue:n,onInputChange:I,onBlur:nf.lQ,hideToolbar:!0,onEnterKeyPressed:A})),v.length>0&&f.createElement("div",{className:epr},v.map(t=>f.createElement(efp,{key:`selected-${t.type}`,onRemoveProp:C,node:e,property:t})))),f.createElement("div",{className:"annotation--authoringRow--cIo3-"},f.createElement(a7.GG,{className:nb()("annotation--addPropertyButton--67vPO",{"annotation--active--Q00x6":d}),forwardedRef:h,onMouseDown:e=>O(AY(e)),onKeyDown:e=>{d||"Enter"!==e.code&&"Space"!==e.code||(O(!0),e.preventDefault(),e.stopPropagation())},tabIndex:0,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.annotations.pin_properties_tooltip"),recordingKey:"createAnnotationPinPropertyButton"},f.createElement(a2.B,{className:"annotation--plusIcon--Ove-l",svg:IF.A,width:"16",height:"16"}),(0,eN.tx)("dev_handoff.annotations.pin_properties_label")),f.createElement(iG.K0,{key:"trash",svg:efs.A,className:nb()("annotation--iconButton--w7kfn",eps),onMouseDown:()=>{o(e),w()},tabIndex:0,disabled:L,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.annotations.delete"),recordingKey:"createAnnotationTrashIcon"}))),d&&f.createElement("div",{onMouseLeave:()=>T(-1,!1),ref:g,onBlur:e=>{var t;(null==(t=e.relatedTarget)?void 0:t.getAttribute("data-property-type"))||u(!1)},className:nb()(epa,"annotation--dropdown--WLrjl")},0===E.length&&f.createElement("div",{className:"annotation--allPropertiesAdded--KzT8m"},(0,eN.tx)("dev_handoff.annotations.all_properties_added")),E.map((t,n)=>f.createElement(f.Fragment,{key:`option-${t.type}`},n>0&&t.config.category!==E[n-1].config.category&&f.createElement("div",{className:"annotation--propertyDivider--Q3tgS"}),f.createElement(efm,{node:e,property:t,isHovered:s===n,autoFocus:s===n&&m,onMouseOver:()=>T(n,!1),onMouseDown:e=>{b(t.type),e.preventDefault()}}))))))}let efu=Array.from(ep0.entries()).map(([e,t])=>({type:e,config:t}));function efm({node:e,property:t,isHovered:n,autoFocus:a,onMouseDown:l,onMouseOver:r}){let i=t.config.PreviewValue,o=t.config.Icon;return f.createElement(a7.GG,{className:nb()("annotation--propertyOption--GJWeu text--fontPos12--YsUAh text--_fontBase--QdLsd",{"annotation--hoveredProperty--ZOJgv":n}),onMouseDown:l,onMouseOver:r,role:"menuitem",autoFocus:a,"data-property-type":`property-${t.type}`,tabIndex:-1,recordingKey:`createAnnotationOptionButton-${t.type}`},f.createElement("div",{className:"annotation--propertyOptionIconLabel--vFND-"},f.createElement("div",{className:"annotation--propertyOptionIcon---NJse"},f.createElement(o,{node:e})),t.config.label),f.createElement("div",{className:nb()("annotation--preview--SrnLk","annotation--propertyValue--yhAB- annotation--_ellipsis--8F1VE")},f.createElement(i,{node:e})))}function efp({node:e,onRemoveProp:t,property:n}){let a=n.config.DisplayValue,l=(0,eft.J)(e,n.type,!1);return f.createElement(f.Fragment,null,f.createElement("span",{className:"annotation--selectedPropertyDisplayLabel--AtFEJ"},n.config.label),f.createElement("div",{className:"annotation--selectedPropertyValueWrapper--OyM0X"},f.createElement("span",{className:nb()("annotation--selectedPropertyValue--wwu2U",{[epi]:!l})},l?f.createElement(a,{node:e}):(0,eN.tx)("dev_handoff.annotations.no_value")),f.createElement("span",{className:"annotation--selectedPropertyDelete--DMdrA"},f.createElement(a7.GG,{className:"annotation--selectedPropertyDeleteButton--rko2T",recordingKey:`removeAnnotation${n.type}`,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("dev_handoff.annotations.remove_property"),onClick:o4.nc.user("remove-annotation",()=>{t(n.type)}),onKeyDown:o4.nc.user("remove-annotation",e=>{t(n.type),e.preventDefault()})},f.createElement(MU.f,null)))))}function eff({viewportInfo:e,onPointerDown:t}){return f.createElement(a7.D8,{className:`${epn} ${nz.Dm} ${nz.Uu}`,recordingKey:"annotationDialogBackground",style:{position:"absolute",left:e.x,top:e.y,width:e.width,height:e.height},onPointerDown:t})}var ef_=n(278312);function efg({viewportInfo:e,nodeInfo:t,setDimensions:n}){return f.createElement(efo,{key:t.node.guid,node:t.node,viewportInfo:e,shouldMinimize:t.shouldMinimize,offsetX:t.offsetX,offsetY:t.offsetY,lineWidth:t.lineWidth,originalLineWidth:t.originalLineWidth,lineHeight:t.lineHeight,lineAlignment:t.lineAlignment,isLeftAligned:t.isLeftAligned,setDimensions:n},e=>f.createElement(efh,{node:t.node,isFadedOut:e}))}function efh({node:e,isFadedOut:t}){let n=(0,a6.IL)(),a=(0,lh.uQ)(),l=(0,eb.dH)(),r=a===e.guid,i=(0,e2.Xr)(ea8.J),o=efe(),s=(0,f.useMemo)(()=>ei.w3z.isReadOnly(ei.SES.ANNOTATIONS),[]),c=(0,aN.J2)(ei.Ez5.devHandoffState().selectedMeasurementId),d=!!(0,tR.hA)(),u=e=>{e&&(aT.wr(),(0,lC.S)("annotations"),aT.Dh([e]))},m=f.useCallback(t=>{var n,a;!s&&r&&c===lg.AD&&((null==(n=document.activeElement)?void 0:n.classList.contains("focus-target"))||(0,ef_.t)(document.activeElement)||(null==(a=document.activeElement)?void 0:a.classList.contains(ept)))&&("Backspace"===t.key||"Delete"===t.key)&&o(e)},[s,r,c,o,e]);f.useEffect(()=>(document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)),[m]);let p=f.useCallback(()=>{var e;let t=(null==(e=window.getSelection())?void 0:e.toString())||"";t&&(0,eaY.Dk)(t,{withLineBreaks:!0})},[]);if(0===e.annotations.length)return null;let _=e.annotations[0],{label:g,properties:h}=_,E=[...h].sort((e,t)=>ep0.get(e.type).index-ep0.get(t.type).index);return f.createElement(a7.D8,{className:nb()("annotation--viewAnnotation--cA-c1 annotation--_annotationBase--MPByC",epl,{"annotation--viewAnnotationSelected--UApdn":r,"annotation--canSelect--zG4JI":!r,"annotation--viewAnnotationFadedOut--7LQPE":t}),role:"button",tabIndex:0,onMouseDown:()=>{r||(u(e.guid),n("click_annotation_content",{nodeId:e.guid,nodeType:e.type,hasText:!!_.label,numProperties:_.properties.length,currentTool:l,isDevModeFocusView:d}))},"data-testid":"annotationDisplay",recordingKey:`viewAnnotationContainer-${e.name}`,onDoubleClick:()=>{s||(r||u(e.guid),i(!0))},onCopy:p},g&&f.createElement(xY.R,{value:g,fallback:null,errorFallback:null,quillClassName:"annotation--label--Tf5gK"}),E&&E.length>0&&f.createElement("div",{className:epr},E.map((t,n)=>f.createElement(efE,{key:n,node:e,property:t}))))}function efE({node:e,property:t}){let n=ep0.get(t.type),a=n.DisplayValue,l=e&&e.isAlive(),r=(0,eft.J)(e,t.type,!1);return f.createElement(f.Fragment,null,f.createElement("span",{className:"annotation--propertyDisplayLabel--PQ2vF"},n.label),f.createElement("span",{className:nb()("annotation--propertyDisplayValue--bxdp7",{[epi]:!r}),"data-testid":`annotationPropertyValue-${t.type.toString()}`},l&&r?f.createElement(a,{node:e}):(0,eN.tx)("dev_handoff.annotations.no_value")))}var efv=n(688553),efy=n(565727),efb=n(107047),efC=n(236238),efw=n(163771);function efT(e){let{children:t}=e,n=(0,f.useRef)(null),[a,l]=(0,f.useState)(null);return(0,f.useEffect)(()=>{if(n.current){let e=n.current.attachShadow({mode:"open"}),t=document.createElement("style");t.innerHTML=[efv.Nz,efb.Nz,efy.Nz,efw.Nz,"/** @postcss-export-raw */\n\n/**\n * ellipsis.css\n *\n * Add an ellipsis if text is too long.\n *\n * The element that composes this mixin MUST have a defined width or max-width in pixels.\n * - Only works on a single line of text. See below for multi-line ellipses\n */\n\n.ellipsis--ellipsis--Tjyfa {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/**\n * Add an ellipsis after n lines of text.\n * https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-line-clamp\n *\n * The element that composes this mixin MUST:\n * - Have a defined width or max-width in pixels.\n * - Have a defined fallback height or max-height set to `line-height * n`,\n *     in case browsers do not support -webkit-line-clamp or box-orient\n *     at least the container size will be correct (with no ellipses)\n *\n * TODO(golf): start using `line-clamp` instead of -webkit-line-clamp once browsers start supporting it\n */\n\n.ellipsis--_ellipsisAfterNLines--LzI7k {\n  display: -webkit-inline-box;\n  overflow: hidden;\n\n  /* https://github.com/postcss/autoprefixer/issues/776#issuecomment-297734206 */\n  /* autoprefixer: off */\n  -webkit-box-orient: vertical;\n  /* autoprefixer: on */\n}\n\n.ellipsis--ellipsisAfter2Lines--Qo-Xh {\n  -webkit-line-clamp: 2;\n}\n\n.ellipsis--ellipsisAfter3Lines--h405C {\n  -webkit-line-clamp: 3;\n}\n\n.ellipsis--ellipsisAfter6Lines--2UA7M {\n  -webkit-line-clamp: 6;\n}\n\n.ellipsis--ellipsisAfter8Lines--WZFi8 {\n  -webkit-line-clamp: 8;\n}\n","/** @postcss-export-raw */\n/* Keep in line with FGDevHandoffHelpers.h */\n.annotation--annotationContainer--k4xiM {\n  position: relative;\n  /* Make all z indexes in this file relative to the parent.\n     We want all annotations to render underneath comments */\n  z-index: 0;\n}\n.annotation--_ellipsis--8F1VE {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.annotation--annotationWrapper--pKMw2 {\n  position: absolute;\n  pointer-events: none;\n  width: max-content;\n}\n.annotation--annotationWrapper--pKMw2,\n.annotation--wrapperMinimized--UOExu:hover {\n  z-index: 1;\n}\n.annotation--wrapperEditing--C2Zlx {\n  z-index: 2;\n}\n.annotation--wrapperMinimized--UOExu {\n  z-index: 0;\n}\n.annotation--annotationLine--jr4Mc {\n  position: absolute;\n  top: 50%;\n  border-top: 1px dashed var(--color-icon-handoff);\n  /* Push to left of annotation box */\n  transform: translate(-100%, -50%);\n}\n.annotation--annotationLineStartDot--x6RNc {\n  position: absolute;\n  top: -6.5px;\n  left: 100%;\n\n  width: 12px;\n  height: 12px;\n\n  background: color-mix(in srgb, var(--color-icon-handoff) 45%, transparent);\n  border: 1px solid var(--color-icon-success);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineStartDot--x6RNc:before {\n  content: '';\n\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  width: 2px;\n  height: 2px;\n\n  background: var(--color-text-onbrand);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineStartDotHovered--Chqa7 {\n  background: var(--color-icon-handoff);\n}\n.annotation--annotationLineEndDot--Lsq0a {\n  position: absolute;\n  top: -3.5px;\n  left: -3px;\n\n  width: 6px;\n  height: 6px;\n\n  background: var(--color-icon-handoff);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineLeftAligned--W-1DZ {\n  transform: translate(0, -50%);\n}\n.annotation--annotationLineLeftAligned--W-1DZ .annotation--annotationLineStartDot--x6RNc {\n  left: auto;\n  right: 100%;\n}\n.annotation--annotationLineLeftAligned--W-1DZ .annotation--annotationLineEndDot--Lsq0a {\n  left: auto;\n  right: -3px;\n}\n.annotation--annotationLineAboveNode--WwqWD:not(.annotation--annotationLineLeftAligned--W-1DZ) {\n  border-left: 1px dashed var(--color-icon-handoff);\n  transform: translate(-100%, -0.5px);\n}\n.annotation--annotationLineBelowNode--JeafT .annotation--annotationLineStartDot--x6RNc {\n  top: auto;\n  bottom: -6.5px;\n}\n.annotation--annotationLineAboveNode--WwqWD .annotation--annotationLineEndDot--Lsq0a {\n  top: auto;\n  bottom: -3.5px;\n}\n.annotation--annotationLineBelowNode--JeafT:not(.annotation--annotationLineLeftAligned--W-1DZ) {\n  border-left: 1px dashed var(--color-icon-handoff);\n  border-bottom: 1px dashed var(--color-icon-handoff);\n  border-top: 0 none;\n\n  transform: translate(-100%, calc(-100% + 0.5px));\n}\n.annotation--annotationLineLeftAligned--W-1DZ.annotation--annotationLineAboveNode--WwqWD {\n  border-right: 1px dashed var(--color-icon-handoff);\n  transform: translate(0, -0.5px);\n}\n.annotation--annotationLineBelowNode--JeafT.annotation--annotationLineLeftAligned--W-1DZ {\n  border-right: 1px dashed var(--color-icon-handoff);\n  border-bottom: 1px dashed var(--color-icon-handoff);\n  border-top: 0 none;\n\n  transform: translate(0, calc(-100% + 0.5px));\n}\n.annotation--_annotationBase--MPByC {\n  background: var(--color-bg);\n  color: var(--color-text);\n\n  pointer-events: auto;\n\n  border-radius: 6px;\n  box-shadow: var(--elevation-200-canvas);\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 400;\n}\n.annotation--viewAnnotation--cA-c1 {\n\n  /* This avoids a size shift when adding a border */\n  border: 1px solid transparent;\n\n  -webkit-user-select: text;\n\n          user-select: text;\n}\n/* This is when the node is hovered (not annotation).\n   Clicking an already selected node does nothing so has no hover state. */\n.annotation--annotationHovered--QUHJv .annotation--viewAnnotation--cA-c1:not(.annotation--viewAnnotationSelected--UApdn),\n\n.annotation--viewAnnotation--cA-c1.annotation--canSelect--zG4JI:hover {\n  background: var(--color-bg-hover);\n}\n.annotation--viewAnnotationSelected--UApdn {\n  border: 1px solid var(--color-border-selected-strong);\n}\n.annotation--viewAnnotationFadedOut--7LQPE > * {\n  opacity: 0.5;\n}\n.annotation--createAnnotation--tWKSM .text-editor {\n    border: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor.ql-blank::after {\n    margin-top: -1.85em;\n  }\n.annotation--createAnnotation--tWKSM .text-editor:focus-within {\n    margin: 0;\n  }\n[data-fpl-version='ui3'] .annotation--createAnnotation--tWKSM .ql-container {\n      background: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor {\n    font-size: 13px;\n    line-height: 24px;\n    min-height: 38px;\n  }\n[data-fpl-version='ui3'] .annotation--createAnnotation--tWKSM .ql-editor {\n      min-height: 24px;\n      padding: 2px 6px;\n      margin: 4px 0 6px 0;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor ul,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ul,\n  .annotation--createAnnotation--tWKSM .ql-editor ol,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ol {\n    padding-left: 1.5em;\n  }\n.annotation--annotationHoverTarget--4y3Xc {\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  pointer-events: auto;\n  top: calc(50% - 12px);\n  /* This is relative to the left edge of the line end dot,\n     but we want to center it around the dot */\n  left: -9px;\n}\n.annotation--annotationHoverTargetLeftAligned--G1twU {\n  /* This is relative to the right edge of the line end dot,\n     but we want to center it around the dot.\n     Shift by parent width (100%) to account for when the\n     annotation is not hidden. */\n  left: calc(100% - 15px);\n}\n.annotation--annotationLeftAligned--FHQRp {\n  transform: translate(-100%, 0);\n  left: 8px;\n}\n.annotation--annotationRightAligned--VrH8e {\n  left: -8px;\n}\n.annotation--label--Tf5gK.quill-readonly .ql-editor {\n    font-size: 11px;\n  }\n.annotation--label--Tf5gK.quill-readonly .ql-editor h1,\n    .annotation--label--Tf5gK.quill-readonly .ql-editor h2 {\n      font-size: 14px;\n    }\n.annotation--label--Tf5gK.quill-readonly .ql-editor pre.ql-syntax {\n      white-space: pre-wrap;\n    }\n.annotation--label--Tf5gK.quill-readonly .ql-editor > * {\n      cursor: default;\n    }\n.annotation--label--Tf5gK .ql-container {\n    background-color: transparent;\n  }\n.annotation--contentContainer--vSuqs {\n  display: flex;\n  flex-direction: column;\n  padding: 6px 10px 8px 10px;\n  max-width: 220px;\n  box-sizing: border-box;\n}\n.annotation--contentContainer--vSuqs.annotation--viewAnnotation--cA-c1 {\n  gap: 4px;\n}\n.annotation--contentContainerNoProperties--pc2WE {\n  padding: 6px 10px 0 10px;\n}\n.annotation--contentContainer--vSuqs.annotation--viewAnnotation--cA-c1 {\n  padding: 8px;\n}\n.annotation--createAnnotation--tWKSM .annotation--contentContainer--vSuqs {\n  /* Fixed width when authoring */\n  width: 220px;\n}\n.annotation--properties--1p6UF {\n  display: grid;\n  grid-template-columns: min-content auto;\n}\n.annotation--createAnnotation--tWKSM .annotation--properties--1p6UF {\n  padding: 0 6px;\n}\n.annotation--propertyDisplayLabel--PQ2vF,\n.annotation--selectedPropertyDisplayLabel--AtFEJ {\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n\n  padding-right: 12px;\n}\n.annotation--selectedPropertyDisplayLabel--AtFEJ {\n  border-top-left-radius: 2px;\n  border-bottom-left-radius: 2px;\n\n  margin-left: -8px;\n  padding-left: 8px;\n}\n.annotation--selectedPropertyValueWrapper--OyM0X {\n  display: flex;\n\n  width: calc(100% + 4px);\n\n  overflow: hidden;\n}\n.annotation--selectedPropertyDisplayLabel--AtFEJ,\n.annotation--selectedPropertyValue--wwu2U {\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n.annotation--propertyDisplayLabel--PQ2vF,\n.annotation--propertyDisplayValue--bxdp7,\n.annotation--selectedPropertyDisplayLabel--AtFEJ,\n.annotation--selectedPropertyValueWrapper--OyM0X {\n  margin-top: 4px;\n}\n/* Don't add margin top to first \"row\" of grid */\n.annotation--propertyDisplayLabel--PQ2vF:first-child,\n.annotation--propertyDisplayLabel--PQ2vF:first-child + .annotation--propertyDisplayValue--bxdp7,\n.annotation--selectedPropertyDisplayLabel--AtFEJ:first-child,\n.annotation--selectedPropertyDisplayLabel--AtFEJ:first-child + .annotation--selectedPropertyValueWrapper--OyM0X {\n  margin-top: 0;\n}\n.annotation--propertyDisplayValue--bxdp7 {\n  overflow: hidden;\n}\n.annotation--noValue--HHQOU {\n  color: var(--color-text-secondary);\n}\n.annotation--selectedPropertyValue--wwu2U {\n  overflow: hidden;\n\n  flex: 1 1 100%;\n}\n.annotation--selectedPropertyDelete--DMdrA {\n  display: flex;\n  align-items: center;\n\n  padding: 0 4px 0 12px;\n\n  border-top-right-radius: 2px;\n  border-bottom-right-radius: 2px;\n}\n.annotation--selectedPropertyDeleteButton--rko2T {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex: 0 0 16px;\n\n  width: 16px;\n  height: 16px;\n\n  cursor: pointer;\n\n  font-size: 0;\n\n  background: transparent;\n  border: 0 none;\n  border-radius: 2px;\n  box-sizing: content-box;\n\n  padding: 0;\n}\n.annotation--selectedPropertyDeleteButton--rko2T:hover {\n    background: var(--color-bg-tertiary);\n  }\n.annotation--propertyOption--GJWeu {\n\n  background: transparent;\n  color: var(--color-text);\n  border: none;\n  align-self: stretch;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 32px;\n  padding: 0px 16px;\n  gap: 8px;\n\n  font-family: Inter;\n  font-size: 13px;\n  font-weight: 400;\n}\n.annotation--propertyOption--GJWeu:focus {\n    outline: none;\n  }\n.annotation--propertyDivider--Q3tgS {\n  height: 1px;\n  background: var(--color-border);\n  margin: 8px 0;\n}\n.annotation--propertyOptionIcon---NJse {\n  width: 16px;\n}\n.annotation--propertyOptionIconSvg--LypST {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.annotation--propertyOptionIconLabel--vFND- {\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  gap: 8px;\n}\n.annotation--allPropertiesAdded--KzT8m {\n  padding: 0 12px;\n  height: 32px;\n  font-size: 11px;\n  display: flex;\n  align-items: center;\n}\n.annotation--hoveredProperty--ZOJgv {\n  background: var(--color-bg-hover);\n}\n.annotation--preview--SrnLk {\n  color: var(--color-text-secondary);\n}\n.annotation--propertyValue--yhAB- {\n}\n.annotation--icon--w1enR svg {\n  fill: var(--color-icon);\n}\n.annotation--icon--w1enR[aria-disabled='true'] svg {\n  fill: var(--color-icon-disabled);\n}\n.annotation--fillProperty--hEEJR {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 12px;\n}\n.annotation--chit--3je6E {\n  width: 12px;\n  height: 12px;\n  border-radius: 2px;\n  display: flex;\n  overflow: hidden;\n  margin: 1px 2px 1px 0;\n  flex-shrink: 0;\n  border: 1px solid var(--color-border);\n}\n.annotation--chit--3je6E svg {\n    width: 12px;\n    height: 12px;\n  }\n.annotation--styleChit--yCQ3O {\n  border: none;\n}\n.annotation--chitInline--vG6cM {\n  margin: 0;\n}\n.annotation--solidPaint--ClR6h {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.annotation--solidPaintValue--9PQMf {\n}\n.annotation--authoringRow--cIo3- {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  padding: 0 4px 4px 8px;\n}\n[data-fpl-version='ui3'] .annotation--authoringRow--cIo3- {\n    padding: 0 8px 4px 8px;\n  }\n.annotation--addPropertyButton--67vPO {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 8px;\n  background-color: transparent;\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  padding: 0 8px;\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 500;\n  height: 24px;\n}\n.annotation--addPropertyButton--67vPO.annotation--active--Q00x6 {\n    background-color: var(--color-bg-pressed);\n  }\n.annotation--addPropertyButton--67vPO:focus-visible {\n    border-color: var(--color-border-selected);\n  }\n.annotation--plusIcon--Ove-l {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 16px;\n  width: 16px;\n  flex: 0 0 16px;\n  line-height: 16px;\n  fill: var(--color-icon);\n}\n.annotation--iconButton--w7kfn {\n  border-radius: 2px;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: transparent;\n  border: none;\n}\n.annotation--dropdown--WLrjl {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  padding: 8px 0;\n  top: calc(100% + 8px);\n  left: 0;\n  width: 220px;\n}\n.annotation--coloredProperty--OTQ6l {\n  display: flex;\n  align-items: center;\n  justify-content: left;\n}\n.annotation--coloredProperty--OTQ6l > span {\n    padding-left: 2px;\n    padding-right: 2px;\n    border-radius: 2px;\n  }\n.annotation--paddingProperty--ckvG6 > span {\n    background: var(--color-bginspectpadding);\n    color: var(--color-textoninspectpadding);\n  }\n.annotation--spacingProperty--RCjSM > span {\n    background: var(--color-bginspectspacing);\n    color: var(--color-textoninspectspacing);\n  }\n.annotation--mixedValues--Z0qIk {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.annotation--variablePill--VNxoI {\n  height: 16px;\n  padding: 0 4px;\n}\n.annotation--multipleVariableWrapper--OW3M1 {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n  flex-direction: row;\n  align-items: center;\n}\n.annotation--multipleVariableWrapper--OW3M1.annotation--vertical--zmpVv {\n  flex-direction: column;\n  flex-wrap: nowrap;\n}\n.annotation--multipleVariableValue--5-5xk {\n  overflow: hidden;\n  align-self: stretch;\n}\n",efC.N].join("\n"),e.append(t),l(e)}},[]),f.createElement("div",{ref:n,"data-testid":"annotation-renderer-shadow-dom-container",className:ept},a&&(0,oQ.createPortal)(t,a))}function efx(){let e=(0,_.wA)(),t=(0,lh.uQ)(),n=(0,_.d4)(e=>e.isFullscreenDocumentLoaded),a=(0,aN.J2)(ei.Ez5.uiState().showAnnotations),l=(0,eb.dH)(),r=(0,lb._X)({subscribeToUpdates_expensive:!0}),i=(0,aN.J2)((0,Vt.d)().lockMouseMoves);f.useEffect(()=>{i&&r.zoomScale<.05&&(0,Vt.d)().lockMouseMoves.set(!1)},[i,r]);let[o,s]=(0,S.fp)(ea8.J);(0,f.useEffect)(()=>{a||s(!1)},[a,s]),(0,f.useEffect)(()=>{o&&e((0,Xv.UU)())},[e,o]);let[c,d]=(0,f.useState)({}),{nodesWithAnnotationInfo:u,annotationsBeingViewed:m,newAnnotationNodeInfo:p}=function(e,t){let n=(0,_.d4)(e=>e.mirror.appModel.currentPage),a=(0,aN.J2)(ei.Ez5.annotationObserver().annotationInfoByTlf),l=(0,eb.dH)(),r=(0,lh.uQ)(),i=(0,S.md)(ea8.J),o=(0,aN.J2)(ei.Ez5.devHandoffState().focusMode),s=(0,aN.J2)(ei.Ez5.devHandoffState().focusNodeId),c=(0,tR.hA)(),d=(0,cp.Fk)((e,t)=>e.get(t)?(0,ey.qT)(e,t):[],n),{tlfsWithNodes:u,newAnnotationNode:m}=(0,cp.Fk)((e,t,n,a,l,r,i,o,s,c)=>{let d=[];for(let n of i.keys()){let a=e.get(n);a&&a.containingCanvas===t&&(c?(0,ey.hD)(e,n,e=>{e.guid===c&&d.push(n)}):d.push(n))}if(o&&(n===ei.NLJ.ANNOTATE||a)){let t=(0,ey.kh)(e,o)||e.get(o);(null==t?void 0:t.guid)&&!i.has(t.guid)&&d.push(t.guid)}let u=null;if(sL.z4.getIsExtension()&&l&&r){let t=(0,ey.kh)(e,r)||e.get(r);(null==t?void 0:t.guid)&&(d=[null==t?void 0:t.guid])}let m=d.map(t=>{let n=e.get(t),{nodes:l,tlfContainsSelectedNode:r,newAnnotationNode:i}=function e(t,n,a=[],l){let r=!1,i=null;if(t){if(t.guid===n&&(r=!0),"SECTION"===t.type)return{nodes:[],tlfContainsSelectedNode:r,newAnnotationNode:i};t.childrenNodes.forEach(t=>{let{nodes:o,tlfContainsSelectedNode:s,newAnnotationNode:c}=e(t,n,a,l);return r=r||s,i=i||c,o}),t.annotations.length>0&&t.visible?a.push(t):l&&t.guid===n&&(i=t)}return{nodes:a,newAnnotationNode:i,tlfContainsSelectedNode:r}}(n,o,[],a);return i&&n&&(u={node:i,tlf:t}),{nodes:l,tlfContainsSelectedNode:r,topLevelFrameNode:n}});return s.forEach(e=>{i.has(e.guid)||m.push({nodes:[],tlfContainsSelectedNode:!1,topLevelFrameNode:e})}),{tlfsWithNodes:m,newAnnotationNode:u}},n,l,i,o,s,a,r,d,c),{annotationsBeingViewed:p,nodesWithAnnotationInfo:g}=(0,f.useMemo)(()=>{let n={x:e.offsetX,y:e.offsetY},a=u.map(({nodes:a,tlfContainsSelectedNode:l,topLevelFrameNode:r})=>{if(!r||!r.isAlive())return null;let i={x:r.absoluteBoundingBox.x,y:r.absoluteBoundingBox.y,width:r.absoluteBoundingBox.w,height:r.absoluteBoundingBox.h};if(0===a.length)return efN(i,(0,lb.qc)(e))?{topLevelFrameNode:r,nodes:a,nodesWithFinalPositionData:[],shouldMinimize:!1,originalShouldMinimize:!1,tlfContainsSelectedNode:l,distanceFromCenter:efS({x:e.offsetX,y:e.offsetY},i),dimensionsWithAnnotations:i}:null;let o=.4>Math.max((i.width||0)*e.zoomScale/e.width,(i.height||0)*e.zoomScale/e.height)&&!l,s=0,c=0,d=a.map(n=>{var a;let l=t[n.guid]||{width:0,height:0},i=efl(n,r,e);return i.isLeftAligned?s=Math.max(s,24+l.width/e.zoomScale):c=Math.max(c,24+l.width/e.zoomScale),{...i,height:(null==(a=t[n.guid])?void 0:a.height)||0,node:n,tlfGuid:r.guid,shouldMinimize:o}}).sort((e,t)=>e.offsetY-t.offsetY),u=efi(e,d,o),m=1/0,p=-1/0;u.forEach(t=>{let n=t.height/e.zoomScale,a=t.offsetY/e.zoomScale+e.offsetY-n/2;m=Math.min(m,a),p=Math.max(p,a+n)});let f=Math.min(i.y,m),_=Math.max(i.y+i.height,p),g={x:i.x-s,y:f,width:i.width+s+c,height:_-f};return efN(g,(0,lb.qc)(e))?(l&&(n={x:g.x+g.width/2,y:g.y+g.height/2}),{topLevelFrameNode:r,nodes:a,nodesWithFinalPositionData:u,shouldMinimize:o,originalShouldMinimize:o,tlfContainsSelectedNode:l,distanceFromCenter:efS({x:e.offsetX,y:e.offsetY},g),dimensionsWithAnnotations:g}):null}).filter(gq.Vq).sort((e,t)=>efS(n,e.dimensionsWithAnnotations)-efS(n,t.dimensionsWithAnnotations)),l=a.filter(e=>!e.shouldMinimize);for(let e=0;e<l.length-1;e++){let t=l[e];for(let n=e+1;n<l.length;n++){let e=l[n];efN(t.dimensionsWithAnnotations,e.dimensionsWithAnnotations)&&(t.tlfContainsSelectedNode?e.shouldMinimize=!0:e.tlfContainsSelectedNode?t.shouldMinimize=!0:t.distanceFromCenter<e.distanceFromCenter?e.shouldMinimize=!0:t.shouldMinimize=!0)}}let r=[],i=a.flatMap(({nodes:n,nodesWithFinalPositionData:a,shouldMinimize:l,originalShouldMinimize:i,topLevelFrameNode:o})=>{if(n.length>0&&!l&&r.push({tlf:o.guid,numNodes:n.length}),l===i)return a;let s=n.map(n=>{var a;return{...efl(n,o,e),height:(null==(a=t[n.guid])?void 0:a.height)||0,node:n,tlfGuid:o.guid,shouldMinimize:l}}).sort((e,t)=>e.offsetY-t.offsetY);return efi(e,s,l)});return{annotationsBeingViewed:r,nodesWithAnnotationInfo:i}},[t,u,e]);return{nodesWithAnnotationInfo:g,annotationsBeingViewed:p,newAnnotationNodeInfo:(0,f.useMemo)(()=>{var n;if(!m)return null;let a=function(e,t){let{x:n,y:a,w:l,h:r}=e.absoluteBoundingBox,{offsetX:i,offsetY:o,zoomScale:s,width:c}=t,d=ei.Ez5.isFullscreenYScrollbarNeeded(),u=Math.min(20*s,20),m=n+l,p=(n-i)*s+c/2>efn+8&&!((i-m)*s+c/2>efn+(d?16:4));return p?{lineWidth:u,offsetX:(n-i)*s-u,offsetY:(a+r/2-o)*s,isLeftAligned:p}:{lineWidth:u,offsetX:(m-i)*s+u,offsetY:(a+r/2-o)*s,isLeftAligned:p}}(m.node,e);return{...a,height:(null==(n=t[m.node.guid])?void 0:n.height)||0,newAnnotationNode:m,tlfGuid:m.tlf,shouldMinimize:!1,node:m.node,lineAlignment:efa.ALIGNED,lineHeight:0,originalLineWidth:a.lineWidth}},[t,m,e])}}(r,c),g=(0,a6.IL)(),h=m.length,E=m.reduce((e,t)=>e+t.numNodes,0);(0,f.useEffect)(()=>{h&&l===ei.NLJ.SELECT&&g("showing_annotations_for_tlfs",{topLevelFrameCount:h,nodesWithAnnotationsCount:E})},[h,E,l,g]);let v=(0,n_.v_)("annotationsKeyDown","keydown",(0,f.useCallback)(e=>{l===ei.NLJ.ANNOTATE&&!o&&t&&"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&(s(!0),e.stopPropagation())},[l,o,t,s]));if(f.useEffect(()=>(document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)),[v]),f.useEffect(()=>{var e;null==(e=br.NB)||e.setIsShowingAnnotations(0!==m.length)},[m]),!n||!a&&l!==ei.NLJ.ANNOTATE)return null;function y(e,t){var n,a;((null==(n=c[e])?void 0:n.height)!==t.height||(null==(a=c[e])?void 0:a.width)!==t.width)&&d(n=>({...n,[e]:t}))}let b=null,C=u.map(e=>o&&e.node.guid===t?(b=f.createElement(efc,{nodeInfo:e,viewportInfo:r,setDimensions:y}),null):f.createElement(efg,{key:e.node.guid,nodeInfo:e,viewportInfo:r,setDimensions:y})),w=o&&p&&f.createElement(efc,{nodeInfo:p,viewportInfo:r,setDimensions:y});return f.createElement(f.Fragment,null,f.createElement(efT,null,C),b,w)}function efN(e,t){let n=e.x,a=e.x+e.width,l=e.y,r=e.y+e.height,i=t.x,o=t.x+t.width,s=t.y,c=t.y+t.height;return n<o&&a>i&&l<c&&r>s}function efS(e,t){let n={x:t.x+t.width/2,y:t.y+t.height/2};return Math.hypot(n.x-e.x,n.y-e.y)}function efk(){return f.createElement(Zp.p,null,f.createElement(efx,null))}let efI=f.memo(({shouldShowDragAndDropBorder:e})=>{let t=(0,_.d4)(e=>e.progressBarState),n=(0,eb.p8)("loadingEmbeds"),a=!!(0,U._I)(),l=(0,tR.l7)(),r=(0,l9.Lk)(),i=(0,f.useRef)(null),o=(0,_.d4)(e=>e.openFile),s=o?o.key:"",c=(0,_.d4)(e=>e.universalInsertModal),d=(0,_.wA)();return(0,W.Gb)(s),f.createElement(f.Fragment,null,f.createElement(er.ED,null),f.createElement(emQ,null,t.mode!==l8.Oin.OFF&&f.createElement("div",{className:emY._q}),f.createElement(bA.pO,{initialFilterState:{currentPage:!0}},n.map(e=>f.createElement(qm,{key:`loading-embed-${e}`,nodeId:e})),f.createElement(ZF,null),f.createElement(o7,null),a&&f.createElement(em9,null),f.createElement(qr,null),f.createElement(ql,null),f.createElement(rZ,null),!l&&f.createElement(efk,null),f.createElement(ZK,{commentsDetailContainerRef:i}),f.createElement(hr.Nz,null),f.createElement("div",{ref:i}),f.createElement(Zz,null),f.createElement(X0,null),e&&f.createElement(hr.X5,null)),f.createElement(y9,{isFigjamEditor:!1,isDesignEditor:!1,openFile:o}),c.showing&&f.createElement(l7.tH,{boundaryKey:"FdBrowseResourceModal",onError:()=>{d(eS.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(is,null))),r&&f.createElement(Qt,{className:emY.PA},f.createElement(oZ,null)),f.createElement(bN,null))});var efA=n(753643),efO=n(116723),efL=n(643067),efP=n(288300);let efD="browse_modal_empty_search_result--emptyStateText---rbwv ellipsis--ellipsis--Tjyfa text--fontPos13--xW8hS text--_fontBase--QdLsd",efR="browse_modal_empty_search_result--emptyStateStrongText--fyWIi",efM="browse_modal_empty_search_result--communityLink--5KNv4 text--fontPos13--xW8hS text--_fontBase--QdLsd";function efF(e){let{defaultDisplayStringResourceType:t,query:n,cta:a,orgNameIfAllowlistEnforced:l}=e;return f.createElement("div",{className:"browse_modal_empty_search_result--emptyState--XyC30 tiles_view--emptyState--lR8Xc text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.illustration&&f.createElement(a2.B,{className:"browse_modal_empty_search_result--emptyStateIllustrations--M9hN-",svg:e.illustration,useOriginalSrcFills_DEPRECATED:!0}),f.createElement("div",{className:"browse_modal_empty_search_result--emptyStateTextWrapper--7z4U6"},l?f.createElement("span",{className:"browse_modal_empty_search_result--emptyStateText2Lines--xoqUp ellipsis--ellipsisAfter2Lines--Qo-Xh ellipsis--_ellipsisAfterNLines--LzI7k text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,eN.tx)("whiteboard.inserts.couldn_t_find_resource_in_org_allowlist",{orgName:l,searchQuery:f.createElement("span",{className:efR},n)})):f.createElement("span",{className:efD},t?(0,eN.tx)("whiteboard.inserts.couldn_t_find_default_display_string_resource_type_for",{resourceType:t,searchQuery:f.createElement("span",{className:efR},n)}):(0,eN.tx)("whiteboard.inserts.custom_display_string_search_result",{searchQuery:f.createElement("span",{className:efR},n)}))),a&&f.createElement("div",null,a))}function efB(e){let t=(0,ta.BI)();return(null==t?void 0:t.shouldOptimizeForIpadApp)||(0,y.kc)().cmty_m10n_test_apple_os?null:f.createElement(f.Fragment,null,e.resourceType&&e.resourceType===uL.bD.HUB_FILE?f.createElement("span",{className:efD},(0,eN.tx)("whiteboard.inserts.if_you_re_still_looking_there_s_much_more_to_see_in_the",{link:f.createElement("a",{className:efM,href:e.url,target:"_blank"},(0,eN.tx)("whiteboard.inserts.if_you_re_still_looking_there_s_much_more_to_see_in_the_community"))})):f.createElement("a",{className:efM,href:e.url,target:"_blank"},(0,eN.tx)("whiteboard.inserts.see_more_from_community")))}var efU=n(167807),efH=n(491815),efG=n(16774);let efV="browse_library_items_container--browseLibraryItemsContainer--Keunc";function efK(e){return f.createElement("div",{className:Object.keys(e.items).length>5?"browse_library_items_container--container--FpYi3":"browse_library_items_container--smallContainer--3V6cZ"},Object.keys(e.items).sort().map(t=>f.createElement(efz,{items:e.items[t],layoutOverride:e.layoutOverride,key:t,showContextMenu:e.showContextMenu})))}let efW=(0,vc.fv)();function efz(e){let{height:t,width:n,gridClassName:a}=efj(e.layoutOverride||(0,Po.PI)(e.items)),l=(0,efG.b)(),{currentTab:r}=(0,efH.cX)(),i=(0,tu.sO)(),o=(0,Q.ow)(),s=(0,_.wA)(),c=i?efP.Du:(0,efP.Vq)(r);return f.createElement("div",{className:`${a} ${efV}`},e.items.map((a,r)=>f.createElement(Pr.lX,{key:r,item:a,height:t,width:n,showName:!1,shouldHideDescription:!0,shouldShowShadowOnHover:!0,isFigJam:o,noBackground:!i,isSlides:i,isSearch:!1,itemPadding:8,draggable:{sourceForTracking:c,afterSuccessfulInsert:l,clickToInsert:!0},onContextMenu:t=>{e.showContextMenu&&(t.preventDefault(),s(nI.j7({type:efX,data:{fileKey:efW(a),position:{top:t.clientY,left:t.clientX}}})))}})),f.createElement(efq,null))}let efj=e=>{switch(e){case Po.rp.SMALL:return{height:60,width:60,gridClassName:"browse_library_items_container--gridContainerSmall--bE7eB"};case Po.rp.NORMAL:return{height:73,width:73,gridClassName:"browse_library_items_container--gridContainerNormal---Y3Kz"};case Po.rp.WIDE:return{width:432,gridClassName:"browse_library_items_container--gridContainerWide--huzZQ"};default:(0,nm.xb)(e)}},efJ=nC.W.Dropdown,efY=nC.W.Option,efX="FIGJAM_LIBRARY_ITEM_DROPDOWN_KEY";function efq(){var e,t,n;let a=(0,nT.U)(),l=null==(t=(0,efU.$Q)(null==(e=null==a?void 0:a.data)?void 0:e.fileKey))?void 0:t.data,r=(0,efH.cX)().setSelectedCategory,i=(0,_.wA)();return(null==a?void 0:a.type)===efX&&l?f.createElement(efJ,{style:dA.sx.add(null==(n=null==a?void 0:a.data)?void 0:n.position).add(dA.sx.fixed).$},f.createElement(efY,{onClick:()=>{i(nI.oB()),r({id:a.data.fileKey,title:l.name,resourceType:efP.Rt.STICKERS_AND_COMPONENTS})}},(0,eN.tx)("whiteboard.inserts.view_stickers_in_this_set"))):null}function efZ(e){var t;let n=(null==(t=(0,efU.$Q)(e.fileKey).data)?void 0:t.name)||"",a=()=>e.onClick(n),l=(0,Po.PI)(e.items),r=efQ(l),{height:i,width:o}=r,s=l===Po.rp.WIDE?2:8,c=(0,efG.b)(),d=(0,tu.sO)(),u=(0,Q.ow)();return f.createElement("div",{className:"library_items_compact_view--librariesTwoColumnsItemPadding--Wl9Nv"},f.createElement("button",{onClick:a,className:nb()(r.gridClassName,d?"library_items_compact_view--slidesLibraryItemsContainer--1yske":null)},e.items.slice(0,s).map((e,t)=>f.createElement(Pr.lX,{key:t,item:e,height:i,width:o,showName:!1,shouldHideDescription:!0,shouldShowShadowOnHover:!0,isFigJam:u,isSlides:d,noBackground:!0,isSearch:!1,onItemClick:a,draggable:{sourceForTracking:"universal-insert-figjam-stickers-compact-view",afterSuccessfulInsert:c,clickToInsert:!1}}))),f.createElement("button",{onClick:a,className:"library_items_compact_view--libraryTitle--wIVmD ellipsis--ellipsis--Tjyfa text--fontPos13--xW8hS text--_fontBase--QdLsd"},n))}let efQ=e=>{switch(e){case Po.rp.SMALL:case Po.rp.NORMAL:return{height:40,width:40,gridClassName:"library_items_compact_view--browseLibraryItemsContainer--pNmFL"};case Po.rp.WIDE:return{width:184,height:40,gridClassName:"library_items_compact_view--wideGrid--XbpRp library_items_compact_view--browseLibraryItemsContainer--pNmFL"};default:(0,nm.xb)(e)}};var ef$=n(377893);let ef0="loading_states--title--TC60j loading_states--greyBase--bbKGM",ef1="loading_states--firstTitle--QfkUE loading_states--title--TC60j loading_states--greyBase--bbKGM",ef2="loading_states--titleLighter--mwtNY loading_states--title--TC60j loading_states--greyBase--bbKGM",ef5="loading_states--titleLightest--BQ32t loading_states--title--TC60j loading_states--greyBase--bbKGM",ef4="loading_states--largeCard--XHghX",ef3="loading_states--container--YyIRL",ef6="loading_states--largeCardAndTextContainer--J-GCt",ef7="loading_states--titleAndDescriptionContainer--Lopl5",ef8="loading_states--sticker--4XK0K loading_states--greyBase--bbKGM",ef9="loading_states--pluginTile--ONKW2",e_e="loading_states--pluginIcon--Tx1hy loading_states--greyBase--bbKGM";function e_t(){return f.createElement(f.Fragment,null,f.createElement("div",{className:ef1}),f.createElement("div",{className:ef3},f.createElement(e_i,{shouldFade:!1}),f.createElement(e_i,{shouldFade:!1}),f.createElement(e_i,{shouldFade:!0})))}function e_n(){return f.createElement(f.Fragment,null,f.createElement("div",{className:ef1}),f.createElement("div",{className:"loading_states--pluginTileContainer--JRZGS"},f.createElement("div",{className:ef9},f.createElement("div",{className:e_e}),f.createElement(e_s,null)),f.createElement("div",{className:ef9},f.createElement("div",{className:e_e}),f.createElement(e_s,null)),f.createElement("div",{className:ef9},f.createElement("div",{className:e_e}),f.createElement(e_s,null)),f.createElement("div",{className:ef9},f.createElement("div",{className:"loading_states--pluginIconLighter--k7tqf loading_states--pluginIcon--Tx1hy loading_states--greyBase--bbKGM"}),f.createElement(e_s,null)),f.createElement("div",{className:ef9},f.createElement("div",{className:"loading_states--pluginIconLightest--axJAz loading_states--pluginIcon--Tx1hy loading_states--greyBase--bbKGM"}),f.createElement(e_c,null))))}function e_a(){return f.createElement(f.Fragment,null,f.createElement("div",{className:ef1}),f.createElement(e_r,null),f.createElement("div",{className:"loading_states--stickerTitle--YEosJ loading_states--firstTitle--QfkUE loading_states--title--TC60j loading_states--greyBase--bbKGM"}),f.createElement("div",{className:ef3},f.createElement(e_i,{shouldFade:!0})))}function e_l(){return f.createElement("div",{className:"loading_states--flexContainer--t0XH4"},f.createElement(e_o,null),f.createElement(e_r,null),f.createElement("div",{className:"loading_states--divider--MY-EG"}),f.createElement(e_o,null),f.createElement("div",{className:ef3},f.createElement(e_i,{shouldFade:!0})))}function e_r(){return f.createElement("div",{className:"loading_states--stickerGrid--Wv-o1"},f.createElement("div",{className:ef8}),f.createElement("div",{className:ef8}),f.createElement("div",{className:ef8}),f.createElement("div",{className:ef8}),f.createElement("div",{className:ef8}),f.createElement("div",{className:ef8}),f.createElement("div",{className:ef8}),f.createElement("div",{className:ef8}),f.createElement("div",{className:ef8}),f.createElement("div",{className:ef8}))}function e_i(e){return f.createElement("div",{className:"loading_states--rowContainer--oHoUG"},f.createElement("div",{className:ef6},f.createElement("div",{className:e.shouldFade?"loading_states--largeCardLighter--67tCH loading_states--largeCard--XHghX":ef4}),f.createElement("div",{className:e.shouldFade?ef2:ef0})),f.createElement("div",{className:ef6},f.createElement("div",{className:e.shouldFade?"loading_states--largeCardLightest--P-6Nd loading_states--largeCard--XHghX":ef4}),f.createElement("div",{className:e.shouldFade?ef5:ef0})))}function e_o(){return f.createElement("div",{className:"loading_states--titleAndDescriptionContainerWithMargin--sUBNg loading_states--titleAndDescriptionContainer--Lopl5"},f.createElement("div",{className:ef0}),f.createElement("div",{className:"loading_states--description--dilCZ loading_states--title--TC60j loading_states--greyBase--bbKGM"}))}function e_s(){return f.createElement("div",{className:ef7},f.createElement("div",{className:ef2}),f.createElement("div",{className:"loading_states--descriptionLighter--on5VU loading_states--description--dilCZ loading_states--title--TC60j loading_states--greyBase--bbKGM"}))}function e_c(){return f.createElement("div",{className:ef7},f.createElement("div",{className:ef5}),f.createElement("div",{className:"loading_states--descriptionLightest--7XQdm loading_states--description--dilCZ loading_states--title--TC60j loading_states--greyBase--bbKGM"}))}let e_d="libraries_tab--sectionTitle--PDAa- ellipsis--ellipsis--Tjyfa text--fontPos13--xW8hS text--_fontBase--QdLsd",e_u="libraries_tab--libraryPadding--Dwvws";function e_m({query:e,recentlyUsedItemsKey:t=EI.$A.FigJam,hideRecentsIfEmpty:n}){let{openFile:a,fileVersion:l,loadingState:r,library:i}=(0,N.R)(e=>({openFile:e.openFile,fileVersion:e.fileVersion,loadingState:e.loadingState,library:e.library})),{assetsPanelSearch:o}=i,{productComponents:s}=(0,eC.g5)(t),c=(0,efH.ik)(s,"components",(e,t)=>!t.some(t=>t.id===e.id),10),d=(0,mV.oh)(W.fi),u=(0,efH.mk)(c,[!d,(0,mV.mC)(efA.fC)]),m=u.length>0||!n,p=(0,efH.cX)().setSelectedCategory,_=!a||!l||!(0,mV.D2)(r,(0,PK.yD)(a.key)),g=(0,efH.hY)(),{onToggleLibraryModal:h}=(0,OJ.u)({entrypoint:OH.r6.FIGJAM_BROWSE,modalType:"figjam"}),E=f.useMemo(()=>(0,eV.Ow)(o.normalizedSearchResults),[o.normalizedSearchResults]);return o.query&&e?o.isLoading?f.createElement(e_a,null):f.createElement(Y.fu,{name:"stickers",properties:{query:e,resourceType:gD.p.STICKERS_AND_COMPONENTS}},0===E.length?f.createElement(efF,{illustration:ye.A,defaultDisplayStringResourceType:"stickers or components",query:e}):f.createElement("div",{className:e_u},f.createElement(efK,{items:{"":E},showContextMenu:!0,layoutOverride:o.query?Po.rp.NORMAL:void 0}))):f.createElement(Y.fu,{name:"stickers"},(_||d)&&f.createElement(e_a,null),!_&&!o.query&&f.createElement(ef$.W,{dismissable:!0,buttonText:"Update",formatBannerText:e=>`${e} component ${(0,i3.LD)(e,"update")}`}),m&&f.createElement(f.Fragment,null,f.createElement("div",{className:e_d},(0,eN.tx)("whiteboard.inserts.recents")),f.createElement(efK,{items:{"":u},showContextMenu:!0,layoutOverride:Po.rp.NORMAL})),f.createElement("div",{className:e_d},(0,eN.tx)("whiteboard.inserts.libraries")),f.createElement("div",{className:"libraries_tab--librariesTwoColumns--dSOU-"},(!o.query||!e)&&(0,y.Ay)().user_data&&f.createElement("div",{className:"libraries_tab--librariesTwoColumnsItemPadding--YeBjB"},f.createElement("button",{className:"libraries_tab--toggleLibraryModalContainer--lup1l text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:h,"data-onboarding-key":n8.D},f.createElement(a2.B,{className:a8.cx.colorIcon.$,svg:IF.A}),f.createElement("span",{className:a8.cx.colorText.$},(0,eN.tx)("whiteboard.inserts.add_your_own")))),Object.keys(g.fileKeyToSubscribedItems).map(e=>f.createElement(efZ,{key:e,fileKey:e,items:function(e){let t=[],n=e__(e);return Object.keys(n).sort().forEach(e=>{t.push(...n[e])}),t}(g.fileKeyToSubscribedItems[e]),onClick:t=>{p({id:e,title:t,resourceType:efP.Rt.STICKERS_AND_COMPONENTS})}}))))}function e_p(e){let t=(0,efH.hY)();return t.fileKeyToSubscribedItems[e.selectedLibrary.id]?f.createElement(Y.fu,{name:"detail",properties:{resourceId:e.selectedLibrary.id,resourceType:gD.p.STICKERS_AND_COMPONENTS}},f.createElement("div",{className:e_u},f.createElement(efK,{items:e__(t.fileKeyToSubscribedItems[e.selectedLibrary.id]),showContextMenu:!1}))):null}function e_f(){let e=(0,_.wA)(),{openFile:t,fileVersion:n,loadingState:a}=(0,N.R)(e=>({openFile:e.openFile,fileVersion:e.fileVersion,loadingState:e.loadingState})),l=t&&n&&(0,mV.Sc)(a,(0,PK.yD)(t.key));f.useEffect(()=>{l&&e(OA.zK({}))},[e,l]);let{productComponents:r}=(0,eC.g5)(EI.$A.FigJam),i=(0,efH.ik)(r,"components",(e,t)=>!t.some(t=>t.id===e.id),10),o=(0,efH.mk)(i,[(0,mV.mC)(W.fi),(0,mV.mC)(efA.fC)]);return f.createElement(efK,{items:{"":o},showContextMenu:!0,layoutOverride:Po.rp.NORMAL})}function e__(e){let t={};return(0,C7.KQ)(e,"name",{useExpensiveNaturalComparison:e.length<C7.Tw}),e.forEach(e=>{var n;let a=(null==(n=e.containing_frame)?void 0:n.name)||"";t[a]||(t[a]=[]),t[a].push(e)}),t}var e_g=n(408552),e_h=n(829488),e_E=n(466636),e_v=n(269167),e_y=n(512591),e_b=n(662153),e_C=n(4564),e_w=n(933464),e_T=n(927206),e_x=n(161405);let e_N="figjam_detail_in_editor_top_bar--backButton--Q5crN",e_S="figjam_detail_in_editor_top_bar--ctaButton--hKCbt",e_k="figjam_detail_in_editor_top_bar--chevronContainerWhite--EZcGk",e_I="figjam_detail_in_editor_top_bar--topBar--x9sDw",e_A="figjam_detail_in_editor_top_bar--left--K0x8U",e_O="figjam_detail_in_editor_top_bar--right--jXKNf",e_L="figjam_detail_in_editor_top_bar--pluginMetadataContainer--I39tz",e_P="figjam_detail_in_editor_top_bar--pluginTileNameContainer--11U-p",e_D="figjam_detail_in_editor_top_bar--pluginTileName--jini0 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",e_R="figjam_detail_in_editor_top_bar--pluginTilePublishers--9MpEZ text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",e_M="figjam_detail_in_editor_top_bar--searchCloseButton--Oz51w browse_modal_container--searchCloseButton--WHSfL";function e_F(e){let t=(0,_.wA)(),n=f.useRef(null),a=(0,nT.U)(),l="whiteboard"===(0,Q.lg)(),r=(0,e_x.F5)(),i=(0,efH.cX)().currentTab,o=(0,efH.cX)().searchQuery,s=(0,efP.Vq)(i),c=(0,elT.Gt)(e.pluginId,s),d=(0,elT.dR)(e.pluginId,s),u=(0,elT.RK)(e.pluginId),m=(0,elw.t)(e.pluginId,c,d).length>0,p=m&&(null==a?void 0:a.type)===nz.LO,g=(0,efG.b)(),{validatePublishedPluginInOrgAllowlist:h,isPluginBlockedByAllowlist:E}=(0,e_.j1)(e.pluginId),v=f.useCallback(a=>{var i;if(a.stopPropagation(),h()){if(l&&(0,e_x.oM)({id:e.pluginId,type:gD.p.PLUGINS,source:s,options:{...r,query:o}}),m){p?t(nI.oB()):t(nI.j7({type:nz.LO,data:{pluginId:e.pluginId,view:e.view,target:null==(i=n.current)?void 0:i.getBoundingClientRect(),triggeredFrom:s}}));return}u?c():d(),g()}},[h,l,m,g,e.pluginId,e.view,s,r,o,p,t,u,c,d]),{buttonCta:y,isNotInHeader:b}=e,w=(0,_.d4)(e=>(0,f1.zg)(e.selectedView)&&!e.user),[T,x]=f.useState(w);f.useEffect(()=>{x(w)},[w]);let N=b?a1.$$:a1.nR,S=w?void 0:v;return f.createElement("div",{ref:n,"data-not-draggable":!0,"data-testid":"run-cta-button"},f.createElement(N,{onClick:C.Ay.isIpad?void 0:S,onPointerDown:C.Ay.isIpad?S:void 0,className:w||E?"figjam_detail_in_editor_top_bar--disabledButton--F9yLz basic_form--primaryBtn--AU7Gy basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd figjam_detail_in_editor_top_bar--ctaButton--hKCbt":e_S},y,m&&f.createElement(a2.B,{svg:Od.A,className:b||w?e_k:"figjam_detail_in_editor_top_bar--chevronContainerBlack--YvD9R"})))}var e_B=n(33876),e_U=n(552993),e_H=n(228302),e_G=n(583718);let e_V="browse_plugins_universal_modal_tiles--savedPluginTile--pLNFr browse_plugins_universal_modal_tiles--browsePluginTile--99ESx",e_K="browse_plugins_universal_modal_tiles--pluginTileIcon--C0pTJ",e_W="browse_plugins_universal_modal_tiles--browsePluginTileRightSide--u74qu",e_z="browse_plugins_universal_modal_tiles--savedPluginTileLeftSide--nqHJe browse_plugins_universal_modal_tiles--browsePluginTileRightSide--u74qu",e_j="browse_plugins_universal_modal_tiles--pluginTileDescription--gno7V text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",e_J="browse_plugins_universal_modal_tiles--showOnPluginTileHover--qnFcH";var e_Y=n(610837);let e_X=(0,e_C.M)(),e_q=f.forwardRef((e,t)=>{let n=(0,_.wA)(),{localFileId:a,view:l}=e,r=(0,efH.cX)().setPreviewResource,i=(0,e_.nl)(),o=a?i[a]:null,s=(0,e_.kd)(),c=o?o.plugin_id:e.publishedPlugin.id,d=e.publishedPlugin??s.find(e=>e.id===c),u=null==d?void 0:d.versions[d.current_plugin_version_id],m=!!u,p=f.useRef(null),g=(0,nT.U)(),h=(null==g?void 0:g.type)===edj.lD&&g.data.localFileId===a&&g.data.pluginId===c&&g.data.view===l&&g.data.targetRect,{currentTab:E,searchQuery:v}=(0,efH.cX)(),{dragState:y,onInsertableResourcePointerDown:b}=(0,e_b.c)({clickToInsert:!1,afterSuccessfulInsert:(0,efG.b)(),triggeredFrom:(0,efP.Vq)(E),resource:o??u,searchQuery:v});if(!o&&!d)return null;let C=()=>{a&&e_X.openExtensionDirectory(a)};return f.createElement(f.Fragment,null,f.createElement("div",{className:e_V,onPointerDown:b,role:"button",tabIndex:0,ref:t},f.createElement("div",{role:"button",tabIndex:0,className:e_z,onClick:()=>m?r({id:u.plugin_id,type:efP.Rt.PLUGINS}):C()},f.createElement("div",{className:e_K},m&&u?f.createElement(Tn.V,{plugin:u,loading:"lazy",alt:""}):f.createElement(a2.B,{svg:edy.A})),f.createElement("div",{className:e_W},f.createElement("div",{className:"browse_plugins_universal_modal_tiles--developmentPluginPrimaryText--25RR9"},f.createElement("span",{className:"browse_plugins_universal_modal_tiles--developmentPluginName--f75Vj browse_plugins_universal_modal_tiles--pluginTileName--z1OSk text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},u?u.name:o.name),d&&e_w.tY.PluginManagementTitleBadge(d)),f.createElement(e_B.A,{localResource:o,publishedResource:d}))),f.createElement("div",{className:"browse_plugins_universal_modal_tiles--developmentTileRightSide----HW6"},f.createElement(iG.K0,{svg:Nn.A,ref:p,onClick:e=>{let t=e.currentTarget.getBoundingClientRect();n(nI.j7({type:edj.lD,data:{localFileId:a,pluginId:c,view:l,targetRect:t}}))},className:nb()(e_J,{"browse_plugins_universal_modal_tiles--iconButtonSelected--pR6Ki browse_plugins_universal_modal_tiles--iconButton--8Dk-i raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6":h,"browse_plugins_universal_modal_tiles--iconButton--8Dk-i raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6":!h}),"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("whiteboard.inserts.plugin_development_options_tooltip")}),h&&f.createElement(edj.T9,{localResource:o??void 0,publishedResource:o?void 0:d,viewResource:()=>r({id:c,type:efP.Rt.PLUGINS})}),f.createElement(e_F,{pluginId:c,buttonCta:(0,eN.t)("whiteboard.inserts.plugin_run_cta"),isNotInHeader:!1,view:l}))),f.createElement(e_y.z,{dragState:y}))});function e_Z(e){let t=(0,e_v.xp)(e.pluginId),n=(0,e_.Be)().plugins[e.pluginId],a=f.useMemo(()=>n||e.pluginVersion||(0,x1.Ar)(t)||x1.lT,[n,t,e.pluginVersion]);return f.createElement(e_Q,{pluginId:e.pluginId,pluginVersion:a,view:e.view,showLockIcon:e.showLockIcon,plugin:t})}let e_Q=f.memo(function(e){let{plugin:t,pluginVersion:n}=e,{isSavedForUser:a}=(0,e_G.Q)(e.pluginId,uL.vt.PLUGIN),l=(0,efH.cX)().setPreviewResource,r=(0,efG.b)(),{currentTab:i,searchQuery:o}=(0,efH.cX)(),s=(0,e_v.EO)(t),c=(0,e_v.gn)(t),d=(0,cC.sZ)(),u=(0,e_.ll)(),m=(0,ed0.XV)({org:d,extension:t,allowlistedExtensions:u}),{dragState:p,onInsertableResourcePointerDown:_}=(0,e_b.c)({clickToInsert:!1,afterSuccessfulInsert:r,triggeredFrom:(0,efP.Vq)(i),resource:n,searchQuery:o,showRequestFlow:m}),g=(0,e_.bI)(n.plugin_id)&&e.view===gD.p.PLUGINS,h=(0,ta.BI)(),E=(0,e_g.QP)({resource:t,height:"16",validBadges:[e_g.op.FREEMUM,e_g.op.OFF_PLATFORM,e_g.op.PURCHASED]});if(n===x1.lT||(0,uL.m3)(t)&&((null==h?void 0:h.shouldOptimizeForIpadApp)||(0,y.kc)().cmty_m10n_test_apple_os))return null;let v=g?f.createElement(eul.WZ,{resource:t}):s?f.createElement(e_$,{plugin:t}):c?f.createElement(e_T.Vv,null,(0,eN.tx)("community.buyer.update")):m?f.createElement("div",{style:dA.sx.add({width:"80px"}).$},f.createElement(e_H.s,{version:n,isPlugin:!0,variant:e_H.w.FigJamPluginTile})):f.createElement(e_F,{pluginId:e.pluginId,buttonCta:(0,eN.t)("whiteboard.inserts.plugin_run_cta"),isNotInHeader:!1,view:e.view}),b=(0,ia.kB)(t)||(0,ia.CF)(n),C=g?f.createElement(eul.e2,{resource:t}):f.createElement(f.Fragment,null,f.createElement("div",{className:"browse_plugins_universal_modal_tiles--pluginTileHeader--gYj6D"},f.createElement("div",{className:"browse_plugins_universal_modal_tiles--pluginTitle--aUkOj resource_tiles--pluginTitle--dP-tg"},f.createElement("span",{className:"browse_plugins_universal_modal_tiles--pluginTileName--z1OSk text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},n.name),E&&f.createElement("div",{className:"browse_plugins_universal_modal_tiles--pluginTitleBadgeContainer--SQKss resource_tiles--pluginTitleBadgeContainer--Q-9cz"},E),c&&f.createElement("div",{className:"browse_plugins_universal_modal_tiles--browsePluginTilePaymentError--A0pCZ"},f.createElement(e_T.xY,null)),e.showLockIcon&&f.createElement(a2.B,{svg:e_Y.A}))),f.createElement("div",{className:nb()(e_j,"browse_plugins_universal_modal_tiles--pluginTileDescriptionPadding--qGAaH")},(0,edQ.G8)(n,elI.$J)),b&&f.createElement("div",{className:e_j},b));return f.createElement(f.Fragment,null,f.createElement("div",{className:e_V,onPointerDown:_,role:"button",tabIndex:0,"data-testid":`figjam-plugin-tile-${e.pluginId}`},f.createElement("div",{className:e_z,onClick:()=>l({id:n.plugin_id,type:efP.Rt.PLUGINS}),role:"button",tabIndex:0},f.createElement("div",{className:"browse_plugins_universal_modal_tiles--relativeContainer--yRMHl"},g&&f.createElement("div",{className:"browse_plugins_universal_modal_tiles--redDot--rXNiG red_dot--baseRedDot--AZelu"}),f.createElement("div",{className:e_K},f.createElement(Tn.V,{plugin:n,loading:"lazy",alt:"",draggable:!1}))),f.createElement("div",{className:e_W},C)),f.createElement("div",{className:nb()([a8.cx.flex.itemsCenter.mr8.$,a8.cx.if(a,a8.cx.visible).$],{[e_J]:!a})},f.createElement(e_U._W,{resourceId:e.pluginId,resourceType:uL.vt.PLUGIN,parentView:e_U.nN.FIGJAM_PLUGIN_ROW})),f.createElement("div",null,v)),f.createElement(e_y.z,{dragState:p}))});function e_$(e){let t=(0,efH.cX)().setPreviewResource,n=(0,e_v.lt)(e.plugin);return(0,uL.m3)(e.plugin)?f.createElement("div",{className:"browse_plugins_universal_modal_tiles--priceBadgeContainer--Sf172",onClick:()=>t({id:e.plugin.id,type:efP.Rt.PLUGINS}),role:"button",tabIndex:0,"data-not-draggable":!0},f.createElement("div",{className:"browse_plugins_universal_modal_tiles--priceBadge--L2Q5M ellipsis--ellipsis--Tjyfa"},(0,e_E.bV)(e.plugin.monetized_resource_metadata)),(0,e_E.Lt)({resource:e.plugin,payment:n})&&f.createElement(e_h.w5,{metadata:e.plugin.monetized_resource_metadata,condensed:!0})):null}var e_0=n(964156),e_1=n(867272),e_2=n(540292),e_5=n(927625),e_4=n(156325);function e_3(e){let{imageUrl:t,clientMeta:n,thumbnailIsSet:a,isWhiteboard:l,name:r,hubFileId:i,publishers:o,resizedThumbnailUrls:s}=(0,vp.fG)()(e.template),c=(0,efG.b)(),{dragState:d,onInsertableResourcePointerDown:u}=(0,e_1.B)({resource:e.template,clickToInsert:!0,afterSuccessfulInsert:c,triggeredFrom:e.triggeredFrom}),m=(0,uX.jq)(e.template);return f.createElement(f.Fragment,null,f.createElement(vg.sU,{image:f.createElement("div",{role:"presentation",onPointerDown:u,className:d?e_4.J:void 0},f.createElement(vg.WM,{backgroundColor:(0,eB.Cn)(n)},f.createElement(vg.Wh.Cover,null,f.createElement("div",{className:"browse_templates_tab--hoverOverlay--BpdyD"})),f.createElement(vg.Wh.Center,null,f.createElement(vh.i,{insertTemplate:nf.lQ,isInsertingTemplate:e.isInsertingTemplate,shouldUseOpaqueBackground:!0},(0,uA.Ve)(e.templateInsertionLocation))),f.createElement(e_5.Ho,{image:t,isSet:a,isWhiteboard:l,hubFileId:i,alt:r,resizedThumbnailUrls:s}))),bottomRow:f.createElement(vg.dY.FigJamMetadata,{name:r,onClick:e.onClickTitle,publishers:o,showUserAvatar:e.template.type===uO.n.TeamTemplate}),onContextMenu:m}),f.createElement(e_0.S,{dragState:d}),f.createElement(e_2.mS,{template:e.template}))}function e_6(){return f.createElement(vg.sU,{className:a8.cx.invisible.$,image:f.createElement("div",{role:"presentation"},f.createElement(vg.WM,null,f.createElement(e_5.Ho,{image:void 0,isSet:!1,isWhiteboard:!0,hubFileId:void 0,alt:""}))),bottomRow:f.createElement(vg.dY.FigJamMetadata,{name:"\xa0",onClick:nf.lQ,publishers:[]})})}function e_7(e){let{isInsertingTemplate:t}=(0,uI.Fz)(),n=(0,efH.cX)().setPreviewResource,{currentTab:a}=(0,efH.cX)(),l=(0,efP.Vq)(a),r=(0,vp.fG)();return f.createElement("div",{className:"browse_templates_tab--resourcesGrid--Xwq6v"},e.templates.length?e.templates.map(a=>{let{primaryKey:i}=r(a);return f.createElement(e_3,{template:a,key:i,templateInsertionLocation:e.templateInsertionLocation,triggeredFrom:l,isInsertingTemplate:t(i),onClickTitle:a.type===uO.n.HubFile?()=>{n({id:a.template.id,type:efP.Rt.TEMPLATES})}:void 0})}):f.createElement(e_6,null))}e_3.displayName="TemplatesHubFileTile",e_6.displayName="BrowseTemplatesFileTilePlaceholder",e_7.displayName="BrowseTemplatesGrid";var e_8=n(370855);let e_9="browse_view_divider--browseViewDivider--bS7RU";function ege(){return f.createElement("div",{className:e_9})}function egt(){return f.createElement("div",{className:nb()([e_9,"browse_view_divider--subSectionDivider--oHRN1"])})}let egn="browse_explore_list--seeAll--8L87Q text--fontPos13--xW8hS text--_fontBase--QdLsd",ega="browse_explore_list--sectionHeader--vkmM0 text--fontPos13--xW8hS text--_fontBase--QdLsd",egl="browse_explore_list--categorySectionHeaderContainer--WiX1N";var egr=n(270951);function egi(e){let t;let{shelves:n,isLoading:a}=(0,e_8.d)(e.shelfType),l=(0,ta.Kx)(),r=(0,efH.cX)().setSelectedCategory,i=f.useMemo(()=>{let e={},t=new Set;return n.forEach(n=>{let a=[],l=n.shelf_content;for(let e=0;e<l.length;e++){let n=l[e];if(!t.has(n.id)&&(t.add(n.id),a.push(n),4===a.length))break}e[n.id]=a}),e},[n]);if(!n||0===n.length)return null;if(a)return f.createElement(re.kt,{className:"browse_explore_list--loadingSpinner--te4He"});let o=`/community/${e.resourceType===uL.bD.HUB_FILE?"figjam":e.resourceType===uL.bD.PLUGIN?"plugins/figjam":"widgets"}`,s=efP.Rt.PLUGINS;e.resourceType===uL.bD.HUB_FILE?(t="browse_explore_list--resourcesGrid--BGQAu",s=efP.Rt.TEMPLATES):e.resourceType===uL.bD.WIDGET?(t="browse_explore_list--widgetTilesGridContainer--k7aKh browse_widgets_view--widgetTilesGridContainer--t5-lL",s=efP.Rt.WIDGETS):t=void 0;let c=(null==l?void 0:l.shouldOptimizeForIpadApp)||(0,y.kc)().cmty_m10n_test_apple_os;return f.createElement(f.Fragment,null,n.map((n,a)=>{let l=i[n.id];return f.createElement(f.Fragment,{key:n.id},0===a?f.createElement(ege,null):f.createElement(egt,null),f.createElement("button",{className:nb()(egl,e.resourceType===uL.bD.PLUGIN?"browse_explore_list--pluginCategorySectionHeaderPadding--hW6gC":void 0),onClick:()=>r({id:n.id,title:n.title,resourceType:s})},f.createElement("div",{className:ega},(0,eN.Yd)(n.i18n_meta.title,n.title)),f.createElement("div",{className:egn},(0,eN.tx)("whiteboard.inserts.see_all"))),f.createElement("div",{className:t},l.map(t=>e.renderResource(t))))}),!c&&f.createElement("a",{className:"browse_explore_list--communityLink--iNdOV text--fontPos13--xW8hS text--_fontBase--QdLsd",href:o,target:"_blank"},f.createElement(a2.B,{svg:egr.A,className:"browse_explore_list--communityLinkIcon--4Ve4b text--fontPos11--2LvXf text--_fontBase--QdLsd"}),(0,eN.tx)("whiteboard.inserts.browse_more_in_community")))}function ego({currentOrg:e}){let t=(0,cu.wv)(e),{setSelectedCategory:n}=(0,efH.cX)(),a=null===t;return(null==t?void 0:t.length)||!a?(null==t?void 0:t.length)?f.createElement(f.Fragment,null,f.createElement("button",{className:egl,onClick:()=>{n({id:"",title:(0,eN.t)("whiteboard.inserts.org_name_templates",{orgName:e.name}),resourceType:efP.Rt.TEAM_TEMPLATES})}},f.createElement("div",{className:ega},(0,eN.tx)("whiteboard.inserts.org_name_templates",{orgName:e.name})),f.createElement("div",{className:egn},(0,eN.tx)("whiteboard.inserts.see_all"))),f.createElement(e_7,{templates:t.map(e=>({type:uO.n.TeamTemplate,template:e})),templateInsertionLocation:uA.RD.CURRENT_FILE})):null:f.createElement(e_t,null)}function egs(){let e=(0,uI.eE)(EI.$A.FigJam).slice(0,4),t=(0,efH.mk)(e,[(0,mV.mC)(EA.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:EI.$A.FigJam}))]);return f.createElement(f.Fragment,null,t.length>0?f.createElement(f.Fragment,null,f.createElement("div",{className:egl},f.createElement("div",{className:ega},(0,eN.tx)("whiteboard.inserts.recents"))),f.createElement(e_7,{templates:t,templateInsertionLocation:uA.RD.CURRENT_FILE})):f.createElement(f.Fragment,null))}let egc="_search";function egd(e){let{isInsertingTemplate:t}=(0,uI.Fz)(),n=f.useRef(null),a=(0,cC.sZ)(),l=(0,du.hC)(),r=(0,mV.oh)(EN.sz.loadingKeyForPayload({shelfType:uL.cS.FIGJAM_TEMPLATES_PICKER})),i=(0,mV.oh)(EA.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:EI.$A.FigJam}));return r||i?f.createElement(e_t,null):f.createElement("div",{ref:n},f.createElement(Y.fu,{name:"templates"},f.createElement(egs,null),l&&a&&f.createElement(ego,{currentOrg:a}),f.createElement(egi,{resourceType:uL.bD.HUB_FILE,shelfType:uL.cS.FIGJAM_TEMPLATES_PICKER,renderResource:n=>f.createElement(e_3,{template:{template:n,type:uO.n.HubFile},key:n.id,templateInsertionLocation:uA.RD.CURRENT_FILE,triggeredFrom:"universal-insert-figjam-templates",isInsertingTemplate:t(n.id),onClickTitle:()=>e.setPreviewHubFile({id:n.id,type:efP.Rt.TEMPLATES})})})))}egd.displayName="BrowseTemplatesTab";var egu=n(218934),egm=n(464628),egp=n(399932),egf=n(503733),eg_=n(159256);let egg="browse_widgets_universal_modal_tiles--widgetImageContainer--Jawtg",egh="browse_widgets_universal_modal_tiles--widgetTileMeta--pIVCD",egE="browse_widgets_universal_modal_tiles--widgetMetadataContainer--BLS2U",egv="browse_widgets_universal_modal_tiles--developmentWidgetPrimaryText--4ORbR",egy="browse_widgets_universal_modal_tiles--iconButton--gcHjb raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",egb="browse_widgets_universal_modal_tiles--iconButtonSelected--pJ4m9 browse_widgets_universal_modal_tiles--iconButton--gcHjb raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",egC="browse_widgets_universal_modal_tiles--widgetResourceActionContainer--tlXT0";function egw(e){let{publishedWidget:t}=e,n=(0,efH.cX)().setPreviewResource,a=(0,_.wA)(),l=t.id,r=null==t?void 0:t.versions[t.current_plugin_version_id],i=!!r,o=f.useRef(null),s=(0,nT.U)(),c=s&&(null==s?void 0:s.type)===edj.lD&&s.data.localFileId===l&&s.data.view===e.tab,d=i?r.redirect_snapshot_url||"":egf.J;return f.createElement(f.Fragment,null,f.createElement(vg.sU,{image:f.createElement(egu.FK,{className:egg},f.createElement(egm.z,{src:d,context:a_._Y.WHITEBOARD})),bottomRow:f.createElement("div",{className:egh},f.createElement(vg.dY.MetadataContainer,{className:egE,onClick:()=>n({id:l,type:efP.Rt.WIDGETS})},f.createElement(vg.dY.TextMetadataLayout,{primaryText:f.createElement("div",{className:egv},f.createElement("span",null,r.name),t&&e_w.tY.PluginManagementTitleBadge(t)),secondaryText:f.createElement(e_B.A,{publishedResource:t,localResource:void 0})})),f.createElement(vg.dY.ResourceActionContainer,{className:egC},f.createElement(iG.K0,{svg:Nn.A,ref:o,onClick:()=>{var t;let n=null==(t=oQ.findDOMNode(o.current))?void 0:t.getBoundingClientRect();a(nI.j7({type:edj.lD,data:{localFileId:l,view:e.tab,targetRect:n}}))},className:c?egb:egy,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("whiteboard.inserts.widget_options")}),c&&f.createElement(edj.T9,{publishedResource:t,viewResource:()=>n({id:l,type:efP.Rt.WIDGETS})})))}))}let egT=(0,e_C.M)(),egx=f.forwardRef((e,t)=>{let n=(0,e_.yQ)(),{localFileId:a}=e,l=(0,_.wA)(),r=n[a],i=(0,e_.bh)(),o=(0,e_.jg)(),s=f.useRef(null),c=(0,nT.U)(),d=(0,efH.cX)().setPreviewResource,{currentTab:u,searchQuery:m}=(0,efH.cX)();if(!r)return null;let p=i.find(e=>e.id===n[a].plugin_id),g=r.plugin_id,h=null==p?void 0:p.versions[p.current_plugin_version_id],E=!!h,v=c&&(null==c?void 0:c.type)===edj.lD&&c.data.localFileId===r.localFileId&&c.data.view===e.tab,y=()=>{egT.openExtensionDirectory(r.localFileId)},b=E&&h.redirect_snapshot_url||o[a]&&o[a].metadata.widgetSnapshotImageSrc||egf.J;return f.createElement(vg.sU,{image:f.createElement(egu.FK,{className:egg},f.createElement(egp._,{src:b,widget:r,analytics:{triggeredFrom:(0,efP.Vq)(u),searchQuery:m},context:a_._Y.WHITEBOARD})),bottomRow:f.createElement("div",{ref:t,className:egh},f.createElement(vg.dY.MetadataContainer,{className:egE,onClick:()=>E?d({id:g,type:efP.Rt.WIDGETS}):y()},f.createElement(vg.dY.TextMetadataLayout,{primaryText:f.createElement("div",{className:egv},f.createElement("span",null,(null==h?void 0:h.name)?null==h?void 0:h.name:r.name),p&&e_w.tY.PluginManagementTitleBadge(p)),secondaryText:f.createElement(e_B.A,{localResource:r,publishedResource:p})})),f.createElement(vg.dY.ResourceActionContainer,{className:egC},f.createElement(iG.K0,{svg:Nn.A,ref:s,onClick:()=>{var t;let n=null==(t=oQ.findDOMNode(s.current))?void 0:t.getBoundingClientRect();l(nI.j7({type:edj.lD,data:{localFileId:r.localFileId,view:e.tab,targetRect:n}}))},className:v?egb:egy,"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eN.t)("whiteboard.inserts.widget_options")}),v&&f.createElement(edj.T9,{localResource:r,viewResource:()=>d({id:g,type:efP.Rt.WIDGETS})})))})}),egN=f.memo(function(e){var t;let{currentTab:n}=(0,efH.cX)(),a=(0,efH.cX)().setPreviewResource,l=(0,_.wA)(),r=e.widgetId,i=(0,e_v.aQ)(e.widgetId),o=f.useMemo(()=>e.widgetVersion||(0,x1.uF)(i),[e.widgetVersion,i]),s=(0,e_v.EO)(i),c=(0,e_v.gn)(i),d=(0,cC.sZ)(),u=(0,e_.U6)(),m=(0,ed0.XV)({org:d,extension:i,allowlistedExtensions:u}),p=!!(s||m),{searchQuery:g}=(0,efH.cX)();f.useEffect(()=>{i||l(r3.af({id:r,resourceType:uL.bD.WIDGET}))},[r,l,i]);let h=(0,ta.BI)(),E=(0,_.d4)(e=>e.authedActiveCommunityProfile),{isSavedForUser:v}=(0,e_G.Q)(e.widgetId,uL.vt.WIDGET);return(0,B.q8)()&&y8.RA.has(r)||!o||(0,uL.m3)(i)&&((null==h?void 0:h.shouldOptimizeForIpadApp)||(0,y.kc)().cmty_m10n_test_apple_os)?null:f.createElement(vg.sU,{className:"browse_widgets_universal_modal_tiles--widgetCardContainer--yzVBr resource_tiles--_parentWithHoverAction--m180X",image:f.createElement(egu.FK,{className:egg},!c&&f.createElement("div",{className:"browse_widgets_universal_modal_tiles--widgetMonetizationBadge--C1Vye"},(0,e_g.$3)({resource:i,authedActiveCommunityProfile:E})),p?f.createElement(egm.z,{src:o.redirect_snapshot_url,context:a_._Y.WHITEBOARD}):f.createElement(egp._,{src:o.redirect_snapshot_url,widget:o,analytics:{triggeredFrom:(0,efP.Vq)(n),searchQuery:g},context:a_._Y.WHITEBOARD})),bottomRow:f.createElement(vg.dY.FigJamMetadata,{name:o.name,onClick:()=>a({id:r,type:efP.Rt.WIDGETS}),publishers:null==(t=null==i?void 0:i.community_publishers)?void 0:t.accepted,showLockIcon:e.showLockIcon,showPaymentError:c,rightAlignedElement:f.createElement("div",{className:nb()("browse_widgets_universal_modal_tiles--saveButtonInTile--KIOlI",{[eg_._0]:!v})},f.createElement(e_U._W,{resourceId:e.widgetId,resourceType:uL.vt.WIDGET,parentView:e_U.nN.TILE}))}),onClick:p||c?()=>a({id:r,type:efP.Rt.WIDGETS}):void 0,dataTestId:`figjam-widget-tile-${r}`})});var egS=n(763914),egk=n(157004),egI=n(389211),egA=n(379928),egO=n(148009),egL=n(465448),egP=n(391926);let egD="face_stamps--contentRow--hiGYK",egR="face_stamps--sectionHeader--mWSOw text--fontPos13--xW8hS text--_fontBase--QdLsd";var egM=n(428829);function egF(){let e=(0,egL.d0)(),{setPreviewResource:t}=(0,efH.cX)();return e?f.createElement(f.Fragment,null,f.createElement(egP.t,{text:(0,eN.t)("whiteboard.inserts.faces_title"),description:(0,eN.t)("whiteboard.inserts.faces_description"),onPointerDown:nf.lQ,onClick:()=>t({id:"FACE_STAMPS",type:efP.Rt.ORG_FACE_STAMPS}),iconComponent:(0,egI._N)(),recordingKey:n_.Pt("inserts","more","facestamps"),rightCaret:!0})):null}function egB(e){let{onBack:t,queryFromAllSearch:n}=e,[a,l]=f.useState(!1),{faceStampServerSideSearch:r,faceStampSearchIsLoading:i,faceStampSearchHasResolved:o}=(0,egS.A)({maxResults:20}),[s,c]=f.useState(""),[d]=(0,o1.A)(s,200);f.useEffect(()=>{n&&!a?(r(n),c(n),l(!0)):r(d)},[r,n,d,a]);let u=i||!o,m=f.useCallback(e=>"Escape"===e.key&&(d?c(""):t(),!0),[d,t]),p=(0,egL.d2)(d),_=Math.min(p.length,egH),g=(0,egL.U5)(d);return f.createElement(f.Fragment,null,f.createElement(vj.IW,{focusOnMount:!1,selectTextOnMount:!0,className:"face_stamps--searchBar--vDblE",query:d,placeholder:(0,eN.t)("whiteboard.inserts.faces_search_placeholder"),clearSearch:()=>c(""),onChange:c,isKeyDownHandled:m,hideXIcon:!d}),f.createElement("div",{className:"face_stamps--contentContainer--0-n3a"},u?f.createElement(f.Fragment,null,f.createElement(egG,{rows:1,showHeader:!d}),!d&&f.createElement(egG,{rows:2,showHeader:!0})):d?g.length>0?f.createElement(egW,{maxRows:4,isLoading:u,users:g}):f.createElement(efF,{illustration:egM.A,query:d}):f.createElement(f.Fragment,null,f.createElement(egW,{maxRows:1,title:(0,eN.t)("whiteboard.inserts.recents_header"),users:g.slice(0,_)}),f.createElement(egW,{maxRows:p.length>0?2:3,isLoading:u,title:(0,eN.t)("whiteboard.inserts.suggested_header"),users:g.slice(_)}))))}function egU({children:e}){return f.createElement("div",{className:egR},e)}let egH=5;function egG({rows:e=1,showHeader:t=!0}){let n=e*egH,a=[];for(let e=0;e<n;e++)a.push(f.createElement(egK,{key:e}));return f.createElement(f.Fragment,null,t&&f.createElement(egV,null),f.createElement("div",{className:nb()(egD,"face_stamps--skeletonRow--AqMaG")},...a))}function egV(){return f.createElement("div",{className:nb()(egR,"face_stamps--skeletonHeader--dh0WB face_stamps--sectionHeader--mWSOw text--fontPos13--xW8hS text--_fontBase--QdLsd")})}function egK(){return f.createElement("div",{className:"face_stamps--skeletonFaceStampContainer--6nweY"},f.createElement("div",{className:"face_stamps--skeletonFaceStamp--J8vAD"}),f.createElement("div",{className:"face_stamps--skeletonFaceStampLabel---4KQM"}))}function egW({users:e,title:t,isLoading:n,maxRows:a}){let{currentTab:l,searchQuery:r}=(0,efH.cX)(),i=(0,efP.Vq)(l);return 0===e.length&&!0!==n?null:f.createElement(f.Fragment,null,t&&f.createElement(egU,null,t),f.createElement("div",{className:egD},n?f.createElement(egA.Q,null):e.slice(0,a*egH).map(e=>f.createElement(egA.I,{key:e.id,user:e,searchQuery:r,triggeredFrom:i}))))}function egz({onBack:e,setPinned:t,queryFromAllSearch:n}){let a=(0,ax.LR)(),{faceStampServerSideSearch:l}=(0,egS.A)({maxResults:20}),r=()=>{""!==n&&l(n),e()},i=(0,egO.F)();return f.createElement("div",{className:e_I},f.createElement("div",{className:e_A},f.createElement(a2.B,{svg:yl.A,className:e_N,onClick:C.Ay.isIpad?void 0:r,onPointerDown:C.Ay.isIpad?r:void 0,"data-not-draggable":!0,"data-does-not-dismiss-modal":!0}),f.createElement("div",{className:"face_stamps--titleContainer--0IWlF"},f.createElement("span",{className:"face_stamps--titlePrimary--J3DrZ text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,eN.tx)("whiteboard.inserts.faces_title")),f.createElement("span",{className:"face_stamps--titleSecondary--95nwF text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,eN.tx)("whiteboard.inserts.faces_description")))),f.createElement("div",{className:e_O},i?f.createElement(egk.O,{setPinned:t}):f.createElement(tN.Jn,{onClick:a,className:e_M})))}let egj="browse_resources_all_search_view--sectionHeaderContainer--fg20n",egJ="browse_resources_all_search_view--sectionHeader--0rdpg text--fontPos13--xW8hS text--_fontBase--QdLsd",egY="browse_resources_all_search_view--seeMore--t4uuM text--fontPos13--xW8hS text--_fontBase--QdLsd";function egX(e){let{assetsPanelSearch:t}=(0,_.d4)(e=>e.library),n=(0,ta.BI)(),a=(0,egL.d0)();if(e.lastPluginSearchQuery!==e.debouncedSearchQuery||e.lastWidgetSearchQuery!==e.debouncedSearchQuery||a&&e.lastFaceStampSearchQuery!==e.debouncedSearchQuery)return f.createElement(e_l,null);if(0===t.normalizedSearchResults.length&&0===e.searchTemplatesResult[egc].length&&0===e.widgetSavedSearchResultIds.length&&0===e.widgetCommunitySearchResultIds.length&&0===e.widgetOrgSearchResultIds.length&&0===e.pluginSavedSearchResultIds.length&&0===e.pluginOrgSearchResultIds.length&&0===e.pluginCommunitySearchResultIds.length&&0===e.widgetDevelopmentSearchResultIds.length&&0===e.pluginDevelopmentSearchResultIds.length&&0===e.moreResult.length&&0===e.teamTemplatesFromSearch.length){let t=!((null==n?void 0:n.shouldOptimizeForIpadApp)||(0,y.kc)().cmty_m10n_test_apple_os)&&f.createElement("a",{className:efM,href:"/community/figjam",target:"_blank"},(0,eN.tx)("whiteboard.inserts.see_more_from_community"));return f.createElement(efF,{illustration:ye.A,query:e.query,cta:t})}return f.createElement(Y.fu,{name:"all",properties:{resourceType:"all",query:e.query}},f.createElement(eg1,{results:e.moreResult}),[()=>f.createElement(eg$,{setCurrentTab:e.setCurrentTab,key:"librarySearchResults"}),()=>a&&f.createElement(egQ,{faceStampSearchIsLoading:e.faceStampSearchIsLoading,query:e.query,key:"faceStampSearchResults"}),()=>f.createElement(eg0,{setCurrentTab:e.setCurrentTab,templateSearchResults:e.searchTemplatesResult,teamTemplatesFromSearch:e.teamTemplatesFromSearch,totalNumTeamTemplatesFromSearch:e.totalNumTeamTemplatesFromSearch,key:"templateSearchResults"}),()=>f.createElement(egq,{setCurrentTab:e.setCurrentTab,savedSearchResultIds:e.widgetSavedSearchResultIds,communitySearchResultIds:e.widgetCommunitySearchResultIds,orgSearchResultIds:e.widgetOrgSearchResultIds,developmentSearchResultIds:e.widgetDevelopmentSearchResultIds,searchIsLoading:e.widgetSearchIsLoading,searchHasResolved:e.widgetSearchHasResolved,key:"widgetSearchResults"}),()=>f.createElement(egZ,{setCurrentTab:e.setCurrentTab,savedSearchResultIds:e.pluginSavedSearchResultIds,communitySearchResultIds:e.pluginCommunitySearchResultIds,orgSearchResultIds:e.pluginOrgSearchResultIds,developmentSearchResultIds:e.pluginDevelopmentSearchResultIds,searchIsLoading:e.pluginSearchIsLoading,searchHasResolved:e.pluginSearchHasResolved,key:"pluginSearchResults"})].map(e=>e()))}function egq(e){let t=e.savedSearchResultIds.concat(e.communitySearchResultIds,e.orgSearchResultIds),n=Math.max(t.length+e.developmentSearchResultIds.length-4,0),a=t.slice(0,4),l=Math.min(e.developmentSearchResultIds.length,4-a.length);return 0===t.length?null:f.createElement(f.Fragment,null,f.createElement("div",{className:egj},f.createElement("div",null,f.createElement("div",{className:egJ},(0,eN.tx)("whiteboard.inserts.widgets"))),n>0&&f.createElement("button",{className:egY,onClick:()=>{e.setCurrentTab(gD.p.WIDGETS)}},`See ${n} more ${(0,i3.LD)(n,"result")}`)),f.createElement("div",{className:"browse_resources_all_search_view--widgetTilesGridContainer--MDlpu browse_widgets_view--widgetTilesGridContainer--t5-lL"},f.createElement(f.Fragment,null,a.map(e=>f.createElement(egN,{widgetId:e,key:e})),e.developmentSearchResultIds.slice(0,l).map(e=>f.createElement(egx,{localFileId:e,tab:gD.p.DEVELOPMENT,key:e})))))}function egZ(e){let t=e.savedSearchResultIds.concat(e.communitySearchResultIds,e.orgSearchResultIds),n=Math.max(t.length+e.developmentSearchResultIds.length-4,0),a=t.slice(0,4),l=Math.min(e.developmentSearchResultIds.length,4-a.length);return 0===t.length?null:f.createElement(f.Fragment,null,f.createElement("div",{className:nb()(egj,"browse_resources_all_search_view--pluginCategorySectionHeaderPadding--RKhPp")},f.createElement("div",null,f.createElement("div",{className:egJ},(0,eN.tx)("whiteboard.inserts.plugins"))),n>0&&f.createElement("button",{className:egY,onClick:()=>{e.setCurrentTab(gD.p.PLUGINS)}},`See ${n} more ${(0,i3.LD)(n,"result")}`)),f.createElement(f.Fragment,null,a.slice(0,4).map(e=>f.createElement(e_Z,{pluginId:e,view:gD.p.PLUGINS,key:e})),e.developmentSearchResultIds.slice(0,l).map(e=>f.createElement(e_q,{localFileId:e,view:gD.p.DEVELOPMENT,key:e}))))}function egQ(e){let t=(0,egL.U5)(e.query),{setPreviewResource:n}=(0,efH.cX)();return 0===t.length?null:f.createElement(f.Fragment,null,f.createElement("div",{className:egj},f.createElement("div",{className:egJ},(0,eN.tx)("whiteboard.inserts.faces_title")),t.length>5&&!e.faceStampSearchIsLoading&&f.createElement("button",{className:egY,onClick:()=>{n({id:"FACE_STAMPS",type:efP.Rt.ORG_FACE_STAMPS})}},(0,eN.tx)("whiteboard.inserts.see_more"))),f.createElement("div",{className:efV},e.faceStampSearchIsLoading?f.createElement("div",{className:"browse_resources_all_search_view--skeletonContainer--W9B65"},f.createElement(egG,{rows:1,showHeader:!1})):f.createElement(egW,{maxRows:1,isLoading:!1,users:t})))}function eg$(e){let{assetsPanelSearch:t}=(0,_.d4)(e=>e.library),n=f.useMemo(()=>(0,eV.Ow)(t.normalizedSearchResults),[t.normalizedSearchResults]),a=Math.max(n.length-12,0),l=(0,_.wA)(),{openFile:r,fileVersion:i,loadingState:o}=(0,N.R)(e=>({openFile:e.openFile,fileVersion:e.fileVersion,loadingState:e.loadingState})),s=r&&i&&(0,mV.Sc)(o,(0,PK.yD)(r.key));return(f.useEffect(()=>{s&&l(OA.zK({}))},[l,s]),0===n.length)?null:f.createElement(f.Fragment,null,f.createElement("div",{className:egj},f.createElement("div",null,f.createElement("div",{className:egJ},(0,eN.tx)("whiteboard.inserts.stickers"))),a>0&&f.createElement("button",{className:egY,onClick:()=>{e.setCurrentTab(gD.p.STICKERS_AND_COMPONENTS)}},(0,eN.tx)("whiteboard.inserts.see_num_more_resources",{numMoreResources:a}))),f.createElement(efK,{items:{"":n.slice(0,12)},showContextMenu:!0,layoutOverride:Po.rp.SMALL}))}function eg0(e){let t=(0,_.d4)(e=>e.hubFiles),n=(e.templateSearchResults[egc]||[]).map(e=>t[e]),a=[...e.teamTemplatesFromSearch.map(e=>({type:uO.n.TeamTemplate,template:e})),...n.map(e=>({type:uO.n.HubFile,template:e}))],l=Math.max(n.length+e.totalNumTeamTemplatesFromSearch-4,0);return 0===a.length?null:f.createElement(f.Fragment,null,f.createElement("div",{className:egj},f.createElement("div",{className:egJ},(0,eN.tx)("whiteboard.inserts.templates")),l>0&&f.createElement("button",{className:egY,onClick:()=>{e.setCurrentTab(gD.p.TEMPLATES)}},(0,eN.tx)("whiteboard.inserts.see_num_more_resources",{numMoreResources:l}))),f.createElement(e_7,{templates:a.slice(0,4),templateInsertionLocation:uA.RD.CURRENT_FILE}))}function eg1(e){return f.createElement("div",{className:"browse_resources_all_search_view--moreTopPadding--NroRc"},e.results.map((e,t)=>f.createElement(e,{key:t})))}var eg2=n(154026),eg5=n(328570);let eg4="browse_resources_use_cases--sectionHeader--bfznu text--fontPos13--xW8hS text--_fontBase--QdLsd",eg3="browse_resources_use_cases--flexContainer--dANvZ",eg6="browse_resources_use_cases--useCaseSectionHeader--e5Nxj browse_resources_use_cases--sectionHeader--bfznu text--fontPos13--xW8hS text--_fontBase--QdLsd",eg7="browse_resources_use_cases--sectionHeaderSubtext--5e-e- text--fontPos11--2LvXf text--_fontBase--QdLsd",eg8="browse_resources_use_cases--resourceContainer--rxSfA browse_explore_category_view--resourceContainer--pdbQU",eg9="browse_resources_use_cases--caretRight--UGsAJ",ehe="browse_resources_use_cases--resourceMetadata--AdJJW text--fontPos11--2LvXf text--_fontBase--QdLsd",eht="browse_resources_use_cases--stickerWidgetEllipsis--KpMzQ ellipsis--ellipsis--Tjyfa",ehn="browse_resources_use_cases--templateEllipsis--8hbx5 ellipsis--ellipsis--Tjyfa";function eha({onClick:e,name:t,localizedName:n,localizedDescription:a,children:l}){let r=void 0!==e;return f.createElement("div",{className:r?"browse_resources_use_cases--useCaseSectionDrilldown--4sijQ browse_resources_use_cases--useCaseSection--c00-9":"browse_resources_use_cases--useCaseSection--c00-9",key:t,onClick:e,role:"presentation"},f.createElement("div",{className:eg4},n||t,r?f.createElement(a2.B,{svg:Vo.A,className:eg9}):null),f.createElement("div",{className:eg7},a),f.createElement("div",{className:"browse_resources_use_cases--sectionResources--WMI76"},l))}function ehl(){let e=(0,_.d4)(e=>e.figjamDefaultInserts.useCases),{setSelectedCategory:t}=(0,efH.cX)(),n=!!(0,y.kc)().figjam_universal_inserts_all_tab_update,a=e=>"Brainstorm together"===e?(0,eN.t)("whiteboard.inserts.use_cases_brainstorm_together"):"Run a meeting"===e?(0,eN.t)("whiteboard.inserts.use_cases_run_a_meeting"):"Diagram anything"===e?(0,eN.t)("whiteboard.inserts.use_cases_diagram_anything"):"Lead a workshop"===e?(0,eN.t)("whiteboard.inserts.use_cases_lead_a_workshop"):"Break the ice"===e?(0,eN.t)("whiteboard.inserts.use_cases_break_the_ice"):void 0,l=e=>"Brainstorm together"===e?(0,eN.t)("whiteboard.inserts.use_cases_brainstorm_together_description"):"Run a meeting"===e?(0,eN.t)("whiteboard.inserts.use_cases_run_a_meeting_description"):"Diagram anything"===e?(0,eN.t)("whiteboard.inserts.use_cases_diagram_anything_description"):"Lead a workshop"===e?(0,eN.t)("whiteboard.inserts.use_cases_lead_a_workshop_description"):"Break the ice"===e?(0,eN.t)("whiteboard.inserts.use_cases_break_the_ice_description"):void 0,r=e.filter(e=>!e.name.includes("Whats New"));return 0===r.length?f.createElement(ehc,null):f.createElement(f.Fragment,null,r.map(e=>"collage_items"===e.name?null:f.createElement(eha,{onClick:n?void 0:()=>{t({id:e.name,title:e.name,resourceType:efP.Rt.ALL})},name:e.name,localizedName:a(e.name),localizedDescription:l(e.name),key:e.name},e.resources.slice(0,3).map(t=>f.createElement(f.Fragment,{key:[e.name,t?t.id:""].join("_")},t&&"is_widget"in t&&!!t.is_widget&&f.createElement(eho,{widgetId:t.id,restrictDrilldown:n}),t&&"type"in t&&t.type===Sd.PW.COMPONENT&&f.createElement(ehs,{resource:t}),t&&"viewer_mode"in t&&!!t.viewer_mode&&f.createElement(ehi,{template:{type:uO.n.HubFile,template:t},restrictDrilldown:n}))))))}function ehr(e){let t=(0,_.d4)(e=>e.figjamDefaultInserts.useCases).find(t=>t.name===e.useCaseName);if(!t)return null;let n=t.resources.filter(e=>"viewer_mode"in e&&!!e.viewer_mode),a=t.resources.filter(e=>"is_widget"in e&&!!e.is_widget),l=t.resources.filter(e=>"type"in e&&e.type===Sd.PW.COMPONENT),r=t.resources.filter(e=>"is_widget"in e&&!e.is_widget);return f.createElement(Y.fu,{name:"use_case",properties:{useCase:t.name}},!!n.length&&f.createElement(f.Fragment,null,f.createElement("div",{className:eg6},(0,eN.tx)("whiteboard.inserts.templates")),f.createElement(e_7,{templates:n.map(e=>({type:uO.n.HubFile,template:e})),templateInsertionLocation:uA.RD.CURRENT_FILE})),!!a.length&&f.createElement(f.Fragment,null,f.createElement("div",{className:eg6},(0,eN.tx)("whiteboard.inserts.widgets")),f.createElement("div",{className:"browse_resources_use_cases--widgetTilesGridContainer--gv30z browse_widgets_view--widgetTilesGridContainer--t5-lL"},a.map(e=>f.createElement("button",{key:e.id,className:eg8},f.createElement(egN,{widgetId:e.id,key:e.id}))))),!!l.length&&f.createElement(f.Fragment,null,f.createElement("div",{className:eg6},(0,eN.tx)("whiteboard.inserts.stickers_and_components")),f.createElement(efz,{items:l,showContextMenu:!0})),!!r.length&&f.createElement(f.Fragment,null,f.createElement("div",{className:eg6},(0,eN.tx)("whiteboard.inserts.plugins")),f.createElement("div",{className:"browse_resources_use_cases--pluginCategoryViewPadding--e1D-M"},r.map(e=>f.createElement("button",{key:e.id,className:eg8},f.createElement(e_Z,{pluginId:e.id,view:gD.p.ALL,key:e.id}))))))}function ehi({template:e,showPublisherName:t=!1,restrictDrilldown:n}){let{imageUrl:a,clientMeta:l,thumbnailIsSet:r,isWhiteboard:i,hubFileId:o,name:s,primaryKey:c,publishers:d,resizedThumbnailUrls:u}=(0,vp.fG)()(e),m=(0,efH.cX)().setPreviewResource,p=(0,efG.b)(),{isInsertingTemplate:_}=(0,uI.Fz)(),{dragState:g,onInsertableResourcePointerDown:h}=(0,e_1.B)({resource:e,clickToInsert:!0,afterSuccessfulInsert:p,triggeredFrom:"universal-insert-figjam-all-use-case"});return f.createElement("div",{className:"browse_resources_use_cases--templatePreview--vlIll browse_resources_use_cases--resourcePreview--rTL2d",onClick:e=>e.stopPropagation(),role:"button",tabIndex:0},f.createElement(egu.zq,{image:f.createElement("div",{role:"presentation",onPointerDown:h,className:g?e_4.J:void 0},f.createElement(egu.FK,{backgroundColor:(0,eB.Cn)(l)},f.createElement(egu.zx.Cover,null,f.createElement("div",{className:"browse_resources_use_cases--hoverOverlay--84hkm browse_templates_tab--hoverOverlay--BpdyD"})),f.createElement(egu.zx.Center,null,f.createElement(vh.i,{insertTemplate:nf.lQ,isInsertingTemplate:_(c),shouldUseOpaqueBackground:!0},(0,uA.Ve)(uA.RD.CURRENT_FILE))),f.createElement(e_5.Ho,{image:a||void 0,isSet:r,isWhiteboard:i,hubFileId:o,alt:s,resizedThumbnailUrls:u}))),bottomRow:f.createElement("button",{className:nb()(ehe,t&&d[0]&&"browse_resources_use_cases--resourceMetadataWithPublisher--V9KyE"),onClick:t=>{t.stopPropagation(),n||e.type!==uO.n.HubFile||m({id:e.template.id,type:efP.Rt.TEMPLATES})},role:e.type===uO.n.HubFile?void 0:"presentation"},f.createElement("div",{className:eg3},f.createElement("div",{className:ehn},s),!n&&e.type===uO.n.HubFile&&f.createElement(a2.B,{svg:Vo.A,className:eg9})),t&&d.length>0&&f.createElement("div",{className:eg3},f.createElement("div",{className:nb()(ehn,"browse_resources_use_cases--publisher--2akDJ")},(0,eN.tx)("whiteboard.inserts.by_publisher_name",{publisherName:d[0].name}))))}),f.createElement(e_0.S,{dragState:g}))}function eho(e){let t=e.widgetId,{setPreviewResource:n}=(0,efH.cX)(),a=(0,_.d4)(e=>e.publishedWidgets[t]),l=(0,x1.uF)(a),{dragState:r,onInsertableResourcePointerDown:i}=(0,eg5.P)({resource:l,clickToInsert:!0,afterSuccessfulInsert:(0,efG.b)(),triggeredFrom:"universal-insert-figjam-all-use-case"});return a?f.createElement("div",{onClick:e=>e.stopPropagation(),role:"button",tabIndex:0},f.createElement(vg.sU,{className:"browse_resources_use_cases--widgetPreview--egQ9B browse_resources_use_cases--resourcePreview--rTL2d",image:f.createElement(vg.WM,{backgroundColor:"transparent",removeBorder:!0,className:"browse_resources_use_cases--widgetImageContainer--diYt5"},f.createElement("div",{onPointerDown:i,role:"button",tabIndex:0},f.createElement("img",{className:nb()({"browse_resources_use_cases--widgetImage--Rciys":!0,[e_4.J]:!!r}),src:l.redirect_snapshot_url,alt:""}))),bottomRow:f.createElement("button",{className:ehe,onClick:t=>{t.stopPropagation(),e.restrictDrilldown||n({id:a.id,type:efP.Rt.WIDGETS})}},f.createElement("div",{className:eg3},f.createElement("div",{className:eht},l.name),!e.restrictDrilldown&&f.createElement(a2.B,{svg:Vo.A,className:eg9})))}),f.createElement(eg2.E,{dragState:r})):null}function ehs(e){let t=(0,efG.b)();return f.createElement("div",{className:"browse_resources_use_cases--stickerPreview--ESlWj browse_resources_use_cases--resourcePreview--rTL2d",onClick:e=>e.stopPropagation(),role:"button",tabIndex:0},f.createElement(Pr.lX,{item:e.resource,height:90,width:90,showName:!1,shouldHideDescription:!0,shouldShowShadowOnHover:!0,isFigJam:!0,noBackground:!0,isSearch:!1,draggable:{sourceForTracking:"universal-insert-figjam-all-use-case",afterSuccessfulInsert:t,clickToInsert:!0}}),f.createElement("button",{className:"browse_resources_use_cases--stickerResourceMetadata--vE2eG browse_resources_use_cases--resourceMetadata--AdJJW text--fontPos11--2LvXf text--_fontBase--QdLsd"},f.createElement("div",{className:eht},e.resource.name)),f.createElement(efq,null))}function ehc(){return f.createElement(f.Fragment,null,f.createElement(ehd,{name:(0,eN.t)("whiteboard.inserts.use_cases_brainstorm_together"),description:(0,eN.t)("whiteboard.inserts.use_cases_brainstorm_together_description")}),f.createElement(ehd,{name:(0,eN.t)("whiteboard.inserts.use_cases_run_a_meeting"),description:(0,eN.t)("whiteboard.inserts.use_cases_run_a_meeting_description")}),f.createElement(ehd,{name:(0,eN.t)("whiteboard.inserts.use_cases_diagram_anything"),description:(0,eN.t)("whiteboard.inserts.use_cases_diagram_anything_description")}),f.createElement(ehd,{name:(0,eN.t)("whiteboard.inserts.use_cases_lead_a_workshop"),description:(0,eN.t)("whiteboard.inserts.use_cases_lead_a_workshop_description")}),f.createElement(ehd,{name:(0,eN.t)("whiteboard.inserts.use_cases_break_the_ice"),description:(0,eN.t)("whiteboard.inserts.use_cases_break_the_ice_description")}))}function ehd({name:e,description:t,miniCardsOnly:n=!1}){return f.createElement("div",{className:nb()("browse_resources_use_cases--useCaseSectionLoading--jAjoI browse_resources_use_cases--useCaseSection--c00-9",{"browse_resources_use_cases--mini_useCaseSectionLoading--Er0Hh":n}),key:e},f.createElement("div",{className:eg4},e,f.createElement(a2.B,{svg:Vo.A,className:eg9})),f.createElement("div",{className:eg7},t))}function ehu({currentOrg:e}){let t=(0,cu.wv)(e),{setSelectedCategory:n}=(0,efH.cX)(),a=null===t,l=(null==t?void 0:t.length)===0,r=(0,eN.t)("whiteboard.inserts.start_from_a_template"),i=(0,eN.t)("whiteboard.inserts.try_handmade_templates_created_by_your_team");return a?f.createElement(ehd,{name:r,description:i,miniCardsOnly:!0}):l?null:f.createElement(eha,{name:r,localizedName:r,localizedDescription:i,onClick:()=>n({resourceType:efP.Rt.TEAM_TEMPLATES,id:"",title:(0,eN.t)("whiteboard.inserts.org_name_templates",{orgName:e.name})})},f.createElement(fy.Y,{spacing:32,horizontalAlignItems:"center"},t.map(e=>f.createElement(ehi,{key:e.file_key,template:{type:uO.n.TeamTemplate,template:e},showPublisherName:!0,restrictDrilldown:!1}))))}var ehm=n(416333),ehp=n(123975),ehf=n(852195);function eh_(e){let t=(0,egL.d0)(),n=(0,S.md)(ehp.c),a=(0,ehf.dQ)(),l=(0,ehf.Q6)((null==n?void 0:n.numPrimaryTools)??0),r=a.filter(e=>!l.includes(e));return f.createElement("div",{className:e.hasTopPadding?"browse_more_view--moreViewContainer--blJLd":void 0},r.map(e=>f.createElement(ehg,{key:e,toolKey:e})),(0,y.kc)().figjam_mindmaps_entry_enable&&f.createElement(ehm.l7,null),t&&f.createElement(egF,null),f.createElement(ehm.j6,null),f.createElement(ehm.m_,null),f.createElement(ehm.G0,null),f.createElement(ehm.fQ,null))}function ehg({toolKey:e}){switch(e){case"text":return f.createElement(ehm.ue,null);case"section":return f.createElement(ehm.Sn,null);case"table":return f.createElement(ehm.vh,null);case"stamp":return f.createElement(ehm.Ox,null);default:return null}}let ehh=f.memo(function(e){let t=t=>(0,TS.ZQ)(t)?f.createElement(e_q,{localFileId:t.localFileId,view:e.view,key:"development_plugin_"+t.localFileId}):f.createElement(e_Z,{pluginId:t.plugin_id,view:e.view,pluginVersion:t,key:"recent_plugin_"+t.plugin_id});return f.createElement(f.Fragment,null,e.items.map(e=>t(e)))});function ehE(){let e=(0,efH.Hb)(),t=(0,e_.Tg)().filter(e);return f.createElement(f.Fragment,null,f.createElement(ehh,{items:t.slice(0,4),view:gD.p.RECENTS}))}function ehv(){let e=(0,uI.eE)(EI.$A.FigJam),t=(0,efH.ik)(e,"templates",(e,t)=>!t.some(t=>t.type===uO.n.HubFile&&t.template.id===e.id),4),n=(0,efH.mk)(t,[(0,mV.mC)(EA.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:EI.$A.FigJam})),(0,mV.mC)(efA.fC)]);return f.createElement(e_7,{templates:n,templateInsertionLocation:uA.RD.CURRENT_FILE})}let ehy="browse_widgets_view--sectionHeader--rxCOO text--fontPos13--xW8hS text--_fontBase--QdLsd",ehb="browse_widgets_view--loadingSpinner--VdXEO browse_resources_modal--loadingSpinner--pMJQa",ehC="browse_widgets_view--widgetTilesGridContainer--t5-lL",ehw=f.memo(function(e){let t=e=>(0,TS.ZQ)(e)?f.createElement(egx,{localFileId:e.localFileId,tab:gD.p.RECENTS,key:e.localFileId}):f.createElement(egN,{widgetId:e.plugin_id,widgetVersion:e,key:e.plugin_id,tab:gD.p.RECENTS});return f.createElement("div",{className:ehC},e.items.map(e=>t(e)))});function ehT({}){let e=(0,efH.Sp)(),t=(0,e_.qr)().filter(e);return f.createElement(ehw,{items:t.slice(0,4)})}var ehx=n(630028);let ehN="browse_resources_all_tab--divider--lN9-d",ehS="browse_resources_all_tab--sectionBottomPadding--3jqXm";function ehk(){let e=(0,efH.qZ)(),t=(0,du.hC)(),n=(0,cC.sZ)(),a=(0,mV.oh)(efA.fC),l=(0,mV.oh)(EA.cd.fetchWidgetsMetadata.loadingKeyForPayload({key:EI.$A.FigJam})),r=(0,mV.oh)(W.fi),i=(0,mV.oh)(EA.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:EI.$A.FigJam})),o=(0,_.d4)(e=>e.figjamDefaultInserts.useCases),s=!!e&&0===o.length;return a||e&&s||!e&&(l||r||i)?f.createElement(e_l,null):f.createElement(Y.fu,{name:"all"},f.createElement("div",null,f.createElement(ehx.O9,{applyInsertStyling:!0}),t&&n&&f.createElement(ehu,{currentOrg:n}),e?f.createElement(ehl,null):f.createElement(f.Fragment,null,f.createElement(ehO,null),f.createElement("div",{className:ehN}),f.createElement(ehL,null),f.createElement("div",{className:ehN}),f.createElement(ehI,null),f.createElement("div",{className:ehN}),f.createElement(ehA,null),f.createElement("div",{className:ehN}),f.createElement(ehP,null))))}function ehI(){let e=(0,efH.cX)().setCurrentTab;return f.createElement("div",{className:ehS},f.createElement(ehD,{title:(0,eN.t)("whiteboard.inserts.widgets"),subtitle:(0,eN.t)("whiteboard.inserts.widgets_subtitle"),onClick:()=>e(gD.p.WIDGETS),showCaret:!0,shorterSectionHeader:!1}),f.createElement(ehT,null))}function ehA(){let e=(0,efH.cX)().setCurrentTab;return f.createElement("div",{className:ehS},f.createElement(ehD,{title:(0,eN.t)("whiteboard.inserts.plugins"),subtitle:(0,eN.t)("whiteboard.inserts.plugins_subtitle"),onClick:()=>e(gD.p.PLUGINS),showCaret:!0,shorterSectionHeader:!0}),f.createElement(ehE,null))}function ehO(){let e=(0,efH.cX)().setCurrentTab;return f.createElement("div",{className:ehS},f.createElement(ehD,{title:(0,eN.t)("whiteboard.inserts.stickers"),subtitle:(0,eN.t)("whiteboard.inserts.stickers_subtitle"),onClick:()=>e(gD.p.STICKERS_AND_COMPONENTS),showCaret:!0,shorterSectionHeader:!1}),f.createElement(e_f,null))}function ehL(){let e=(0,efH.cX)().setCurrentTab;return f.createElement("div",{className:ehS},f.createElement(ehD,{title:(0,eN.t)("whiteboard.inserts.templates"),subtitle:(0,eN.t)("whiteboard.inserts.templates_subtitle"),onClick:()=>e(gD.p.TEMPLATES),showCaret:!0,shorterSectionHeader:!1}),f.createElement(ehv,null))}function ehP(){let e=(0,efH.cX)().setCurrentTab;return f.createElement("div",{className:ehS},f.createElement(ehD,{title:(0,eN.t)("whiteboard.inserts.more"),onClick:()=>e(gD.p.MORE),showCaret:!0,shorterSectionHeader:!0}),f.createElement(eh_,{hasTopPadding:!1}))}function ehD(e){return f.createElement("div",{className:nb()(e.subtitle?"browse_resources_all_tab--sectionHeaderContainer--2ZoeS":"browse_resources_all_tab--sectionHeaderContainerNoSubtitle--qdp9l browse_resources_all_tab--sectionHeaderContainer--2ZoeS",e.shorterSectionHeader?"browse_resources_all_tab--sectionHeaderContainerShorter--jEE47":void 0),onClick:e.onClick,role:"button",tabIndex:0},f.createElement("div",{className:"browse_resources_all_tab--sectionTitleContainer--5Z1j0"},f.createElement("div",{className:"browse_resources_all_tab--sectionHeader--Xq6Ds text--fontPos16--oMC-G text--_fontBase--QdLsd"}," ",e.title," "),e.showCaret&&f.createElement(a2.B,{className:"browse_resources_all_tab--expandCaret--IfaSz",svg:erU.A,onClick:e.onClick})),e.subtitle&&f.createElement("div",{className:"browse_resources_all_tab--sectionHeaderSubtext--7a8Mb text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.subtitle))}var ehR=n(178466),ehM=n(582064);function ehF(e){let{currentTab:t,tabs:n,onTabChanged:a,fadeEdges:l,recordingKey:r,tabGroupHorizontalPadding:i,tabVerticalPadding:o}=e,s=(e,t)=>{e.stopPropagation(),a(t)};return f.createElement(wi,{fadeEdges:l},f.createElement("div",{className:"whiteboard_tab_group--tabs--9lkXa",style:void 0!==i?{paddingLeft:i,paddingRight:i}:void 0},n.map(({key:e,title:n})=>f.createElement(a7.D8,{key:e,recordingKey:n_.Pt(r,e),className:"whiteboard_tab_group--figjamUniversalInsertTabClickTarget--Qvkv7",onClick:()=>a(e),onPointerDown:t=>s(t,e),role:"tab",tabIndex:0,"data-not-draggable":!0},f.createElement("div",{className:e===t?"whiteboard_tab_group--selectedTab--LPO1K whiteboard_tab_group--tab--I8DQr text--fontPos13--xW8hS text--_fontBase--QdLsd":"whiteboard_tab_group--unselectedTab--Cpfle whiteboard_tab_group--tab--I8DQr text--fontPos13--xW8hS text--_fontBase--QdLsd",style:void 0!==o?{paddingTop:o,paddingBottom:o}:void 0},n),f.createElement("div",{className:"whiteboard_tab_group--hiddenSelectedTabWidth--YBTTX whiteboard_tab_group--selectedTab--LPO1K whiteboard_tab_group--tab--I8DQr text--fontPos13--xW8hS text--_fontBase--QdLsd"},n)))))}let ehB=e=>e?ehH():ehU(),ehU=()=>[{key:gD.p.WIDGETS,title:(0,eN.t)("whiteboard.inserts.widgets")},{key:gD.p.PLUGINS,title:(0,eN.t)("whiteboard.inserts.plugins")},{key:gD.p.MORE,title:(0,eN.t)("whiteboard.inserts.more")}],ehH=()=>[{key:gD.p.ALL,title:(0,eN.t)("whiteboard.inserts.all")},{key:gD.p.STICKERS_AND_COMPONENTS,title:(0,eN.t)("whiteboard.inserts.stickers")},{key:gD.p.TEMPLATES,title:(0,eN.t)("whiteboard.inserts.templates")},{key:gD.p.WIDGETS,title:(0,eN.t)("whiteboard.inserts.widgets")},{key:gD.p.PLUGINS,title:(0,eN.t)("whiteboard.inserts.plugins")},{key:gD.p.MORE,title:(0,eN.t)("whiteboard.inserts.more")}];function ehG(){let e=(0,af.tS)(),{currentTab:t,setCurrentTab:n}=(0,efH.cX)();return f.createElement(ehF,{fadeEdges:!0,tabs:ehB(e),onTabChanged:e=>n(e),currentTab:t,recordingKey:"browseResourcesModal"})}let ehV="browse_all_resources_modal_container--slidingPane--EMUEV sliding_pane--slidingPane--6OmDU",ehK="browse_all_resources_modal_container--slidingPaneLeft--GQIYb sliding_pane--slidingPaneLeft--Wrfdy sliding_pane--slidingPane--6OmDU",ehW={main:0,category:0,detail:0},ehz=e=>{let t=f.useRef(ehW[e]);return f.useEffect(()=>(setTimeout(()=>{ehW[e]=0},0),()=>{ehW[e]=t.current}),[e]),e=>t.current=e};function ehj(e){var t;let n=(0,egO.F)(),a=(0,n6.GS)(),l=(0,tu.sO)(),[r,i]=f.useState(0),[o,s]=f.useState(!1),c=(0,ta.Kx)(),d=!e.categoryViewContent&&!e.categoryViewHeader&&!e.resourceDetailViewContent&&!e.resourceDetailViewHeader,u=(0,v.ZC)(d);f.useEffect(()=>{void 0!==u&&(u&&!d||!u&&d)&&s(!0)},[u,d]);let m=null==(t=(0,ehR.Gq)())?void 0:t.getPrimaryLocale(!1),p=f.useRef((0,efH.DN)(m)),g=f.useRef(null),h=ehz("main"),E=ehz("category"),y=ehz("detail"),w=f.useCallback(e=>{e&&i(ax.zo-e.getBoundingClientRect().height-1)},[]),T=(0,_.d4)(e=>e.universalInsertModal),x=(0,_.wA)();(0,ax.J$)(T.pinned===r8.t.NOT_PINNED,g,e.entryPointId?`[data-element-target=${e.entryPointId}]`:void 0);let N=(0,nT.U)(),S=(0,ax.LR)(),k=()=>{var t;e.setSearchQuery(""),p.current=(0,efH.DN)(m),null==(t=I.current)||t.focus()},I=f.useRef(null),{currentTab:A}=(0,efH.cX)();if(f.useEffect(()=>{var e;(null==c?void 0:c.shouldOptimizeForIpadApp)||null==(e=I.current)||e.focus()},[A,null==c?void 0:c.shouldOptimizeForIpadApp]),!e.initialModalPosition)return null;let O=e.resourceDetailViewContent&&e.resourceDetailViewHeader,L=!l;return f.createElement(f.Fragment,null,T.pinned===r8.t.PINNED&&e.showLeftPinBound&&f.createElement("div",{className:ii.BF,style:{width:ax.gR}}),f.createElement(ae.vx,{ref:g,initialPosition:e.modalPosition||e.initialModalPosition,canResetPosition:e.shouldSnapToPosition,initialWidth:ax.gR,bounds:e.bounds,onEnterBound:()=>{a||e.setShowLeftPinBound(!0)},onLeaveBound:()=>{e.setShowLeftPinBound(!1)},onClose:S,onDragStart:()=>{aC.VU.get("set-tool-default","toolbar")(),x(r7.jy({pinned:r8.t.PINNED}))},onDragEnd:()=>{var t;null==(t=I.current)||t.focus(),e.showLeftPinBound&&e.setPinned()},containerClassName:T.pinned===r8.t.PINNED_AND_DOCKED_LEFT?"browse_all_resources_modal_container--modalContainerPinAnimation--b1eCL browse_all_resources_modal_container--modalContainer--uxh6u":"browse_all_resources_modal_container--modalContainer--uxh6u",contentContainerClassName:"browse_all_resources_modal_container--modalContentContainer---kbUK",isFigJam:!0,arrowPosition:e.shouldHideBottomArrow||T.pinned!==r8.t.NOT_PINNED?void 0:ae.F_.BOTTOM,arrowRelativeX:e.shouldHideBottomArrow||T.pinned!==r8.t.NOT_PINNED?void 0:ax.gR/2,disableDragging:l},f.createElement(Y.fu,{name:"universal-insert"},f.createElement("div",{role:"presentation",className:"browse_all_resources_modal_container--slidingPaneContainer--5a35a sliding_pane--slidingPaneContainer--RQkXf",onClick:e=>{e.stopPropagation(),N&&x(nI.oB())}},f.createElement("div",{className:d?ehV:ehK,onTransitionEnd:()=>{s(!1)}},f.createElement("div",{ref:w,key:`${e.hasSearchBar}`},e.hasSearchBar&&f.createElement("div",{className:l?a8.cx.flex.itemsCenter.p8.$:"browse_all_resources_modal_container--figjamTopBarContainer--KF-6s"},f.createElement("div",{className:"browse_all_resources_modal_container--searchBarContainer--JMkz8","data-not-draggable":!0},f.createElement(vj.IW,{focusOnMount:!(null==c?void 0:c.shouldOptimizeForIpadApp),selectTextOnMount:!(null==c?void 0:c.shouldOptimizeForIpadApp),className:"browse_all_resources_modal_container--searchBar--SMTxQ",query:e.searchQuery,placeholder:e.searchPlaceholder||p.current,clearSearch:k,onChange:e.setSearchQuery,isKeyDownHandled:t=>t.keyCode===b.Uz.ESCAPE&&(e.searchQuery?e.setSearchQuery(""):S(),!0),hideXIcon:!0,ref:I,hasTransparentBackground:!0,onFocus:()=>x(ehM.N.startSearch({entryPoint:"figjam:inserts"})),disabled:o,recordingKey:"browseAllResourcesModalSearchBar",iconClassName:a8.cx.colorIconSecondary.$}),e.searchQuery&&f.createElement(a7.D8,{role:"button","aria-label":(0,eN.t)("whiteboard.inserts.clear_search"),onClick:C.Ay.isIpad?void 0:k,onPointerDown:C.Ay.isIpad?k:void 0,className:"browse_all_resources_modal_container--searchClearButton--IyQB4 text--fontPos13--xW8hS text--_fontBase--QdLsd","data-not-draggable":!0,"data-does-not-dismiss-modal":!0},(0,eN.tx)("whiteboard.inserts.clear"))),n?f.createElement(egk.O,{setPinned:e.setPinned}):L?f.createElement(tN.Jn,{onClick:S,className:"browse_all_resources_modal_container--searchCloseButton--wpuxs"}):null),!e.shouldHideTabs&&f.createElement(ehG,null),!l&&f.createElement("div",{className:"browse_all_resources_modal_container--divider--U9jtu"})),f.createElement("div",{"data-not-draggable":!0},f.createElement(i6.P,{key:A,height:(0,efH.mS)(T.pinned,r,efH.kD),width:ax.gR,initialScrollTop:ehW.main,onScroll:h,scrollContainerRef:e.mainScrollContainerRef},f.createElement("div",{className:"browse_all_resources_modal_container--scrollContainerPadding--c9I-y"},e.children)))),e.categoryViewHeader&&e.categoryViewContent?f.createElement("div",{className:O?ehK:ehV},e.categoryViewHeader,f.createElement("div",{"data-not-draggable":!0},f.createElement(i6.P,{height:(0,efH.mS)(T.pinned,ax.zo-efH.HI,efH.HI),width:ax.gR,initialScrollTop:ehW.category,onScroll:E,scrollContainerRef:e.categoryScrollContainerRef},e.categoryViewContent))):void 0,e.resourceDetailViewHeader&&e.resourceDetailViewContent?f.createElement("div",{className:ehV},e.resourceDetailViewHeader,f.createElement("div",{"data-not-draggable":!0},f.createElement(i6.P,{height:(0,efH.mS)(T.pinned,ax.zo-efH.SK,efH.SK),width:ax.gR,initialScrollTop:ehW.detail,onScroll:y},e.resourceDetailViewContent))):void 0))))}function ehJ(e){let{selectedCategory:t,goBack:n}=e,a=(0,ax.LR)(),l=(0,egO.F)();return f.createElement("div",{className:"browse_explore_category_top_bar--topBar--VdcGk"},f.createElement("div",{className:"browse_explore_category_top_bar--left--XjCF8"},f.createElement(a2.B,{svg:yl.A,className:"browse_explore_category_top_bar--backButton--lqLK5",onClick:C.Ay.isIpad?void 0:n,onPointerDown:C.Ay.isIpad?n:void 0,"data-not-draggable":!0,"data-does-not-dismiss-modal":!0}),f.createElement("div",{className:"browse_explore_category_top_bar--categoryNameContainer--b--X4"},f.createElement("div",{className:"browse_explore_category_top_bar--categoryName--wVRFs text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},t.title))),f.createElement("div",{className:"browse_explore_category_top_bar--right--0SLBG"},e.extraContent,l?f.createElement(egk.O,{setPinned:e.setPinned}):f.createElement(tN.Jn,{onClick:a,className:"browse_explore_category_top_bar--searchCloseButton--XQ3fr browse_modal_container--searchCloseButton--WHSfL"})))}let ehY="browse_explore_category_view--loadingSpinner--soJ45",ehX="browse_explore_category_view--resourceContainer--pdbQU";function ehq(e){let t=e.selectedCategoryId,{shelves:n,isLoading:a}=(0,e_8.d)(e.shelfType),l=n?n.find(e=>e.id===t):void 0,r=(0,ta.Kx)();if(!n||0===n.length)return null;if(a)return f.createElement(re.kt,{className:ehY});let i=`/community/${e.resourceType===uL.bD.PLUGIN?"plugins/figjam":"widgets"}`,o=t=>f.createElement("button",{key:t.id,className:ehX},e.renderResource(t));return l?f.createElement(Y.fu,{name:"explore",properties:{resourceType:e.resourceType,selectedCategory:t}},f.createElement("div",{className:e.resourceType===uL.bD.WIDGET?"browse_explore_category_view--widgetTilesGridContainer--U4Dl6 browse_widgets_view--widgetTilesGridContainer--t5-lL":"browse_explore_category_view--pluginCategoryViewPadding--tst89"},l.shelf_content.map(e=>o(e))),(null==r?void 0:r.shouldOptimizeForIpadApp)||(0,y.kc)().cmty_m10n_test_apple_os?null:f.createElement("a",{className:"browse_explore_category_view--communityLink---iLAP",href:i,target:"_blank"},f.createElement(a2.B,{svg:egr.A,className:"browse_explore_category_view--communityLinkIcon--1X73u text--fontPos11--2LvXf text--_fontBase--QdLsd"}),(0,eN.tx)("whiteboard.inserts.browse_more_in_community"))):null}function ehZ(e){let t=(0,egL.U5)(e.debouncedSearchQuery),n=(0,egL.d0)();return 0===e.results.length&&0===t.length?f.createElement(Y.fu,{name:"more",properties:{query:e.debouncedSearchQuery}},f.createElement(efF,{illustration:ye.A,defaultDisplayStringResourceType:"items",query:e.query})):f.createElement(Y.fu,{name:"more",properties:{query:e.debouncedSearchQuery}},f.createElement("div",{className:"browse_more_search_view--searchTopPadding--iZQ6F"},n&&f.createElement(egQ,{faceStampSearchIsLoading:e.faceStampSearchIsLoading,query:e.query}),e.results.map((e,t)=>f.createElement(e,{key:t}))))}let ehQ="browse_plugins_search_view--sectionHeader--OKPiP text--fontPos13--xW8hS text--_fontBase--QdLsd";function eh$(e){let{query:t,debouncedSearchQuery:n,hasResolved:a,savedSearchResultIds:l,communitySearchResultIds:r,orgSearchResultIds:i,developmentSearchResultIds:o,lastPluginSearchQuery:s}=e,c=(0,_.d4)(e=>e.currentUserOrgId&&e.orgById[e.currentUserOrgId]),d=l&&l.length>0,u=r&&r.length>0,m=o&&o.length>0,p=c&&i&&i.length>0;return s!==n?f.createElement(e_n,null):!a||d||u||p||m?f.createElement(Y.fu,{name:"plugins",properties:{resourceType:"plugin",query:n}},d&&f.createElement(f.Fragment,null,f.createElement("div",{className:ehQ},(0,eN.tx)("whiteboard.inserts.plugin_recents")),l.map(e=>f.createElement(e_Z,{pluginId:e,view:gD.p.SAVED,key:`saved_plugin_${e}`}))),m&&f.createElement(f.Fragment,null,f.createElement("div",{className:ehQ},(0,eN.tx)("whiteboard.inserts.development")),o.map(e=>f.createElement(e_q,{localFileId:e,view:gD.p.DEVELOPMENT,key:"development_plugin_"+e}))),p&&f.createElement(f.Fragment,null,f.createElement("div",{className:ehQ},(0,eN.tx)("whiteboard.inserts.plugin_from_org",{orgName:c.name})),i.map(e=>f.createElement(e_Z,{pluginId:e,view:gD.p.EXPLORE,key:`org_plugin_${e}`}))),u&&f.createElement(f.Fragment,null,f.createElement("div",{className:ehQ},(0,eN.tx)("whiteboard.inserts.plugin_from_community")),r.map(e=>f.createElement(e_Z,{pluginId:e,view:gD.p.EXPLORE,key:`community_plugin_${e}`})))):f.createElement(Y.fu,{name:"plugins",properties:{resourceType:"plugin",query:n}},f.createElement(efF,{illustration:ye.A,defaultDisplayStringResourceType:"plugins",query:t,cta:f.createElement(efB,{url:"/community/plugins"}),orgNameIfAllowlistEnforced:c&&c.plugins_whitelist_enforced?c.name:void 0}))}var eh0=n(205698),eh1=n(950289);function eh2(e){let t=e.extensionType===TS.Ag.Plugin?eh1.E2:eh1.Hr,n=(0,cC.sZ)(),a=!!n&&t.hasAllowlist(n);return n&&a?f.createElement(eh4,{org:n,dedupeOrgSaves:e.dedupeOrgSaves,extensionType:e.extensionType}):null}function eh5(e){let{extensionIds:t,extensionType:n}=e;return n===TS.Ag.Plugin?f.createElement(f.Fragment,null,t.map(e=>f.createElement(e_Z,{pluginId:e,view:gD.p.EXPLORE,key:e}))):f.createElement("div",{className:ehC},t.map(e=>f.createElement(egN,{widgetId:e,key:e})))}function eh4(e){let{org:t}=e,n=(e.extensionType===TS.Ag.Plugin?e_.ll:e_.U6)(),a=f.useMemo(()=>Object.keys(n),[n]),l=(0,af.tS)(),r=(e.extensionType===TS.Ag.Plugin?TS.Gb:TS.n_)(t.id,l),i=(0,mV.mC)(r),o=(0,e_.Be)(),s=e.extensionType===TS.Ag.Plugin?o.orgPlugins:o.orgWidgets,c=f.useMemo(()=>e.dedupeOrgSaves?a.filter(e=>!s[e]):a,[a,e.dedupeOrgSaves,s]);return i?0===c.length?null:f.createElement(f.Fragment,null,f.createElement("div",{className:ehy},(0,eN.tx)("universal_insert.approved_from_figma_community")),f.createElement(eh5,{extensionType:e.extensionType,extensionIds:c})):f.createElement(re.kt,{className:ehb})}var eh3=(e=>(e.RECENT_AND_SAVED="recent_and_saved",e.DEVELOPMENT="development",e.ORG="org",e))(eh3||{});let eh6="browse_main_view_selector--mainViewHeader--1tbfQ",eh7="browse_main_view_selector--mainViewSelectorTitle--WL5Qi text--fontPos13--xW8hS text--_fontBase--QdLsd";function eh8(e){let t=(0,_.wA)(),n=(0,nT.U)(),a=(0,cC.sZ)(),l=f.useCallback(e=>(function(e,t){switch(e){case eh3.RECENT_AND_SAVED:return(0,eN.t)("universal_insert.recents_and_saved");case eh3.DEVELOPMENT:return(0,eN.t)("universal_insert.development");case eh3.ORG:return t?(0,eN.t)("whiteboard.inserts.plugin_from_org",{orgName:t.name}):(0,eN.t)("universal_insert.from_your_org")}})(e,a),[a]),r=[eh3.RECENT_AND_SAVED],i=(0,_.d4)(e=>e.universalInsertModal.scrollDevelopmentSectionIntoView),o=f.useRef(null);if(o.current&&i){t(r7.SI({}));let e=o.current;setTimeout(()=>e.scrollIntoView({behavior:"smooth"}),0)}return(em.eD&&r.push(eh3.DEVELOPMENT),1!==r.length||a)?f.createElement("div",{className:eh6,ref:o},f.createElement(ow.l6,{id:"figjam-browse-modal-main-view-select",property:e.currentView,formatter:{format:l},onChange:e.setCurrentView,dispatch:t,inputClassName:eh7,className:"browse_main_view_selector--mainViewSelector--l7iuo",dropdownShown:n,dropdownWidth:173,role:"button"},r.map(e=>f.createElement(ow.c$,{value:e,key:e},l(e))),a&&f.createElement(ow.sK,null),a&&f.createElement(ow.c$,{value:eh3.ORG},l(eh3.ORG)))):f.createElement("div",{className:nb()(eh6,a8.cx.ml8.mt2.mb2.$)},f.createElement("div",{className:eh7},l(r[0])))}let eh9=(0,e4.eU)(eh3.RECENT_AND_SAVED),eEe=(0,e4.eU)(eh3.RECENT_AND_SAVED);var eEt=n(361555);function eEn(){let e=(0,e_.nl)(),t=(0,e_.Im)(),n=(0,e_.kd)().filter(e=>!t[e.id]);if(0===Object.keys(e).length&&0===n.length)return f.createElement(eEt.W,{isWidget:!1});let a=Object.keys(e).reverse();return f.createElement(f.Fragment,null,a.map(e=>f.createElement(e_q,{localFileId:Number(e),view:gD.p.DEVELOPMENT,key:"development_plugin_"+e})),n.map(e=>f.createElement(e_q,{publishedPlugin:e,view:gD.p.DEVELOPMENT,key:"development_plugin_"+e.id})))}function eEa(){let e=(0,e_.f6)();return 0===e.length?null:f.createElement(Y.fu,{name:"invited"},e.map(e=>f.createElement(e_Z,{pluginId:e.id,key:e.id,view:gD.p.PLUGINS,pluginVersion:(0,x1.uF)(e)})),f.createElement(fy.Y,{padding:{horizontal:24}},f.createElement("div",{className:a8.cx.wFull.h1.$,style:dA.sx.add({backgroundColor:"var(--color-border, $figmaFGBlack1)"}).$})))}var eEl=n(984472),eEr=n(975580);function eEi(){return f.createElement("div",{className:a8.cx.flex.flexColumn.itemsCenter.alignCenter.pl16.pr16.$},f.createElement("div",null,f.createElement(a2.B,{svg:eEr.A,useOriginalSrcFills_DEPRECATED:!0,svgWidth:"90px",autosize:!0})),f.createElement("div",{className:a8.cx.mb24.mt16.pl36.pr36.$},(0,eN.tx)("whiteboard.inserts.plugin_community_disabled",{private_plugins:f.createElement(a1.CY,{href:"https://www.figma.com/plugin-docs",target:"_blank",className:"browse_resources_modal--emptyStateLink--N1T6a",trusted:!0},(0,eN.tx)("whiteboard.inserts.plugin_community_disabled_private_plugins"))})))}let eEo="browse_plugins_recents_list--loadingSpinner--ydkCW";function eEs(){let e=(0,_.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:void 0);return e?f.createElement(eEc,{org:e}):f.createElement(re.kt,{className:eEo})}function eEc({org:e}){let t=(0,_.d4)(t=>{var n;let{orgUsersByOrgId:a}=t;return(null==(n=a.orgUsers[e.id][t.user.id])?void 0:n.permission)===a_._D.GUEST}),n=!!(e&&e.plugins_whitelist_enforced),a=(0,e_.ll)(),l=(0,N.R)(n=>e&&!t?(0,x1.Qt)((0,x1.i8)((0,efH.H6)(Object.values(n.publishedPlugins))),e.id):{}),r=Object.keys(l),i=(0,af.tS)(),o=(0,TS.Gb)((null==e?void 0:e.id)??"",i),s=(0,mV.mC)(o),c=r3.LP.loadingKeyForPayload((null==e?void 0:e.id)??""),d=(0,mV.mC)(c),u=(0,e_.Be)().orgPlugins,m=f.useMemo(()=>{let e=Object.values(u).filter(e=>!l[e.plugin_id]);return n&&(e=e.filter(e=>a[e.plugin_id])),e.sort(e_.YW)},[a,n,l,u]),p=(0,eEl.Ol)(m),g=!e.public_plugins_allowed||e.plugins_whitelist_enforced&&s&&0===Object.keys(a).length,h=t||d&&0===Object.keys(l).length,E=(0,_.wA)();return(f.useEffect(()=>{e&&!t&&E(r6.Xt())},[E,e,t]),(!n||s)&&d)?g&&h?f.createElement(eEi,null):f.createElement(Y.fu,{name:"explore"},r.length>0&&f.createElement(f.Fragment,null,r.map(e=>f.createElement(e_Z,{pluginId:e,view:gD.p.EXPLORE,key:e,showLockIcon:!0}))),p.length>0&&f.createElement(f.Fragment,null,f.createElement("div",{className:"browse_plugins_recents_list--sectionHeader--az12L text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,eN.tx)("universal_insert.saved_from_community")),p.map(e=>{let t=e.plugin_id;return f.createElement(e_Z,{pluginId:t,view:gD.p.EXPLORE,key:t})})),f.createElement(eh2,{extensionType:TS.Ag.Plugin,dedupeOrgSaves:!0})):f.createElement(re.kt,{className:eEo})}var eEd=n(334437);function eEu(){return f.createElement("div",{className:a8.cx.pl24.pr24.pt8.pb8.$},f.createElement("div",{className:a8.cx.wFull.h1.$,style:dA.sx.add({backgroundColor:"var(--color-border)"}).$}))}let eEm="browse_recent_and_saved_view--subTitle--04tFz text--fontPos12--YsUAh text--_fontBase--QdLsd",eEp="browse_recent_and_saved_view--showAllSavedExtensionsButton--l1qOq text--fontPos12--YsUAh text--_fontBase--QdLsd";function eEf(){let{filterByAllowlist:e,filterByPublicResourcesAllowed:t}=(0,e_.jA)(!1),n=(0,efH.Hb)(),a=(0,e_.Tg)().filter(n);a=t(a=e(a));let l=(0,e_.Be)(),r=l.plugins,i=f.useMemo(()=>Object.values(r).sort(e_.YW).filter(e=>"user"===e.installed_by),[r]),o=(0,q_.xx)(()=>i),s=(0,eEl.Ol)(o()),[c,d]=f.useState(!1),u=f.useMemo(()=>c?s:s.slice(0,40),[s,c]),m=(0,tC.$D)();if(!l.loaded&&!m)return f.createElement(re.kt,{className:"browse_recent_and_saved_view--loadingSpinner--kb6-g"});if(0===a.length&&0===s.length)return f.createElement(eEd.H,{isWidget:!1});let p=a.slice(0,6),_=p.length>0,g=s.length>0;return f.createElement(f.Fragment,null,_&&f.createElement(f.Fragment,null,f.createElement("div",{className:eEm},(0,eN.tx)("universal_insert.recents")),f.createElement(ehh,{items:p,view:gD.p.RECENTS})),_&&g&&f.createElement(eEu,null),g&&f.createElement(f.Fragment,null,f.createElement("div",{className:eEm},(0,eN.tx)("universal_insert.saved")),f.createElement(ehh,{items:u,view:gD.p.SAVED}),s.length>40&&!c&&f.createElement("button",{className:eEp,onClick:()=>d(!0)},(0,eN.tx)("universal_insert.show_all_saved_plugins"))))}function eE_(){return f.createElement(egi,{resourceType:uL.bD.PLUGIN,shelfType:uL.cS.BROWSE_PLUGINS_MODAL,renderResource:e=>f.createElement(e_Z,{pluginId:e.id,view:gD.p.EXPLORE,key:e.id})})}function eEg(){let[e,t]=(0,S.fp)(eEe);return f.createElement(eh8,{setCurrentView:t,currentView:e})}function eEh(){let e=(0,S.md)(eEe),t=(0,cC.sZ)(),n=!!(t&&t.plugins_whitelist_enforced);return f.createElement("div",null,f.createElement(eEa,null),f.createElement("div",{className:a8.cx.flex.justifyBetween.wFull.minW0.$},f.createElement(eEg,null),e===eh3.DEVELOPMENT&&f.createElement("div",{className:a8.cx.flex.itemsCenter.pr16.$},f.createElement(eh0.n,{resourceType:uL.bD.PLUGIN}))),e===eh3.RECENT_AND_SAVED&&f.createElement(f.Fragment,null,f.createElement(eEf,null),n?f.createElement(eh2,{extensionType:TS.Ag.Plugin}):f.createElement(eE_,null)),e===eh3.DEVELOPMENT&&f.createElement(eEn,null),e===eh3.ORG&&f.createElement(f.Fragment,null,f.createElement(eEs,null),!n&&f.createElement(eE_,null)))}function eEE(){f.useEffect(()=>{function e(e){e.key===eX.S7&&ET.D.dispatch(z.HQ({storeInRecentsKey:EI.$A.FigJam}))}return ET.D.dispatch(z.HQ({storeInRecentsKey:EI.$A.FigJam})),window.addEventListener("storage",e,!1),()=>{window.removeEventListener("storage",e,!1)}},[]);let e=(0,_.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:void 0),t=e?e.id:"",n=(0,mV.oh)(EN.sz.loadingKeyForPayload({shelfType:uL.cS.BROWSE_PLUGINS_MODAL})),a=(0,af.tS)(),l=(0,mV.oh)((0,TS.Gb)(t,a)),r=(0,mV.oh)(r3.LP.loadingKeyForPayload(t));return n||l||r?f.createElement(e_n,null):f.createElement(Y.fu,{name:"plugins"},f.createElement(eEh,null))}var eEv=n(750425),eEy=n(620604),eEb=n(888063),eEC=n(96557),eEw=n(193948),eET=n(984226),eEx=n(687348);function eEN(e){let t=(0,_.d4)(e=>e.universalInsertModal),n=(0,_.wA)(),a=(0,e_.$1)(),l=(0,_.d4)(t=>(0,x1.my)(e.pluginId,t.publishedPlugins)),r=(0,e_v.gn)(l),i=Object.values(a).find(e=>e.plugin_id===l.id),o=!!i,s=!!l.id,c=(0,e_.Be)().plugins[e.pluginId]||(0,x1.uF)(l),{isSavedForOrg:d,isSavedForUser:u,onSaveClick:m}=(0,e_G.B)(c),p=d||u,g=(0,efH.cX)().currentTab,h=(0,efP.Vq)(g),E=(0,efG.b)(),v=(0,ta.Kx)(),{orgEntity:b,org:C,appModel:w,selectedView:T,openFile:x,isReadOnly:S,userCanRunPlugins:k,pluginSubmenuDropdownTargetRect:I,activeTextReviewPlugin:A}=(0,N.R)(e=>{var t,n;return{orgEntity:(0,eh.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,appModel:e.mirror.appModel,selectedView:e.selectedView,openFile:e.openFile,isReadOnly:e.mirror.appModel.isReadOnly,userCanRunPlugins:(0,TT.GP)(e),pluginSubmenuDropdownTargetRect:null==(n=null==(t=e.dropdownShown)?void 0:t.data)?void 0:n.targetRect,activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin}});f.useEffect(()=>{s||n(r3.af({id:e.pluginId,resourceType:uL.bD.PLUGIN}))},[n,e.pluginId,s]);let O={};O[c.plugin_id]=c;let L={openFile:x,allSavedPlugins:O,localExtensions:a,orgEntity:b,org:C,isReadOnly:S,userCanRunPlugins:k,editorType:"whiteboard",activeTextReviewPlugin:A,isDevHandoff:!1,publishedPlugins:{},publishedWidgets:{}},P={openFile:x,allSavedPlugins:{},localExtensions:a,orgEntity:b,org:C,isReadOnly:S,userCanRunPlugins:k,editorType:"whiteboard",activeTextReviewPlugin:A,publishedPlugins:{},publishedWidgets:{}},D=(0,nT.U)(),R=(null==D?void 0:D.type)===eES&&D.data.pluginId===e.pluginId,M=(null==i?void 0:i.manifest.menu)&&i.manifest.menu.length>0?(0,eEy.z)(i.manifest.menu,{localFileId:null==i?void 0:i.localFileId}):[],F=c.manifest.menu&&c.manifest.menu.length>0?(0,eEy.z)(c.manifest.menu,{pluginId:c.plugin_id}):[],B=F.length>0||M.length>0,U=o||B,H=()=>{let t=()=>{let t={type:"run-installed-plugin",pluginId:e.pluginId,command:void 0,parameterOnly:c.manifest.parameters&&!1!==c.manifest.parameterOnly,parameterEntry:(0,eEv.c)(c.manifest.parameters,c.name)};(0,ei_.Im)(L,h,t)};p?t():m(t,!0),E()},G=()=>{if(!i)return;let e=()=>{let e={type:"run-local-plugin",localFileId:i.localFileId,command:void 0,parameterOnly:i.manifest.parameters&&!1!==i.manifest.parameterOnly,parameterEntry:(0,eEv.c)(i.manifest.parameters,i.name)};(0,ei_.Im)(P,h,e)};p?e():m(e,!0),E()};if(!s)return f.createElement(re.kt,{className:eEx.S});let V=(null==v?void 0:v.shouldOptimizeForIpadApp)||(0,y.kc)().cmty_m10n_test_apple_os;return f.createElement(Y.fu,{name:"detail",properties:{resourceId:l.id,isMonetized:(0,uL.m3)(l),resourceType:uL.bD.PLUGIN,editorType:"whiteboard"}},f.createElement(i6.P,{height:(0,efH.mS)(t.pinned,500,efH.s3)},f.createElement("div",{className:eEx.tJ},r&&f.createElement(e_T.cu,null),f.createElement("img",{className:nb()(eEx.VM,eEx.Mp),src:l.redirect_thumbnail_url||"",alt:`${c.name}`,width:ax.gR,height:ax.gR/2}),f.createElement("div",{className:eEx.oQ},f.createElement(eET.f,{resource:l})),f.createElement("div",{className:eEx.h_},f.createElement(xY.R,{fallback:null,errorFallback:null,value:c.description})))),!V&&f.createElement(a1.N_,{className:eEx.P0,href:`/community/plugin/${e.pluginId}`,target:"_blank",trusted:!0},f.createElement(a2.B,{svg:egr.A,className:eEx.JX}),(0,eN.tx)("whiteboard.inserts.see_more_details_in_community")),R&&I&&f.createElement(iV.j,{lean:"left",minWidth:130,rootAndSubmenuMaxWidth:190,leanPadding:0,showPoint:!1,items:(()=>{if(!U)return[];if(!B&&i)return[{displayText:"In-development version",callback:()=>G()},{displayText:"Published version",callback:()=>H()}];let e=e=>()=>(0,ei_.Im)(L,h,e),t=[];F.forEach(n=>{t.push((0,eEb.q)(n,e))});let a=(0,eEw.jv)(t,{appModel:w,selectedView:T});if(!o)return a;let l=e=>()=>(0,ei_.Im)(P,h,e),r=[];M.forEach(e=>{r.push((0,eEb.q)(e,l))});let s=(0,eEw.jv)(r,{appModel:w,selectedView:T}),c=[];return i.error?c.push({displayText:"\u26A0 In-development version",callback:()=>{n((0,ty.to)({type:eEC.r,data:{dispatch:n,error:i.error,resourceType:uL.bD.PLUGIN},showModalsBeneath:!0}))}}):s.length>0?c.push({displayText:"In-development version",children:s}):c.push({displayText:"In-development version",callback:()=>{G()}}),a.length>0?c.push({displayText:"Published version",children:a}):c.push({displayText:"Published version",callback:()=>{H()}}),c})(),onSelectItem:e=>{e.callback&&e.callback("",null,n)},parentRect:I,dispatch:n}))}let eES="DROPDOWN_TYPE_PLUGIN_DETAIL_SUBMENU";function eEk(e){let t=e.selectedCategoryId,{shelves:n,isLoading:a}=(0,e_8.d)(e.shelfType),l=n?n.find(e=>e.id===t):void 0;if(!n||0===n.length)return null;if(a)return f.createElement(re.kt,{className:ehY});let r=t=>f.createElement("div",{key:t.id,className:ehX,role:"button",tabIndex:0},e.renderResource(t));return l?f.createElement(Y.fu,{name:"explore",properties:{selectedCategory:t}},f.createElement("div",{className:"browse_explore_category_view--resourcesGrid--Gvw3Y"},l.shelf_content.map(e=>r(e)))):null}var eEI=n(97128),eEA=n(637590),eEO=n(561746);function eEL(e){let t=(0,_.wA)(),n=(0,_.d4)(e=>e.universalInsertModal),a=(0,_.d4)(e=>e.hubFiles)[e.id],l=(0,uA.a6)(a),r=(0,ta.Kx)(),i=(null==r?void 0:r.shouldOptimizeForIpadApp)||(0,y.kc)().cmty_m10n_test_apple_os;return f.createElement(Y.fu,{name:"detail",properties:{resourceId:a.id,resourceType:uL.bD.HUB_FILE}},f.createElement(i6.P,{height:(0,efH.mS)(n.pinned,504,efH.s3)},f.createElement("div",{className:"browse_templates_preview--embedContainer--8lgx5 hub_file_detail_view--embedContainer--QMuUr detail_view--embedContainer---TcbF"},f.createElement(eEO.Z,{key:a.id,hubFile:a,profileIdToAdminResourceAs:null,fullscreenState:eEA.G4.DEFAULT,dispatch:t,containerClassName:"browse_templates_preview--embedContainerInner--0EnCv hub_file_detail_view--iframeContainer---uQYN",disableClickToExpand:!0,disableComments:!0,disableFullscreen:!0,fixedSize:!0})),f.createElement("div",{className:"browse_templates_preview--description--RScN2 text--fontPos13--xW8hS text--_fontBase--QdLsd"},f.createElement("div",{className:"browse_templates_preview--textDescription--4t3-n"},(0,elI.$J)(l.description).trim().length>0&&f.createElement(xY.R,{fallback:null,errorFallback:null,value:l.description})))),!i&&f.createElement(ss.N,{className:"browse_templates_preview--communityLinkBase--1NI6W",href:(0,L_.UI)({path:eEI.Uo.FILE,id:a.id}),target:"_blank",trusted:!0},f.createElement(a2.B,{svg:egr.A,className:"browse_templates_preview--communityLinkIcon--DC-Q4 text--fontPos11--2LvXf text--_fontBase--QdLsd"}),(0,eN.tx)("whiteboard.inserts.see_more_details_in_community")))}var eEP=n(61057);function eED(e){var t,n,a;let{resourceId:l,goBack:r,buttonCta:i}=e,o=(0,_.d4)(e=>e.hubFiles)[l],s=(0,uA.a6)(o),{insertTemplate:c,isInsertingTemplate:d}=(0,uI.Fz)(),u=(0,efG.b)(),{currentTab:m,searchQuery:p}=(0,efH.cX)(),g=(0,efP.Vq)(m),h=(0,ax.LR)(),E="whiteboard"===(0,Q.lg)(),v=(0,e_x.F5)(),y=(0,egO.F)(),b=(null==(t=o.community_publishers)?void 0:t.accepted)||[];return f.createElement("div",{className:"browse_templates_preview_top_bar--topBar--6SkwK"},f.createElement("div",{className:"browse_templates_preview_top_bar--left--vErPQ"},f.createElement(a2.B,{svg:yl.A,className:"browse_templates_preview_top_bar--backButton--d3Iws",onClick:C.Ay.isIpad?void 0:r,onPointerDown:C.Ay.isIpad?r:void 0,"data-not-draggable":!0,"data-does-not-dismiss-modal":!0}),f.createElement("div",{className:"browse_templates_preview_top_bar--pluginMetadataContainer--WC29F"},f.createElement("div",{className:"browse_templates_preview_top_bar--pluginTileName--iiS-m text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},s.name),((null==(n=o.community_publishers)?void 0:n.accepted.length)||0)>0&&f.createElement("div",{className:"browse_templates_preview_top_bar--pluginTilePublishers--UFpkz text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},(0,eN.tx)("whiteboard.inserts.by_publisher",{numPublishers:b.length,firstPublisherName:null==(a=b[0])?void 0:a.name,multiplePublisherSuffix:f.createElement("span",{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eEP.eg)(b.slice(1),b.length,e=>e.name)},(0,eN.tx)("whiteboard.inserts.and_others"))})))),f.createElement("div",{className:"browse_templates_preview_top_bar--right--jxcsE"},f.createElement(vh.i,{insertTemplate:()=>{c({template:{template:o,type:uO.n.HubFile},templateInsertionDirection:ei.hKj.RIGHT,triggeredFrom:g,onSuccess:()=>{E&&(0,e_x.oM)({id:o.id,type:gD.p.TEMPLATES,source:g,options:{...v,query:p}}),u()}})},isInsertingTemplate:d(l)},i),y?f.createElement(egk.O,{setPinned:e.setPinned}):f.createElement(tN.Jn,{onClick:h,className:"browse_templates_preview_top_bar--searchCloseButton--itAHE browse_modal_container--searchCloseButton--WHSfL"})))}function eER(e){let t=(0,_.d4)(e=>e.hubFiles),n=e.templates[egc].map(e=>t[e]),a=(0,du.hC)(),[l,r]=f.useState(!a);f.useEffect(()=>{a&&r(!1)},[e.debouncedSearchQuery,a]);let i=[...e.teamTemplatesFromSearch.map(e=>({type:uO.n.TeamTemplate,template:e})),...l?n.map(e=>({type:uO.n.HubFile,template:e})):[]];return 0!==n.length||0!==e.totalNumTeamTemplatesFromSearch||e.teamTemplatesFromSearchIsLoading?f.createElement(Y.fu,{name:"templates",properties:{query:e.debouncedSearchQuery}},f.createElement("div",{className:"browse_templates_tab--templatesSearchTopPadding--h4HNe"},f.createElement(e_7,{templates:i,templateInsertionLocation:uA.RD.CURRENT_FILE}),!e.teamTemplatesFromSearchIsLoading&&f.createElement("div",{className:a8.cx.relative.$},f.createElement(v9.a,{className:a8.cx.absolute.h300.$,style:{top:"-150px"},"data-testid":"load-more-search",onIntersectionChange:({isIntersecting:t})=>{t&&!e.requestLoadMoreTeamTemplatesFromSearch()&&r(!0)}})))):f.createElement(Y.fu,{name:"templates",properties:{query:e.debouncedSearchQuery}},f.createElement(efF,{illustration:ye.A,defaultDisplayStringResourceType:"templates",query:e.query,cta:f.createElement(efB,{url:"/community/figjam",resourceType:uL.bD.HUB_FILE})}))}var eEM=n(178323);let eEF=new euw.Ef([],{keys:["name"]}),eEB=new euw.Ef([],eh.Ih),eEU=new euw.Ef([],eh.Ih),eEH=new euw.Ef([],{threshold:.1,matchAllTokens:!0,tokenize:!1,distance:300,keys:[{name:"name",weight:1},{name:"tags",weight:.5}]}),eEG=["upload","media","file","gif","jpeg","jpg","png","mov","mp4","movie","video","webm"],eEV=e=>[{name:"Code block",tags:["snippet","syntax","highlight","program","`"],component:ehm.j6},{name:"Timer",tags:["countdown","stopwatch","pomodoro","start","hourglass","clock"],component:ehm.m_},{name:"Images",tags:eEG,component:ehm.G0},{name:"Links",tags:["media","across","web","url","site","embed"],component:ehm.fQ},...e?[{name:"Faces",tags:["face","stamps","team"],component:egF}]:[],{name:"Table",tags:["table","chart","spreadsheet","list","figure","diagram","grid","worksheet","database"],component:ehm.vh},...(0,y.kc)().figjam_mindmaps_entry_enable?[{name:"Mind map",tags:["mindmap","mind","map","diagram","brainstorm"],component:ehm.l7}]:[]],eEK="";function eEW(){var e;let[t,n]=f.useState(eEK),[a]=(0,o1.A)(t,200),l=(0,_.d4)(e=>e.universalInsertModal),[r,i]=f.useState(l.previewResource),o=(0,e_x.F5)(),d=(0,_.wA)(),{shelves:u,hubFiles:m,fileKey:p,initialTab:g}=(0,N.R)(e=>({shelves:e.communityHub.shelves[uL.cS.FIGJAM_TEMPLATES_PICKER],hubFiles:e.hubFiles,fileKey:e.openFile?e.openFile.key:null,initialTab:e.universalInsertModal.initialTab})),[h,E]=f.useState(g||s||(p?gD.p.ALL:gD.p.WIDGETS));f.useEffect(()=>{(null==c?void 0:c.type)===efP.Rt.ORG_FACE_STAMPS&&i({id:"FACE_STAMPS",type:efP.Rt.ORG_FACE_STAMPS})},[]),f.useEffect(()=>{eEK=t,s=h,c=r},[h,r,t]);let v=f.useMemo(()=>(u||[]).reduce((e,t)=>({...e,[t.title]:t.shelf_content.map(e=>e.id)}),{}),[u]),b=null==(e=(0,y.Ay)().user_data)?void 0:e.id,C=(0,e_.yQ)(),w=(0,e_.nl)(),{pluginServerSideSearch:T,pluginSearchIsLoading:x,pluginSearchHasResolved:S,setLastPluginSearchQuery:k,lastPluginSearchQuery:I}=(0,e_.I5)(eun.k.Editors.FIGJAM),{widgetServerSideSearch:A,widgetSearchIsLoading:O,widgetSearchHasResolved:L,setLastWidgetSearchQuery:P,lastWidgetSearchQuery:D}=(0,e_.SG)(eun.k.Editors.FIGJAM),R=(0,egL.d0)(),M=(0,du.hC)(),{templates:F,total:B,requestLoadMore:U,isLoading:H}=(0,uI.qY)(a,M,a_._Y.WHITEBOARD),{faceStampServerSideSearch:G,faceStampSearchIsLoading:V,faceStampSearchHasResolved:K,lastFaceStampSearchQuery:W,setLastFaceStampSearchQuery:z}=(0,egS.A)({maxResults:20}),[j,J]=f.useState({[egc]:[]}),[Y,X]=f.useState([]),[q,Q]=f.useState([]),[$,ee]=f.useState([]),[et,en]=f.useState([]),[ea,el]=f.useState([]),[er,ei]=f.useState([]),[eo,es]=f.useState([]),[ec,ed]=f.useState([]),[eu,em]=f.useState([]);return f.useEffect(()=>{let e=Object.keys(v).reduce((e,t)=>[...e,...v[t]],[]).map(e=>(0,uA.a6)(m[e]));eEF.set(e)},[v,m]),f.useEffect(()=>{eEB.set(Object.values(w))},[w,d]),f.useEffect(()=>{eEU.set(Object.values(C))},[C,d]),f.useEffect(()=>{eEH.set(eEV(R))},[R]),f.useEffect(()=>{(h===gD.p.TEMPLATES||h===gD.p.ALL)&&(""===a.trim()?J({[egc]:[]}):J({[egc]:[...new Set(eEF.search(a).map(e=>e.hub_file_id))]})),(h===gD.p.ALL||h===gD.p.MORE)&&(""===a.trim()?z(null):G(a)),(h===gD.p.PLUGINS||h===gD.p.ALL)&&(""===a.trim()?(Q([]),el([]),ee([]),en([]),k(null)):(el(eEB.search(a).map(e=>e.localFileId)),T(a,ee,en,Q))),(h===gD.p.WIDGETS||h===gD.p.ALL)&&(""===a.trim()?(ei([]),em([]),es([]),ed([]),P(null)):(em(eEU.search(a).map(e=>e.localFileId)),A(a,es,ed,ei))),(h===gD.p.STICKERS_AND_COMPONENTS||h===gD.p.ALL)&&d(OA.ku({query:a,entryPoint:"figjam"})),(h===gD.p.MORE||h===gD.p.ALL)&&X(eEH.search(a).map(e=>e.component)),(0,Z.sx)("search_query_result",{query:a,selectedTab:h,entry_point:"figjam",scope:"figjam inserts modal",context:"search",...o})},[a,b,p,h]),{searchQuery:t,setSearchQuery:n,currentTab:h,setCurrentTab:E,searchTemplatesResult:j,moreResult:Y,pluginSavedSearchResultIds:q,pluginCommunitySearchResultIds:$,pluginOrgSearchResultIds:et,pluginDevelopmentSearchResultIds:ea,pluginSearchIsLoading:x||t!==a,pluginSearchHasResolved:S,widgetSavedSearchResultIds:er,widgetCommunitySearchResultIds:eo,widgetOrgSearchResultIds:ec,widgetDevelopmentSearchResultIds:eu,widgetSearchIsLoading:O||t!==a,widgetSearchHasResolved:L,faceStampSearchIsLoading:V||t!==a,faceStampSearchHasResolved:K,debouncedSearchQuery:a,lastPluginSearchQuery:I,lastWidgetSearchQuery:D,lastFaceStampSearchQuery:W,teamTemplatesFromSearch:F,totalNumTeamTemplatesFromSearch:B,teamTemplatesFromSearchIsLoading:H,requestLoadMoreTeamTemplatesFromSearch:U,previewResource:r,setPreviewResourceAndTrack:e=>{if(i(e),e&&e.type===efP.Rt.TEMPLATES&&m[e.id]){let t=(0,uA.a6)(m[e.id]);(0,eEM._)("resource_previewed",{fileKey:p,resourceType:"template",resourceName:t.name,resourceId:e.id,templateType:uO.n.HubFile,triggeredFrom:(0,efP.Vq)(h)})}}}}let eEz="browse_widgets_search_view--sectionHeader--IDC0e text--fontPos13--xW8hS text--_fontBase--QdLsd",eEj="browse_widgets_search_view--widgetTilesGridContainer--b0tIx browse_widgets_view--widgetTilesGridContainer--t5-lL";var eEJ=n(83958);function eEY(e){let{query:t,debouncedSearchQuery:n,hasResolved:a,savedSearchResultIds:l,communitySearchResultIds:r,orgSearchResultIds:i,developmentSearchResultIds:o,lastWidgetSearchQuery:s}=e,c=(0,_.d4)(e=>e.currentUserOrgId&&e.orgById[e.currentUserOrgId]),d=(0,e_.NU)(),u=l&&l.length>0,m=r&&r.length>0,p=c&&i&&i.length>0,g=o&&o.length>0;return s!==n?f.createElement(e_t,null):!a||u||m||p||g?f.createElement(Y.fu,{name:"widgets",properties:{resourceType:"widget",query:n}},u&&f.createElement(f.Fragment,null,f.createElement("div",{className:eEz},(0,eN.tx)("whiteboard.inserts.saved")),f.createElement("div",{className:eEj},l.map(e=>f.createElement(egN,{widgetId:e,widgetVersion:d[e],key:`saved_plugin_${e}`})))),g&&f.createElement(f.Fragment,null,f.createElement("div",{className:eEz},(0,eN.tx)("whiteboard.inserts.development")),f.createElement("div",{className:eEj},o.map(e=>f.createElement(egx,{tab:gD.p.DEVELOPMENT,localFileId:e,key:e})))),p&&f.createElement(f.Fragment,null,f.createElement("div",{className:eEz},(0,eN.tx)("whiteboard.inserts.widgets_from_org",{orgName:c.name})),f.createElement("div",{className:eEj},i.map(e=>f.createElement(egN,{widgetId:e,key:e})))),m&&f.createElement(f.Fragment,null,f.createElement("div",{className:eEz},(0,eN.tx)("whiteboard.inserts.from_community")),f.createElement("div",{className:eEj},r.map(e=>f.createElement(egN,{widgetId:e,key:e}))))):f.createElement(Y.fu,{name:"widgets",properties:{resourceType:"widget",query:n}},f.createElement(efF,{illustration:eEJ.A,defaultDisplayStringResourceType:"widgets",query:t,cta:f.createElement(efB,{url:"/community/widgets"}),orgNameIfAllowlistEnforced:c&&c.widgets_whitelist_enforced?c.name:void 0}))}function eEX(){let{filterByAllowlist:e}=(0,e_.jA)(!0),t=(0,efH.Sp)(),n=(0,e_.qr)().filter(t);n=e(n);let a=(0,e_.Be)().widgets,l=f.useMemo(()=>Object.values(a).sort(e_.YW).filter(e=>"user"===e.installed_by),[a]),r=(0,q_.xx)(()=>l),i=(0,eEl.Ol)(r()),[o,s]=f.useState(!1),c=f.useMemo(()=>o?i:i.slice(0,40),[i,o]),d=f.useMemo(()=>n.slice(0,6),[n]);if(0===d.length&&0===i.length)return f.createElement(eEd.H,{isWidget:!0});let u=d.length>0,m=i.length>0;return f.createElement(f.Fragment,null,u&&f.createElement(f.Fragment,null,f.createElement("div",{className:nb()(eEm,a8.cx.mb8.$)},(0,eN.tx)("universal_insert.recents")),f.createElement(ehw,{items:d})),u&&m&&f.createElement(eEu,null),m&&f.createElement(f.Fragment,null,f.createElement("div",{className:nb()(eEm,a8.cx.mb8.$)},(0,eN.tx)("universal_insert.saved")),f.createElement(ehw,{items:c}),i.length>40&&!o&&f.createElement("button",{className:eEp,onClick:()=>s(!0)},(0,eN.tx)("universal_insert.show_all_saved_widgets"))))}function eEq(){let e=(0,e_.yQ)(),t=(0,e_.bh)().filter(t=>!Object.keys(e).find(n=>e[n].plugin_id===t.id));if(0===Object.keys(e).length&&0===t.length)return f.createElement(eEt.W,{isWidget:!0});let n=Object.keys(e).reverse();return f.createElement("div",{className:ehC},n.map(e=>f.createElement(egx,{localFileId:Number(e),tab:gD.p.DEVELOPMENT,key:e})),t.map(e=>f.createElement(egw,{tab:gD.p.DEVELOPMENT,publishedWidget:e,key:e.id})))}function eEZ(){let e=(0,e_.wW)();return 0===e.length?null:f.createElement(Y.fu,{name:"invited"},f.createElement("div",{className:a8.cx.mt16.$},f.createElement(fy.Y,{width:"fill-parent",verticalAlignItems:"center",padding:{horizontal:24,vertical:16},horizontalAlignItems:"center",spacing:24,direction:"vertical"},e.map(e=>f.createElement(eEQ,{key:e.id,widget:e})),f.createElement("div",{className:a8.cx.wFull.h1.$,style:dA.sx.add({backgroundColor:"var(--color-border, $figmaFGBlack1)"}).$}))))}function eEQ({widget:e}){let t=(0,x1.uF)(e),{currentTab:n}=eEW();return f.createElement(fy.Y,null,f.createElement("div",{className:a8.cx.relative.$},f.createElement("div",{className:a8.cx.absolute.w8.h8.bRadiusHalf.colorBgDanger.$,style:dA.sx.add({left:"-8px",top:"-8px"}).$}),f.createElement(vg.sU,{image:f.createElement(vg.WM,{removeBorder:!0},f.createElement(egp._,{src:t.redirect_snapshot_url,widget:t,analytics:{triggeredFrom:(0,efP.Vq)(n)},context:a_._Y.WHITEBOARD})),className:a8.cx.w200.$})),f.createElement(eul.PE,{resource:e}))}var eE$=n(655215),eE0=n(286138);function eE1(){return f.createElement("div",{className:a8.cx.flex.flexColumn.itemsCenter.$},f.createElement("div",null,f.createElement(a2.B,{svg:eE0.A,useOriginalSrcFills_DEPRECATED:!0,svgWidth:"60px",autosize:!0})),f.createElement("div",{className:a8.cx.mt16.mb24.$},(0,eN.tx)("whiteboard.inserts.disabled_org_widgets_empty_state_description")))}function eE2(){let e=(0,_.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:void 0);return e?f.createElement(eE5,{org:e}):f.createElement(re.kt,{className:ehb})}function eE5({org:e}){let t=(0,_.d4)(t=>{var n;let{orgUsersByOrgId:a}=t;return(null==(n=a.orgUsers[e.id][t.user.id])?void 0:n.permission)===a_._D.GUEST}),n=e&&e.widgets_whitelist_enforced,a=(0,e_.U6)(),l=(0,eg.h)("widget"),r=(0,af.tS)(),i=(0,TS.n_)((null==e?void 0:e.id)??"",r),o=(0,mV.mC)(i),s=r3.a8.loadingKeyForPayload(e.id??""),c=(0,mV.mC)(s),d=!e.public_plugins_allowed||e.widgets_whitelist_enforced&&o&&0===Object.keys(a).length,u=t||c&&0===l.length,m=(0,e_.Be)().orgWidgets,p=f.useMemo(()=>{let t=Object.values(m).filter(t=>!(0,eE$.s7)(t,e.id));return n&&(t=t.filter(e=>a[e.plugin_id])),t.sort(e_.YW)},[a,n,e.id,m]),g=(0,eEl.Ol)(p);return o&&c?d&&u?f.createElement(eE1,null):f.createElement(Y.fu,{name:"explore"},l.length>0&&f.createElement(f.Fragment,null,f.createElement("div",{className:ehC},l.map(e=>{let t=e.plugin_id;return f.createElement(egN,{widgetId:t,key:t,showLockIcon:!0})}))),g.length>0&&f.createElement(f.Fragment,null,f.createElement("div",{className:ehy},(0,eN.tx)("universal_insert.saved_from_community")),f.createElement("div",{className:ehC},g.map(e=>{let t=e.plugin_id;return f.createElement(egN,{widgetId:t,key:t})}))),f.createElement(eh2,{extensionType:TS.Ag.Widget,dedupeOrgSaves:!0})):f.createElement(re.kt,{className:ehb})}function eE4(){return f.createElement(egi,{resourceType:uL.bD.WIDGET,shelfType:uL.cS.BROWSE_WIDGETS_MODAL,renderResource:e=>f.createElement(egN,{widgetId:e.id,key:e.id})})}function eE3(){let[e,t]=(0,S.fp)(eh9);return f.createElement(eh8,{setCurrentView:t,currentView:e})}function eE6(){let e=(0,S.md)(eh9),t=(0,cC.sZ)(),n=!!(t&&t.widgets_whitelist_enforced);return f.createElement("div",null,f.createElement(eEZ,null),f.createElement("div",{className:a8.cx.flex.justifyBetween.wFull.minW0.$},f.createElement(eE3,null),e===eh3.DEVELOPMENT&&f.createElement("div",{className:a8.cx.flex.itemsCenter.pr16.$},f.createElement(eh0.n,{resourceType:uL.bD.WIDGET}))),e===eh3.RECENT_AND_SAVED&&f.createElement(f.Fragment,null,f.createElement(eEX,null),n?f.createElement(eh2,{extensionType:TS.Ag.Widget}):f.createElement(eE4,null)),e===eh3.DEVELOPMENT&&f.createElement(eEq,null),e===eh3.ORG&&f.createElement(f.Fragment,null,f.createElement(eE2,null),!n&&f.createElement(eE4,null)))}function eE7(){f.useEffect(()=>{function e(e){e.key===eX.xk&&ET.D.dispatch(z.aF({storeInRecentsKey:EI.$A.FigJam}))}return ET.D.dispatch(z.aF({storeInRecentsKey:EI.$A.FigJam})),window.addEventListener("storage",e,!1),()=>{window.removeEventListener("storage",e,!1)}},[]);let e=(0,_.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:void 0),t=e?e.id:"",n=(0,mV.oh)(EN.sz.loadingKeyForPayload({shelfType:uL.cS.BROWSE_WIDGETS_MODAL})),a=(0,af.tS)(),l=(0,mV.oh)((0,TS.n_)(t,a)),r=(0,mV.oh)(r3.a8.loadingKeyForPayload(t)),i=(0,mV.mC)(EA.cd.fetchWidgetsMetadata.loadingKeyForPayload({key:EI.$A.FigJam}));return n||l||r||!i?f.createElement(e_t,null):f.createElement(Y.fu,{name:"widgets"},f.createElement(eE6,null))}var eE8=n(172226),eE9=n(557558),eve=n(900758),evt=n(17284),evn=n(166521);function eva(e){var t,n,a;let{resourceId:l,goBack:r}=e,i=(0,_.d4)(e=>e.authedActiveCommunityProfile),o=(0,e_v.xp)(l),s=!!o.id,c=(0,e_.Be)().plugins[l]||(0,x1.uF)(o),d=(0,_.d4)(e=>(0,f1.zg)(e.selectedView)&&!e.user),u=(null==(t=o.community_publishers)?void 0:t.accepted)||[],m=(0,_.wA)(),p=(0,ax.LR)();f.useEffect(()=>{s||m(r3.af({id:l,resourceType:uL.bD.PLUGIN}))},[m,l,s]);let g=(0,e_v.EO)(o),h=Object.values((0,e_.$1)()).find(t=>String(t.plugin_id)===e.resourceId),E=(0,cC.sZ)(),v=(0,e_.ll)(),b=!h&&(0,ed0.XV)({org:E,extension:o,allowlistedExtensions:v}),w=(0,egO.F)();return f.createElement("div",{className:e_I},f.createElement("div",{className:e_A},f.createElement(a2.B,{svg:yl.A,className:e_N,onClick:C.Ay.isIpad?void 0:r,onPointerDown:C.Ay.isIpad?r:void 0,"data-not-draggable":!0,"data-does-not-dismiss-modal":!0}),f.createElement("div",{className:e_L},f.createElement("div",{className:e_P},f.createElement("div",{className:e_D},c.name),(0,e_g.$3)({resource:o,height:"16",validBadges:[e_g.op.PURCHASED],authedActiveCommunityProfile:i})||f.createElement(evt.I,{badges:o.badges,height:"16",hideTooltip:!0})),((null==(n=o.community_publishers)?void 0:n.accepted.length)||0)>0&&f.createElement("div",{className:e_R},(0,eN.tx)("whiteboard.inserts.by_publisher",{numPublishers:u.length,firstPublisherName:null==(a=u[0])?void 0:a.name,multiplePublisherSuffix:f.createElement("span",{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eEP.eg)(u.slice(1),u.length,e=>e.name)},(0,eN.tx)("whiteboard.inserts.and_others"))})))),f.createElement("div",{className:e_O},f.createElement("div",{className:a8.cx.mr8.$},g&&!(0,y.kc)().community_hub_admin_reviewer?f.createElement(evn.I,{resource:o,context:uL.aL.INSERTS,payment:o.community_resource_payment}):f.createElement("div",{"data-tooltip-type":d?nx.Ib.TEXT:void 0,"data-tooltip":d?(0,eN.t)("whiteboard.inserts.log_in_or_sign_up_to_use",{resourceType:uL.vt.PLUGIN}):void 0},b?f.createElement(e_H.s,{version:c,isPlugin:!0}):f.createElement(e_F,{pluginId:o.id,buttonCta:(0,eN.t)("whiteboard.inserts.plugin_run_cta"),isNotInHeader:!0,view:gD.p.PLUGINS}))),f.createElement(e_U._W,{resourceId:o.id,resourceType:uL.vt.PLUGIN,parentView:e_U.nN.DETAIL}),w?f.createElement(egk.O,{setPinned:e.setPinned,noMargin:!0}):f.createElement(tN.Jn,{onClick:p,className:e_M})))}function evl(e){var t,n;let{resourceId:a,goBack:l}=e,r=(0,e_v.aQ)(e.resourceId),i=(null==r?void 0:r.community_publishers.accepted)||[],o=(0,_.wA)(),s=(0,ax.LR)(),c=Object.values((0,e_.yQ)()).find(e=>e.plugin_id===a),d=(0,_.d4)(e=>e.authedActiveCommunityProfile),u=(0,e_.bh)().find(e=>e.id===a),m=em.eD&&!!u&&!c,p=!!c||m,g=(0,nT.U)(),h=(null==g?void 0:g.type)===evr&&g.data.widgetId===a,E=(0,x1.uF)(r),v=(0,efH.cX)().currentTab,b=(0,efH.cX)().searchQuery,w=(0,efP.Vq)(v),T="whiteboard"===(0,Q.lg)(),x=(0,e_x.F5)(),N=Object.values((0,e_.$1)()).find(t=>String(t.plugin_id)===e.resourceId),S=(0,cC.sZ)(),k=(0,e_.U6)(),I=!N&&(0,ed0.XV)({extension:r,org:S,allowlistedExtensions:k});f.useEffect(()=>{r||o(r3.af({id:a,resourceType:uL.bD.WIDGET}))},[a,o,r]);let A=(0,efG.b)(),O=o4.nc.user("insert-published-widget",()=>{(0,eig.j)({pluginID:E.plugin_id,widgetName:E.name,pluginVersionID:E.id,triggeredFrom:w}),T&&(0,e_x.oM)({id:E.plugin_id,type:gD.p.WIDGETS,source:w,options:{...x,query:b}}),A()}),L=(0,e_v.EO)(r),P=(0,egO.F)();if(!r)return null;let D=p?e=>{if(p){if(e.preventDefault(),e.stopPropagation(),h)o(nI.oB());else{let t=e.target.getBoundingClientRect();o(nI.j7({type:evr,data:{targetRect:t,widgetId:a}}))}}}:O;return f.createElement("div",{className:e_I},f.createElement("div",{className:e_A},f.createElement(a2.B,{svg:yl.A,className:e_N,onClick:C.Ay.isIpad?void 0:l,onPointerDown:C.Ay.isIpad?l:void 0,"data-not-draggable":!0,"data-does-not-dismiss-modal":!0}),f.createElement("div",{className:e_L},f.createElement("div",{className:e_P},f.createElement("div",{className:e_D},E.name),(0,e_g.$3)({resource:r,height:"16",validBadges:[e_g.op.PURCHASED],authedActiveCommunityProfile:d})||f.createElement(evt.I,{badges:r.badges,height:"16",hideTooltip:!0})),((null==(t=r.community_publishers)?void 0:t.accepted.length)||0)>0&&f.createElement("div",{className:e_R},(0,eN.tx)("whiteboard.inserts.by_publisher",{numPublishers:i.length,firstPublisherName:null==(n=i[0])?void 0:n.name,multiplePublisherSuffix:f.createElement("span",{"data-tooltip-type":nx.Ib.TEXT,"data-tooltip":(0,eEP.eg)(i.slice(1),i.length,e=>e.name)},(0,eN.tx)("whiteboard.inserts.and_others"))})))),f.createElement("div",{className:e_O},f.createElement("div",{className:a8.cx.mr8.$},L&&!(0,y.kc)().community_hub_admin_reviewer?f.createElement(evn.I,{resource:r,context:uL.aL.INSERTS}):I?f.createElement(e_H.s,{version:E,isPlugin:!1}):f.createElement(a1.$$,{onClick:C.Ay.isIpad?void 0:D,onPointerDown:C.Ay.isIpad?D:void 0,className:p?e_S:void 0,"data-not-draggable":!0,dataTestId:"add-widget-button"},(0,eN.t)("whiteboard.inserts.add_widget"),p&&f.createElement(a2.B,{svg:Od.A,className:e_k}))),f.createElement("div",null,f.createElement(e_U._W,{resourceId:r.id,resourceType:uL.vt.WIDGET,parentView:e_U.nN.DETAIL})),P?f.createElement(egk.O,{setPinned:e.setPinned,noMargin:!0}):f.createElement(tN.Jn,{onClick:s,className:e_M})))}let evr="DROPDOWN_TYPE_WIDGET_DETAIL_SUBMENU";function evi(){let{openFile:e,fileVersion:t,loadingState:n,universalInsertModal:a}=(0,N.R)(e=>({openFile:e.openFile,fileVersion:e.fileVersion,loadingState:e.loadingState,universalInsertModal:e.universalInsertModal})),{searchQuery:l,setSearchQuery:r,currentTab:i,setCurrentTab:o,searchTemplatesResult:s,moreResult:c,pluginSavedSearchResultIds:u,pluginCommunitySearchResultIds:m,pluginOrgSearchResultIds:p,pluginDevelopmentSearchResultIds:g,pluginSearchIsLoading:h,pluginSearchHasResolved:E,widgetSavedSearchResultIds:v,widgetCommunitySearchResultIds:y,widgetOrgSearchResultIds:b,widgetSearchIsLoading:C,widgetSearchHasResolved:w,widgetDevelopmentSearchResultIds:T,faceStampSearchIsLoading:x,faceStampSearchHasResolved:k,debouncedSearchQuery:I,lastPluginSearchQuery:A,lastWidgetSearchQuery:O,lastFaceStampSearchQuery:L,teamTemplatesFromSearch:P,totalNumTeamTemplatesFromSearch:D,teamTemplatesFromSearchIsLoading:R,requestLoadMoreTeamTemplatesFromSearch:M,previewResource:F,setPreviewResourceAndTrack:B}=eEW(),[U,H]=f.useState(a.initialSelectedCategory??d),G=(0,S.md)(ES.D);f.useEffect(()=>{G&&!eE9.l.has(G)&&(0,n2.YQ)({id:efO.X,properties:{requester:efO.Y.FigjamUniversalInsertsMenuOpen}})},[G]),f.useEffect(()=>{a.previewResource&&B(a.previewResource)},[B,a.previewResource]),f.useEffect(()=>{d=U},[U]),f.useEffect(()=>{a.initialSearch&&r(a.initialSearch)},[a.initialSearch,r]);let{isInsertingTemplate:K}=(0,uI.Fz)(),W=(0,_.wA)(),z=(0,td.W6)(),j=a.sourceRect,[J,X]=f.useMemo(()=>{if(z&&j)return[void 0,{kind:"sourceRect",sourceRect:j}];{let e=aW.b;return[e,{kind:"buttonTarget",buttonTarget:e}]}},[z,j]),{initialModalPosition:q,modalPosition:Z,setModalPosition:Q}=(0,ax.ts)(X,ax.zo,ax.gR),{bounds:$,showLeftPinBound:ee,setShowLeftPinBound:et,shouldSnapToPosition:en,setPinned:ea}=it(evs,Q,a.pinned,efH.t$,q,a.showing);f.useEffect(()=>{W(EA.cd.fetchTemplatesMetadata({key:EI.$A.FigJam,orgId:null==e?void 0:e.parentOrgId})),W(EA.cd.fetchWidgetsMetadata({key:EI.$A.FigJam})),W(efA.GU({}))},[W,null==e?void 0:e.parentOrgId]),f.useEffect(()=>{W(EN.sz({shelfType:uL.cS.FIGJAM_TEMPLATES_PICKER}))},[W]);let el=Object.keys((0,e_.yQ)()).join(","),er=(0,ew.iZ)(),ei=(0,cC.sZ)(),eo=(0,efL.G7)(ei),es=(0,du.hC)(),ec=f.useRef(null),ed=f.useRef(null);f.useEffect(()=>{er&&(W(V._J()),W(r6.aq()))},[W,er,el]),(0,r5.IT)((0,r3.se)()),(0,r5.IT)((0,r3.fd)()),f.useEffect(()=>{W(OA.cr({shouldSearchDefaultLibraries:!0}))},[W]);let eu=e&&t&&(0,mV.Sc)(n,(0,PK.yD)(e.key));f.useEffect(()=>{eu&&W(OA.zK({}))},[W,eu]),f.useEffect(()=>{var e;"function"==typeof(null==(e=ed.current)?void 0:e.scroll)&&ed.current.scroll({top:0,behavior:"smooth"})},[I]);let{filterOptions:em,selectedTeamOrWorkspaceOrLicenseGroupIds:ep,isMyTeamsOnly:ef,onFilterChange:eg,requestLoadMore:eh,requestLoadMoreForTeam:eE,templatesByTeam:ev,userTeamOrWorkspaceIds:ey,isLoadingTeamTemplates:eb}=(0,cu.GT)(es?ei:null,a_._Y.WHITEBOARD),eC=f.useCallback(()=>o(gD.p.MORE),[o]);return f.createElement(efH.Td.Provider,{value:{setPreviewResource:B,currentTab:i,setCurrentTab:o,setSelectedCategory:H,searchQuery:l}},f.createElement(ehj,{hasSearchBar:!0,searchQuery:l,setSearchQuery:r,resourceDetailViewContent:F&&F.id&&F.type?F.type===efP.Rt.TEMPLATES?f.createElement(eEL,{id:F.id,selectedCategoryId:"",setPreviewHubFile:B}):F.type===efP.Rt.WIDGETS?f.createElement(eE8.xl,{id:F.id}):F.type===efP.Rt.PLUGINS?f.createElement(eEN,{pluginId:F.id}):F.type===efP.Rt.ORG_FACE_STAMPS?f.createElement(egB,{onBack:eC,queryFromAllSearch:""!==I?I:null}):void 0:null,resourceDetailViewHeader:F&&F.id&&F.type?F.type===efP.Rt.TEMPLATES?f.createElement(eED,{resourceId:F.id,goBack:()=>{B(void 0)},buttonCta:(0,eN.t)("whiteboard.inserts.add_template"),setPinned:ea}):F.type===efP.Rt.WIDGETS?f.createElement(evl,{resourceId:F.id,goBack:()=>B(void 0),setPinned:ea}):F.type===efP.Rt.PLUGINS?f.createElement(eva,{resourceId:F.id,goBack:()=>B(void 0),setPinned:ea}):F.type===efP.Rt.ORG_FACE_STAMPS?f.createElement(egz,{onBack:()=>B(void 0),setPinned:ea,queryFromAllSearch:I}):void 0:null,categoryViewContent:U?U.resourceType===efP.Rt.TEMPLATES?f.createElement(eEk,{selectedCategoryId:U.id,shelfType:uL.cS.FIGJAM_TEMPLATES_PICKER,setPreviewHubFile:B,renderResource:e=>f.createElement(e_3,{template:{type:uO.n.HubFile,template:e},key:e.id,templateInsertionLocation:uA.RD.CURRENT_FILE,triggeredFrom:(0,efP.Vq)(i),isInsertingTemplate:K(e.id),onClickTitle:()=>B({id:e.id,type:efP.Rt.TEMPLATES})})}):U.resourceType===efP.Rt.STICKERS_AND_COMPONENTS?f.createElement(e_p,{selectedLibrary:U,setSelectedLibrary:H}):U.resourceType===efP.Rt.WIDGETS?f.createElement(ehq,{selectedCategoryId:U.id,goBack:()=>H(void 0),resourceType:uL.bD.WIDGET,shelfType:uL.cS.BROWSE_WIDGETS_MODAL,renderResource:e=>f.createElement(egN,{widgetId:e.id,key:e.id})}):U.resourceType===efP.Rt.PLUGINS?f.createElement(ehq,{selectedCategoryId:U.id,goBack:()=>H(void 0),resourceType:uL.bD.PLUGIN,shelfType:uL.cS.BROWSE_PLUGINS_MODAL,renderResource:e=>f.createElement(e_Z,{pluginId:e.id,view:gD.p.EXPLORE,key:e.id})}):U.resourceType===efP.Rt.ALL?f.createElement(ehr,{useCaseName:U.id}):U.resourceType===efP.Rt.TEAM_TEMPLATES?ev.length||eb?f.createElement(Y.fu,{name:"custom_org_templates"},ev.map(({team_id:e,team_name:t,workspace_name:n,templates:a})=>f.createElement(f.Fragment,{key:e},f.createElement(eve.Z0,{teamName:t,workspaceName:eo?n:null,teamId:e,onRequestLoadMoreForTeam:eE,minimalSpacing:!0},f.createElement(e_7,{templates:a.map(e=>({type:uO.n.TeamTemplate,template:e}))})))),f.createElement(v9.a,{"data-testid":"load-more-teams",className:a8.cx.relative.$,style:{bottom:"250px"},onIntersectionChange:({isIntersecting:e})=>{e&&eh()}})):f.createElement(ehx.Ht,null):void 0:null,categoryViewHeader:function(){if(!U)return;let e=U.resourceType===efP.Rt.TEAM_TEMPLATES?f.createElement("div",{className:a8.cx.mr8.$},f.createElement(eve.DL,{filterOptions:em,selectedIds:ep,isMyTeamsOnly:ef,onFilterChange:e=>{var t,n;"function"==typeof(null==(t=ec.current)?void 0:t.scroll)&&(null==(n=ec.current)||n.scroll({top:0,behavior:"smooth"})),eg(e)},userTeamOrWorkspaceIds:new Set(ey),showWorkspaces:eo})):void 0;return f.createElement(ehJ,{selectedCategory:U,goBack:()=>{H(void 0)},setPinned:ea,extraContent:e})}(),setPinned:ea,initialModalPosition:q,modalPosition:Z,shouldHideBottomArrow:!0,bounds:$,showLeftPinBound:ee,setShowLeftPinBound:et,shouldSnapToPosition:en,entryPointId:J,categoryScrollContainerRef:ec,mainScrollContainerRef:ed},f.createElement(evo,{setPinned:ea,setPreviewResource:B,setPreviewHubFile:B,searchQuery:l,currentTab:i,setCurrentTab:o,searchTemplatesResult:s,moreResult:c,pluginSavedSearchResultIds:u,pluginCommunitySearchResultIds:m,pluginOrgSearchResultIds:p,pluginDevelopmentSearchResultIds:g,pluginSearchIsLoading:h,pluginSearchHasResolved:E,widgetSavedSearchResultIds:v,widgetCommunitySearchResultIds:y,widgetOrgSearchResultIds:b,widgetSearchIsLoading:C,widgetSearchHasResolved:w,faceStampSearchIsLoading:x,faceStampSearchHasResolved:k,widgetDevelopmentSearchResultIds:T,debouncedSearchQuery:I,lastPluginSearchQuery:A,lastWidgetSearchQuery:O,lastFaceStampSearchQuery:L,teamTemplatesFromSearch:P,totalNumTeamTemplatesFromSearch:D,teamTemplatesFromSearchIsLoading:R,requestLoadMoreTeamTemplatesFromSearch:M})))}function evo({setPreviewResource:e,searchQuery:t,currentTab:n,setCurrentTab:a,searchTemplatesResult:l,moreResult:r,pluginSavedSearchResultIds:i,pluginCommunitySearchResultIds:o,pluginOrgSearchResultIds:s,pluginDevelopmentSearchResultIds:c,pluginSearchIsLoading:d,pluginSearchHasResolved:u,widgetSavedSearchResultIds:m,widgetCommunitySearchResultIds:p,widgetOrgSearchResultIds:_,widgetSearchIsLoading:g,widgetSearchHasResolved:h,widgetDevelopmentSearchResultIds:E,faceStampSearchIsLoading:v,faceStampSearchHasResolved:y,debouncedSearchQuery:b,lastPluginSearchQuery:C,lastWidgetSearchQuery:w,lastFaceStampSearchQuery:T,teamTemplatesFromSearch:x,teamTemplatesFromSearchIsLoading:N,totalNumTeamTemplatesFromSearch:S,requestLoadMoreTeamTemplatesFromSearch:k}){let I=(0,egL.U5)(t),A=(0,cC.sZ)(),O=(0,e_.ll)(),L=(0,e_.U6)(),P=f.useMemo(()=>(0,ed0.Cs)({org:A,isWidget:!1})?o:A&&A.plugins_whitelist_enforced?o.filter(e=>O[e]):o,[A,O,o]),D=f.useMemo(()=>(0,ed0.Cs)({org:A,isWidget:!0})?p:A&&A.widgets_whitelist_enforced?p.filter(e=>L[e]):p,[A,L,p]);return n===gD.p.ALL?t?f.createElement(egX,{query:t,setCurrentTab:a,searchTemplatesResult:l,moreResult:r,pluginSavedSearchResultIds:i,pluginCommunitySearchResultIds:P,pluginOrgSearchResultIds:s,pluginDevelopmentSearchResultIds:c,pluginSearchIsLoading:d,pluginSearchHasResolved:u,widgetSavedSearchResultIds:m,widgetCommunitySearchResultIds:D,widgetOrgSearchResultIds:_,widgetDevelopmentSearchResultIds:E,widgetSearchIsLoading:g,widgetSearchHasResolved:h,faceStampSearchIsLoading:v,faceStampSearchHasResolved:y,faceStampSearchResults:I,debouncedSearchQuery:b,lastPluginSearchQuery:C,lastWidgetSearchQuery:w,lastFaceStampSearchQuery:T,teamTemplatesFromSearch:x,totalNumTeamTemplatesFromSearch:S}):f.createElement(ehk,null):n===gD.p.WIDGETS?t?f.createElement(eEY,{query:t,debouncedSearchQuery:b,hasResolved:h,savedSearchResultIds:m,communitySearchResultIds:D,orgSearchResultIds:_,developmentSearchResultIds:E,lastWidgetSearchQuery:w}):f.createElement(eE7,null):n===gD.p.STICKERS_AND_COMPONENTS?f.createElement(e_m,{query:t}):n===gD.p.PLUGINS?t?f.createElement(eh$,{query:t,debouncedSearchQuery:b,savedSearchResultIds:i,communitySearchResultIds:P,developmentSearchResultIds:c,orgSearchResultIds:s,hasResolved:u,lastPluginSearchQuery:C}):f.createElement(eEE,null):n===gD.p.TEMPLATES?t?f.createElement(eER,{templates:l,teamTemplatesFromSearch:x,totalNumTeamTemplatesFromSearch:S,teamTemplatesFromSearchIsLoading:N,requestLoadMoreTeamTemplatesFromSearch:k,query:t,debouncedSearchQuery:b}):f.createElement(egd,{setPreviewHubFile:e}):n===gD.p.MORE?t?f.createElement(ehZ,{results:r,query:t,debouncedSearchQuery:b,faceStampSearchIsLoading:v}):f.createElement(Y.fu,{name:"more2"},f.createElement(eh_,{hasTopPadding:!0})):f.createElement(f.Fragment,null)}function evs(){return{x:-ax.gR,y:0,width:2*ax.gR+efH.wR,height:window.innerHeight}}var evc=n(863670),evd=n(288345);let evu=bR.R1;function evm(e){let{dispatch:t,targetRect:n,user:a,typeahead:l,onInsert:r,onClear:i,setTypeahead:o}=e,[s,c]=f.useState(null),d=(0,lb._X)({subscribeToUpdates_expensive:!0}),u=(0,lb.Yb)(d,n);if(!(0,lb.ZT)(u,d))return null;let m={top:u.y+d.y+u.height+8,right:u.x+d.x,bottom:u.y+d.y+u.height+8,left:u.x+d.x,height:0,width:0},p=s&&m.top+s>d.height?bP.ri.UPWARDS:bP.ri.DOWNWARDS,_={left:m.left,bottom:d.height-u.y+8},g=(0,bP.f6)({...e,targetRect:m,direction:p,positionFromBottom:_});return f.createElement(evd.E,{dispatch:t,setTypeahead:o,typeahead:l,onInsert:r,onClear:i,entity:a,width:300,recordingKey:"canvasMentionsTypeahead",setMaxTypeaheadHeight:c,...g,zIndex:evu,getAdditionalMetadata:e=>"has_permission"in e&&!e.has_permission?(0,eN.t)("whiteboard.editor_mentions_typeahead.not_in_file"):null})}var evp=n(531827),evf=n(360832),ev_=n(767518),evg=n(112084);async function evh(e,t,n,a,l,r){let{trackEventForFile:i,searchSessionId:o,mentionedByUserId:s,nodeId:c,store:d}=r;try{let r=(await ZP.L.getCanvasMentionsFileNeedsInvite({fileKey:e,mentionedUserId:a.id})).data.meta.needs_invite;l(j.b({has_used_canvas_mentions:!0}));let u=(0,evg.x)(c,d);i("canvas_mention_created",{...u,search_session_id:o,mention_id:t,mentioned_user_id:a.id,mentioned_by_user_id:s,mentioned_user_can_view_file:!r},{forwardToDatadog:!0}),r&&l(eS.F.enqueue({message:(0,eN.t)("whiteboard.visual_bell.canvas_at_mentions_mentioned_user_will_be_invited_to_file",{handle:a.handle}),button:{text:(0,eN.t)("whiteboard.visual_bell.canvas_at_mentions_mentioned_undo_invite"),action:()=>{i("canvas_mention_undo_invite",{...u,search_session_id:o,mention_id:t,mentioned_user_id:a.id,mentioned_by_user_id:s,mentioned_user_can_view_file:!r},{forwardToDatadog:!0}),o4.l7.user("undo-at-mention",()=>ei.fp8.removeMention(n,t))}}}))}catch(e){(0,o2.$D)(o5.e.FIGJAM_MEEX,e)}}function evE(){let e=(0,_.wA)(),t=(0,ew.iZ)(),[n,a]=(0,S.fp)(evc.LQ),l=(0,S.md)(evc.MX),{onInsert:r,onClear:i}=function(e){let t=(0,_.wA)(),[n,a]=(0,S.fp)(evc.LQ),[l,r]=(0,S.fp)(evc.h1),[i,o]=(0,S.fp)(evc.wm),s=(0,evf.zW)({checkPermissions:ev_.m.VIEW_OR_PENDING}),c=(0,af.tS)(),d=(0,a6.U)(),u=!!(null==n?void 0:n.mentions),m=""===i,p=(0,_.Pj)(),g=(0,_.d4)(e=>(function(e){let t=Object.keys(e);return 0===t.length?null:t[0]})(e.mirror.sceneGraphSelection));return f.useEffect(()=>{let e=!1;if(null===l){a(null);return}let t=setTimeout(async()=>{let t=await (0,evp.fG)(l,s,!1),n=!!(null==t?void 0:t.mentions);e||(u&&!n&&(d("canvas_mention_search_no_results",{...(0,evg.x)(g,p)}),t={mentions:[],index:0,maxMentions:0,type:"mentions",search:l}),n&&m&&o((0,ehM.M)()),a(t))},100);return function(){clearTimeout(t),e=!0}},[t,s,l,m,o,a,u,d,g,p]),{onInsert:f.useCallback(()=>{if(n&&n.mentions&&n.mentions[n.index]&&(null==e?void 0:e.id)){let a=n.mentions[n.index],l=o4.l7.user("insert-at-mention",()=>ei.fp8.replaceCurrentMentionsQueryWithMention({mentionedUserId:a.id,mentionedByUserId:e.id,handle:a.handle}));c&&l.mentionId&&evh(c,l.mentionId,l.stablePath,a,t,{trackEventForFile:d,searchSessionId:i,mentionedByUserId:e.id,nodeId:g??"",store:p})}},[n,null==e?void 0:e.id,i,c,p,t,d,g]),onClear:f.useCallback(()=>{d("canvas_mention_search_cancelled",{...(0,evg.x)(g,p)}),r(null)},[r,d,g,p])}}(t);return!l||!n||!t||0===n.mentions.length&&!n.search||(0,KT.Fl)(t.id)||t.sharing_restricted?null:f.createElement(evm,{dispatch:e,targetRect:l,user:t,typeahead:n,onInsert:r,onClear:i,setTypeahead:a})}var evv=n(393883),evy=n(815485),evb=n(152990);function evC(){let[e,t]=(0,f.useState)(null),[n,a]=(0,f.useState)(!1),l=(0,f.useRef)(null),r=(0,f.useCallback)(()=>{l.current&&clearTimeout(l.current),a(!1)},[]),i=(0,f.useCallback)(e=>{"reactive_guidance_tooltip--fadeout--qFmOg"===e.animationName&&t(null)},[]),o=(0,f.useCallback)((e,n)=>{l.current&&(clearTimeout(l.current),t(null)),requestAnimationFrame(()=>{l.current=setTimeout(r,5e3),t({x:e,y:n}),a(!0)})},[r]);(0,f.useEffect)(()=>(0,evy.M)(o),[o]);let s=(0,lb._X)({subscribeToUpdates_expensive:!!e});if(!e)return null;let c={top:s.y,left:s.x,height:s.height,width:s.width},d=(0,lb.Z0)(s,{x:e.x+50/s.zoomScale,y:e.y}),u={transform:`translate3D(${d.x}px, ${d.y}px, 0) translate(0, -50%)`};return f.createElement(Y.fu,{name:"Reactive Guidance Tooltip"},f.createElement("div",{className:"reactive_guidance_tooltip--overflowContainer--RQWcR",style:c},f.createElement("div",{className:nb()("reactive_guidance_tooltip--tooltip--YkN90",n?"reactive_guidance_tooltip--fadeIn--Sipdd":"reactive_guidance_tooltip--fadeOut--XaVTK"),style:u,onAnimationEnd:i},f.createElement("div",{className:"reactive_guidance_tooltip--icon--NgSHS"},f.createElement(a2.B,{svg:evb.A})),f.createElement("div",{className:"reactive_guidance_tooltip--text--Si0XF"},(0,eN.tx)("whiteboard.reactive_guidance.view_only",{permission:f.createElement("b",null,(0,eN.tx)("whiteboard.reactive_guidance.view_only_permission"))})),f.createElement(a$.RJ,{viewOnly:!0,variant:"link-onbrand",recordingKey:"reactiveGuidanceViewPermission",hideViewOnlyText:!0}),f.createElement(tN.Jn,{className:"reactive_guidance_tooltip--closeButton--J4H60",onClick:r,trackingEventName:"reactive_guidance_tooltip_closed",recordingKey:"reactiveGuidanceTooltip"}))))}var evw=n(680756),evT=n(260378);let evx=(0,lf.hG)(lw.Yub),evN=(0,lf.hG)(lw.Dts)+4;function evS({stamp:e,renderChildren:t}){let n=(0,lb._X)({subscribeToUpdates_expensive:!0}),[a,l]=(0,f.useState)(null),r=(0,tt.Yk)(),[i,o]=(0,f.useState)(nx.Zj.ABOVE),[s,c]=(0,f.useState)(null),d=e.guid;(0,f.useEffect)(()=>{var e;let t=`stamp-tooltip-${d}`,n=(null==(e=(0,rt.EE)(t,[d],e=>l(e.position)).currentNodePosition[d])?void 0:e.position)||null;return l(n),()=>{(0,rt.lB)(t)}},[d]);let u=(0,f.useMemo)(()=>a?(0,lb.Yb)(n,a.absoluteBounds):null,[a,n]),m=(0,f.useMemo)(()=>u?{...u,x:u.x+n.x,y:u.y+n.y}:null,[u,n.x,n.y]),p=(0,f.useMemo)(()=>!!u&&(0,lb.ZT)(u,n),[u,n]),_=(0,f.useCallback)((e,t,a)=>{let l;let i=n.y+10,o=n.y+n.height-10-r-t.height,s=n.x+10,c=n.x+n.width-10-t.width,d=nx.Zj.ABOVE,u=(0,rE.qE)((0,evT.Al)(e,t),s,c);return u+evx+evN>e.x+e.width?(u=(0,rE.qE)(e.x+e.width+a,s,c),d=nx.Zj.RIGHT):u+t.width-evx-evN<e.x&&(u=(0,rE.qE)(e.x-t.width-a,s,c),d=nx.Zj.LEFT),d===nx.Zj.LEFT||d===nx.Zj.RIGHT?l=(0,evT.tJ)(e,t):(l=(0,evT.T1)(e,t,a))<i&&(l=(0,evT.DH)(e,t,a),d=nx.Zj.BELOW),{pos:d,x:u,y:(0,rE.qE)(l,i,o)}},[r,n]),g=(0,f.useCallback)((e,t,n)=>_(e,t,n).x,[_]),h=(0,f.useCallback)((e,t,n)=>_(e,t,n).y,[_]),E=(0,f.useCallback)((e,t,n,a)=>{if(!m)return;let l=_(m,n,a).pos;o(l),c(a=>{let r=function({targetRect:e,tooltipRect:t,tooltipPosition:n}){let a=e.x-t.x+e.width/2,l=e.y-t.y+e.height/2,r=t.width-2*evx-evN,i=t.height-2*evx-evN;switch(n){case nx.Zj.ABOVE:return{left:(0,rE.qE)(a-evx,evN,r),top:Math.floor(t.height)};case nx.Zj.BELOW:return{left:(0,rE.qE)(a-evx,evN,r),top:-evx};case nx.Zj.RIGHT:return{left:-evx,top:(0,rE.qE)(l-evx,evN,i)};case nx.Zj.LEFT:return{left:Math.floor(t.width),top:(0,rE.qE)(l-evx,evN,i)}}}({targetRect:m,tooltipRect:{x:e,y:t,width:n.width,height:n.height},tooltipPosition:l});return a&&r.top===a.top&&r.left===a.left?a:r})},[_,m]);return m&&p?f.createElement(evT.lM,{style:{WebkitUserSelect:"none"},targetRect:m,offset:evx,positionX:g,positionY:h,onPosition:E},t({arrowPosition:s,tooltipPosition:i})):null}let evk="stamp_overlay--userText--FdBYI ellipsis--ellipsis--Tjyfa",evI="stamp_overlay--tRexAvatarForeground--6Qkya",evA={[nx.Zj.ABOVE]:"stamp_overlay--downArrow--VJLl5 stamp_overlay--arrow--F8-y5",[nx.Zj.BELOW]:"stamp_overlay--upArrow--PCqYY stamp_overlay--arrowInset--8zLXg stamp_overlay--arrow--F8-y5",[nx.Zj.RIGHT]:"stamp_overlay--leftArrow--u3dvc stamp_overlay--arrow--F8-y5",[nx.Zj.LEFT]:"stamp_overlay--rightArrow--G7DIa stamp_overlay--arrow--F8-y5"},evO={[nx.Zj.ABOVE]:"stamp_overlay--animationUp--Pq4mv stamp_overlay--animationBase--a-FJI",[nx.Zj.BELOW]:"stamp_overlay--animationDown--mBXfv stamp_overlay--animationBase--a-FJI",[nx.Zj.RIGHT]:"stamp_overlay--animationRight--2KY5g stamp_overlay--animationBase--a-FJI",[nx.Zj.LEFT]:"stamp_overlay--animationLeft--daYLK stamp_overlay--animationBase--a-FJI"};function evL(e){let t=e.mirror.sceneGraph,n=Object.keys(e.mirror.sceneGraphSelection);if(1!==n.length)return null;let a=t.get(n[0]);return a&&"STAMP"===a.type?a:null}function evP(e){let t=e.mirror.sceneGraph.get(e.mirror.appModel.hoveredNode);return t&&"STAMP"===t.type?t.guid:null}function evD({shouldShowAvatar:e,avatarEntity:t,text:n}){return f.createElement(f.Fragment,null,e&&f.createElement(iF.Ro,{size:16,entity:t}),f.createElement("div",{className:evk},n))}function evR({size:e}){return f.createElement("svg",{width:e,height:e,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f.createElement("g",{clipPath:"url(#clip0_1941_43995)"},f.createElement("rect",{className:"stamp_overlay--tRexAvatarBackground--tprTe",width:"16",height:"16"}),f.createElement("path",{className:evI,d:"M3 9.90476V8H9V9.42857V10.8571V13C9 15.2091 7.20914 17 5 17H0L-0.71875 11.7143L3 9.90476Z"}),f.createElement("path",{className:evI,fillRule:"evenodd",clipRule:"evenodd",d:"M4.81038 2.08926C3.50282 2.45482 3 3.93364 3 5.29134V8C3 8.55228 3.44771 9 4 9H13C13.5523 9 14 8.55228 14 8V6.16667C14 4.50981 12.6569 3.16667 11 3.16667H8.24357C7.98467 3.16667 7.73678 3.06531 7.53359 2.90486C7.09796 2.56089 6.25898 2 5.42 2C5.21483 2 5.00965 2.03354 4.81038 2.08926ZM5.75 5.5C6.16421 5.5 6.5 5.16421 6.5 4.75C6.5 4.33579 6.16421 4 5.75 4C5.33579 4 5 4.33579 5 4.75C5 5.16421 5.33579 5.5 5.75 5.5Z"}),f.createElement("path",{className:evI,d:"M11.8504 13.8881C10.8861 14.05 10.9477 12.5057 9.64966 12.5057C8.35158 12.5057 7.14966 13.3116 7.14966 12.1587C7.14966 11.0057 8.35155 11 9.64962 11C11.5299 11 12.8147 13.7262 11.8504 13.8881Z"})),f.createElement("defs",null,f.createElement("clipPath",{id:"clip0_1941_43995"},f.createElement("circle",{r:"8",cx:"8",cy:"8",fill:"black"}))))}function evM({stamp:e,shouldAnimate:t,testId:n}){var a,l;let r=(null==(a=e.stampData)?void 0:a.stampedByUserId)||null,i=(null==(l=e.stampData)?void 0:l.userId)||null,{user:o,loading:s}=(0,KT.wW)(r),{user:c,loading:d}=(0,KT.wW)(i),u=(0,_.d4)(e=>{var t,n;return null==(n=null==(t=e.openFile)?void 0:t.org)?void 0:n.name}),m=(()=>{var t;let n=!e.isFaceStamp,a=!!(null==(t=e.stampData)?void 0:t.votingSessionId);if(r&&s||i&&d)return f.createElement(f.Fragment,null,n&&f.createElement("div",{className:"stamp_overlay--loadingAvatar--DkN-J stamp_overlay--loadingBase--2UAyM"}),f.createElement("div",{className:"stamp_overlay--loadingUserText--845yi stamp_overlay--loadingBase--2UAyM"}));if(o){let e=o.handle;return f.createElement(evD,{shouldShowAvatar:n,avatarEntity:o,text:a?(0,eN.tx)("voting.stamp_tooltip.vote",{userName:e}):i&&r!==i?f.createElement("div",{className:"stamp_overlay--faceStampTooltipText--bMf1l"},null==c?void 0:c.handle," ",f.createElement("br",null),f.createElement("p",{className:"stamp_overlay--stampedByText--fK8AK"},(0,eN.tx)("whiteboard.stamp.stamped_by_tooltip",{userName:e}))):e})}if(c){let e=c.handle;return f.createElement(evD,{shouldShowAvatar:n,avatarEntity:c,text:a?(0,eN.tx)("voting.stamp_tooltip.vote",{userName:e}):e})}if(i&&(0,KT.Fl)(i)||r&&(0,KT.Fl)(r)){let e=a?(0,eN.tx)("voting.stamp_tooltip.visitor_vote"):u?(0,eN.tx)("voting.stamp_tooltip.visitor_with_org",{orgName:u}):(0,eN.tx)("voting.stamp_tooltip.visitor_without_org");return f.createElement(evD,{shouldShowAvatar:n,avatarEntity:{id:r||i||void 0},text:e})}return r||i?f.createElement(evD,{shouldShowAvatar:n,avatarEntity:{},text:(0,eN.tx)("voting.stamp_tooltip.unavailable")}):f.createElement(f.Fragment,null,f.createElement(evR,{size:16}),f.createElement("div",{className:evk},(0,eN.tx)("voting.stamp_tooltip.old_stamp")))})();return f.createElement(evS,{stamp:e,renderChildren:({tooltipPosition:e,arrowPosition:a})=>f.createElement("div",{className:t?evO[e]:""},f.createElement("div",{className:"stamp_overlay--tooltip---xJx5 text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L","data-testid":n},m),a&&f.createElement("div",{className:evA[e],style:a}))})}let evF=f.memo(function(){let e=(0,_.d4)(evL);return f.createElement(f.Fragment,null,e&&f.createElement(evM,{stamp:e,shouldAnimate:!0,key:e.guid,testId:"selected-stamp-tooltip"}))}),evB=f.memo(function(){var e;let t=(0,_.d4)(evP),[n,a]=(0,f.useState)(null),[l,r]=(0,f.useState)(!0),i=(0,_.d4)(e=>n?e.mirror.sceneGraph.get(n):null),o=(0,_.d4)(evL),s=(0,egL.d0)();return((0,f.useEffect)(()=>{let e=!!n;if(t!==n&&(t||n)){if(t&&e){r(!1),a(t);return}if(t&&!e){let e=setTimeout(()=>{a(t)},100);return()=>clearTimeout(e)}if(!t&&e){let e=setTimeout(()=>{a(null),r(!0)},300);return()=>clearTimeout(e)}}},[t,n]),(null==o?void 0:o.isFaceStamp)&&!(null==(e=null==o?void 0:o.stampData)?void 0:e.votingSessionId)&&s)?null:f.createElement(f.Fragment,null,i&&f.createElement(evM,{stamp:i,key:i.guid,testId:"hovered-stamp-tooltip",shouldAnimate:l}))}),evU=f.memo(function(){return(0,C.aJ)()?f.createElement(evB,null):f.createElement(evF,null)});var evH=n(243635),evG=n(698171),evV=n(526518);function evK(){let e=(0,S.md)(dc.UQ),t=(0,S.md)(sR.zN),n=1e3*parseFloat(evV.H)+300,[a,l]=(0,f.useState)(!1);return((0,f.useEffect)(()=>{let e=setTimeout(()=>{l(!0)},n);return()=>clearTimeout(e)},[n]),e&&"loaded"===t.status&&!1===t.data&&a)?f.createElement(evW,null):null}function evW(){let e=(0,_.d4)(e=>e.userFlags),t=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.teamId}),n=(0,_.d4)(e=>e.multiplayer.sessionID),a=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.key}),l=(0,_.d4)(e=>{var t;return null==(t=e.userAnalyticsData)?void 0:t.first_figjam_at}),r=(0,S.md)(evH.Zk);if(!(0,mk.mW)(e,"figjam_editor_onboarded"))return null;if(t)return f.createElement(evz,{teamId:t,userFlags:e,currentFileKey:a,currentSessionId:n});{let t=(0,mk.mW)(e,"seen_fj_upsell_draft_modal_1")?(0,mk.mW)(e,"seen_fj_upsell_draft_modal_2")?(0,mk.mW)(e,"seen_fj_upsell_draft_modal_3")?null:r.seen_fj_upsell_draft_modal_2.fileKey!==a||r.seen_fj_upsell_draft_modal_2.sessionId!==n?"seen_fj_upsell_draft_modal_3":null:r.seen_fj_upsell_draft_modal_1.fileKey!==a||r.seen_fj_upsell_draft_modal_1.sessionId!==n?"seen_fj_upsell_draft_modal_2":null:"seen_fj_upsell_draft_modal_1";return!t||(0,cF.A)(l).add(7,"day").isSameOrAfter((0,cF.A)())?null:f.createElement(evj,{mainText:evJ(t),userFlag:t,secondaryText:evY(t),upsellSource:sM.b.FIGJAM_UPSELL_MODAL,gif:evX(t),teamId:"",currentSessionId:n,currentFileKey:a})}}function evz(e){var t,n,a,l;let{teamId:r,userFlags:i,currentSessionId:o,currentFileKey:s}=e,c=(0,eW.Rs)(eJ.bel,{teamId:r});if("loaded"!==c.status)return null;let d=1!==(l=(null==(a=null==(n=null==(t=c.data)?void 0:t.team)?void 0:n.teamFileCounts)?void 0:a.whiteboardFileCount)??0)||(0,mk.mW)(i,"seen_fj_upsell_team_modal_1")?2!==l||(0,mk.mW)(i,"seen_fj_upsell_team_modal_2")?3!==l||(0,mk.mW)(i,"seen_fj_upsell_team_modal_3")?null:"seen_fj_upsell_team_modal_3":"seen_fj_upsell_team_modal_2":"seen_fj_upsell_team_modal_1";return d?f.createElement(evj,{mainText:evJ(d),userFlag:d,secondaryText:evY(d),upsellSource:sM.b.FIGJAM_UPSELL_MODAL,gif:evX(d),teamId:r,currentFileKey:s,currentSessionId:o}):null}function evj(e){let{mainText:t,secondaryText:n,userFlag:a,upsellSource:l,gif:r,teamId:i}=e,o=(0,e2.Xr)(evH.xw),s=(0,_.wA)(),c=(0,S.md)(evH.Zk);f.useEffect(()=>{o({showing:!0,userFlag:a})},[o,a]);let d=()=>{s(ty.Lo()),s(j.b({[a]:!0})),c[a]={fileKey:e.currentFileKey,sessionId:e.currentSessionId},o({showing:!1})},u=(0,y.mm)()[0],m="ja"===u?323-2*dq.uv:303-2*dq.uv;return f.createElement(Y.fu,{name:"FigJamUpsellModal",properties:{}},f.createElement(dq.CR,{targetKey:evG.l,dismissModal:d,width:m,topPadding:12,shouldCenterArrow:dk.EL.FALLBACK,disableClickOutsideToHide:!0,additionalOnExplicitDismiss:d,className:"figjam_upsell_modal--modal--04mt-",closeButtonClassName:"figjam_upsell_modal--closeButton--MTKjp",shouldDismissWhenLostDOMTarget:!0},f.createElement("div",{className:"figjam_upsell_modal--genericTopHalf--iECQZ"},f.createElement("span",{className:"figjam_upsell_modal--mainText--pe9Vj text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",style:{width:"ja"===u?154:150}},t),f.createElement("div",{className:"figjam_upsell_modal--gif--1VlR7"},r)),f.createElement("div",{className:"figjam_upsell_modal--genericBottomHalf--ZGBjw"},f.createElement("span",null,n),f.createElement(so.vd,{className:"figjam_upsell_modal--upgradeButton--4w7Fb",onClick:()=>{d(),s(ty.to({type:sP.V,data:{upsellSource:l,teamId:i,openCheckoutInNewTab:!0}}))}},(0,eN.tx)("upsell.history.upgrade_now")))))}function evJ(e){switch(e){case"seen_fj_upsell_draft_modal_1":return(0,eN.tx)("whiteboard.paywall_upsell.draft.first.main",{purpleSection:evq((0,eN.tx)("whiteboard.paywall_upsell.draft.first.main.purpleSection"))});case"seen_fj_upsell_draft_modal_2":return(0,eN.tx)("whiteboard.paywall_upsell.draft.second.main",{purpleSection:evq((0,eN.tx)("whiteboard.paywall_upsell.draft.second.main.purpleSection"))});case"seen_fj_upsell_draft_modal_3":return(0,eN.tx)("whiteboard.paywall_upsell.draft.third.main",{purpleSection:evq((0,eN.tx)("whiteboard.paywall_upsell.draft.third.main.purpleSection"))});case"seen_fj_upsell_team_modal_1":return(0,eN.tx)("whiteboard.paywall_upsell.team.main",{fileCount:evq((0,eN.tx)("whiteboard.paywall_upsell.team.main.first"))});case"seen_fj_upsell_team_modal_2":return(0,eN.tx)("whiteboard.paywall_upsell.team.main",{fileCount:evq((0,eN.tx)("whiteboard.paywall_upsell.team.main.second"))});case"seen_fj_upsell_team_modal_3":return(0,eN.tx)("whiteboard.paywall_upsell.team.last.main",{purpleSection:evq((0,eN.tx)("whiteboard.paywall_upsell.team.last.main.purpleSection"))});default:return f.createElement(f.Fragment,null)}}function evY(e){switch(e){case"seen_fj_upsell_draft_modal_1":return(0,eN.tx)("whiteboard.paywall_upsell.draft.first.secondary");case"seen_fj_upsell_draft_modal_2":return(0,eN.tx)("whiteboard.paywall_upsell.draft.second.secondary");case"seen_fj_upsell_draft_modal_3":return(0,eN.tx)("whiteboard.paywall_upsell.draft.third.secondary");case"seen_fj_upsell_team_modal_1":case"seen_fj_upsell_team_modal_2":case"seen_fj_upsell_team_modal_3":return(0,eN.tx)("whiteboard.paywall_upsell.team.secondary");default:return f.createElement(f.Fragment,null)}}function evX(e){switch(e){case"seen_fj_upsell_draft_modal_1":return f.createElement("img",{src:"https://static.figma.com/uploads/2e5f8efd83d4a5faea78203c9c6d306d0d0b862b",alt:"stamping a sticky animation"});case"seen_fj_upsell_draft_modal_2":return f.createElement("img",{src:"https://static.figma.com/uploads/7909d41489939d9259567eeb734d887eb67b95fc",alt:"voting wheel animation"});case"seen_fj_upsell_draft_modal_3":return f.createElement("img",{src:"https://static.figma.com/uploads/c490e715dcc620fce0cff9c6cd11936b30dbe1bd",alt:"audio call animation"});case"seen_fj_upsell_team_modal_1":return f.createElement("img",{src:"https://static.figma.com/uploads/fecccf2b6ed6c72a5269dea45f2f713bdef5b0cb",alt:"one file used animation"});case"seen_fj_upsell_team_modal_2":return f.createElement("img",{src:"https://static.figma.com/uploads/1623cd399db275cf37f3360fbf774696660cd7e6",alt:"two files used animation"});case"seen_fj_upsell_team_modal_3":return f.createElement("img",{src:"https://static.figma.com/uploads/cb781eb3d9a927a0bce7e246f2f8614e47d5ee1c",alt:"third file used animation"})}}function evq(e){return f.createElement("span",{className:"figjam_upsell_modal--purpleText--gZ21M"},e)}function evZ(){let e=(0,_.d4)(e=>e.multiplayerEmoji),t=(0,eb.p8)("showUi"),n=(0,eb.p8)("topLevelMode"),a=(0,eb.p8)("currentTool")===l8.NLJ.COMMENTS,l=n===l8.lyf.HISTORY,r=!(0,B.q8)()&&(0,uK.Uy)();return f.createElement(f.Fragment,null,f.createElement(evU,null),f.createElement(evv.S4,{multiplayerEmoji:e}),!(0,y.kc)().figjam_generate_handbrake&&r&&!l&&f.createElement(tf.AU,null),r&&f.createElement(tf.Ic,null),(0,y.kc)().figjam_mindmaps_behavior_enable&&f.createElement(tf.Eu,null),!a&&!l&&f.createElement(tf.Me,null),!a&&!l&&f.createElement(tf.fJ,null),f.createElement(bF,null),f.createElement(evE,null),f.createElement(hr.Nz,null),f.createElement(tf.q,null),t&&f.createElement(evK,null))}let evQ=f.memo(({shouldShowDragAndDropBorder:e})=>{var t;let n=(0,eb.p8)("isReadOnly"),a=(0,_.d4)(e=>e.progressBarState),l=(0,eb.p8)("loadingEmbeds"),r=(0,aN.ut)(null==(t=ei.Ez5)?void 0:t.uiState().showCanvasSearch,!1),i=(0,eb.aV)(),o=(0,f.useRef)(null),s=(0,_.d4)(e=>e.openFile),c=s?s.key:"",d=(0,_.d4)(e=>e.universalInsertModal),u=(0,_.d4)(e=>e),m=(0,_.wA)();return(0,W.Gb)(c),f.createElement(f.Fragment,null,f.createElement(emQ,{versionHistoryEnabled:!1},!(C.Ay.isIpad||C.Ay.isIpadNative)&&!n&&f.createElement(tf.Eb,null),a.mode!==l8.Oin.OFF&&f.createElement("div",{className:emY._q}),f.createElement(bA.pO,{initialFilterState:{currentPage:!1}},l.map(e=>f.createElement(qm,{key:`loading-embed-${e}`,nodeId:e})),f.createElement(ZF,null),f.createElement(o7,null),r&&f.createElement(Qu,null),f.createElement(qr,null),f.createElement(ql,null),f.createElement(rZ,null),f.createElement(tf.Pn,null),f.createElement(ZK,{commentsDetailContainerRef:o}),f.createElement(evZ,null),f.createElement("div",{ref:o}),f.createElement(Zz,null),f.createElement(X0,null),e&&f.createElement(hr.X5,null)),f.createElement(y9,{isFigjamEditor:!0,isDesignEditor:!1,openFile:s}),d.showing&&f.createElement(l7.tH,{boundaryKey:"FigJamBrowseAllResourcesModal",onError:()=>{m(eS.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(evi,null)),!i&&(0,evw.h)(u)&&f.createElement(evC,null)),f.createElement(tf.Qf,null),f.createElement(tf.Ru,null),f.createElement(bN,null))}),ev$=f.memo(({shouldShowDragAndDropBorder:e})=>{let t=(0,_.d4)(e=>e.progressBarState),n=(0,eb.p8)("loadingEmbeds"),a=(0,f.useRef)(null),l=(0,_.d4)(e=>e.openFile),r=l?l.key:"",i=(0,eb.p8)("showUi"),o=(0,nS.R)(),s=(0,_.d4)(e=>e.universalInsertModal),c=(0,_.wA)();return(0,W.Gb)(r),f.createElement(f.Fragment,null,f.createElement(emQ,null,t.mode!==l8.Oin.OFF&&f.createElement("div",{className:emY._q}),f.createElement(bA.pO,{initialFilterState:{currentPage:!1}},n.map(e=>f.createElement(qm,{key:`loading-embed-${e}`,nodeId:e})),f.createElement(ZF,null),f.createElement(o7,null),f.createElement(qr,null),f.createElement(ql,null),f.createElement(rZ,null),f.createElement(ZK,{commentsDetailContainerRef:a}),f.createElement(Z8,null),f.createElement(bF,null),f.createElement(hr.Nz,null),f.createElement("div",{ref:a}),f.createElement(Zz,null),f.createElement(X0,null),e&&f.createElement(hr.X5,null)),f.createElement(y9,{isFigjamEditor:!1,isDesignEditor:!1,openFile:l}),s.showing&&f.createElement(l7.tH,{boundaryKey:"FdBrowseResourceModal",onError:()=>{c(eS.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(is,null))),o&&i&&f.createElement(l6,null),f.createElement(bN,null))});var ev0=n(829816),ev1=n(979232),ev2=n(129792),ev5=n(133737),ev4=n(654164);let ev3=(0,lf.jz)(lw.M$q);function ev6({slideId:e,initializeSpeakerNotesForSlide:t,isEditable:n}){let[a]=(0,ev1.useLexicalComposerContext)();return f.useEffect(()=>{let e=a.registerEditableListener(e=>{e!==n&&(0,o2.x1)(o5.e.SLIDES,"lexical_editor_editable_mismatch",{expectedIsEditable:n,actualIsEditable:e})});return()=>{e()}},[a,n]),f.useEffect(()=>{let n=t(e);a.setEditorState(a.parseEditorState(n||ev4.D))},[e,t,a]),null}function ev7({slideId:e}){let[t]=(0,ev1.useLexicalComposerContext)(),[n,a]=f.useState(()=>t.getRootElement()===document.activeElement);f.useLayoutEffect(()=>(a(t.getRootElement()===document.activeElement),(0,ev2.mergeRegister)(t.registerCommand(ev5.FOCUS_COMMAND,()=>(a(!0),!0),ev5.COMMAND_PRIORITY_EDITOR),t.registerCommand(ev5.BLUR_COMMAND,()=>(a(!1),et.Y5.commit(),!0),ev5.COMMAND_PRIORITY_EDITOR))),[t]);let l=(0,cp.Fk)((e,t)=>{let n=e.get(t);return n?n.slideSpeakerNotes:""},e)||ev4.D;return f.useEffect(()=>{l&&l!==JSON.stringify(t.getEditorState().toJSON())&&(t.setEditorState(t.parseEditorState(l)),n&&t.blur())},[l,t,n]),null}function ev8({slideId:e,isEditable:t}){let n=(0,tM.dP)(),a=(0,tM.qw)(),l=(0,tt.xn)(),r=(0,EO.Ye)(),i=(0,aN.J2)(ei.Ez5.editorPreferences().speakerNotesHeight),o=ei.Ez5.singleSlideView().slideInitialViewPaddingViewport(),s=ei.Ez5.singleSlideView().speakerNotesDragHandlePadding(),c=ei.Ez5.singleSlideView().speakerNotesDragHandleHeight(),d=ei.Ez5.singleSlideView().bottomToolbeltHeightInViewport(),[u,m]=(0,f.useState)(0===i),[p,_]=(0,f.useState)(!1),g=e=>Math.max(0,Math.min(window.innerHeight-l-e-d-s-c/2,400)),h=()=>{m(!0),ei.Ez5.editorPreferences().speakerNotesHeight.set(0)},E=e=>{m(!1),ei.Ez5.editorPreferences().speakerNotesHeight.set(e)},[v,y]=(0,ev0.i)({onDragEnd(e){let t=10>Math.abs(e.delta.y),n=g(e.clientY);n>30?E(Math.max(n,60)):t?E(ei.Ez5.singleSlideView().initialSpeakerNotesHeightInViewport()):h()},onDrag(e){let t=g(e.clientY);ei.Ez5.editorPreferences().speakerNotesHeight.set(t),p&&t>30&&m(!1)},onDragStart(){_(u)}}),b=(0,eb.p8)("showUi"),C=(0,eb.aV)();return f.createElement("div",{className:a8.cx.flex.flexColumn.itemsCenter.absolute.bottom0.borderBox.$,style:{paddingLeft:(r?0:n)+ev3,paddingRight:a+ev3,paddingBottom:`${d}px`,width:"100vw",visibility:b&&!C?"visible":"hidden"}},f.createElement("div",{...y({className:nb()({"speaker_notes_overlay--dragHandleContainer--7VUGa":!0,[a8.cx.wFull.flex.justifyCenter.zIndex1.$]:!0,"speaker_notes_overlay--hiddenDragHandleHoverTarget--gUtvC":u}),style:{...dA.sx.add({padding:`${s}px`,cursor:v||!u?"row-resize":"pointer"}).$}})},f.createElement("div",{className:nb()("speaker_notes_overlay--dragHandle--ILwHe"),style:{height:`${c}px`}},f.createElement("div",{className:"speaker_notes_overlay--dragHandleHoverOverlay--jNQh3"},f.createElement("p",{className:"speaker_notes_overlay--dragHandleText--kGSNu"},(0,eN.t)("slides.toolbar.show_presenter_notes"))))),f.createElement("div",{className:nb()(a8.cx.relative.wFull.borderBox.$,nz.Dm),style:{...dA.sx.add({padding:`0px ${o}px`,height:`${i}px`}).$}},f.createElement(i6.P,{className:"speaker_notes_overlay--inputWrapper--ufx4l text--fontPos13--xW8hS text--_fontBase--QdLsd",innerClassName:"speaker_notes_overlay--inputWrapperFullHeight--T0Ngw"},f.createElement("div",{className:"speaker_notes_overlay--inputWrapperInner--nbKDe"},f.createElement(ev9,{slideId:e,isEditable:t,placeholderTop:20,placeholderLeft:20})))))}function ev9({slideId:e,isEditable:t,placeholderTop:n,placeholderLeft:a}){let l=(0,af.tS)()||"",r=f.useCallback(t=>{let n=lE.q.instance.get(e);if(n)try{n.slideSpeakerNotes=t}catch(e){(0,o2.x1)(o5.e.SLIDES,"Failed to set slide speaker notes",{error:e})}},[e]);function i(e){let t=lE.q.instance.get(e);return(null==t?void 0:t.slideSpeakerNotes)||""}return f.createElement(ev4.s,{key:`${e}-${t}`,namespace:"SpeakerNotesEditor",initialSpeakerNotesData:i(e),onEdit:function(t){let n=t.toJSON();o4.l7.user("set-slide-speaker-notes",()=>{r(JSON.stringify(n))}),Z.az.trackDefinedEvent("slides.presentation_mode.speaker_notes_inserted",{slideId:e,fileKey:l,productType:"slides"})},isEditable:!!t,placeholder:f.createElement(eye,{isEditable:!!t,top:n,left:a})},f.createElement(ev6,{slideId:e,initializeSpeakerNotesForSlide:i,isEditable:!!t}),f.createElement(ev7,{slideId:e}))}function eye({isEditable:e,top:t,left:n}){return f.createElement("div",{className:"speaker_notes_overlay--placeholder--8XzW-",style:{top:t,left:n}},e?(0,eN.t)("fullscreen_actions.slides-speaker-notes-placeholder"):(0,eN.t)("fullscreen_actions.slides-speaker-notes-no-notes-placeholder"))}function eyt(){let e=(0,EK.Jj)(),t=(0,aN.J2)(ei.Ez5.singleSlideView().isInSingleSlideView),n=(0,_.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.isReadOnly});return(0,f.useMemo)(()=>t?f.createElement(ev8,{slideId:e,isEditable:!n}):null,[t,e,n])}function eyn(){let{openFile:e,fileVersion:t,loadingState:n,universalInsertModal:a}=(0,N.R)(e=>({openFile:e.openFile,fileVersion:e.fileVersion,loadingState:e.loadingState,universalInsertModal:e.universalInsertModal})),{searchQuery:l,setSearchQuery:r,currentTab:i,setCurrentTab:o,debouncedSearchQuery:s,setPreviewResourceAndTrack:c}=eEW(),[d,m]=f.useState(a.initialSelectedCategory??u);f.useEffect(()=>{u=d},[d]),f.useEffect(()=>{a.initialSearch&&r(a.initialSearch)},[a.initialSearch,r]);let p=(0,_.wA)(),g=aW.b,h=f.useMemo(()=>({kind:"buttonTarget",buttonTarget:g}),[g]),{initialModalPosition:E,modalPosition:v,setModalPosition:y}=(0,ax.ts)(h,ax.zo,ax.gR),{bounds:b,showLeftPinBound:C,setShowLeftPinBound:w,shouldSnapToPosition:T,setPinned:x}=it(eya,y,a.pinned,efH.t$,E,a.showing),S=f.useRef(null),k=f.useRef(null);f.useEffect(()=>{p(OA.cr({shouldSearchDefaultLibraries:!0}))},[p]);let I=e&&t&&(0,mV.Sc)(n,(0,PK.yD)(e.key));return f.useEffect(()=>{I&&p(OA.zK({}))},[p,I]),f.useEffect(()=>{var e;"function"==typeof(null==(e=k.current)?void 0:e.scroll)&&k.current.scroll({top:0,behavior:"smooth"})},[s]),f.createElement(efH.Td.Provider,{value:{setPreviewResource:c,currentTab:i,setCurrentTab:o,setSelectedCategory:m,searchQuery:l}},f.createElement(ehj,{hasSearchBar:!0,searchQuery:l,searchPlaceholder:(0,eN.t)("design_systems.assets_panel.search"),setSearchQuery:r,categoryViewContent:d?f.createElement(e_p,{selectedLibrary:d,setSelectedLibrary:m}):null,categoryViewHeader:function(){if(d)return f.createElement(ehJ,{selectedCategory:d,goBack:()=>{m(void 0)},setPinned:x})}(),shouldHideTabs:!0,setPinned:x,initialModalPosition:E,modalPosition:v,shouldHideBottomArrow:!0,bounds:b,showLeftPinBound:C,setShowLeftPinBound:w,shouldSnapToPosition:T,entryPointId:g,categoryScrollContainerRef:S,mainScrollContainerRef:k},f.createElement(e_m,{query:l,recentlyUsedItemsKey:EI.$A.Slides,hideRecentsIfEmpty:!0})))}function eya(){return{x:-ax.gR,y:0,width:2*ax.gR+efH.wR,height:window.innerHeight}}function eyl(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M3 9c0 1.521.566 2.91 1.5 3.968a5.987 5.987 0 0 0 4 2.011.47.47 0 0 0 .5-.479.536.536 0 0 0-.49-.524H8.5a4.988 4.988 0 0 1-3.218-1.632A5 5 0 1 1 13.975 8.5l.001.008a.56.56 0 0 0 .013.073A.536.536 0 0 0 14.5 9a.47.47 0 0 0 .48-.5 5.987 5.987 0 0 0-2.012-4A6 6 0 0 0 3 9Zm9 2h7a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-7a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1Zm-2 1a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2v-7Z",clipRule:"evenodd"}))}function eyr(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M4 14v-4h5v4H4Zm-1 1V6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-3Zm1-6h5V5H5a1 1 0 0 0-1 1v3Zm6-4v4h10V6a1 1 0 0 0-1-1h-9Zm10 5H10v4h10v-4Zm0 5H10v4h9a1 1 0 0 0 1-1v-3ZM9 19H5a1 1 0 0 1-1-1v-3h5v4Z",clipRule:"evenodd"}))}function eyi(e){return f.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},f.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"square",d:"M12 9.5a1.5 1.5 0 0 0-1.5 1.5v3.966a.098.098 0 0 1-.162.042l-.787-.774a1.5 1.5 0 1 0-2.103 2.14l.737.723c.697.683 1.47 1.441 2.028 2 .61.609 1.669 1.128 2.899 1.322a6.617 6.617 0 0 0 4.12-.676c1.137-.596 1.723-1.422 2.01-2.263.275-.809.265-1.612.259-2.158V15.3a64.993 64.993 0 0 0-.003-.22L19.5 15v-1a1.5 1.5 0 0 0-3-.005V13a1.5 1.5 0 1 0-3 0v1.376h0V11A1.5 1.5 0 0 0 12 9.5Z"}),f.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M5 11a7 7 0 0 1 13.929-1.004.5.5 0 1 0 .99-.142 8.002 8.002 0 1 0-15.643 3.238.5.5 0 1 0 .966-.26A7.01 7.01 0 0 1 5 11Zm3 0a4 4 0 0 1 7.631-1.68.5.5 0 1 0 .907-.421A5 5 0 0 0 7 11a.5.5 0 0 0 1 0Z",clipRule:"evenodd"}))}let eyo="slides_toolbelt--svgWrapper--QfseS",eys="slides_toolbelt--full--fYqiW";var eyc=n(435651),eyd=n(319782),eyu=n(944752),eym=n(146820),eyp=n(447757),eyf=n(860867);let ey_=(0,lf.jz)(lw.j4N),eyg="QUICK_ACTIONS";var eyh=(e=>(e.SelectTools="Slides-SelectTools",e.ShapeTools="Slides-ShapeTools",e))(eyh||{}),eyE=(e=>(e.None="None",e.PenTool="PenTool",e.ImageOrVideoTool="ImageOrVideoTool",e))(eyE||{});let eyv="EMBED_INSERT",eyy="SHAPE_INSERT";function eyb(e){switch(e){case ei.NLJ.SELECT:return"set-tool-default";case ei.NLJ.SCALE:return"set-tool-scale";case ei.NLJ.HAND:return"set-tool-hand";case ei.NLJ.TYPE:return"set-tool-type";case ei.NLJ.IMAGE_OR_VIDEO:return"place";case ei.NLJ.SLIDES_POLL:return"set-tool-slides-poll";case ei.NLJ.SLIDES_EMBED:return"set-tool-slides-embed";case ei.NLJ.SLIDES_FACEPILE:return"set-tool-slides-facepile";case ei.NLJ.SLIDES_ALIGNMENT_SCALE:return"set-tool-slides-alignment-scale";case ei.NLJ.TABLE:return"set-tool-table";case ei.NLJ.COMMENTS:return"set-tool-comments";case ei.NLJ.FRAME:return"set-tool-frame";case ei.NLJ.SHAPE_STAR:return"set-tool-star";case ei.NLJ.SHAPE_REGULAR_POLYGON:return"set-tool-regular-polygon";case ei.NLJ.SHAPE_ELLIPSE:return"set-tool-ellipse";case ei.NLJ.SHAPE_ARROW:return"set-tool-arrow";case ei.NLJ.SHAPE_LINE:return"set-tool-line";case ei.NLJ.SHAPE_RECTANGLE:return"set-tool-rectangle";case ei.NLJ.SHAPE_WHITEBOARD_SPEECH_BUBBLE:return"set-tool-shape-whiteboard-speech-bubble";case ei.NLJ.SHAPE_WHITEBOARD_PLUS:return"set-tool-shape-whiteboard-plus";case ei.NLJ.SHAPE_WHITEBOARD_STAR:return"set-tool-shape-whiteboard-star";case ei.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP:return"set-tool-shape-whiteboard-triangle-up";case ei.NLJ.SHAPE_WHITEBOARD_TRIANGLE_DOWN:return"set-tool-shape-whiteboard-triangle-down";case ei.NLJ.SHAPE_WHITEBOARD_DIAMOND:return"set-tool-shape-whiteboard-diamond";case ei.NLJ.SHAPE_WHITEBOARD_ELLIPSE:return"set-tool-shape-whiteboard-ellipse";case ei.NLJ.SHAPE_WHITEBOARD_SQUARE:return"set-tool-shape-whiteboard-square";case ei.NLJ.SHAPE_WHITEBOARD_ARROW_LEFT:return"set-tool-shape-whiteboard-arrow-left";case ei.NLJ.SHAPE_WHITEBOARD_ARROW_RIGHT:return"set-tool-shape-whiteboard-arrow-right";case ei.NLJ.CONNECTOR_STRAIGHT:return"set-tool-connector-straight";case ei.NLJ.CONNECTOR_ELBOWED:return"set-tool-connector-elbowed";case ei.NLJ.VECTOR_PENCIL:return"set-tool-pencil";case ei.NLJ.VECTOR_PEN:return"set-tool-pen";default:return"set-tool-default";case ei.NLJ.VECTOR_BEND:return"set-tool-bend";case ei.NLJ.VECTOR_PAINT_BUCKET:return"set-tool-paint-bucket"}}let eyC=e=>{aC.VU.get(e,"toolbar")()},eyw=()=>{let e=(0,_.d4)(e=>e.mirror.appModel.keyboardShortcuts);return(0,f.useCallback)(t=>(0,tl.c1)(e,t),[e])},eyT=()=>{let e=eyw();return(0,f.useCallback)(t=>e(eyb(t)),[e])},eyx=(0,e3.bt)(e=>e.dropdownShown),eyN=(0,e3.bt)(e=>e.mirror.appModel.topLevelMode),eyS=(0,e3.bt)(e=>e.mirror.appModel.activeCanvasEditModeType),eyk={readOnlyOverlayInfoAtom:eyx,activeToolIdAtom:(0,e4.eU)(e=>e(aB.Kh),(e,t,n)=>{let a=eyb(n);aC.VU.get(a,"toolbar")()}),readOnlyTopLevelModeAtom:eyN,readOnlyEditModeTypeAtom:eyS};function eyI({getShortcutTextForTool:e,activeToolId:t,activateTool:n,topLevelMode:a,editModeType:l,areAnyShapesActive:r}){var i;let o=(0,aN.J2)(null==(i=ei.Ez5)?void 0:i.slidesToolMode()),s=(0,eb.aV)(),c=a===ei.lyf.HISTORY,d=S.zl.get(aB.o6),[u,m]=(0,f.useState)("None"),p=f.useRef(null);return(aJ(p),(0,f.useEffect)(()=>{t!==ei.NLJ.VECTOR_BEND&&t!==ei.NLJ.VECTOR_PAINT_BUCKET&&(l===ei.m1T.VECTOR?m("PenTool"):t===ei.NLJ.IMAGE_OR_VIDEO?m("ImageOrVideoTool"):m("None"))},[t,l]),s)?null:f.createElement("div",{className:lU,ref:p,"data-onboarding-key":aD.hx},f.createElement(nj,null,f.createElement(eyA,{activateTool:n,topLevelMode:a,areAnyShapesActive:r}),!d&&!c&&f.createElement(aK,{recordingKey:o===ei.EMA.SLIDES?"design-tool-mode-toggle":"slides-tool-mode-toggle"})),f.createElement(nH,{onActivateTool:n}),"PenTool"===u&&l===ei.m1T.VECTOR&&f.createElement(lB,{activeToolId:t,activateTool:n,getShortcutTextForTool:e,closeSecondaryToolbelt:()=>{m("None"),eyC("leave-edit-mode")}}))}function eyA(e){let t=(0,vo.FS)(),n=f.useMemo(()=>[f.createElement(eyO,{activateTool:e.activateTool,topLevelMode:e.topLevelMode,areAnyShapesActive:e.areAnyShapesActive,key:ei.EMA.SLIDES}),f.createElement(l3,{key:ei.EMA.DESIGN,activateTool:e.activateTool,topLevelMode:e.topLevelMode,suppressRecordingKeys:t})],[t,e.activateTool,e.topLevelMode,e.areAnyShapesActive]);return f.createElement(n1,{rows:n,activeRowIndex:t?0:1})}function eyO(e){let{activateTool:t,topLevelMode:n}=e,a=(0,ay.n6)(),l=S.zl.get(aB.o6),r=n===ei.lyf.HISTORY,{activeToolId:i,dropdownShown:o,openOverlay:s,closeOpenOverlay:c}=nA(eyk),d=(0,S.md)(aU.Xw),u=(0,S.md)(aH.Pk),m=(0,_.d4)(e=>e.universalInsertModal.showing),p=(0,S.md)(aj.Bu),g=(0,aO.II)(),h=eyT(),E=eyw(),v=e=>{aC.VU.get(e,"toolbar")()};return f.createElement(n0,null,(l||r)&&f.createElement(f.Fragment,null,f.createElement(nh,{toolId:ei.NLJ.SELECT,icon:f.createElement(tF,null),onActivateTool:t,activeToolId:i,tooltipText:(0,eN.t)("fullscreen_actions.set-tool-default"),tooltipShortcut:h(ei.NLJ.SELECT)}),f.createElement(nh,{toolId:ei.NLJ.HAND,icon:f.createElement(tU,null),onActivateTool:t,activeToolId:i,tooltipText:(0,eN.t)("fullscreen_actions.set-tool-hand"),tooltipShortcut:h(ei.NLJ.HAND)})),!l&&!r&&f.createElement(f.Fragment,null,f.createElement(nF,{overlayId:"Slides-SelectTools",tooltipText:(0,eN.t)("fullscreen.flyout.move_tools"),items:[{type:nk.Tool,toolId:ei.NLJ.SELECT,text:(0,eN.t)("fullscreen_actions.set-tool-default"),shortcutText:h(ei.NLJ.SELECT),icon:f.createElement(tF,null),smallIcon:f.createElement(tB.y,null),recordingKey:"move-tool"},{type:nk.Tool,toolId:ei.NLJ.HAND,text:(0,eN.t)("fullscreen_actions.set-tool-hand"),shortcutText:h(ei.NLJ.HAND),icon:f.createElement(tU,null),smallIcon:f.createElement(tH.O,null),recordingKey:"hand-tool"},{type:nk.Tool,toolId:ei.NLJ.SCALE,text:(0,eN.t)("fullscreen_actions.set-tool-scale"),shortcutText:h(ei.NLJ.SCALE),icon:f.createElement(tG,null),smallIcon:f.createElement(tV.l,null),recordingKey:"scale-tool"}],dropdownShown:o,onOpen:s,onClose:c,activeToolId:i,onActivateTool:t,recordingKey:"select-tool-group"}),f.createElement(nh,{toolId:ei.NLJ.TYPE,icon:f.createElement(nr,null),onActivateTool:t,activeToolId:i,tooltipText:(0,eN.t)("fullscreen_actions.set-tool-type"),tooltipShortcut:h(ei.NLJ.TYPE),recordingKey:"text-tool"}),f.createElement(nh,{toolId:ei.NLJ.IMAGE_OR_VIDEO,icon:f.createElement(t8.T,null),onActivateTool:t,activeToolId:i,tooltipText:(0,eN.t)("slides.inserts_menu.image_video"),recordingKey:"media-tool"}),f.createElement("div",{"data-element-target":aH.zF},f.createElement(nh,{toolId:eyy,icon:f.createElement(eyl,null),onActivateTool:()=>v("toggle-slides-shape-insert"),activeToolId:u||e.areAnyShapesActive?eyy:i,tooltipText:(0,eN.t)("slides.inserts_menu.shapes"),recordingKey:"slides-shape-tool"})),f.createElement(nh,{toolId:ei.NLJ.TABLE,icon:f.createElement(eyr,null),onActivateTool:t,activeToolId:i,tooltipText:(0,eN.t)("fullscreen_actions.set-tool-table"),recordingKey:"table-tool"}),f.createElement("div",{"data-element-target":aU.RS},f.createElement(nh,{toolId:eyv,icon:f.createElement(eyi,null),onActivateTool:()=>v("toggle-slides-embed-insert"),activeToolId:d?eyv:i,tooltipText:(0,eN.t)("slides.inserts_menu.interaction"),recordingKey:"flapp-tool"}))),!r&&f.createElement(nh,{toolId:ei.NLJ.COMMENTS,icon:a>0?f.createElement("div",{className:i===ei.NLJ.COMMENTS?"design_toolbelt--activeComment--wIom6":void 0},f.createElement(ns,null)):f.createElement(nc.f,null),onActivateTool:t,activeToolId:i,tooltipText:(0,eN.t)("fullscreen_actions.comment"),tooltipShortcut:h(ei.NLJ.COMMENTS),recordingKey:"comments-tool"}),!l&&!r&&g&&f.createElement(nh,{toolId:eyg,icon:f.createElement(aZ,null),onActivateTool:()=>v("toggle-menu"),activeToolId:p?eyg:i,tooltipText:(0,eN.t)("qa.extensions.tooltip_actions"),tooltipShortcut:E("toggle-menu")}),l||r?null:f.createElement("div",{"data-element-target":aW.b},f.createElement(nJ,{icon:f.createElement(nu.e,null),onAction:()=>v("browse-all-resources-modal"),isActive:m,tooltipText:(0,eN.t)("slides.inserts_menu.assets"),tooltipShortcut:E("browse-all-resources-modal"),recordingKey:"assets-tool"})),l&&f.createElement(nJ,{icon:f.createElement("div",null,f.createElement(a$.RJ,{viewOnly:l,variant:"primary"}),f.createElement("div",{className:lH},f.createElement(n5.$,{variant:"primary"},(0,eN.tx)("fullscreen.toolbar.request.request_sent")))),tooltipText:"",onAction:nf.lQ}))}function eyL(){var e;let t=(0,aN.J2)(null==(e=ei.Ez5)?void 0:e.slidesToolMode()),n=(0,S.md)(aU.Xw),a=(0,S.md)(aH.Pk),l=eyT(),{activeToolId:r,activateTool:i,topLevelMode:o,editModeType:s}=nA(eyk),c=(0,f.useMemo)(()=>(function(e){let t=[{toolId:ei.NLJ.SHAPE_WHITEBOARD_SQUARE,text:(0,eN.t)("fullscreen_actions.set-tool-rectangle"),shortcutText:e(ei.NLJ.SHAPE_WHITEBOARD_SQUARE),icon:f.createElement(tq,null)},{toolId:ei.NLJ.SHAPE_WHITEBOARD_ELLIPSE,shortcutText:e(ei.NLJ.SHAPE_WHITEBOARD_ELLIPSE),text:(0,eN.t)("fullscreen_actions.set-tool-shape-whiteboard-ellipse"),icon:f.createElement(t2,null)},{toolId:ei.NLJ.SHAPE_WHITEBOARD_DIAMOND,shortcutText:e(ei.NLJ.SHAPE_WHITEBOARD_DIAMOND),text:(0,eN.t)("fullscreen_actions.set-tool-shape-whiteboard-diamond"),icon:f.createElement(a2.B,{className:eyo,svg:eyu.A})},{toolId:ei.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,shortcutText:e(ei.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP),text:(0,eN.t)("fullscreen_actions.set-tool-shape-slides-triangle-up"),icon:f.createElement(t4,null)},{toolId:ei.NLJ.SHAPE_WHITEBOARD_STAR,shortcutText:e(ei.NLJ.SHAPE_WHITEBOARD_STAR),text:(0,eN.t)("fullscreen_actions.set-tool-shape-whiteboard-star"),icon:f.createElement(t6,null)},{toolId:ei.NLJ.SHAPE_WHITEBOARD_PLUS,shortcutText:e(ei.NLJ.SHAPE_WHITEBOARD_PLUS),text:(0,eN.t)("fullscreen_actions.set-tool-shape-whiteboard-plus"),icon:f.createElement(a2.B,{className:eyo,svg:eym.A})},{toolId:ei.NLJ.SHAPE_WHITEBOARD_ARROW_LEFT,shortcutText:e(ei.NLJ.SHAPE_WHITEBOARD_ARROW_LEFT),text:(0,eN.t)("fullscreen_actions.set-tool-shape-whiteboard-arrow-left"),icon:f.createElement(a2.B,{className:eyo,svg:eyc.A})},{toolId:ei.NLJ.SHAPE_WHITEBOARD_ARROW_RIGHT,shortcutText:e(ei.NLJ.SHAPE_WHITEBOARD_ARROW_RIGHT),text:(0,eN.t)("fullscreen_actions.set-tool-shape-whiteboard-arrow-right"),icon:f.createElement(a2.B,{className:eyo,svg:eyd.A})},{toolId:ei.NLJ.SHAPE_WHITEBOARD_SPEECH_BUBBLE,shortcutText:e(ei.NLJ.SHAPE_WHITEBOARD_SPEECH_BUBBLE),text:(0,eN.t)("fullscreen_actions.set-tool-shape-slides-blurb"),icon:f.createElement(a2.B,{className:nb()(eyo,eys),svg:eyp.A})},{toolId:ei.NLJ.SHAPE_LINE,shortcutText:e(ei.NLJ.SHAPE_LINE),text:(0,eN.t)("fullscreen_actions.set-tool-line"),icon:f.createElement(tQ,null)},{toolId:ei.NLJ.SHAPE_ARROW,shortcutText:e(ei.NLJ.SHAPE_ARROW),text:(0,eN.t)("fullscreen_actions.set-tool-arrow"),icon:f.createElement(t0,null)}];return(0,y.kc)().piper_connectors&&t.push({toolId:ei.NLJ.CONNECTOR_ELBOWED,shortcutText:e(ei.NLJ.CONNECTOR_ELBOWED),text:(0,eN.t)("fullscreen_actions.set-tool-connector-elbowed"),icon:f.createElement(a2.B,{className:nb()(eyo,eys),svg:eyf.A})}),t})(l),[l]),d=c.some(e=>e.toolId===r);return f.createElement(f.Fragment,null,f.createElement(eyP,{editorTheme:t===ei.EMA.SLIDES?"piper":"design"},f.createElement(eyI,{getShortcutTextForTool:l,activeToolId:r,activateTool:i,topLevelMode:o,editModeType:s,areAnyShapesActive:d})),n&&f.createElement(aU.cR,null),a&&f.createElement(aH.Ix,{activateTool:i,activeToolId:r,areAnyShapesActive:d,shapes:c}))}function eyP({children:e,editorTheme:t}){let n=(0,tt.xn)();return f.createElement("div",{className:nb()(nz.Dm,a8.cx.fixed.flex.justifyCenter.eventsNone.$),style:{marginBottom:n,left:0,right:0,zIndex:8,bottom:ey_},"data-editor-theme":t},e)}let eyD=f.memo(({shouldShowDragAndDropBorder:e})=>{var t;let n=(0,_.d4)(e=>e.progressBarState),a=(0,eb.p8)("loadingEmbeds"),l=(0,aN.ut)(null==(t=ei.Ez5)?void 0:t.uiState().showCanvasSearch,!1),r=(0,l9.Lk)(),i=(0,f.useRef)(null),o=(0,_.d4)(e=>e.openFile),s=o?o.key:"",c=(0,eb.p8)("showUi"),d=(0,_.d4)(e=>e.universalInsertModal),u=(0,_.wA)();return(0,W.Gb)(s),f.createElement(f.Fragment,null,f.createElement(emQ,null,c&&f.createElement(eyL,null),n.mode!==l8.Oin.OFF&&f.createElement("div",{className:emY._q}),f.createElement(bA.pO,{initialFilterState:{currentPage:!1}},a.map(e=>f.createElement(qm,{key:`loading-embed-${e}`,nodeId:e})),f.createElement(ZF,null),f.createElement(o7,null),l&&f.createElement(Qu,null),f.createElement(qr,null),f.createElement(ql,null),f.createElement(rZ,null),f.createElement(eyt,null),f.createElement(ZK,{commentsDetailContainerRef:i}),f.createElement(hr.Nz,null),f.createElement(bF,null),f.createElement("div",{ref:i}),f.createElement(Zz,null),f.createElement(X0,null),e&&f.createElement(hr.X5,null)),f.createElement(y9,{isFigjamEditor:!1,isDesignEditor:!1,openFile:o}),d.showing&&f.createElement(l7.tH,{boundaryKey:"FigJamBrowseAllResourcesModal",onError:()=>{u(eS.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(eyn,null))),r&&f.createElement(Qt,{className:emY.PA},f.createElement(oZ,null)),f.createElement(bN,null))});var eyR=n(840083),eyM=n(315329),eyF=n(354235);function eyB(){return(0,eyM.o)(),f.createElement(f.Fragment,null)}function eyU(){return(0,es.co)(),null}function eyH(e){var t;let n=(0,_.wA)(),a=(0,_.d4)(e=>e.showEditButton),l=(0,_.d4)(e=>e.fileByKey),r=(0,_.d4)(e=>e.userAnalyticsData),i=(0,_.d4)(e=>e.user),o=(0,_.d4)(e=>{var t;return null==(t=e.openFile)?void 0:t.canEdit}),s=(0,_.d4)(e=>null!=e.openFile),{fileKey:c,orgId:d}=e,u=null!=c&&!!(null==(t=l[c])?void 0:t.is_favorited),m=(0,eW.Rs)(eJ.jJU,{fileKey:c||""},{enabled:!!c});f.useEffect(()=>{var e;if("loaded"===m.status){let t=null==(e=m.data.file)?void 0:e.developerRelatedLinks,n=null==t?void 0:t.reduce((e,t)=>{let n=e.get(t.nodeId)??[];return n.push(t),e.set(t.nodeId,n),e},new Map);if(!n)return;try{ei.glU.setDeveloperRelatedLinks(n)}catch{}}},[m]);let p=f.useRef(!1),g=(0,e2.Xr)(tC.Kc),h=(0,eW.Rs)(eJ.JKh,{fileKey:c||""},{enabled:!!c});f.useLayoutEffect(()=>{if("loaded"!==h.status)return;let e=h.data.figFileWorkshopMode;g(e?e.expiresAt:null),e&&e.expiresAt>new Date&&(p.current=!0),n(tb.lX(e?{id:e.id,until:e.expiresAt,loaded:!0}:{loaded:!0}))},[h,n,g]);let E=f.useRef(null),v=f.useRef(!1),b=f.useRef(null),C=f.useRef(null),w=(0,eW.Rs)(eJ.ehp,{fileKey:c||""},{enabled:!!c});f.useLayoutEffect(()=>{var e,t;if("loaded"!==w.status)return;let l=w.data.file;if(null===E.current){let t=(0,y.Ay)().editing_file;null!==l&&t&&l.key===t.key&&!!t.can_edit!==l.canEdit&&((0,Z.sx)("open_file_inconsistent_permission",{file_key:l.key,lg_can_edit:l.canEdit,sinatra_can_edit:t.can_edit,user:null==(e=ET.D.getState().user)?void 0:e.id},{batchRequest:!0}),(0,esA.Rh)("open_file.inconsistent_permissions",{lg_can_edit:l.canEdit,sinatra_can_edit:t.can_edit}))}if(!function(e,t){let{openFile:n,wasInWorkshop:a,previousCanEdit:l,previousCanView:r,wasInUnclaimedTryFile:i,previousFileKey:o}=e;if(null==n){a||(ZW(),(0,qh.A7)((0,eN.t)("404.file_no_access.title"),t));return}let s=i&&!n.isTryFile;if((null!==l&&n.canEdit!==l||null!==r&&n.canView!==r)&&!s&&n.key===o){let e=new URLSearchParams(tg.Ay.location.search);e.set("perms-refresh","1"),tg.Ay.replace(`${tg.Ay.location.pathname}?${e.toString()}`,tg.Ay.location.state),tg.Ay.reload("file access changed")}}({openFile:l,wasInWorkshop:p.current,previousCanEdit:E.current,wasInUnclaimedTryFile:v.current,previousCanView:C.current,previousFileKey:(null==(t=b.current)?void 0:t.key)||null},n),null==l)return;C.current=l.canView,E.current=l.canEdit,p.current&&l.isTryFile&&(v.current=!0);let r=ET.D.getState().selectedView;"fullscreen"===r.view&&r.fileKey===(null==l?void 0:l.key)&&b.current!==l&&(n(K.UC({openFile:{...l,showEditButton:a,isFavorited:u}})),b.current=l)},[w,n,a,u,s]);let T=(0,e_.Be)();return f.useLayoutEffect(()=>{let e=ET.D.getState().selectedView;if(!T.loaded||"fullscreen"!==e.view)return;let{plugins:t,widgets:a,orgPlugins:l,orgWidgets:r}=(0,y.kc)().plugins_remove_fs_filter?T:(0,e_.cd)(T,{editorType:e.editorType}),i={...t,...l},o={...a,...r};n(edK.g3(i)),n(edK.zI(o))},[n,d,T]),(0,O5.rB)(),o&&(0,eyM.n)(r,null==i?void 0:i.email)?f.createElement(eyB,null):f.createElement(f.Fragment,null)}function eyG({children:e,setShouldShowDragAndDropBorder:t,onPointerDown:n=ZV,isDragTarget:a=!1}){var l;let r=(0,_.d4)(e=>e.modalShown),i=(0,Kh.T)(),o=((0,S.md)(Y8.h7),(0,aN.J2)(null==(l=ei.Ez5)?void 0:l.devHandoffState().focusMode)),s=(0,_.d4)(e=>e.openFile),c=s?s.key:"",d=(0,cC.dq)(),u=f.useRef(!1);return f.createElement(eyF.d,null,f.createElement(IJ.Y,{isDragTarget:()=>a,onTargetDragEnter:()=>{t(!0)},onTargetDragLeave:()=>{t(!1)},onTargetDrop:()=>{t(!1)}},f.createElement("div",{"aria-hidden":!!r,className:nb()(((0,aR.PN)(),emY.nP),i&&o&&emY.$J),onPointerDown:e=>{n(e,u)}},f.createElement(eyH,{fileKey:c||null,orgId:d}),e,f.createElement(eyR.G,null),f.createElement(eyU,null),!1,!1)))}function eyV(){let e=(0,y.b5)()?"https://www.notion.so/figma/UI3-Editor-Hub-76ca762f1cd54870b806251767808b06":"https://paper.dropbox.com/doc/Figma-Redesign-AI-Private-Beta-FAQ-Guide--CL4l1jSC5HUFFpLj6d4C~j8RAg-zRjmsnDB4XVwpMCPifjj6",t=(0,y.b5)()?"https://figma.slack.com/archives/C069V5CESM6":"https://a.sprig.com/WVd3eUN5R3lxZ35zaWQ6OTllM2VkMDUtY2UxYS00NjUxLTg0YzItNTdjYTZmZGZkNjhj";return f.createElement("div",{className:"ui3_confidentiality_banner--bannerButtonGroup--hJvTv"},f.createElement(ss.N,{href:e,target:"_blank",trusted:!0},f.createElement(n5.$,null,(0,eN.tx)("fullscreen.toolbar.ui3_confidentiality_banner.learn_more_button"))),f.createElement(ss.N,{href:t,target:"_blank",trusted:!0},f.createElement(n5.$,null,(0,eN.tx)("fullscreen.toolbar.ui3_confidentiality_banner.share_feedback_button"))))}let eyK="dismissed_ui3_confidentiality_banner_2024_04_26";function eyW(){let e="ui3"===(0,h.DP)().version,t=(0,eb.aV)(),n=(0,_.wA)(),a=(0,af.OG)(),l=!!(0,eT.f)(eyK),r=f.useCallback(()=>{l||n(j.b({[eyK]:!0}))},[l,n]),i=Date.now()<nX.rn.getTime();return l||t||!e||a||!i?f.createElement(f.Fragment,null):f.createElement(dm.C,{content:{id:dp.om.UI3ConfidentialityBanner,bannerType:dp.x1.CONFIDENTIALITY,mainText:(0,eN.t)("fullscreen.toolbar.ui3_confidentiality_banner.banner_header"),description:(0,eN.t)("fullscreen.toolbar.ui3_confidentiality_banner.banner_description"),button:{type:dp.MA.CUSTOM,element:f.createElement(eyV,null)},dismissible:!0},onDismiss:r,editorType:eq.nT.Design})}let eyz=f.memo(function(){var e,t,n,a,l,r,i,o;let s=(0,N.R)(emX),c=(0,ay.n6)(),d=(0,l9.Lk)(),u=(0,aN.ut)(null==(t=null==(e=ei.Ez5)?void 0:e.uiState())?void 0:t.showCanvasSearch,!1),m=!(0,B.q8)()&&(0,uK.Uy)(),p=(0,_.wA)(),g=(0,ew.TA)(),h=s.openFile?s.openFile.key:"";(0,ele.j)(h),(0,aq.KQ)(h),(0,B.OQ)(h),(0,aq.y1)(h);let E=(0,ee3.I)(),v=!!(0,U._I)(),y=(0,aN.J2)(null==(n=ei.Ez5)?void 0:n.uiState().shouldShowAutoLayoutHintsIfExist),b=(0,aN.J2)(null==(a=ei.Ez5)?void 0:a.uiState().autoLayoutShortcutHints),C=(0,eW.Rs)(eJ.Jpz,{key:h}),w=!1;if(C&&"loaded"===C.status&&s.openFile){let e=C.data.file;if(e&&g){let t=e.linkAccess,n=null==(l=e.team)?void 0:l.isStarterTeam,a=(null==(i=null==(r=e.team)?void 0:r.isStudentTeam)?void 0:i.status)==="loaded"&&(0,eW.oA)(null==(o=e.team)?void 0:o.isStudentTeam),c=!!e.roles.find(e=>e.userId===g);s.openFile.canEdit&&t===a_.PQ.EDIT&&(n||a)&&!c&&(w=!0)}}let T=(0,_.Pj)();W.nz(),W.Gb(h),(0,eo.N)(),ZH();let x=(0,nS.R)(),k=(0,S.md)(el.h),I=(0,S.md)(Y8.h7);return"ok"!==k?null:f.createElement(eyJ,{...(0,euK.d)(s),store:T,dispatch:p,unreadCommentCount:c,voiceEnabled:d,showCanvasSearch:u,aiEnabledFigJam:m,showStartModal:w,canAccessDevMode:v,isUI3:x,showQuickActionsV2:E,showAutoLayoutHints:y&&b.size>0,isPrototypeViewerOpenInteractionTests:I})}),eyj=class e extends f.Component{constructor(){super(...arguments),this.state={commentsDetailContainer:null,shouldShowDragAndDropBorder:!1},this.focusOutEventListener=()=>{window.scrollTo({left:document.body.scrollLeft,top:document.body.scrollTop,behavior:"smooth"})},this.fetchHubFileMetadata=()=>{var e;(null==(e=this.props.openFile)?void 0:e.canEdit)&&this.props.dispatch(G.rH({fileKey:this.props.openFile.key}))},this.fullscreenContainerRef=e=>{et.Y5.reparentRootElement(e),e&&e.addEventListener("drop",this.handleDrop)},this.commentsDetailContainerRef=e=>{this.setState({commentsDetailContainer:e})},this.handleDrop=e=>{this.props.dispatch(W.eM({dataTransfer:e.dataTransfer,clientX:e.clientX,clientY:e.clientY}))}}componentDidMount(){var e;window.scrollTo(0,0),C.XN&&document.addEventListener("focusout",this.focusOutEventListener),document.documentElement.classList.add(emY.FC),document.body.classList.add(emY.Wc),this.props.dispatch(V._J()),ZM(this.props.dispatch,null==(e=this.props.openFile)?void 0:e.key,this.props.currentUserOrgId),this.props.openFile&&(this.props.dispatch(W.Yx({})),this.props.dispatch(W.x4())),this.props.openFile&&!this.props.isReadOnly?this.fetchHubFileMetadata():(0,y.kc)().ce_new_missing_fonts_logging&&(0,ed.DI)();let t=window.FigmaMobile;t&&(t._get_memory_stats=()=>{var e,t,n,a,l,r,i;let o=(null==(e=ei.P2e)?void 0:e.getImageMemory())||{};return{metadata:JSON.parse(JSON.stringify({coreJsBufferMemory:(null==(t=ei.hMR)?void 0:t.getJsBufferMemory())||0,coreLocalMaxUsedHeapMemory:(null==(n=ei.hMR)?void 0:n.getLocalMaxUsedHeapMemory())||0,coreMaxUsedHeapMemory:(null==(a=ei.hMR)?void 0:a.getMaxUsedHeapMemory())||0,coreTotalUsedHeapMemory:(null==(l=ei.hMR)?void 0:l.getTotalUsedHeapMemory())||0,fullscreenCompressedImages:o.compressedImages||0,fullscreenUncompressedImagesArrayBuffers:o.uncompressedArrayBuffer||0,fullscreenUncompressedImagesImageBitmap:o.uncompressedImageBitmap||0})),reservedWasmMemory:(0,ec.le)()||0,rendererGpuMemory:(null==(r=ei.P2e)?void 0:r.getRendererGpuMemory())||0,rendererBreakdown:(null==(i=ei.P2e)?void 0:i.getRendererMemoryBreakdown())||{}}})}componentDidUpdate(e,t){var n;(e.openFile&&this.props.openFile&&e.openFile.key!==this.props.openFile.key||e.selectedView.editorType&&this.props.selectedView.editorType&&e.selectedView.editorType!==this.props.selectedView.editorType)&&(this.props.dispatch(W.x4()),ZM(this.props.dispatch,null==(n=this.props.openFile)?void 0:n.key,this.props.currentUserOrgId)),!e.openFile&&this.props.openFile&&(this.props.dispatch(W.Yx({})),this.props.dispatch(W.x4()))}componentWillUnmount(){C.XN&&document.removeEventListener("focusout",this.focusOutEventListener),document.body.classList.remove(emY.Wc),document.documentElement.classList.remove(emY.FC)}render(){var t,n,a,l,r,i,o,s,c,d,u;let m=(0,y.kc)().redep_open_file_thinning?this.props.selectedView.fileKey:null==(t=this.props.openFile)?void 0:t.key,p=this.props.isCommentsToolSelected,_=this.props.topLevelMode===l8.lyf.HISTORY,g=this.props.selectedView.editorType===eq.nT.Whiteboard,h=this.props.selectedView.editorType===eq.nT.Design||this.props.selectedView.editorType===eq.nT.Sites,E=this.props.selectedView.editorType===eq.nT.Slides,v=!this.props.isReadOnly,b=this.props.selectedView.editorType===eq.nT.DevHandoff,w=(null==(n=this.props.openFile)?void 0:n.editorType)==="design",T=this.props.aiEnabledFigJam,x=(0,tR.Wl)(this.props.selectedView),N=this.props.store.getState().mirror.appModel.currentTool,S=!this.props.showUi&&(0,tl.TY)(this.props.dropdownShown),k=(null==(a=this.props.dropdownShown)?void 0:a.type)===tl.jv,I=k?null==(r=null==(l=this.props.dropdownShown)?void 0:l.data)?void 0:r.parameterEntryArgs:void 0,A=(null==(o=null==(i=this.props.dropdownShown)?void 0:i.data)?void 0:o.fireQuickActionsTrackingEvent)||nf.lQ,O=this.props.selectedView.editorType;O!==e.previousEditorType&&(this.props.dispatch(K.PQ([])),e.previousEditorType=O);let L=this.props.user&&this.props.openFile&&!_&&!x,P=this.props.currentPage,D=(null==(s=this.props.comments.activeThread)?void 0:s.id)||null,R=this.props.comments.showOnlyParticipating,M=this.props.comments.showResolved,F=!this.props.fileIsLoading&&g&&(0,evw.h)(this.props),B=!(0,end.t)();return f.createElement(eyG,{setShouldShowDragAndDropBorder:e=>{this.setState({shouldShowDragAndDropBorder:e})},isDragTarget:g,onPointerDown:g?(e,t)=>{ZG(e,t,N)}:void 0},f.createElement(eyH,{fileKey:m||null,orgId:this.props.currentUserOrgId}),(h||b)&&f.createElement(er.ED,null),(0,y.kc)().ee_color_management_debug?f.createElement(ee5,null):null,m&&f.createElement(emq,{fileKey:m}),!(C.Ay.isIpad||C.Ay.isIpadNative||C.Ay.isMobileBrowser||C.Ay.isMeetDevice)&&f.createElement(emZ,null),f.createElement("div",{className:emY.MY,"data-forward-events-to-fullscreen":!0},f.createElement(en3,null,(0,y.kc)().cursor_bot&&w&&this.props.hasCursorBot&&f.createElement(erl,null),!x&&f.createElement("div",{key:"fullscreen-container",ref:this.fullscreenContainerRef}),f.createElement(eri,null),!E&&f.createElement(eyW,null),this.props.showToolbar&&f.createElement(emJ,{numUnreadComments:this.props.unreadCommentCount,selectedView:this.props.selectedView,recordingKey:"toolbarView"}),E&&this.props.showUi&&f.createElement(eyL,null),!this.props.fileIsLoading&&f.createElement(enz,{context:{location:"editor",openFile:this.props.openFile}}),(null==(c=this.props.openFile)?void 0:c.template)&&f.createElement(enZ,null),S&&f.createElement(etv.e,{key:"fullscreen-menu",dropdown:this.props.dropdownShown,recordingKey:"mainMenu"}),k&&f.createElement(l7.tH,{boundaryKey:"QuickActionsOuter",onError:()=>{this.props.dispatch(eS.F.enqueue({message:"Unable to open quick actions",type:"react-error"}))},fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(erX,{key:"quick-actions",parameterEntryArgs:I,fireTrackingEvent:A})),f.createElement(ee8,null),this.props.showQuickActionsV2&&f.createElement(l7.tH,{boundaryKey:"QuickActionsV2",onError:()=>{this.props.dispatch(eS.F.enqueue({message:"Unable to open quick actions",type:"react-error"}))},fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(euV,null)),this.props.isUI3&&(0,y.kc)().ce_al_experiments_on&&this.props.showAutoLayoutHints&&f.createElement(enJ,null),!(C.Ay.isIpad||C.Ay.isIpadNative)&&!this.props.isReadOnly&&g&&f.createElement(tf.Eb,null),this.props.progressBarState.mode!==l8.Oin.OFF&&f.createElement("div",{className:emY._q}),f.createElement(bA.pO,{initialFilterState:{currentPage:(0,ag.$A)(this.props.selectedView)}},this.props.loadingEmbeds.map(e=>f.createElement(qm,{key:`loading-embed-${e}`,nodeId:e})),f.createElement(ZF,null),f.createElement(o7,null),b?this.props.canAccessDevMode&&f.createElement(em9,null):this.props.showCanvasSearch&&f.createElement(Qu,null),h&&(0,y.kc)().ce_al_experiments_on&&f.createElement(Qu,null),f.createElement(qr,null),f.createElement(ql,null),f.createElement(rZ,null),g&&f.createElement(tf.Pn,null),b&&!x&&f.createElement(efk,null),E?f.createElement(eyt,null):null,f.createElement(yf.Ay,null),L&&f.createElement(qv.$2,{showOnlyParticipatingComments:R,showResolvedComments:M,pageId:P,activeId:D,renderDetailContainerInPortal:!0,detailContainerPortal:this.state.commentsDetailContainer}),f.createElement(Zw.yL,null),f.createElement(Zy,null),(0,y.kc)().cursor_bot&&w&&!b&&this.props.hasCursorBot&&f.createElement(h9,null),g&&f.createElement(evU,null),g&&f.createElement(evv.S4,{multiplayerEmoji:this.props.multiplayerEmoji}),!(0,y.kc)().figjam_generate_handbrake&&T&&g&&!_&&f.createElement(tf.AU,null),T&&g&&f.createElement(tf.Ic,null),g&&(0,y.kc)().figjam_mindmaps_behavior_enable&&f.createElement(tf.Eu,null),g&&!p&&!_&&f.createElement(tf.Me,null),g&&!p&&!_&&f.createElement(tf.fJ,null),!g&&!b&&f.createElement(Z8,null),(g||h||E)&&f.createElement(bF,null),g&&f.createElement(evE,null),f.createElement(hr.Nz,null),g&&f.createElement(tf.q,null),g&&this.props.showUi&&f.createElement(evK,null),f.createElement("div",{ref:this.commentsDetailContainerRef}),f.createElement(Zz,null),w&&h&&v&&f.createElement(eeX,null),f.createElement(X0,null),this.state.shouldShowDragAndDropBorder&&f.createElement(hr.X5,null)),f.createElement(y9,{isFigjamEditor:g,isDesignEditor:h,openFile:this.props.openFile}),this.props.showUi&&!g&&_&&!this.props.isUI3&&f.createElement("div",{className:emY.yL},f.createElement(Tj.yU,{recordingKey:"versionHistoryView"})),this.props.hyperlinkLocation&&f.createElement(era.c,{hyperlink:this.props.hyperlinkLocation,editorType:(0,eq.oD)(this.props.selectedView.editorType),dispatch:this.props.dispatch,recordingKey:"hyperlinkEditor"}),f.createElement(ee9.yq,null),this.props.progressBarState.mode!==l8.Oin.OFF&&f.createElement(Xe.z2,{editorType:(0,eq.oD)(this.props.selectedView.editorType),progressBarMode:this.props.progressBarState.mode,progressBarType:this.props.progressBarState.type,left:0}),this.props.showingReconnectingModal&&f.createElement(enc.z,{clientType:"fullscreen"}),f.createElement(ZB,null),f.createElement(ZU,{showStartModal:this.props.showStartModal}),this.props.universalInsertModal.showing&&f.createElement(l7.tH,{boundaryKey:g||E?"FigJamBrowseAllResourcesModal":"FdBrowseResourceModal ",onError:()=>{this.props.dispatch(eS.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},g?f.createElement(evi,null):E?f.createElement(eyn,null):f.createElement(is,null)),this.props.dropdownShown&&!B&&!C.Ay.isMeetDevice&&f.createElement(l7.tH,{boundaryKey:"FullscreenContextMenu",onError:()=>{this.props.dispatch(eS.F.enqueue({message:"Unable to open context menu",type:"react-error"}))},fallback:l7.H4.NONE_I_KNOW_WHAT_IM_DOING},f.createElement(ern,{dropdownShown:this.props.dropdownShown,selectedView:this.props.selectedView,ariaLabelledBy:(0,eN.t)("fullscreen.fullscreen_view.context_menu.aria_label")})),(null==(d=this.props.pickerShown)?void 0:d.id)===nz.C9&&f.createElement(et_,null),this.props.exportSettingsPickerShown.isShown&&f.createElement(eaP,null),(null==(u=this.props.pickerShown)?void 0:u.id)===ens.O&&f.createElement(ens.S,{recordingKey:"nudgeAmountPicker"}),this.props.eyedropper&&f.createElement(eao,null),F&&f.createElement(evC,null))),f.createElement(enj.EmbeddedFigmaScopeView,null),!1,!1,this.props.showKeyboardShortcuts&&f.createElement(eno,{recordingKey:"keyboardShortcutPanel"}),this.props.voiceEnabled&&(O===eq.nT.Design||O===eq.nT.DevHandoff||O===eq.nT.Slides)&&f.createElement(Qt,{className:emY.PA},f.createElement(oZ,null)),g&&f.createElement(tf.Qf,null),g&&f.createElement(tf.Ru,null),this.props.isUI3&&this.props.showUi&&!g&&!E&&f.createElement(l6,null),f.createElement(bN,null),f.createElement(eyR.G,null),f.createElement(eyQ,null))}};eyj.displayName="FullscreenViewInner",eyj.previousEditorType=eq.nT.Design;let eyJ=eyj,eyY=()=>{let e=(0,_.Pj)();return f.useCallback(t=>{let n=e.getState().mirror.sceneGraph;return(0,ey.dA)(n,t)},[e])},eyX=()=>{var e;"hidden"===document.visibilityState&&(null==(e=A.x4)||e.clear(),e$.L.cleanupSession())};function eyq(){let e=(0,_.wA)(),t=(0,_.d4)(e=>e.openFile);(0,U.lF)((null==t?void 0:t.key)??""),eK.M4.Folder.useValue(null==t?void 0:t.folderId);let n=(0,_.d4)(e=>e.selectedView.editorType),a=(0,ti.FF)(),[l,r]=(0,f.useState)(!1),i=(0,h.DP)(),o=(0,tu.sO)(),s=(0,f.useCallback)(()=>{ZW(),r(!0)},[]),c=(0,_.d4)(e=>e.mergingStatus);(0,f.useEffect)(()=>{if((0,y.kc)().ce_suppress_browser_keys)return document.addEventListener("keydown",x,!0),()=>void document.removeEventListener("keydown",x,!0)},[]),(0,ea.LD)(),function(){let e=(0,f.useRef)(),t=(0,f.useRef)(),n=(0,_.wA)(),a=(0,_.d4)(e=>e.userFlags),l=(0,_.d4)(e=>!!e.user),r=function(e,t){let n=(0,_.d4)(e=>e.mirror.appModel.showKeyboardShortcuts),a=(0,_.d4)(e=>{var t;return null==(t=e.user)?void 0:t.created_at}),l=(0,f.useMemo)(()=>{let e=new Date("2022-11-14").getTime();return null!=a&&new Date(a).getTime()>=e},[a]);return(0,f.useCallback)((a,r,i,o)=>{t.keyboard_user_first_detection||o||!l?a!==ei.aTn.US_QWERTY||o||r!==ei.aTn.UNKNOWN?a&&r!==ei.aTn.UNKNOWN?t.keyboard_manual_supported_bell||eP(e,a,r,n):a&&r===ei.aTn.UNKNOWN?t.keyboard_generic_supported_first_bell||eD(e,a,n):(0,ex.CZ)({layout:r,detectedLayoutStr:i??void 0,eventName:"keyboard_change_no_bell"}):(0,ex.CZ)({layout:a,eventName:"ignore_us_qwerty"}):(e(j.b({keyboard_user_first_detection:!0})),a&&((0,ex.rd)({layout:a}),(0,ex.CZ)({layout:a,eventName:"auto_set_new_user_layout"})))},[e,t,n,l])}(n,a),i=(0,f.useCallback)(async()=>{if(l){if(em.eD){let t=await eR(r,e.current??null);e.current=t}else{let e=await eM(r,t.current??null);t.current=e}}},[r,l]);(0,f.useEffect)(()=>{et.Y5.isReady()?i():et.Y5.onReady().then(()=>setTimeout(i,500))},[])}(),(0,eC.XS)(),function(){let e=(0,_.Pj)(),t=(0,_.d4)(eU.d1),n=(0,_.d4)(eH.m0),a=(0,_.d4)(eH.No),l=(0,_.d4)(e=>e.library.published),r=(0,_.d4)(e=>e.openFile),i=(0,_.d4)(e=>e.fileVersion),o=(0,_.d4)(e=>e.loadingState),s=(0,_.d4)(e=>e.library.local),c=(0,_.d4)(e=>e.library.assetsPanelSearch.shouldSearchDefaultLibraries),d=(0,eB.ud)(),u=(0,_.d4)(e=>e.folders),m=(0,eG.l6)(),p=(0,_.d4)(e=>e.library.assetsPanelSearch.query),g=(0,_.d4)(e=>e.library.assetsPanelSearch.searchOptions),h=(0,eF.M)()&&(0,y.kc)().dse_new_asset_panel_fetch;(0,f.useEffect)(()=>{t&&eV.YG.sourcesDidChange()},[t,n,a,l,s,c,d,u]),(0,f.useEffect)(()=>{(0,eV.Wg)(e.getState(),{ignoreLoadingState:h})&&eV.YG.queryDidChange(e)},[e,p,h]),(0,f.useEffect)(()=>{(0,eV.Wg)(e.getState(),{ignoreLoadingState:h})&&eV.YG.searchOptionsDidChange(e)},[e,g,h]),(0,f.useEffect)(()=>{(0,eV.Wg)(e.getState(),{ignoreLoadingState:h})&&eV.YG.subscriptionsDidChange(e,m)},[e,m,r,i,o,h])}(),(0,eE.gN)(),em.eD&&function(){let e=(0,e_.JI)(),t=(0,_.d4)(e=>e.mirror.appModel.isReadOnly),n=(0,eh.Yo)(),a=(0,_.d4)(e=>e.openFile),l=(0,_.d4)(e=>e.localPlugins),r=(0,Q.E3)(),i=(0,e_.op)(),o=(0,_.d4)(e=>e.installedPluginVersions.plugins),s=(0,_.d4)(e=>{var t;return null==(t=e.mirror.selectedStyleProperties)?void 0:t.selectedWidgetInfo}),c=(0,_.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),d=(0,_.d4)(e=>e.publishedPlugins),u=(0,_.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),m=(0,e_.Be)(),p=m.orgPlugins,g=m.orgWidgets,h=(0,eg.h)("plugin"),E=(0,eg.h)("widget"),v=(0,e_.NU)(),y=(0,e_.qr)(),b=(0,e_.ZT)(),C=null!=(0,eE.SH)(),w=(0,e_.ll)();f.useEffect(()=>{let m={isReadOnly:t,userCanRunPlugins:e,openFile:a,publishedPlugins:d,localExtensions:l,orgEntity:n,allSavedPlugins:o,recentlyUsedPlugins:i,org:u,editorType:r,widgetSelectionInfo:s,hideRecentsHeader:!0,activeTextReviewPlugin:c,orgSavedPlugins:p,orgSavedWidgets:g,orgPrivatePlugins:h,orgPrivateWidgets:E,savedWidgetVersions:v,recentlyUsedWidgets:y,publishedWidgets:b,pluginAllowlist:w};ev(ep.$0(m),ef.wX(m))},[t,e,a,d,o,i,l,n,u,r,s,c,m,p,g,h,E,v,y,b,w,C])}(),function(){let e=(0,Q.E3)(),t=(0,f.useCallback)(()=>{(0,Z.sx)("display_redline",{source:"keyboard_shortcut",mode:e})},[e]),n=(0,q.A)(t,1e3,{leading:!0,trailing:!1}),a=(0,_.d4)(e=>e.usedKeyboardShortcuts["measure-to-selection"]||0),l=(0,f.useRef)(a);(0,f.useEffect)(()=>{l.current!==a&&(l.current=a,n())},[a,n])}();let d=(0,k.Sl)();(0,I.I7)("exp_aa_test_fullscreen_view").getConfig(),function(){let e=(0,_.wA)(),t=(0,ti.FF)(),n=(0,ta.BI)(),[a,l]=(0,f.useState)(!1),r=(0,_.d4)(e=>e.mirror.appModel.multiplayerSessionState===ei.kul.JOINED);f.useEffect(()=>{var e;t&&!a&&(null==n?void 0:n.shouldOptimizeForIpadApp)&&r&&!(null==(e=ei.Ez5)?void 0:e.defaultToolIsHandSelect())&&(l(!0),et.Y5.triggerAction("set-tool-hand",null))},[t,n,a,l,r]);let i=(0,_.d4)(({mirror:{appModel:e}})=>e.showUi);f.useEffect(()=>{(null==n?void 0:n.updateUIVisible)&&n.updateUIVisible(i)},[n,i]);let o=(0,ta.m0)();f.useEffect(()=>{o&&(o._try_to_flush_autosave=async()=>{let e=(0,tn.ZG)();if(e){let t=e.session();t&&await t.tryToFlushAutosave()}})},[o]);let s=(0,tr.Kd)();f.useEffect(()=>{(null==n?void 0:n.updateSaveStatus)&&(s?r?n.updateSaveStatus(ts.av.SAVING):n.updateSaveStatus(ts.av.PAUSED):n.updateSaveStatus(ts.av.SAVED))},[n,s,r]);let c=(0,_.d4)(e=>(0,tl.Yh)(e.mirror.appModel,"undo")),d=(0,_.d4)(e=>(0,tl.Yh)(e.mirror.appModel,"redo"));f.useEffect(()=>{if((null==n?void 0:n.updateUndoEnabled)&&n.updateUndoEnabled(c),(null==n?void 0:n.updateRedoEnabled)&&n.updateRedoEnabled(d),o){let t=t=>{e(eS.F.dequeue({matchType:"undo_redo_gesture"})),e(eS.F.enqueue({message:t,type:"undo_redo_gesture",timeoutOverride:750}))};o._trigger_undo=()=>{c&&(et.Y5.triggerActionInUserEditScope("undo"),t((0,eN.t)("fullscreen_actions.undo")))},o._trigger_redo=()=>{d&&(et.Y5.triggerActionInUserEditScope("redo"),t((0,eN.t)("fullscreen_actions.redo")))}}},[n,e,c,d,o]);let u=(0,ta.pt)();f.useEffect(()=>{u&&(u._set_ui_visibility=e=>{e!==i&&et.Y5.triggerAction("toggle-ui")})},[u,i]);let m=(0,tt.Yk)();f.useEffect(()=>{(null==n?void 0:n.updateDLTHeight)&&n.updateDLTHeight(m)},[m,n]);let p=(0,eb.dH)(),g=(0,td.pK)(p),h=(0,ta.Ef)(),E=(0,_.d4)(e=>{var t;return null==(t=e.mirror)?void 0:t.appModel.isReadOnly});f.useEffect(()=>{var e,t;g&&!E&&(null==(e=null==h?void 0:h.nativeToolbarUpdateActiveTool)||e.call(h,g),null==(t=null==h?void 0:h.nativeToolbarUpdateMultiselectActive)||t.call(h,"MULTISELECT"===g))},[h,g,E]);let[v,y]=f.useState("ERASER"),[b,C]=f.useState("PENCIL");f.useEffect(()=>{!E&&g&&(0,td.S0)(g)&&g!==v&&(C(v),y(g))},[g,v,y,C,E]),f.useEffect(()=>{u&&(u._switch_to_eraser=function(){if(E)return{success:!1,error:tc.lj.READ_ONLY_FILE,currentTool:"NONE"};if("ERASER"!==v)return(0,td.Jm)("set-tool-eraser"),{success:!0,error:null,currentTool:"ERASER"};{let e=td.Jh.get(b);return e&&(0,td.Jm)(e),{success:!0,error:null,currentTool:b}}},u._switch_to_previous_drawing_tool=function(){if(E)return{success:!1,error:tc.lj.READ_ONLY_FILE,currentTool:"NONE"};let e=td.Jh.get(b);return e&&(0,td.Jm)(e),{success:!0,error:null,currentTool:b}})},[E,g,b,v,u]),o&&(o._update_context_menu_visibility=e=>{ei.glU.updateNativeContextMenuVisibility(e)},o._override_document_visibility_state=to.R),u&&(u._activate_multiselect_mode=()=>{(0,td.Jm)("set-tool-multiselect")},u._deactivate_multiselect_mode=()=>{(0,td.Jm)("set-tool-default")})}(),(0,eY.a4)(),(0,E.fp)(),function(){let e=(0,_.wA)(),t=f.useMemo(()=>(0,ez.g)(),[]),n=(0,eW.Rs)(eJ.gvX,{cacheNonce:t});f.useEffect(()=>{if("loaded"===n.status&&n.data.currentUser.notificationExperimentInfo.status===eW.tT.Loaded){let t=(0,eW.oA)(n.data.currentUser.notificationExperimentInfo);t&&("exp_notification_catfile"===t.experimentName||"exp_notification_catfic"===t.experimentName)&&("prompt_to_opt_in"===t.type?e(ej.ni({userId:t.userId,fileKey:t.fileKey,experimentName:t.experimentName})):e(ej.EJ({userId:t.userId,fileKey:t.fileKey,preference:t.preference})))}},[e,n])}(),f.useEffect(()=>t_.Bc,[]);let u=(0,I.I7)("exp_test_exposure_data_loss",!1,!0).getConfig(),m=!!(0,eT.f)("exp_test_exposure_data_loss_has_checked");f.useEffect(()=>{let t=u.getValue("should_expose_once",null);null===t||t&&m||((0,I.hW)("exp_test_exposure_data_loss"),t&&e(j.b({exp_test_exposure_data_loss_has_checked:!0})))},[u,m,e]),f.useEffect(()=>{n===eq.nT.Whiteboard&&(0,I.hW)("exp_unified_index_v3_figjam")},[n]),f.useEffect(()=>(n===eq.nT.Whiteboard&&C.Ay.isMeetDevice&&"undefined"!=typeof document&&document.addEventListener("visibilitychange",eyX),()=>{document.removeEventListener("visibilitychange",eyX)}),[n]);let p=(0,X.o)();f.useEffect(()=>{if(p)return e(z.HQ({storeInRecentsKey:p})),n===eq.nT.Whiteboard&&(e(z.gr({storeInRecentsKey:p})),e(z.vZ({storeInRecentsKey:p}))),n!==eq.nT.DevHandoff&&e(z.aF({storeInRecentsKey:p})),window.addEventListener("storage",t,!1),()=>{window.removeEventListener("storage",t,!1)};function t(t){switch(t.key){case eX.vY:case eX.S7:e(z.HQ({storeInRecentsKey:p}));break;case eX.YN:case eX.xk:e(z.aF({storeInRecentsKey:p}));break;case eX.SO:e(z.gr({storeInRecentsKey:p}));break;case eX.JG:e(z.vZ({storeInRecentsKey:p}))}}},[e,n,p]);let v=(0,ew.TA)();f.useEffect(()=>{v&&e(H.oQ())},[e,v]),function(){let e=(0,e2.Xr)(e9);(0,f.useEffect)(()=>{let t;let n=()=>{clearTimeout(t),t=setTimeout(()=>{e(e5.IDLE_DUE_TO_INACTIVITY)},6e4)},a=()=>{n(),e(e5.ACTIVE_AFTER_IDLE)},l=e1()(a,500,{trailing:!1,leading:!0}),r=()=>{"visible"===document.visibilityState?a():e(e5.IDLE_DUE_TO_TAB_SWITCH)};return e(e5.ACTIVE_FIRST_TIME),te.forEach(e=>{document.addEventListener(e,l)}),document.addEventListener("visibilitychange",r),n(),()=>{te.forEach(e=>{document.removeEventListener(e,l)}),document.removeEventListener("visibilitychange",r),clearTimeout(t)}},[e,6e4])}(),f.useEffect(()=>{let t=t=>{if(c===g.y.MERGING)return t.returnValue="A merge operation is in progress. Closing the window could result in data loss or corruption; please wait until the operation completes.",t.preventDefault(),e(K.sx({name:"Unload During Merge Warning Shown"})),!1},n=()=>{c===g.y.MERGING&&e(K.sx({name:"Page Closed During Merge"}))};return window.addEventListener("beforeunload",t),window.addEventListener("unload",n),()=>{window.removeEventListener("beforeunload",t),window.removeEventListener("unload",n)}},[c,e]);let b=(0,f.useRef)(!1);f.useEffect(()=>{(0,y.kc)().search_persistent_sessions&&(null==t?void 0:t.key)&&!b.current&&(b.current=!0,en.startTimer(t.key,(0,eZ.lM)()))},[null==t?void 0:t.key]);let[w,T]=(0,td.H_)(),N=f.createElement(f.Fragment,null,f.createElement(eyZ,{file:t,onCanvasExpired:s}),a&&f.createElement(eyF.d,null,w?T&&f.createElement(td.vW,null):f.createElement(tf.aT,null)));return f.createElement(M,{name:"editor",alsoTrack:()=>({editorType:(0,eq.Bu)(n),productType:(0,$.Dc)(n),uiVersion:i.version,fileKey:(null==t?void 0:t.key)||"",slideView:o?(0,tm.R9)():void 0})},f.createElement(er.wG,null,f.createElement(k.q5.Provider,{value:d},f.createElement(f.Fragment,null,!l&&N,!l&&f.createElement(tL,{onWorkshopExpired:s})))))}function eyZ({file:e,onCanvasExpired:t}){var n;let a=(0,_.d4)(e=>e.userStateLoaded),l=(0,_.d4)(e=>e.mirror.appModel.isInitialized),r=(0,N.R)(e=>e.comments),{anchorPositions:i,boundingBoxPositions:o,DEPRECATED_updateWatchedNodeIds:s,updateWatchedStablePaths:c}=(0,ee.Cn)(),d=eyY(),u=(0,ew.TA)();(0,tP.ox)({file:e,onCanvasExpired:t});let m=(0,Y.T8)(f.createElement(J.NX,{userId:u,file:e,orgId:(null==e?void 0:e.parentOrgId)??null,activeId:(null==(n=r.activeThread)?void 0:n.id)||null,anchorPositions:i,boundingBoxPositions:o,DEPRECATED_updateWatchedNodeIds:s,updateWatchedStablePaths:c,getPageIdsForNodes:d},f.createElement(tD.R,null,(0,y.kc)().fullscreen_page_view_refactor?f.createElement(ey1,null):f.createElement(eyz,null))),eQ.e0.EDITOR,null!=e?(0,$.oP)(e):{},null!=e&&a&&l);return f.createElement(f.Fragment,null,m)}function eyQ(){return(0,es.co)(),null}let ey$=(0,tp.n)(()=>{}),ey0={[eq.nT.Design]:em$,[eq.nT.Whiteboard]:evQ,[eq.nT.Sites]:ev$,[eq.nT.Slides]:eyD,[eq.nT.DevHandoff]:efI},ey1=f.memo(()=>{var e,t;let n=(0,_.d4)(e=>e.openFile),a=n?n.key:"",l=(0,f.useRef)(null),r=(0,f.useRef)(null),i=(0,f.useRef)(null),o=(0,N.R)(emX),s=(0,_.wA)(),c=(0,S.md)(el.h),[d,u]=(0,f.useState)(!1),m=(0,eb.dH)(),p=o.selectedView.editorType,g=(0,v.ZC)(p),h=(0,nS.R)(),E=(0,eb.p8)("showUi");if(p!==g&&g&&s(K.PQ([])),(0,ele.j)(a),(0,aq.KQ)(a),(0,B.OQ)(a),(0,aq.y1)(a),W.nz(),(0,eo.N)(),ZH(),(0,f.useEffect)(()=>{let e=()=>{window.scrollTo({left:document.body.scrollLeft,top:document.body.scrollTop,behavior:"smooth"})};window.scrollTo(0,0),C.XN&&document.addEventListener("focusout",e),document.documentElement.classList.add(emY.FC),document.body.classList.add(emY.Wc),s(V._J());let t=window.FigmaMobile;return t&&(t._get_memory_stats=()=>{var e,t,n,a,l,r,i;let o=(null==(e=ei.P2e)?void 0:e.getImageMemory())||{};return{metadata:JSON.parse(JSON.stringify({coreJsBufferMemory:(null==(t=ei.hMR)?void 0:t.getJsBufferMemory())||0,coreLocalMaxUsedHeapMemory:(null==(n=ei.hMR)?void 0:n.getLocalMaxUsedHeapMemory())||0,coreMaxUsedHeapMemory:(null==(a=ei.hMR)?void 0:a.getMaxUsedHeapMemory())||0,coreTotalUsedHeapMemory:(null==(l=ei.hMR)?void 0:l.getTotalUsedHeapMemory())||0,fullscreenCompressedImages:o.compressedImages||0,fullscreenUncompressedImagesArrayBuffers:o.uncompressedArrayBuffer||0,fullscreenUncompressedImagesImageBitmap:o.uncompressedImageBitmap||0})),reservedWasmMemory:(0,ec.le)()||0,rendererGpuMemory:(null==(r=ei.P2e)?void 0:r.getRendererGpuMemory())||0,rendererBreakdown:(null==(i=ei.P2e)?void 0:i.getRendererMemoryBreakdown())||{}}}),()=>{C.XN&&document.removeEventListener("focusout",e),document.body.classList.remove(emY.Wc),document.documentElement.classList.remove(emY.FC)}},[s]),(0,f.useEffect)(()=>{let e=()=>{window.scrollTo({left:document.body.scrollLeft,top:document.body.scrollTop,behavior:"smooth"})};window.scrollTo(0,0),C.XN&&document.addEventListener("focusout",e),document.documentElement.classList.add(emY.FC),document.body.classList.add(emY.Wc),s(V._J());let t=window.FigmaMobile;return t&&(t._get_memory_stats=()=>{var e,t,n,a,l,r,i;let o=(null==(e=ei.P2e)?void 0:e.getImageMemory())||{};return{metadata:JSON.parse(JSON.stringify({coreJsBufferMemory:(null==(t=ei.hMR)?void 0:t.getJsBufferMemory())||0,coreLocalMaxUsedHeapMemory:(null==(n=ei.hMR)?void 0:n.getLocalMaxUsedHeapMemory())||0,coreMaxUsedHeapMemory:(null==(a=ei.hMR)?void 0:a.getMaxUsedHeapMemory())||0,coreTotalUsedHeapMemory:(null==(l=ei.hMR)?void 0:l.getTotalUsedHeapMemory())||0,fullscreenCompressedImages:o.compressedImages||0,fullscreenUncompressedImagesArrayBuffers:o.uncompressedArrayBuffer||0,fullscreenUncompressedImagesImageBitmap:o.uncompressedImageBitmap||0})),reservedWasmMemory:(0,ec.le)()||0,rendererGpuMemory:(null==(r=ei.P2e)?void 0:r.getRendererGpuMemory())||0,rendererBreakdown:(null==(i=ei.P2e)?void 0:i.getRendererMemoryBreakdown())||{}}}),()=>{C.XN&&document.removeEventListener("focusout",e),document.body.classList.remove(emY.Wc),document.documentElement.classList.remove(emY.FC)}},[s]),(0,f.useEffect)(()=>{o.openFile&&!l.current&&(s(W.Yx({})),o.openFile&&!o.isReadOnly?(()=>{var e;(null==(e=o.openFile)?void 0:e.canEdit)&&s(G.rH({fileKey:o.openFile.key}))})():(0,y.kc)().ce_new_missing_fonts_logging&&(0,ed.DI)(),l.current=o.openFile)},[s,o.isReadOnly,o.openFile]),(0,f.useEffect)(()=>{var e;ZM(s,null==(e=o.openFile)?void 0:e.key,o.currentUserOrgId)},[s,o.currentUserOrgId,null==(e=o.openFile)?void 0:e.key,o.selectedView.editorType]),(0,f.useEffect)(()=>{var e;o.openFile&&(null===r.current||!r.current)&&s(W.x4()),o.openFile&&r.current&&o.openFile.key!==r.current&&s(W.x4()),i.current&&o.selectedView.editorType!==i.current&&s(W.x4()),i.current=o.selectedView.editorType,r.current=null==(e=o.openFile)?void 0:e.key},[s,o.openFile,null==(t=o.openFile)?void 0:t.key,o.selectedView.editorType]),"ok"!==c)return null;let b=ey0[p]??f.Fragment;return f.createElement(eyG,{setShouldShowDragAndDropBorder:u,isDragTarget:p===eq.nT.Whiteboard,onPointerDown:p===eq.nT.Whiteboard?(e,t)=>{ZG(e,t,m)}:void 0},f.createElement(b,{shouldShowDragAndDropBorder:d}),(p===eq.nT.Design||p===eq.nT.DevHandoff)&&h&&E&&f.createElement(l6,null))})},332366:(e,t,n)=>{n.d(t,{n:()=>d});var a=n(411855),l=n(629019),r=n.n(l),i=n(153234),o=n(498606),s=n(574176);let c="file_upload_icon_input--disabledIcon--JLhI1";function d(e){let{svg:t,svgAltText:n,isDisabled:l,acceptedFileTypes:d,inputRef:u,onFileInputChange:m,singleFile:p,recordingKey:f}=e,_=(0,i.AF)(f,"change",e=>{m(u)()});return a.createElement("label",{htmlFor:e.inputId,className:r()("file_upload_icon_input--fileUploadIconLabel--GkBse",{[c]:l}),"data-tooltip-type":o.Ib.TEXT,"data-tooltip-show-immediately":!0,"data-tooltip":l?null:e["data-tooltip"]},a.createElement("input",{type:"file",name:e.inputId,id:e.inputId,accept:d,ref:u,onChange:_,multiple:!p,className:"file_upload_icon_input--fileInput--qwRav",disabled:l}),e.children||t&&a.createElement("div",{className:"file_upload_icon_input--svg--qwaj3"},a.createElement(s.B,{title:n,ariaLabel:n,svg:t,autosize:!0,className:r()({[c]:l})})))}}}]);

//# debugId=da60ae86-3bea-5cfe-ab7b-81b7b94a62d8

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/b05943e011318e34dee29f2833a436731c7e044a/fullscreen-37001f6ce49628ba.min.js.map