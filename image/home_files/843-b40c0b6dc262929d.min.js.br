"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="91e37032-091e-5f3e-be36-0242ee8ca143")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[843],{319063:(e,t,n)=>{n.d(t,{AD:()=>S,CJ:()=>D,Cd:()=>u,DD:()=>T,DK:()=>m,E1:()=>_,G2:()=>i,I:()=>L,Ln:()=>I,My:()=>y,O6:()=>g,Ou:()=>x,P:()=>B,PD:()=>M,PU:()=>l,RA:()=>r,SP:()=>p,UF:()=>P,WB:()=>v,Wc:()=>d,Yd:()=>w,ZH:()=>A,cZ:()=>o,e3:()=>E,fh:()=>C,fi:()=>c,kT:()=>b,m_:()=>k,ts:()=>f,uH:()=>s,wx:()=>a,x$:()=>O,zQ:()=>h,zl:()=>N});let a="header--header--Dl3JY",r="header--headerClear---veTr",o="header--headerDark--OR4-f",l="header--presenterViewHeader--QI6Qk header--header--Dl3JY",i="header--headerWithSidebar--pHmLb",s="header--loadingHeader--cYdm7 header--header--Dl3JY",d="header--headerHidden--XF0PF",c="header--column--UnHDe",u="header--leftColumn--kKtFs header--sideColumn--HfeCE header--column--UnHDe",p="header--centerColumn--0Dbok header--column--UnHDe",m="header--rightColumn--vgTy3 header--sideColumn--HfeCE header--column--UnHDe",f="header--animatedAccessibilityDomButtonBox--D0fK7",g="header--animatedAccessibilityDomButton--tOjR5 basic_form--primaryBtn--AU7Gy basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",h="header--commentsButton---7B5z action--root--VrwWJ",v="header--commentsButtonSelected--X9bDY header--commentsButton---7B5z action--root--VrwWJ",E="header--flowsButton--jvoH4 action--root--VrwWJ",w="header--fullScreenButton--kLdEh header--fullScreenButtonBase--9M7T3 action--root--VrwWJ",y="header--optionsMenuButton--mr4hE header--fullScreenButton--kLdEh header--fullScreenButtonBase--9M7T3 action--root--VrwWJ",_="header--fullScreenButtonDisabled--Jcz8q header--fullScreenButtonBase--9M7T3 action--root--VrwWJ",S="header--settingsDropdownTarget--HJ0bH",I="header--settingsDropdownButton--qQDK3",C="header--settingsDropdown--dkvpG",N="header--dropdownCaretWithPaddedFocusHalo--y4LGH header--dropdownCaret--aI6Gm",b="header--topLeftIcon--hPeZ2",P="header--topLeftIconWithPaddedFocusHalo--QUQye header--topLeftIcon--hPeZ2",k="header--topLeftWordMark--Ewa5b",T="header--title--O5i3v ellipsis--ellipsis--Tjyfa",x="header--titleWithCaret--iNOEc header--title--O5i3v ellipsis--ellipsis--Tjyfa",D="header--shareOrLoginButton--hyMBP",O="header--presenterViewIcon--tfY4B",A="header--presenterViewContentToggle--3IzBl",B="header--presenterViewToggleIcon--pRoPN header--presenterViewIcon--tfY4B",M="header--presenterViewToggleIconActive--R8ePE header--presenterViewToggleIcon--pRoPN header--presenterViewIcon--tfY4B",L="header--presenterViewOpenPopoutIcon--d9L8M"},519364:(e,t,n)=>{n.d(t,{kL:()=>a,pU:()=>r,tB:()=>l,uZ:()=>o});let a="embed--container--KRhyf",r="embed--iframe--6z9Fq",o="embed--playIcon--8LC5v",l="embed--backdrop--ssu2L"},170039:(e,t,n)=>{n.d(t,{U:()=>a});let a="flapp_overlay--elementContainer--b1Khv"},740631:(e,t,n)=>{n.d(t,{E7:()=>i,HH:()=>d,It:()=>f,Li:()=>m,O3:()=>o,S1:()=>a,YO:()=>p,c0:()=>v,cQ:()=>g,hQ:()=>l,iJ:()=>r,ki:()=>c,nr:()=>h,pE:()=>u,y2:()=>s});let a="presenter_view--presenterView--qTGZb text--fontPos11--2LvXf text--_fontBase--QdLsd",r="presenter_view--slideContentWrapper--NbIjx",o="presenter_view--noGap--um-Rz",l="presenter_view--contentContainer--n8GGQ",i="presenter_view--sectionSpacer--lnjR3",s="presenter_view--hiddenSectionSpacer--2rsjV presenter_view--sectionSpacer--lnjR3",d="presenter_view--resizableSectionSpacer--bc-7z presenter_view--sectionSpacer--lnjR3",c="presenter_view--sectionLine--9yoMT",u="presenter_view--frameCounterWrapper--pnkN9",p="presenter_view--frameCounter--JxO4u footer--frameCounter--5AU-l footer--pill--a9ne7",m="presenter_view--presentationFrameControlsWrapper--lLlOd",f="presenter_view--frameControlsBackground---9syX",g="presenter_view--replayButton--7qtsL",h="presenter_view--presenterViewViewerFrame--bZCSs",v="presenter_view--debugToolsContainer--UbKK2"},831216:(e,t,n)=>{n.d(t,{Pp:()=>u,fe:()=>p,v0:()=>f,xf:()=>m});var a=n(511617),r=n(374626),o=n(288706),l=n(939863),i=n(392592),s=n(611978),d=n(99506),c=n(549774),u=(e=>(e[e.DISPATCH_WINDOW_OPEN=0]="DISPATCH_WINDOW_OPEN",e[e.SET_READY_FOR_MESSAGES=1]="SET_READY_FOR_MESSAGES",e[e.CLOSE_WINDOW=2]="CLOSE_WINDOW",e))(u||{});function p(){let e=(0,s._6)();if("prototype"!==e.view)return"";let t=e.file.prototype_url?new URL((0,c.qI)(e.file.prototype_url,d._Y.SLIDES)):"";return t&&(e.nodeId&&t.searchParams.append("node-id",e.nodeId),t.searchParams.append("popout","true")),t.toString()}function m(e,t){if(""===t){i.F.enqueue({message:(0,l.t)("slides.presenter_view.unknown_error"),error:!0});return}let n=(()=>{let e=t.split("/")[4],n=.8*window.screen.availHeight;return(0,a.FJ)(t,`audience-view-${e}`,`height=${n},width=${16*n/9},left=0,top=0,popup=yes`)})();if(null===n){let n={text:(0,l.t)("slides.presenter_view.open_popup"),action:()=>{r.zl.set(f,{type:0,dispatch:e,url:t})}};e(i.F.enqueue({message:(0,l.t)("slides.presenter_view.pop_up_error"),error:!0,button:n})),r.zl.set(f,{type:2})}return n}let f=(0,o.um)({readyForMessages:!1},(e,t)=>{switch(t.type){case 0:{let e=m(t.dispatch,t.url);if(e)return{avWindow:e,readyForMessages:!1};return{readyForMessages:!1}}case 1:if(e.avWindow)return{...e,readyForMessages:!0};return{readyForMessages:!1};case 2:return{...e,readyForMessages:!1}}})},585878:(e,t,n)=>{n.d(t,{Eo:()=>w,IZ:()=>y,XV:()=>E});var a=n(411855),r=n(188507),o=n(629019),l=n.n(o),i=n(498750),s=n(153234),d=n(799569),c=n(946689),u=n(574176),p=n(762638),m=n(939863),f=n(662275),g=n(259927),h=n(798099),v=n(741650);class E extends a.Component{constructor(){super(...arguments),this.onBackgroundMouseDown=e=>{!this.props.disableClickOutsideToHide&&this.props.onClose&&this.props.onClose(e),this.props.onBackgroundMouseDown&&this.props.onBackgroundMouseDown(e)},this.onModalMouseDown=e=>{e.stopPropagation()},this.onKeyDown=e=>{e.stopPropagation(),e.keyCode===i.Uz.ESCAPE&&(!this.props.disableClickOutsideToHide||this.props.closeOnEsc)&&this.props.onClose&&this.props.onClose(e),e.keyCode===i.Uz.ENTER&&this.props.closeOnEnter&&this.props.onClose&&this.props.onClose(e)},this.bgRef=e=>{e&&!e.contains(document.activeElement)&&(this.props.closeOnEsc||this.props.focus)&&e.focus()}}render(){let e=l()(v.K1,g.Dm,{[v.CY]:this.props.fixedTop,[v.Y5]:this.props.fixedCenter,[v.Vw]:this.props.transparentBackground}),t=this.props.maxWidth||492,n=this.props.minWidth||348;t<n&&(t=492,n=348);let r=this.props.paddingLeft||0,o=this.props.paddingRight||0,i=this.props.bottomSection;return a.createElement("div",{tabIndex:0,className:e,onPointerDown:this.onBackgroundMouseDown,onKeyDown:this.onKeyDown,onClick:this.props.onClick,ref:this.bgRef},a.createElement("div",{className:l()(i?v.jT:v.yl,this.props.containerClassName,{[v.P9]:this.props.allowScroll}),style:{maxWidth:t,minWidth:n,paddingLeft:r,paddingRight:o},onPointerDown:this.onModalMouseDown,role:"dialog","data-testid":this.props.dataTestId},(()=>{let e=a.createElement(y,{className:this.props.innerContainerClassName,headerClassname:this.props.headerClassName||"",headerSize:this.props.headerSize,disableHeaderBottomBorder:this.props.disableHeaderBottomBorder,title:this.props.title,titleIconURL:this.props.titleIconURL,titleIconSvgSrc:this.props.titleIconSvgSrc,truncateTitleText:this.props.truncateTitleText,onClose:this.props.onClose,onMouseDown:this.onModalMouseDown,isCloseHidden:this.props.isCloseHidden,containerRef:this.props.containerRef,customButton:this.props.customButton,closeTrackingText:this.props.closeTrackingText},this.props.children),t=!!this.props.bottomSection&&a.createElement("div",{className:v.nd,onPointerDown:this.onModalMouseDown},this.props.bottomSection);return i?a.createElement(a.Fragment,null,a.createElement("div",{className:v.SM},e),t):a.createElement(a.Fragment,null,e)})()))}}function w(e){let t=(0,r.wA)(),n=e.destructive?c.qM:c.vd,o=()=>{if(e.onCancel){e.onCancel();return}t(f.Lo())},i=a.createElement(a.Fragment,null,e.hideCancel||a.createElement(c.tM,{innerText:(0,m.t)("general.cancel"),onClick:o,className:v.x7},e.cancelText||(0,m.t)("general.cancel")),a.createElement(n,{innerText:e.confirmText||(0,m.t)("general.okay"),onClick:n=>{if(n.preventDefault(),e.onSubmit){e.onSubmit();return}t(f.Lo()),e.onConfirm&&e.onConfirm()},className:v.EJ,trackingProperties:e.trackedConfirmationProperties||{},disabled:e.disabled},e.confirmText||(0,m.t)("general.okay")));return a.createElement(E,{maxWidth:e.maxWidth||344,minWidth:344,fixedTop:!0,onClose:o,...e,containerClassName:e.useRedesign?l()(e.containerClassName,v.EO):void 0,headerClassName:e.useRedesign?l()(p.cx.textBodyLargeStrong.pb4.pt4.$,e.headerClassName):void 0},e.useRedesign?a.createElement("div",{className:p.cx.flex.flexColumn.$},a.createElement("div",{className:p.cx.if(!e.fullWidthContent,p.cx.p16).flex.flexColumn.$},e.children),a.createElement("div",{className:p.cx.flex.justifyEnd.p16.bt1.colorBorder.bSolid.$},i)):a.createElement("div",{className:v.UR},a.createElement("div",{className:v.xR},e.children),a.createElement("div",{className:v.qG},i)))}E.displayName="HeaderModal";class y extends a.Component{render(){let e=(()=>{switch(this.props.headerSize){case"large":return v.JF;case"hidden":return v.Wc;default:return v.Rh}})(),t=l()(e,this.props.headerClassname,{[p.cx.sticky.top0.left0.zIndex1.colorBg.$]:this.props.stickyHeader,[v.Jg]:!this.props.disableHeaderBottomBorder}),n=a.createElement(d.Jn,{onClick:this.props.onClose,onMouseDown:this.props.onMouseDown,innerText:this.props.closeTrackingText||"Close",className:this.props.closeButtonClassName,recordingKey:(0,s.Pt)(this.props,"headerModalContainer"),dataTestId:(0,s.Pt)(this.props,"headerModalContainer")+".close-button"}),r=(0,h.ft)();return a.createElement("div",{className:`${this.props.className||""}`,ref:this.props.containerRef,"aria-modal":this.props["aria-modal"]},a.createElement("div",{className:t,onPointerMove:r?this.props.onMouseMove:void 0,onMouseMove:r?void 0:this.props.onMouseMove},this.props.titleIconURL&&a.createElement("div",{className:v.eo},a.createElement("img",{src:this.props.titleIconURL,alt:""})),this.props.titleIconSvgSrc&&a.createElement("div",{className:v.fp},a.createElement(u.B,{svg:this.props.titleIconSvgSrc,className:this.props.titleIconSvgClassName})),"function"==typeof this.props.title?this.props.title(n):a.createElement(a.Fragment,null,"string"==typeof this.props.title?a.createElement(_,{title:this.props.title,truncateTitleText:this.props.truncateTitleText}):this.props.title,a.createElement("div",{className:v.hS},this.props.customButton,!this.props.isCloseHidden&&n))),this.props.children)}}function _(e){return a.createElement("div",{className:e.truncateTitleText?v.TX:v.R2},e.title)}y.displayName="HeaderModalContainer"},223556:(e,t,n)=>{n.d(t,{$W:()=>l,BX:()=>s,Ew:()=>u,Ho:()=>i,is:()=>c});var a=n(935283),r=n(992271),o=n(852800);function l(e){let t=e.getCurrentPage();(0,a.vA)(!!t,"expected currentPage to exist");let n=t.prototypeDevice;return n?n.presetIdentifier:null}function i(e,t,n){let r=t.x/t.y,o=e.x/e.y;(0,a.vA)(.01>Math.abs(r-o),`Expected ${r} \u2248 ${o}`);let l=e.x/t.x;return{x:n.x*l,y:n.y*l}}function s(e,t,n){let a=e.x/n.x;return{x:t.x*a,y:t.y*a}}let d=e=>{let t=r.hY[e];return(0,a.B1)(t,"getDeviceImageIdealSize must take in a valid presetIdentifier"),{x:t.imageSize.x/t.scaleFactor,y:t.imageSize.y/t.scaleFactor}};function c(e,t){let n=e=>({x:e.y,y:e.x}),{framePresetSize:a,offset:l}=r.hY[e],i=d(e),s=t===o.xOL.CCW_90,c={x:i.x-a.x-l.x,y:l.y};return s?{idealDeviceSize:n(i),framePresetSize:n(a),offset:n(c)}:{idealDeviceSize:i,framePresetSize:a,offset:l}}function u(e,t){let n=r.hY[e],o=r.hY[t];return(0,a.B1)(n,"expected device1 to exist"),(0,a.B1)(o,"expected device2 to exist"),n.deviceName===o.deviceName&&n.imageSize.x===o.imageSize.x&&n.imageSize.y===o.imageSize.y}},255416:(e,t,n)=>{n.d(t,{Yp:()=>eS,mD:()=>ew,pQ:()=>e_});var a=n(411855),r=n(188507),o=n(629019),l=n.n(o),i=n(737947),s=n(794272),d=n(966712),c=n(374626),u=n(860601),p=n(572174),m=n(563706),f=n(179940),g=n(153234),h=n(175515),v=n(761870),E=n(394910),w=n(201242),y=n(373466),_=n(762638),S=n(939863),I=n(56029),C=n(392592),N=n(249988),b=n(403115),P=n(738269),k=n(662275),T=n(938908),x=n(696097),D=n(992271),O=n(259927),A=n(798099),B=n(661843),M=n(288536),L=n(122983),F=n(737499),R=n(611978),U=n(860178),H=n(94500),W=n(433861),V=n(559403),z=n(319906),K=n(421407),$=n(834898),Z=n(728268),q=n(991167),Y=n(747396),Q=n(209932),G=n(347127),J=n(449745),X=n(189182),j=n(514736),ee=n(448879),et=n(91425),en=n(457749),ea=n(227952),er=n(319008),eo=n(26941),el=n(215688),ei=n(137874),es=n(833131),ed=n(632822),ec=n(650169),eu=n(957369),ep=n(250118),em=n(868912),ef=n(149836),eg=n(945564);let eh=(0,L.ck)(),ev={x:0,y:0,width:0,height:0},eE={x:0,y:0};function ew(e){let{viewer:t,getViewport:n}=e,r=a.useMemo(()=>({getViewportInfo:()=>n(),getRawViewportInfo:()=>n(),getCommentsWrapperOffset:e=>({x:-.5,y:0}),setCanvasSpaceCenter:(e,n,a)=>{if(!t||!t.getCurrentTlfBounds())return;let{x:r,y:o}=e;t.setCanvasSpaceCenterWithScroll({x:r,y:o})},setZoomScale:(e,n)=>t?t.adjustZoom(n/e,0):u.lQ,setHovering:u.lQ,setCurrentPageIdAsync:e=>(null==t||t.setCurrentPageId(e),Promise.resolve()),pageIdForNodeId:e=>t?t.pageIdForNodeId(e):"1:0",getCommentDestinationForCanvasPosition:(e,n)=>{if(!t)return null;let a=t.getCommentDestinationAtPosition(e),r=null!=a&&!!a.nodeId||void 0;return{canvasPosition:e,nodeId:(null==a?void 0:a.nodeId)||void 0,nodeOffset:(null==a?void 0:a.nodeOffset)||void 0,inFrame:r,pageId:n,createdIn:"prototype"}},getValidCommentsRect:()=>t?t.getCurrentTlfBounds():null}),[t,n]),o=a.useMemo(()=>new W.f5(r),[r]);return a.createElement(W.kw.Provider,{value:o},a.createElement(W.Bj,{getViewport:e.getViewport},e.children))}function ey(e){return{appWindow:e.appWindow,contacts:e.contacts,currentTeamId:e.currentTeamId,currentUserOrgId:e.currentUserOrgId,dropdownShown:e.dropdownShown,fileByKey:e.fileByKey,flashes:e.flashes,folders:e.folders,interactionTestDialogShown:e.interactionTestDialogShown,licenseGroups:e.licenseGroups,modalShown:e.modalShown,multiplayer:e.multiplayer,openFile:e.openFile,orgById:e.orgById,orgDomains:e.orgDomains,orgDraftsOwners:e.orgDraftsOwners,orgTeams:e.orgTeams,orgUsersByOrgId:e.orgUsersByOrgId,pickerShown:e.pickerShown,progress:e.progress,prototype:e.prototype,repos:e.repos,roles:e.roles,selectedView:e.selectedView,teams:e.teams,teamUserByTeamId:e.teamUserByTeamId,user:e.user,userEduGracePeriods:e.userEduGracePeriods,visualBell:e.visualBell}}function e_(){return(0,s.R)(ey)}function eS(e){var t,n,o,s,u,_;let{viewer:x,viewerElement:O,setViewerElement:L}=e,W=(0,f.qg)(i.Ay.location.search);delete W.embed_host,delete W["embed-host"],delete W["hide-ui"];let $=(0,r.wA)();a.useEffect(()=>{$(T.cL())},[$]);let Z=!!W.needsAlpha;a.useEffect(()=>{Z&&(document.body.style.background="transparent")},[Z]);let Y=(0,U.TA)(),j=(0,r.d4)(e=>e.comments),ee=(0,r.d4)(e=>!!e.modalShown),et=(0,c.md)(K.n),[,ea]=(0,c.fp)(ep.Bf),ey=a.useRef(null),e_=(0,ep.b0)();a.useEffect(()=>{ey.current=O},[ey,O]);let eS=(0,R._6)();if("prototype"!==eS.view)throw Error(`Unexpected non-prototype view: ${eS.view}`);let eN=(0,eu.tK)();a.useEffect(()=>{if(null===x||null===eN)return;let e=x.getStoredPrototypeDevice();(null==e?void 0:e.presetIdentifier)!==eN.presetIdentifier&&x.setStoredPrototypeDevice(eN)},[eN,x]),ep.VX(x,e.scalingInfo.viewportScalingMode,eN),ep.JI(x,e.file.canViewPrototypeAndNotFile),ep.kS(x,e.file.canEdit),h.O5(x,"prototypeDeviceChanged",e=>{ea((0,ep.RR)({baseScreenBounds:null==x?void 0:x.getCurrentTlfBounds(),deviceType:null==e?void 0:e.type})),(null==e?void 0:e.type)==="PRESET"&&eS.showDeviceFrame&&!m.rr&&x&&x.preloadDeviceFrames(e,(0,D.WT)(D.LM[(0,D.qt)(e.presetIdentifier)],e).map(t=>({type:"PRESET",presetIdentifier:t.presetIdentifier,size:t.framePresetSize,rotation:(null==e?void 0:e.rotation)||"NONE"}))),$((0,H.Cs)({newDevice:e}))}),h.O5(x,"documentIsLoaded",()=>{if(!x)return;let e=x.getStoredPrototypeDevice();(function(e,t){if(!e)return;let n=e.getActivePrototypeStartingPointNodeId()??e.getBaseScreenId(),a=n?e.getPrototypeNode(n):e.getTopmostFrameNode(),r=a?e.nodeFullSize(a):e.getCurrentTlfBounds();ep.pZ(r),window.parent.postMessage({type:"EMBED_PROTO_DEVICE",data:{device:t}},"*")})(x,e),ea((0,ep.RR)({baseScreenBounds:x.getCurrentTlfBounds(),deviceType:null==e?void 0:e.type}))});let{getViewport:eb}=ep.ew(x,O),{fadeBehavior:eP,showUI:ek,setHideUI:eT}=ep.uR(x,O,e.prototype.showProgressBar,e.file,e.isCommentsMode),{showNextFrame:ex,showPreviousFrame:eD,restartPrototype:eO}=ep.Qd(x,e.multiplayer),eA=a.useCallback(()=>{$((0,H.Zh)({name:"prototype.replay_clicked",params:{source:"new tab viewer"}})),eO()},[$,eO]),eB=a.useCallback(()=>{$(v.I.init({origin:"prototype_comment_signed_out"})),$(k.to({type:z.x,data:{id:el.nO,headerText:`Log in or create an account to leave comments on "${e.file.name}".`}}))},[$,e.file.name]);ep.r7(e.recordingKey,x,e.user,e.prototype,eN,j,e.isCommentsMode,e.multiplayer,eB,e.modalShown,eT,eP),ep.QZ(),ep.f9(x,e.file,e.prototype),ep.cT(x,e.file,e.prototype,(0,d.Ay)().tracking_session_id||null,e.isCommentsMode,ey);let{currFrameIndex:eM,numFrames:eL,shouldShowFrameCounter:eF,navigateForwardEnabled:eR,navigateBackwardEnabled:eU}=ep.Xl(x);a.useEffect(()=>{e_&&window.parent.postMessage({type:"INLINE_PREVIEW_SET_FRAME_CONTROLS",data:{navigateBackwardEnabled:eU,navigateForwardEnabled:eR}},"*")},[eU,eR,e_]);let eH=a.useCallback(e=>{x&&(x.setActivePrototypeStartingPointNodeId(e),x.navigateToFrameAndCloseOverlays(e),eA())},[x,eA]);a.useEffect(()=>{if(!e_)return;let e=e=>{var t,n;e.origin===location.origin&&((null==(t=e.data)?void 0:t.type)==="SET_SCALING_MODE"?$((0,H.Jr)({...e.data.data.scalingInfo,userInitiated:e.data.data.userInitiated,source:"inline-preview"})):(null==(n=e.data)?void 0:n.type)==="INLINE_PREVIEW_WAS_MODAL_OPENED_SINCE_VIEWER_LOADED"&&I.Su.setWasInlinePreviewModalOpenedSinceViewerLoaded(e.data.data.wasModalOpenedSinceViewerLoaded))};return window.addEventListener("message",e),window.parent.postMessage({type:"INLINE_PREVIEW_READY_TO_RECEIVE_MESSAGES"},"*"),()=>{window.removeEventListener("message",e)}},[$,e_]),a.useEffect(()=>{let e=e=>{var t,n;e.origin===location.origin&&((null==(t=e.data)?void 0:t.type)==="SET_OBSERVING_SESSION_ID"&&x&&x.observingSessionId()!==e.data.data.sessionId&&x.setObservingSessionID(e.data.data.sessionId),(null==(n=e.data)?void 0:n.type)==="PROTOTYPE_EMBED_SELECT_FLOW"&&eH(e.data.data.flowId))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[x,$,e_,eH]),ep.Zt(e.prototype,e.file.name,x);let[eW,eV]=a.useState(null),ez=function(){let[e,t]=a.useState(!0),n=()=>void t(!0),r=()=>void t(!1);return a.useEffect(()=>(document.body.addEventListener("focus",n,!0),document.body.addEventListener("mouseup",r,!0),document.body.addEventListener("mousemove",r,!0),()=>{document.body.removeEventListener("focus",n,!0),document.body.removeEventListener("mouseup",r,!0),document.body.removeEventListener("mousemove",r,!0)}),[]),e}(),eK=e.appWindow.inFullScreenMode,e$=eS.bareUI||m.rr,eZ=eN&&"NONE"!==eN.type,eq="min-zoom"===e.scalingInfo.viewportScalingMode||"scale-down-width"===e.scalingInfo.viewportScalingMode||"responsive"===e.scalingInfo.contentScalingMode&&!eZ||e$||eK||e_,eY=e.prototype.backgroundColor,eQ=`rgba(${eY.r}, ${eY.g}, ${eY.b}, ${eY.a/255})`,eG=e$&&Z?{}:{backgroundColor:eQ},eJ=eS.hideUI,eX=ek&&!eJ,ej=eS.showProtoSidebar&&!eJ;!eJ&&e.multiplayer.sessionID!==e.multiplayer.presenterSessionID&&(0,p.Vq)(e.multiplayer.presenterSessionID)&&-1===e.multiplayer.observingSessionID&&(eX=!0),e$&&null!=x&&"NONLINEAR"===x.prototypeType()&&(eX=!1,ej=!1);let e0=!eX&&!ej&&!et,e1=eW||ef.xt,e2=e=>{let t={...eS,showProtoSidebar:e};$(P.$T(t)),$((0,H._P)({name:"Prototype Show Flows Sidebar",params:{show:e}}))},e5=(null==eN?void 0:eN.type)==="PRESET"&&!e$&&!m.rr,e6=!eJ&&!eS.bareUI&&ep.dH()&&!eh;(0,d.kc)().embedkit_v2&&(e6=e6&&(0,b.s_)().showFooter);let e9=(0,d.Ay)(),e7=Object.keys(W).map(e=>`${e}=${W[e]||""}`).join("&"),e3=(0,B.kx)(x),e8=a.useCallback(e=>{null!==x&&x.watchBoundsForNodes(e)},[x]),e4=a.useCallback(e=>null===x?{}:x.getCanvasSpaceCommentLocations(e),[x]),te=a.useCallback((e,t,n)=>({}),[]),[tt,tn]=a.useState(!1),ta=new Set(["resolved","yours"]),tr=`${eg.KK} ${ez||e.isCommentsMode?"":eg.h2}`,to=function(e,t,n){let[r,o]=a.useState(""),l=(0,A.ft)()?"pointermove":"mousemove";return a.useEffect(()=>{let a=a=>{if(!e){o("");return}let r={x:a.clientX,y:a.clientY},l=(null==t?void 0:t.getCurrentTlfBounds())||ev,i=(null==n?void 0:n.getBoundingClientRect())||eE,s={x:l.x+i.x,y:l.y+i.y};o(r.x>=s.x&&r.x<=s.x+l.width&&r.y>=s.y&&r.y<=s.y+l.height&&eg.S4||"")};return document.addEventListener(l,a),()=>{document.removeEventListener(l,a)}},[l,e,t,n]),r}(e.isCommentsMode,x,O),tl=(0,G.fK)(e.file.editorType)?a.createElement(J.j,{file:e.file,fadeBehavior:eP,showProgressBar:e.prototype.showProgressBar,showComments:e.prototype.showComments,shouldShowUI:eX,multiplayer:e.multiplayer,recordingKey:g.Pt(e,"header")}):a.createElement(es.Y9,{file:e.file,prototype:e.prototype,multiplayer:e.multiplayer,shouldShowUI:eX,shouldHideHeader:e0,showAuthCommentsModal:eB,prototypeBGColor:e.prototype.backgroundColor||V.o,inFullScreenMode:eK,onBlurCapture:eP.handleHeaderOrFooterBlur,onFocusCapture:eP.handleHeaderOrFooterFocus,onMouseMove:eP.handleHeaderOrFooterMove,recordingKey:g.Pt(e,"header"),startingPointsData:(null==(t=null==x?void 0:x.prototypeStartingPointsData)?void 0:t.call(x))||[],sidebarData:{setShowSidebar:e2,isSidebarOpen:!!ej,sidebarId:el.IO},isCommentsSidebarOpen:e.isCommentsMode,viewer:x,setAccessibilityTreeFocus:tn,optionsMenu:a.createElement(ec.Ag,{editorType:e.file.editorType,device:eN,showHotspots:e.showHotspots,showPrototypeOptions:e.showPrototypeOptions,showDeviceFrame:e.showDeviceFrame,dropdownShown:e.dropdownShown,setHideUI:eT,recordingKey:g.Pt(g.Pt(e,"header"),"options-menu")})});return a.createElement(eI,{file:e.file,orgId:(null==(n=e.org)?void 0:n.id)||null,nodeId:(null==eS?void 0:eS.nodeId)||null,comments:j,getPageIdsForNodes:e3,commentAnchorPositions:e4,commentBoundingBoxAnchorPositions:te,commentWatchBoundsForNodes:e8,viewer:x},x?a.createElement(M.il,{viewer:x}):null,a.createElement(ew,{getViewport:eb,viewer:x},a.createElement("div",{"aria-hidden":ee,className:tr},a.createElement("div",{className:`${eg.Tp} ${Z?eg.t0:""} ${e.isCommentsMode?"viewer-cursors-disabled":""}`,onMouseMove:e=>{eP.handlePageMouseMove(e,ej?e1:0)},style:eG},!e$&&tl,a.createElement("div",{className:eg.Qs},!e$&&a.createElement(ef.rI,{id:el.IO,showSidebar:!!ej,openFileKey:e.file.key,startingPointsData:(null==(o=null==x?void 0:x.prototypeStartingPointsData)?void 0:o.call(x))||[],activePrototypeStartingPointNodeId:(null==(s=null==x?void 0:x.getActivePrototypeStartingPointNodeId)?void 0:s.call(x))||"",onSelectFlow:eH,setShowSidebar:e2,setSidebarWidthInParent:eV}),a.createElement("div",{className:l()(eg.Xw,{[eg.wc]:ej&&!("contain"===e.scalingInfo.viewportScalingMode||"scale-down"===e.scalingInfo.viewportScalingMode)})},a.createElement("div",{style:{userSelect:"none"},className:l()(to,eq?eg.Jf:eg.q9)},a.createElement(eo.HC,{autofocus:tt,setAutofocus:tn,viewer:x}),a.createElement("div",{id:"viewerContainer",className:eg.lJ,ref:L})),!(null==(u=(0,F.Jp)())?void 0:u.shouldHideFooter)&&a.createElement("div",{onBlurCapture:eP.handleHeaderOrFooterBlur,onFocusCapture:eP.handleHeaderOrFooterFocus,onMouseMove:eP.handleHeaderOrFooterMove,onMouseDown:e=>{e.stopPropagation()},className:eg.xQ},a.createElement(w.wi,{navigateForwardEnabled:eR,navigateBackwardEnabled:eU,shouldShowFrameCounter:eF,frameCount:eL,currentFrameIndex:eM,shouldShowUI:eX||"feed"===W["redirect-src"],showPreviousFrame:eD,showNextFrame:ex,dispatch:$,viewer:x,restartPrototype:eA,editorType:e.file.editorType,recordingKey:g.Pt(e,"footer"),optionsMenu:e5?a.createElement(ec.Ag,{editorType:e.file.editorType,device:eN,dropdownShown:e.dropdownShown,showHotspots:e.showHotspots,showPrototypeOptions:e.showPrototypeOptions,showDeviceFrame:e.showDeviceFrame,setHideUI:eT,isFooter:!0,recordingKey:g.Pt(g.Pt(e,"footer"),"options-menu")}):void 0}))),!e$&&x&&!e_&&a.createElement(em.L,{showSidebar:e.isCommentsMode,scrollable:!1},a.createElement(en.B,{filters:ta,hideSettingsDropdown:!0,hidePageName:!0,hideOrphanedState:!0,hideResolve:!1,onCloseButton:()=>$(T.BZ())}))),a.createElement(ed.i,{viewer:x,viewerEl:O}),a.createElement(eC,{...e,viewer:x,viewerElement:O,gestureCanvasRef:ey}),e.prototype.isReconnecting&&a.createElement(q.z,{clientType:"prototype"}),e.dropdownShown&&e.dropdownShown.type===ef.iO&&a.createElement(E.tH,{boundaryKey:"FlowContextMenu",onError:()=>{e.dispatch(C.F.enqueue({message:"Unable to open context menu",type:"react-error"}))},fallback:E.H4.NONE_I_KNOW_WHAT_IM_DOING},a.createElement(ei.F,{clientX:e.dropdownShown.data.clientX,clientY:e.dropdownShown.data.clientY,nodeId:e.dropdownShown.data.nodeId,prototypeUrl:e.file.prototypeUrl,fileKey:e.file.key,startingPointsData:(null==(_=null==x?void 0:x.prototypeStartingPointsData)?void 0:_.call(x))||[]}))),a.createElement(X.$,null),e.file.key&&e6&&((0,d.kc)().embedkit_v2?a.createElement(N.y,{accessData:e9,isPrototype:!0,fileKey:e.file.key,params:e7,fileName:e.file.name||(0,S.t)("proto.embeds.loading"),touchedAt:e.file.touchedAt}):a.createElement(Q.y,{isPrototype:!0,...e9,fileKey:e.file.key,params:e7,fileName:e.file.name||(0,S.t)("proto.embeds.loading"),touchedAt:e.file.touchedAt})),!Y&&a.createElement(y.j,null)),!!x&&!eS.bareUI&&a.createElement(er.Nz,{prototypeHeaderHidden:e0})))}function eI(e){var t,n,r;let o=(0,U.TA)(),l=null==(t=e.viewer)?void 0:t.getTopmostFrameNode(),i=l&&(null==(n=e.viewer)?void 0:n.nodeId(l))||e.nodeId,s=null!=(0,F.Jp)()?Y.jm:ee.y;return a.createElement(x.NX,{userId:o,file:e.file,orgId:e.orgId,activeId:(null==(r=e.comments.activeThread)?void 0:r.id)||null,anchorPositions:e.commentAnchorPositions,boundingBoxPositions:e.commentBoundingBoxAnchorPositions,DEPRECATED_updateWatchedNodeIds:e.commentWatchBoundsForNodes,getPageIdsForNodes:e.getPageIdsForNodes},a.createElement(j.a.Provider,{value:s},a.createElement(ea.pO,{initialFilterState:{currentNode:!0},currentNode:i||void 0},e.children)))}function eC(e){var t,n,o;let l=(0,et.v)(),i=(0,r.wA)(),s=(0,r.d4)(e=>e.comments);if(a.useEffect(()=>{e.isCommentsMode&&i((0,H._P)({name:"Prototype Comments Viewed"}))},[i,e.isCommentsMode]),!e.isCommentsMode||!e.user||!e.viewer||!e.viewerElement||!e.prototype.currentPageId)return null;let{comment:d,parentRect:c,thread:u,isUnread:p}=(null==(t=e.dropdownShown)?void 0:t.data)||{},m=e.user&&(null==(n=e.dropdownShown)?void 0:n.type)===O.VJ;return a.createElement("div",{id:el.Bt,className:_.cx.relative.zIndex1.$},a.createElement($.$2,{modeOverride:"details",pageId:e.prototype.currentPageId,activeId:(null==(o=s.activeThread)?void 0:o.id)||null,showOnlyParticipatingComments:e.prototype.showOnlyParticipatingComments,showResolvedComments:e.prototype.showResolvedComments,gestureCanvasRef:e.gestureCanvasRef}),m&&a.createElement(Z.V,{dispatch:e.dispatch,thread:u,comment:d,isUnread:p,parentRect:c,currentUser:e.user,copyLink:l}))}},250118:(e,t,n)=>{n.d(t,{Ac:()=>eJ,Bf:()=>e4,Fg:()=>e1,GP:()=>ej,IK:()=>e$,Ik:()=>e2,JI:()=>eW,PG:()=>e8,Pz:()=>eX,QZ:()=>eN,Qd:()=>eB,RR:()=>eO,Ti:()=>eY,VX:()=>eU,Xl:()=>eA,Yu:()=>ew,Zt:()=>eF,b0:()=>eH,cT:()=>eP,dH:()=>ey,ew:()=>eL,f9:()=>eb,kS:()=>eV,kZ:()=>e9,l1:()=>e3,on:()=>ex,pZ:()=>eR,pw:()=>eI,qW:()=>eM,r7:()=>ek,uR:()=>eS,w6:()=>eQ,xu:()=>e5});var a=n(411855),r=n(188507),o=n(776250),l=n(344780),i=n(935283),s=n(511617),d=n(297666),c=n(517333),u=n(513654),p=n(737947),m=n(966712),f=n(374626),g=n(646240),h=n(38580),v=n(498750),E=n(588169),w=n(499737),y=n(860601),_=n(563706),S=n(179940),I=n(153234),C=n(776621),N=n(96328),b=n(539130),P=n(30637),k=n(572206),T=n(30090),x=n(175515),D=n(201242),O=n(939863),A=n(56029),B=n(392592),M=n(980820),L=n(362252),F=n(831216),R=n(270068),U=n(944682),H=n(738269),W=n(293017);n(906113);var V=n(938908),z=n(992271),K=n(356390),$=n(498083),Z=n(852800),q=n(581880),Y=n(860707),Q=n(379202),G=n(87623),J=n(126911),X=n(809511),j=n(499743),ee=n(737499),et=n(605328),en=n(335682),ea=n(611978),er=n(193212);n(241437);var eo=n(892542),el=n(279453),ei=n(155300),es=n(828527),ed=n(94500),ec=n(549774),eu=n(433861),ep=n(559403),em=n(319906),ef=n(750252),eg=n(963719),eh=n(717156),ev=n(337414),eE=n(624187),ew=(e=>(e[e.PRESENTATION=0]="PRESENTATION",e[e.LARGE=1]="LARGE",e[e.SMALL=2]="SMALL",e[e.DEFAULT=3]="DEFAULT",e))(ew||{});function ey(){return s.GZ()&&!(0,P.PN)()}function e_(e,t){let{getViewport:n,viewportPositionToPrototypeCanvas:r}=eL(e,t);return a.useCallback(e=>{let t=n();return t?r(t,e):null},[n,r])}function eS(e,t,n,o,l){let[i,s]=a.useState(!1),d=a.useRef(i);d.current=i;let[c]=a.useState(()=>new ev.e(()=>d.current,s));(0,er.U3)("focus",c.onWindowFocus),a.useEffect(()=>()=>{c.teardown()},[c]),a.useEffect(()=>{n||c.handleProgressBarStoppedShowing()},[c,n]),a.useEffect(()=>{l?c.didEnterCommentsMode():c.didLeaveCommentsMode()},[c,l]),a.useEffect(()=>{c.didRscUserFlagsUpdate([])},[c]),(0,x.O5)(e,"baseScreenChanged",e=>{e.userInitiated&&c.handleHotspotClicked()});let u=e_(e,t),p=a.useCallback(t=>{if(!e)return;let n=u(t);if(!n)return;let a=e.prototypeViewHitTest(n);c.handlePageMouseDownOrTouchStart(a)},[e,c,u]);(0,x.O5)(e,"canvasMouseDown",p),(0,x.O5)(e,"canvasTouchDown",p);let m=(0,r.wA)(),f=(0,ea._6)(),g=(0,j.p)(),h=(0,eo.b)(g,eo.d.PROTOTYPE_HIDE_UI_VISUAL_BELL),v=a.useCallback(e=>{let t={...f,hideUI:e};m(H.$T(t));let n=e1();e?(m(B.F.enqueue({type:"prototype-ui-hidden",get message(){return(0,O.t)("viewer.popup.press_key_to_show_ui_again",{keycommand:n})},button:{text:(0,O.t)("viewer.popup.copy_sharing_link"),action:()=>{m(U.S({fileKey:o.key,url:`${o.prototypeUrl}${(0,ec.vp)(t,null,null,h)}`,source:eo.d.PROTOTYPE_HIDE_UI_VISUAL_BELL,skipVisualBell:!0}))}}})),m(V.BZ())):c.handleUnhideUI()},[m,c,f,o,h]);return{fadeBehavior:c,showUI:i,setHideUI:v}}function eI(){let e=(0,r.wA)(),t=(0,ea._6)();return a.useCallback(n=>{let a={...t,disableDefaultKeyboardNav:n};e(H.$T(a)),e((0,ed.Zh)({name:"prototype.figma_shortcuts_setting_changed",params:{enabled:!n}})),n?e(B.F.enqueue({type:"prototype-default-keyboard-nav-disabled",get message(){return(0,O.t)("viewer.options.default_keyboard_navigation_disabled")}})):e(B.F.enqueue({type:"prototype-default-keyboard-nav-enabled",get message(){return(0,O.t)("viewer.options.default_keyboard_navigation_enabled")}}))},[e,t])}function eC(e,t,n){-1!==t.observingSessionID&&(null==e||e.setObservingSessionID(-1),n((0,ed._P)({name:"Prototype Observation Ended",params:{multiplayerObservingSessionID:t.observingSessionID,multiplayerSessionID:t.sessionID}})))}function eN(){a.useEffect(()=>{let e=document.body.style.overscrollBehavior;return document.body.style.overscrollBehavior="none",()=>{document.body.style.overscrollBehavior=e}},[]),(0,er.U3)("touchmove",e=>e.preventDefault(),{passive:!1})}function eb(e,t,n){let o=(0,r.wA)(),l=(0,ea._6)(),i=(0,ee.e8)();a.useEffect(()=>{i&&(i._is_restartable=()=>!0,i._set_show_hotspots=e=>{o((0,ed.KJ)({showHotspots:e}))},i._set_content_scale_to_responsive=t=>{let n={viewportScalingMode:"fit-width",contentScalingMode:"fixed"};t&&(n={viewportScalingMode:"contain",contentScalingMode:"responsive"}),null==e||e.setScalingMode(n),o((0,ed.Jr)({...n,source:"mobile",userInitiated:!0}))},i._restart=()=>{o((0,ed.Zh)({name:"prototype.replay_clicked",params:{source:"new tab viewer"}})),null==e||e.restartPrototype()},i._get_file_name=()=>{var e=n.pages.find(e=>e.nodeId===n.currentPageId);return e?t.name+" - "+e.name:t.name},i._set_active_prototype_starting_point_node_id=t=>{null==e||e.setActivePrototypeStartingPointNodeId(t),null==e||e.navigateToFrameAndCloseOverlays(t),null==e||e.restartPrototype(),o(H.$T({...l,nodeId:t,startingPointNodeId:t}))},i._set_comments_visibility=e=>{e?o(V._b()):o(V.BZ())},i._get_memory_stats=()=>{var t,n,a,r;return{metadata:JSON.parse(JSON.stringify({coreJsBufferMemory:(null==(t=X.hMR)?void 0:t.getJsBufferMemory())||0,coreLocalMaxUsedHeapMemory:(null==(n=X.hMR)?void 0:n.getLocalMaxUsedHeapMemory())||0,coreMaxUsedHeapMemory:(null==(a=X.hMR)?void 0:a.getMaxUsedHeapMemory())||0,coreTotalUsedHeapMemory:(null==(r=X.hMR)?void 0:r.getTotalUsedHeapMemory())||0})),reservedWasmMemory:(0,Y.le)()||0,rendererGpuMemory:(null==e?void 0:e.getGPUMemoryTotal())||0,rendererBreakdown:null==e?void 0:e.getGPUMemoryStats()}},i._override_document_visibility_state=ef.R)},[i,o,t,n,e,l])}function eP(e,t,n,r,o,l){let i=(0,ea._6)(),s=(0,ee.Jp)();a.useEffect(()=>{(null==s?void 0:s.updateTrackingSessionId)&&r&&s.updateTrackingSessionId(r)},[s,r]),(0,et.kn)(o,l),a.useEffect(()=>{void 0!==i.showHotspots&&(null==s?void 0:s.updatePrototypeHotspotHintsVisibility)&&s.updatePrototypeHotspotHintsVisibility(i.showHotspots)},[s,i.showHotspots]),a.useEffect(()=>{if(null==s?void 0:s.updatePrototypeResponsiveContentScalingEnabled){let e=i.scalingInfo??(0,ed.M9)(i);s.updatePrototypeResponsiveContentScalingEnabled("responsive"===e.contentScalingMode)}},[s,i,i.scalingInfo]),a.useEffect(()=>{i.nodeId&&n.currentPageId&&i.nodeId!==n.currentPageId&&(null==s?void 0:s.updatePrototypeDisplayedFrameId)&&s.updatePrototypeDisplayedFrameId(i.nodeId)},[s,i.nodeId,n.currentPageId]),a.useEffect(()=>{let e=n.pages.find(e=>e.nodeId===n.currentPageId);if(e&&(null==s?void 0:s.updatePrototypeName)){let n=t.name+" - "+e.name;s.updatePrototypeName(n)}},[s,t,n]),a.useEffect(()=>{var t,n,a,r=(null==(t=null==e?void 0:e.prototypeStartingPointsData)?void 0:t.call(e))||[],o=null==(n=null==e?void 0:e.getActivePrototypeStartingPointNodeId)?void 0:n.call(e);o&&0===r.length&&r.push({id:o,name:"Flow 1",description:""}),(null==s?void 0:s.updatePrototypeStartingPoints)&&s.updatePrototypeStartingPoints({startingPoints:r,activeStartingPointNodeId:o||(null==(a=r[0])?void 0:a.id)})},[s,t,e])}function ek(e,t,n,o,l,i,s,d,c,u,p,g){let h=(0,r.wA)(),E=(0,ea._6)(),w=(0,f.md)(e4),{showNextFrame:y,showPreviousFrame:_,restartPrototype:S}=eB(t,d),C=(0,r.d4)(e=>e.interactionTestDialogShown),N=(0,F.fe)(),b=a.useCallback(e=>{s?null===i.activeThread?h(V.BZ()):i.activeThread.id&&h(R.UU()):ey()||(p(!1),h((0,ed._P)({name:"Prototype Shortcut",params:{type:"show UI"}})),h((0,ed._P)({name:"Prototype Hide UI",params:{hide:!1}})))},[h,s,i.activeThread,p]),P=a.useCallback(()=>{let e=!E.hideUI;return!ey()&&(p(e),h((0,ed._P)({name:"Prototype Shortcut",params:{type:`${e?"hide":"show"} UI`}})),h((0,ed._P)({name:"Prototype Hide UI",params:{hide:e}})),!0)},[h,E.hideUI,p]),k=a.useCallback(()=>{h((0,ed._P)({name:"Prototype Shortcut",params:{type:"comments"}})),n?s?h(V.BZ()):h(V._b()):c()},[h,s,c,n]),T=a.useCallback(e=>{let t=(0,ed.M9)(E),n=eX(null==l?void 0:l.type,w),a=eJ(t,n),r=n.findIndex(e=>e.scalingOptionId===a);-1===r?r=e.shiftKey?n.length-1:0:e.shiftKey?0===r?r=n.length-1:r--:r===n.length-1?r=0:r++;let o=n[r];h((0,ed.Jr)({...o.scalingInfo,userInitiated:!0,source:"presentation"})),h(B.F.clearAll()),h(B.F.enqueue({get message(){return(0,O.t)("viewer.popup.zoom_get_scaling_strings_new_scaling_mode",{scalingMode:ej(o.scalingOptionId)})}}))},[E,null==l?void 0:l.type,w,h]),x=a.useCallback(e=>{var t,n;if((null==u?void 0:u.type)===em.x)return I.aH;let a=e.target?e.target:null;if(a&&"BUTTON"===a.tagName&&["Space","Enter"].includes(e.code)||a&&"menu"===a.getAttribute("role")&&["Escape","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Space","Enter"].includes(e.code))return I.aH;let r=!1;(0,ed.RL)(e,E)?(_(),r=!0):e.keyCode===v.Uz.ESCAPE?(b(e),r=!0):((0,v.Te)(e)||(0,v.sC)(e,0))&&(null!=e.code&&((0,m.kc)().ce_iso_macos_i18n_keys_swap&&e.key===(null==(t=e0())?void 0:t.key)||e.code===(null==(n=e0())?void 0:n.code))||(0,v.Te)(e)&&("\\"===e.key||"."===e.key))?P()&&(r=!0):(0,ed.eA)(e,E)?(k(),r=!0):e.keyCode!==v.Uz.V||!s||e.metaKey||e.shiftKey||e.ctrlKey?(0,ed.fz)(e,E)?(h((0,ed._P)({name:"Prototype Shortcut",params:{type:"replay"}})),h((0,ed.Zh)({name:"prototype.replay_clicked",params:{source:"new tab viewer"}})),S(),r=!0):(0,ed.Bx)(e,E)?(h((0,L._M)()),r=!0):(0,ed.e)(e,E)?(T(e),r=!0):(0,ed.ql)(e)||((0,ed.yE)(e,E)?(0,F.xf)(h,N):(0,ed.Hs)(e,E)&&!i.activeThread&&(y(!0),r=!0)):(k(),r=!0),g.handleKeyDown(e,r)},[h,i.activeThread,g,k,b,P,T,u,S,y,_,E,s,t,C,N]),D=(0,I.v_)(e,"keydown",x);(0,er.U3)("keydown",D)}let eT=!1;function ex(){eT=!0}let eD=(0,M.nF)((e,{nodeId:t,startingPointNodeId:n,forceReplaceState:a})=>{let r=e.getState().selectedView;e.dispatch(H.$T({...r,nodeId:t,startingPointNodeId:n,forceReplaceState:a}))});function eO({baseScreenBounds:e,deviceType:t}){let n=3,a=e&&(0,ei.o)(e.width/e.height,16/9);if("PRESENTATION"===t||a)n=0;else if(t&&"NONE"!==t)n=3;else if(e){let{width:t}=e;n=t>1024?1:2}return n}function eA(e){let[t,n]=a.useState(0),[r,o]=a.useState(0),[l,i]=a.useState([]),[s,d]=a.useState(!1),[c,u]=a.useState(!1),[p,m]=a.useState(!1),f=a.useCallback(()=>{(null==e?void 0:e.hasActiveScene())&&(n(e.getPrototypeStateCurrentIndex()),o(e.getNodesToShowInPrototype().length),i(e.getNodesToShowInPrototype()),d("FRAME_LIST"===e.prototypeType()),u(e.getNavigateForwardEnabled()),m(e.getNavigateBackwardEnabled()))},[e]);return(0,x.O5)(e,"navigationInfoInvalidated",f),(0,x.O5)(e,"topLevelFramesListInvalidated",f),(0,x.O5)(e,"topLevelFrameChange",f),a.useEffect(()=>{f()},[f]),{currFrameIndex:t,numFrames:r,nodesToShowInPrototype:l,shouldShowFrameCounter:s,navigateForwardEnabled:c,navigateBackwardEnabled:p}}function eB(e,t){let n=(0,r.wA)();return{showNextFrame:a.useCallback(a=>{var r;t&&eC(e,t,n),(null==e?void 0:e.getNavigateForwardEnabled())&&(null==(r=(0,D.mt)())||r.animateNext(),null==e||e.navigateForward(a))},[t,n,e]),showPreviousFrame:a.useCallback(()=>{var a;t&&eC(e,t,n),(null==e?void 0:e.getNavigateBackwardEnabled())&&(null==(a=(0,D.mt)())||a.animateBack(),null==e||e.navigateBackward())},[t,n,e]),restartPrototype:a.useCallback(()=>{null==e||e.restartPrototype()},[e])}}function eM(e,t){let n=(0,r.wA)(),{showNextFrame:o,showPreviousFrame:l,restartPrototype:i}=eB(e,t);return{showNextFrame:o,showPreviousFrame:l,restartPrototype:i,navigateToFrameAtIndex:a.useCallback(a=>{t&&eC(e,t,n),null==e||e.navigateToFrameAtIndex(a)},[t,n,e])}}function eL(e,t){let n=a.useRef(null),r=a.useRef(null),o=a.useCallback(()=>{if(t){let e=t.getElementsByTagName("canvas");return 1===e.length?e[0]:null}return null},[t]),l=a.useCallback(()=>{var e,t;let a=o(),l=n.current;if(!a||!l)return;let i=a.getBoundingClientRect(),s={x:i.left,y:i.top,width:i.width,height:i.height,offsetX:-l.offset.x+((null==(e=null==r?void 0:r.current)?void 0:e.x)||0),offsetY:-l.offset.y+((null==(t=null==r?void 0:r.current)?void 0:t.y)||0),zoomScale:l.zoomScale,isPanning:!1,isZooming:!1};K.Y5.viewport.trigger("onSetViewport",s)},[o]),i=a.useCallback(()=>{var e,t;let a=o(),l=n.current,i=a&&a.getBoundingClientRect();return i&&l?{x:i.left,y:i.top,width:i.width,height:i.height,offsetX:l&&-l.offset.x+((null==(e=null==r?void 0:r.current)?void 0:e.x)||0),offsetY:l&&-l.offset.y+((null==(t=null==r?void 0:r.current)?void 0:t.y)||0),zoomScale:l&&l.zoomScale,isPanning:!1,isZooming:!1}:eu.t4},[o]),s=a.useCallback((e,t)=>{let n=o(),a=n&&n.getBoundingClientRect();return a?k.Mi.rounded({x:(t.x-a.width/2)/e.zoomScale+e.offsetX,y:(t.y-a.height/2)/e.zoomScale+e.offsetY}):null},[o]);return(0,x.O5)(e,"viewportChanged",t=>{if(n.current=t,e){let t=e.getTopmostFrameNode();t&&(r.current=e.nodeScrollBounds(t))}l()}),(0,x.O5)(e,"scrollNode",t=>{if(e){let n=e.getTopmostFrameNode();n&&t===e.nodeId(n)&&(r.current=e.nodeScrollBounds(n),l())}}),(0,x.O5)(e,"canvasResize",l),{getViewport:i,viewportPositionToPrototypeCanvas:s}}function eF(e,t,n){let r=null==n?void 0:n.prototypeStartingPointsData(),o=null==n?void 0:n.getActivePrototypeStartingPointNodeId();a.useEffect(()=>{let n=e.pages.find(t=>t.nodeId===e.currentPageId);if(n){var a;a=n.name,e6()&&window.parent.postMessage({type:"EMBED_PROTO_FILE_METADATA",data:{fileName:t,pageName:a,startingPointsData:r,activeStartingPointNodeId:o}},"*")}},[t,e.pages,e.currentPageId,r,o])}function eR(e){if(e6()&&e&&e.height>0){let t=e.width/e.height;t&&window.parent.postMessage({type:"EMBED_PROTO_ASPECT_RATIO",data:{aspectRatio:t}},"*")}}function eU(e,t,n){a.useEffect(()=>{var a;let r,o,l,i;if(!e||_.Ay.mobile)return;let s=((null==(a=null==n?void 0:n.presetIdentifier)?void 0:a.length)||0)>0;"scale-down-width"!==t&&"fit-width"!==t&&("min-zoom"!==t||s)?(r=12,o=12,l=54,i=54):(r=0,o=0,l=0,i=0),e.setScrollPadding({left:r,right:o,top:l,bottom:i})},[e,t,n])}function eH(){return(0,r.d4)(e=>!!("prototype"===e.selectedView.view&&e.selectedView.inlinePreview))}function eW(e,t){let n=(0,er.aq)(),r=a.useCallback(()=>{t&&n()&&(ey()?window.location.replace("/404"):p.Ay.redirect("/404"))},[t,n]);(0,x.O5)(e,"redirectingToFirstPageDueToInvalidStartNode",r)}function eV(e,t){let n=(0,r.wA)(),o=a.useCallback((0,d.s)(()=>{t&&n(B.F.enqueue({type:"Symbol",get message(){return(0,O.t)("viewer.popup.couldn_t_play_interaction_nested_instance_is_swapped_with_its_parent_instance")},error:!1}))},200),[]);(0,x.O5)(e,"stateSwapFailedDueToCycle",o)}let ez=y.lQ;function eK(e){return e&&"NONE"!==e&&"PRESENTATION"!==e}var e$=(e=>(e.UNKNOWN="UNKNOWN",e.ACTUAL_SIZE="ACTUAL_SIZE",e.FIT_TO_SCREEN="FIT_TO_SCREEN",e.FIT_WIDTH="FIT_WIDTH",e.FILL_SCREEN="FILL_SCREEN",e.RESPONSIVE="RESPONSIVE",e))(e$||{});let eZ={3:["ACTUAL_SIZE","FIT_TO_SCREEN","FIT_WIDTH","FILL_SCREEN","RESPONSIVE"],0:["FILL_SCREEN","ACTUAL_SIZE","FIT_TO_SCREEN","FIT_WIDTH","RESPONSIVE"],1:["ACTUAL_SIZE","RESPONSIVE","FIT_WIDTH","FIT_TO_SCREEN","FILL_SCREEN"],2:["ACTUAL_SIZE","FIT_TO_SCREEN","FIT_WIDTH","RESPONSIVE","FILL_SCREEN"]},eq={ACTUAL_SIZE:{viewportScalingMode:"min-zoom",contentScalingMode:"fixed"},FIT_TO_SCREEN:{viewportScalingMode:"scale-down",contentScalingMode:"fixed"},FIT_WIDTH:{viewportScalingMode:"scale-down-width",contentScalingMode:"fixed"},FILL_SCREEN:{viewportScalingMode:"contain",contentScalingMode:"fixed"},RESPONSIVE:{viewportScalingMode:"contain",contentScalingMode:"responsive"}};function eY(e){var t;return"RESPONSIVE"===e?"responsive":(null==(t=eq[e])?void 0:t.viewportScalingMode)||"unknown"}function eQ(e){switch(e.viewportScalingMode){case"scale-down":return"FIT_TO_SCREEN";case"scale-down-width":return"FIT_WIDTH";case"min-zoom":return"ACTUAL_SIZE";case"contain":if("fixed"===e.contentScalingMode)return"FILL_SCREEN";return"RESPONSIVE";default:return"UNKNOWN"}}function eG(e){return"UNKNOWN"===e?eq.ACTUAL_SIZE:eq[e]}function eJ(e,t){for(let n of t){let t=!n.scalingInfo.viewportScalingMode||n.scalingInfo.viewportScalingMode===e.viewportScalingMode,a=!n.scalingInfo.contentScalingMode||n.scalingInfo.contentScalingMode===e.contentScalingMode;if(t&&a)return n.scalingOptionId}return"UNKNOWN"}function eX(e,t){let n=eZ[t??3];return eK(e)&&(n=["FIT_TO_SCREEN","FILL_SCREEN","ACTUAL_SIZE"]),n.map(t=>{let n={scalingOptionId:t,scalingInfo:{}};return eK(e)?n.scalingInfo.viewportScalingMode=eG(t).viewportScalingMode:n.scalingInfo=eG(t),n})}function ej(e,t){switch(e){case"ACTUAL_SIZE":return t?(0,O.t)("viewer.options_menu.actual_size_100_with_device",{zoomAmount:100}):(0,O.t)("viewer.options_menu.actual_size_100",{zoomAmount:100});case"FIT_TO_SCREEN":return t?(0,O.t)("viewer.options_menu.fit_to_screen_with_device"):(0,O.t)("viewer.options_menu.fit_width_and_height");case"FIT_WIDTH":return(0,O.t)("viewer.options_menu.fit_width");case"FILL_SCREEN":return t?(0,O.t)("viewer.options_menu.fill_screen_with_device"):(0,O.t)("viewer.options_menu.fill_screen");case"RESPONSIVE":return(0,O.t)("viewer.options_menu.responsive");default:return""}}function e0(){let e=(0,E.v7)();switch(e){case X.aTn.GERMAN:return{key:"^",code:J.y.isIntlBacklashAndBackquoteSwapped()?"IntlBackslash":"Backquote"};case X.aTn.SWEDISH:case X.aTn.FINNISH:case X.aTn.UK_MAC:return{key:"\xa7",code:J.y.isIntlBacklashAndBackquoteSwapped()?"IntlBackslash":"Backquote"};case X.aTn.UK_PC:return{key:"`",code:J.y.isIntlBacklashAndBackquoteSwapped()?"IntlBackslash":"Backquote"};case X.aTn.DANISH:return{key:"$",code:J.y.isIntlBacklashAndBackquoteSwapped()?"IntlBackslash":"Backquote"};case X.aTn.NORWEGIAN:return _.Ay.mac?{key:"'",code:J.y.isIntlBacklashAndBackquoteSwapped()?"IntlBackslash":"Backquote"}:{key:"|",code:J.y.isIntlBacklashAndBackquoteSwapped()?"IntlBackslash":"Backquote"};case X.aTn.PORTUGUESE:return _.Ay.mac?{key:"\xa7",code:J.y.isIntlBacklashAndBackquoteSwapped()?"IntlBackslash":"Backquote"}:{key:"\\",code:J.y.isIntlBacklashAndBackquoteSwapped()?"IntlBackslash":"Backquote"};case X.aTn.SPANISH:return{key:"\xba",code:J.y.isIntlBacklashAndBackquoteSwapped()?"IntlBackslash":"Backquote"};case X.aTn.SPANISH_LATAM:return{key:"|",code:J.y.isIntlBacklashAndBackquoteSwapped()?"IntlBackslash":"Backquote"};case X.aTn.FRENCH_AZERTY:return{key:"@",code:J.y.isIntlBacklashAndBackquoteSwapped()?"IntlBackslash":"Backquote"};case X.aTn.HIRAGANA_KANA:return{key:"@",code:"BracketLeft"};case X.aTn.KOREAN:return{key:"\u20A9",code:J.y.isIntlBacklashAndBackquoteSwapped()?"IntlBackslash":"Backquote"};case X.aTn.ITALIAN:return{key:"\\",code:J.y.isIntlBacklashAndBackquoteSwapped()?"IntlBackslash":"Backquote"};case X.aTn.US_QWERTY:case X.aTn.UNKNOWN:case X.aTn.DVORAK:case X.aTn.CHINESE:return null;default:return(0,i.xb)(e)}}function e1(){var e;let t=null==(e=e0())?void 0:e.key;return null!=t?t:`${_.Ay.mac?"\u2318":"Ctrl"}\\`}function e2(e){try{new URL(e)}catch(e){return!1}var t=window.location.origin;return e.startsWith(t+"/proto")}let e5="embedded-prototype-";function e6(){if(window!==top)try{let e=parent.document.getElementsByTagName("iframe");for(let t=0;t<e.length;t++)if(e[t].contentWindow===window&&e[t].id.startsWith(e5))return!0}catch(e){}return!1}function e9(){let e=(0,r.wA)(),t=(0,f.md)(eE.Md);a.useEffect(()=>{t.status===eE.z2.LOADED&&e(V.ku({showProgress:!1}))},[e,t])}let e7=null;function e3(e,t,n,d,f,h,v,E,w,y){let I=(0,r.wA)(),N=(0,r.d4)(e=>e.comments),k=t.inlinePreview,[D,M]=a.useState(!1);a.useEffect(()=>{(0,C.kF)("editorType",t.file.editor_type||"unknown")},[t.file.editor_type]);let L=(0,x.ur)("PROTOTYPE",e,{workerURL:Fig.tsViewerWorkerURL,deviceName:k?"viewer":"prototype",scrollToPan:!ey()||null!=(0,S.qg)(p.Ay.location.search).fullscreen,featureFlags:(0,m.kc)(),trackAnalyticsEvent:o.sx,definedAnalyticsHandler:o.az,appTimerStart:e=>{l.rH.start(`viewer:${e}`),"rendererDraw"===e&&(0,eE.AH)()&&A.Su.handleDocumentRenderStart()},appTimerStop:e=>{l.rH.stop(`viewer:${e}`),"rendererDraw"===e&&(0,eE.AH)()&&(M(!0),A.Su.handleDocumentRenderStop())},nextFrame:e=>{Z.fZb&&Z.fZb.nextFrame&&Z.fZb.nextFrame(e)},startProfile:(e,t)=>!!Z.fZb&&!!Z.fZb.startProfile&&Z.fZb.startProfile(e,t),stopProfile(e){Z.fZb&&Z.fZb.stopProfile&&Z.fZb.stopProfile(e)},trackingSessionId:(0,m.Ay)().tracking_session_id||null,deviceInfoByIdentifier:z.hY,bowser:_.Ay,gameControllerListener:x.l9,interactionTestState:(0,P.Ns)()?"RECORD":(0,P.nl)()?"PLAYBACK":"NONE",disablePrototypeDeviceFrames:_.rr||k,isInlinePreview:k,isSlidesEmbed:e6(),forceMobileOptimizations:t.mobileOptimizations,kiwiSchema:b.w});a.useEffect(()=>{if(L)return k||window.focus(),()=>L.reset()},[k,L,t.showDebugStats]),function(e,t,n,o,l){let i=(0,er.aq)(),d=(0,r.wA)(),c=(0,en.tS)()||"",u=a.useRef(-1),p=a.useRef(!1);a.useEffect(()=>{e&&u.current<0&&(u.current=Date.now())},[e]);let m=a.useCallback(e=>{let a;if(p.current)return;let{baseScreenHeight:r,baseScreenWidth:o,deviceSizeWidth:i,deviceSizeHeight:s,...m}=e;i&&s&&(o<i||r<s?a="smaller":o>i?a="bigger":o===i&&r>=s&&(a="same"));let f={mobile:_.Ay.mobile,hasConnections:0!==e.numTransitions,scalingMode:t.viewportScalingMode,contentScalingMode:t.contentScalingMode,urlHideUI:!!n.hideUI,numAnimatedTransitions:e.numTransitionsWithAnimation,timeSinceViewerCreatedMs:Date.now()-u.current,baseScreenHeight:e.isInlinePreview?void 0:r,baseScreenWidth:e.isInlinePreview?void 0:o,windowWidth:window.innerWidth,windowHeight:window.innerHeight,contentSizeComparedToDeviceSize:a,...m,productType:l,fileKey:c};d((0,ed.Zh)({name:"prototype.prototype_viewed",params:f})),n.hideUI&&d((0,ed._P)({name:"Prototype Hide UI",params:{hide:!0}})),p.current=!0},[d,t,n.hideUI,l,c]),f=a.useCallback(async()=>{if(!e||ey()||"design"!==n.file.editor_type)return;let t=e.getNodesToShowInPrototype()[0],a=t?e.pageIdForNodeId(t):null;await s.Lb(),await new Promise(e=>setTimeout(e,4e3)),i()&&d(V.Q9({fileKey:n.file.key,pageId:a||""}))},[i,d,e,n.file.key,n.file.editor_type]),h=(0,ee.Jp)(),v=a.useCallback(()=>{(null==h?void 0:h.handleCompleteInitialLoad)&&h.handleCompleteInitialLoad()},[h]),E=(0,g.Xr)(eE.Md),w=a.useCallback(()=>{if((0,C.ED)("Prototype","handleCompletedInitialLoad"),E({type:eE.pb.LOAD_VIEWER_INSTANCE}),Q.r.logValue("viewerSceneDidCompleteInitialLoad",Math.round(performance.now())),e){let t=e.getStatsForAnalytics();(0,P.PN)()||(0,q._I)(t.isHardwareAccelerationDisabled,d),m(t)}f(),v();try{e6()&&e&&window.parent.postMessage({type:"PRESENTER_SESSION_ID",data:{sessionId:e.userSessionId()}},"*")}catch(e){}},[e,f,m,v,d,E]),[y,S]=a.useState(!1);a.useEffect(()=>{o&&y&&A.Su.handleDocumentIsLoaded()},[o,y]);let I=a.useCallback(()=>{window.DebuggingHelpers&&(window.DebuggingHelpers.documentIsLoaded=!0),S(!0)},[]);(0,x.O5)(e,"sceneDidCompleteInitialLoad",w),(0,x.O5)(e,"documentIsLoaded",I)}(L,n,t,D,y),function(e){let t=(0,r.wA)(),n=(0,ea._6)(),o=a.useCallback(e=>{t(V.Mo({color:e||ep.o}))},[t]);(0,x.O5)(e,"prototypeBackgroundColorChange",o),a.useEffect(()=>{e&&void 0!==n.backgroundColorHex&&e.setPrototypeBackgroundColorOverride(n.backgroundColorHex)},[e,n.backgroundColorHex])}(L),function(e,{viewportScalingMode:t,contentScalingMode:n}){a.useEffect(()=>{null==e||e.setScalingMode({viewportScalingMode:t,contentScalingMode:n})},[e,t,n])}(L,n),function(e,t){let n=(0,r.wA)();(0,x.O5)(e,"disengageObservationMode",()=>eC(e,t,n))}(L,d),function(e,t){let n=(0,r.wA)(),o=a.useRef("none"),l=a.useCallback(e=>{o.current!==t&&(o.current=t,n((0,ed._P)({name:"Prototype Zoom Attempted",params:{scalingMode:t,method:e}})))},[n,t]);a.useEffect(()=>{null==e||e.setUserDidAttemptZoom(l)},[e,l])}(L,n.viewportScalingMode),function(e,t){let[n]=a.useState(()=>new es.k("Prototype Page Query"));a.useEffect(()=>{n.setFileKey(t)},[t,n]),(0,x.O5)(e,"incrementalLoadingInfo",n.logEvent)}(L,t.file.key),function(e,t){let n=(0,r.wA)(),o=a.useCallback(e=>{e=e||{observingSessionID:t.observingSessionID,presenterSessionID:t.presenterSessionID,followerCount:t.followerCount,sessionID:t.sessionID,allUsers:[],sessionNominatedByCurrentUser:null,sessionsNominatingCurrentUser:[]},n(W.J4(e))},[n,t]);(0,x.O5)(e,"multiplayerUserInfoChange",o)}(L,d),function(e,t){let n=(0,r.wA)(),o=a.useCallback(e=>{if(t.key!==e.fileKey)throw Error("Navigating to unexpected file");n(H.$T({view:"prototype",file:t,nodeId:e.guid})),p.Ay.reload("Navigate to prototype")},[n,t]);(0,x.O5)(e,"navigateToPrototype",o)}(L,t.file),function(e){let t=(0,r.wA)(),n=a.useCallback(()=>{t(B.F.enqueue({get message(){return(0,O.t)("viewer.popup.one_or_more_images_in_this_prototype_failed_to_load")},type:"image-fetch-failure-ui",button:{text:(0,O.t)("viewer.popup.learn_why"),action:()=>{p.Ay.unsafeRedirect("https://help.figma.com/hc/articles/360052988373#Prototype_images",_.Ay.mobile?void 0:"_blank")}}}))},[t]);(0,x.O5)(e,"showImageFetchFailureUI",n)}(L),(0,x.O5)(L,"urlClicked",async e=>{var t;let n=e2(e.url);if(c.eD&&n){let n=await c.eD.isTabOpen(e.url);e.openInNewWindow||n||null==(t=c.eD)||t.close({suppressReopening:!1,shouldForceClose:!1}),p.Ay.postRedirect(e.url,"_blank")}else s.jJ(e)}),(0,x.O5)(L,"loadVideoJsLib",async()=>{await (0,T.Fe)().then(e=>{L&&L.injectVideoJsLib(e)})}),function(e){let[t,n]=a.useState(!1),o=(0,r.wA)(),l=a.useCallback(()=>{t||o(B.F.enqueue({type:"missing_font_updated_prototype",get message(){return(0,O.t)("viewer.popup.some_missing_fonts_were_replaced")},error:!1})),n(!0)},[o,t,n]);(0,x.O5)(e,"missingOrLocalFontsDetected",l)}(L),function(e){let t=(0,r.wA)(),n=a.useCallback(()=>{if(!e)return;let n=e.getPages().map(e=>((0,i.KF)(!!e.id&&!!e.name,"Either page id or name is not set"),{nodeId:e.id,name:e.name})),a=e.getNodesToShowInPrototype()[0],r=a?e.pageIdForNodeId(a):null;t(V.$9({pages:n})),t(V.uh({currentPageId:r}))},[t,e]);(0,x.O5)(e,"pagesChange",n),(0,x.O5)(e,"baseScreenChanged",n)}(L),function(e,t){let n=(0,r.wA)();a.useEffect(()=>p.Ay.listen(e=>{"POP"===e&&ex()}),[]),a.useEffect(()=>{e&&e.hasActiveScene()&&eT&&(eT=!1,t.startingPointNodeId&&e.getActivePrototypeStartingPointNodeId()!==t.startingPointNodeId&&(e.setActivePrototypeStartingPointNodeId(t.startingPointNodeId),e.restartPrototype()),t.nodeId&&e.getBaseScreenId()!==t.nodeId&&e.navigateToFrameAndCloseOverlaysOrRestart(t.nodeId))},[e,t.nodeId,t.startingPointNodeId]);let o=a.useCallback(t=>{if(!e)return;let a=e.getActivePrototypeStartingPointNodeId();t.updateURL&&n(eD({nodeId:t.nodeId,startingPointNodeId:a,forceReplaceState:t.repairsInvalidState}))},[e,n]);(0,x.O5)(e,"baseScreenChanged",o)}(L,t),a.useEffect(()=>{null==L||L.setObservingSessionID(d.observingSessionID),"slides"===t.file.editor_type&&(null==L||L.setDisengageObservationOnClick(-1===d.observingSessionID))},[L,d.observingSessionID,t.file.editor_type]),a.useEffect(()=>{null==L||L.setShowHotspots(!!f)},[L,f]),a.useEffect(()=>{null==L||L.setShowDeviceFrame(!!h)},[L,h]),a.useEffect(()=>{null==L||L.setShowBareUI(e6())},[L]),a.useEffect(()=>{null==L||L.setTransitionOnClick(!v),null==L||L.setDragToPan(!v)},[L,v]),a.useEffect(()=>{if(L&&null!=(0,x.R4)()){let e=(0,x.R4)();e&&L.setMockEmbedListener(e)}},[L]),a.useEffect(()=>(L&&(e7=new u._f(t.file.key,y)).setViewer(L),()=>{null==e7||e7.uninstall()}),[L,t.file.key,y]);let F=a.useRef(t.file.key||null);return G.Ts("Prototype Periodic Metrics",()=>F.current,()=>y),(0,x.O5)(L,"sceneWillRebuildAfterReconnecting",()=>{I(V.AF({isReconnecting:!0}))}),(0,x.O5)(L,"sceneDidRebuildAfterReconnecting",()=>{I(V.AF({isReconnecting:!1}))}),(0,x.O5)(L,"baseScreenChanged",e=>{(0,o.sx)("Prototype Viewer Base Screen Changed",{nodeId:e.nodeId,editorType:t.file.editor_type})}),!function(e,t,n,o,l){let s=a.useCallback(e=>{n&&$.lS.handleMouseDown(e.x,e.y)},[n]);(0,x.O5)(e,"canvasMouseDown",s);let d=a.useCallback(e=>{n&&$.lS.handleMouseUp(e.x,e.y)},[n]);(0,x.O5)(e,"canvasMouseUp",d);let c=a.useCallback(e=>{n&&$.lS.handleMouseMove(e.x,e.y)},[n]);(0,x.O5)(e,"canvasMouseMove",c),(0,x.O5)(e,"canvasMouseDrag",c);let u=(0,ea._6)(),p=(0,r.wA)(),m=a.useRef(!1),f=a.useRef(!0),g=a.useCallback(()=>{let t=u.commentThreadId;(null==e?void 0:e.hasActiveScene())&&((null==e?void 0:e.getNodesToShowInPrototype().length)||0)>0&&t&&!m.current&&f.current?((0,i.KF)(!!l,"We shouldn't be trying to show comments for anonymous users."),m.current=!0,f.current=!1,p(V._b())):"-1"===t&&!m.current&&l&&(m.current=!0,p(V._b()))},[p,e,u.commentThreadId,l]);(0,x.O5)(e,"sceneDidCompleteInitialLoad",g);let h=a.useRef(""),v=a.useCallback(e=>{e.nodeId!==h.current&&t.activeThread&&p(R.UU()),h.current=e.nodeId},[p,t.activeThread]);(0,x.O5)(e,"baseScreenChanged",v)}(L,N,v,0,w),ez(L),!function(e,t,n){let o=(0,r.wA)(),l=e_(e,t),i=(0,ea._6)(),s=a.useCallback(t=>{("prototype"!==i.view||"slides"!==i.file.editor_type)&&l(t)&&eC(e,n,o)},[l,e,n,o,i]);(0,x.O5)(e,"canvasMouseDown",s),(0,x.O5)(e,"canvasTouchDown",s)}(L,e,d),L}function e8(e){let t=(0,g.Xr)(eE.Md);A.Su.handleLivegraphConnectionOpened();let n=function(e,t){let n=(0,w.Rs)(el.kJx,{fileKey:e}),a=(0,r.d4)(e=>{var t;return(null==(t=e.modalShown)?void 0:t.type)===eg.M});if((0,eh.ox)({file:t}),"loaded"!==n.status)return null;let o=n.data.file;if(a)return null;if(!o)return p.Ay.reload("lost access to file"),null;let{canViewPrototype:l,canView:i}=o;return{file:{key:o.key,name:o.name,prototypeUrl:`${window.location.origin}/proto/${o.key}/${(0,N.sy)(o.name)}`,touchedAt:o.updatedAt.toISOString(),teamId:o.teamId,folderId:o.folderId,editorType:o.editorType,canView:o.canView,canEdit:o.canEdit,canViewPrototypeAndNotFile:l&&!i}}}(e.file.key,{key:e.file.key,fileRepoId:e.file.file_repo_id,sourceFileKey:e.file.source_file_key}),o=!!n;return a.useEffect(()=>{o&&(t({type:eE.pb.LOAD_LIVEGRAPH}),A.Su.handleLivegraphConnectionResponded())},[o,t]),n}let e4=(0,h.eU)(3)},620430:(e,t,n)=>{n.d(t,{d:()=>E,X:()=>v});var a=n(411855),r=n(139689),o=n(629019),l=n.n(o),i=n(175515),s=n(574176),d=n(762638),c=n(457630),u=n(754209),p=n(601607);let m="viewer_reactions--emote--4N0b6";var f=n(282713);let g=["https://static.figma.com/uploads/d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2","https://static.figma.com/uploads/a83de90bf34495081ce2e8bcaf28d1d2c16e5186","https://static.figma.com/uploads/0606e9d967b5abb6d9a2853c2fff589f2ec2fc05","https://static.figma.com/uploads/ffd0635e8f9322352eff0c15411ac0b536b98d87","https://static.figma.com/uploads/ff5be810b821d264cc2c95f665d24a867c34e587","https://static.figma.com/uploads/78f60a21d2616c2a24c7645d8636dec855e48ffb","https://static.figma.com/uploads/1429964104bceac90c5c8e731ce4cc50b27e2797"];function h({viewportInfo:e,reactionInfo:t}){let n=(0,a.useRef)(Math.random()),r=(0,p.x3)((e,t)=>{let n=e.getPrototypeNode(t);return n?e.nodeCanvasSpaceBounds(n):null},t.slideId),o={x:((null==r?void 0:r.x)??0)+n.current*(((null==r?void 0:r.width)??1920)-200)+100,y:0},l=(0,c.Z0)(e,o);l.y=window.innerHeight;let[i]=(0,a.useState)(.5*Math.random()+2),[s]=(0,a.useState)(.4*Math.random()+.3),d={animationDuration:`${i.toFixed(1)}s`},u={animationDuration:`${s.toFixed(1)}s`},{x:m,y:f}=l;m-=5,f-=10;let[g]=(0,a.useState)(1*Math.random()+.5),h={willChange:"transform",transform:`translate3D(${0|m}px, ${0|f}px, 0) scale(${g})`},[v]=(0,a.useState)(Math.random()>.5?"viewer_reactions--forward--RkSy2":"viewer_reactions--backward--rBYvx");return a.createElement("div",{className:"viewer_reactions--translationContainer--0J13w",style:h},a.createElement("div",{className:"viewer_reactions--floatingEmojiContainer--gHWxI",style:d},a.createElement("img",{src:t.reactionId,className:`viewer_reactions--floatingEmoji--35P7j ${v}`,style:u,alt:""})))}function v({getViewport:e,multiplayerCursorsEnabled:t,viewer:n}){let r=(0,u.KP)(),[o,l]=(0,a.useState)({});if((0,i.O5)(n,"multiplayerUserInfoChange",()=>{n&&l(n.getReactionsBySessionId())}),!n)return null;let s=Object.keys(o);return a.createElement("div",{className:d.cx.absolute.overflowHidden.wFull.hFull.$},a.createElement("div",{className:d.cx.relative.wFull.hFull.$},s.map(n=>{let l=o[n],i=Object.keys(l);return n===`${r}`||t?a.createElement(a.Fragment,{key:n},i.map(t=>{let n=l[t];return a.createElement(h,{key:t,viewportInfo:e(),reactionInfo:n})})):null})))}function E({viewer:e}){let[t,n]=(0,a.useState)(!1);return e?a.createElement("div",{className:l()({"viewer_reactions--emotesContainerAnimatedVisible--Qk-xB":t},"viewer_reactions--emotesContainerAnimated---8WjC")},a.createElement("div",{className:"viewer_reactions--emotesContainer---4W8L"},a.createElement("button",{onClick:()=>{n(!t)},className:l()({"viewer_reactions--emojiEmote--h5fwm":!t},m)},t?a.createElement(r.A,null):a.createElement(s.B,{svg:f.A,autosize:!0})),g.map((n,r)=>a.createElement("button",{key:n,onClick:()=>{e.sendReaction(n)},style:{backgroundImage:`url(${n})`,transitionDelay:t?`${.01*r}s`:"0s"},className:l()({"viewer_reactions--emoteHidden--JQMxY":!t},m)})))):null}},201242:(e,t,n)=>{n.d(t,{PX:()=>I,gA:()=>C,hJ:()=>S,mt:()=>_,wi:()=>w,xy:()=>b});var a=n(411855),r=n(966712),o=n(563706),l=n(153234),i=n(522739),s=n(574176),d=n(939863),c=n(938908),u=n(947640),p=n(347127),m=n(620430),f=n(913854),g=n(18301),h=n(717682),v=n(942723),E=n(214735);function w(e){let{dispatch:t,shouldShowUI:n,viewer:o,editorType:i}=e;a.useEffect(()=>{t(c.y3({isFooterVisible:n}))},[t,n]);let s=(0,p.fK)(i)&&(0,r.kc)().piper_viewer_emotes;return a.createElement("div",{className:n?f.qr:f.OH,role:"navigation","aria-label":(0,d.t)("viewer.footer.accessible_label")},s&&a.createElement(m.d,{viewer:o}),a.createElement("div",{className:f.c0},a.createElement(u.y,{viewer:o})),a.createElement("div",{className:f.Pj},a.createElement(C,{navigateForwardEnabled:e.navigateForwardEnabled,navigateBackwardEnabled:e.navigateBackwardEnabled,shouldShowFrameCounter:e.shouldShowFrameCounter,frameCount:e.frameCount,currentFrameIndex:e.currentFrameIndex,showPreviousFrame:e.showPreviousFrame,showNextFrame:e.showNextFrame,backIcon:g.A,nextIcon:v.A,recordingKey:e.recordingKey,optionsMenu:e.optionsMenu,showNavigationInMobile:(0,p.fK)(i)})),a.createElement("div",{className:f.nf},a.createElement(N,{onClick:e.restartPrototype,recordingKey:l.Pt(e,"replayButton")})))}let y=null;function _(){return y}function S(e){let t=(0,a.useRef)(null),n=(0,a.useRef)(null);a.useEffect(()=>{let e={duration:200};function a(e){return[{transform:"translate3D(0px, 0, 0)"},{transform:`translate3D(${e}px, 0, 0)`},{transform:"translate3D(0px, 0, 0)"}]}return y={animateBack:()=>{null!==t.current&&t.current.animate(a(-4),e)},animateNext:()=>{null!==n.current&&n.current.animate(a(4),e)}},()=>{y=null}},[n,t]);let r=e.navigateBackwardEnabled?f.ij:f.S$,i=e.navigateForwardEnabled?f.Uz:f.cp,c=e.navigateForwardEnabled||e.navigateBackwardEnabled,u=(e.showNavigationInMobile||!o.rr)&&c,p=a.createElement(I,{forwardedRef:t,onClick:e.showPreviousFrame,recordingKey:l.Pt(e,"backButton"),label:(0,d.t)("viewer.footer.previous_frame"),disabled:!e.navigateBackwardEnabled,tabIndex:0,svg:a.createElement(s.B,{className:r,svg:e.backIcon})}),m=a.createElement(I,{forwardedRef:n,onClick:()=>{var t;return null==(t=e.showNextFrame)?void 0:t.call(e)},recordingKey:l.Pt(e,"nextButton"),label:(0,d.t)("viewer.footer.next_frame"),disabled:!e.navigateForwardEnabled,tabIndex:0,svg:a.createElement(s.B,{className:i,svg:e.nextIcon})});return a.createElement("div",{className:e.containerClassName},u&&p,!!e.shouldShowFrameCounter&&a.createElement("div",{role:"status","aria-live":"polite","aria-label":(0,d.t)("viewer.footer.readable_frame_progress",{currentFrameIndex:e.currentFrameIndex+1,frameCount:e.frameCount}),className:e.frameCounterTextClassName},(0,d.tx)("viewer.footer.frame_progress",{currentFrameIndex:e.currentFrameIndex+1,frameCount:e.frameCount})),u&&m,e.optionsMenu&&a.createElement(a.Fragment,null,(u||e.shouldShowFrameCounter)&&a.createElement("div",{className:f.K5}),e.optionsMenu))}function I({onClick:e,recordingKey:t,label:n,svg:r,tabIndex:o,forwardedRef:l,disabled:s=!1}){let d=f.QY;return a.createElement(i.GG,{className:d,disabled:s,onClick:e,"aria-label":n,recordingKey:t,tabIndex:o,forwardedRef:l,"data-fullscreen-intercept":!0},r)}function C(e){return a.createElement(S,{navigateBackwardEnabled:e.navigateBackwardEnabled,navigateForwardEnabled:e.navigateForwardEnabled,shouldShowFrameCounter:e.shouldShowFrameCounter,frameCount:e.frameCount,currentFrameIndex:e.currentFrameIndex,showPreviousFrame:e.showPreviousFrame,showNextFrame:e.showNextFrame,backIcon:e.backIcon,nextIcon:e.nextIcon,containerClassName:e.containerClassName||f.m8,frameCounterTextClassName:f.d6,recordingKey:e.recordingKey,optionsMenu:e.optionsMenu,showNavigationInMobile:e.showNavigationInMobile})}function N(e){return a.createElement(i.GG,{className:f.cQ,onClick:e.onClick,recordingKey:e.recordingKey},a.createElement(s.B,{svg:h.A}),a.createElement("div",null,(0,d.tx)("viewer.footer.restart")," ",a.createElement("span",{className:f.lE},(0,d.tx)("viewer.footer.r"))))}function b(e){return a.createElement(i.D8,{className:e.className,onClick:e.onClick,recordingKey:e.recordingKey},a.createElement(s.B,{svg:E.A,className:f.t$}),a.createElement("div",null,(0,d.tx)("viewer.footer.restart")," ",a.createElement("span",{className:f.lE}," ",(0,d.tx)("viewer.footer.r"))))}},694111:(e,t,n)=>{n.d(t,{W:()=>r});let a=["APPLE_IPHONE_14_PRO","APPLE_IPHONE_14_PLUS","APPLE_IPHONE_15","APPLE_WATCH_45MM"],r=e=>a.some(t=>e.startsWith(t))},206529:(e,t,n)=>{n.d(t,{Z:()=>eb,v:()=>eP});var a=n(852800),r=n(411855),o=n(341860),l=n(601607);function i(e){return function({nodeId:t,isReadOnly:n}){let a=(0,r.useCallback)((e,n)=>{let a=o.q.instance.get(t);a&&a.setInteractiveSlideConfigData(e,n)},[t]),i=(0,r.useCallback)(e=>{let n=o.q.instance.get(t);n&&n.deleteInteractiveSlideConfigData(e)},[t]),s=(0,r.useCallback)((e,n)=>{let a=o.q.instance.get(t);a&&a.setInteractiveSlideParticipantData(e,n)},[t]),d=(0,r.useCallback)(()=>{let e=o.q.instance.get(t);e&&e.resetInteractiveSlideParticipantData()},[t]),c=(0,l.Fk)((e,t)=>{let n=e.get(t);return n?n.interactiveSlideConfigData:null},t),u=(0,l.Fk)((e,t)=>{let n=e.get(t);return n?n.interactiveSlideParticipantData:null},t);return c&&u?r.createElement(e,{configData:c,participantData:u,setConfigData:a,setParticipantData:s,resetParticipantData:d,deleteConfigData:i,isViewer:!1,isPresenter:!1,isReadOnly:n,recordingKey:`flapp.${t}`,nodeId:t}):null}}function s(e){return function({viewer:t,nodeId:n}){let a=(0,l.x3)((e,t)=>{let n=e.getPrototypeNode(t);return n?e.nodeInteractiveSlideConfigData(n):null},n),o=(0,l.x3)((e,t)=>{let n=e.getPrototypeNode(t);return n?e.nodeInteractiveSlideParticipantData(n):null},n);if(!a||!o)return null;let i=(e,n,a)=>{t.setInteractiveSlideConfigData(e,n,a)},s=(e,n,a)=>{t.setInteractiveSlideParticipantData(e,n,a)},d=t.isPresenterSession();return r.createElement(e,{configData:a,participantData:o,setConfigData:(e,t)=>i(n,e,t),setParticipantData:(e,t)=>s(n,e,t),recordingKey:`flapp.${n}`,isViewer:!0,isPresenter:d,nodeId:n})}}var d=n(998917),c=n(861726),u=n(203910),p=n(629019),m=n.n(p),f=n(153234),g=n(659838),h=n(574176),v=n(762638),E=n(939863),w=n(259927),y=n(1469),_=n(662531),S=n(860178),I=n(498606),C=n(858943),N=n(447636);let b="alignment_scale--prompt--D-cNA";var P=n(931136);function k({recordingKey:e,prompt:t,setPrompt:n}){return r.createElement(g.L,{className:m()(b,w.Qx,w.Uu),type:"text",placeholder:(0,E.t)("slides.flapp.alignment.prompt_placeholder"),value:t,onChange:e=>{n(e.target.value)},onPaste:e=>{n(e.clipboardData.getData("text"))},recordingKey:e})}function T({prompt:e}){return r.createElement("p",{className:b},e||(0,E.t)("slides.flapp.alignment.prompt_placeholder"))}function x({configData:e,setConfigData:t,recordingKey:n,participantData:a,promptElement:o,onVoteRequest:l}){var i;let s=(0,S.iZ)(),d=l&&s?(e,t)=>{l({name:s.name,userId:s.id,thumbnailUrl:s.img_url,alignmentXOffsetPercentage:e,alignmentYOffsetPercentage:t,timestamp:Date.now()})}:void 0,[c,u]=(i=null==s?void 0:s.id,(0,r.useMemo)(()=>{let e;return a?[Object.values(a).reduce((t,n)=>{try{let a=JSON.parse(n);a.userId===i&&(e=a),t.push(a)}catch(e){}return t},[]).sort((e,t)=>e.timestamp-t.timestamp),e]:[[],void 0]},[a,i])),p="true"===e.resultsShown,g=_.nc.user("slides-toggle-alignment-scale-results-shown",()=>{t("resultsShown",(!p).toString())}),h=(0,N.aF)(e);return r.createElement("div",{className:m()(v.cx.wFull.flex.flexColumn.justifyCenter.itemsCenter.$,"alignment_scale--alignmentScaleThemeWrapper--1VvHW"),"data-preferred-theme":h.preferredTokenTheme,"data-transparency-mode":h.transparentMode},r.createElement("div",{className:"alignment_scale--mainContainer--aIN2p"},r.createElement(D,{prompt:o,allVoteData:c,currentUserVoteData:u}),r.createElement(O,{resultsShown:p,alignmentVoteData:c,onScaleClick:d}),r.createElement(A,null)),r.createElement(L,{recordingKey:f.Pt(n,"slides-alignment-scale-reveal-results"),resultsShown:p,onToggle:g}))}function D({prompt:e,allVoteData:t,currentUserVoteData:n}){return r.createElement("div",{className:"alignment_scale--headerContainer--l688h"},r.createElement("div",{className:"alignment_scale--promptContainer--hRH11 text--fontPos20--Bcz97 text--_fontBase--QdLsd"},e),r.createElement(B,{allVoteData:t,currentUserVoteData:n}))}function O({resultsShown:e,alignmentVoteData:t,onScaleClick:n}){let a=(0,r.useRef)(null),o=n?e=>{let t=e.currentTarget.getBoundingClientRect(),a=e.clientX-t.left,r=e.clientY-t.top;n(a/t.width,r/t.height)}:void 0;return r.createElement("div",{className:"alignment_scale--scaleContainerPseudoBorder--Jj6DE"},r.createElement("div",{className:"alignment_scale--scaleContainerSolidBackground--s4pRF"}),r.createElement(d.E,{className:m()("alignment_scale--scaleContainer--gmwd3",n?v.cx.cursorPointer.$:""),ref:a,onClick:o},r.createElement("div",{className:"alignment_scale--scaleLine--uHC-I"}),r.createElement("div",{className:"alignment_scale--scaleMarkerContainer--X5x-j"},r.createElement("div",{className:"alignment_scale--scaleMarker0--QIykm alignment_scale--_scaleMarker---mTsV"}),r.createElement("div",{className:"alignment_scale--scaleMarker25--3Xe8a alignment_scale--_scaleMarker---mTsV"}),r.createElement("div",{className:"alignment_scale--scaleMarker50--L4exg alignment_scale--_scaleMarker---mTsV"}),r.createElement("div",{className:"alignment_scale--scaleMarker75--Urto8 alignment_scale--_scaleMarker---mTsV"}),r.createElement("div",{className:"alignment_scale--scaleMarker100--AHcJW alignment_scale--_scaleMarker---mTsV"})),e&&a.current?t.map(e=>r.createElement("img",{src:(0,y.p)(e.thumbnailUrl),key:e.userId,alt:e.name,className:"alignment_scale--alignmentScaleVote--zkhC9",style:{left:`${Math.floor(100*e.alignmentXOffsetPercentage)}%`,top:`${Math.floor(100*e.alignmentYOffsetPercentage)}%`,transform:"translate(-15px, -15px)"}})):null))}function A(){return r.createElement("div",{className:"alignment_scale--scaleLabelContainer--HF5-I"},r.createElement("div",{className:"alignment_scale--stronglyDisagreeLabel--1Yzc0 alignment_scale--_labelBase--enfVZ text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,E.tx)("slides.flapp.alignment.strongly_disagree_label")),r.createElement("div",{className:"alignment_scale--neutralLabel--qqm5f alignment_scale--_labelBase--enfVZ text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,E.tx)("slides.flapp.alignment.neutral_label")),r.createElement("div",{className:"alignment_scale--stronglyAgreeLabel--Dhs7h alignment_scale--_labelBase--enfVZ text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,E.tx)("slides.flapp.alignment.strongly_agree_label")))}function B({allVoteData:e,currentUserVoteData:t}){let n,a=e;return t&&(a=[t,...e.filter(e=>e.userId!==t.userId)]),n=0===a.length?(0,E.t)("slides.flapp.results.no_votes_yet"):1===a.length?t?(0,E.t)("slides.flapp.results.single_self_vote"):(0,E.t)("slides.flapp.results.single_other_vote",{person:a[0].name}):t?(0,E.t)("slides.flapp.results.multiple_votes_including_user",{totalVotes:a.length-1}):(0,E.t)("slides.flapp.results.multiple_other_votes",{totalVotes:a.length}),r.createElement("div",{className:"alignment_scale--voteDisplayContainer--upm2F text--fontPos13--xW8hS text--_fontBase--QdLsd"},r.createElement("p",{className:"alignment_scale--description--kxZH3"},n),r.createElement(M,{allVoteData:a,maxToShow:2}))}function M({allVoteData:e,maxToShow:t}){let n=e.length;e.length>t+1&&(n=t);let a=e.slice(0,n),o=e.slice(n),l=o.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return r.createElement("div",{className:"alignment_scale--voteProfilesContainer--wbH0G"},a.map(e=>r.createElement("img",{className:"alignment_scale--voteProfile--Um0e6",key:e.userId,alt:e.name,src:(0,y.p)(e.thumbnailUrl),"data-tooltip-type":I.Ib.TEXT,"data-tooltip":e.name})),o.length>0?r.createElement("div",{className:"alignment_scale--overflowVote--KIoww text--fontPos11--2LvXf text--_fontBase--QdLsd","data-tooltip-type":I.Ib.SPECIAL,"data-tooltip":C.c,"data-tooltip-overflow-user-data":JSON.stringify(l)},`+${o.length}`):null)}function L({recordingKey:e,resultsShown:t,onToggle:n}){return r.createElement("div",{className:"alignment_scale--resultToggleContainer--euX1O"},r.createElement(h.B,{className:"alignment_scale--resultToggleContainerSvg--PFGWI",svg:P.A}),r.createElement(d.E,{className:"alignment_scale--resultToggle--alry6 text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:n,recordingKey:e},t?r.createElement(c.l,null):r.createElement(u.f,null),r.createElement("p",null,t?(0,E.t)("slides.flapp.results.results_shown"):(0,E.t)("slides.flapp.results.results_hidden"))))}let F={EditorFlapp:i(function(e){let{configData:t,setConfigData:n,recordingKey:a}=e,o=r.createElement(k,{recordingKey:f.Pt(a,"slides-alignment-scale-prompt-input"),prompt:t.prompt,setPrompt:e=>{_.l7.user("slides-update-alignment-scale-prompt",()=>{n("prompt",e)})}});return r.createElement(x,{...e,promptElement:o})}),ViewerFlapp:s(function(e){return r.createElement(x,{...e,promptElement:r.createElement(T,{prompt:e.configData.prompt}),onVoteRequest:t=>{_.l7.user("slides-update-alignment-scale-vote",()=>{e.setParticipantData(t.userId,JSON.stringify(t))})}})})};var R=n(934576),U=n(737947),H=n(563706),W=n(175515);function V({configData:e}){let t=(0,W.hk)(),n=(0,R.gD)(e);return r.createElement(R.wL,{deviceFrame:n},r.createElement(R.lu,{isViewer:!0,onClick:()=>{e.url&&t&&U.Ay.redirect(e.url,H.uG?void 0:"_blank")}}))}let z={EditorFlapp:i(R.DR),ViewerFlapp:s(R.E$)},K={EditorFlapp:i(V),ViewerFlapp:s(V)};var $=n(522739),Z=n(880230);function q({prompt:e,setPrompt:t}){return r.createElement(g.L,{className:m()(w.Qx,w.Uu),type:"text",placeholder:(0,E.t)("slides.flapp.facepile.prompt_placeholder"),value:e,onChange:e=>{t(e.target.value)},onPaste:e=>{t(e.clipboardData.getData("text"))},recordingKey:"facepile-prompt-input"})}function Y({prompt:e}){return r.createElement("p",null,e||(0,E.t)("slides.flapp.facepile.prompt_placeholder"))}function Q({isViewer:e,configData:t,participantData:n,promptElement:a,onToggleStampRequest:o}){let l=(0,S.iZ)(),i=function(e,t){if(!e||0===Object.keys(e).length)return{stamps:[],currentUserStamped:!1};let n=!1;return{stamps:Object.values(e).reduce((e,a)=>{try{let r=JSON.parse(a);r.userId===t&&(n=!0),e.push(r)}catch(e){}return e},[]).sort((e,n)=>e.userId===t?-1:n.userId===t?1:e.timestamp-n.timestamp),currentUserStamped:n}}(n,null==l?void 0:l.id),s=function(e,t){let{stamps:n,currentUserStamped:a}=e;return 0===n.length?t?(0,E.t)("slides.flapp.facepile.description_click_to_stamp"):(0,E.t)("slides.flapp.results.no_stamps_yet"):1===n.length?a?(0,E.t)("slides.flapp.results.single_self_stamp"):(0,E.t)("slides.flapp.results.single_other_stamp",{person:n[0].name}):a?(0,E.t)("slides.flapp.results.multiple_stamps_including_user",{totalStamps:n.length-1}):(0,E.t)("slides.flapp.results.multiple_other_stamps",{totalStamps:n.length})}(i,e),d=(0,N.aF)(t);return r.createElement("div",{className:m()("facepile--container--k1p6f","facepile--facepileThemeWrapper--dG-S8"),"data-preferred-theme":d.preferredTokenTheme,"data-transparent-mode":d.transparentMode},r.createElement("div",{className:"facepile--prompt--6Xfxz text--fontPos24--YppUD text--_fontBase--QdLsd"},a),r.createElement(G,{isStampingEnabled:e,stampsWithMetadata:i,maxStampsToShow:3,currentUser:l,onToggleStampRequest:o}),r.createElement("p",{className:"facepile--description--SesIh text--fontPos20--Bcz97 text--_fontBase--QdLsd"},s))}function G({isStampingEnabled:e,stampsWithMetadata:t,maxStampsToShow:n,currentUser:a,onToggleStampRequest:o}){let{stamps:l,currentUserStamped:i}=t,s=l.length;l.length>n+1&&(s=n);let d=l.slice(0,s),c=l.slice(s),u=e&&a&&!i;return r.createElement("div",{className:v.cx.flex.gap12.pt36.pb24.itemsCenter.alignCenter.$},d.map(e=>{let t=o&&a&&e.userId===a.id,n={text:e.name,subtext:t?(0,E.t)("slides.flapp.facepile.tooltip.click_to_remove"):void 0};return r.createElement(J,{stamp:e,tooltipToShow:n,onClick:()=>{t&&o(a.id,void 0)},key:`${e.userId}-stamp`})}),c.length>0?r.createElement(X,{overflowStamps:c}):null,r.createElement(j,{previewStamp:u?ee(a):void 0,onClick:()=>{u&&o&&o(a.id,ee(a))}}))}function J({stamp:e,showAsTemporary:t,tooltipToShow:n,onClick:a}){return r.createElement($.D8,{onClick:a,"data-tooltip-type":I.Ib.TEXT,"data-tooltip":null==n?void 0:n.text,"data-tooltip-subtext":null==n?void 0:n.subtext,"data-tooltip-offset-y":8},r.createElement("img",{className:m()("facepile--facepileStamp---gzFz facepile--_fixedStampBase--icx6v facepile--_stampBase--eCNDB",t?"facepile--temporary--3lzi6":""),src:(0,y.p)(e.thumbnailUrl),alt:e.name,draggable:!1}))}function X({overflowStamps:e}){let t=e.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return r.createElement("div",{className:"facepile--overflowStamp--j3fn3 text--fontPos22--4H4Fc text--_fontBase--QdLsd facepile--_stampBase--eCNDB","data-tooltip-type":I.Ib.SPECIAL,"data-tooltip":C.c,"data-tooltip-overflow-user-data":JSON.stringify(t),"data-tooltip-offset-y":8},r.createElement("p",null,`+${e.length}`))}function j({previewStamp:e,onClick:t}){let[n,a]=(0,r.useState)(!1);return r.createElement($.D8,{onClick:t,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},e&&n?r.createElement(J,{stamp:e,showAsTemporary:!0}):r.createElement(h.B,{className:"facepile--emptyStamp--KiqZH facepile--_fixedStampBase--icx6v facepile--_stampBase--eCNDB",svg:Z.A}))}function ee(e){return{name:e.name,userId:e.id,thumbnailUrl:e.img_url,timestamp:Date.now()}}let et={EditorFlapp:i(function(e){let t=r.createElement(q,{prompt:e.configData.prompt,setPrompt:t=>{_.l7.user("slides-update-facepile-question",()=>{e.setConfigData("prompt",t)})}});return r.createElement(Q,{...{...e,promptElement:t}})}),ViewerFlapp:s(function(e){return r.createElement(Q,{...{...e,promptElement:r.createElement(Y,{prompt:e.configData.prompt}),onToggleStampRequest:(t,n)=>{_.l7.user("slides-add-user-facepile-stamp",()=>{e.setParticipantData(t,JSON.stringify(n))})}}})})};var en=n(188507),ea=n(902008),er=n(927457),eo=n(881388);let el="poll--question--F1M7f text--fontPos30--N-YT7 text--_fontBase--QdLsd",ei="poll--optionContainer--ds9OS",es="poll--optionContentText---N25s";function ed(e){let t=[];for(let n=0;n<6;n++){let a=e[`option${n}`];void 0!==a&&t.push(a)}return t}function ec({resultsShown:e,setResultsShown:t}){return r.createElement($.GG,{className:"poll--toggleResultVisibilityButton--mcWJq text--fontPos13--xW8hS text--_fontBase--QdLsd",onClick:()=>t(!e),recordingKey:"resultsButton"},e?r.createElement(r.Fragment,null,r.createElement(c.l,null),(0,E.tx)("slides.flapp.results.results_shown")):r.createElement(r.Fragment,null,r.createElement(u.f,null),(0,E.tx)("slides.flapp.results.results_hidden")))}function eu({totalVotes:e,hasUserVote:t,firstVoteByTimestamp:n}){let a;return a=0===e?(0,E.t)("slides.flapp.results.no_votes_yet"):1===e?t?(0,E.t)("slides.flapp.results.single_self_vote"):n?(0,E.t)("slides.flapp.results.single_other_vote",{person:n.name}):(0,E.t)("slides.flapp.results.multiple_other_votes",{totalVotes:e}):t?(0,E.t)("slides.flapp.results.multiple_votes_including_user",{totalVotes:e-1}):(0,E.t)("slides.flapp.results.multiple_other_votes",{totalVotes:e}),r.createElement("p",null,a)}function ep({votes:e,children:t,isWinningVote:n,isUserVote:a,percentage:o,resultsShown:l,recordingKey:i,onClick:s}){let d=e.map(e=>({id:e.userId,handle:e.name,img_url:e.thumbnailUrl}));return r.createElement("div",{className:ei},r.createElement($.GG,{className:m()("poll--optionInner--WmnWP",s?"poll--hoverable--uHwKu":""),recordingKey:i,onClick:s,"data-tooltip-type":I.Ib.SPECIAL,"data-tooltip":d.length>0?C.c:void 0,"data-tooltip-overflow-user-data":JSON.stringify(d),"data-tooltip-offset-y":8},l&&r.createElement("div",{className:m()("poll--optionFill--birzf",n?"poll--winning--ZgYy7":""),style:{width:`${o}%`}}),r.createElement("div",{className:"poll--optionContent--XecHh text--fontPos20--Bcz97 text--_fontBase--QdLsd"},t,r.createElement("div",{className:v.cx.flex.gap8.itemsCenter.$},a&&r.createElement(ea.l,{height:"24px",width:"24px"}),l&&r.createElement("span",null,`${o}%`)))))}function em({onClick:e,recordingKey:t}){return r.createElement($.D8,{className:ei,onClick:e,recordingKey:f.Pt(t,"addOption")},r.createElement("div",{className:m()("poll--newOption--H35l3",{[v.cx.invisible.$]:!e})},r.createElement(er.e,null)))}let ef="slides-update-poll-question",eg="slides-update-poll-option",eh="slides-update-poll-options";function ev({nodeId:e,preferredTheme:t,transparencyMode:n,configData:a,participantData:l,setConfigData:i,setParticipantData:s,deleteConfigData:d,isViewer:c,recordingKey:u}){let p=(0,en.wA)(),h=(0,S.iZ)(),v=a.question||"",y=ed(a),I="true"===a.resultsShown,[C,N]=r.useState(!1),b=r.useMemo(()=>[],[]);(0,r.useEffect)(()=>{if(C&&b.length>0){let e=b.slice(-1)[0];e&&e.current&&e.current.focus()}},[y.length,b,C]);let P=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(c)return;let t=P.current,n=new ResizeObserver(t=>{let n=o.q.instance.get(e);if(n)for(let e of t)_.l7.system("slides-poll-auto-resize",()=>{let t=getComputedStyle(e.target),a=parseFloat(t.paddingTop),r=a+parseFloat(t.paddingBottom)+parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),o=e.contentRect.height+r;n&&o>n.size.y&&(n.size={x:n.size.x,y:o})})});return t&&n.observe(t),()=>{t&&n.unobserve(t)}},[e,c]);let k=_.nc.user(ef,e=>{i("question",e.target.value)}),T=_.nc.user(ef,e=>{i("question",e.clipboardData.getData("text"))}),x=e=>`option${e}`,D=_.nc.user(eg,(e,t)=>{i(x(e),t.currentTarget.value)}),O=_.nc.user(eg,(e,t)=>{i(x(e),t.clipboardData.getData("text"))}),A=_.nc.user(eh,(e,t)=>{e===y.length-1&&("Enter"===t.key&&y.length<6?(i(x(e+1),""),N(!0)):y.length>2&&0===y[e].length&&("Backspace"===t.key||"Delete"===t.key)&&(d&&(d(x(e)),t.preventDefault()),N(!0)))}),B=_.nc.user("slides-update-poll-results-visibility",e=>{i("resultsShown",e?"true":"false")}),{groupedVotes:M,totalVotes:L,votePercentages:F,winningVoteIndices:R,userVoteIndex:U,firstVoteByTimestamp:H}=function(e,t,n){let a;let r=ed(t),o=-1,l=Object.values(n).reduce((t,n)=>{try{let r=JSON.parse(n);r.userId===e&&(o=r.selectedOption),a=a&&a.timestamp>r.timestamp||!a?r:a,t.push(r)}catch(e){}return t},[]).sort((e,t)=>e.timestamp-t.timestamp),i=0,s=r.map((e,t)=>{let n=l.filter(e=>e.selectedOption===t);return i=n.length>i?n.length:i,n}),d=l.length,c=r.map((e,t)=>Math.round(100*(s[t].length/d||0))),u=s.reduce((e,t,n)=>t.length===i&&0!==t.length?[...e,n]:e,[]);return{groupedVotes:s,votePercentages:c,totalVotes:d,winningVoteIndices:u,userVoteIndex:o,firstVoteByTimestamp:a}}(null==h?void 0:h.id,a,l),W=_.nc.system("slides-update-poll-votes",e=>{if(!h){p(eo.s.error((0,E.t)("slides.flapp.poll.vote_failure")));return}let t={userId:h.id,name:h.name,thumbnailUrl:h.img_url,timestamp:Date.now(),selectedOption:e};s(t.userId,JSON.stringify(t))});return r.createElement("div",{className:m()("poll--pollThemeWrapper--z0UVm","poll--container--UKRlY"),"data-preferred-theme":t,"data-transparency-mode":n,ref:P},c?r.createElement("div",{className:el},v):r.createElement(g.L,{type:"text",className:m()(el,w.Qx,w.Uu),value:v,placeholder:(0,E.t)("slides.flapp.poll.question_placeholder"),onChange:k,onPaste:T,recordingKey:f.Pt(u,"questionInput")}),y.map((e,t)=>{let n=r.createRef();b.push(n);let a=-1!==R.indexOf(t);return c?r.createElement(ep,{votes:M[t],key:t,isWinningVote:a,isUserVote:t===U,percentage:F[t],resultsShown:I,recordingKey:f.Pt(u,`option${t}`),onClick:()=>W(t)},r.createElement("div",{className:es},e)):r.createElement(ep,{votes:M[t],key:t,isWinningVote:a,isUserVote:t===U,percentage:F[t],resultsShown:I},r.createElement(g.L,{className:m()(es,w.Qx,w.Uu),type:"text",value:e,placeholder:(0,E.t)("slides.flapp.poll.option_placeholder"),onChange:e=>D(t,e),onKeyDown:e=>A(t,e),onPaste:e=>O(t,e),ref:n,recordingKey:f.Pt(u,`optionInput${t}`)}))}),r.createElement(em,{onClick:c||y.length>=6?void 0:_.nc.user(eh,()=>{i(x(y.length),""),N(!0)}),recordingKey:u}),r.createElement("div",{className:"poll--resultContainer--cQQVk text--fontPos20--Bcz97 text--_fontBase--QdLsd"},r.createElement(eu,{totalVotes:L,hasUserVote:U>=0,firstVoteByTimestamp:H}),r.createElement(ec,{resultsShown:I,setResultsShown:e=>B(e)})))}function eE({configData:e,participantData:t,setConfigData:n,setParticipantData:a,deleteConfigData:o,isViewer:l,isPresenter:i,recordingKey:s,nodeId:d}){let c=(0,N.aF)(e);return r.createElement(ev,{preferredTheme:c.preferredTokenTheme,transparencyMode:c.transparentMode,configData:e,participantData:t,setConfigData:n,setParticipantData:a,deleteConfigData:o,isViewer:l,isPresenter:i,nodeId:d,recordingKey:s})}let ew={EditorFlapp:i(eE),ViewerFlapp:s(eE)};var ey=n(667005);function e_({}){return r.createElement("div",{style:{position:"absolute",width:20,height:20,background:"red"}})}let eS={EditorFlapp:i(function(e){let t=(0,ey.s)(e.nodeId);return r.createElement(e_,{...e,disablePointerEvents:!t})}),ViewerFlapp:s(function(e){return r.createElement(e_,{...e})})},eI={[a.a9h.EMBED]:z,[a.a9h.POLL]:ew,[a.a9h.FACEPILE]:et,[a.a9h.ALIGNMENT]:F,[a.a9h.YOUTUBE]:eS},eC={[a.a9h.EMBED]:K,[a.a9h.POLL]:ew,[a.a9h.FACEPILE]:et,[a.a9h.ALIGNMENT]:F,[a.a9h.YOUTUBE]:eS},eN={EditorFlapp:()=>null,ViewerFlapp:()=>null};function eb(e){return null===e?eN:eI[e]||eN}function eP(e){return null===e?eN:eC[e]||eN}},667005:(e,t,n)=>{n.d(t,{_:()=>c,s:()=>s});var a=n(374626),r=n(38580),o=n(852800),l=n(29680);let i=(0,n(529928).bt)(e=>e.mirror.appModel.activeUserAction);function s(e){let t=(0,l.KH)(),n=t&&1===Object.keys(t).length&&t[e],r=(0,a.md)(i);return n&&r===o.QOV.DEFAULT}let d=(0,r.eU)(null);function c(e){let[t,n]=(0,a.fp)(d);return{shouldBeMounted:t===e,loadEmbed:()=>{n(()=>e)}}}},975354:(e,t,n)=>{n.d(t,{h:()=>p});var a=n(411855),r=n(563706),o=n(175515),l=n(762638),i=n(852800),s=n(206529),d=n(170039);function c(e,t,n){let a=e.nodeId(n),{offset:r,zoomScale:o}=e.viewport(),l=t.getBoundingClientRect(),i={x:r.x*o+l.width/2,y:r.y*o+l.height/2},s=e.nodeCanvasSpaceBounds(n),d={x:s.x*o,y:s.y*o},c=e.getTopmostFrameNode(),u=c?e.nodeScrollBounds(c)??{x:0,y:0}:{x:0,y:0},p={x:i.x+d.x-u.x,y:i.y+d.y-u.y,width:s.width,height:s.height};return{guid:a,type:f(e,n),viewportBounds:p,transformScale:o,visible:!0}}function u(e,t){let n=t.getTopmostFrameNode();if(!n)return!1;let a=t.nodeId(n),r=e;for(;r;){if(t.nodeId(r)===a)return!0;r=t.nodeParent(r)}return!1}function p(e){let{viewer:t,viewerElement:n}=e,[r,s]=(0,a.useState)({}),[p,g]=(0,a.useState)({}),h=a.useCallback(()=>{t&&n&&s(e=>{let a=!1,r={};for(let n in e){let o=t.getPrototypeNode(n);o&&u(o,t)?r[n]=e[n]:a=!0}let o=t.getTopmostFrameNode();if(o){let e=o=>{"INTERACTIVE_SLIDE_ELEMENT"===t.nodeType(o)&&(r[t.nodeId(o)]=c(t,n,o),a=!0),t.mapChildren(o,()=>0).length>0&&t.mapChildren(o,e)};t.mapChildren(o,e)}return a?r:e})},[t,n]),v=a.useCallback(e=>{if(!t||!n)return;let a=t.getPrototypeNode(e);if(!a){if(r[e]){let t={...r};delete t[e],s(t)}return}if(!u(a,t)){let t=!1,n={...r};n[e]&&(t=!0,n[e].visible=!1),t&&s(n);return}if("INTERACTIVE_SLIDE_ELEMENT"===t.nodeType(a)){if(!t)return;let a={...r},o=t.getPrototypeNode(e);if(!o||!n)return;a[e]=c(t,n,o),s(a)}},[t,n,r]),E=a.useCallback(()=>{if(!t||!n)return;let e=t.getPreviousAndNextNBaseScreenIds(2),a={};if(e)for(let r of e){let e=t.getPrototypeNode(r);if(e){let r=e=>{"INTERACTIVE_SLIDE_ELEMENT"===t.nodeType(e)&&f(t,e)===i.a9h.EMBED&&(a[t.nodeId(e)]=c(t,n,e)),t.mapChildren(e,()=>0).length>0&&t.mapChildren(e,r)};t.mapChildren(e,r)}}h(),g(a)},[t,n,h]);o.O5(t,"accessibilityNodeInvalidated",v),o.O5(t,"viewportChanged",h),o.O5(t,"topLevelFrameChange",h),o.O5(t,"scrollEvent",h),o.O5(t,"canvasResize",h),o.O5(t,"baseScreenChanged",E);let w=a.useMemo(()=>{let e=Object.values({...r,...p});return e.sort((e,t)=>e.guid.localeCompare(t.guid)),e},[r,p]);return a.createElement("div",{id:"flappRendererContainer",className:l.cx.relative.zIndex1.$},w.map(e=>{if(e.visible)return a.createElement("div",{key:e.guid,style:{position:"absolute",width:e.viewportBounds.width,height:e.viewportBounds.height,transform:`translate(${e.viewportBounds.x}px, ${e.viewportBounds.y}px) scale(${e.transformScale})`,transformOrigin:"top left",background:"transparent",colorScheme:"initial",top:0,left:0,visibility:r[e.guid]?"visible":"hidden"}},a.createElement("div",{className:d.U},a.createElement(m,{viewer:t,element:e,key:e.guid})))}))}function m({viewer:e,element:t}){let{ViewerFlapp:n}=r.rr?(0,s.v)(t.type):(0,s.Z)(t.type);return a.createElement(n,{viewer:e,nodeId:t.guid})}function f(e,t){return e.nodeInteractiveSlideElementType(t)}},786807:(e,t,n)=>{n.d(t,{F:()=>f});var a=n(411855),r=n(629019),o=n.n(r),l=n(395096),i=n(91408),s=n(776621),d=n(304783),c=n(572206),u=n(428322),p=n(505727),m=n(860168);function f({currentSlideIndex:e,slideIds:t,isVisible:n,showSlideAtIndex:r,viewer:o}){let l=a.useCallback(r,[r]);return a.createElement(a.Fragment,null,a.createElement("div",{className:n?"carousel--previewSlideContainer--0-7Vl":"carousel--hidden--L4c9Y"},t.map((t,n)=>a.createElement(g,{key:t,index:n,slideId:t,isSelected:n===e,onClick:l,viewer:o}))),a.createElement(p.e,{isHidden:!n}))}let g=a.memo(function({index:e,isSelected:t,slideId:n,onClick:r,viewer:l}){let i=a.useRef(null);return a.useEffect(()=>{t&&i.current&&i.current.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})},[t]),a.createElement("button",{className:o()("carousel--thumbnail--4CmVG",{"carousel--thumbnailSelected--ZSwnC":t}),key:n,onClick:()=>r(e),ref:t?i:null},a.createElement("div",{className:o()("carousel--thumbnailNumber--homzs text--fontPos13--xW8hS text--_fontBase--QdLsd",{"carousel--thumbnailNumberSelected--Wu-9g":t})},e+1),a.createElement("div",{className:"carousel--thumbnailImageContainer--mkUu-"},a.createElement(h,{slideId:n,viewer:l})))}),h=a.memo(function({slideId:e,viewer:t}){let n=a.useRef(null),[r,o]=a.useState(0),[i]=(0,l.A)(r,200),[p,m]=a.useState(!1),f=window.devicePixelRatio;(0|f)!==f&&(f=2);let g=new c.Mi(v,E),h=g.scale(f),w=a.useCallback(e=>{if(t){let a=t.getThumbnailForSlide(e,h.x,h.y);if(!a){(0,s.x1)(d.e.SLIDES,"Failed to generate thumbnail in presenter view for slide",{slideId:e},{reportAsSentryError:!0});return}let r=new ImageData(new Uint8ClampedArray(a),h.x,h.y);if(n.current){let e=n.current.getContext("2d");e&&e.putImageData(r,0,0)}}},[t,h]);return a.useEffect(()=>{p&&w(e)},[w,e,p,i]),a.useEffect(()=>{let n=t=>{t===e&&o(e=>e+1)};return null==t||t.on("slideThumbnailInvalidated",n),()=>{null==t||t.off("slideThumbnailInvalidated",n)}},[t,e]),a.createElement(a.Fragment,null,a.createElement(u.a,{onIntersectionChange:e=>{e.isIntersecting&&m(!0)}}),a.createElement("canvas",{ref:n,width:h.x,height:h.y,style:{width:`${g.x}px`,height:`${g.y}px`}}))}),v=(0,i.jz)(m.MPx),E=(0,i.jz)(m.p3_)},653603:(e,t,n)=>{function a(e){return[" ","Enter","ArrowRight","ArrowDown","PageDown","n"].includes(e.key)}function r(e){return["ArrowLeft","ArrowUp","PageUp","N"].includes(e.key)}n.d(t,{J:()=>a,f:()=>r})},505727:(e,t,n)=>{n.d(t,{e:()=>l});var a=n(411855),r=n(829816),o=n(740631);function l({resizable:e,onDrag:t,isHidden:n}){let[,l]=(0,r.i)({onDrag:t});return e?a.createElement("div",{...l({className:n?o.y2:o.HH})},a.createElement("div",{className:o.ki})):a.createElement("div",{className:n?o.y2:o.E7},a.createElement("div",{className:o.ki}))}},74434:(e,t,n)=>{n.d(t,{g:()=>g});var a=n(411855),r=n(629019),o=n.n(r),l=n(966712),i=n(319008),s=n(255416),d=n(620430),c=n(975354);let u="slide_preview--viewerWithFrameControlsAvoidance--K1yr-",p="slide_preview--hiddenSlidePreviewContainer---a2ai",m="slide_preview--maxHeightWidth--9HS2L",f=9/16;function g({viewer:e,viewerElement:t,setViewerElement:n,isHidden:r,isCarouselOpen:g,viewerFrameCustomClass:h,avoidFrameControls:v,fitToWindow:E}){let[w,y]=a.useState(500),_=a.useCallback(()=>{r||y(((null==t?void 0:t.offsetWidth)||0)*f)},[null==t?void 0:t.offsetWidth,r]);a.useEffect(_,[_,g]),a.useEffect(()=>(_(),window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)}),[null==t?void 0:t.offsetWidth,_]);let S=null==e?void 0:e.viewport(),I=a.useCallback(()=>({x:(null==t?void 0:t.offsetLeft)||0,y:(null==t?void 0:t.offsetTop)||0,width:(null==t?void 0:t.offsetWidth)||0,height:(null==t?void 0:t.offsetHeight)||0,offsetX:-1*((null==S?void 0:S.offset.x)||0),offsetY:-1*((null==S?void 0:S.offset.y)||0),zoomScale:(null==S?void 0:S.zoomScale)||0,isZooming:!1,isPanning:!1}),[S,t]);return a.createElement(a.Fragment,null,a.createElement("div",{className:o()("slide_preview--slidePreviewContainer--gGO84",{[p]:r,[u]:v})},a.createElement("div",{className:o()("slide_preview--flappRendererContainer--Kpbel",{[u]:v,[m]:E}),style:{height:`${w}px`}},e&&t&&!r&&a.createElement(a.Fragment,null,a.createElement(c.h,{viewer:e,viewerElement:t}),(0,l.kc)().piper_viewer_emotes&&a.createElement(d.X,{viewer:e,getViewport:I,multiplayerCursorsEnabled:!0}))),a.createElement(s.mD,{getViewport:I,viewer:e},a.createElement("div",{className:o()({[p]:r})},a.createElement(i.Nz,{prototypeHeaderHidden:!0})),a.createElement("div",{className:o()("slide_preview--viewer--eEdQy",h,{[u]:v,[m]:E}),style:{height:`${w}px`},ref:n}))))}},972167:(e,t,n)=>{n.d(t,{p:()=>w});var a=n(411855),r=n(979232),o=n(939863),l=n(601607),i=n(654164),s=n(505727),d=n(574176),c=n(101505),u=n(498606),p=n(227795);let m="size_adjustment_control--button--5QSIT";var f=n(911339),g=n(125085);function h({onIncrement:e,onDecrement:t,incrementDisabled:n,decrementDisabled:r}){return a.createElement("div",{className:"size_adjustment_control--wrapper--weL0N"},a.createElement(p.Me,{className:m,disabled:r,"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":(0,o.t)("slides.presenter_view.decrement_font_size"),onClick:()=>t(),trackingProperties:{trackingDescriptor:c.c.SPEAKER_NOTES_FONT_SIZE_DECREMENT}},a.createElement(d.B,{svg:f.A})),a.createElement("div",{className:"size_adjustment_control--divider--TBbEU"}),a.createElement(p.Me,{className:m,disabled:n,"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":(0,o.t)("slides.presenter_view.increment_font_size"),onClick:()=>e(),trackingProperties:{trackingDescriptor:c.c.SPEAKER_NOTES_FONT_SIZE_INCREMENT}},a.createElement(d.B,{svg:g.A})))}let v=["speaker_notes_display--fontSize14--iIxog text--fontPos14--OL9Hp text--_fontBase--QdLsd","speaker_notes_display--fontSize16--lvsSe text--fontPos16--oMC-G text--_fontBase--QdLsd","speaker_notes_display--fontSize18--oBVtx text--fontPos18--rYXJb text--_fontBase--QdLsd","speaker_notes_display--fontSize24--gyR3B text--fontPos24--YppUD text--_fontBase--QdLsd","speaker_notes_display--fontSize30--ob4ed text--fontPos30--N-YT7 text--_fontBase--QdLsd","speaker_notes_display--fontSize48--p7RmP text--fontPos48--H177Q text--_fontBase--QdLsd","speaker_notes_display--fontSize64--qeNKO text--fontPos64--MQLi2 text--_fontBase--QdLsd","speaker_notes_display--fontSize96--5ErZa text--fontPos96--Cyvg- text--_fontBase--QdLsd"];function E({speakerNotes:e}){let[t]=(0,r.useLexicalComposerContext)();return a.useEffect(()=>{t.setEditorState(t.parseEditorState(e))},[e,t]),null}function w({currentSlideNodeId:e,width:t,showBorder:n,onDrag:r}){let[d,c]=a.useState(2),u=(0,l.x3)((e,t)=>{let n=e.getPrototypeNode(t);return n?e.nodeSlideSpeakerNotes(n):""},e)||i.D,p=a.useRef(null),[m,f]=a.useState(e);return a.useEffect(()=>{var t;m!==e&&(null==(t=p.current)||t.scrollTo(0,0),f(e))},[p,e,m]),a.createElement(a.Fragment,null,a.createElement(s.e,{isHidden:!n,resizable:!0,onDrag:r}),a.createElement("div",{className:"speaker_notes_display--speakerNotesContainer--5vSaG",style:{width:t},"data-testid":"speakerNotesDisplay"},a.createElement("div",{className:"speaker_notes_display--speakerNotesContent--tF-Rp",ref:p},a.createElement("div",{className:v[d]},a.createElement(i.s,{initialSpeakerNotesData:u,namespace:"SpeakerNotesDisplay",isEditable:!1,placeholder:a.createElement("div",{className:"speaker_notes_display--placeholder--Uz0qc"},(0,o.t)("fullscreen_actions.slides-speaker-notes-no-notes-placeholder"))},a.createElement(E,{speakerNotes:u})))),u!==i.D&&a.createElement(h,{onIncrement:function(){d<v.length-1&&c(d+1)},onDecrement:function(){d>0&&c(d-1)},incrementDisabled:d>=v.length-1,decrementDisabled:0===d})))}},615466:(e,t,n)=>{n.d(t,{f:()=>ep});var a=n(411855),r=n(188507),o=n(966712),l=n(986556),i=n(565872),s=n(672517),d=n(693707),c=n(988022),u=n(809511),p=n(737499),m=n(611978),f=n(99506),g=n(428467),h=n(776615),v=n(143678),E=n(402766),w=n(489921),y=n(180252),_=n(755934),S=n(127775),I=n(737947),C=n(320063),N=n(646240),b=n(374626),P=n(939863),k=n(392592),T=n(934533),x=n(831216),D=n(255416),O=n(250118),A=n(284995),B=n(620430),M=n(817543),L=n(975354),F=n(335682),R=n(947640),U=n(65377),H=n(629019),W=n.n(H),V=n(574176),z=n(318812),K=n(860178),$=n(549166),Z=n(650169),q=n(767129);function Y(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M5 6h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1ZM3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-1.982l.945 2.31a.5.5 0 0 1-.926.38l-1.1-2.69H8.063l-1.1 2.69a.5.5 0 1 1-.926-.379L6.982 17H5a2 2 0 0 1-2-2V7Zm3 2a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z",clipRule:"evenodd"}))}var Q=n(517333),G=n(498606);function J(){let[e,t]=(0,b.fp)(x.v0),n=(0,r.wA)(),o=(0,x.fe)();return a.createElement(q.K,{onClick:()=>{e.avWindow&&e.readyForMessages?Q.eD&&Q.eD.getVersion()>=116?Q.eD.focusPopoutWindow(e.avWindow.name):e.avWindow.focus():(t({type:x.Pp.DISPATCH_WINDOW_OPEN,dispatch:n,url:o}),n(k.F.enqueue({icon:T.zX.NOTES_ON_RECTANGLE,message:(0,P.t)("slides.presenter_view.visual_bells.opened_audience_view_in_separate_window")})))},"data-tooltip-type":G.Ib.TEXT,"data-tooltip":(0,P.t)("viewer.menu_bar.presenter_view"),"aria-label":(0,P.t)("viewer.menu_bar.presenter_view")},a.createElement(Y,null))}var X=n(346719),j=n(172789),ee=n(319063),et=n(673697),en=n(637158),ea=n(105780),er=n(767e3),eo=n(874128);function el({isCarouselOpen:e,onSidebarToggleClick:t,isSlidePreviewShown:n,onSlidePreviewToggleClick:r,file:o,multiplayer:l,showProgressBar:i}){let s=(0,K.iZ)(),d=(0,z.U)(),c=a.useRef(null);return(0,Z.ad)(o.editorType),a.createElement(j.D,{fileName:o.name,headerClassName:ee.PU,showProgressBar:i,headerRef:c,disableHeaderFade:!0,leftColumn:a.createElement(V.B,{onClick:t,svg:e?er.A:ea.A,className:ee.x$}),rightColumn:a.createElement(a.Fragment,null,l&&a.createElement($.Cv,{dropdownShown:d,multiplayer:l,user:s}),a.createElement("div",{className:ee.fi},a.createElement("div",{className:W()(ee.I,et.LY)},a.createElement(J,null)),a.createElement("div",{className:ee.ZH},a.createElement(V.B,{onClick:r,svg:eo.A,className:n?ee.PD:ee.P}),a.createElement(V.B,{onClick:r,svg:en.A,className:n?ee.P:ee.PD}))),a.createElement(X.g,{headerRef:c,file:o}))})}var ei=n(740631);function es({viewer:e,viewerElement:t,setViewerElement:n,file:r,prototype:o,multiplayer:l}){let i=(0,F.tS)()||"",[d,u]=a.useState(!0),[p,m]=a.useState(!0);return(0,s.T8)(a.createElement("div",{className:ei.S1},a.createElement(el,{isCarouselOpen:d,isSlidePreviewShown:p,onSlidePreviewToggleClick:()=>{(0,c.Cu)({name:"slides.presentation_mode.right_panel_presenter_view",isShown:!p,fileKey:i,productType:"slides"}),m(!p)},onSidebarToggleClick:()=>{(0,c.Cu)({name:"slides.presentation_mode.left_panel_presenter_view",isShown:!d,fileKey:i,productType:"slides"}),u(!d)},file:r,showProgressBar:o.showProgressBar,multiplayer:l}),a.createElement(U.R,{viewer:e,setViewerElement:n,viewerElement:t,isCarouselOpen:d,isSlidePreviewShown:p,multiplayer:l}),a.createElement("div",{className:ei.c0},a.createElement(R.y,{viewer:e}))),v.e0.SLIDES_PRESENTER_VIEW,{productType:"slides",fileKey:i})}var ed=n(632544),ec=n(945564);function eu(e){let{livegraphData:t,prototype:n}=e,l=(0,m._6)(),i=(0,r.wA)();if("prototype"!==l.view)throw Error(`Unexpected non-prototype view: ${l.view}`);a.useEffect(()=>(document.body.classList.add(ec.$7),()=>{document.body.classList.remove(ec.$7)}),[]);let d=(0,p.Yi)(l),u=n.showComments&&!d;(0,O.kZ)();let[f,g]=a.useState(null),h=(0,O.l1)(f,e.selectedView,{viewportScalingMode:"scale-down",contentScalingMode:"fixed"},e.multiplayer,!1,e.showDeviceFrame,u,e.prototype,e.user,"slides");a.useEffect(()=>{null==h||h.setShouldPlayVideosLinearly(!0)},[h]);let{getViewport:E}=(0,O.ew)(h,f);!function(){let e=(0,m._6)(),t=(0,r.wA)(),n=(0,N.Xr)(x.v0),o=(0,b.md)(x.v0),l=(0,x.fe)();(0,C.h)(()=>{if(e.isPresenterView&&e.openAudienceViewPopout){n({type:x.Pp.DISPATCH_WINDOW_OPEN,dispatch:t,url:l});let e=new URL(window.location.href);e.searchParams.delete("open-popout"),I.Ay.replace(e.toString()),t(k.F.enqueue({icon:T.zX.NOTES_ON_RECTANGLE,message:(0,P.t)("slides.presenter_view.visual_bells.opened_audience_view_in_separate_window")}))}}),a.useEffect(()=>{let e=()=>{var e;null==(e=o.avWindow)||e.close(),n({type:x.Pp.CLOSE_WINDOW})};return addEventListener("beforeunload",e),()=>{removeEventListener("beforeunload",e)}},[e.isPresenterView,e.openAudienceViewPopout,n,o.avWindow])}();let{showNextFrame:y,showPreviousFrame:_,navigateToFrameAtIndex:S,restartPrototype:M}=(0,O.qW)(h,e.multiplayer);!function(e,t,n,r,o,l){let i=(0,b.md)(x.v0),s=i.avWindow,d=i.readyForMessages,c=(0,N.Xr)(x.v0);a.useEffect(()=>{s&&d&&l&&(s.viewer=l,s.postMessage({type:"WINDOW_VIEWER_SET"}))},[s,d,l]),a.useEffect(()=>{let a=a=>{if(!s||a.source===s)switch(a.data.type){case"NEXT_SLIDE":e();break;case"PREVIOUS_SLIDE":t();break;case"RESTART_PRESENTATION":r();break;case"SLIDE_AT_INDEX":n(a.data.index);break;case"POPOUT_AUDIENCE_VIEW_READY_FOR_MESSAGES":c({type:x.Pp.SET_READY_FOR_MESSAGES});break;case"POPOUT_AUDIENCE_VIEW_CLOSED":c({type:x.Pp.CLOSE_WINDOW})}};return window.addEventListener("message",a),()=>{window.removeEventListener("message",a)}},[l,s,n,e,t,c,r])}(y,_,S,M,null==t||t.file.name,h),function(e){let t=(0,b.md)(x.v0).avWindow;a.useEffect(()=>{t&&null!==e&&t.postMessage({type:"FILE_NAME_CHANGE",name:e})},[e,t])}((null==t?void 0:t.file.name)||null),function(){let e=(0,b.md)(x.v0).avWindow;a.useEffect(()=>{let t=()=>{e&&("visible"===document.visibilityState?e.postMessage({type:"PRESENTER_VIEW_READY_FOR_MESSAGES"}):e.postMessage({type:"PRESENTER_VIEW_NOT_READY_FOR_MESSAGES"}))};return addEventListener("visibilitychange",t),()=>{removeEventListener("visibilitychange",t)}})}();let F=!!l.isPresenterView;return a.createElement(a.Fragment,null,t&&(0,s.T8)(a.createElement(a.Fragment,null,a.createElement(w.A,null),!F&&h&&f&&a.createElement(L.h,{viewer:h,viewerElement:f}),!!h&&(0,o.kc)().piper_viewer_emotes&&a.createElement(a.Fragment,null,a.createElement(B.X,{viewer:h,getViewport:E,multiplayerCursorsEnabled:!0})),F&&h&&a.createElement(es,{viewer:h,viewerElement:f,setViewerElement:g,file:t.file,prototype:e.prototype,multiplayer:e.multiplayer}),!F&&a.createElement(D.Yp,{dispatch:i,file:t.file,dropdownShown:e.dropdownShown,pickerShown:e.pickerShown,permissionState:e.permissionState,isCommentsMode:u,contacts:e.contacts,user:e.user,prototype:e.prototype,scalingInfo:{viewportScalingMode:"scale-down-width",contentScalingMode:"fixed"},showHotspots:!1,showPrototypeOptions:!1,showDeviceFrame:e.showDeviceFrame,multiplayer:e.multiplayer,modalShown:e.modalShown,appWindow:e.appWindow,org:e.org,orgDomains:e.orgDomains,recordingKey:"prototypeView",viewer:h,viewerElement:f,setViewerElement:g})),v.e0.PROTOTYPE,(0,c.oP)(t.file)),"prototype"===l.view&&!!h&&a.createElement(A.z,{viewer:h,entry:F?ed.t5:ed.rn}))}function ep(){let e=(0,r.wA)(),t=(0,D.pQ)(),n=t.selectedView;if("prototype"!==n.view)throw Error(`Unexpected non-prototype view: ${n.view}`);let o=(0,g.getPermissionsStateMemoized)(t),s=a.useRef(null),c=(0,d.Z)("dark",s,n,!0),p=(0,O.PG)(n);return(a.useLayoutEffect(()=>{s.current&&(s.current.dataset.editorTheme=(0,h.ju)(n))},[n]),(0,_.d)())?a.createElement(_.O,{dispatch:e}):a.createElement(h.uW.Provider,{value:c},a.createElement(y.K,{recordingKey:"inAppPage",containerRef:s},a.createElement(eu,{selectedView:n,dropdownShown:t.dropdownShown,pickerShown:t.pickerShown,permissionState:o,contacts:t.contacts,user:t.user,prototype:t.prototype,scalingMode:"scale-down",showHotspots:!1,showDeviceFrame:!1,multiplayer:t.multiplayer,modalShown:t.modalShown,appWindow:t.appWindow,org:t.currentUserOrgId?t.orgById[t.currentUserOrgId]:null,orgDomains:t.orgDomains,livegraphData:p}),(!p||t.prototype.showProgressBar)&&a.createElement(S.z2,{editorType:f._Y.DESIGN,isViewer:!0,progressBarMode:u.Oin.HIDE_UI}),a.createElement(l.a,{flashes:t.flashes}),a.createElement(E.V,null),a.createElement(i.z,null),a.createElement(M.hG,null),t.interactionTestDialogShown&&null))}},654164:(e,t,n)=>{n.d(t,{D:()=>w,s:()=>y});var a=n(411855),r=n(611001),o=n(852542),l=n(59815),i=n(662696),s=n(77669),d=n.n(s),c=n(54822),u=n(798898),p=n(291589),m=n(515395),f=n(244379),g=n(944492),h=n(133737),v=n(719049);let E={list:{nested:{listitem:"speaker_notes_lexical_editor--nestedListItem--gXf0X"},olDepth:["speaker_notes_lexical_editor--ol1--HyZBK speaker_notes_lexical_editor--baseOl--oi5Yu","speaker_notes_lexical_editor--ol2--RHI5f speaker_notes_lexical_editor--baseOl--oi5Yu","speaker_notes_lexical_editor--ol3--sicVh speaker_notes_lexical_editor--baseOl--oi5Yu","speaker_notes_lexical_editor--ol4--D9207 speaker_notes_lexical_editor--baseOl--oi5Yu","speaker_notes_lexical_editor--ol5--Yjgl7 speaker_notes_lexical_editor--baseOl--oi5Yu"],ol:"speaker_notes_lexical_editor--listOl--F-XTs",ul:"speaker_notes_lexical_editor--listUl--02TdP",listitem:"speaker_notes_lexical_editor--listItem--zdUll"},text:{bold:"speaker_notes_lexical_editor--textBold--QdGoR",italic:"speaker_notes_lexical_editor--textItalic--J3KZF",strikethrough:"speaker_notes_lexical_editor--textStrikethrough--r-r5p",underline:"speaker_notes_lexical_editor--textUnderline--qHKah",underlineStrikethrough:"speaker_notes_lexical_editor--textUnderlineStrikethrough--zMkdq"}},w='{"root":{"children":[{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1}],"direction":null,"format":"","indent":0,"type":"root","version":1}}';function y({initialSpeakerNotesData:e,namespace:t,onEdit:n,isEditable:s,placeholder:y,children:_}){let S={editable:s,editorState:e||w,nodes:[r.ListNode,r.ListItemNode,h.TextNode],namespace:t,onError:e=>{console.error(e)},theme:E};return a.createElement(l.LexicalComposer,{initialConfig:S},a.createElement(a.Fragment,null,a.createElement(f.RichTextPlugin,{contentEditable:a.createElement(i.ContentEditable,{className:"speaker_notes_lexical_editor--input--Dp--S"}),placeholder:y,ErrorBoundary:d()}),_,s&&a.createElement(a.Fragment,null,n&&a.createElement(m.OnChangePlugin,{onChange:n,ignoreSelectionChange:!0}),a.createElement(c.HistoryPlugin,null),a.createElement(p.MarkdownShortcutPlugin,{transformers:[o.UNORDERED_LIST,o.ORDERED_LIST,o.BOLD_ITALIC_STAR,o.BOLD_ITALIC_UNDERSCORE,o.BOLD_STAR,o.BOLD_UNDERSCORE,o.STRIKETHROUGH,o.ITALIC_STAR,o.ITALIC_UNDERSCORE]}),a.createElement(u.ListPlugin,null),a.createElement(g.TabIndentationPlugin,null),a.createElement(v.A,{maxDepth:5}))))}},719049:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(411855),r=n(611001),o=n(979232),l=n(133737);function i({maxDepth:e}){let[t]=(0,o.useLexicalComposerContext)();return(0,a.useEffect)(()=>t.registerCommand(l.INDENT_CONTENT_COMMAND,()=>!function(e){let t=(0,l.$getSelection)();if(!(0,l.$isRangeSelection)(t))return!1;let n=function(e){let t=e.getNodes();return new Set(0===t.length?[e.anchor.getNode().getParentOrThrow(),e.focus.getNode().getParentOrThrow()]:t.map(e=>(0,l.$isElementNode)(e)?e:e.getParentOrThrow()))}(t),a=0;for(let e of n)if((0,r.$isListNode)(e))a=Math.max((0,r.$getListDepth)(e)+1,a);else{if(!(0,r.$isListItemNode)(e))return!1;let t=e.getParent();if(!(0,r.$isListNode)(t))throw Error("LimitIndentLevelPlugin: A ListItemNode must have a ListNode for a parent.");a=Math.max((0,r.$getListDepth)(t)+1,a)}return a<=e}(e??7),l.COMMAND_PRIORITY_CRITICAL),[t,e]),null}},601976:(e,t,n)=>{n.d(t,{l:()=>r});var a=n(411855);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M13.418 18.628a8 8 0 1 1 5.21-5.21l1.723.646a1 1 0 0 1-.108 1.906l-3.418.855-.855 3.418a1 1 0 0 1-1.906.108l-.646-1.723Zm-.352-.938a7 7 0 1 1 4.624-4.624l-1.878-.704A5.005 5.005 0 0 0 11 6a5 5 0 1 0 1.362 9.812l.704 1.878Zm-1.057-2.818a4 4 0 1 1 2.863-2.863l-1.894-.71a2 2 0 1 0-1.68 1.68l.71 1.893ZM12 11a1 1 0 0 0-1 1 1 1 0 1 1 1-1Zm6.291 4.427L16 16l-.573 2.291L15 20l-.618-1.65-1.916-5.107L12 12l1.243.466 5.108 1.916L20 15l-1.709.427Z",clipRule:"evenodd"}))}}}]);

//# debugId=91e37032-091e-5f3e-be36-0242ee8ca143

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/714058512863ca6c981a0d01e69876a9d9a3037f/843-b40c0b6dc262929d.min.js.map