"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="dcc2e77a-da6a-5873-8ae7-2c6f7d7b17af")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[7355],{442558:(e,t,n)=>{n.r(t),n.d(t,{PropertiesPanel:()=>uO});var l=n(411855),r=n(976404),i=n(629019),a=n.n(i),o=n(91408),s=n(966712),c=n(498750),d=n(755887),p=n(951158),u=n(153234),m=n(776621),h=n(304783),_=n(30637),E=n(763658),y=n(572206),g=n(515009),v=n(448169),f=n(827586),b=n(271779),S=n(979441),P=n(987918),T=n(939863),w=n(293017),I=n(286954),k=n(906899),N=n(169231),C=n(103907),A=n(259927),O=n(672517),x=n(798099),R=n(297336),M=n(818),L=n(378905),D=n(697551),F=n(356390),K=n(852800),V=n(617453),U=n(369870),B=n(848661),H=n(618056),G=n(809511),Y=n(416095),W=n(147206),$=n(316081),z=n(239671),X=n(279145),Q=n(143678),Z=n(109388),J=n(188507),j=n(459593),q=n(971612),ee=n(927457),et=n(243742),en=n(268537),el=n(46481),er=n(738269),ei=n(662275),ea=n(284321),eo=n(498606),es=n(420186),ec=n(405206),ed=n(720488),ep=n(965908),eu=n(995439),em=n(900086),eh=n(7959),e_=n(690710),eE=n(939791),ey=n(767129),eg=n(31524),ev=n(404095),ef=n(522739),eb=n(574176),eS=n(865618),eP=n(662531),eT=n(227795),ew=n(893606),eI=n(637913),ek=n(215440),eN=(e=>(e[e.VERTICAL=0]="VERTICAL",e[e.MIDDLE_CHILD=1]="MIDDLE_CHILD",e[e.LAST_CHILD=2]="LAST_CHILD",e))(eN||{});function eC(e){let{lineConfiguration:t,hideLine:n,wideContainer:r}=e;return l.createElement("div",{className:r?"bubbled_props_line_styles--containerWide--csTgg bubbled_props_line_styles--container--XumJm":"bubbled_props_line_styles--container--XumJm"},!n&&l.createElement("div",{className:"bubbled_props_line_styles--lineContainer--pEgTS"},(()=>{switch(t){case 0:return l.createElement("div",{className:"bubbled_props_line_styles--vertical--pialf bubbled_props_line_styles--_line--Vhv8-"});case 1:return l.createElement(l.Fragment,null,l.createElement("div",{className:"bubbled_props_line_styles--middleChildVertical--PxRp- bubbled_props_line_styles--_childVertical--Y-Ypj bubbled_props_line_styles--_line--Vhv8-"}),l.createElement("div",{className:"bubbled_props_line_styles--middleChildHorizontal--ucsHZ bubbled_props_line_styles--_childHorizontal--3bRi7 bubbled_props_line_styles--_line--Vhv8-"}));case 2:return l.createElement(l.Fragment,null,l.createElement("div",{className:"bubbled_props_line_styles--lastChildVertical--83Los bubbled_props_line_styles--_childVertical--Y-Ypj bubbled_props_line_styles--_line--Vhv8-"}),l.createElement("div",{className:"bubbled_props_line_styles--lastChildHorizontal--kGsHC bubbled_props_line_styles--_childHorizontal--3bRi7 bubbled_props_line_styles--_line--Vhv8-"}))}})()),e.children)}let eA="bubbled_instances_list--minusIcon--dY8i-",eO="bubbled_instances_list--instanceIcon--aRlGl",ex="bubbled_instances_list--instanceName--09LuV",eR="bubbled_instances_list--instanceNameWide---L338 bubbled_instances_list--instanceName--09LuV",eM="bubbled_instances_list--ui3InstanceNameAndIcon--W4S9T component_prop_def_row--ui3ComponentPanelNameAndIcon--01Z6g",eL="bubbled_instances_list--ui3LineContainer--OdBbV",eD="bubbled_instances_list--ui3Line--SIYpX";var eF=n(968109),eK=n(349307);function eV(e){let{showUnbubbledPrimaryInstances:t,showNumHidden:n,wideContainer:r,scrollableContainer:i}=e,o=(0,J.d4)(ek.K4),s=(0,ew.R)(),[c,d]=(0,l.useState)(!1),p=t?o:null==o?void 0:o.filter(e=>e.isBubbled),m=e=>{eP.l7.user("toggle-props-bubbled",()=>K.glU.togglePropsAreBubbled(e)),K.Ez5.canvasViewState().temporarilyHoveredNodes.set([])},h=e=>{K.Ez5.canvasViewState().temporarilyHoveredNodes.set(e)},_=()=>{K.Ez5.canvasViewState().temporarilyHoveredNodes.set([])},E=0,y=s&&!t&&!c&&null!=p&&p.length>5,g=y?p.slice(0,4):p;return y&&(E=p.length-4),l.createElement("div",{className:a()({"bubbled_instances_list--scrollableContainer--ob0LQ":i})},null==g?void 0:g.map((i,a)=>{let o=i.connectedGUIDs.slice(0).sort();return l.createElement(ef.D8,{className:"bubbled_instances_list--instanceSection--tLYN0",key:a,onMouseEnter:()=>h(i.connectedGUIDs),onMouseLeave:_,recordingKey:u.Pt(e,o[0])},s?t?l.createElement(eG,{data:i,showNumHidden:n,onUnbubbleInstance:m,recordingKey:u.Pt(e,"checkbox",o[0]),wideContainer:r}):l.createElement(eB,{data:i,onUnbubbleInstance:m,recordingKey:u.Pt(e,"unbubble",o[0]),wideContainer:r}):l.createElement(l.Fragment,null,l.createElement(eC,{lineConfiguration:eN.VERTICAL,hideLine:0===i.bubbledNestedInstances.length,wideContainer:r},t?l.createElement(eU,{data:i,onUnbubbleInstance:m,showNumHidden:n,wideContainer:r,recordingKey:u.Pt(e,"checkbox",o[0])}):l.createElement(l.Fragment,null,l.createElement(eb.B,{className:eO,svg:eF.A}),l.createElement("p",{className:r?eR:ex},i.name),l.createElement(eT.K0,{className:eA,svg:eK.A,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.component_properties.unbubble_instance"),onClick:()=>{m(i.connectedGUIDs[0])},recordingKey:u.Pt(e,"unbubble",o[0])}))),i.bubbledNestedInstances.map((e,t)=>l.createElement("div",{key:t},l.createElement(eC,{lineConfiguration:t===i.bubbledNestedInstances.length-1?eN.LAST_CHILD:eN.MIDDLE_CHILD,wideContainer:r},l.createElement("div",{className:r?eR:ex},e.name))))))}),s&&!c&&E>0&&l.createElement(eI.t8,{label:(0,T.t)("design_systems.component_properties.show_more_nested_instances_rows",{count:E}),onClick:()=>d(!0)}))}function eU({data:e,onUnbubbleInstance:t,showNumHidden:n,wideContainer:r,recordingKey:i}){return l.createElement("div",{className:r?"bubbled_instances_list--checkboxContainerWide--Kdd3u bubbled_instances_list--checkboxContainer--qm3X7":"bubbled_instances_list--checkboxContainer--qm3X7"},l.createElement(eS.S,{label:e.name,checked:e.isBubbled,onChange:()=>{t(e.connectedGUIDs[0])},truncateLabel:{truncate:"line-clamp",lineClamp:2},recordingKey:i}),n&&!!e.numHidden&&l.createElement("div",{className:"bubbled_instances_list--numHidden--fW-Sr"},(0,T.tx)("design_systems.component_properties.num_hidden",{num:e.numHidden})))}function eB({data:e,onUnbubbleInstance:t,recordingKey:n,wideContainer:r}){let{bubbledNestedInstances:i}=e,a=l.createElement(eE.DE,{label:null,input:l.createElement("div",{className:eM},l.createElement("div",{className:eO},l.createElement(eg.y,null)),l.createElement("p",{className:ex},e.name)),icon:l.createElement("div",{className:eA},l.createElement(ey.K,{as:"button","data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.component_properties.unbubble_instance"),"aria-label":(0,T.t)("design_systems.component_properties.unbubble_instance"),onClick:()=>{t(e.connectedGUIDs[0])},onMouseDown:x.dG,recordingKey:n},l.createElement(ev.f,null)))});return 0===i.length?a:l.createElement(eH,{data:e,row:a,wideContainer:r})}function eH({data:e,row:t,wideContainer:n}){return l.createElement(eI.R$,{row:t,isCollapsedByDefault:!0},e.bubbledNestedInstances.map((e,t)=>l.createElement("div",{key:t},l.createElement(eE.DE,{label:null,input:l.createElement("div",{className:eM},l.createElement("div",{className:eL},l.createElement("div",{className:eD})),l.createElement("div",{className:n?eR:ex},e.name)),icon:null}))))}function eG({data:e,onUnbubbleInstance:t,recordingKey:n,showNumHidden:r,wideContainer:i}){return l.createElement(l.Fragment,null,l.createElement(eE.Ad,{label:null,input:l.createElement(eU,{data:e,onUnbubbleInstance:t,showNumHidden:r,wideContainer:i,recordingKey:n})}),e.bubbledNestedInstances.map((e,t)=>l.createElement("div",{key:t},l.createElement(eE.Ad,{label:null,input:l.createElement("div",{className:"bubbled_instances_list--ui3CheckboxViewNestedInstance--YgTEc"},l.createElement("div",{className:eL},l.createElement("div",{className:eD})),l.createElement("div",{className:i?eR:ex},e.name))}))))}var eY=n(746806),eW=n(273226);function e$(){let e="bubbledPropsPicker",t=(0,J.d4)(e=>e.pickerShown),n=(0,J.wA)(),r=new y.Mi(null==t?void 0:t.initialX,null==t?void 0:t.initialY);return(null==t?void 0:t.id)!==eW.Dd?null:l.createElement(eY.vx,{title:(0,T.t)("design_systems.component_properties.expose_nested_instances"),initialPosition:r,initialWidth:eW.wh,headerSize:"small",onClose:()=>{n(w.XE())},recordingKey:e},l.createElement("div",{className:"bubbled_props_picker--container--I6VX-"},l.createElement(eV,{showUnbubbledPrimaryInstances:!0,showNumHidden:!0,wideContainer:!0,scrollableContainer:!0,recordingKey:e})))}var ez=n(777304),eX=n(25888),eQ=n(107244),eZ=n(322515);let eJ="props_panel--addButtonContainer--a58gi",ej="props_panel--addButton--jAtAX draggable_list--addButton--D0q--",eq="props_panel--dropdownRowWithIcon--03FtD",e0="props_panel--dropdownRowWithoutIcon--F8Ra-",e1="props_panel--bubbledInstancesHeading--C26v2";var e5=n(633779),e4=n(100562),e3=n(501191);function e2({recordingKey:e}){let t=(0,J.wA)(),{version:n}=(0,et.DP)(),r="ui3"===n,i=(0,J.d4)(e_.i$),a=(0,J.d4)(eQ.od),o=!(0,J.d4)(eX.Jp),s=(0,J.d4)(e=>!!e.dropdownShown&&e.dropdownShown.type===eW.C4),c=(0,J.d4)(e=>!!e.modalShown&&e.modalShown.type===ez.n.type),{componentDescription:d}=(0,ep.z6)(),p=(0,J.d4)(e=>e.pickerShown),m=s||c||(null==p?void 0:p.id)===eW.Dd,h=!!(0,J.d4)(ek.Z3).length,_=(0,J.d4)(ek.K4),E=!!(null==_?void 0:_.length),y=(0,J.d4)(ea.Dr),g=(0,J.d4)(ea.Ct),v=l.useRef(null),f=l.useRef(null),b=l.useCallback(e=>{p&&t(w.XE()),s?t(er.oB()):t(er.j7({type:eW.C4}))},[t,p,s]),S=l.useCallback(e=>{(0,eW.Pp)(a,!1,e,eW.Fv.ICON),t(ei.to({type:ez.n,data:{propType:e}}))},[t,a]),P=l.useCallback(()=>{a&&(a.isLooseComponent?F.Y5.triggerActionInUserEditScope("create-state-group"):S(K.J0O.VARIANT))},[S,a]),I=l.useCallback(()=>{let e=Z.findDOMNode(f.current),n=e?(0,es.cn)(e,eW.wh):{};t(w.u1({id:eW.Dd,initialX:null==n?void 0:n.x,initialY:null==n?void 0:n.y}))},[t]),k=[K.J0O.BOOL,K.J0O.INSTANCE_SWAP,K.J0O.TEXT];return a?l.createElement(eh.Zk,{ref:f},l.createElement(ep.QQ,null),r&&!o?l.createElement(eu.n,{description:d}):null,l.createElement(r?e8:e6,{isPanelEmpty:o,isAddPropButtonSelected:m,hasBubbledInstances:h,stateGroupSelectionMode:i,selectAddPropOptionRef:v,toggleAddPropDropdown:b,recordingKey:e}),s&&v.current&&l.createElement(ed.Cf,{targetRect:v.current.getBoundingClientRect(),propagateCloseClick:!0},l.createElement(en.W.Option,{disabled:!0,className:e0},(0,T.tx)("design_systems.component_properties.create_new_property")),l.createElement(en.W.Option,{className:eq,onClick:P,recordingKey:u.Pt("openCreatePropModal",(0,eW.xb)(K.J0O.VARIANT))},l.createElement(ec.Nu,null,l.createElement(el.U,{svg:e4.A},l.createElement(j.m,null))),(0,T.tx)("design_systems.component_properties.across_variants")),k.map(e=>l.createElement(en.W.Option,{key:e,className:eq,onClick:()=>S(e),recordingKey:u.Pt("openCreatePropModal",(0,eW.xb)(e))},l.createElement(ec.Nu,null,l.createElement(el.U,{svg:(0,eW.qe)(e)},(0,eW.zn)(e,!0))),(0,eW.xb)(e))),E&&l.createElement(l.Fragment,null,l.createElement(en.W.Separator,null),l.createElement(en.W.Option,{disabled:!0,className:e0},(0,T.tx)("design_systems.component_properties.expose_nested_instances")),l.createElement(en.W.Option,{className:eq,onClick:I,recordingKey:"openBubbledPropPicker"},l.createElement(ec.Nu,null,l.createElement(el.U,{svg:e5.A},l.createElement(q.M,null))),(0,T.t)("design_systems.component_properties.choose_instances")))),(null==p?void 0:p.id)===eW.Dd&&l.createElement(e$,null),l.createElement(eI.e6,{containerWidth:r?eW.O2.RESIZABLE_SIDEBAR:eW.O2.REGULAR,propDimension:eW.OE.DEFINITION,guids:[a.guid],recordingKey:e,enableHidingOverflowRowsInUI3:!1}),h&&l.createElement(l.Fragment,null,l.createElement("p",{className:e1},(0,T.t)("design_systems.component_properties.bubbled_instances")),l.createElement(eV,{recordingKey:e})),r&&y&&g?l.createElement(eE.Ad,{label:null,input:l.createElement(em.T,null)}):null):null}function e6({isPanelEmpty:e,isAddPropButtonSelected:t,hasBubbledInstances:n,stateGroupSelectionMode:r,selectAddPropOptionRef:i,toggleAddPropDropdown:a}){return l.createElement(eh.fI,{className:!e||t||n?void 0:"props_panel--panelHeaderRowFaded--r4klF draggable_list--panelHeaderRowFaded--kETRR"},l.createElement(eh.xw,{className:"props_panel--panelTitleText--i7WqG draggable_list--panelTitleText--SwKez"},(0,T.tx)("design_systems.component_properties.properties")),r!==K.iCO.STATE&&l.createElement("div",{ref:i,className:eJ},l.createElement(eh.YW,{className:ej,onClick:a,selected:t,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.component_panel.create_component_property"),svg:e3.A,recordingKey:"openCreatePropModalDropdown"})))}function e8({isPanelEmpty:e,isAddPropButtonSelected:t,hasBubbledInstances:n,stateGroupSelectionMode:r,selectAddPropOptionRef:i,toggleAddPropDropdown:o}){let s=l.useRef(null),c=e&&!n?(0,T.tx)("design_systems.component_properties.add_property"):(0,T.tx)("design_systems.component_properties.properties");return l.createElement(eE.DE,{ref:s,input:c,label:null,appendedClassName:a()("props_panel--panelHeaderRow--nVOXf",{[eZ.yf]:!t}),icon:r!==K.iCO.STATE?l.createElement("div",{ref:i,className:eJ},l.createElement(eh.YW,{className:ej,onClick:o,selected:t,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.component_panel.create_component_property"),recordingKey:"openCreatePropModalDropdown"},l.createElement(ee.e,null))):void 0})}var e7=n(10199),e9=n(946689),te=n(927990),tt=n(502242),tn=n(144119),tl=n(452883),tr=n(125944),ti=n(184027),ta=n(766022),to=n(641160);function ts({initialPosition:e,styleNameInputPrefix:t,styleType:n,inheritStyleKeyField:r,onCreate:i,recordingKey:a}){let o=(0,J.wA)(),s=(0,J.d4)(e=>e.mirror.selectedStyleProperties),c=(0,J.d4)(e=>e.mirror.sceneGraphSelection),d=l.useRef(Object.keys(c).length>0),[p,m]=l.useState(!d.current&&void 0),h="ui3"===(0,et.DP)().version,_=(0,tn.sO)(),[E,y]=l.useState((0,tl.$)()),g=_&&(0,tr.Rc)(n),{styleRef:v,createStyle:f}=(0,te.u)({inheritStyleKeyField:r,isCreatingFromSelection:d.current,trackingOptions:{styleType:n}}),b=u.of(a,"submit",()=>{let e=f();g&&K.Ez5.slideThemeLibBindings().addStyleToLocalTheme(e||"",E),o(w.XE()),o(w.Uv()),o(k.sw()),i&&i(e||"")}),S=(0,J.d4)(e=>{let t=e.mirror.selectedStyleProperties;switch(n){case"FILL":return t.fillPaints&&"length"in t.fillPaints&&t.fillPaints.length>0;case"GRID":return t.layoutGrids&&t.layoutGrids.length>0;case"EFFECT":return t.effects&&t.effects.length>0;default:return!0}});return s.styleType?l.createElement(ti.zK.Provider,{value:ti.zM.CREATE_STYLE},l.createElement(eY.vx,{title:(e=>{switch(e){case"FILL":return(0,T.t)("design_systems.create_style.color");case"TEXT":return(0,T.t)("design_systems.create_style.text");case"EFFECT":return(0,T.t)("design_systems.create_style.effect");case"EXPORT":return(0,T.t)("design_systems.create_style.export");case"GRID":return(0,T.t)("design_systems.create_style.grid");default:return(0,T.t)("design_systems.create_style.create_new_style_generic")}})(s.styleType),headerSize:"small",initialWidth:ta.tA,initialPosition:e,onClose:()=>o(k.sw()),recordingKey:u.Pt("createStyleModal"),dragHeaderOnly:!0},l.createElement("div",{className:to.FY},l.createElement(tt.O8,{type:s.styleType,recordingKey:"createStyleModal",styleNameInputPrefix:t,isInspectPanel:!1,selectedStyleProperties:s,showProperties:p,onEnterPressed:b,showSlideThemeField:g,slideThemeId:E,setSlideThemeId:y}),!v&&l.createElement("div",{className:"create_style_modal--errorMessage--8ZpFE"},(0,T.tx)("design_systems.create_style.an_error_occurred_while_creating_the_style")),l.createElement(e7.AutoLayout,{horizontalAlignItems:d.current?void 0:"end",verticalAlignItems:"center",spacing:d.current?"auto":void 0,padding:h?8:16},d.current&&l.createElement(eh.JU,{className:p?"create_style_modal--fadedShowMorePropertiesLabel--g8ydZ":"create_style_modal--showMorePropertiesLabel--mJpGe",onClick:()=>m(!p)},p?(0,T.tx)("design_systems.create_style.hide_options"):(0,T.tx)("design_systems.create_style.show_more_options")),l.createElement(e9.$$,{style:{justifySelf:"right"},onClick:b,disabled:!S||!v,tabIndex:0},(0,T.tx)("design_systems.create_style.create_style")))))):null}var tc=n(507956),td=n(663668),tp=n(601607);function tu(e){let t=(0,J.wA)(),n=(0,P.dI)(e.selectedStyleProperties.guid),r="",i="",[a,o]=(0,tp.Fk)((t,n)=>{if(e.externalStyle)return["",""];let l=t.get(n);return[(null==l?void 0:l.name)||"",(null==l?void 0:l.styleDescription)||""]},n);return e.externalStyle?(r=e.externalStyle.name||"",i=e.externalStyle.description_rt?(0,td.A)(e.externalStyle.description_rt):e.externalStyle.description||""):(0,P.dI)(e.selectedStyleProperties.guid)&&(r=a,i=(0,td.A)(o)),l.createElement(ti.zK.Provider,{value:ti.zM.EDIT_STYLE},l.createElement(tt.O8,{type:e.selectedStyleProperties.styleType,recordingKey:e.recordingKey,onEnterPressed:()=>t(k.sw()),styleName:r,styleDescription:i,...e}))}var tm=n(595755),th=n(987950);function t_({recordingKey:e}){let t=(0,J.wA)(),{version:n}=(0,et.DP)(),r=(0,J.d4)(eQ._k),i=!(0,J.d4)(eX.Jp),a=(0,J.d4)(e=>!!e.dropdownShown&&e.dropdownShown.type===eW.C4),o=(0,J.d4)(e=>!!e.modalShown&&e.modalShown.type===ez.n.type),s=(0,J.d4)(e=>e.pickerShown),c=a||o||(null==s?void 0:s.id)===eW.Dd,d=!!(0,J.d4)(ek.Z3).length,p=(0,J.d4)(ek.K4),u=!!(null==p?void 0:p.length),m=l.useRef(null),h=l.useRef(null),_=l.useCallback(()=>{s&&t(w.XE()),a?t(er.oB()):t(er.j7({type:eW.C4}))},[t,s,a]),E=l.useCallback(()=>{let e=Z.findDOMNode(h.current),n=e?(0,es.cn)(e,eW.wh):{};t(w.u1({id:eW.Dd,initialX:null==n?void 0:n.x,initialY:null==n?void 0:n.y}))},[t]);return r&&u?l.createElement(eh.Zk,{ref:h},l.createElement("ui3"===n?e8:e6,{isPanelEmpty:i,isAddPropButtonSelected:c,hasBubbledInstances:d,selectAddPropOptionRef:m,toggleAddPropDropdown:_,stateGroupSelectionMode:void 0}),a&&m.current&&l.createElement(ed.Cf,{targetRect:m.current.getBoundingClientRect(),propagateCloseClick:!0},l.createElement(en.W.Option,{disabled:!0,className:e0},(0,T.tx)("design_systems.component_properties.expose_nested_instances")),l.createElement(en.W.Option,{className:eq,onClick:E,recordingKey:"openBubbledPropPicker"},l.createElement(ec.Nu,null,l.createElement(el.U,{fix_me_removeThisPropAndProvideUI3Icon:!0,svg:e5.A})),(0,T.t)("design_systems.component_properties.choose_instances"))),(null==s?void 0:s.id)===eW.Dd&&l.createElement(e$,null),d&&l.createElement(l.Fragment,null,l.createElement("p",{className:e1},(0,T.t)("design_systems.component_properties.bubbled_instances")),l.createElement(eV,{recordingKey:e}))):null}var tE=n(324666),ty=n(872429),tg=n(859905),tv=n(221768),tf=n(568214),tb=n(374626),tS=n(520581),tP=n(347082),tT=n(762638),tw=n(428654),tI=n(775664),tk=n(774191),tN=n(869156),tC=n(318812),tA=n(179243),tO=n(559681),tx=n(742934),tR=n(697378),tM=n(864361),tL=n(860601),tD=n(288536),tF=n(555074),tK=n(29680),tV=n(279702),tU=n(233890),tB=n(846848),tH=n(12669),tG=n(113754),tY=n(939143),tW=n(875157);let t$="slides_color_controls--selected--FUTwH",tz="slides_color_controls--enabled--3SYlu",tX="slides_color_controls--controlsRowReset--w3uKf",tQ=tB.qo,tZ={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:1,blendMode:"NORMAL"};var tJ=(e=>(e[e.COLOR=0]="COLOR",e[e.GRADIENT=1]="GRADIENT",e))(tJ||{});function tj({paint:e,onPaintChange:t,onColorVariableChange:n,onApplyStyle:r,onClose:i,initialPosition:a,enableGradients:o,initialView:s,recordingKey:c,hideCustomColorPickerFillTypeToggle:d}){let p=["custom_color","library"],[m,h]=tR.t.useTabs({custom_color:p.includes("custom_color"),library:p.includes("library")},{defaultActive:()=>(function({initialView:e,isBoundToLibraryAsset:t,supportedViews:n}){let l;return(l=e||(t?"library":"custom_color"),n&&!n.includes(l))?n[0]:l})({initialView:"custom_color",isBoundToLibraryAsset:!!e.colorVar,supportedViews:p})}),_=(0,J.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),E=(0,tF.kl)("numSelectedByType"),y=l.useMemo(()=>{if(E)return(0,tW.aZ)(K.rrT.FILL,E)},[E]),g=h.activeTab;l.useEffect(()=>{s&&s!==g&&h.setActiveTab(s)},[s]);let v=new Set;return l.createElement(tP.p,{name:"slides_custom_color_picker"},l.createElement(eY.vx,{initialPosition:a,title:l.createElement("div",null,l.createElement(tR.t.TabStrip,{manager:h},l.createElement(tR.t.Tab,{...m.custom_color},(0,T.tx)("fullscreen.properties_panel.color_picker.custom")),l.createElement(tR.t.Tab,{...m.library},(0,T.tx)("fullscreen.properties_panel.color_picker.libraries")))),onClose:()=>{_===K.m1T.GRADIENT&&F.Y5.triggerAction("leave-edit-mode"),i()},initialWidth:tQ,recordingKey:c},l.createElement(tR.t.TabPanel,{...m.custom_color},l.createElement(tq,{paint:e,onPaintChange:t,enableGradients:o,recordingKey:c,hideCustomColorPickerFillTypeToggle:d})),l.createElement(tR.t.TabPanel,{...m.library},l.createElement(tY.Rp,{selectedItem:null,resolvedType:K.rXF.COLOR,disabledVariableIds:v,pickerType:"color-picker",recordingKey:u.Pt(c,"libraryColors"),onVariableSelected:n,onStyleSelected:r,onClose:tL.lQ,variableScopes:y}))))}function tq({paint:e,onPaintChange:t,enableGradients:n,recordingKey:r,hideCustomColorPickerFillTypeToggle:i}){let a=(0,J.wA)(),o=(0,tC.U)(),s=(0,tK.dH)(),c=(0,tD.Ep)(),d=(0,tM.C)(),p=(0,V.Ku)(),u=(0,J.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),m=l.useRef(null),[h,_]=l.useState((0,H.bn)(e.type)?1:0),E=(0,H.Ou)(e),y=(0,H.x$)(e),g=(0,tK.p8)("currentSelectedGradientStop"),v=(0,H.iC)(E||y||tZ,g);l.useEffect(()=>{1===h&&u!==K.m1T.GRADIENT?F.Y5.triggerAction("toggle-gradient-edit-mode"):0===h&&u===K.m1T.GRADIENT&&F.Y5.triggerAction("leave-edit-mode")},[h,u]);let f=n=>{e.type!==n&&t(H.Tm.initPaint(n,tZ.color,e,"slides-custom-color-picker"),!(0,H.bn)(e.type)&&(0,H.bn)(n)?tV.zk.NO:tV.zk.YES)};return l.createElement(l.Fragment,null,!i&&n&&l.createElement(t0,{panelType:h,onPanelTypeChange:e=>{h!==e&&(f(0===e?"SOLID":"GRADIENT_LINEAR"),_(e))},recordingKey:r}),n&&1===h&&y&&l.createElement(tU.vL,{name:"Slides color picker",ref:m,handleKeyDown:e=>{y&&(0,tH.T)(e,y,u,g,t)},focusOnMount:!0,forceUpdate:d},l.createElement(tG.i,{paint:y,onChange:t,currentSelectedGradientStop:g,colorProfile:c,hasFocus:!!m.current&&m.current.hasFocus(),dispatch:a,recordingKey:r})),l.createElement(tB.S7,{color:v,colorFormat:p,onColorChange:(n,l)=>{(0,tH.n)(n,e,g,t,l)},dropperDisabled:!1,displayType:tB.sX.FULL,currentTool:s,dispatch:a,dropdownShown:o,recordingKey:r,canAcceptStyles:!1,canAcceptVariables:!1}))}function t0({panelType:e,onPanelTypeChange:t,recordingKey:n}){let r=[{type:0,label:(0,T.t)("slides.properties_panel.color_picker.color_toggle"),optionRecordingKey:"color"},{type:1,label:(0,T.t)("slides.properties_panel.color_picker.gradient_toggle"),optionRecordingKey:"gradient"}];return l.createElement("div",{className:tT.cx.wFull.py8.bb1.bSolid.colorBorder.$},l.createElement("div",{className:"slides_color_controls--panelToggle--kL4qJ"},r.map(({type:r,label:i,optionRecordingKey:a})=>l.createElement(ef.GG,{key:r,className:e===r?t$:void 0,onClick:()=>t(r),recordingKey:u.Pt(n,a)},i))))}var t1=n(660164);function t5({paint:e,onChange:t,onClose:n,pickerShown:r,recordingKey:i,hideCustomColorPickerFillTypeToggle:a,inheritStyleKeyField:o}){let s=(0,J.wA)(),c=(0,tl.$)(),d=(0,tO.UZ)(c),p=(0,tC.B)(A.kX),m=(0,tO.lK)(c),h=e=>{t({...e,type:"SOLID"})},[_,E]=l.useState(!1),[g,v]=l.useState(new y.Mi(0,0)),f=l.useRef(null),b=l.useRef(null),S=l.useCallback(()=>{if(b.current){let{x:e,y:t}=(0,es.cn)(b.current,tQ);v(new y.Mi(e,t)),E(!0)}else console.error("colorsWrapperRef.current is null")},[b]),[I,k]=(0,tb.fp)(tA.ik),[N,C]=(0,tb.fp)(tA.E_),O=(0,tN.bL)((null==N?void 0:N.varId)||"",d);l.useEffect(()=>()=>{C(null),k(!1)},[C,k]);let x=(0,tO.k1)(),R=eP.nc.user("slides-add-theme-color",()=>{let t=x(function(e,t){if((0,B.hS)(e)&&e.color)return e.color;let n=tf.UE;if(t.length>0){let e=t[t.length-1].paint.color;e&&(n=(0,tk.Ad)(e,31))}return n}(e,m));t&&(C({varId:t,modeId:d}),S())}),M=l.useCallback(e=>{k(!0),C({varId:e,modeId:d}),S()},[S,d,k,C]),L=l.useCallback(()=>{k(!1),C(null),E(!1)},[C,k,E]),D=l.useMemo(()=>I&&O&&O.type===K.Z_n.COLOR?(0,tx.NQ)(O.value):(0,B.hS)(e)?e:(0,tx.NQ)(tf.Uv),[I,O,e]),F=l.useCallback((e,n)=>{I?N&&e.color&&eP.l7.user("slides-edit-theme-color",()=>t6(N.varId,N.modeId,e)):t(e,n)},[I,N,t]),V=(0,tx.PG)(t),U=(0,tx.o9)(o,t6);return l.createElement("div",{ref:f},l.createElement(tP.p,{name:"slides_color_picker"},(I||!_)&&l.createElement(eY.vx,{headerSize:"small",title:(0,T.t)("slides.properties_panel.fill"),initialPosition:new y.Mi(r.initialX,r.initialY),onClose:()=>{k(!1),n()},initialWidth:240,autoflowHeight:!0,recordingKey:i},l.createElement("div",{ref:b},l.createElement(t3,{title:(0,T.t)("slides.properties_panel.color_picker.theme_colors"),rightControl:l.createElement(ey.K,{"aria-label":(0,T.t)("slides.properties_panel.color_picker.add_template_color_tooltip"),onClick:()=>{I||k(!0),R()},"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.color_picker.add_template_color_tooltip"),recordingKey:u.Pt(i,"addThemeColor")},l.createElement(el.U,{svg:e3.A,fallbackSvg:t1.A},l.createElement(ee.e,null))),showBottomBorder:!0},l.createElement(tS.E,{name:"slides_theme_colors"},m.map(({paint:n,variableId:r})=>{var a,o,s,c,d,m,_,E,y;let g=I?!!N&&r===N.varId:(0,P.aI)(null==(s=null==(o=null==(a=n.colorVar)?void 0:a.value)?void 0:o.alias)?void 0:s.guid,null==(m=null==(d=null==(c=null==e?void 0:e.colorVar)?void 0:c.value)?void 0:d.alias)?void 0:m.guid);return n.color&&(null==(y=null==(E=null==(_=n.colorVar)?void 0:_.value)?void 0:E.alias)?void 0:y.guid)?l.createElement(t2,{key:r,backgroundString:tw.F.format({...n.color,a:1}),hexString:tI.z5.format(n.color),opacity:n.color.a,onClick:()=>{I?g||(L(),h({...e,...n})):h({...e,...n})},isSelected:g,showEditIcon:g,isEditing:I&&g,onClickEdit:()=>{I?L():M(r)},onContextMenu:n=>{n.stopPropagation(),n.preventDefault();let{clientX:l,clientY:i}=n;p.show({data:{clientX:l,clientY:i,targetItem:{type:"THEME_COLOR",variableId:r,onEdit:()=>M(r)},paint:e,onPaintChange:t}})},recordingKey:u.Pt(i,"themeColors",r.replace("VariableID:",""))}):null}))),l.createElement(t4,{paint:e,onPaintChange:t,onClickColorChit:F,onClickAddColor:()=>{L(),S()},isEditingTheme:I,recordingKey:i}))),_&&D&&l.createElement(tj,{paint:D,onPaintChange:F,onColorVariableChange:V,onApplyStyle:U,onClose:()=>{C(null),E(!1),I||s(w.XE()),k(!1)},initialPosition:I?g:new y.Mi(r.initialX,r.initialY),recordingKey:"slidesCustomColorPicker",enableGradients:!N,hideCustomColorPickerFillTypeToggle:a})))}function t4({paint:e,onPaintChange:t,onClickColorChit:n,onClickAddColor:r,isEditingTheme:i,recordingKey:a}){let o=(0,tC.B)(A.kX),[s,c]=l.useState(!1),d=(0,tl.$)(),[p]=l.useState((0,tO.lf)(d)),m=s?p:p.slice(0,17),h=!s&&p.length>17,_=(n,l)=>{if(n.color){l.stopPropagation(),l.preventDefault();let{clientX:r,clientY:i}=l;o.show({data:{clientX:r,clientY:i,targetItem:{type:"DOCUMENT_COLOR",documentColor:n.color},paint:e,onPaintChange:t}})}};return l.createElement(t3,{title:(0,T.t)("slides.properties_panel.color_picker.document_colors"),removeBottomPadding:h},l.createElement(tS.E,{name:"slides_add_custom_color"},l.createElement("div",{className:tT.cx.flex.justifyCenter.itemsCenter.w32.h32.$},l.createElement(ef.D8,{className:tT.cx.w24.h24.$,"aria-label":(0,T.t)("slides.properties_panel.color_picker.add_color_aria_label"),onClick:r,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.color_picker.add_color_aria_label"),recordingKey:u.Pt(a,"addColor")},l.createElement("img",{src:"https://static.figma.com/uploads/bdf32fe13fe9a9be5b40c3de4a18572f14c9a1eb",alt:"",className:tT.cx.w24.h24.$})))),l.createElement(tS.E,{name:"slides_document_colors"},m.map((t,r)=>l.createElement(t2,{key:r,backgroundString:tw.F.format(t.color),hexString:tI.z5.format(t.color),opacity:t.opacity,onClick:()=>n(t),onContextMenu:e=>_(t,e),isSelected:!i&&(0,tk.Vm)(t.color,null==e?void 0:e.color)&&t.opacity===(null==e?void 0:e.opacity),recordingKey:u.Pt(a,"documentColor",tw.F.format(t.color))})),h&&l.createElement(ef.D8,{className:tT.cx.wFull.h32.flex.itemsCenter.justifyCenter.$,onClick:()=>c(!0),recordingKey:u.Pt(a,"documentColors","more")},l.createElement(tg.k,null))))}function t3({title:e,rightControl:t,removeBottomPadding:n,showBottomBorder:r,children:i}){return l.createElement("div",{className:tT.cx.px12.if(r,tT.cx.bb1.bSolid.colorBorder).if(!n,tT.cx.pb12).$},l.createElement("div",{className:tT.cx.h40.pl4.flex.justifyBetween.itemsCenter.$},l.createElement("div",{className:tT.cx.textBodyMedium.colorTextSecondary.$},e),t),l.createElement("div",{className:tT.cx.flex.flexWrap.gap4.$},i))}function t2({backgroundString:e,hexString:t,opacity:n,onClick:r,onContextMenu:i,isSelected:o,showEditIcon:s,isEditing:c,onClickEdit:d,recordingKey:p}){return l.createElement("div",{className:a()("slides_color_controls--colorChit--pdLKf",{[t$]:o}),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":t},s&&d&&l.createElement(ef.GG,{className:a()("slides_color_controls--editChitButton--Am-hP",{[tz]:c,"slides_color_controls--shownForTests--S2xlM":(0,_.nl)()}),onClick:e=>{if((0,_.nl)())d();else{let t=e.currentTarget.getBoundingClientRect(),n=t.width/2,l=t.left+n,r=t.top+n;Math.pow(e.clientX-l,2)+Math.pow(e.clientY-r,2)<=n*n&&d()}},recordingKey:u.Pt(p,"edit")},l.createElement(tv.A,null)),l.createElement(ef.D8,{onClick:r,onContextMenu:i,className:tT.cx.w24.h24.relative.$,recordingKey:p},l.createElement("div",{className:"slides_color_controls--chitBackground--Vlkza",style:{background:e}}),l.createElement("div",{className:"slides_color_controls--chitAlpha--GJlf2 chit--chitAlpha--Mn-aK",style:{opacity:void 0!==n?1-n:0}})))}function t6(e,t,n){K.CWU.setVariableValueForMode(e,t,{type:K.Z_n.COLOR,resolvedType:K.rXF.COLOR,value:{...n.color,a:n.opacity??1}})}var t8=n(871642),t7=n(662294);function t9({recordingKey:e}){let[t,n]=(0,t8.Xw)();return l.createElement(eh.Zk,{className:"slides_align_panel--panel--4jgTN",...n},l.createElement(t7.l,{isHoveringOverPanel:t,inSlidesPanel:!0,recordingKey:e}))}var ne=n(421757),nt=n(973149),nn=n(723081),nl=n(100197),nr=n(218973),ni=n(952675),na=n(393333),no=n(538697),ns=n(12519),nc=n(552901),nd=n(683570),np=n(343559),nu=n(195601),nm=n(366501);let nh="slides_animation_panel--row--cC8Np",n_="slides_animation_panel--previewFrame--cO6cR transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce",nE=["SMART_ANIMATE","DISSOLVE","PUSH","SLIDE","SLIDE_OUT","MOVE","MOVE_OUT"],ny={[K.v$l.NONE]:{behavior:"INSTANT"},[K.v$l.DISSOLVE]:{behavior:"DISSOLVE"},[K.v$l.SLIDE_FROM_LEFT]:{direction:"LEFT",behavior:"SLIDE"},[K.v$l.SLIDE_FROM_RIGHT]:{direction:"RIGHT",behavior:"SLIDE"},[K.v$l.SLIDE_FROM_TOP]:{direction:"TOP",behavior:"SLIDE"},[K.v$l.SLIDE_FROM_BOTTOM]:{direction:"BOTTOM",behavior:"SLIDE"},[K.v$l.SLIDE_OUT_TO_LEFT]:{direction:"LEFT",behavior:"SLIDE_OUT"},[K.v$l.SLIDE_OUT_TO_RIGHT]:{direction:"RIGHT",behavior:"SLIDE_OUT"},[K.v$l.SLIDE_OUT_TO_TOP]:{direction:"TOP",behavior:"SLIDE_OUT"},[K.v$l.SLIDE_OUT_TO_BOTTOM]:{direction:"BOTTOM",behavior:"SLIDE_OUT"},[K.v$l.PUSH_FROM_LEFT]:{direction:"LEFT",behavior:"PUSH"},[K.v$l.PUSH_FROM_RIGHT]:{direction:"RIGHT",behavior:"PUSH"},[K.v$l.PUSH_FROM_TOP]:{direction:"TOP",behavior:"PUSH"},[K.v$l.PUSH_FROM_BOTTOM]:{direction:"BOTTOM",behavior:"PUSH"},[K.v$l.MOVE_FROM_LEFT]:{direction:"LEFT",behavior:"MOVE"},[K.v$l.MOVE_FROM_RIGHT]:{direction:"RIGHT",behavior:"MOVE"},[K.v$l.MOVE_FROM_TOP]:{direction:"TOP",behavior:"MOVE"},[K.v$l.MOVE_FROM_BOTTOM]:{direction:"BOTTOM",behavior:"MOVE"},[K.v$l.MOVE_OUT_TO_LEFT]:{direction:"LEFT",behavior:"MOVE_OUT"},[K.v$l.MOVE_OUT_TO_RIGHT]:{direction:"RIGHT",behavior:"MOVE_OUT"},[K.v$l.MOVE_OUT_TO_TOP]:{direction:"TOP",behavior:"MOVE_OUT"},[K.v$l.MOVE_OUT_TO_BOTTOM]:{direction:"BOTTOM",behavior:"MOVE_OUT"},[K.v$l.SMART_ANIMATE]:{behavior:"SMART_ANIMATE"}},ng=new nn.el(!0);function nv(e,t){for(let[n,{behavior:l,direction:r}]of Object.entries(ny))if(l===e&&r===t)return n;return K.v$l.NONE}function nf(e,t,n,l){eP.l7.user("slide-transition",()=>{let r=nv(t,l);e.forEach(e=>{K.Ez5.slideAnimationBindings().setSlideTransition(e,{type:r,duration:n})}),F.Y5.commit()})}let nb=[.1,.2,.3,.5,1,2];class nS extends no.c${}let nP=new nt.ag(nt.i5.MILLISECONDS,.01,10);function nT(e){let t=(0,J.wA)(),n=(0,tC.U)(),r=(0,nm.Jj)(),i=(0,nl.J2)(K.Ez5.slideDeck().slideGrid),a=(0,nm.Rn)(i,r),o=Object.keys(e.selection),c=(0,tp.Fk)((e,t)=>t.reduce((t,n)=>{let l=e.get(n),r=null==l?void 0:l.findContainingSlideOrSelf();return r&&!t.includes(r)&&t.push(r),t},[]),o),d={type:K.v$l.NONE,duration:0};c.forEach(e=>{let t=K.Ez5.slideAnimationBindings().getSlideTransition(e);t&&d.type===K.v$l.NONE&&(d=t)});let{behavior:p,direction:u}=ny[d.type],m=Math.round(1e3*d.duration)/1e3,h=l.useCallback(e=>{let t=u;"INSTANT"===e||"DISSOLVE"===e||"SMART_ANIMATE"===e?t=void 0:void 0===t&&(t="LEFT"),nf(c,e,m,t)},[u,m,c]),_=l.useCallback(e=>{nf(c,p,m,e)},[p,m,c]),E=l.useCallback(e=>{nf(c,p,e,u)},[p,u,c]),y=!("INSTANT"===p||"DISSOLVE"===p||"SMART_ANIMATE"===p),g="INSTANT"!==p,v="MOVE_OUT"===p||"SLIDE_OUT"===p,f=v?r:a??P.AD,b=v?a??P.AD:r,S=(0,nu.p)(f),w=(0,nu.p)(b);return l.createElement(tP.p,{name:"slides_animation_panel"},l.createElement(eh.Zk,null,l.createElement(np.r,{titleTx:(0,T.tx)("slides.properties_panel.slide_transition")}),l.createElement("div",{className:nh},l.createElement("label",null,(0,T.tx)("slides.properties_panel.slide_transition.style")),l.createElement(tS.E,{name:"slide_transition_style"},l.createElement(no.l6,{formatter:ng,id:"slide-transitions-behavior-select",property:p,onChange:h,dispatch:t,dropdownShown:n},l.createElement(no.c$,{value:"INSTANT",key:"INSTANT"}),l.createElement(no.sK,null),nE.map(e=>l.createElement(no.c$,{value:e,key:e}))))),y&&l.createElement("div",{className:nh},l.createElement("label",null,(0,T.tx)("slides.properties_panel.slide_transition.direction")),l.createElement(tS.E,{name:"slide_transition_direction"},l.createElement(na.sP,{onChange:_,property:u??null}))),g&&(0,s.kc)().piper_transition_controls&&l.createElement(tP.p,{name:"slides_duration"},l.createElement("div",{className:nh},l.createElement("label",null,(0,T.tx)("slides.properties_panel.slide_transition.duration")),l.createElement("div",{className:"slides_animation_panel--rowInput--klQ98"},l.createElement(tS.E,{name:"slides_duration_dropdown"},l.createElement(ni.ow,{value:{select:ns.pW,inputComponent:ns.gm}},l.createElement(no.tV,{value:{chevron:nc.c9}},l.createElement(nr.W0,{id:"slide-animation-duration",onValueChange:E,value:m,dropdownShown:n,min:.01,max:10,dispatch:t,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.slide_transition.duration"),tooltipForScreenReadersOnly:!0,enablePreview:!0},nb.map(e=>l.createElement(nS,{key:`duration-${e}`,value:e},nP.format(e)))))))))),l.createElement("div",{className:nh},l.createElement("div",{style:{width:"100%"}},l.createElement(nw,{transition:{behavior:p,direction:u??null,shouldSmartAnimate:"SMART_ANIMATE"===p,duration:m,easing:"EASE_OUT",isSpringTransition:!1,easingFunction:[0,0,.58,1],preserveScroll:!1,resetVideoPosition:!1,openUrlInNewTab:!1,resetInteractiveComponents:!1,resetScrollPosition:!1},belowThumbnailUrl:w,aboveThumbnailUrl:S}))),l.createElement("div",{className:nh},l.createElement(ne.IK,{variant:"secondary",onClick:()=>{eP.l7.user("slide-transition-all-slides",()=>{let e=nv(p,u);K.Ez5.slideAnimationBindings().setSlideTransitionForAll({type:e,duration:m}),F.Y5.commit()})}},(0,T.tx)("slides.properties_panel.slide_transition.apply_to_all")))))}class nw extends nd.ub{rectangleStateToCSSStyle(e,t,n,l){let r=this.cssEasingFunction(e),i=this.cssDuration(e);return{transition:n===nd.H_.RETURN_TO_START?"all ease-out 200ms":n===nd.H_.STATIC?"unset":`all ${i}s ${r}`,top:25.5+45*t.top,left:80+80*t.left,opacity:t.opacity,border:0}}renderSimpleScreenToScreenAnimationPreview(e,t,n,r,i,o,s){return l.createElement("div",{className:"slides_animation_panel--previewPanel--0XANz transition_preview--previewPanel--Gp-aI",onMouseEnter:this.onMouseEnterNew,onMouseLeave:this.onMouseLeaveNew},l.createElement("div",{className:a()(e,n_),style:t},l.createElement("img",{src:this.props.belowThumbnailUrl,alt:"",className:tT.cx.relative.wFull.hFull.$})),l.createElement("div",{className:a()(n,n_),style:r},l.createElement("img",{src:this.props.aboveThumbnailUrl,alt:"",className:tT.cx.relative.wFull.hFull.$})),l.createElement("div",{className:"slides_animation_panel--screenContainer--6eR6r transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce slides_animation_panel--previewFrame--cO6cR transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce"}),l.createElement("div",{className:"slides_animation_panel--screenBorder--G7ZdP transition_preview--screenBorder--Fz-dz transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce slides_animation_panel--screenContainer--6eR6r transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce slides_animation_panel--previewFrame--cO6cR transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce"}))}}var nI=n(648598),nk=n(978783),nN=n(623402),nC=n(531664),nA=n(149988);function nO(e){return l.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M2.486 5.142a1 1 0 0 0 0 1.715L4.39 8 2.486 9.142a1 1 0 0 0 0 1.715L6.97 13.55a2 2 0 0 0 2.058 0l4.486-2.692a1 1 0 0 0 0-1.715L11.61 8l1.905-1.143a1 1 0 0 0 0-1.715l-4.486-2.69a2 2 0 0 0-2.058 0l-4.486 2.69ZM9.665 8l.973-.583 1.39-.834L13 6l-.972-.583-3.514-2.108a1 1 0 0 0-1.028 0L3.972 5.417 3 6l.972.583 1.39.834.971.583 1.152.691a1 1 0 0 0 1.03 0L9.666 8Zm-4.304.583 1.609.966a2 2 0 0 0 2.058 0l1.61-.966 1.39.834L13 10l-.972.583-3.514 2.108a1 1 0 0 1-1.028 0l-3.514-2.108L3 10l.972-.583 1.39-.834Z",clipRule:"evenodd"}))}var nx=n(505113),nR=n(241691),nM=n(750029),nL=n(910544),nD=n(892109),nF=n(478655),nK=n(96796);let nV=l.forwardRef(function({isOpen:e,onMouseDown:t,children:n,recordingKey:r},i){return l.createElement(ef.GG,{forwardedRef:i,className:a()("slides_flyout_input--input--cM6kp",{"slides_flyout_input--selected--CgFEs":e}),onMouseDown:t,recordingKey:r},n,l.createElement(nK.O,null))}),nU={type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1,blendMode:"NORMAL"};function nB({paint:e,onChange:t,inheritStyleKeyField:n,inheritStyleKey:r,inheritStyleName:i,pickerId:a,label:o,recordingKey:s,hideCustomColorPickerFillTypeToggle:c}){let d=(0,J.wA)(),p=(0,J.d4)(e=>e.pickerShown&&e.pickerShown.id===a?e.pickerShown:null),u=(0,l.useRef)(null),m=(0,J.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),h=()=>{m===K.m1T.GRADIENT&&F.Y5.triggerAction("leave-edit-mode"),d(w.XE())},_=e=>{if(p)h();else if(u.current){let{x:t,y:n}=(0,es.cn)(u.current,e?tQ:240);d(w.u1({id:a,initialX:t,initialY:n}))}else console.error("rowRef.current is null")},[E]=(0,tF.lJ)("slidesDividedSwatchColors"),g=(0,J.d4)(e=>{let t=e.mirror.selectionProperties.fillPaints;return(0,B.gl)(t)?B.oV:null==t?void 0:t.length}),[v]=(0,tF.lJ)("imageOverlayPaint"),f=v&&(0,B.hS)(v),b=(0,B._W)(g,0)>(f?2:1),S=!(0,B.gl)(e)&&(null==e?void 0:e.type)&&(0,H.bn)(e.type),P=(0,J.d4)(e=>(0,nR.b)(e,(0,B._W)(r,null),null)),I=(0,l.useMemo)(()=>(0,B.hS)(e)&&e&&e.color?[e.color]:Array.isArray(E)&&E.length>1?E:[{r:1,g:1,b:1,a:1}],[E,e]),k=(()=>{var t,n;if((0,B.gl)(e))return null;let l=null==(n=null==(t=null==e?void 0:e.colorVar)?void 0:t.value)?void 0:n.alias;return l?nF.dI(l):null})(),N=()=>(0,B.gl)(e)||(0,B.gl)(i)?(0,T.t)("fullscreen.mixed"):i||(b?(0,T.t)("slides.properties_panel.color_picker.multiple"):S?(0,T.t)("slides.properties_panel.fill.fill_type_gradient"):tI.TI.format(I[0])),C=l.createElement(tS.E,{name:"slides_color_input"},l.createElement(nV,{isOpen:!!p,onMouseDown:e=>{e.stopPropagation(),_(!!S)},recordingKey:s},l.createElement("span",{className:tT.cx.pl4.inlineFlex.gap6.$},b?l.createElement(nO,null):P?l.createElement(nL.zi,{dsStyle:{...null==P?void 0:P.data,style_type:"FILL"},disableTooltip:!0}):l.createElement(nG,{colors:I,paint:e}),!i&&k?l.createElement(nH,{variableId:k,fallbackText:N()}):l.createElement(nx.o,{text:N()})))),A=(0,tx.PG)(t),O=(0,tx.o9)(n);return l.createElement(l.Fragment,null,o?l.createElement(nD.No,{ref:u,label:o,input:C}):l.createElement("span",{ref:u},C),p&&e&&(S?l.createElement(tj,{paint:e,onPaintChange:t,onColorVariableChange:A,onApplyStyle:O,onClose:h,initialPosition:new y.Mi(p.initialX,p.initialY),enableGradients:!0,recordingKey:"slidesCustomColorPicker",hideCustomColorPickerFillTypeToggle:c}):l.createElement(t5,{paint:e,onChange:t,onClose:h,pickerShown:p,recordingKey:"slidesColorPicker",hideCustomColorPickerFillTypeToggle:c,inheritStyleKeyField:n})))}function nH({variableId:e,fallbackText:t}){let n=(0,tN.u)(e);return l.createElement(nx.o,{text:(null==n?void 0:n.name)??t})}function nG({colors:e,paint:t}){if(!(e.length>1))return l.createElement(nM.J,{className:tT.cx.w14.h14.bRadius2.$,paint:t??nU,allowMouseDownPropagation:!0});{let t={type:"SOLID",color:e[0],opacity:1,blendMode:"NORMAL"},n={type:"SOLID",color:e[1],opacity:1,blendMode:"NORMAL"};return l.createElement("div",{className:tT.cx.relative.w14.h14.$},l.createElement("span",{className:tT.cx.absolute.w14.h14.left0.top0.$,style:{clipPath:"polygon(0% 0%, 100% 0%, 0% 100%)"}},l.createElement(nM.J,{className:tT.cx.w14.h14.bRadius2.$,paint:t,allowMouseDownPropagation:!0})),l.createElement("span",{className:tT.cx.absolute.w14.h14.left0.top0.$,style:{clipPath:"polygon(0% 100%, 100% 100%, 100% 0%)"}},l.createElement(nM.J,{className:tT.cx.w14.h14.bRadius2.$,paint:n,allowMouseDownPropagation:!0})))}}function nY({panelClassName:e,children:t}){return l.createElement("div",{className:a()("slides_panel--panel--lPYTn",e),"data-non-interactive":!0},t)}function nW({titleTx:e,input:t}){return l.createElement(nY,{panelClassName:"slides_panel--panelTitleInput--Paowl"},l.createElement(nA.I,{titleTx:e,input:t}))}var n$=n(902237);function nz({legend:e,value:t,onChange:n,recordingKey:r,children:i}){return l.createElement("div",{className:tT.cx.py4.pr8.pl16.$},l.createElement(nI.I.Root,{legend:l.createElement(n$.q,null,e),value:t,onChange:n,recordingKey:r},i))}var nX=n(26659),nQ=n(344764);class nZ extends no.c${}let nJ=[0,2,4,8,16,24],nj=["NONE","SOLID","DASHED_BIG","DASHED_SMALL"],nq=nj.filter(e=>"NONE"!==e);function n0({recordingKey:e}){let t=(0,J.wA)(),n=(0,tC.U)(),{smallNudgeAmount:r,bigNudgeAmount:i}=(0,V.sT)(),[a,o]=(0,tF.lJ)("strokeWeight"),[s,c]=(0,tF.lJ)("dashPattern"),[d,p]=(0,tF.lJ)("strokePaints"),[m]=(0,tF.lJ)("inheritFillStyleKeyForStroke"),[h]=(0,tF.lJ)("inheritFillStyleNameForStroke"),_=d?(0,B.hS)(d)?d[0]:B.oV:void 0,E=(0,tF.kl)("numSelectedByType"),y=E&&(0,B.hS)(E)&&(0,R.vx)(E,"TABLE"),g=l.useMemo(()=>({NONE:{value:void 0,displayText:(0,T.t)("slides.properties_panel.border_panel.style_none"),icon:l.createElement(nk.t,null)},SOLID:{value:[],displayText:(0,T.t)("slides.properties_panel.border_panel.style_solid"),icon:l.createElement(nN.y,null)},DASHED_BIG:{value:[20,24],displayText:(0,T.t)("slides.properties_panel.border_panel.style_dashed_big"),icon:l.createElement(eb.B,{svg:nX.A,className:tT.cx.colorIconSecondary.$})},DASHED_SMALL:{value:[8,10],displayText:(0,T.t)("slides.properties_panel.border_panel.style_dashed_small"),icon:l.createElement(eb.B,{svg:nQ.A,className:tT.cx.colorIconSecondary.$})}}),[]),[v,f]=l.useState(()=>b(s));function b(e){if(!(0,B.gl)(e))return e&&_?(0,nC.c2)(e,g.SOLID.value)?"SOLID":(0,nC.c2)(e,g.DASHED_BIG.value)?"DASHED_BIG":(0,nC.c2)(e,g.DASHED_SMALL.value)?"DASHED_SMALL":"NONE":"NONE"}return(0,tK.f4)(()=>{f(b(s))}),l.createElement(tP.p,{name:"slides_border_panel"},l.createElement(nY,null,l.createElement(np.r,{titleTx:(0,T.tx)("slides.properties_panel.border_panel.title")}),l.createElement(nz,{legend:(0,T.tx)("slides.properties_panel.border_panel.style_title"),value:v,onChange:e=>{let t=g[e].value;("NONE"===v||(0,B.gl)(s))&&t&&F.Y5.triggerActionInUserEditScope("add-stroke-to-selection"),t?c(t):p([]),f(e)},recordingKey:u.Pt(e,"borderStyle")},(y?nq:nj).map(e=>l.createElement(nI.I.Option,{key:e,value:e,icon:g[e].icon,"data-onboarding-key":g[e].displayText,"aria-label":g[e].displayText}))),"NONE"!==v&&_&&l.createElement(nA.g,{leftLabel:(0,T.tx)("slides.properties_panel.border_panel.color"),leftInput:l.createElement(nB,{paint:_,onChange:e=>{p([e])},inheritStyleKeyField:"inheritFillStyleKeyForStroke",inheritStyleKey:m,inheritStyleName:h,pickerId:`${A.Yr}-border`,recordingKey:u.Pt(e,"color"),hideCustomColorPickerFillTypeToggle:!1}),rightLabel:(0,T.tx)("slides.properties_panel.border_panel.width_slider_tooltip"),rightInput:l.createElement(tS.E,{name:"slides_corner_radius_dropdown"},l.createElement(ni.ow,{value:{select:ns.pW,inputComponent:ns.gm}},l.createElement(no.tV,{value:{chevron:nc.c9}},l.createElement(nr.YZ,{id:"border-width-select",onValueChange:e=>{o(e)},value:void 0===a||(0,B.gl)(a)?B.oV:a,dropdownShown:n,willShowDropdown:()=>(F.Y5.commit(),Promise.resolve()),min:1,max:50,dispatch:t,recordingKey:u.Pt(e,"borderWidth"),smallNudgeAmount:r,bigNudgeAmount:i,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.border_panel.width_slider_tooltip"),tooltipForScreenReadersOnly:!0,enablePreview:!0},nJ.map(t=>l.createElement(nZ,{key:`border-width-${t}`,value:t,disabled:y,recordingKey:u.Pt(e,"borderWidth","select",t)},t))))))})))}var n1=n(106075),n5=n(784940),n4=n(595869);class n3 extends no.c${}let n2=[0,8,16,24,32,64,96];class n6 extends nt.X9{format(e){return 1e6===e?"Circular":`${e}`}}function n8({recordingKey:e}){let t=(0,J.wA)(),n=(0,tC.U)(),{smallNudgeAmount:r,bigNudgeAmount:i}=(0,V.sT)(),a=(0,l.useMemo)(()=>new n6({min:0,smallNudgeAmount:r,bigNudgeAmount:i}),[r,i]),[o,s]=(0,tF.lJ)("cornerRadius");if(!(0,n5.Qr)(K.Sqb.CORNER_RADIUS))return null;let c=void 0===o||(0,B.gl)(o)?B.oV:o;return l.createElement(tP.p,{name:"slides_corner_panel"},l.createElement(nW,{titleTx:(0,T.tx)("slides.properties_panel.corner"),input:l.createElement(tS.E,{name:"slides_corner_radius_dropdown"},l.createElement(ni.ow,{value:{select:ns.pW,inputComponent:ns.gm}},l.createElement(no.tV,{value:{chevron:nc.c9}},l.createElement(nr.YZ,{id:"corner-radius-select",onValueChange:e=>{s(e)},value:c,svg:n4.A,ui3Icon:l.createElement(n1.a,null),dropdownShown:n,willShowDropdown:()=>(F.Y5.commit(),Promise.resolve()),formatter:a,scrubbingDisabled:1e6===o,dispatch:t,recordingKey:u.Pt(e,"cornerRadius"),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.corner_radius"),tooltipForScreenReadersOnly:!1,enablePreview:!0},n2.map(t=>l.createElement(n3,{key:`corner-radius-${t}`,value:t,recordingKey:u.Pt(e,"cornerRadius","select",t)},t)),l.createElement(no.sK,{key:"divider"}),l.createElement(n3,{key:"corner-radius-circular",value:1e6,recordingKey:u.Pt(e,"cornerRadius","select","circular")},(0,T.tx)("slides.properties_panel.corners_panel.circular"))))))}))}var n7=n(823223),n9=n(256296),le=n(523099),lt=n(737947),ln=n(341860),ll=n(934576);let lr="slides_flapp_prop_panel--panelSelectorRow--8JJYh";function li({selection:e}){let t=(0,J.wA)(),n=(0,tC.U)(),r=(0,l.useMemo)(()=>Object.keys(e),[e])[0],i=(0,tp.Fk)((e,t)=>{let n=e.get(t);return(null==n?void 0:n.interactiveSlideConfigData)?n.interactiveSlideConfigData:void 0},r),a=(0,l.useMemo)(()=>(function(e){if(!e||!e.startingPointsData)return[];try{return JSON.parse(e.startingPointsData)}catch(e){return[]}})(i),[i]),o=(0,l.useMemo)(()=>new ls(a),[a]),s=(0,l.useCallback)(e=>{eP.l7.user("set_slides_embeddable_prototype_starting_point",()=>{var t;null==(t=ln.q.instance.get(r))||t.setInteractiveSlideConfigData("activeStartingPointNodeId",e)})},[r]),c=(0,l.useCallback)(e=>{eP.l7.user("set_slides_embeddable_prototype_show_device_frame",()=>{var t;null==(t=ln.q.instance.get(r))||t.setInteractiveSlideConfigData("deviceFrameShownOverride",e.toString())})},[r]);if(!i)return null;let d=i.activeStartingPointNodeId??"";return l.createElement(tP.p,{name:"slides_embeddable_prototype_panel"},l.createElement(eh.Zk,null,l.createElement(la,{fileName:function(e){if(e.fileName)return e.pageName?`${e.fileName} - ${e.pageName}`:e.fileName}(i),baseUrl:i.url,activeStartingPointNodeId:i.activeStartingPointNodeId}),l.createElement("div",{className:lr},l.createElement("label",null,(0,T.tx)("slides.properties_panel.embeddable_prototype.flow_label")),l.createElement(tS.E,{name:"slide_embeddable_prototype_flow_selector"},l.createElement(no.l6,{disabled:0===a.length,formatter:o,id:"slide-embeddable-prototype-flow-selector",property:d,onChange:e=>{s(e)},dispatch:t,dropdownShown:n},a.map(e=>l.createElement(no.c$,{value:e.id,key:e.id}))))),void 0!==i.deviceFramePreset&&""!==i.deviceFramePreset?l.createElement(lo,{showDeviceFrame:(0,ll.Wd)(i),onChange:c}):null))}function la({fileName:e,baseUrl:t,activeStartingPointNodeId:n}){let r=(0,l.useCallback)(()=>{let e;if(t){try{e=new URL(t)}catch(e){return}n&&e.searchParams.append("starting-point-node-id",n),lt.Ay.redirect(e.toString(),"_blank")}},[t,n]);return l.createElement(np.r,{titleTx:e?l.createElement("div",{className:tT.cx.textBodyMediumStrong.$},e):(0,T.tx)("slides.properties_panel.embeddable_prototype.default_title"),icon:l.createElement(ey.K,{"aria-label":(0,T.t)("slides.properties_panel.embeddable_prototype.open_prototype_label"),onClick:r,"data-tooltip-type":"text","data-tooltip":(0,T.t)("slides.properties_panel.embeddable_prototype.open_prototype_label")},l.createElement(le.E,null))})}function lo({showDeviceFrame:e,onChange:t}){return l.createElement("div",{className:lr},l.createElement("label",null,(0,T.tx)("slides.properties_panel.embeddable_prototype.device_frame_label")),l.createElement(tS.E,{name:"slides_embeddable_prototype_device_frame_switch"},l.createElement(n7.d,{label:l.createElement(n9.h,null,(0,T.t)("slides.properties_panel.embeddable_prototype.device_frame_label")),checked:e,onChange:t})))}class ls{constructor(e){this.startingPointsData=e}format(e){var t,n;return(null==(n=null==(t=this.startingPointsData)?void 0:t.find(t=>t.id===e))?void 0:n.name)??""}}var lc=n(424928),ld=n(954625),lp=n(116226),lu=n(485463);function lm(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M11.5 8.5H9A3.5 3.5 0 0 0 5.5 12v0A3.5 3.5 0 0 0 9 15.5h.5m2-7-2-2m2 2-2 2m5-2h.5a3.5 3.5 0 0 1 3.5 3.5v0a3.5 3.5 0 0 1-3.5 3.5h-2.5m0 0 2-2m-2 2 2 2"}))}function lh(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9.854 6.146a.5.5 0 1 0-.708.708L10.293 8H9a4 4 0 0 0-2.857 6.8.5.5 0 1 0 .714-.7A3 3 0 0 1 9 9h1.293l-1.147 1.146a.5.5 0 0 0 .708.708l2-2a.5.5 0 0 0 0-.708l-2-2Zm8.003 3.055a.5.5 0 1 0-.714.7A3 3 0 0 1 15 15h-1.293l1.147-1.147a.5.5 0 0 0-.708-.708l-2 2a.5.5 0 0 0 0 .708l2 2a.5.5 0 0 0 .708-.708L13.707 16H15a4 4 0 0 0 2.857-6.8Z",clipRule:"evenodd"}),l.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"m6.5 17.5 11-11"}))}var l_=n(43604),lE=n(978488),ly=n(30090),lg=n(278733),lv=n(931770),lf=n(53119),lb=n(335682),lS=n(186126),lP=n(527718),lT=n(172834),lw=n(671209),lI=n(407058),lk=n(306143),lN=n(617398),lC=n(676938);function lA({value:e,onValueChange:t,dispatch:n,dataTooltipType:r=eo.Ib.TEXT,dataTooltip:i,recordingKey:a}){return l.createElement(nr.w2,{"data-tooltip-type":r,"data-tooltip":i,value:e,onValueChange:t,dispatch:n,decimals:0,tooltipForScreenReadersOnly:!1,hidePercentSign:!0,childrenAtEnd:!0,inputClassName:tT.cx.w64.br0.$,recordingKey:a},l.createElement("span",{className:tT.cx.flex.w100.justifyEnd.pr4.eventsNone.colorTextSecondary.$},(0,T.tx)("fullscreen.scrubbable.percent")))}var lO=n(752256);function lx({value:e,min:t,max:n,step:r,bigStep:i,hints:a,onChange:o,ariaLabel:s,numberInput:c,sliderTrackableName:d,recordingKey:p}){return l.createElement("div",{className:"slides_slider_input_row--sliderInputRow--Z9EzC ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu"},l.createElement("div",{className:"slides_slider_input_row--slider--M8t1y"},l.createElement(tS.E,{name:d},l.createElement(lO.A,{min:t,max:n,step:r,bigStep:i,hints:a,rangeAnchor:t,mixed:(0,B.gl)(e),value:(0,B.hS)(e)?e:0,onChange:o,"aria-label":s,recordingKey:u.Pt(p,"slider")}))),l.createElement("div",{className:"slides_slider_input_row--input--E4qTs"},c))}function lR({rowRef:e,recordingKey:t}){let[n,r]=l.useState(!1),[i,a]=l.useState(null),o=l.useCallback(()=>{n?r(!1):e.current&&(a((0,es.cn)(e.current,240)),r(!0))},[n,e]),s=l.useRef(null),c=l.useRef(null);return(0,lC.Y)(()=>r(!1),{closeOnEsc:!0,ignore:[s,c]}),l.createElement(l.Fragment,null,l.createElement(tS.E,{name:"slides_blur_input"},l.createElement(nV,{isOpen:n,onMouseDown:o,ref:s,recordingKey:t},l.createElement("div",{className:tT.cx.inlineFlex.itemsCenter.$},l.createElement(lN.V,null),(0,T.tx)("slides.properties_panel.blur.label")))),n&&i&&l.createElement("div",{ref:c},l.createElement(eY.vx,{title:(0,T.t)("slides.properties_panel.blur.title"),headerSize:"small",initialPosition:i,initialWidth:240,onClose:()=>r(!1),autoflowHeight:!0,recordingKey:t},l.createElement("div",{className:tT.cx.py12.pr8.$},l.createElement(lM,{recordingKey:t})))))}function lM({recordingKey:e}){let t=(0,J.wA)(),[n,r]=(0,tF.lJ)("blur"),i=l.useCallback(e=>r(100*e),[r]);return l.createElement(tP.p,{name:"slides_blur_controls"},l.createElement(lx,{min:0,max:1,step:.01,bigStep:.1,value:(0,B.gl)(n)?B.oV:(n||0)/100,onChange:i,ariaLabel:(0,T.t)("slides.properties_panel.blur.strength"),numberInput:l.createElement(tS.E,{name:"slides_blur_strength_input"},l.createElement(lA,{dataTooltip:(0,T.t)("slides.properties_panel.blur.strength"),value:(0,B.gl)(n)?B.oV:(n||0)/100,onValueChange:i,dispatch:t,recordingKey:u.Pt(e,"blurStrength","input")})),sliderTrackableName:"slides_blur_strength_slider",recordingKey:u.Pt(e,"blurStrength")}))}var lL=n(935283),lD=n(227944);let lF=`${A.Yr}-overlay`,lK={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:.4,blendMode:"NORMAL",visible:!0};function lV({rowRef:e,recordingKey:t}){let[n,r]=l.useState(!1),[i,a]=l.useState(null),o=l.useCallback(()=>{n?r(!1):e.current&&(a((0,es.cn)(e.current,240)),r(!0))},[n,e]),s=l.useRef(null),c=l.useRef(null);(0,lC.Y)(()=>r(!1),{closeOnEsc:!0,ignore:[s,c]});let d=(0,tF.kl)("imageOverlayPaint"),p=(0,B.E7)(d??null)||lK;return l.createElement(l.Fragment,null,l.createElement(tS.E,{name:"slides_overlay_input"},l.createElement(nV,{isOpen:n,onMouseDown:o,ref:s,recordingKey:t},l.createElement("span",{className:tT.cx.inlineFlex.gap6.pl4.ellipsis.noWrap.overflowHidden.$},l.createElement(nG,{paint:p,colors:[]}),(0,T.tx)("slides.properties_panel.overlay")))),n&&i&&l.createElement("div",{ref:c},l.createElement(eY.vx,{title:(0,T.t)("slides.properties_panel.overlay"),headerSize:"small",initialPosition:i,initialWidth:240,onClose:()=>r(!1),autoflowHeight:!0,recordingKey:t},l.createElement("div",{className:tT.cx.py12.pr8.$},l.createElement(lU,{recordingKey:t})))))}function lU({recordingKey:e}){let t=(0,J.wA)(),n=(0,lD.Zr)("add-image-overlay"),[r,i]=(0,tF.lJ)("imageOverlayPaint"),a=(0,B.gl)(r)||r&&n,o=e=>{(0,lL.KF)((0,B.hS)(r),"overlay paint should not be mixed");var t={...r||lK};t.opacity=e,i(t)};return l.createElement(tP.p,{name:"slides_overlay_controls"},l.createElement(lx,{min:0,max:1,step:.01,bigStep:.1,value:a?B.oV:(null==r?void 0:r.opacity)||0,onChange:o,ariaLabel:(0,T.t)("slides.properties_panel.overlay.opacity_slider_aria_label"),numberInput:l.createElement(tS.E,{name:"slides_image_overlay_opacity_slider"},l.createElement(lA,{dataTooltip:(0,T.t)("fullscreen.scrubbable.opacity"),value:a?B.oV:(null==r?void 0:r.opacity)||0,onValueChange:o,dispatch:t})),sliderTrackableName:"slides_image_overlay_opacity_slider",recordingKey:u.Pt(e,"opacity")}),l.createElement("div",{className:tT.cx.pt8.pb4.pr8.pl16.$},l.createElement(nB,{paint:a?B.oV:r||lK,onChange:e=>{(0,lL.KF)((0,B.hS)(r),"overlay paint should not be mixed");var t={...e};r&&e.color&&r.color&&tI.z5.format(e.color)!==tI.z5.format(r.color)&&(t.opacity=r.opacity),r||(t.opacity=.4),i(t)},pickerId:lF,inheritStyleKeyField:"inheritFillStyleKey",inheritStyleKey:void 0,inheritStyleName:void 0,recordingKey:u.Pt(e,"color"),hideCustomColorPickerFillTypeToggle:!1})))}let lB="image-scale-mode-select";function lH({paint:e,paintIndex:t,onChange:n,recordingKey:r,selectedPropertyType:i}){var o;let s=(0,J.wA)(),c=(0,l.useMemo)(()=>new nn.D,[]),d=(0,J.d4)(e=>{var t;return(null==(t=e.dropdownShown)?void 0:t.type)===lB?e.dropdownShown:null}),[p,m]=(0,l.useState)(!1),[h,_]=(0,l.useState)(0),[E,y]=(0,l.useState)(0),[g,f]=(0,l.useState)(!1),[b,S]=(0,l.useState)(null),[P,w]=(0,l.useState)(!1),[I,k]=(0,l.useState)(!1),[N,C]=(0,l.useState)(0),[A,O]=(0,l.useState)(null),[x,R]=(0,l.useState)(null),M=(0,H.y7)(e),L=(0,l.useRef)(M);L.current=M;let D=(0,lb.tS)(),V=!!(null==e?void 0:e.animatedImage),U=!!(null==e?void 0:e.video)||(null==e?void 0:e.type)==="VIDEO";(0,l.useEffect)(()=>{var e;V&&(null==(e=L.current)?void 0:e.animationFrame)!=null?(C(L.current.animationFrame),(0,lI.Bc)(L.current).then(e=>{O((0,lf.J)(e))})):U&&(0,ly.Fe)().then(e=>S(e))},[U,V,null==(o=null==M?void 0:M.animatedImage)?void 0:o.hash]);let G=function(){let e=(0,tF.kl)("videoMediaLoop");return{mediaLoop:e,autoplay:(0,tF.kl)("videoAutoplay"),muted:(0,tF.kl)("videoMuted"),numVideosSelected:(0,tF.kl)("numVideosSelected")}}();return e?l.createElement("div",null,l.createElement(v.Y,{isDragTarget:()=>!0,onTargetDragEnter:()=>(m(!0),u.aH),onTargetDragLeave:()=>(m(!1),u.aH),onTargetDrop:n=>{if(m(!1),F.Y5.fileArrayToString){let l=F.Y5.fileArrayToString(Array.from(n.files));K.glU.dropImageOnPaintThumbnail((null==e?void 0:e.blendMode)??"NORMAL",(null==e?void 0:e.opacity)??1,l,t,i)}},recordingKey:u.Pt(r,"imageDragTarget")},l.createElement("div",{className:a()(tT.cx.relative.wAuto.h100.flex.itemsCenter.justifyCenter.radiusMedium.$,"slides_color_controls--imagePreviewContainer--ivfKV",{[tT.cx.colorBorderSelected.bSolid.b1.$]:p})},M&&U?l.createElement(lT.A,{imagePaint:M,openFileKey:D||void 0,width:200,height:100,className:tT.cx.opacity1.block.$,currentTime:h,onUpdateCurrentTime:e=>_(e),setDuration:e=>y(e),playing:g,setPlaying:e=>f(e),videoJsLib:b,isVideoLoaded:P,setIsVideoLoaded:e=>w(e),userClickedControls:I,setUserClickedControls:e=>k(e)}):M&&V?l.createElement(lS.Y,{imagePaint:M,width:200,height:100,animatedImage:A,animationFrame:N,onUpdateFrameData:e=>R(e),playing:g}):M?l.createElement(lP.K,{imagePaint:M,width:200,height:100,forceUpdate:!1}):null,l.createElement("div",{className:a()(tT.cx.absolute.top0.bottom0.left0.right0.flex.itemsCenter.justifyCenter.$,"slides_color_controls--imagePreviewOverlay--h5Rqz")},l.createElement(tS.E,{name:"slides_media_upload"},l.createElement(eh.rp,{onClick:()=>{F.Y5.updateAppModel({currentSelectedProperty:{type:K.rrT.FILL,indices:[t]}});let n=e.blendMode||"NORMAL",l=e.opacity||1;K.glU.uploadPaintMedia(n,l)},style:lg.sx.wAuto.py4.px8.$,recordingKey:u.Pt(r,"uploadMedia")},(0,T.tx)("slides.properties_panel.replace_media")))))),l.createElement(eE.Ad,{label:null,input:l.createElement(tS.E,{name:"slides_image_scale_mode"},l.createElement(no.l6,{id:lB,property:e.imageScaleMode??"FILL",onChange:t=>{"STRETCH"===t?F.Y5.triggerActionInUserEditScope("crop-image"):n({...e,imageScaleMode:t})},formatter:c,dispatch:s,dropdownShown:d,targetDomNode:document.body,inputWidth:80,recordingKey:u.Pt(r,"imageScaleMode")},lI.GA.map((e,t)=>l.createElement(no.c$,{key:t,value:e,recordingKey:u.Pt(r,"imageScaleMode",e)}))))}),l.createElement(lY,{recordingKey:r}),U&&l.createElement(l.Fragment,null,l.createElement("div",{className:tX},l.createElement(lk.P,{paint:e,currentTime:h||0,duration:E,onVideoTimeChange:e=>{_(e),f(!1)},disabled:!e.video,isVideoLoaded:P,setPlaying:e=>f(e),playing:!!e.video&&g,setUserClickedControls:e=>k(e)})),l.createElement("div",{className:tT.cx.pl16.pr8.flex.minH32.itemsCenter.$},l.createElement("div",{className:tT.cx.flex1.$},l.createElement(lu.S,{label:l.createElement(n9.J,{"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.default_video_playback_state")},(0,T.tx)("proto.prototype_panel.autoplay")),onChange:e=>F.Y5.updateSelectionProperties({videoAutoplay:e}),checked:!0===G.autoplay,mixed:(0,B.gl)(G.autoplay)})),l.createElement(lG,{icon:!0===G.mediaLoop?l.createElement(lm,{color:"var(--color-border-selected)"}):l.createElement(lh,null),enabled:!0===G.mediaLoop,onClick:()=>F.Y5.updateSelectionProperties({videoMediaLoop:!G.mediaLoop}),recordingKey:u.Pt(r,"videoLoopToggle"),tooltip:(0,T.t)("proto.prototype_panel.loop"),trackingName:"slides_video_loop_toggle"}),l.createElement(lG,{icon:!0!==G.muted?l.createElement(l_.L,{color:"var(--color-border-selected)"}):l.createElement(lE.P,null),enabled:!0!==G.muted,onClick:()=>F.Y5.updateSelectionProperties({videoMuted:!G.muted}),recordingKey:u.Pt(r,"videoSoundToggle"),tooltip:(0,T.t)("proto.prototype_panel.sound"),trackingName:"slides_video_sound_toggle"}))),V&&l.createElement("div",{className:tX},l.createElement(lw.F,{paint:e,animationFrame:N,numFrames:A?A.numFrames():null,onGIFFrameChange:e=>{C(Math.round(e)),f(!1)},disabled:!A,setPlaying:e=>f(e),playing:!!A&&g,setGIFCoverFrame:t=>{if(!x)return;let n=t??N;(null!=t||n!==e.animationFrame)&&(F.Y5.triggerAction("toggle-raster-edit-mode"),eP.l7.user("update-gif-image-slides",()=>(0,lv.SK)({...e,animationFrame:n},x.data,K.rrT.FILL)),K.glU.setDefaultEditMode())}}))):null}function lG({enabled:e,onClick:t,icon:n,tooltip:r,trackingName:i,recordingKey:o}){return l.createElement(tS.E,{name:i},l.createElement(ef.GG,{className:a()("slides_color_controls--videoSettingsButton--MEiwV",{[tz]:e}),onClick:t,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":r,"aria-label":r,recordingKey:o},n))}function lY({recordingKey:e}){let t=(0,l.useRef)(null);return l.createElement(nA.g,{ref:t,leftLabel:null,leftInput:l.createElement(lV,{rowRef:t,recordingKey:u.Pt(e,"overlay")}),rightLabel:null,rightInput:l.createElement(lR,{rowRef:t,recordingKey:u.Pt(e,"blur")})})}let lW=`${A.Yr}-fill`,l$=["NONE","SOLID","GRADIENT","MEDIA"],lz={SOLID:"SOLID",GRADIENT:"GRADIENT_LINEAR",MEDIA:"IMAGE"};function lX({recordingKey:e}){let t=(0,J.d4)(e=>e.mirror.selectionProperties.numSelectedByType),n=!!t&&(0,R.OU)(t,["SLIDE"]),r=t&&(0,R.Kl)(t,["SLIDE","TEXT"]),[i]=(0,tF.lJ)("fillsType"),a=(0,J.d4)(e=>{let t=e.mirror.selectionProperties.fillPaints;return(0,B.gl)(t)?B.oV:null==t?void 0:t[0]}),[o]=(0,tF.lJ)("imageOverlayPaint"),[s]=(0,tF.lJ)("inheritFillStyleKey"),[c]=(0,tF.lJ)("inheritFillStyleName"),d=l.useMemo(()=>({NONE:{displayText:(0,T.t)("slides.properties_panel.fill.fill_type_none"),icon:l.createElement(ev.f,null)},SOLID:{displayText:(0,T.t)("slides.properties_panel.fill.fill_type_solid"),icon:l.createElement(lc.H,null)},GRADIENT:{displayText:(0,T.t)("slides.properties_panel.fill.fill_type_gradient"),icon:l.createElement(ld.z,null)},MEDIA:{displayText:(0,T.t)("slides.properties_panel.fill.fill_type_media"),icon:l.createElement(lp.Z,null)}}),[]),p=l.useCallback((e,t)=>{H.Tm.clearCache();let n=[e];o&&(0,B.hS)(o)&&n.push(o),F.Y5.updateSelectionProperties({fillPaints:n},{shouldCommit:t})},[o]),m=l.useCallback(e=>(0,B.gl)(e)?void 0:e?"RASTER"===e||o&&(0,B.hS)(o)?"MEDIA":e:r?"SOLID":"NONE",[r,o]),[h,_]=l.useState(m(i));l.useEffect(()=>{_(m(i))},[i,a,m]);let E=l.useCallback(e=>{h!==e&&("NONE"===e?F.Y5.updateSelectionProperties({fillPaints:[]}):lz[e]&&p(H.Tm.initPaint(lz[e],tZ.color,(0,B._W)(a,{}),"slides-fill-panel"),tV.zk.YES),_(e))},[a,p,h]);(0,tK.f4)(()=>{_(m(i))});let y=h&&(0,B.hS)(i)&&("SOLID"===h||"GRADIENT"===h),g=h&&(0,B.hS)(i)&&a&&(0,B.hS)(a)&&"MEDIA"===h;return l.createElement(tP.p,{name:"slides_fill_panel"},l.createElement(nY,null,l.createElement(np.r,{titleTx:(()=>{if(t){if(n)return(0,T.tx)("slides.properties_panel.fill.slide_fill_title");if((0,R.OU)(t,["TEXT"]))return(0,T.tx)("slides.properties_panel.fill.text_fill_title")}return(0,T.tx)("slides.properties_panel.fill.fill_title")})()}),l.createElement(nz,{legend:(0,T.tx)("slides.properties_panel.fill.type_label"),value:h,onChange:E,recordingKey:u.Pt(e,"fillType")},l$.filter(e=>!(r&&"NONE"===e)).map(e=>l.createElement(nI.I.Option,{key:e,value:e,icon:d[e].icon,"data-onboarding-key":d[e].displayText,"aria-label":d[e].displayText}))),y&&l.createElement("div",{className:tT.cx.py4.pr8.pl16.$},l.createElement(nB,{paint:a,onChange:p,inheritStyleKeyField:"inheritFillStyleKey",inheritStyleName:c,inheritStyleKey:s,pickerId:lW,recordingKey:u.Pt(e,"color"),hideCustomColorPickerFillTypeToggle:!0})),g&&l.createElement(lH,{paint:a,paintIndex:0,onChange:p,recordingKey:e,selectedPropertyType:K.rrT.FILL})))}var lQ=n(234945),lZ=n(690122),lJ=n(721478),lj=n(687881);let lq=l.memo(function({recordingKey:e}){let t=(0,J.d4)(lQ.qd),n=(0,J.d4)(lQ.dT),r=(0,J.d4)(ek.Z3),i=(0,B.E7)((0,tF.kl)("resettableInstanceOverrides")),{onlyInstances:a,onlyInstanceSublayers:o}=(0,lZ.p)(n);return a||o?l.createElement(eh.Zk,{className:lj.Mx},a&&l.createElement("div",{className:lj.Og},l.createElement(eI.e6,{containerWidth:eW.O2.RESIZABLE_SIDEBAR,propDimension:eW.OE.ASSIGNMENT,guids:t,recordingKey:e,enableHidingOverflowRowsInUI3:!0,hideIcon:!0})),r.map(t=>l.createElement("div",{key:`bubbledInstance.${t[0]}`,className:lj.Wf},l.createElement(eI.ME,{containerWidth:eW.O2.RESIZABLE_SIDEBAR,propDimension:eW.OE.ASSIGNMENT,guids:t,hideErrors:!0,resettableInstanceOverrides:i&&i.bubbledInstanceOverrides?i.bubbledInstanceOverrides[t[0]]:void 0,instanceAndSublayerGUIDs:t,instanceNameDisplayOverride:lJ.NA.NAME_ONLY,shouldHideInstanceTitleButtons:!0,hideIcon:!0,recordingKey:e,forBubbledProps:!0,highlightNodesOnHover:!0})))):l.createElement(eh.Zk,{className:lj.Mx})});var l0=n(992739),l1=n(447636);function l5({selection:e}){let t=(0,l.useMemo)(()=>Object.keys(e),[e]),n=t[0],r=(0,tp.Fk)((e,t)=>(function(e){let t;if(!e)return;let n=e.interactiveSlideElementType;if(null===n||n===K.a9h.EMBED)return;switch(n){case K.a9h.POLL:t=(0,T.t)("slides.flapp.embed.widget_poll");break;case K.a9h.FACEPILE:t=(0,T.t)("slides.flapp.embed.widget_stamps");break;case K.a9h.ALIGNMENT:t=(0,T.t)("slides.flapp.embed.widget_alignment");break;case K.a9h.YOUTUBE:t=(0,T.t)("slides.flapp.embed.widget_youtube")}let l=Object.keys(e.interactiveSlideParticipantData).length>0,r=e.interactiveSlideConfigData,i=(0,l1.aF)(r);return{displayName:t,currentTheme:i.theme,hasParticipantData:l,shouldShowBackground:!i.transparentMode}})(e.get(t)),n),i=(0,l.useCallback)(()=>{eP.l7.user("reset_slides_interactive_widget_participant_data",()=>{var e;null==(e=ln.q.instance.get(n))||e.resetInteractiveSlideParticipantData()})},[n]),a=(0,l.useCallback)(e=>{eP.l7.user("set_interactive_widget_theme",()=>{var t;null==(t=ln.q.instance.get(n))||t.setInteractiveSlideConfigData("theme",e)})},[n]),o=(0,l.useCallback)(e=>{eP.l7.user("set_interactive_widget_hide_background",()=>{var t;null==(t=ln.q.instance.get(n))||t.setInteractiveSlideConfigData("hideBackground",(!e).toString())})},[n]);return!r||t.length>1?null:l.createElement(tP.p,{name:"slides_interactive_widget_panel"},l.createElement(eh.Zk,null,l.createElement(np.r,{titleTx:l.createElement("p",{className:tT.cx.textBodyMediumStrong.$},r.displayName),icon:l.createElement(l3,{canReset:r.hasParticipantData,onReset:i})}),l.createElement(l6,{currentTheme:r.currentTheme,onThemeSelected:a}),l.createElement(l7,{showBackground:r.shouldShowBackground,onChange:o}),l.createElement(l4,null)))}function l4(){return l.createElement("div",{className:tT.cx.p8.$},l.createElement("div",{className:tT.cx.colorBgSecondary.radiusMedium.p8.$},l.createElement("div",{className:tT.cx.textBodyMediumStrong.colorText.pb4.$},(0,T.tx)("slides.properties_panel.interactive_widget.usage_guidance_header")),l.createElement("div",{className:tT.cx.textBodyMedium.colorTextTertiary.$},(0,T.tx)("slides.properties_panel.interactive_widget.usage_guidance_text"))))}function l3({canReset:e,onReset:t}){let{showing:n,toggle:r}=(0,tC.B)("RESET_INTERACTIVE_WIDGET_ICON_DROPDOWN_ID"),i=(0,l.useRef)(null);return l.createElement(l.Fragment,null,l.createElement(ey.K,{"aria-label":(0,T.t)("slides.properties_panel.interactive_widget.reset_label"),disabled:!e,onClick:()=>r(),ref:i},l.createElement(l0.m,null)),n&&i.current&&l.createElement(ed.Cf,{targetRect:i.current.getBoundingClientRect(),displayOverTarget:!0},l.createElement(en.W.Option,{disabled:!0},(0,T.tx)("slides.properties_panel.interactive_widget.reset_confirmation_title")),l.createElement(en.W.Option,{onClick:t},(0,T.tx)("slides.properties_panel.interactive_widget.confirm_reset_label"))))}let l2="flappThemeSelector";function l6({currentTheme:e,onThemeSelected:t}){let n=(0,J.wA)(),r=(0,tC.U)();return l.createElement("div",{className:lr},l.createElement("label",null,(0,T.tx)("slides.properties_panel.interactive_widget.theme_selector_label")),l.createElement(tS.E,{name:"slides_interactive_widget_theme_selector"},l.createElement(no.l6,{id:"slides-interactive-widget-theme-selector",formatter:l8,property:e,onChange:t,dispatch:n,dropdownShown:r,recordingKey:l2},l.createElement(no.c$,{value:l1.Pm.Light,key:l1.Pm.Light,recordingKey:u.Pt(l2,"lightOption")}),l.createElement(no.c$,{value:l1.Pm.Dark,key:l1.Pm.Dark,recordingKey:u.Pt(l2,"darkOption")}))))}let l8=new class{format(e){switch(e){case l1.Pm.Light:return(0,T.t)("slides.properties_panel.interactive_widget.light_theme_label");case l1.Pm.Dark:return(0,T.t)("slides.properties_panel.interactive_widget.dark_theme_label");case l1.Pm.Translucent:return(0,T.t)("slides.properties_panel.interactive_widget.transparent_theme_label")}}};function l7({showBackground:e,onChange:t}){return l.createElement("div",{className:lr},l.createElement("label",null,(0,T.tx)("slides.properties_panel.interactive_widget.background_label")),l.createElement(tS.E,{name:"slides_interactive_widget_background_switch"},l.createElement(n7.d,{label:l.createElement(n9.h,null,(0,T.t)("slides.properties_panel.interactive_widget.background_label")),checked:e,onChange:t,recordingKey:"flappBackgroundToggle"})))}var l9=n(334495);let re=/^\w+:/;function rt({recordingKey:e}){let t=(0,J.wA)(),n=(0,tC.U)(),[r,i]=(0,tF.lJ)("hyperlink"),a=(0,B.E7)(r),o=null;a&&void 0!==a.guid?o={type:"guid",guid:a.guid}:a&&void 0!==a.url?o={type:"url",url:a.url}:(0,B.gl)(r)&&(o=B.oV);let s=(0,nl.J2)(K.Ez5.slideDeck().slideGrid),c=(0,nm.rY)(s),d=l.useMemo(()=>c.reduce((e,t,n)=>(e.set(t,n),e),new Map),[c]),p=l.useMemo(()=>({format:e=>{if(null===e)return"";if((0,B.gl)(e))return(0,T.t)("fullscreen.mixed");if("guid"===e.type){let t=(0,P.dI)(e.guid),n=d.get(t);return void 0===n?"":(0,T.t)("slides.properties_panel.link_panel.slide_number",{orderNum:n+1})}return"url"===e.type?e.url:""},parse:e=>{if(!e)return null;let t=(0,T.t)("slides.properties_panel.link_panel.slide_number",{orderNum:""}),n=e.replace(t,"").trim();if(n.length>0){let e=parseInt(n)-1,t=(0,P.sH)(c[e]);if(t)return{type:"guid",guid:t}}return{type:"url",url:e}},isEqual:(e,t)=>(0,nC.c2)(e,t)}),[d,c]),m=eP.nc.user("slides-link-change",l.useCallback(e=>{null===e?i({},tV.zk.YES):"guid"===e.type?i({guid:e.guid},tV.zk.YES):"url"===e.type&&i({url:e.url.match(re)?e.url:`https://${e.url}`},tV.zk.YES),K.glU.hideHyperlinkEditor()},[i]));return l.createElement(tP.p,{name:"slides_link_panel"},l.createElement(nY,null,l.createElement(np.r,{titleTx:(0,T.tx)("slides.properties_panel.link_panel.title")}),l.createElement(eE.Ad,{input:l.createElement(ni.ow,{value:{select:ns.pW,inputComponent:ns.gm}},l.createElement(no.tV,{value:{chevron:nc.c9}},l.createElement(ni.a3,{id:"slides-link-combo-box",dispatch:t,inputClassName:l9.lb,dropdownShown:n,formatter:p,property:o,onChange:e=>{m(e)},placeholder:(0,T.t)("slides.properties_panel.link_panel.placeholder"),forceInputPlaceholder:null===o,recordingKey:u.Pt(e,"link")},c.map(t=>l.createElement(no.c$,{value:{type:"guid",guid:(0,P.sH)(t)},key:t,recordingKey:u.Pt(e,t)}))))),label:null})))}var rn=n(668e3),rl=n(861726),rr=n(416580),ri=n(776250),ra=n(794272),ro=n(175290),rs=n(83909),rc=n(113058),rd=n(301462),rp=n(335691),ru=n(878319),rm=n(567488),rh=n(494057),r_=n(224690),rE=n(219101),ry=n(760066),rg=n(533573),rv=n(282263),rf=n(564092),rb=n(952277),rS=n(37819),rP=n(57392),rT=n(173454),rw=n(715762),rI=n(507662),rk=n(664241),rN=n(258376);function rC({recordingKey:e}){let t=(0,tb.md)(rP.I7);return(0,rf.Tt)()&&!(0,s.kc)().ds_variables_relax_modes&&t?l.createElement(rO,{recordingKey:e}):null}let rA="VARIABLES_INCOMPATIBLE_MODES_UPDATE_DROPDOWN";function rO({recordingKey:e}){let t=(0,J.wA)(),n=(0,tC.U)(),r=l.useRef(null),i=n&&n.type===rA,a=l.useCallback(()=>{r.current&&t(er.j7({type:rA,data:{targetRect:r.current.getBoundingClientRect()}}))},[t]),o=l.useCallback(()=>{t(ei.to({type:rI.T,data:{initialTab:rT.Wv.UPDATES,entrypoint:rw.r6.VARIABLE_MODES_ACCEPT_UPDATES_DROPDOWN_OPTION}}))},[t]);return l.createElement(l.Fragment,null,l.createElement("div",{ref:r},l.createElement(eT.YW,{recordingKey:u.Pt(e,"updateIcon"),selected:!!i,svg:rN.A,className:rk.l_,dataTestId:"updatesModesButton","data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("variables.layer_panel.header.update_button_direct.tooltip"),onMouseDown:e=>e.stopPropagation(),onClick:a})),i&&(r.current?l.createElement(ed.Cf,{targetRect:r.current.getBoundingClientRect(),maxWidth:226,disableDropdownScrollContainer:!0,propagateCloseClick:!0},l.createElement(l.Fragment,null,l.createElement(en.W.Option,{className:rk.Ig,recordingKey:u.Pt(e,"description"),key:"description",disabled:!0},(0,T.t)("variables.layer_panel.header.update_button.dropdown.description")),l.createElement(en.W.Separator,null),l.createElement(en.W.Option,{onClick:o,recordingKey:u.Pt(e,"review-update"),key:"review_update"},(0,T.t)("variables.layer_panel.header.update_button_direct.dropdown.option")))):null))}var rx=n(161115);let rR=new nn.SU;class rM extends no.c${}class rL extends no.l6{}class rD extends l.PureComponent{render(){var e;let t=this.props.includePassThrough?rx.j4:rx.r5;return l.createElement(rL,{id:(e=this.props.id,`blend-mode-select-${e}`),className:this.props.className,inputClassName:this.props.inputClassName,chevronClassName:this.props.chevronClassName,property:this.props.property,formatter:rR,onChange:this.props.onChange,onMouseDown:this.props.onMouseDown,willShowDropdown:this.props.willShowDropdown,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:this.props.recordingKey,dropdownWidth:this.props.isUI3?120:"auto",svg:this.props.isUI3?void 0:(0,rx.HC)((0,B.E7)(this.props.property)),enablePreview:!0},t.map((e,t)=>"SELECT_DIVIDER"===e?l.createElement(no.sK,{key:t}):l.createElement(rM,{key:t,value:e,recordingKey:u.Pt(this.props,e)})))}}rD.displayName="BlendMode";var rF=n(697652),rK=n(83695),rV=n(731262),rU=n(90013),rB=n(737834),rH=n(77763),rG=n(781867),rY=n(435091);let rW=(0,r_.Tn)();function r$(e){let t=l.useCallback(e=>{F.Y5.updateSelectionProperties({visible:e})},[]),n=l.useMemo(r_.On,[]),{isDefReferencedBySelection:r,visibilityIsBoundToComponentProp:i}=(0,ra.R)(e=>({isDefReferencedBySelection:!!n(e,rp.R.VISIBLE),visibilityIsBoundToComponentProp:rW(e,(0,lQ.qd)(e),rp.R.VISIBLE)})),a=(0,tN.SG)(["VISIBLE"]).data??[],[o]=(0,tF.lJ)("visible"),{consumedVariable:s}=(0,rf.u3)(["VISIBLE"]),c=l.useRef(null),[d,p]=rq(),m=r0(),h=(0,tN.u)(m),_=!!s&&!!h,E=_||i||r,y=!_&&!i&&a.length>0,g=o?(0,T.t)("fullscreen.properties_panel.tooltip_hide"):(0,T.t)("fullscreen.properties_panel.tooltip_show"),v=l.createElement("span",{className:rY.RK},l.createElement(rG.B,{disabled:E,visible:o,onChange:t,recordingKey:u.Pt(e,"visibleToggle")})),f=(0,ew.R)();return l.createElement("div",{className:rY.RK},l.createElement(ry.JQ,{ref:c,currentFieldValue:!!(0,B.gl)(o)||o,isActive:d,disabled:!y,onPickerOpen:()=>p(c.current),recordingKey:u.Pt(e,"visibilityVariableControl"),dataTestId:"visibility-variable-control"},f?l.createElement(eT.YW,{selected:!E&&!o,disabled:E,onClick:()=>t(o===B.oV||!o),recordingKey:u.Pt(e,"visibleToggle"),dataTestId:"visibility-variable-control","data-tooltip":g,"data-tooltip-type":eo.Ib.TEXT},o?l.createElement(rB._,null):l.createElement(rH.j,null)):v))}var rz=n(82131),rX=n(490393),rQ=n(424148),rZ=n(144919);function rJ(e){let{blendMode:t,opacity:n,visible:r}=e,i="ui3"===(0,et.DP)().version,o=l.useRef(null),c=l.useMemo(r_.On,[]),d=l.useMemo(r_.Tn,[]),{dropdownShown:p,isDefReferencedBySelection:m,selectedGUIDs:h,visibilityIsBoundToComponentProp:_}=(0,ra.R)(e=>({dropdownShown:e.dropdownShown,isDefReferencedBySelection:!!c(e,rp.R.VISIBLE),selectedGUIDs:(0,lQ.qd)(e),visibilityIsBoundToComponentProp:d(e,(0,lQ.qd)(e),rp.R.VISIBLE)})),E=(0,B.gl)(r),y=(0,J.wA)(),g=l.useCallback((e,t=tV.zk.YES)=>{rs.wt.shouldReportForShouldCommit(t)&&rd.FZ.trackFromFullscreen("editor-blend-mode-change",{blendMode:e}),F.Y5.updateSelectionProperties({blendMode:e,visible:!0},{shouldCommit:t})},[]),v=l.useCallback((e,t)=>{F.Y5.updateSelectionProperties({opacity:e},{shouldCommit:t}),e>0&&!m&&F.Y5.updateSelectionProperties({visible:!0},{shouldCommit:t})},[m]),f=l.useRef(null),[,b]=rq(),{clearVariableConsumption:S}=(0,rf.u3)(["VISIBLE"]),{variableConsumptionMap:P}=(0,rf.R1)(),w=r0(),I=(0,tN.u)(w),k=null==I?void 0:I.name,N=rj();return l.createElement(tP.p,{name:"layer_panel"},l.createElement(eh.Zk,null,l.createElement(eh.fI,{className:rz.LO},l.createElement(rF.Tu,{isPanelBodyCollapsedAtom:null},l.createElement(eh.xw,{isPanelBodyCollapsedAtom:null},(0,T.tx)("fullscreen.layer_panel.layer")),l.createElement(rC,{recordingKey:"frameLevel"}),!N&&l.createElement(rm.yQ,{nodeField:rp.R.VISIBLE,defaultValue:r,guids:h}),l.createElement(rS.M,{showLibrarySets:!1,recordingKey:"frameLevel"}))),l.createElement(rF.JH,{isPanelBodyCollapsedAtom:null},l.createElement(eh.fI,null,l.createElement(rD,{id:"layer-blend-mode",className:rY.jK,inputClassName:rY.Df,chevronClassName:rY.ai,property:t,dispatch:y,dropdownShown:p,onChange:g,willShowDropdown:()=>((0,ri.sx)("editor-blend-mode-dropdown-show"),Promise.resolve()),includePassThrough:!0,recordingKey:u.Pt(e,"blendMode"),isUI3:i}),l.createElement(rE.e,{condition:!0,wrapper:t=>l.createElement(ry.sA,{recordingKey:u.Pt(e,"layerOpacityInputWrapper"),fields:["OPACITY"],disabled:!1,resolvedType:K.rXF.FLOAT,currentFieldValue:(0,B.hS)(n)?n:void 0,inputClassName:a()({[rY.ke]:!0,[rY.TQ]:!0}),hideIcon:!0,inputRef:o,hasBindingContextMenu:!0},t)},l.createElement(nr.Pd,{isTokenizable:!0,value:n,onValueChange:v,mixedMathHandler:r5,dispatch:y,recordingKey:u.Pt(e,"opacity"),forwardedRef:o,noBorderOnHover:!0})),l.createElement(r$,{recordingKey:e.recordingKey})),E&&!m&&l.createElement(eh.fI,{dataTestId:"mixed-visibility-label"},l.createElement(eh.UZ,{className:rX.Pf},(0,T.tx)("fullscreen.layer_panel.replace_mixed_visibility",{svg:l.createElement("div",{className:rY.dY},l.createElement(el.U,{svg:rZ.A},l.createElement(rl.l,null)))}))),l.createElement("div",{className:rY.I0},l.createElement(rh.L,{nodeField:rp.R.VISIBLE,currentValue:e.visible})),(0,s.kc)().prototype_expressions_nodefields?P.VISIBLE&&l.createElement(ro.Y,{direction:"horizontal",spacing:"auto",verticalAlignItems:"center",horizontalAlignItems:"space-between",padding:{top:0,left:16,bottom:0,right:8}},l.createElement(rK.y3,{targetVariableData:P.VISIBLE.isMixed?void 0:P.VISIBLE,onClick:()=>{b(f.current)},isNarrowPanel:!0,isInCell:!1,showVariableThumbnails:!0,isInConditional:!1,isMixed:P.VISIBLE.isMixed}),l.createElement(ey.K,{onClick:()=>S(),"aria-label":(0,T.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip":(0,T.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip-type":eo.Ib.TEXT,recordingKey:"detachVisibilityVariable"},l.createElement(el.U,{svg:rQ.A},l.createElement(rr.U,null)))):N&&!_&&l.createElement(ro.Y,{direction:"horizontal",spacing:"auto",verticalAlignItems:"center",horizontalAlignItems:"space-between",padding:{top:0,left:16,bottom:0,right:8}},l.createElement(rb.P,{value:k||(0,T.t)("fullscreen.mixed"),isStandalone:!0,styleOverride:{width:"auto"},isDeleted:!!I&&(0,rg.eF)(I)}),l.createElement(ey.K,{onClick:()=>S(),"aria-label":(0,T.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip":(0,T.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip-type":eo.Ib.TEXT,recordingKey:"detachVisibilityVariable"},l.createElement(el.U,{svg:rQ.A},l.createElement(rr.U,null)))),l.createElement(rU.wu,{showExplicitOnly:!0,recordingKey:"layerPanel-variableModeEntries"}))))}function rj(){let{consumedVariable:e}=(0,rf.u3)(["VISIBLE"]),t=r0(),n=(0,tN.u)(t);return!!e&&!!n}let rq=()=>(0,rv.JV)(["VISIBLE"],K.rXF.BOOLEAN,void 0,{requestedTypes:[K.rXF.BOOLEAN,K.rXF.FLOAT,K.rXF.STRING],variableFilters:{[ru.t.MUST_INCLUDE_ONE_OF]:{[K.rXF.STRING]:rV.O4},[ru.t.HIDE_IN_DEFAULT_VIEW]:{[K.rXF.FLOAT]:!0}},mapVariableIdToTypedValue:rv.eT});function r0(){let e;let{consumedVariable:t}=(0,rf.u3)(["VISIBLE"]);if(t){if((0,B.hS)(t)&&t.type===K.Z_n.ALIAS)e=t.value;else if((0,B.hS)(t)&&t.type===K.Z_n.EXPRESSION){for(let n of(0,rg.Pr)(t))if(n.type===K.Z_n.ALIAS){e=n.value;break}}}return e}class r1 extends rc.M{getValueForNode(e){return e.opacity}setValueForNode(e,t){eP.l7.user("set-opacity",()=>{rs.wt.reportAnyPropertyChange(["opacity"]),e.opacity=t})}}let r5=new r1,r4=new r1;function r3({recordingKey:e}){let t=(0,J.wA)(),[n,r]=(0,tF.lJ)("opacity");return l.createElement(tP.p,{name:"slides_opacity_panel"},l.createElement(nW,{titleTx:(0,T.tx)("slides.properties_panel.opacity"),input:l.createElement(tP.p,{name:"slides_opacity_input"},l.createElement(nr.Pd,{value:n,onValueChange:r,mixedMathHandler:r4,ui3RightJustifyPercentSign:!1,dispatch:t,recordingKey:u.Pt(e,"opacity","input"),noBorderOnHover:!0,isTokenizable:!0},l.createElement(rn.N,{className:tT.cx.colorIconSecondary.flexNone.eventsNone.$})))}))}function r2(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("rect",{width:"8",height:"8",x:"7.5",y:"7.5",stroke:"var(--color-icon)",rx:"1"}),l.createElement("path",{fill:"var(--color-icon-tertiary)",fillRule:"evenodd",d:"M8.064 15.936A1.5 1.5 0 0 0 9.5 17h6a1.5 1.5 0 0 0 1.5-1.5v-6a1.5 1.5 0 0 0-1.064-1.436A1.5 1.5 0 0 1 16 8.5v6a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-.436-.064Z",clipRule:"evenodd"}))}function r6(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("rect",{width:"8",height:"8",x:"7.5",y:"7.5",stroke:"var(--color-icon)",rx:"1"}),l.createElement("path",{fill:"var(--color-icon-tertiary)",fillRule:"evenodd",d:"M9 16v.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 16.5 9H16v5.5a1.5 1.5 0 0 1-1.5 1.5H9Z",clipRule:"evenodd"}))}function r8(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("rect",{width:"8",height:"8",x:"6.5",y:"6.5",stroke:"var(--color-icon)",rx:"1"}),l.createElement("path",{fill:"var(--color-icon-tertiary)",fillRule:"evenodd",d:"M9 15v1.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 16.5 9H15v4.5a1.5 1.5 0 0 1-1.5 1.5H9Z",clipRule:"evenodd"}))}let r7=["NONE","LIGHT","MEDIUM","STRONG"];function r9({recordingKey:e}){let t=(0,J.wA)(),[n,r]=(0,tF.lJ)("shadow"),i=l.useMemo(()=>({NONE:{value:null,displayText:(0,T.t)("slides.properties_panel.shadow_style_none"),icon:l.createElement(ev.f,null)},LIGHT:{value:{radius:3,x:0,y:1},displayText:(0,T.t)("slides.properties_panel.shadow_style_light"),icon:l.createElement(r2,null)},MEDIUM:{value:{radius:16,x:0,y:5},displayText:(0,T.t)("slides.properties_panel.shadow_style_medium"),icon:l.createElement(r6,null)},STRONG:{value:{radius:40,x:0,y:10},displayText:(0,T.t)("slides.properties_panel.shadow_style_strong"),icon:l.createElement(r8,null)}}),[]),[a,o]=l.useState(()=>s(n));function s(e){if(!(0,B.gl)(e))return e?ie(e,i.LIGHT.value)?"LIGHT":ie(e,i.MEDIUM.value)?"MEDIUM":ie(e,i.STRONG.value)?"STRONG":"NONE":"NONE"}let c=e=>{(0,B.hS)(n)&&n&&r({...n,opacity:e})};return(0,tK.f4)(()=>{o(s(n))}),l.createElement(tP.p,{name:"slides_shadow_panel"},l.createElement(nY,null,l.createElement(np.r,{titleTx:(0,T.tx)("slides.properties_panel.shadow")}),l.createElement(nz,{legend:(0,T.tx)("slides.properties_panel.shadow_style"),value:a,onChange:e=>{let t=i[e].value,l=(0,B.hS)(n)&&(null==n?void 0:n.opacity)||.25;r(t?{offset:{x:t.x,y:t.y},radius:t.radius,spread:0,opacity:l}:null,tV.zk.YES),o(e)},recordingKey:u.Pt(e,"shadowStyle")},r7.map(e=>l.createElement(nI.I.Option,{key:e,value:e,icon:i[e].icon,"data-onboarding-key":i[e].displayText,"aria-label":i[e].displayText}))),!!n&&l.createElement(lx,{value:(0,B.gl)(n)?B.oV:(null==n?void 0:n.opacity)??0,min:0,max:1,step:.01,bigStep:.1,onChange:c,ariaLabel:(0,T.t)("slides.properties_panel.shadow_opacity"),numberInput:l.createElement(tS.E,{name:"slides_shadow_opacity_input"},l.createElement(lA,{dataTooltip:(0,T.t)("slides.properties_panel.shadow_opacity"),value:(0,B.gl)(n)?B.oV:(null==n?void 0:n.opacity)??0,onValueChange:c,recordingKey:u.Pt(e,"shadowOpacity","input"),dispatch:t})),sliderTrackableName:"slides_shadow_opacity_slider",recordingKey:u.Pt(e,"shadowOpacity")})))}function ie(e,t){return e.radius===(null==t?void 0:t.radius)&&e.offset.x===(null==t?void 0:t.x)&&e.offset.y===(null==t?void 0:t.y)}var it=n(559036),il=n(392592),ir=n(565831),ii=n(357851);function ia({}){let e=(0,J.wA)(),t=(0,tl.$)(),{Sprig:n}=(0,it.A)(),r=(0,lb.tS)(),i=(0,ir.l5)(),a=l.useMemo(()=>eP.nc.user("swap-slide-theme",(l,a)=>{let o=(0,tA.Dh)(l);if(!o)return;let s=new Set(o.variableIDs);a&&(a=a.filter(e=>s.has(e)));let c=K.Ez5.slideThemeLibBindings().swapSelectedSlidesToNewTheme(l,a||[]);c===K.qYO.NO_THEME_COLORS?e(il.F.enqueue({message:(0,T.t)("slides.properties_panel.theme.shuffle_no_change_visual_bell")})):c===K.qYO.NONE_AVAILABLE&&e(il.F.enqueue({message:(0,T.t)("slides.properties_panel.theme.no_swap_available")})),r&&ri.az.trackDefinedEvent("slides.editor.theme_swap",{fromThemeId:t,toThemeId:l,fileKey:r,slideIds:i.join(",")}),F.Y5.triggerAction("commit"),n("track","swap_slide_theme")}),[e,n,t,r,i]);return l.createElement(tP.p,{name:"slides_theme_panel"},l.createElement(eh.Zk,null,l.createElement(np.r,{titleTx:(0,T.tx)("slides.properties_panel.theme.panel_title")}),l.createElement("div",{className:tT.cx.grid.px16.$},l.createElement(ii.n,{dropdownKey:"theme-swap-dropdown",selectedThemeId:t,onChange:a,allowShuffle:!0}))))}var io=n(993086),is=n(923793),ic=n(226129),id=n(343427),ip=n(75540),iu=n(238093),im=n(282647),ih=n(872442),i_=n(688998),iE=n(599677),iy=n(231139),ig=n(937348),iv=n(304022),ib=n(176019),iS=n(841983),iP=n(326331),iT=n(358145),iw=n(646240),iI=n(877432),ik=n(632430),iN=n(407182),iC=n(352046),iA=n(395281),iO=n(44892),ix=n(237929),iR=n(289390),iM=n(860168);let iL=(0,o.hG)(iM.wQn);function iD({selectedStyleProperties:e,styleName:t,styleNameInputPrefix:n,isInspectPanel:r,viewOnly:i,recordingKey:a,showProperties:o=!0,showStylePreview:s=!1,onEnterPressed:c}){return l.createElement(ro.Y,{direction:"vertical",spacing:0,height:"hug-contents"},s&&l.createElement(tt.we,{selectedStyleProperties:e}),l.createElement(f.P,{maxHeight:300,width:iL},l.createElement(iF,{styleName:t,styleNameInputPrefix:n,selectedStyleProperties:e,isInspectPanel:r,viewOnly:i,recordingKey:a,onEnterPressed:c}),o&&(r?l.createElement(iR.U,{recordingKey:u.Pt(a,"inspectionPanel"),inStyleModal:!0}):l.createElement(tt.RO,{selectedStyleProperties:e,recordingKey:a}))))}function iF({selectedStyleProperties:e,styleName:t,styleNameInputPrefix:n,recordingKey:r,viewOnly:i,onEnterPressed:a}){let[s,d]=l.useState((n??"")+(t?(0,ix.kH)(t):"")),p=(0,J.wA)(),m=e.guid,h=e.styleType,_=l.useRef(null),E=l.useContext(ti.zK),y=u.of(u.Pt(r,"styleName"),"submit",()=>{if(""===s)return;let n=t?(0,ix.In)(t):void 0,l=n?n+"/"+s:s;eP.l7.user("rename-style",()=>K.glU.renameNode((0,P.dI)(m),(0,iO.J_)(l))),F.Y5.triggerAction("commit"),g(),(0,ri.sx)("Style Renamed",{styleType:e.styleType})}),g=()=>{p(iA.ay({isRenaming:!1}))},v=u.v_(r,"keydown",e=>{if(e.keyCode===c.Uz.TAB)y();else if(e.keyCode===c.Uz.ENTER)y(),E===ti.zM.EDIT_STYLE&&""===s||null==a||a();else{if(e.keyCode!==c.Uz.ESCAPE)return u.aH;(0,Z.flushSync)(()=>{d(t?(0,ix.kH)(t):"")}),g();let n=Z.findDOMNode(_.current);n&&n.blur()}});return l.createElement("div",{className:tT.cx.flex.flexColumn.gap8.pl16.pr16.pt8.pb8.bb1.bSolid.colorBorder.$},l.createElement(eh.JU,{disabled:i},(0,T.tx)("design_systems.create_style.name")),i?l.createElement(ro.Y,{padding:{vertical:(0,o.hG)(iM.dGl)},width:"hug-contents",height:"hug-contents",verticalAlignItems:"start"},t):l.createElement(eh.ks,{ref:_,className:"slides_styles_properties_form--textInput--H1F0- raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u",name:"styleName",value:s,placeholder:(0,tt.Qv)(h),onFocus:()=>(p(iA.ay({isRenaming:!0})),d(s),u.aH),onBlur:y,onChange:e=>{let n=e.target.value;d(n),t!==n&&rs.wt.reportEditAction("style-rename")},onKeyDown:v,recordingKey:u.Pt(r,"styleName"),delay:50,autoFocus:!0,autoComplete:"off"}))}function iK({closePicker:e,recordingKey:t}){let n=(0,tl.$)(),r=(0,J.d4)(e=>e.stylePreviewShown),i=(0,J.wA)(),a=(0,J.d4)(e=>e.mirror.selectedStyleProperties),o=(0,J.d4)(e=>e.mirror.sceneGraphSelection),s=l.useRef(Object.keys(o).length>0),[c,d]=l.useState(!s.current&&void 0),{styleType:p,inheritStyleKeyField:m,styleNameInputPrefix:h}=r,{styleRef:_,createStyle:E}=(0,te.u)({inheritStyleKeyField:m,isCreatingFromSelection:s.current,trackingOptions:{styleType:p}}),g=u.of(u.Pt("createStyleModal"),"submit",()=>{let t=E();i(w.XE()),i(w.Uv()),i(k.sw()),K.Ez5.slideThemeLibBindings().addStyleToLocalTheme(t||"",n),e()});if(!r.isShown||!r.isCreating)return null;let v=new y.Mi(r.rowLeft-300,r.rowTop);return l.createElement(ti.zK.Provider,{value:ti.zM.CREATE_STYLE},l.createElement(eY.vx,{title:(0,T.t)("design_systems.create_style.text"),headerSize:"small",initialWidth:300,initialPosition:v,onClose:()=>i(k.sw()),recordingKey:t,dragHeaderOnly:!0},l.createElement(iD,{type:a.styleType,recordingKey:t,styleNameInputPrefix:h,isInspectPanel:!1,selectedStyleProperties:a,showProperties:c,onEnterPressed:g}),!_&&l.createElement("div",{className:tT.cx.pl16.pr16.pt16.$},(0,T.tx)("design_systems.create_style.an_error_occurred_while_creating_the_style")),l.createElement(e7.AutoLayout,{horizontalAlignItems:s.current?void 0:"end",verticalAlignItems:"center",spacing:s.current?"auto":void 0,padding:16},s.current&&l.createElement(l.Fragment,null,l.createElement(ne.$n,{variant:"secondary",onClick:()=>d(!c),recordingKey:u.Pt(t,"showHideOptionsButton")},c?(0,T.tx)("design_systems.create_style.hide_options"):(0,T.tx)("design_systems.create_style.show_more_options")),l.createElement(ne.$n,{onClick:g,disabled:!_,recordingKey:u.Pt(t,"createStyleButton")},(0,T.tx)("design_systems.create_style.create_style"))))))}var iV=n(333370),iU=n(762127);function iB({closePicker:e,recordingKey:t}){var n;let r;let i=(0,J.wA)(),a=(0,tK.p8)("isReadOnly"),o=(0,lb.tS)(),{inheritTextStyleKey:s,styleIdForText:c,stylePreviewShown:d,selectedStyleProperties:p}=(0,ra.R)(e=>({inheritTextStyleKey:e.mirror.selectionProperties.inheritTextStyleKey,styleIdForText:e.mirror.selectionProperties.styleIdForText,stylePreviewShown:e.stylePreviewShown,selectedStyleProperties:e.mirror.selectedStyleProperties})),m=(0,P.dI)(p.guid),h=(0,tp.Fk)((e,t)=>{let n=e.get(t);return(null==n?void 0:n.name)||""},m);if(!d.isShown||d.isCreating||!p&&!s&&!c&&!m)return null;let _=()=>{K.glU.selectStyle(g.n3.INVALID,g.IA.INVALID),i(k.sw())},E=(n=(0,Y.IW)(d),r="",n?r=n.name||"":(0,P.dI)(null==p?void 0:p.guid)&&h&&(r=h),r),v=eP.nc.user("slides-delete-style",()=>{d.style.isLocal&&(0,iV.Nr)(d.style,o),_(),e()});return l.createElement(ti.zK.Provider,{value:ti.zM.EDIT_STYLE},l.createElement(tP.p,{name:"slides_edit_text_style"},l.createElement(eY.vx,{title:l.createElement("div",{className:tT.cx.pl8.flex.wFull.itemsCenter.justifyBetween.$},(0,T.tx)("slides.properties_panel.text_style.edit_text_style"),l.createElement(eT.K0,{"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.text_style.delete_style"),onClick:v,recordingKey:u.Pt(t,"deleteStyle"),svg:iU.A})),key:"slides-edit-text-style-modal",headerSize:"small",initialWidth:300,initialPosition:new y.Mi(d.rowLeft-300,d.rowTop),onClose:_,dragHeaderOnly:!0},l.createElement(iD,{type:p.styleType,onEnterPressed:()=>i(k.sw()),viewOnly:a,key:"style-preview-panel",selectedStyleProperties:p,isInspectPanel:!1,styleName:E,recordingKey:u.Pt(t,"editTextStyle")}))))}var iH=n(535904),iG=n(902008),iY=n(811027),iW=n(896474),i$=n(912666),iz=n(602029),iX=n(110382),iQ=n(783908),iZ=n(418985),iJ=n(656164);function ij({parentRef:e,inheritTextStyleKey:t,styleIdForText:n,closePicker:r,recordingKey:i}){let a="inheritTextStyleKey",o=(0,iu._S)(a),c=(0,J.wA)();return l.createElement(l.Fragment,null,l.createElement(iZ.M,{inheritStyleKey:t,inheritStyleID:n,styleType:i$.s4.TEXT}),o&&l.createElement(iZ.U,{picker:o,styleType:i$.s4.TEXT,inheritStyleKey:t,inheritStyleKeyField:a,inheritStyleID:n,stylePickerListLayout:!0,onToggleListLayout:tL.lQ,onApplyStyle:(e,t)=>{c(ik.AV({style:e,inheritStyleKeyField:a,fromSearch:t})),r()},hideBrowseLibraries:!(0,s.kc)().piper_style_libraries,hideCreateStyleButton:!0,customPickerTitle:(0,T.t)("slides.properties_panel.library_text_styles"),minBottomMargin:4,recordingKey:"subscribedStylePicker",hideLocalStyles:!0}),l.createElement(tS.E,{name:"slides_toggle_library_text_style_picker"},l.createElement(eT.YW,{selected:!1,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.properties_panel.tooltip_applyStyles"),recordingKey:u.Pt(i,"showStylesButton"),onClick:()=>{if(o)c(w.Uv());else if(e.current){let t=e.current.getBoundingClientRect();c(k.sw()),c(w.bS({id:(0,iu.OS)("inheritTextStyleKey"),initialX:t.left-t.width-4,initialY:t.top,modal:!0}))}},onMouseDown:x.dG,svg:iJ.A})))}let iq="slides_text_style_dropdown_contents--styleOption--29CYO text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",i0="slides_text_style_dropdown_contents--optionHeader---tOKJ";function i1({mainStyle:e,inheritStyleID:t,inheritStyleKey:n,closePicker:r,recordingKey:i}){let a=(0,J.wA)(),o=(0,tl.$)(),s=(0,tO.Xo)(o),c=l.useMemo(()=>(null==e?void 0:e.node_id)&&s.some(t=>t.node_id===e.node_id),[null==e?void 0:e.node_id,s]),d=l.createRef(),p=(0,J.d4)(e=>e.stylePreviewShown),m=p.isShown&&p.isCreating,h=p.isShown&&!p.isCreating,_=l.useContext(ti.lk),[E,y]=l.useState([]),v=l.useCallback((e,t,n)=>{for(let l of e)eP.l7.user("reorder-slide-theme-style",()=>{K.glU.insertStyleBetween(l.node_id,(null==t?void 0:t.node_id)||"",(null==n?void 0:n.node_id)||"")})},[]);return l.createElement(ef.D8,{className:"slides_text_style_dropdown_contents--dropdownContainer--pwY1T",onMouseDown:x.dG,forwardedRef:d},l.createElement(tP.p,{name:"slides_text_style_picker"},l.createElement("div",{className:"slides_text_style_dropdown_contents--dropdownHeader--m278H"},l.createElement("span",{className:tT.cx.flexGrow1.$},(0,T.tx)("slides.properties_panel.text_styles")),l.createElement(ij,{parentRef:d,styleIdForText:t,inheritTextStyleKey:n,closePicker:r,recordingKey:i}),l.createElement(iH.d,{toggled:m,"aria-label":(0,T.t)("slides.properties_panel.text_style.create_new_style"),onClick:()=>{if(m)a(k.sw());else if(d.current){eP.l7.user("slides-create-style",()=>{K.glU.applyStyleToSelection("inheritTextStyleKey",P.AD,!0),K.glU.selectStyle(g.n3.INVALID,g.IA.INVALID)}),a(w.Uv());let e=d.current.getBoundingClientRect();_({styleType:i$.s4.TEXT,inheritStyleKeyField:"inheritTextStyleKey",rowLeft:e.left,rowTop:e.top})}},recordingKey:u.Pt(i,"addStyleButton"),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.text_style.create_new_style")},l.createElement(ee.e,null))),l.createElement("div",{className:tT.cx.flex.flexColumn.$,style:{padding:"8px"}},s.length>0?l.createElement(iz.q,{listItems:s,renderListItem:(n,a,o,s,c,d,p)=>l.createElement(i4,{key:n.node_id,textStyle:n,isSelected:(0,B.hS)(t)&&(null==e?void 0:e.node_id)===n.node_id,isDragging:o,isReorderingItems:s,closePicker:r,onMouseDown:c,onMouseMove:d,onMouseUp:p,recordingKey:i}),selectedIndices:E,updateSelection:y,onDragEnd:()=>y([]),onInsertItemsBetweenValues:v,isDragDisabled:h}):l.createElement(i5,null),!c&&l.createElement(i3,{mainStyle:e,inheritStyleID:t,closePicker:r})),!e&&l.createElement(ef.D8,{className:tT.cx.p8.bt1.bSolid.colorBorder.$},l.createElement(i2,{closePicker:r,recordingKey:u.Pt(i,"custom")}))))}function i5(){return l.createElement("span",{className:tT.cx.px8.colorTextSecondary.$},(0,T.tx)("slides.properties_panel.text_style.empty_styles",{title:l.createElement("strong",null,(0,T.tx)("slides.properties_panel.text_style.title_style")),body:l.createElement("strong",null,(0,T.tx)("slides.properties_panel.text_style.body_style"))}))}function i4({textStyle:e,isSelected:t,isDragging:n,isReorderingItems:r,closePicker:i,onMouseDown:o,onMouseMove:s,onMouseUp:c,recordingKey:p}){let m=(0,J.wA)(),[h,_]=l.useState(!1),E=(0,tp.Fk)((e,t)=>{var n;return null==(n=e.get(t||""))?void 0:n.fontSize},e.node_id),y=(0,tp.Fk)((e,t)=>{var n;return(null==(n=e.get(t||""))?void 0:n.hasMissingFont)||!1},e.node_id),g=l.createRef(),v=(0,iQ.bf)(e),f=!r&&(h||v);return l.createElement(ef.D8,{forwardedRef:g,className:a()(iq,{[tT.cx.colorBgHover.$]:n||h&&!r}),onMouseDown:e=>{e.target===e.currentTarget&&o(e)},onMouseUp:e=>{e.target===e.currentTarget&&c(e)},onClick:()=>{y?K.glU.findMissingFontsAndShowPopover():m(ik.AV({style:e,inheritStyleKeyField:"inheritTextStyleKey"})),i()},onMouseMove:s,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),recordingKey:u.Pt(p,e.name)},l.createElement("span",{className:a()(tT.cx.eventsNone.$,t?tT.cx.visible.$:tT.cx.invisible.$)},l.createElement(iG.l,null)),l.createElement("div",{className:tT.cx.flexGrow1.ellipsis.eventsNone.inlineFlex.truncate.$},l.createElement("span",{className:a()(tT.cx.colorText.$)},e.name),E&&l.createElement("span",{className:tT.cx.colorTextSecondary.pl2.$},(0,T.tx)("slides.properties_panel.text.style_description_font_size",{fontSize:(0,d.z0)(E)}))),y&&l.createElement("span",{className:tT.cx.w24.$},l.createElement(iY.z,null)),l.createElement("span",{className:f?tT.cx.visible.$:tT.cx.invisible.$},l.createElement(iH.d,{"aria-label":(0,T.t)("slides.properties_panel.text_style.edit_text_style"),onClick:t=>{if(v)m(k.sw());else if(g.current){K.glU.selectStyleByGuid(e.node_id);let t=g.current.getBoundingClientRect();m(k.rk({style:e,rowTop:t.y,rowLeft:t.x-8}))}null==t||t.stopPropagation()},recordingKey:u.Pt(p,e.name,"editButton"),toggled:v},l.createElement(tv.A,null))))}function i3({mainStyle:e,inheritStyleID:t,closePicker:n}){let r=(0,iX.AH)((0,B.E7)(null==e?void 0:e.key),(0,B.E7)(t)),i=(0,tb.md)(tA.TN),a=l.useMemo(()=>{if(null==e?void 0:e.node_id)for(let t of i){let n=tb.zl.get((0,tA.i1)(t)).data;if(n&&n.styleGUIDs.includes(e.node_id))return K.Ez5.slideThemeLibBindings().getThemeName(t)}return null},[null==e?void 0:e.node_id,i]),o="",s="";return(r&&"loaded"===r.status?(o=r.data.fileName,s=r.data.name):a&&(o=a,s=(null==e?void 0:e.name)||""),o&&s)?l.createElement(l.Fragment,null,l.createElement("div",{className:i0},o),l.createElement(ef.D8,{className:iq,onMouseUp:n},l.createElement(iG.l,null),s)):null}function i2({closePicker:e,recordingKey:t}){let n=(0,tF.kl)("fontFamily")||B.oV,r=(0,tF.kl)("fontSize")||B.oV;return l.createElement("div",{className:tT.cx.pb4.$},l.createElement("div",{className:i0},(0,T.tx)("slides.properties_panel.text_style.custom")),l.createElement(ef.D8,{className:iq,onClick:e,recordingKey:u.Pt(t,"custom")},l.createElement("div",{className:tT.cx.pr8.$},l.createElement(iW.In,{icon:"checkmark-on-16"})),(0,B.hS)(n)&&(0,B.hS)(r)?l.createElement(l.Fragment,null,l.createElement("div",{className:tT.cx.colorText.$},n),l.createElement("div",{className:tT.cx.colorTextSecondary.$,style:{paddingLeft:"3px"}},(0,T.tx)("slides.properties_panel.text.style_description_font_size",{fontSize:(0,d.z0)(r)}))):(0,T.tx)("slides.properties_panel.text_style.mixed")))}function i6({mainStyle:e,inheritTextStyleKey:t,styleIdForText:n,previouslyAppliedStyle:r,recordingKey:i}){let a=l.createRef(),[o,s]=l.useState(!1),c=(0,iw.Xr)(tA.q0),d=(0,iC.i)();l.useEffect(()=>{c({})},[d,c]);let p=()=>s(!1),m=l.useCallback(e=>{a.current&&e.target instanceof Node&&a.current.contains(e.target)||p()},[a]);return l.useEffect(()=>(window.addEventListener("mousedown",m),()=>window.removeEventListener("mousedown",m)),[m]),l.createElement(l.Fragment,null,l.createElement(eE.Ad,{ref:a,input:l.createElement(i8,{mainStyle:e,inheritStyleID:n,inheritStyleKey:t,previouslyAppliedStyle:r,textPreviewColor:d,isOpen:o,onClick:()=>{o?(p(),w.Uv()):s(!0)},closePicker:p,recordingKey:i}),label:null,appendedClassName:"slides_text_style_row--textStyleRow--FE95p"}),l.createElement(iK,{closePicker:p,recordingKey:u.Pt(i,"createTextStyleModal")}),l.createElement(iB,{closePicker:p,recordingKey:i}))}function i8({mainStyle:e,inheritStyleID:t,inheritStyleKey:n,previouslyAppliedStyle:r,textPreviewColor:i,isOpen:o,onClick:s,closePicker:c,recordingKey:d}){let p;let u=i7(e),m=i7(r);return p=(0,B.gl)(t)?(0,T.tx)("slides.properties_panel.text_style.mixed"):e&&!e.is_soft_deleted?u?l.createElement(ae,{mainStyle:e,textPreviewColor:i}):e.name:m?l.createElement(l.Fragment,null,l.createElement(at,{previouslyAppliedStyle:r,textPreviewColor:i}),l.createElement("span",{className:tT.cx.pl4.colorTextSecondary.$},(0,T.tx)("slides.properties_panel.text_style.edited"))):(0,T.tx)("design_systems.styles.custom"),l.createElement("div",null,l.createElement(ef.GG,{className:a()(tT.cx.relative.wFull.h40.py4.pl8.pr4.$,tT.cx.bRadius5.b1.bSolid.colorBorder.$,tT.cx.flex.itemsCenter.$),onMouseDown:x.dG,onClick:s,recordingKey:d,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.text_style.tooltip")},l.createElement("div",{className:a()(tT.cx.flexGrow1.$,tT.cx.fontMedium.colorText.alignLeft.ellipsis.$,tT.cx.flex.itemsCenter.overflowHidden.$)},p),l.createElement(iP.r,null),!e&&m&&l.createElement(ar,{themeStyleToUpdate:r,recordingKey:d})),o&&l.createElement(i1,{mainStyle:e,inheritStyleID:t,inheritStyleKey:n,closePicker:c,recordingKey:"slidesTextStylePicker"}))}function i7(e){let t=(0,tl.$)(),n=(0,tO.Xo)(t);return!!e&&n.some(t=>t.node_id===e.node_id)}function i9(e,t,n,l,r){return(async()=>{if(K.vXe.fontsAreLoading()){let e=0;await new Promise((t,n)=>{let l=setInterval(()=>{K.vXe.fontsAreLoading()||(t(),clearInterval(l)),e>10&&n(),e++},100)})}if(!K.vXe.fontIsLoaded(l,r))return"";let i=K.Ez5.slideThemeStylePreview().generateTextPreview(e,t,n,l,r);return i?URL.createObjectURL(new Blob([i])):""})()}function ae({mainStyle:e,textPreviewColor:t}){let n=e.node_id,r=(0,tp.Fk)((e,t)=>{var n;return(null==(n=e.get(t))?void 0:n.name)||""},n),i=(0,tp.Fk)((e,t)=>{var n,l;return(t&&(null==(l=null==(n=e.get(t))?void 0:n.fontName)?void 0:l.family))??""},n),a=(0,tp.Fk)((e,t)=>{var n,l;return(t&&(null==(l=null==(n=e.get(t))?void 0:n.fontName)?void 0:l.style))??""},n),o=(0,tp.Fk)((e,t)=>{var n;return t&&(null==(n=e.get(t))?void 0:n.fontSize)||0},n),[s,c]=(0,tb.fp)(tA.q0),d=s[n],p=(0,iT.PD)(d);l.useEffect(()=>{n&&i&&a&&!(n in s)&&i9(n,r||"Text",t,i,a).then(e=>{c(t=>({...t,[n]:e}))})},[n,r,a,i,t,s,c]);let u=al(o);return l.createElement(an,{thumbnailUrl:d??p,styleName:r,previewHeight:u})}function at({previouslyAppliedStyle:e,textPreviewColor:t}){let n=e.node_id,r=e.name,{fontFamily:i,fontStyle:a,fontSize:o}=(0,ra.R)(e=>{let t=e.mirror.selectionProperties;return{fontFamily:(0,B.hS)(t.fontFamily)?t.fontFamily:"",fontStyle:(0,B.hS)(t.fontStyle)?t.fontStyle:"",fontSize:(0,B.hS)(t.fontSize)&&t.fontSize?t.fontSize:0}}),[s,c]=l.useState("");l.useEffect(()=>{n&&i&&a&&i9(n,r,t,i,a).then(e=>c(e))},[n,r,a,i,t,c]);let d=al(o);return l.createElement(an,{thumbnailUrl:s,styleName:r,previewHeight:d})}function an({thumbnailUrl:e,styleName:t,previewHeight:n}){return e?l.createElement("img",{className:"slides_text_style_row--previewImg--vXJc9",style:{height:`${n}px`},src:e,alt:"Text style preview"}):l.createElement("div",{className:tT.cx.fontMedium.colorText.$},t)}function al(e){var t;let n=(0,tl.$)(),l=(0,tO.Xo)(n),r=(0,tK.eY)(),i=[];for(let e of l){let n=null==(t=r.get(e.node_id))?void 0:t.fontSize;n&&i.push(n)}if(i.push(e),!e||0===i.length)return 17;let a=Math.min(...i),o=Math.max(...i);return a===o?17:Math.round(12+(e-a)/(o-a)*10)}function ar({themeStyleToUpdate:e,recordingKey:t}){let n=(0,J.wA)(),{fontFamily:r,fontStyle:i,fontSize:a,lineHeight:o,letterSpacing:s}=(0,ra.R)(e=>{let t=e.mirror.selectionProperties;return{fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontSize:t.fontSize,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing}}),c=(0,iv.B)(),d=async t=>{t.stopPropagation(),e.isLocal&&r&&i&&a&&o&&s&&(n(ik.AV({style:e,inheritStyleKeyField:"inheritTextStyleKey"})),K.glU.selectStyleByGuid(e.node_id),await (0,iI.yQ)(),F.Y5.updateSelectionProperties({fontFamily:r},{shouldCommit:tV.zk.NO,editScopeType:K.zkO.USER}),await (0,iI.yQ)(),F.Y5.updateSelectionProperties({fontStyle:i,fontSize:a,lineHeight:(0,iN.TK)(c,o),letterSpacing:s},{shouldCommit:tV.zk.NO,editScopeType:K.zkO.USER}),K.glU.selectStyle(g.n3.INVALID,g.IA.INVALID),F.Y5.triggerAction("commit"))};return l.createElement(ne.$n,{variant:"primary",onClick:d,recordingKey:u.Pt(t,"saveButton")},(0,T.tx)("slides.properties_panel.text_style.save_button"))}function ai({recordingKey:e}){let{inheritTextStyleKey:t,styleIdForText:n}=(0,ra.R)(e=>({inheritTextStyleKey:e.mirror.selectionProperties.inheritTextStyleKey||null,styleIdForText:e.mirror.selectionProperties.styleIdForText||null})),r=(0,iu.WH)(t,n,"TEXT"),i=(0,J.d4)(e=>e.fonts),a=l.useMemo(()=>(0,ip.pn)(i),[i]),o=(0,tC.U)(),[s,c]=l.useState(null===r);l.useEffect(()=>{o||c(!(null==r?void 0:r.node_id))},[null==r?void 0:r.node_id]);let[d,p]=l.useState(null),m=l.useCallback(()=>{r&&p(r)},[r]),h=(0,J.d4)(e=>e.mirror.sceneGraphSelection);return l.useEffect(()=>{p(null)},[h]),l.createElement(tP.p,{name:"slides_type_panel"},l.createElement(nY,{panelClassName:"slides_type_panel--typePanel--BLBhl"},l.createElement(i6,{mainStyle:r,inheritTextStyleKey:t,styleIdForText:n,previouslyAppliedStyle:d,recordingKey:u.Pt(e,"textStyle")}),s&&l.createElement(aa,{fonts:i,versionsForStyles:a,recordingKey:e,savePreviouslyAppliedStyleOnFontChange:m}),l.createElement(as,{versionsForStyles:a,recordingKey:e}),l.createElement(ad,{recordingKey:e}),!s&&l.createElement(eE.Ad,{input:l.createElement(ne.IK,{variant:"secondary",onClick:()=>c(!0),recordingKey:u.Pt(e,"showDetails")},(0,T.tx)("slides.properties_panel.text.show_details")),label:null})))}function aa({fonts:e,versionsForStyles:t,savePreviouslyAppliedStyleOnFontChange:n,recordingKey:r}){var i;let a=(0,J.wA)(),o=(0,B._W)((0,tF.kl)("missingFont"),!1),s=!!(null==(i=F.Y5)?void 0:i.isFontListLoaded()),c=o||!s,d=(0,tF.kl)("fontFamily"),p=(0,tF.kl)("fontStyle"),m=(0,tF.kl)("fontSize"),h=(0,tF.kl)("lineHeight"),_=(0,tF.kl)("letterSpacing"),{bigNudgeAmount:E,smallNudgeAmount:y}=(0,V.sT)(),g=(0,J.d4)(e=>e.mirror.selectionProperties.fontVariations),v=d?(0,ib.LM)({fontFamily:d,fontStyle:p,fonts:e,versionsForStyles:t}):void 0,f=(0,iv.B)(),{consumedVariable:b,clearVariableConsumption:S}=(0,rf.u3)(["FONT_FAMILY"]),P=b?(0,rg.MH)(b):null,w=(0,tN.u)(P??void 0),I=d?l.createElement(im.ay,{id:"slides-type-panel-font-family",fontFamily:d,editingStyleGuid:void 0,onChange:l=>{n(),(0,ib.PK)({fontFamily:l,lineHeightInContext:f,fonts:e,fontVariations:g,versionsForStyles:t})},boundVariable:w??void 0,onDetachVariableClick:S,fonts:e,versionsForStyles:t,showPlaceholder:!1,disabled:c,hideTypographyVariableOptions:!0,recordingKey:u.Pt(r,"fontFamily")}):null,k=d&&p?l.createElement(tS.E,{name:"slides_font_style"},l.createElement(i_.zz,{id:"slides-type-panel-font-style",fontFamily:d,fontStyle:p,editingStyleGuid:void 0,onChange:(e,t,l)=>{n(),(0,i_.zD)({fontStyle:e,shouldCommit:t,fontVariations:l,lineHeightInContext:f,showVariableFontSettings:tL.lQ,showTypeVariablePicker:tL.lQ})},fonts:e,versionsForStyles:t,fontVariations:g,fontVariationAxes:null==v?void 0:v.variationAxes,dropdownAlignment:"right",showMissingIcon:!1,hideVariableFontOptions:!0,hideTypographyVariableOptions:!0,recordingKey:u.Pt(r,"fontStyle")})):null,N=m?l.createElement(tS.E,{name:"slides_font_size"},l.createElement(ih.Z,{id:"slides-type-panel-font-size",fontSize:m,onChange:n,disabled:c,editingStyleGuid:void 0,hideVariableOptions:!0,recordingKey:u.Pt(r,"fontSize")})):null,C=l.createRef(),A=h?l.createElement(iy.a,{lineHeight:h,lineHeightInContext:f,onChange:n,disabled:c,rowElementRef:C,editingStyleGuid:void 0,disableVariables:!0,recordingKey:u.Pt(r,"lineHeight")}):null,O=_?l.createElement(iE.I,{dispatch:a,letterSpacing:_,disabled:c,onChange:n,editingStyleGuid:void 0,rowElementRef:C,bigNudgeAmount:E,smallNudgeAmount:y,disableVariables:!0,recordingKey:u.Pt(r,"letterSpacing")}):null;return l.createElement(l.Fragment,null,I,l.createElement(nA.g,{leftLabel:(0,T.tx)("slides.properties_panel.text.weight_label"),leftInput:k,rightLabel:(0,T.tx)("slides.properties_panel.text.font_size_label"),rightInput:N}),l.createElement(nA.g,{ref:C,leftLabel:null,leftInput:A,rightLabel:null,rightInput:O}))}function ao(e){return e.toLowerCase().includes("italic")}function as({versionsForStyles:e,recordingKey:t}){let{isBold:n,isItalic:r,isUnderline:i,isUnorderedList:a,fontFamily:o}=(0,ra.R)(e=>{var t,n;return{isBold:(0,iS.N)((null==(t=e.mirror.selectionProperties.fontStyle)?void 0:t.toString())||""),isItalic:ao((null==(n=e.mirror.selectionProperties.fontStyle)?void 0:n.toString())||""),isUnderline:"UNDERLINE"===e.mirror.selectionProperties.textDecoration,isUnorderedList:"UNORDERED_LIST"===e.mirror.selectionProperties.textLineType,fontFamily:e.mirror.selectionProperties.fontFamily}}),s=o&&(0,B.hS)(o)&&e[o]?Object.keys(e[o]):[],c=s.every(e=>!(0,iS.N)(e)),d=s.every(e=>!ao(e));return l.createElement(eE.Ad,{label:null,input:l.createElement("div",{className:tT.cx.flex.wFull.gap4.$},l.createElement(ac,{selected:n,disabled:c,onClick:()=>{F.Y5.triggerActionInUserEditScope("toggle-bold")},icon:l.createElement(io.j,{color:n?"var(--color-border-selected)":void 0}),tooltip:(0,T.t)("slides.properties_panel.text.bold"),trackingName:"slides_bold_button",recordingKey:u.Pt(t,"bold")}),l.createElement(ac,{selected:r,disabled:d,onClick:()=>{F.Y5.triggerActionInUserEditScope("text-toggle-italic")},icon:l.createElement(is.s,{color:r?"var(--color-border-selected)":void 0}),tooltip:(0,T.t)("slides.properties_panel.text.italic"),trackingName:"slides_italic_button",recordingKey:u.Pt(t,"italic")}),l.createElement(ac,{selected:i,disabled:!1,onClick:()=>{F.Y5.triggerActionInUserEditScope("text-toggle-underline")},icon:l.createElement(ic.W,{color:i?"var(--color-border-selected)":void 0}),tooltip:(0,T.t)("slides.properties_panel.text.underline"),trackingName:"slides_underline_button",recordingKey:u.Pt(t,"underline")}),l.createElement(ac,{selected:a,disabled:!1,onClick:()=>{F.Y5.triggerActionInUserEditScope("text-toggle-unordered-list")},icon:l.createElement(id.Z,{color:a?"var(--color-border-selected)":void 0}),tooltip:(0,T.t)("slides.properties_panel.text.unordered_list"),trackingName:"slides_unordered_list_button",recordingKey:u.Pt(t,"unorderedList")}))})}function ac({selected:e,disabled:t,onClick:n,icon:r,tooltip:i,trackingName:o,recordingKey:s}){return l.createElement(tS.E,{name:o},l.createElement(ef.GG,{className:a()("slides_type_panel--formatButton--71QdB",{"slides_type_panel--selected--dHazD":e,"slides_type_panel--disabled--Vd8xM":t}),onClick:n,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":i,"aria-label":i,recordingKey:s},r))}function ad({recordingKey:e}){let t=(0,tF.kl)("textAlignVertical")||B.oV;return l.createElement(nA.g,{leftLabel:null,leftInput:l.createElement(tS.E,{name:"slides_text_align_horizontal"},l.createElement(ig.jw,{recordingKey:u.Pt(e,"textAlignHorizontal")})),rightLabel:null,rightInput:l.createElement(tS.E,{name:"slides_text_align_vertical"},l.createElement(ig.Ln,{textAlignVertical:t,recordingKey:u.Pt(e,"textAlignVertical")}))})}var ap=n(656147),au=n(236192),am=n(297666),ah=n(886653),a_=n(437304),aE=n(452246),ay=n(226055),ag=n(444576),av=n(945020),af=n(286640),ab=n(463420),aS=n(255942);let aP="styles--contextMenu--C-hVT",aT="styles--showOnRowHover--OUqRT",aw="styles--showOnSelectedRowHover--Lcf7e styles--showOnRowHover--OUqRT",aI="styles--caret--DZmzh",ak="styles--rowSelectedExpanded--MGvUV",aN="styles--rowSelectedSecondaryLightBlue--S-zy- draggable_list--rowSelectedSecondary--yOI1g raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip";function aC({childLeft:e,childRight:t,deleteSelectedItems:n,forceShowHoverBorder:r,hideStylePreview:i,index:o,inspectStyleSelected:s,isDragging:d,isEditable:p,isRenaming:m,isCollapsed:h=!0,isLastChildOfSelection:_=!1,isFirstChildOfSelection:E=!1,isFolder:y,level:g,name:v,nameRef:f,onChildLeftClick:b,onContextMenu:S,onCreateFolder:P,onDoubleClick:T,onHoverChange:w,onMouseDown:I,onMouseMove:k,recordingKey:N,rowRef:C,secondaryName:A,selected:O,selectedSecondary:R,stopRenamingItem:M,tooltipData:L}){let D=l.useRef(null),[K,V]=l.useState(v),[U,B]=l.useState(!1),H=(0,ay.GS)(),G=l.useCallback(e=>{if(e){let t=Z.findDOMNode(e);t&&t.select()}},[]);l.useEffect(()=>{V(v)},[v]);let Y=l.useCallback(e=>{""===e.trim()?(M(o,v),V(v)):M(o,e)},[o,v,M]),W=(0,u.AF)((0,u.Pt)(N,"text-input"),"change",l.useCallback(e=>{V(e.currentTarget.value)},[V])),$=(0,u.v_)((0,u.Pt)(N,"text-input"),"keydown",e=>{e.keyCode===c.Uz.ESCAPE?(M(o,v),V(v)):e.keyCode===c.Uz.ENTER&&Y(e.currentTarget.value)},{recordMetadata:e=>({inputValue:e.currentTarget.value}),playbackMetadata:e=>({currentTarget:{value:e.inputValue}})}),z=(0,u.v_)(N,"keydown",e=>{p&&!m&&(e.keyCode===c.Uz.BACKSPACE||e.keyCode===c.Uz.DELETE)?n():p&&!m&&e.keyCode===c.Uz.G&&(0,c.Fo)(e)?(P(),e.preventDefault()):!m&&e.nativeEvent&&F.Y5.forwardKeyboardEvent(e.nativeEvent)}),X=l.useCallback(()=>{Y(K)},[Y,K]),Q=(0,u.rf)(N,"contextmenu",e=>{S(e)}),J=(0,u.rf)(N,"mousemove",e=>{k(e)},{recordMetadata:e=>({bounds:e.currentTarget.getBoundingClientRect(),pageX:e.pageX,pageY:e.pageY}),playbackMetadata:e=>({currentTarget:{getBoundingClientRect:()=>e.bounds},pageX:e.pageX,pageY:e.pageY})}),j=(0,u.rf)(N,"mousedown",e=>{I(e),i()}),q=(0,u.rf)(N,"mouseenter",l.useCallback(()=>{B(!0),null==w||w(!0)},[B,w])),ee=l.useCallback(()=>{B(!1),null==w||w(!1)},[B,w]),et=(0,u.rf)(N,"dblclick",l.useCallback(e=>{T(e)},[T])),en=Math.min((g-1)*3,18),el=iM.jNX-4-en,er=el-(H?7:5),ei=U&&!m||s?er:el,ea=O||R,eo=a()({[ak]:!h&&ea,"styles--folderSecondarySelected--SL0JY":R||O&&!E,[aN]:R&&!H}),es=a()({[aN]:ea,[ak]:!_&&ea}),ec=a()("styles--rowWithBorder--bphZ-",{[eo]:y,[es]:!y,"styles--rowWithHover--RWNMH":!ea&&(r||U&&!d)}),ed=l.createElement("div",{className:m?"styles--rowContentsRenaming--oDTtO styles--rowContents--37JBy":"styles--rowContents--37JBy",key:v,style:H?{width:"100%"}:{gridColumnEnd:`span ${ei}`}},m?l.createElement(eh.ks,{autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"styles--input--LbjR0",onBlur:X,onChange:W,onKeyDown:$,ref:G,spellCheck:!1,value:K}):l.createElement(l.Fragment,null,l.createElement("div",{className:"styles--name--KWZ8d ellipsis--ellipsis--Tjyfa",ref:f,...L},v),A&&l.createElement("div",{className:"styles--textStyle--DiUv4"},A)));return l.createElement(iz.e,{className:ec,dragging:d,hideGrabber:!0,onContextMenu:Q,onKeyDown:z,onMouseDown:j,onMouseEnter:q,onMouseLeave:ee,onMouseMove:J,onDoubleClick:et,ref:(0,aS.A)(D,C),selected:O,selectedSecondary:!1,tabIndex:0},en>0&&l.createElement("span",{style:{gridColumnEnd:`span ${en}`}}),l.createElement("div",{className:"styles--childLeftContainer--Hu61K",style:H?{gridColumnEnd:`span ${ei}`}:void 0},l.createElement("div",{onMouseDown:b&&x.dG,onClick:b},e),H&&ed),!H&&ed,t)}var aA=n(949207),aO=n(432023);function ax({deleteSelectedItems:e,folder:t,folderNameToNestUnder:n,hideStylePreview:r,index:i,isCollapsed:a,isDragging:o,isEditable:s,isRenaming:c,isTemporarilyExpanded:d,isFirstChildOfSelection:p,level:m,onContextMenu:h,onCreateFolder:_,onMouseDown:E,onMouseMove:y,onRenameItem:g,recordingKey:v,selected:f,selectedSecondary:b,stopRenamingItem:S,temporarilyExpandFolder:P,toggleFolder:w}){let I=(0,J.wA)(),[N,C]=l.useState(!1),A=l.useRef(null),O=N&&!c&&s;l.useEffect(()=>{if(N&&o&&a){let e=setTimeout(()=>{P(t.name)},1e3);return()=>clearTimeout(e)}},[N,o,a,P,t]);let x=l.useCallback(()=>{var e;let n=(0,i$.Zk)(t.styleTypeSection),l=null==(e=A.current)?void 0:e.getBoundingClientRect();n&&l&&I(k.Zs({rowLeft:l.left,rowTop:l.top,styleType:t.styleTypeSection,styleNameInputPrefix:`${t.name}/`,inheritStyleKeyField:n}))},[A,t.name,t.styleTypeSection,I]);return l.createElement(aC,{deleteSelectedItems:e,forceShowHoverBorder:n===t.name,hideStylePreview:r,index:i,isDragging:o,isEditable:s,isRenaming:c,isCollapsed:a,isFolder:!0,isFirstChildOfSelection:p,level:m,name:(0,ix.kH)(t.name),onChildLeftClick:function(){w(!a)},onContextMenu:h,onCreateFolder:_,onDoubleClick:function(){t.styleTypeSection&&g(t.name,!1,t.styleTypeSection)},onHoverChange:C,onMouseDown:E,onMouseMove:y,onRenameItem:g,recordingKey:v,selected:f,selectedSecondary:b,stopRenamingItem:S,rowRef:e=>{e&&(A.current=Z.findDOMNode(e))},childLeft:l.createElement(el.U,{svg:a&&!d?aO.A:aA.A,className:aI},a&&!d?l.createElement(ab.k,{className:aI}):l.createElement(nK.O,{className:aI})),childRight:O&&l.createElement(eh.$4,null,l.createElement(eh.K0,{className:f?aw:aT,recordingKey:u.Pt(v,"addButton"),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.styles.tooltips.create"),svg:e3.A,fallbackSvg:t1.A,onClick:x}))})}var aR=n(720384),aM=n(162502);function aL({deleteSelectedItems:e,hideStylePreview:t,index:n,isDragging:r,isEditable:i,isRenaming:a,isLastChildOfSelection:s,level:c,onContextMenu:d,onCreateFolder:p,onInspectStyle:m,onMouseDown:h,onMouseMove:_,onRenameItem:E,recordingKey:y,selected:g,selectedSecondary:v,stopRenamingItem:f,dsStyle:b,stylePreviewShown:S,updateContextMenuStyleRef:P,updateSelection:I,updateFocusRowRef:N}){var C;let[A,O]=l.useState(!1),R=(0,J.wA)(),M=l.useRef(null),D=l.useRef(null),F=l.useCallback(()=>{i&&E(b.node_id,!0,b.style_type)},[E,b.node_id,b.style_type,i]),K=S.isShown&&!S.isCreating&&S.style.node_id===b.node_id&&(0,L.EF)(S.style,b),V=A&&!a||K,U=l.useCallback(function(){let e=D.current;if(e){let t=e.getBoundingClientRect();K?R(k.sw()):(R(k.rk({style:b,rowTop:t.top,rowLeft:t.left})),m(b),I({type:b.style_type,folderNames:new Set,styleIds:new Set(b.node_id)}))}R(w.XE())},[R,m,I,b,K]),B=l.useCallback(e=>{(2===e.button||e.ctrlKey)&&P(D.current),h(e),K&&U()},[U,h,K,P]),H=M.current,G=!!H&&H.offsetWidth<H.scrollWidth,Y=l.useMemo(()=>!r&&b.description&&G?{"data-tooltip-type":eo.Ib.SPECIAL,"data-tooltip":aR.Z,"data-tooltip-style-name":(0,ix.kH)(b.name),"data-tooltip-style-description":b.description,"data-tooltip-max-width":iM.jNX*(0,o.hG)(iM.dGl)}:null,[G,r,b.name,b.description]),W="TEXT"===b.style_type&&(null==(C=b.meta)?void 0:C.style_thumbnail)?b.meta.style_thumbnail:null;return l.createElement(aC,{deleteSelectedItems:e,hideStylePreview:t,index:n,inspectStyleSelected:K,isDragging:r,isEditable:i,isRenaming:a,isFolder:!1,isLastChildOfSelection:s,level:c,name:(0,ix.kH)(b.name),nameRef:M,onContextMenu:d,onCreateFolder:p,onDoubleClick:F,onHoverChange:O,onMouseDown:B,onMouseMove:_,onRenameItem:E,recordingKey:y,rowRef:e=>{if(e){let t=Z.findDOMNode(e);N&&N(t),D.current=t}},secondaryName:W&&(0,iO.P$)(W),selected:g,selectedSecondary:v,stopRenamingItem:f,tooltipData:Y,childLeft:l.createElement(l.Fragment,null,l.createElement(nL.zi,{dsStyle:b,disableTooltip:!0}),g&&"FILL"===b.style_type&&l.createElement("div",{className:"styles--selectedRing--UniEc"})),childRight:V&&l.createElement(eh.$4,null,l.createElement("div",{style:{gridColumnEnd:"span 1"}}),l.createElement(eT.YW,{className:g?aw:aT,recordingKey:u.Pt(y,"customButton"),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":i?(0,T.t)("design_systems.styles.edit_style"):(0,T.t)("design_systems.styles.view_style"),selected:K,onMouseDown:x.dG,onClick:U},l.createElement(el.U,{svg:aM.A},l.createElement(tv.A,null))))})}function aD({styleType:e,children:t}){let n=!(0,tK.p8)("isReadOnly");return l.createElement("div",{className:"styles--styleTypeSection--jPjTq component_tiles--section--qMua7"},n?l.createElement(aF,{styleType:e,recordingKey:`style-section-header-${e}`}):l.createElement("div",{className:"styles--styleTypeSectionHeader--224lA component_tiles--sectionHeader--eEC6d raw_components--panelTitle--VAQQA"},(0,Y.QT)(e)),t)}function aF({styleType:e,recordingKey:t}){let[n,r]=l.useState(!1),i=(0,J.wA)(),a=l.useRef(null),o=l.useCallback(()=>{var t;let n=(0,i$.Zk)(e),l=null==(t=a.current)?void 0:t.getBoundingClientRect();n&&l&&i(k.Zs({rowLeft:l.left,rowTop:l.top,styleType:e,inheritStyleKeyField:n}))},[a,e,i]);return l.createElement(ef.D8,{className:"styles--styleTypeSectionRow--wVTIO",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),recordingKey:t,forwardedRef:a},l.createElement(eh.JU,{className:"styles--styleTypeSectionRowLabel--PrKm-"},(0,Y.QT)(e)),n&&l.createElement(eT.K0,{className:"styles--styleTypeSectionRowButton--V4Co2 styles--showOnRowHover--OUqRT",recordingKey:u.Pt(t,"addButton"),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,Y.XV)(e).toLowerCase()}),svg:e3.A,fallbackSvg:t1.A,onClick:o}))}aD.displayName="StyleTypeSection";let aK=en.W.Dropdown,aV=en.W.Option,aU=en.W.Separator,aB="styles-by-type-context-menu",aH=.75*(0,o.hG)(iM.uj0);function aG({styleRowRef:e,onEditStyle:t,onRenameItem:n,onCreateFolder:r,onDeleteItems:i,onCutItems:a,onPasteItems:o,styleType:s}){let c=(0,tC.U)(),d=(0,J.d4)(e=>e.library.localStyleSelection),p=l.useMemo(()=>d&&d.type===s&&(null==c?void 0:c.type)===aB?(0,iV.QA)(d,c.data.uiList):[],[d,c,s]),u=l.useMemo(()=>(0,iV.Ug)(p).map(e=>e.node_id),[p]),m=u.length;return c&&u.length?l.createElement(aY,{styleRowRef:e,selectedItems:p,numStyles:m,dropdownShown:c,onEditStyle:t,onRenameItem:n,onCreateFolder:r,onDeleteItems:i,onCutItems:a,onPasteItems:o}):l.createElement("div",null)}function aY({styleRowRef:e,selectedItems:t,numStyles:n,dropdownShown:r,onEditStyle:i,onRenameItem:a,onCreateFolder:o,onDeleteItems:s,onCutItems:c,onPasteItems:d}){var p;let u=(0,J.wA)();l.useEffect(()=>(K.glU.computePastableStyleCount(),()=>{K.glU.clearPastableStyleCount()}),[]);let m=(0,J.d4)(e=>e.mirror.appModel.pastableStyleCount),h=!!(null==(p=(0,lb.q5)())?void 0:p.canEdit),_=l.useCallback(()=>{if(!t.length||t[0].type!==rT.PW.STYLE)return;let n=t[0];if(e){let t=e.getBoundingClientRect();u(k.rk({style:n,rowTop:t.top,rowLeft:t.left})),u(w.XE())}i(n)},[u,t,i,e]),E=l.useCallback(()=>{if(!t.length||t[0].type===rT.PW.STYLE)return;let e=t[0];a(e.name,!1,e.styleTypeSection)},[a,t]);if(-1===m)return l.createElement("div",null);if(!h)return n>1?l.createElement("div",null):l.createElement(aK,{style:r.data.position,className:aP},l.createElement(aV,{recordingKey:"edit-style-option",onClick:_},(0,T.tx)("design_systems.styles.view_style")));let y=1===n&&(t[0].type===rT.PW.STYLE?l.createElement(aV,{recordingKey:"edit-style-option",onClick:_},(0,T.tx)("design_systems.styles.edit_style")):l.createElement(aV,{recordingKey:"rename-folder-option",onClick:E},(0,T.tx)("design_systems.styles.rename_folder")));return l.createElement(aK,{style:r.data.position,className:aP},l.createElement(aV,{recordingKey:"create-folder-option",onClick:o},(0,T.tx)("design_systems.styles.add_new_folder")),y,l.createElement(aV,{recordingKey:"delete-style-option",onClick:s},(0,T.tx)("design_systems.styles.delete_styles",{numStyles:n})),l.createElement(aU,null),l.createElement(aV,{recordingKey:"cut-style-option",onClick:c},(0,T.tx)("design_systems.styles.cut_styles",{numStyles:n})),!!m&&l.createElement(aV,{recordingKey:"paste-style-option",onClick:d},(0,T.tx)("design_systems.styles.paste_styles",{numStyles:m})))}var aW=n(710752),a$=n(582288),az=n(884909),aX=n(304173),aQ=n(608974),aZ=n(257812),aJ=n(319431),aj=n(914110);let aq="local-style-creation-dropdown";function a0(){var e;let t=(0,J.wA)(),n=(0,l.useContext)(ti.lk),r=!(0,tK.p8)("isReadOnly"),i=l.useRef(null),a=l.useRef(null),o=i.current,s=(0,tC.U)(),c=(null==s?void 0:s.type)===aq,d=null==(e=null==s?void 0:s.data)?void 0:e.targetRect,p="localStyleHeader",m=0===(0,ta.Bs)().length,h=(0,J.d4)(e=>e.stylePreviewShown.isShown&&e.stylePreviewShown.isCreating),_=l.useMemo(()=>d||(c&&o?o.getBoundingClientRect():null),[d,o,c]),E=()=>{t(er.oB())},y=()=>{t(er.j7({type:aq}))},g=e=>{e.stopPropagation(),t(k.YG());let n=i.current;c?E():n&&((0,ri.sx)("editor-local-styles-dropdown-show"),y())},v=e=>{var t;E();let l=(0,i$.Zk)(e),r=null==(t=a.current)?void 0:t.getBoundingClientRect();l&&r&&n({styleType:e,inheritStyleKeyField:l,rowLeft:r.left,rowTop:r.top})},f=m&&!c&&!h;return l.createElement(eh.fI,{className:f?"styles--panelHeaderRowFaded--pfgKz styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO draggable_list--panelHeaderRowFaded--kETRR":"styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO",forwardedRef:a},l.createElement(eh.xw,{className:"styles--panelTitleText--v7gXm draggable_list--panelTitleText--SwKez",onMouseDown:e=>f&&g(e),onClick:e=>e.stopPropagation()},(0,T.tx)("design_systems.styles.local_styles")),r&&l.createElement(l.Fragment,null,l.createElement(eh.K0,{ref:i,onMouseDown:g,onClick:e=>e.stopPropagation(),className:c?"styles--stylesHeaderButtonHighlight--WTeWy raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6":"styles--stylesHeaderButton--jhpA5 draggable_list--addButton--D0q--","data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.create_style.create_style"),recordingKey:u.Pt(p,"addButton")},l.createElement(el.U,{svg:e3.A,fallbackSvg:t1.A},l.createElement(ee.e,null))),c&&_&&l.createElement(ed.Cf,{targetRect:_,minWidth:128,disableDropdownScrollContainer:!0,propagateCloseClick:!0},Y.og.map(e=>{let{icon:t,label:n}=function(e){switch(e){case"TEXT":return{icon:l.createElement(el.U,{svg:aj.A},l.createElement(aW.e,null)),label:(0,T.t)("design_systems.styles.dropdown.text")};case"FILL":return{icon:l.createElement(el.U,{svg:aZ.A},l.createElement(a$.G,null)),label:(0,T.t)("design_systems.styles.dropdown.fill")};case"GRID":return{icon:l.createElement(el.U,{svg:aJ.A},l.createElement(az.E,null)),label:(0,T.t)("design_systems.styles.dropdown.grid")};case"EFFECT":return{icon:l.createElement(el.U,{svg:aQ.A},l.createElement(aX.n,null)),label:(0,T.t)("design_systems.styles.dropdown.effect")};default:throw(0,lL.j)(e),Error(`Invalid style type: ${e}`)}}(e),r=t=>{t.stopPropagation(),v(e)};return l.createElement(en.W.Option,{key:e,className:"styles--createStyleDropdownRow--7iCXQ",onClick:r,onPointerUp:r,recordingKey:u.Pt(p,`dropdown-option-${e}`)},l.createElement(ec.Nu,null,t),n)}))))}let a1="collapsed-style-folders";function a5({scrollContainer:e,recordingKey:t}){let n=(0,ta.Bs)(),r=(0,tK.p8)("isReadOnly");return 0===n.length&&r?null:l.createElement(tP.p,{name:"local_styles_panel"},l.createElement(eh.Zk,null,l.createElement(a4,{scrollContainer:e,recordingKey:t})))}function a4({scrollContainer:e,recordingKey:t}){let n=(0,J.wA)(),r=(0,J.d4)(e=>e.stylePreviewShown),i=(0,J.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),a=(0,J.d4)(e=>e.mirror.appModel.currentTool),o=l.useRef(null),s=(0,ta.Bs)(),c=(0,J.d4)(e=>e.library.localStyleSelection),[d,p]=l.useState(null),[m,h]=l.useState(null),_=l.useRef(null),[E,y]=l.useState(!1),v=i===K.m1T.GRADIENT||i===K.m1T.RASTER||a===K.NLJ.DROPPER_COLOR;l.useEffect(()=>{let e=()=>{!v&&(n(iA.Bn(null)),r.isShown&&(n(k.sw()),K.glU.selectStyle(g.n3.INVALID,g.IA.INVALID)))},t=(0,x.ft)();return t?window.addEventListener("pointerdown",e):window.addEventListener("mousedown",e),()=>{t?window.removeEventListener("pointerdown",e):window.removeEventListener("mousedown",e)}},[n,r.isShown,v]);let{stylesByType:f,foldersAndStylesByType:b}=l.useMemo(()=>{let e=(0,Y.Kw)(s),t=new Map;return Y.og.map(n=>{let l=e.get(n);if(l){(0,Y.LX)(l);let e=(0,iV.lM)(l,n),r=(0,iV.l0)(e);t.set(n,r)}}),{stylesByType:e,foldersAndStylesByType:t}},[s]),S=l.useCallback(e=>{(0,lL.KF)(null!=e.content_hash,"style does not have a hash"),K.glU.selectStyleByGuid(e.node_id),n(iA.ay({isRenaming:!1})),(0,ri.sx)("Style Inspected",{styleType:e.style_type,from:"styleListClick"})},[n]),P=l.useCallback((e,t,n)=>{p(t?e:null),h(t?null:{name:e,styleTypeSection:n})},[]),T=l.useCallback(e=>{if(!e){n(iA.Bn(null));return}let t=new Set;e.styleIds.forEach(n=>{let l=s.find(e=>e.type===rT.PW.STYLE&&e.node_id===n);if(!l)return;let r=(0,ix.In)(l.name);e.folderNames.has(r)||t.add(n)});let l={type:e.type,folderNames:e.folderNames,styleIds:t};n(iA.Bn(l))},[n,s]),w=l.useCallback((e,t,n)=>{if(!c)return;let l=e[t],r=(e,t)=>{let l=(0,ix.ke)(e.name),r=null!=t?t:l.length-1;l[r]=n;let i=(0,iV.Pc)(l.join("/"));eP.l7.user("rename-style",()=>K.glU.renameNode(e.node_id,i))};if(l.name!==n){if(l.type===rT.PW.STYLE)r(l);else{(0,iV.mx)(t,e).forEach(t=>{let n=e[t];n.type===rT.PW.STYLE&&r(n,l.level-1)});let i=new Set(c.folderNames);i.delete(l.name);let a=(0,ix.In)(l.name)+"/"+n;i.add(a),T({type:c.type,folderNames:i,styleIds:c.styleIds})}}F.Y5.triggerAction("commit"),p(null),h(null)},[c,T]),I=l.useCallback((e,t)=>{t.preventDefault(),t.stopPropagation(),n(er.j7({type:aB,data:{uiList:e,position:{top:t.clientY,left:Math.min(t.clientX,window.innerWidth-aH)}}}))},[n]),N=l.useCallback(e=>{_.current=e},[]),C=l.useCallback(()=>{y(!0)},[]),A=l.useCallback(()=>{y(!1)},[]);return l.createElement("div",{className:"styles--localStylesPanel--T4Gqs",ref:o},l.createElement(a0,null),Y.og.map(n=>{let r=f.get(n);if(!r)return;let i=b.get(n);if(i)return l.createElement(a3,{key:n,recordingKey:u.Pt(t,`style-section-${n}`),styleType:n,storedStyleList:r,styleList:i,updateSelection:T,isDragging:E,onDragStart:C,onDragEnd:A,onInspectStyle:S,onContextMenu:I,updateContextMenuStyleRef:N,renamingStyleID:d,renamingFolder:m,onRenameItem:P,stopRenamingItem:w,styleRowRef:_.current,onEditStyle:S,scrollContainer:e})}))}function a3({styleType:e,storedStyleList:t,styleList:n,renamingStyleID:r,renamingFolder:i,onRenameItem:a,stopRenamingItem:o,onDragStart:s,onDragEnd:c,onInspectStyle:p,onContextMenu:m,updateContextMenuStyleRef:h,updateSelection:_,styleRowRef:E,scrollContainer:y,recordingKey:v}){let f=(0,lb.q5)(),b=!(0,tK.p8)("isReadOnly"),S=(0,J.wA)(),P=(0,J.d4)(e=>e.stylePreviewShown),I=(0,ay.GS)(),N=(0,J.d4)(t=>(0,ag.i4)(t,e)),C=(0,J.d4)(t=>(0,ag.A7)(t,e,n)),[A,O]=l.useState(()=>{if(af.x4&&f){let t=JSON.parse(af.x4.getItem(a1)||"{}");if(f.key in t){let n=t[f.key];if(e in n)return new Set(n[e])}else t[f.key]={},af.x4.setItem(a1,JSON.stringify(t))}return new Set(n.filter(e=>"STYLE_FOLDER"===e.type).map(e=>e.name))}),[x,R]=l.useState([]),[M,L]=l.useState(null),[D,V]=l.useState(null),U=l.useMemo(()=>(0,am.s)(()=>{S(aE.GT({styleType:e}))},200),[S,e]);l.useEffect(()=>{U()},[U,n]);let B=(0,iT.ZC)(A);l.useEffect(()=>{if(!B||!af.x4||!f||(0,a_._f)(B,A))return;let t=JSON.parse(af.x4.getItem(a1)||"{}"),n=t[f.key];n&&(n[e]=[...A],af.x4.setItem(a1,JSON.stringify(t)))},[A,f,B,e]);let H=l.useCallback(e=>!!e&&"STYLE_FOLDER"===e.type,[]),G=l.useCallback((e,t)=>{let l=new Set(e),r=[];n.forEach((e,t)=>{if(l.has(e)&&(r.push(t),"STYLE_FOLDER"===e.type)){let e=(0,iV.mx)(t,n);r.push(...e)}});let i=new Set(r),a=t?n.indexOf(t):n.length,o=[...(0,d.y1)(a).filter(e=>!i.has(e)),...r,...(0,d.y1)(a,n.length).filter(e=>!i.has(e))],s=new Map;return o.forEach((e,t)=>{e!==t&&s.set(e,t)}),s},[n]),Y=l.useCallback(()=>{P.isShown&&(S(k.sw()),S(w.XE()),K.glU.selectStyle(g.n3.INVALID,g.IA.INVALID))},[S,P.isShown]),W=l.useMemo(()=>{if(!M)return null;if("in"===M.type){let e=n[M.index];return e?{folderNameToNestUnder:e.name,dividerStyles:{display:"none"}}:null}if(null==M.index||null==D||!N)return null;let e=(0,iV.QA)(N,n),t=e[0],l=null,r=null;if(0===M.index?r=n[M.index]:M.index===n.length?l=n[M.index-1]:(l=n[M.index-1],r=n[M.index]),(null==l?void 0:l.type)==="STYLE_FOLDER"&&A.has(l.name)&&-1===x.indexOf(l.name))return{folderNameToNestUnder:l.name,dividerStyles:{display:"none"}};if((null==l?void 0:l.type)===rT.PW.STYLE){let e=(0,ix.In)(l.name).split("/");for(let n=0;n<e.length;n++){let l=e.slice(0,n+1).join("/");if(A.has(l)&&-1===x.indexOf(l)){if("STYLE_FOLDER"!==t.type)return{folderNameToNestUnder:l,dividerStyles:{display:"none"}};return{folderNameToNestUnder:(0,ix.In)(l),dividerStyles:{marginLeft:24*Math.min((0,ix.ke)(l).length,8)-8}}}}}let i=0,a=null,o=l?(0,iV.rM)(l):0,s=r?(0,iV.rM)(r):0;if(o<=s)i=s,a=l?l.type===rT.PW.STYLE?(0,ix.In)(l.name):l.name:"";else if((0,lL.KF)(null!=l,"Dragging after an item that doesn't exist"),t.type===rT.PW.STYLE||D>=.5)i=o,a=(0,ix.In)(l.name);else{let e=Math.floor(D/.5*(0,iV.rM)(l));e=Math.max(s-1,e),a=(0,ix.ke)((0,ix.In)(l.name)).slice(0,e).join("/"),i=e+1}let c={marginLeft:24*Math.min(i,8)-8};return l&&e.includes(l)||!(0,iV.Md)(l,t,r)?{folderNameToNestUnder:null,dividerStyles:c}:{folderNameToNestUnder:a,dividerStyles:c}},[A,D,N,M,n,x]),$=l.useCallback((l,r,i,a)=>{if(!t||!r&&!i||!W)return;let o=W.folderNameToNestUnder;if(null===o)return;let s=[],c=[];l.forEach(e=>{(0,iV.Md)(r,e,i,o)&&("STYLE_FOLDER"===e.type?c.push(e):s.push(e))});let d=s.concat(c);if(!d.length)return;let p=eP.l7.user("reorder-styles",()=>(0,iV.VB)(d,r,i,o,n,t,a||!1)),u=new Set,m=new Set;d.forEach(e=>{let t=(0,iV.t_)(e),n=null==p?void 0:p.get(t);n&&("STYLE_FOLDER"===e.type?u.add(n):m.add(t))}),_({type:e,folderNames:u,styleIds:m});let h=new Set;return A.forEach(e=>{if(o.startsWith(e))return;let t=null==p?void 0:p.get(e);t?h.add(t):h.add(e)}),O(h),Y(),a||F.Y5.triggerAction("commit"),G(d,i)},[_,A,W,G,Y,t,n,e]),z=l.useCallback((e,t)=>{if("STYLE_FOLDER"!==t.type)return;let l=n.indexOf(t),r=(0,iV.dm)(t).filter(e=>(0,ix.In)(e.name)===t.name);if(!r.length)return $(e,t,n[l+1]);{let t=r[r.length-1],l=n.indexOf(t);return $(e,t,n[l+1])}},[$,n]),X=(0,ah.xx)((e,t)=>{let l=new Map,r=t.map(e=>e.type===rT.PW.STYLE?e.node_id:e.name);return e.forEach(e=>{let i=r.indexOf(e);-1!==i&&(0,iV.mx)(i,n).forEach(e=>{let n=t[e],r="STYLE_FOLDER"===n.type?n.name:n.node_id,i=l.get(r);i||(i=0),l.set(r,i+1)})}),l}),Q=l.useCallback(()=>{if(!N)return;let t=(0,iV.QA)(N,n);if(0===t.length)return;let l=t[0],r=n.indexOf(l),i=r,o=r+1;if(l.type===rT.PW.STYLE&&n[o]&&n[o].type===rT.PW.STYLE){let e=(0,iV.rM)(l);for(let t=r+1;t<n.length;t++){let l=n[t];if("STYLE_FOLDER"===l.type&&l.level===e||(0,iV.rM)(l)<e){i=t-1,o=t;break}t===n.length-1&&(i=t,o=t+1)}}$(t,n[i],n[o],!0);let s=(0,ix.In)(l.name),c=I?(0,T.t)("design_systems.create_style.new_folder"):(0,T.t)("design_systems.create_style.untitled_folder");s&&(c=`${s}/${c}`);let d=(e,t)=>{if(e.type===rT.PW.STYLE){let n=c+"/"+t+(0,ix.kH)(e.name);eP.l7.user("rename-style",()=>{K.glU.renameNode(e.node_id,n)})}else{let n=t+(0,ix.kH)(e.name)+"/";e.styles.forEach(e=>{d(e,n)}),e.subfolders.forEach(e=>{d(e,n)})}};t.forEach(e=>{d(e,"")}),_({type:e,folderNames:new Set([c]),styleIds:new Set}),a(c,!1,e)},[_,$,I,N,a,n,e]),Z=l.useCallback((e,t)=>{let l=n[e];"STYLE_FOLDER"===l.type&&O(e=>{let n=new Set(e);return t?n.add(l.name):n.delete(l.name),n})},[n]),j=l.useCallback((e,t)=>{O(l=>{let r=new Set(l),i=n[e];if("STYLE_FOLDER"===i.type){let e=(0,ix.In)(i.name),n=""===e?t:e+"/"+t;A.has(i.name)&&(A.delete(i.name),A.add(n)),(0,iV.KU)(i).forEach(e=>{if(A.has(e.name)){let t=e.name.replace(i.name,"");A.add(n+t),A.delete(e.name)}})}return r}),o(n,e,t)},[o,A,n]),q=l.useCallback(e=>{m(n,e)},[m,n]),ee=l.useCallback((e,t,n)=>{let l=t>.5?1:Math.round(1e3*t)/1e3;L({index:e,type:n?"in":"before"}),V(l)},[]),et=l.useCallback(()=>{O(e=>eP.l7.user("delete-styles",()=>{let t=new Set(e);return(N?(0,iV.QA)(N,n):[]).forEach(e=>{"STYLE_FOLDER"===e.type?((0,iV.a2)(e,(null==f?void 0:f.key)||null),A.delete(e.name),(0,iV.KU)(e).forEach(e=>A.delete(e.name))):(0,iV.Nr)(e,(null==f?void 0:f.key)||null)}),t})),F.Y5.triggerAction("commit"),P.isShown&&(S(k.sw()),S(w.XE()),K.glU.selectStyle(g.n3.INVALID,g.IA.INVALID)),_(null)},[P.isShown,_,N,n,null==f?void 0:f.key,A,S]),en=l.useMemo(()=>{let e=N?(0,iV.QA)(N,n):[];return(0,iV.Ug)(e).map(e=>e.node_id)},[N,n]),el=l.useCallback(()=>{K.glU.cutStyles(en)},[en]),er=l.useCallback((e,t)=>{t===av.zy.PASTE?K.glU.pasteStyles():e.shouldPropagate=!0},[]);l.useEffect(()=>{if(!N)return;let e=e=>{e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)||el()};return document.addEventListener("cut",e),()=>{document.removeEventListener("cut",e)}},[el,N]);let ei=l.useCallback(()=>{K.glU.pasteStyles()},[]),ea=l.useCallback(e=>{R(t=>[...t,e])},[]),eo=l.useCallback(()=>{s()},[s]),es=u.rf(v,"ondragend",l.useCallback(()=>{L(null),V(null),R([]),c()},[c])),ec=(0,iT.ZC)(N);l.useEffect(()=>{ec!==N&&N&&O(e=>{let n=new Set(e);for(let e of N.styleIds.values()){let l=t.find(t=>t.node_id===e);if(!l)continue;let r=(0,ix.ke)(l.name);for(let e=0;e<r.length;e++){let t=r.slice(0,e).join("/");n.delete(t)}}return n})},[N,ec,t]);let ed=l.useRef(null),ep=l.useCallback(e=>{ed.current=e},[ed]),eu=l.useMemo(()=>N?(0,iV.h$)(N,n):[],[N,n]),em=l.useMemo(()=>C?(0,iV.h$)(C,n):[],[C,n]),eh=l.useMemo(()=>[...eu,...em].sort((e,t)=>e-t),[eu,em]),e_=l.useCallback((e,t,o,s,c,d)=>{let u="STYLE_FOLDER"===e.type?e.name:e.node_id,m=!1,E=!1;for(let t of x)if("STYLE_FOLDER"===e.type){if(e.name===t){E=!0;break}e.name.startsWith(t)&&(m=!0)}else if((0,ix.In)(e.name)===t){m=!0;break}if(!E&&!m&&X(A,n).has(u))return null;let y=eh&&eh[eh.length-1]===t,g=eh&&eh[0]===t;if(e.type===rT.PW.STYLE){let n=(0,iV.rM)(e),i=null!=r&&r===e.node_id;return l.createElement(aL,{hideStylePreview:Y,recordingKey:`style-row-${t}`,index:t,key:e.node_id,isDragging:s,dsStyle:e,selected:o,selectedSecondary:(null==C?void 0:C.styleIds.has(e.node_id))||!1,level:n,stylePreviewShown:P,onContextMenu:q,updateContextMenuStyleRef:h,updateFocusRowRef:o?ep:null,onMouseDown:c,onMouseMove:d,onInspectStyle:p,updateSelection:_,isEditable:b,deleteSelectedItems:et,isRenaming:i,onRenameItem:a,stopRenamingItem:j,onCreateFolder:Q,isLastChildOfSelection:y})}{let n=null!=i&&i.name===e.name&&i.styleTypeSection===e.styleTypeSection,r=(null==W?void 0:W.folderNameToNestUnder)||null;return l.createElement(ax,{recordingKey:`folder-section-${e.styleTypeSection}-row-${t}`,key:t,index:t,isDragging:s,folder:e,selected:o,selectedSecondary:(null==C?void 0:C.folderNames.has(e.name))||!1,isCollapsed:A.has(e.name),temporarilyExpandFolder:ea,isTemporarilyExpanded:E,isRenaming:n,folderNameToNestUnder:r,onRenameItem:a,stopRenamingItem:j,level:e.level,toggleFolder:e=>Z(t,e),onContextMenu:q,onCreateFolder:Q,onMouseDown:c,onMouseMove:d,isEditable:b,deleteSelectedItems:et,hideStylePreview:Y,isFirstChildOfSelection:g})}},[_,eh,A,et,null==W?void 0:W.folderNameToNestUnder,X,Y,q,Q,p,a,i,r,null==C?void 0:C.folderNames,null==C?void 0:C.styleIds,j,n,P,ea,x,Z,h,b,ep]),eE=l.useCallback(t=>{let l=new Set,r=new Set;t.forEach(e=>{let t=n[e];"STYLE_FOLDER"===t.type?l.add(t.name):r.add(t.node_id)}),_({type:e,folderNames:l,styleIds:r})},[_,n,e]),ey=l.useRef(),eg=l.useRef();return l.useEffect(()=>{ey.current&&eu.length?(ey.current(),ed.current&&!ed.current.contains(document.activeElement)&&ed.current.focus()):eg.current&&!eu.length&&(eg.current(),ed.current=null)},[ey,eu,ed]),l.createElement(tU.vL,{name:"StyleDraggableList",handleClipboard:er,focusFunctionRef:ey,blurFunctionRef:eg},l.createElement(aD,{styleType:e},l.createElement(a2,{recordingKey:"style-draggable-list",listItems:n,onInsertItemsIn:z,canInsertItemsIn:H,onInsertItemsBetweenValues:$,onDrag:ee,onDragStart:eo,onDragEnd:es,insertDividerStyle:null==W?void 0:W.dividerStyles,selectedIndices:eu,updateSelection:eE,renderListItem:e_,scrollContainer:y,isDragDisabled:!b}),l.createElement(aG,{styleRowRef:E,onDeleteItems:et,onCutItems:el,onPasteItems:ei,onRenameItem:a,onEditStyle:p,onCreateFolder:Q,styleType:e})))}class a2 extends iz.q{}var a6=n(635736);function a8(e){var t,n,l;return(null==(t=e.modalShown)?void 0:t.type)===a6.y.type||(null==(l=null==(n=e.modalShown)?void 0:n.prevModal)?void 0:l.type)===a6.y.type}function a7(){let e=(0,a6.m)(),t=(0,l.useCallback)(()=>{e()},[e]),n=(0,J.d4)(a8),r=0===(0,tN.Rb)().length&&!n;return l.createElement(tP.p,{name:"local_variables_panel"},l.createElement(eh.Zk,null,l.createElement(eh.fI,{className:r?"local_variables_panel--localVariablesPanelRowFaded--atToe local_variables_panel--localVariablesPanelRow--zR8nJ draggable_list--panelHeaderRowFaded--kETRR":"local_variables_panel--localVariablesPanelRow--zR8nJ"},l.createElement(eh.xw,{className:"local_variables_panel--titleText--7rdD7 draggable_list--panelTitleText--SwKez",onClick:t,"data-onboarding-key":"local-variables-panel-title"},(0,T.tx)("variables.local_variables_panel.local_variables_title")),l.createElement(tS.E,{name:"variables_modal_button"},(0,s.kc)().fpl_variables_button_migration?l.createElement(iH.d,{onClick:t,recordingKey:(0,u.Pt)("localVariablesPanel","variablesModalButton"),toggled:n,"aria-label":(0,T.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip":(0,T.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":eo.Ib.TEXT},l.createElement(el.U,{svg:aM.A},l.createElement(tv.A,null))):l.createElement(eT.YW,{className:"local_variables_panel--openAuthoringModalButton--FiNXt draggable_list--addButton--D0q--",selected:n,recordingKey:(0,u.Pt)("localVariablesPanel","variablesModalButton"),"data-tooltip":(0,T.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":eo.Ib.TEXT,onClick:t},l.createElement(el.U,{svg:aM.A},l.createElement(tv.A,null)))))))}var a9=n(390487),oe=n(75215),ot=n(251518),on=n(205135);class ol extends l.PureComponent{constructor(e){super(e),this.chitRowRef=l.createRef(),this.colorFormatter=tI.TI,this.onColorChange=(e,t)=>{let n=e.a;e.a=1,F.Y5.updateSelectionProperties({backgroundColor:e,backgroundOpacity:n,backgroundEnabled:!0},{shouldCommit:t})},this.onColorChangeWithoutAlpha=(e,t)=>{F.Y5.updateSelectionProperties({backgroundColor:e,backgroundEnabled:!0},{shouldCommit:t})},this.onOpacityChange=(e,t)=>{F.Y5.updateSelectionProperties({backgroundOpacity:e,backgroundEnabled:0!==e},{shouldCommit:t})},this.onBackgroundEnabledChange=e=>F.Y5.updateSelectionProperties({backgroundEnabled:e}),this.onExportBackgroundDisabledChange=e=>{F.Y5.updateSelectionProperties({exportBackgroundDisabled:!e})},this.toggleColorPicker=()=>{if(this.props.pickerShown&&this.props.pickerShown.id===A.k8)this.props.dispatch(w.XE());else{(0,s.kc)().ce_properties_panel_tracking&&(0,ri.sx)("editor-background-panel-color-picker-show");let e=this.chitRowRef.current?(0,es.cn)(this.chitRowRef.current):{x:0,y:0};this.props.dispatch(w.u1({id:A.k8,initialX:e.x,initialY:e.y})),this.props.dispatch(k.sw())}},this.mergeColorAndOpacity=(0,ah.xx)(e=>{let t=(0,B.E7)(e.backgroundColor),n=(0,B.E7)(e.backgroundOpacity);return null!=t&&null!=n?{...t,a:n}:e.backgroundColor||B.oV})}get opacity(){return(0,B.hS)(this.props.backgroundOpacity)&&"number"==typeof this.props.backgroundOpacity&&isNaN(this.props.backgroundOpacity)?0:this.props.backgroundOpacity}renderInputWithChit(){return l.createElement("div",{className:"background_panel--colorValueContainer---lsls paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},l.createElement(nM.J,{color:this.mergeColorAndOpacity(this.props),opacity:this.opacity,onMouseDown:this.toggleColorPicker,recordingKey:u.Pt(this.props,"colorChit"),className:"background_panel--chit--EQGLT paint_panels--chit--twQEy"}),l.createElement(on.AN,{className:this.props.backgroundEnabled?"background_panel--color--sBAtd paint_panels--colorInput--nSz13":"background_panel--colorHidden--CEpXN paint_panels--colorInputHidden--ZojfD paint_panels--colorInput--nSz13",formatter:this.colorFormatter,property:this.props.backgroundColor,onChange:this.onColorChangeWithoutAlpha,recordingKey:u.Pt(this.props,"color"),noBorderOnFocus:!0}),l.createElement(nr.Pd,{className:"background_panel--opacity--nwSdu paint_panels--opacityInputContainer--oqlsk",inputClassName:this.props.backgroundEnabled?void 0:"background_panel--opacityInputHidden--2-b0t paint_panels--opacityInputHidden--I2GEk",value:this.opacity,onValueChange:this.onOpacityChange,dispatch:this.props.dispatch,noBorderOnFocus:!0,recordingKey:u.Pt(this.props,"opacity")}))}renderVisibilityToggleButton(){return l.createElement("span",{className:"background_panel--visible--2-4Ns"},l.createElement(rG.B,{visible:this.props.backgroundEnabled,onChange:this.onBackgroundEnabledChange,recordingKey:u.Pt(this.props,"visibleToggle")}))}renderSimpleBackground(){return l.createElement("div",null,l.createElement(eh.fI,{className:"background_panel--panelTitleRow--uNINf"},l.createElement(eh.xw,null,(0,T.tx)("fullscreen.properties_panel.page")),l.createElement(rC,{recordingKey:"pageLevel"}),l.createElement(rS.M,{showLibrarySets:!0,recordingKey:"pageLevel"})),"ui2"===this.props.theme.version?this.renderUI2ColorInput():this.renderUI3ColorInput())}renderUI3ColorInput(){return l.createElement(eE.DE,{ref:this.chitRowRef,label:null,input:this.renderInputWithChit(),icon:this.renderVisibilityToggleButton()})}renderUI2ColorInput(){return l.createElement(l.Fragment,null,l.createElement(eh.fI,{forwardedRef:this.chitRowRef},this.renderInputWithChit(),this.renderVisibilityToggleButton()))}render(){var e;return l.createElement(tP.p,{name:"background_panel"},l.createElement(eh.Zk,null,this.renderSimpleBackground(),this.props.hasExports&&l.createElement(eh.fI,{className:"background_panel--checkboxLabelRow--r-hmK"},l.createElement(oe.t,{className:"background_panel--checkbox--6U3j-",id:"export-background-disabled",property:this.props.exportBackgroundDisabled===B.oV?B.oV:!this.props.exportBackgroundDisabled,onChange:this.onExportBackgroundDisabledChange,recordingKey:u.Pt(this.props,"exportDisableCheckbox")}),l.createElement(eh.JU,{className:"background_panel--checkboxLabel--ITthj",htmlFor:"export-background-disabled","data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.properties_panel.include_the_canvas_or_group_background_in_exports")},(0,T.tx)("fullscreen.properties_panel.show_in_exports"))),(null==(e=this.props.pickerShown)?void 0:e.id)===A.k8&&l.createElement(ot.sk,{disabledVariableIds:new Set,title:(0,T.t)("fullscreen.properties_panel.background"),initialPosition:new y.Mi(this.props.pickerShown.initialX,this.props.pickerShown.initialY),color:(0,B.hS)(this.mergeColorAndOpacity(this.props))?(0,B.E7)(this.mergeColorAndOpacity(this.props)):{r:1,g:1,b:1,a:1},boundVariable:null,onChange:this.onColorChange,recordingKey:u.Pt(this.props,"colorPicker")}),l.createElement(rU.wu,{showExplicitOnly:!0,recordingKey:"backgroundPanel-variableModeEntries"})))}}ol.displayName="BackgroundPanel";let or=(0,et.SL)(ol);var oi=n(33136),oa=n(553609);function oo(e){let t=(0,oi.t)();return e.readOnly?l.createElement(oa.l,{...e}):t.nodesAreAllInsideStacks&&"AUTO"===t.stackPositioning?null:l.createElement(eh.Zk,null,l.createElement(eh.fI,null,l.createElement(eh.xw,{extended:!0},(0,T.tx)("fullscreen.properties_panel.constraints_panel.constraints"))),l.createElement(oa.l,{...e}))}function os(e){return l.createElement(tP.p,{name:"constraints_panel"},l.createElement(oo,{...e}))}var oc=n(233711),od=n(924491),op=n(511617),ou=n(154483),om=n(733169),oh=n(132135),o_=n(321487),oE=n(167807);let oy=(0,ou.fv)();function og(e){let t=(0,Y.IW)(e.stylePreviewShown),n=oy(t),r=(0,oE.$Q)(n).data,i=(0,om.Sw)(null==r?void 0:r.key).unwrapOr(!1);if(!t||!r)return null;let a=(0,oh.to)(r);return a=(0,op.dR)(a,{"node-id":encodeURIComponent((0,o_.E)(t.node_id))}),l.createElement(tP.p,{name:"external_style_options"},l.createElement(eh.Zk,{key:"external-style-options"},i&&l.createElement(eh.fI,null,l.createElement(e9.N_,{className:to.lf,href:a,target:"_blank",trusted:!0},(0,T.tx)("fullscreen.properties_panel.go_to_style_definition_to_edit")))))}var ov=n(975126),of=n(503359),ob=n(613023),oS=n(841368),oP=n(877953),oT=n(499777),ow=n(69961),oI=n(290022),ok=n(933466),oN=n(493424),oC=n(468570),oA=n(414879),oO=n(559568);function ox(){let{consumedVariable:e,clearVariableConsumption:t}=(0,rf.u3)(["VISIBLE"]),n=r0(),r=(0,tN.u)(n),i=null==r?void 0:r.name,a=!!e&&!!r,o=l.useMemo(r_.Tn,[]),s=(0,tN.BQ)(n),c=(0,ra.R)(e=>o(e,(0,lQ.qd)(e),rp.R.VISIBLE));return!a||c?null:l.createElement(eE.DE,{appendedClassName:"component_bound_vibisility_row--row--Pss97",input:l.createElement(rb.P,{value:i||(0,T.t)("fullscreen.mixed"),isStandalone:!0,classNameOverride:"component_bound_vibisility_row--pillCover--q5iKl",styleOverride:{width:"auto"},isDeleted:!!r&&(0,rg.eF)(r),fullWidth:!0,varaiablePillContainerClassName:"component_bound_vibisility_row--ui3RowVariablePillContainer--ocnP8",thumbnailValue:"MIXED"!==s?s:void 0}),icon:l.createElement("div",{className:"component_bound_vibisility_row--detachVisibilityIcon--FcjEN"},l.createElement(ey.K,{onClick:()=>t(),"aria-label":(0,T.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip-type":eo.Ib.TEXT,recordingKey:"detachVisibilityVariable"},l.createElement(rr.U,null))),label:null})}var oR=n(824374);let oM=new nn.SU;class oL extends no.c${}class oD extends no.l6{renderInput(){return l.createElement(ey.K,{recordingKey:(0,u.Pt)(this.props.recordingKey,"blendMode"),"aria-label":(0,T.t)("properties.dropdown.apply_blend_mode"),onClick:this.onMouseDown,actionOnPointerDown:!0,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("properties.dropdown.apply_blend_mode")},l.createElement(oR.M,{value:this.props.property,normalIsActive:!0}))}}function oF(e){let[t,n]=(0,rx.sL)(),r=(0,J.wA)(),i=(0,tC.U)(),a=(0,ty.cJ)(),o=rx.j4.map((t,n)=>{let r="LINEAR_BURN"===t&&a;return"SELECT_DIVIDER"===t?l.createElement(no.sK,{key:n}):l.createElement(oL,{key:n,value:t,disabled:r,recordingKey:u.Pt(e,"blendMode",t)})});return l.createElement(oD,{id:"layer-blend-mode-select",className:"selection_blend_mode_icon_button--container--Wv9Hd",dropdownClassName:"selection_blend_mode_icon_button--blendModeSelectDropdown--WcwN1 blend_mode_select--blendModeSelectDropdown--jlg6p",property:t,onChange:n,formatter:oM,dispatch:r,dropdownShown:i,onMouseDown:x.dG,minTop:6,recordingKey:u.Pt(e,"blendMode"),enablePreview:!0,dropdownAlignment:"right",willShowDropdown:()=>((0,ri.sx)("editor-blend-mode-dropdown-show"),Promise.resolve())},o)}var oK=n(866577);function oV(e){let t=(0,n5.Df)(),n=(0,oP.C)("fpl_dialog_trigger"),r=(0,n5.Jo)(),i=(0,oT.kG)("corner-smoothing"),[a]=(0,tF.lJ)("rectangleCornerRadiiIndependent"),o=(0,tF.kl)("visible"),c=!r.rectangleCornerRadii,d=t.cornerRadius,[p,m]=l.useState(null),[h]=(0,tF.lJ)("opacity"),_=t.rectangleCornerRadii,E=t.rectangleCornerRadii&&!!p,y=!r.cornerRadius,g=y||c,v=(0,l.useRef)(null),f=l.useRef(null),b=rj(),S=(0,ow.o3)(ow.nt.ui3ClipContentControl),P=l.useMemo(r_.On,[]),{isDefReferencedBySelection:w,selectedGUIDs:I}=(0,ra.R)(e=>({isDefReferencedBySelection:!!P(e,rp.R.VISIBLE),selectedGUIDs:(0,lQ.qd)(e)})),k=l.useCallback((e,t)=>{F.Y5.updateSelectionProperties({opacity:e},{shouldCommit:t}),e>0&&!w&&F.Y5.updateSelectionProperties({visible:!0},{shouldCommit:t})},[w]),N=(0,l.useCallback)(()=>{i.hide(),F.Y5.deselectProperty()},[i]),C=(0,J.wA)(),A=l.useCallback(()=>{(0,s.kc)().ce_properties_panel_tracking&&(0,ri.sx)("editor-transform-panel-change",{key:"rectangleCornerRadiiIndependent",value:!(0,B._W)(a,!1)}),!E&&v.current?m((0,es.cn)(v.current,parseInt(oK.Je,10))):m(null)},[a,E]);return l.useEffect(()=>{m(null)},[I]),l.createElement(eh.Zk,null,l.createElement(np.Wv,{titleTx:(0,T.tx)("fullscreen.appearance_panel.appearance")},!b&&l.createElement(rm.yQ,{nodeField:rp.R.VISIBLE,defaultValue:o,guids:I}),l.createElement(rC,{recordingKey:"frameLevel"}),l.createElement(rS.M,{showLibrarySets:!1,recordingKey:"frameLevel"}),l.createElement(r$,{recordingKey:e.recordingKey}),l.createElement(oF,{recordingKey:e.recordingKey})),l.createElement(eE.fn,{ref:v,leftInput:l.createElement(ry.sA,{recordingKey:u.Pt(e,"layerOpacityInputWrapper"),fields:["OPACITY"],disabled:!1,resolvedType:K.rXF.FLOAT,currentFieldValue:(0,B.hS)(h)?h:void 0,inputRef:f,hasBindingContextMenu:!0},l.createElement(nr.Pd,{inputClassName:"appearance_panel--input--h3br5 raw_components--flushLeft--YH-5P",ui3RightJustifyPercentSign:!1,noBorderOnHover:!0,isTokenizable:!0,value:h,onValueChange:k,mixedMathHandler:oU,dispatch:C,recordingKey:u.Pt(e,"opacity"),forwardedRef:f},l.createElement("div",{className:"appearance_panel--opacityIconContainer---kdX-"},l.createElement(rn.N,null)))),rightInput:l.createElement(oN.C,{recordingKey:e.recordingKey,disabled:!d||E||y}),icon:d?_?l.createElement(tS.E,{name:"independent_corner_radius_toggle"},n?l.createElement(iH.d,{actionOnPointerDown:!0,toggled:E,onClick:A,"aria-label":(0,T.t)("fullscreen.properties_panel.transform_panel.independent_corners"),disabled:g,recordingKey:u.Pt(e,"rectangleCornerToolIndependentToggle")},l.createElement(ob.Q,null)):l.createElement(eh.YW,{selected:E,onClick:A,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.properties_panel.transform_panel.independent_corners"),recordingKey:u.Pt(e,"rectangleCornerToolIndependentToggle"),disabled:g},l.createElement(ob.Q,null))):l.createElement(eh.YW,{onMouseDown:e=>(0,oI._)(i,v,e),recordingKey:u.Pt(e,"cornerSmoothingToggle"),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.properties_panel.transform_panel.corner_smoothing"),selected:i.showing,disabled:y},l.createElement(oS.J,null)):null,leftLabel:(0,T.tx)("fullscreen.properties_panel.section_appearance.label_opacity"),rightLabel:d?(0,T.tx)("fullscreen.properties_panel.transform_panel.corner_radius"):null}),t.fixedFrameOptions&&S&&l.createElement(ok.u,{recordingKey:e.recordingKey}),(t.count||t.starInnerScale)&&l.createElement(oO.cU,{countShown:t.count,countDisabled:!r.count,starInnerScaleShown:t.starInnerScale,starInnerScaleDisabled:!r.starInnerScale,recordingKey:e.recordingKey}),t.arcData&&l.createElement(oO.Je,{arcDataDisabled:!r.arcData,recordingKey:e.recordingKey}),l.createElement(rh.L,{nodeField:rp.R.VISIBLE,currentValue:o}),l.createElement(rU.wu,{showExplicitOnly:!0,recordingKey:"layerPanel-variableModeEntries"}),l.createElement(ox,null),E&&p&&l.createElement(oA.$,{initialPosition:p,onClose:A,recordingKey:u.Pt(e,"advanced")}),i.showing&&l.createElement(oC.T,{initialPosition:i.initialPosition,onClose:N,recordingKey:u.Pt(e,"advanced")}))}let oU=new r1;var oB=n(89586);let oH="mask_panel--maskTypeDropdown--3Etsx";class oG extends no.l6{}class oY extends no.c${}class oW extends l.PureComponent{constructor(){super(...arguments),this.onMaskTypeChange=(e,t=tV.zk.YES)=>{F.Y5.updateSelectionProperties({maskType:e},{shouldCommit:t})},this.maskTypeFormatter={format:e=>{switch(e){case"ALPHA":return(0,T.t)("fullscreen.mask_panel.alpha");case"OUTLINE":return(0,T.t)("fullscreen.mask_panel.vector");case"LUMINANCE":return(0,T.t)("fullscreen.mask_panel.luminance")}},formatExtended:e=>{switch(e){case"ALPHA":return{text:(0,T.t)("fullscreen.mask_panel.alpha_extended")};case"OUTLINE":return{text:(0,T.t)("fullscreen.mask_panel.vector_extended")};case"LUMINANCE":return{text:(0,T.t)("fullscreen.mask_panel.luminance_extended")}}}},this.stopPropagation=e=>e.stopPropagation()}render(){let e=l.createElement(eh.fI,null,l.createElement(oG,{id:"mask-type-dropdown",className:oH,property:this.props.maskType,formatter:this.maskTypeFormatter,onChange:this.onMaskTypeChange,dispatch:this.props.dispatch,dropdownClassName:oH,dropdownShown:this.props.dropdownShown,onMouseDown:this.stopPropagation,recordingKey:u.Pt(this.props,"maskType"),enablePreview:!0},l.createElement(oY,{value:"ALPHA",recordingKey:u.Pt(this.props,"maskType","alpha")}),l.createElement(oY,{value:"OUTLINE",recordingKey:u.Pt(this.props,"maskType","outline")}),l.createElement(oY,{value:"LUMINANCE",recordingKey:u.Pt(this.props,"maskType","luminance")})));return l.createElement(tP.p,{name:"mask_panel"},l.createElement(eh.Zk,null,l.createElement(eh.fI,null,l.createElement(eh.xw,null,(0,T.tx)("fullscreen.mask_panel.mask"))),e))}}oW.displayName="MaskPanel";var o$=n(750693),oz=n(536825),oX=n(819785),oQ=n(695038);function oZ({addProperty:e,children:t,contentsVisibleOrMixed:n,minusDisabled:r,plusDisabled:i,recordingKey:a,removeProperty:o,showButton:s,title:c,dataTestId:d,shouldHideButton:p}){let{version:m}=(0,et.DP)(),h=(0,l.useCallback)(()=>{!1!==n||i||e()},[e,n,i]),_=n===B.oV,E=!_&&!n;null==s&&(s=!0===n?"-":"+");let y="+"===s?l.createElement(ey.K,{as:"button",recordingKey:u.Pt(a,"addButton"),onClick:e,onMouseDown:x.dG,disabled:i,"aria-label":(0,T.t)("fullscreen.properties_panel.add"),"data-testid":d??""},l.createElement(el.U,{svg:e3.A,fallbackSvg:t1.A},l.createElement(ee.e,null))):l.createElement(ey.K,{as:"button",recordingKey:u.Pt(a,"removeButton"),onClick:o,onMouseDown:x.dG,disabled:r,"aria-label":(0,T.t)("fullscreen.properties_panel.remove"),"data-testid":d??""},l.createElement(el.U,{svg:oX.A,fallbackSvg:oQ.A},l.createElement(oz.O,null)));return"ui3"===m?l.createElement(l.Fragment,null,c&&l.createElement(np.r,{onMouseDown:h,faded:E,isEmpty:E,titleTx:l.createElement("span",null,c),icon:p?void 0:y}),_&&l.createElement(eh.fI,null,l.createElement(eh.UZ,{className:rX.Pf},(0,T.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!_&&!E&&t):l.createElement(l.Fragment,null,c&&l.createElement(eh.fI,{onMouseDown:h,className:E?rX.et:void 0,recordingKey:u.Pt(a,"panelTitle")},l.createElement(eh.xw,{faded:E,extended:!0},l.createElement("div",{className:rX.yr},c)),l.createElement(eh.$4,null,p?null:y)),_&&l.createElement(eh.fI,null,l.createElement(eh.UZ,{className:rX.Pf},(0,T.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!_&&!E&&t)}class oJ extends u.uA{constructor(){super(...arguments),this.noop=()=>{}}render(){return l.createElement(tP.p,{name:"remove_group_fill_and_stroke_panel"},l.createElement(eh.Zk,null,l.createElement(oZ,{title:"Background",addProperty:this.noop,removeProperty:K.glU.clearFillAndStrokePaintsOnSelectedGroups,contentsVisibleOrMixed:!0},l.createElement(eh.fI,{className:"remove_group_fill_and_stroke_panel--labelContainer--ngqjq"},l.createElement(eh.UZ,{className:"remove_group_fill_and_stroke_panel--label--orOpK"},(0,T.tx)("fullscreen.remove_group_fill_and_stroke.background_color_group_unsupported"))))))}}var oj=n(456363),oq=n(161459),o0=n(832637),o1=n(529358),o5=n(376503),o4=n(362679),o3=n(13556),o2=n(306413);function o6(e){var t;let n="stroke-settings",[r,i]=(0,tb.fp)(oj.GI),a=r.paints||[],o=(0,J.wA)(),s=l.useContext(ti.zK),c=()=>null!=s,d=l.useRef(null),p=e=>{i({paints:e}),H.Tm.clearCache()},m=e=>{let{strokeWeight:t,dashPattern:n}=e,l=(0,B.E7)(t);l&&i({strokeWeight:l});let r=(0,B.E7)(n);r&&i({dashPattern:r})},h=e=>{let t=a.filter((t,n)=>!e.has(n));0===t.length&&(t=[a[0]]),p(t)},_=(e,{fromSearch:t}={})=>{o(ik.AV({style:e,inheritStyleKeyField:"inheritFillStyleKeyForStroke",fromSearch:t}))},{version:E}=(0,et.DP)(),y=!!r.styleId||a.length>0,g=(null==(t=e.pickerShown)?void 0:t.id)===n,v=!e.userFlags.dismissed_shift_to_draw_straight_lines_hint,f=l.createElement(o1.v9,{strokeWeight:r.strokeWeight||oq.qB,onChange:m,recordingKey:u.Pt(e,"weight")}),b=l.createElement(o5.qR,{className:"ui3"===E?void 0:"pencil_tool_panel--dashCap--OD1E2",dashCap:(0,o5.Hd)(r.strokeCap||"ROUND")||"ROUND",onChange:e=>{i({strokeCap:e})},recordingKey:u.Pt(e,"dashCap")}),S=l.createElement(eh.YW,{svg:o4.A,fallbackSvg:o3.A,className:"pencil_tool_panel--advancedStroke--1497y",onClick:()=>{var t;if((null==(t=e.pickerShown)?void 0:t.id)===n)o(w.XE());else{if(!d)return;let e=Z.findDOMNode(d.current),t=(0,es.cn)(e);o(w.u1({id:n,initialX:t.x,initialY:t.y}))}},onMouseDown:e=>e.stopPropagation(),selected:g,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.pencil_tool.advanced_stroke_settings"),recordingKey:u.Pt(e,"more")});return l.createElement("div",{className:"pencil_tool_panel--pencilPanelContainer--O-fFF"},l.createElement(eh.Zk,null,l.createElement(o$.W4,{title:(0,T.t)("fullscreen.pencil_tool.stroke"),propertyList:a,onChange:p,currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:K.rrT.STROKE_PRESET,styleType:"FILL",addProperty:()=>{F.Y5.triggerAction("add-stroke-to-selection")},onDeleteProperty:e=>h(e),onReorder:()=>{H.Tm.clearCache()},renderProperty:(t,n,r,i,s,d,p,m,y)=>{var g;let v=c()?"preview-paint":"paint",f=H.Tm.getId(n,K.rrT.STROKE_PRESET,v),b=a.slice(0,n).some(e=>e.visible);return l.createElement(o$.Gg,{key:`paint-${n}`,id:f,index:n,inheritStyleKeyField:"inheritFillStyleKeyForStroke",singletonRow:1===a.length,selectedPropertyType:K.rrT.STROKE_PRESET,paint:t,selected:e.stylePickerShown.isShown?(null==(g=e.pickerShown)?void 0:g.id)===f:r,isDragging:i,hasFocus:s,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,onChange:d,onApplyStyle:_,onMouseDown:p,onMouseMove:m,onMouseUp:y,onRemovePaint:a.length>1?()=>h(new Set([n])):void 0,hideVisibilityToggle:1===a.length,currentSelectedGradientStop:e.currentSelectedGradientStop,currentTool:K.NLJ.VECTOR_PENCIL,colorFormat:e.colorFormat,dispatch:o,dropdownShown:e.dropdownShown,pickerShown:e.pickerShown,editModeType:e.editModeType,defaultColor:H.Em,library:e.library,openFile:e.openFile,recordingKey:u.Pt(e,n),variableScopes:new Set([K.j0r.STROKE]),isUI3:"ui3"===E,hasVisiblePaintBelow:b})},recordingKey:e.recordingKey,sceneGraphSelection:e.sceneGraphSelection,library:e.library,modalShown:e.modalShown,openFile:e.openFile,inheritStyleKeyField:"inheritFillStyleKeyForStroke",inheritStyleKey:r.styleId||null,inheritStyleID:null,selectedStyleProperties:e.selectedStyleProperties,stylePickerListLayout:e.stylePickerListLayout,stylePickerShown:e.stylePickerShown,onToggleListLayout:()=>{o(w.Y({isListLayout:!e.stylePickerListLayout}))},removeAllProperties:null,onApplyStyle:_,defaultColor:H.rC}),y&&("ui3"===E?l.createElement(eE.fn,{ref:d,leftLabel:(0,T.tx)("fullscreen.properties_panel.section_stroke.label_weight"),leftInput:f,rightLabel:(0,T.tx)("fullscreen.properties_panel.section_stroke.label_end_cap"),rightInput:b,icon:S}):l.createElement(eh.fI,{ref:d},f,b,S))),v&&l.createElement("div",{className:"pencil_tool_panel--hintPanel--917wK"},l.createElement(o0.u,{title:(0,T.t)("fullscreen.pencil_tool.hold_shift_to_draw_straight_lines"),icon_DEPRECATED:o2.A,userFlag:"dismissed_shift_to_draw_straight_lines_hint",hintText:(0,T.t)("fullscreen.pencil_tool.now_vertical_horizontal_and_diagonal_lines_are_a_breeze")})),g&&e.pickerShown&&l.createElement(o5._2,{onChange:m,strokePanelMode:K.yTM.PENCIL,strokePanelTerminalPointCount:2,strokeCap:r.strokeCap||"ROUND",strokeJoin:"ROUND",maxStrokeWeight:r.strokeWeight||oq.qB,dashPattern:r.dashPattern,dropdownShown:e.dropdownShown,pickerShown:e.pickerShown,recordingKey:u.Pt(e,"advanced")}))}function o8(e){let t=(0,V.Ku)(),n=(0,ra.R)(e=>{var t;return{currentSelectedGradientStop:e.mirror.appModel.currentSelectedGradientStop,library:e.library,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,colorPicker:e.colorPicker,styleSets:e.styleSets,openFileKey:(null==(t=e.openFile)?void 0:t.key)||null,reposById:e.repos,teams:e.teams,editModeType:e.mirror.appModel.activeCanvasEditModeType,currentTool:e.mirror.appModel.currentTool,sceneGraphSelection:e.mirror.sceneGraphSelection,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,inheritStyleKey:e.mirror.selectionProperties.inheritFillStyleKeyForStroke||null,selectedStyleProperties:e.mirror.selectedStyleProperties,stylePickerListLayout:e.stylePickerListLayout,userFlags:e.userFlags}});return l.createElement(o6,{...n,...e,colorFormat:t})}var o7=n(438377),o9=n(270296),se=n(843495),st=n(147723),sn=n(252828);function sl({label:e,tab:t,active:n,className:r,recordingKey:i,keyboardShortcut:a}){let o=(0,J.d4)(e=>e.mirror.appModel.topLevelMode),s=(0,tK.dH)(),c=(0,ew.R)(),d=(0,ty.cJ)(),p=u.rf(i,"mousedown",()=>{if(!n){let e=sr(t,c,d).analyticsName;(0,ri.sx)("properties-panel-select-tab",{tab:e}),s===K.NLJ.SCALE&&t===K.FAf.PROTOTYPE&&F.Y5.triggerAction("set-tool-default"),(0,se.NT)(t),o===K.lyf.PREVIEW&&(t===K.FAf.COMMENT?F.Y5.triggerAction("set-tool-comments"):F.Y5.triggerAction("set-tool-default"))}});return l.createElement("div",{className:r,onMouseDown:p,"data-label":e,...a?{"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":e,"data-tooltip-shortcut-key":a}:void 0},e)}function sr(e,t,n){return({[K.FAf.DESIGN]:{label:(0,T.t)("fullscreen.properties_panel.design"),tab:K.FAf.DESIGN,className:to.Mf,recordingKey:"designTab",analyticsName:"design"},[K.FAf.PROTOTYPE]:{label:n?(0,T.t)("fullscreen.properties_panel.interactions"):(0,T.t)("fullscreen.properties_panel.prototype"),tab:K.FAf.PROTOTYPE,className:to.Mf,recordingKey:n?"interactionsTab":"prototypeTab",analyticsName:n?"interactions":"prototype"},[K.FAf.INSPECT]:{label:(0,T.t)("fullscreen.properties_panel.properties"),tab:K.FAf.INSPECT,className:to.Mf,recordingKey:"inspectTab",analyticsName:"inspect"},[K.FAf.COMMENT]:{label:t?(0,T.t)("fullscreen.properties_panel.comments"):(0,T.t)("fullscreen.properties_panel.comment"),tab:K.FAf.COMMENT,className:to.Mf,recordingKey:"commentTab",analyticsName:"comment"},[K.FAf.EXPORT]:{label:(0,T.t)("fullscreen.properties_panel.export"),tab:K.FAf.EXPORT,className:to.Mf,recordingKey:"exportTab",analyticsName:"export"},[K.FAf.SLIDE]:{label:(0,T.t)("fullscreen.properties_panel.design"),tab:K.FAf.SLIDE,className:to.Mf,recordingKey:"designTab",analyticsName:"design"},[K.FAf.SLIDE_ANIMATION]:{label:(0,T.t)("slides.properties_panel.animate"),tab:K.FAf.SLIDE_ANIMATION,className:to.Mf,recordingKey:"animateTab",analyticsName:"animate"},[K.FAf.SITE]:{label:(0,T.t)("fullscreen.properties_panel.design"),tab:K.FAf.SITE,className:to.Mf,recordingKey:"sitesTab",analyticsName:"sites"}})[e]}function si({activeTab:e,isUI3:t,shouldShowAlignControls:n,shouldRenderInspectTab:r,recordingKey:i}){let a=(0,J.d4)(e=>e.mirror.appModel.topLevelMode),o=(0,tK.dH)(),s=(0,tK.p8)("isReadOnly"),c=(0,tc.ks)(),d=s&&!c,p=(0,tn.sO)(),u=(0,ty.cJ)(),m=(()=>{let n=t?p?[K.FAf.COMMENT]:[K.FAf.COMMENT,K.FAf.INSPECT]:[K.FAf.COMMENT,K.FAf.INSPECT,K.FAf.EXPORT];switch(a){case K.lyf.LAYOUT:if(d)return n;if(e===K.FAf.COMMENT)return[K.FAf.COMMENT];if(u)return[K.FAf.SITE,K.FAf.PROTOTYPE];if(p)return[K.FAf.SLIDE,K.FAf.SLIDE_ANIMATION];return r?[K.FAf.DESIGN,K.FAf.PROTOTYPE,K.FAf.INSPECT]:[K.FAf.DESIGN,K.FAf.PROTOTYPE];case K.lyf.PREVIEW:case K.lyf.DEV_HANDOFF:return n;case K.lyf.BRANCHING:return[K.FAf.INSPECT];default:return[K.FAf.DESIGN,K.FAf.PROTOTYPE,K.FAf.INSPECT]}})(),h=m.find(t=>t===e),_=m.map((n,l)=>{let r=sr(n,t,u),i=r.tab===e||0===l&&void 0===h,s=r.className;return i&&(s=m.length>1?to.yR:to.iV),{...r,className:s,active:i,topLevelMode:a,currentTool:o}});return m.length&&(1!==m.length||t)?l.createElement(C.j9.Consumer,null,()=>{if(t)return l.createElement(sa,{recordingKey:i,tabInfo:_});let r=e===K.FAf.DESIGN&&n||e===K.FAf.COMMENT?to.yW:to.hv;return l.createElement("div",{className:r,"data-non-interactive":!0},_.map((e,t)=>l.createElement(sl,{key:t,...e})))}):null}function sa({tabInfo:e,recordingKey:t}){let n=e.reduce((e,t)=>(e[t.tab]=!0,e),{}),r=e.find(e=>e.active),[i,a]=tR.t.useManagedTabs(n,(null==r?void 0:r.tab.toString())??"",e=>{let t=parseInt(e),n=sr(t,o,s).analyticsName;(0,ri.sx)("properties-panel-select-tab",{tab:n}),c===K.NLJ.SCALE&&t===K.FAf.PROTOTYPE&&F.Y5.triggerAction("set-tool-default"),(0,se.NT)(t),d===K.lyf.PREVIEW&&(t===K.FAf.COMMENT?F.Y5.triggerAction("set-tool-comments"):F.Y5.triggerAction("set-tool-default"))},{recordingKey:u.Pt(t,"tabs")}),o=(0,ew.R)(),s=(0,ty.cJ)(),c=(0,tK.dH)(),d=(0,J.d4)(e=>e.mirror.appModel.topLevelMode);return l.createElement("div",{className:to.A7},l.createElement("div",{className:to.tq},l.createElement(tR.t.TabStrip,{manager:a},e.map((e,t)=>l.createElement(tR.t.Tab,{key:`props-panel-tab-${t}`,...i[e.tab]},e.label)))),l.createElement("div",{className:to.wR},l.createElement(sn.HT,{recordingKey:u.Pt(t,"zoomMenu")})),l.createElement("div",{"data-onboarding-key":st.D9,className:to.qq}))}var so=n(939683),ss=n(529004),sc=n(348425),sd=n(46878),sp=n(634238),su=n(497306),sm=n(113468),sh=n(422237);let s_=(0,sh.ex)("prototype_info",function(e){let{tooltipText:t}=e;return l.createElement("div",{className:tT.cx.flex.justifyCenter.itemsCenter.$},l.createElement("span",{className:tT.cx.m6.flexGrow1.$,style:{maxWidth:144}},t))},e=>({tooltipText:e.getAttribute("data-tooltip-text")}));var sE=n(248752),sy=n(812111),sg=n(73349),sv=n(38340),sf=n(908946),sb=n(94500),sS=n(987850),sP=n(239737),sT=n(222478),sw=n(709731),sI=n(921717),sk=n(384775),sN=n(119081),sC=n(351631);function sA(){let e=(0,J.wA)(),t=(0,J.d4)(e=>(0,X.Yh)(e.mirror.appModel,sT.JT.MAGIC_LINK)),n=(0,sP.vh)(),{withinMeter:r}=(0,sS.X)(sT.JT.MAGIC_LINK);return n&&r?l.createElement("span",{className:"magic_link--magicLinkButton--CWefW","data-testid":"magic-link-entry"},l.createElement(ey.K,{recordingKey:u.Pt("prototypeInteractionList","magicLinkButton"),"aria-label":(0,T.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip"),onClick:()=>{(0,sk.$I)(e,{moduleToOpen:{type:"custom",module:l.createElement(sN.p,null),name:sI.S.MAGIC_LINK,beforeModuleOpen:()=>{e((0,sb.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"properties_panel"}})),(0,sw.B3)(sT.JT.MAGIC_LINK),t&&(0,sw.Ag)(sT.JT.MAGIC_LINK,sC.eW,{})}},trackingData:{source:"placeholder_<MagicLinkEntry>"}})},"data-tooltip":(0,T.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip"),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip-show-above":!0},l.createElement(sf.B,null))):null}function sO(e){return e??"Default"}let sx=l.createContext({getNodeName:sO}),sR=l.memo(function({getNodeName:e=sO,children:t}){let n=l.useMemo(()=>({getNodeName:e}),[e]);return l.createElement(sx.Provider,{value:n},t)});var sM=n(146935);let sL="prototype_interaction_list--warningIcon--Mgr5O";var sD=n(612325);let sF=new nn.JV,sK=new nn.Eq,sV=new nn.sX,sU=l.memo(function(){let e=(0,J.wA)(),t=(0,J.d4)(sG),n=(0,J.d4)(sY),r=(0,J.d4)(sZ),i=(0,J.d4)(s$),a=(0,J.d4)(sz),s=(0,J.d4)(sX),c=(0,sv.a2)(),d=(0,sv.R)(),p=(0,J.d4)(sJ),u=(0,J.d4)(sW),m=Object.keys(s).length>1,h=sj(),_=function(){let e=sj(),t=(0,J.d4)(sQ);return!!e&&!!t&&t.selectionOverrides[K.YnC.PROTOTYPE_INTERACTIONS]}(),E=(0,lb.q5)(),g=(0,so.U)(),v=l.useMemo(()=>new nn.cP(a),[a]),f=l.useCallback(e=>v.format(e),[v]),b=l.useRef(null),S=e=>{F.Y5.updateSelectionProperties({prototypeInteractions:e},{shouldCommit:tV.zk.NO_BUT_TRACK_AS_EDIT}),F.Y5.commit()},T=(0,sy.Zj)(Object.keys(s),a);return l.createElement(sR,{getNodeName:f},l.createElement(eh.Zk,{"data-onboarding-key":"prototypePanel",ref:b,"data-testid":"prototype-interaction-list"},l.createElement(sB,{interactionGroups:c,inheritedInternalInteractionGroups:d,mixed:m,isOrInInstance:h,openFile:E,dispatch:e,currentSelectedProperty:i,onChange:(e,l)=>{let r=e.map(e=>e.interactions).reduce((e,t)=>e.concat(t),[]),i=new Set,a=[];for(let e of r){let t=P.dI(e.id);if(t&&!i.has(t))a.push(e);else{if(!(t=K.glU.generateUniqueID()))continue;let n=P.sH(t);if(!n)continue;a.push({...e,id:n})}t&&i.add(t)}l===sm.J.NORMAL?a=[...a,...n]:l===sm.J.INHERITED_INTERNAL&&(a=[...t,...a]),S(a)},onAddProperty:e=>{e.stopPropagation();let l=[],r=[];for(let e of Object.keys(s)){let t=K.glU.generateUniqueID();if(!t)return;let n=P.sH(t);if(!n)return;let i={id:n,sourceNodeID:P.sH(e)??P.Hr,event:{interactionType:function(e){let t=new Set;for(let{event:n}of e)t.add(n.interactionType);for(let e of sq)if(!t.has(e))return e;return"ON_KEY_DOWN"}(c)}};i.stateManagementVersion=1,i.actions=[{connectionType:"NONE"}],l.push(i);let o=(0,su.kh)(a,e);r.push(o?o.guid:"")}let i=l.map(e=>ss.d({nodeID:e.sourceNodeID,interactionID:e.id}));if(i.length>0){K.glU.setSelectedInteractions(i);let e=Z.findDOMNode(b.current),t=(0,es.cn)(e);s4(new y.Mi(t.x,t.y+(0,o.jz)(sM.rightNavGridRowHeight)))}let d=[...t,...l,...n];g("prototype_interaction_added",{interactionCount:d.length,sourceTlfIds:JSON.stringify(r)}),S(d)},onDeleteProperty:(e,t)=>{let n=(t===sm.J.NORMAL?c:d).filter((t,n)=>e.has(n)),l=[];for(let e of n)l.push(...e.interactions);let r=s5(l);eP.l7.user("delete-prototype-interactions",()=>K.glU.deleteInteractions(r)),F.Y5.deselectProperty()},shouldIgnoreKeyboardEvents:r.length>0||i.type!==K.rrT.PROTOTYPE_INTERACTION&&i.type!==K.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,isValidPrototypingSourceSelected:p,showResetInteractionsButton:_,toggleScrollBehaviorPicker:()=>{if((null==u?void 0:u.id)===A.AO)e(w.XE());else{let t=Z.findDOMNode(b.current),n=(0,es.cn)(t);e(w.u1({id:A.AO,initialX:n.x,initialY:n.y}))}},headerAccessory:T&&l.createElement(sA,null)})))});function sB(e){let t=l.useRef(!1);return l.createElement(l.Fragment,null,l.createElement(sE.h6,{title:(0,T.t)("proto.title_interactions"),stylePickerShown:{isShown:!1},addProperty:e.onAddProperty,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker,hideAddButton:!e.isValidPrototypingSourceSelected,renderProperty:(n,r,i,a,o,s,c,d,p)=>l.createElement(sH,{interactionGroups:e.interactionGroups,interactionGroup:n,index:r,selected:i,hasFocus:o,isDragging:a,singletonRow:e.interactionGroups.length<=1,onMouseDown:c,onMouseMove:d,onMouseUp:p,dispatch:e.dispatch,category:sm.J.NORMAL,autoOpenVariablePicker:t,recordingKey:u.Pt("prototypeInteractionList",r),key:r}),openFile:e.openFile,onChange:t=>e.onChange(t,sm.J.NORMAL),currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:K.rrT.PROTOTYPE_INTERACTION,propertyList:e.interactionGroups,pickerShown:null,dispatch:e.dispatch,onDeleteProperty:t=>e.onDeleteProperty(t,sm.J.NORMAL),shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,recordingKey:"prototypeInteractionList",boldHeaderRow:e.interactionGroups.length>=1||e.inheritedInternalInteractionGroups.length>=1,showResetInteractionsButton:e.showResetInteractionsButton,onResetInteractions:eP.nc.user("reset-instance-interactions",()=>K.glU.resetSymbolOverrides(K.YnC.PROTOTYPE_INTERACTIONS)),headerAccessory:e.headerAccessory}),e.isOrInInstance&&e.inheritedInternalInteractionGroups.length>0&&l.createElement(eh.fI,null,l.createElement(eh.UZ,{className:"prototype_interaction_list--label--dGwgy"},(0,T.tx)("proto.interaction_list.variant_interactions"))),e.isOrInInstance&&l.createElement(sE.h6,{title:"",stylePickerShown:{isShown:!1},addProperty:tL.lQ,hideAddButton:!0,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker,renderProperty:(n,r,i,a,o,s,c,d,p)=>l.createElement(sH,{interactionGroups:e.inheritedInternalInteractionGroups,interactionGroup:n,index:r,selected:i,hasFocus:o,isDragging:a,singletonRow:e.inheritedInternalInteractionGroups.length<=1,onMouseDown:c,onMouseMove:d,onMouseUp:p,dispatch:e.dispatch,category:sm.J.INHERITED_INTERNAL,autoOpenVariablePicker:t,recordingKey:u.Pt("prototypeInheritedInternalInteractionList",r)}),openFile:e.openFile,onChange:t=>e.onChange(t,sm.J.INHERITED_INTERNAL),currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:K.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,propertyList:e.inheritedInternalInteractionGroups,pickerShown:null,dispatch:e.dispatch,onDeleteProperty:t=>e.onDeleteProperty(t,sm.J.INHERITED_INTERNAL),shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,recordingKey:u.Pt("prototypeInheritedInternalInteractionList")}))}function sH({interactionGroups:e,interactionGroup:t,index:n,hasFocus:r,isDragging:i,selected:o,singletonRow:s,onMouseDown:c,onMouseMove:d,onMouseUp:p,dispatch:m,category:h,recordingKey:_}){let E=(0,ay.GS)(),{getNodeName:y}=l.useContext(sx),g=(0,J.d4)(sZ),v=(0,sv.a2)(),f=(0,J.d4)(sW),b=(null==f?void 0:f.id)===A.o$?f:null,S=(0,J.d4)(sz),I=(0,tb.md)(sp.NE)?sK:sF,k=function(e,t){let n=new Set(t.map(e=>{let t=ss.s(e);return t?P.dI(t.interactionID):""}).filter(e=>""!==e));for(let t of e.interactions){let e=P.dI(t.id);if(e&&n.has(e))return!0}return!1}(t,g),N=l.useRef(null),C=l.useCallback(()=>{let e=Z.findDOMNode(N.current);s4((0,es.cn)(e))},[]),O=l.useCallback(()=>{K.glU.setSelectedInteractions([]),m(w.XE()),F.Y5.deselectProperty()},[m]),x=!1,R=null;for(let e of t.interactions)if(!R&&e.actions&&e.actions.length>0)R=e.actions[0];else if(s0(R,y,E)!=s0((e.actions??[])[0],y,E)){x=!0;break}let M=!1,L=!1;if(h===sm.J.NORMAL){for(let e of t.interactions){if(!e.actions||0===e.actions.length)continue;let t=e.actions[0];if(!t||"SWAP_STATE"!==t.navigationType)continue;let n="";if(t.transitionNodeID){let e=S.get(P.dI(t.transitionNodeID));if(e){if(e.isState)n=e.parentGuid||"";else{M=!0;break}}}let l=K.glU.getContainingStateGroupOrSelf(P.dI(e.sourceNodeID??P.Hr))||"";if(""===l||""!==n&&l!==n){M=!0;break}}let n=["ON_CLICK","MOUSE_DOWN","MOUSE_UP"].includes(t.event.interactionType??""),l=e.some(e=>"ON_HOVER"===e.event.interactionType);L=n&&l}M=h!==sm.J.INHERITED_INTERNAL&&M;let D=function(e,t,n){if(e!==sm.J.INHERITED_INTERNAL)return null;let l=n.find(e=>e.key===t.key&&e.interactions.length===t.interactions.length&&1===t.interactions.length&&function(e,t){let n=void 0!==e.actions&&e.actions.length>=1,l=void 0!==t.actions&&t.actions.length>=1;if(!n||!l)return!1;let r=e.actions.every(e=>"UPDATE_MEDIA_RUNTIME"===e.connectionType),i=e.actions.every(e=>P.fn(e.transitionNodeID));var a=!1;for(let e of t.actions)if("INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType){a=!0;break}return r&&i&&a}(e.interactions[0],t.interactions[0]));return(null==l?void 0:l.interactions[0])??null}(h,t,e),V=(0,iT.ZC)(D),U=(0,so.U)();l.useEffect(()=>{var e,n;null===V&&D&&U("prototype_interaction_conflict_override_created",{interaction_type:null==(e=t.interactions[0].event)?void 0:e.interactionType,action_type:null==(n=D.event)?void 0:n.interactionType})});let B=h===sm.J.INHERITED_INTERNAL&&v.some(e=>e.key===t.key)&&!D,H=o&&r,G=k&&!o;return l.createElement("div",null,l.createElement(iz.e,{ref:N,className:E?"prototype_interaction_list--interactionListRow---i0Rg ui3_rows--ui3OneInputOneIconRow--SMoQ9 ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu":void 0,"data-testid":`prototypeInteractionItem-${n}`,selected:H,selectedSecondary:G,singletonRow:s,dragging:i,onMouseDown:c,onMouseMove:d,onMouseUp:p,onMouseEnter:()=>{let e=s5(t.interactions);K.glU.hoverInteractions(e)},onMouseLeave:()=>{K.glU.hoverInteractions([])},recordingKey:u.Pt(_,"draggableRow")},l.createElement(ef.D8,{className:a()({"prototype_interaction_list--interactionButton--q-58Q":!0,"prototype_interaction_list--interactionButtonSelected--8YX9A":H,"prototype_interaction_list--interactionButtonSelectedSecondary--Nx73L":G}),onClick:n=>{if(!N)return;let l=s1(t);if(n.metaKey||n.ctrlKey)k?l=g.filter(e=>!l.includes(e)):l.push(...g);else if(n.shiftKey){var r;let n,i;let a=(r=t.key,e.findIndex(({key:e})=>e===r));if(-1===a)return;let o=function(e,t){let n=1/0,l=e;for(let r of t){let t=Math.abs(e-r);t<n&&(l=r,n=t)}return l}(a,function(e,t){let n=new Set,l=new Set(t);for(let t=0;t<e.length;t++)s1(e[t]).some(e=>l.has(e))&&n.add(t);return n}(e,g)),s=(n=a,i=o,a>o&&(n=o,i=a),e.slice(n,i+1));for(let e of(l=[...g],s))l.push(...s1(e))}K.glU.setSelectedInteractions(l),F.Y5.updateAppModel({currentSelectedProperty:{type:h===sm.J.NORMAL?K.rrT.PROTOTYPE_INTERACTION:K.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,indices:[]}}),l.length?b&&b.shouldPin||C():O()},onMouseDown:e=>{e.stopPropagation()},recordingKey:_},M?l.createElement(eb.B,{className:sL,svg:sD.A,"data-tooltip-type":eo.Ib.SPECIAL,"data-tooltip":s_,"data-tooltip-text":(0,T.t)("proto.prototype_panel.this_interaction_must_swap_from_a_variant_to_another_variant_within_the_same_component_set_tooltip")}):L?l.createElement(eb.B,{className:sL,svg:sD.A,"data-tooltip-type":eo.Ib.SPECIAL,"data-tooltip":s_,"data-tooltip-text":(0,T.t)("proto.prototype_panel.prototype_multiple_interactions_mouse_and_hover_tooltip")}):B&&l.createElement(eb.B,{className:sL,svg:sD.A,"data-tooltip-type":eo.Ib.SPECIAL,"data-tooltip":s_,"data-tooltip-text":(0,T.t)("proto.prototype_panel.this_interaction_will_not_be_triggered_as_interactions_on_instances_are_triggered_before_inherited_internal_interactions_tooltip")}),l.createElement("div",{className:L||M||B?"prototype_interaction_list--interactionNameShort--5UMLL prototype_interaction_list--interactionName--zQsSL":"prototype_interaction_list--interactionName--zQsSL"},function(e,t){let n=t.format(e.interactionType??"NONE");if("ON_KEY_DOWN"===e.interactionType&&e.keyTrigger&&e.keyTrigger.keyCodes){let t=(0,sg._i)(e.keyTrigger.keyCodes),l=(0,sg.E8)(e.keyTrigger,!0);if("KEYBOARD"===e.keyTrigger.triggerDevice&&t)return n+" ("+(0,sg.U8)(t)+")";if(l)return n+" ("+l+")"}return n}(t.event,I)),l.createElement(sc.t,{className:"prototype_interaction_list--actionIcon--x-haP",svg:x?(0,sd.Yb)("NONE"):(0,sd.Yb)((0,nn.mj)(R))}),l.createElement("div",{className:"prototype_interaction_list--targetText--UMXyE",dir:"auto"},x?(0,T.t)("proto.variant_actions.mixed"):h===sm.J.INHERITED_INTERNAL?(0,T.t)("proto.variant_actions.change_to"):s0(R,y,E))),l.createElement("span",{className:"prototype_interaction_list--removeButton--g6aiQ"},l.createElement(ey.K,{as:"button",onClick:e=>{e.stopPropagation();let n=s5(t.interactions);eP.l7.user("delete-prototype-interactions",()=>K.glU.deleteInteractions(n)),F.Y5.deselectProperty(),F.Y5.commit()},onMouseDown:e=>{e.stopPropagation()},"aria-label":(0,T.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:u.Pt(_,"removeButton")},l.createElement(el.U,{svg:oX.A,fallbackSvg:oQ.A},l.createElement(oz.O,null))))))}function sG(e){return e.mirror.selectionProperties.prototypeInteractions||[]}function sY(e){return e.mirror.selectionProperties.prototypeInheritedInternalInteractions||[]}function sW(e){return e.pickerShown}function s$(e){return e.mirror.appModel.currentSelectedProperty}function sz(e){return e.mirror.sceneGraph}function sX(e){return e.mirror.sceneGraphSelection}function sQ(e){return e.mirror.selectionProperties.resettableInstanceOverrides}function sZ(e){return e.mirror.appModel.selectedInteractions}function sJ(e){return e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0}function sj(){let e=(0,J.d4)(sX),t=(0,J.d4)(sz);for(let n of Object.keys(e)){let e=t.get(n);if(e&&("INSTANCE"===e.type||e.isInstanceSublayer))return!0}return!1}let sq=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"];function s0(e,t,n){let l=new nn.js(n);if(!e)return l.format("NONE");let r=(0,nn.mj)(e);switch(r){case"NONE":case"GO_BACK":case"CLOSE_OVERLAY":case"SET_VARIABLE":case"SET_VARIABLE_MODE":case"CONDITIONAL":return l.format(r);case"OPEN_URL":if(null!=e.connectionURL){if((0,B.gl)(e.connectionURL))return(0,T.t)("fullscreen.mixed");return e.connectionURL.replace(/https?:\/\//,"")}return l.format("NONE");case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":case"UPDATE_MEDIA_SKIP_TO":return sV.format(e)}return e.transitionNodeID?(0,B.gl)(e.transitionNodeID)?(0,T.t)("fullscreen.mixed"):t(P.dI(e.transitionNodeID)):l.format("NONE")}function s1(e){return e.interactions.filter(e=>e.id&&e.sourceNodeID).map(e=>ss.d({nodeID:e.sourceNodeID,interactionID:e.id}))}function s5(e){let t=[];for(let n of e){let{sourceNodeID:e,id:l}=n;e&&l&&t.push(ss.d({nodeID:e,interactionID:l}))}return t}function s4(e){F.Y5.triggerAction("show-prototype-interaction-edit-modal",{args:{source:K.yxn.PROPERTIES_PANEL,x:e.x,y:e.y}})}var s3=n(101505),s2=n(509453),s6=n(994481);class s8 extends u.o6{render(){return l.createElement(eh.Zk,null,l.createElement(eh.fI,null,l.createElement(eh.xw,null,(0,T.tx)("proto.menu.background"))),l.createElement(s7,{...this.props}))}}function s7(e){let t=l.useRef(null),n=l.useRef(null),r=(0,ay.GS)(),{dispatch:i,pickerShown:a,prototypeBackgroundColor:o}=e,s=l.useCallback(()=>{let e=r?Z.findDOMNode(n.current):Z.findDOMNode(t.current);if(a&&a.id===A.$T)i(w.XE());else if(e&&e instanceof HTMLElement){let t=(0,es.cn)(e);i(w.u1({id:A.$T,initialX:t.x,initialY:t.y}))}},[i,a,r]),c=l.useCallback((e,t)=>{i((0,sb._P)({name:"Prototype Background Modified"})),F.Y5.updateSelectionProperties({prototypeBackgroundColor:e},{shouldCommit:t})},[i]),d=(0,B._W)(o,{r:0,g:0,b:0,a:1}),p=l.createElement("div",{className:"prototype_background_panel--colorValueContainer--CEbzl paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},l.createElement(nM.J,{onClick:s,color:d,opacity:d.a,recordingKey:u.Pt(e,"chit"),className:"prototype_background_panel--chit--F--d0 paint_panels--chit--twQEy"}),l.createElement(on.AN,{className:"prototype_background_panel--color--e5Pc8 paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:tI.TI,property:d,onChange:c,recordingKey:u.Pt(e,"colorInput"),noBorderOnFocus:!0}));return l.createElement(l.Fragment,null,r?l.createElement(s6.TN,{ref:n},p):l.createElement(eh.fI,{ref:t,className:"prototype_background_panel--colorRow--MtNeY"},p),a&&a.id===A.$T&&l.createElement(ot.sk,{disabledVariableIds:new Set,title:(0,T.t)("proto.menu.background"),initialPosition:new y.Mi(a.initialX??0,a.initialY??0),color:d,boundVariable:null,onChange:c,recordingKey:u.Pt(e,"colorPicker")}))}s8.displayName="PrototypeBackgroundPanel";var s9=n(992271),ce=n(410465),ct=n(371435),cn=n(761725);let cl="prototype_device_panel--deviceSelect--wnOgI",cr="prototype_device_panel--deviceDropdown--ufbuZ",ci="prototype_device_panel--deviceOption--rvW-q",ca="prototype_device_panel--inactiveLabel--UEKyk prototype_device_panel--activeLabel--l162n",co="prototype_device_panel--labelInactive--pv4Sf",cs="prototype_device_panel--deviceDropdownChevron--kq9TV",cc="prototype_device_panel--deviceDropdownInput--AxG9E";var cd=n(537545),cp=n(64111);class cu extends ce.I{}class cm extends ce.Y{}class ch extends l.PureComponent{constructor(){super(...arguments),this.deviceInfo=()=>s9.hY[this.props.prototypeDevice.presetIdentifier],this.shouldShowModelDropdown=()=>{let e=this.deviceInfo();return s9.yr[(null==e?void 0:e.deviceName)||""].length>1},this.onModelChange=e=>{if(!this.deviceInfo())return;let t=s9.hY[e];if(!t)return;let n=this.props.prototypeDevice.rotation;F.Y5.updateSelectionProperties({prototypeDevice:{type:"PRESET",size:t.framePresetSize,presetIdentifier:e,rotation:n}})},this.renderModelDropdown=(e,t,n)=>{if(!e)return;let r=l.createElement(cb,{dispatch:this.props.dispatch,presetIdentifier:this.deviceInfo().presetIdentifier,dropdownShown:this.props.dropdownShown,onChange:this.onModelChange,recordingKey:u.Pt(this.props,"modelDropdown")}),i=t?l.createElement(s6.dx,{left:r,right:n}):l.createElement(s6.TN,null,r);return l.createElement("div",null,!this.props.isUI3&&l.createElement(eh.hl,null,l.createElement(eh.UZ,{className:co},(0,T.tx)("presets.device_panel.model"))),this.props.isUI3?i:l.createElement(eh.fI,null,r))},this.cssForCurrentDeviceRotation=()=>{if("NONE"===this.props.prototypeDevice.type)return;let e="";switch("MICROSOFT_SURFACE_PRO_4"===this.props.prototypeDevice.presetIdentifier&&(e="scale(0.65)"),this.props.prototypeDevice.rotation){case"NONE":default:return;case"CCW_90":return`rotate(-90deg) ${e}`}},this.renderDevicePreview=()=>{let e=this.deviceInfo();if(!e)return;let t=(0,B._W)(this.props.prototypeBackgroundColor,{r:0,g:0,b:0,a:0}),n=tI.z5.format(t),r=t.r>.9&&t.g>.9&&t.b>.9,i=`1px solid ${r?"#EFEFEF":"transparent"}`,a=l.createElement("div",{className:"prototype_device_panel--devicePreview--T2Tzn",style:{backgroundColor:n,border:i}},l.createElement("img",{className:"prototype_device_panel--deviceImage--Wpr8Y",src:e.thumbnailUrl,style:{transform:this.cssForCurrentDeviceRotation()},alt:`${e.getI18nDeviceName()}`}));return l.createElement("div",null,!this.props.isUI3&&l.createElement(eh.hl,null,l.createElement(eh.UZ,{className:co},(0,T.tx)("presets.device_panel.preview"))),this.props.isUI3?l.createElement(s6.TN,{appendedClassName:cn.Rk},a):l.createElement("div",{className:"prototype_device_panel--devicePreviewContainer--pC-H4"},a))},this.onChangeOrientation=e=>{let t=this.props.prototypeDevice;if("NONE"===t.type)return;let n=t.size.y>t.size.x,l=t.rotation;l=n?"PORTRAIT"===e?"NONE":"CCW_90":"PORTRAIT"===e?"CCW_90":"NONE",F.Y5.updateSelectionProperties({prototypeDevice:{...t,rotation:l}})},this.currentDeviceOrientation=()=>{let e=this.props.prototypeDevice;return"NONE"===e.type?"PORTRAIT":e.size.y>e.size.x?"NONE"===e.rotation?"PORTRAIT":"LANDSCAPE":"NONE"===e.rotation?"LANDSCAPE":"PORTRAIT"}}render(){let e=this.props.prototypeDevice,t=l.createElement(cg,{dispatch:this.props.dispatch,prototypeDevice:this.props.prototypeDevice,isUI3:this.props.isUI3,dropdownShown:this.props.dropdownShown,recordingKey:u.Pt(this.props,"deviceDropdown")}),n=l.createElement(cu,{property:this.currentDeviceOrientation(),onChange:this.onChangeOrientation,recordingKey:u.Pt(this.props,"orientationControl"),className:"prototype_device_panel--orientationControl--YdZ-v"},l.createElement(cm,{value:"PORTRAIT",svg:cp.A}),l.createElement(cm,{value:"LANDSCAPE",svg:cd.A})),r=(0,s9.$X)(e.type||"NONE",e.presetIdentifier),i=l.createElement(eh.fI,null,t,r&&n),a=this.deviceInfo()&&this.shouldShowModelDropdown(),o=r&&!a?l.createElement(s6.dx,{left:t,right:n}):l.createElement(s6.TN,null,t),s=l.createElement(c_,{prototypeDevice:this.props.prototypeDevice,dispatch:this.props.dispatch,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:u.Pt(this.props,"deviceSizeInputs")});return l.createElement(eh.Zk,null,l.createElement(eh.fI,{className:"prototype_device_panel--panelTitleRowOuter--wkKKy collapsible_property_panel--panelTitleRowOuter--i5K0R"},l.createElement(eh.xw,{extended:this.props.isUI3},this.props.isUI3?(0,T.tx)("presets.device_panel.prototype_settings"):(0,T.tx)("presets.device_panel.device"))),this.props.isUI3?o:i,this.renderModelDropdown(!!a,r,n),this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s,this.props.isUI3&&l.createElement(s7,{pickerShown:this.props.pickerShown,dispatch:this.props.dispatch,prototypeBackgroundColor:this.props.prototypeBackgroundColor,recordingKey:u.Pt(this.props,"backgroundPanel")}),this.renderDevicePreview(),!this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s)}}function c_(e){let t=l.useCallback(t=>{F.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:t,y:e.prototypeDevice.size.y},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.y,e.prototypeDevice.rotation]),n=l.useCallback(t=>{F.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:e.prototypeDevice.size.x,y:t},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.x,e.prototypeDevice.rotation]),r=l.createElement(nr.$j,{className:"prototype_device_panel--scrubbableInputLeftCol--P2T66 prototype_device_panel--scrubbableInput--0TFVb",inputClassName:"prototype_device_panel--leftColInput--pAJSy prototype_device_panel--input--vNirJ",dispatch:e.dispatch,value:e.prototypeDevice.size.x,onValueChange:t,smallNudgeAmount:e.smallNudgeAmount,bigNudgeAmount:e.bigNudgeAmount,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("presets.device_panel.device_width_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:u.Pt(e,"deviceWidth")},l.createElement("span",{className:ca},(0,T.tx)("proto.device_panel.width"))),i=l.createElement(nr.$j,{className:"prototype_device_panel--scrubbableInput--0TFVb",inputClassName:"prototype_device_panel--input--vNirJ",dispatch:e.dispatch,value:e.prototypeDevice.size.y,onValueChange:n,smallNudgeAmount:e.smallNudgeAmount,bigNudgeAmount:e.bigNudgeAmount,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("presets.device_panel.device_height_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:u.Pt(e,"deviceHeight")},l.createElement("span",{className:ca},(0,T.tx)("proto.device_panel.height")));return(0,ay.GS)()?l.createElement(s6.dx,{left:r,right:i}):l.createElement(eh.fI,null,r,i)}ch.displayName="PrototypeDevicePanel";class cE extends no.l6{}class cy extends no.c${}class cg extends u.o6{constructor(){super(...arguments),this.formatter={format:e=>"NONE"===e?this.props.isUI3?(0,T.t)("proto.frame_preset_panel.no_device"):(0,T.t)("proto.frame_preset_panel.none"):"CUSTOM"===e?(0,T.t)("proto.frame_preset_panel.custom_size"):"PRESENTATION"===e?(0,T.t)("proto.frame_preset_panel.presentation"):e.getI18nDeviceName(),isEqual:(e,t)=>"NONE"===e||"CUSTOM"===e||"PRESENTATION"===e||"NONE"===t||"CUSTOM"===t||"PRESENTATION"===t?e===t:e.presetIdentifier===t.presetIdentifier},this.onChange=e=>{(0,sb.$J)(e,this.props.prototypeDevice);let t=this.props.prototypeDevice.type,n=t;n="NONE"===e?"NONE":"PRESENTATION"===e?"PRESENTATION":"CUSTOM"===e?"CUSTOM":"PRESET",this.props.dispatch((0,sb._P)({name:"Prototype Device Type Changed",params:{oldType:this.props.prototypeDevice.presetIdentifier||t,newType:e.presetIdentifier||n,isInlinePreviewOpened:tb.zl.get(ct.h).modalStatus===ct.b.OPEN}}))},this.renderPresetOption=(e,t)=>{let n=(0,s9.Fh)(e,this.props.prototypeDevice);if(null===n)return null;let r=n.framePresetSize;return l.createElement(cy,{value:n,key:t,recordingKey:u.Pt(this.props,n.deviceName)},l.createElement("div",{className:ci},l.createElement("span",null,n.getI18nDeviceName()),l.createElement("span",null,r.x,"\u200A\xd7\u200A",r.y)," "))}}render(){let e;return e="NONE"===this.props.prototypeDevice.type?"NONE":"PRESENTATION"===this.props.prototypeDevice.type?"PRESENTATION":"CUSTOM"===this.props.prototypeDevice.type?"CUSTOM":s9.hY[this.props.prototypeDevice.presetIdentifier]||"NONE",l.createElement(cE,{className:cl,chevronClassName:cs,inputClassName:cc,id:"prototype-device-select",property:e,formatter:this.formatter,onChange:this.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownClassName:cr,recordingKey:u.Pt(this.props,"select")},l.createElement(cy,{value:"NONE",recordingKey:u.Pt(this.props,"NONE")}),l.createElement(no.sK,null),s9.r6.map(this.renderPresetOption),l.createElement(no.sK,null),s9.J_.map(this.renderPresetOption),l.createElement(no.sK,null),s9.AG.map(this.renderPresetOption),l.createElement(no.sK,null),s9.$w.map(this.renderPresetOption),l.createElement(no.sK,null),l.createElement(cy,{value:"CUSTOM",recordingKey:u.Pt(this.props,"CUSTOM")},l.createElement("div",{className:ci},l.createElement("span",null,(0,T.tx)("proto.frame_preset_panel.custom_size")),l.createElement("span",null,(0,T.tx)("proto.frame_preset_panel.fit")))),l.createElement(cy,{value:"PRESENTATION",recordingKey:u.Pt(this.props,"PRESENTATION")},l.createElement("div",{className:ci},l.createElement("span",null,(0,T.tx)("proto.frame_preset_panel.presentation")),l.createElement("span",null,(0,T.tx)("proto.frame_preset_panel.fill")))),l.createElement(no.sK,null),s9.dr.map(this.renderPresetOption))}}cg.displayName="DeviceDropdown";class cv extends no.l6{}class cf extends no.c${}class cb extends u.o6{constructor(){super(...arguments),this.formatter={format:e=>{let t=s9.hY[e];return t?t.getI18nStyleName():(0,T.t)("proto.frame_preset_panel.missing")},isEqual:(e,t)=>e===t},this.renderStyleOption=(e,t)=>{let n=e.presetIdentifier;return l.createElement(cf,{value:n,key:t,recordingKey:u.Pt(this.props,n)},s9.hY[n].getI18nStyleName())}}render(){let e=s9.hY[this.props.presetIdentifier];if(!e)return null;let t=s9.yr[e.deviceName],n=this.props.presetIdentifier;return l.createElement(cv,{className:cl,chevronClassName:cs,inputClassName:cc,id:"prototype-style-select",property:n,formatter:this.formatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownClassName:cr,recordingKey:u.Pt(this.props,"select")},t.map(this.renderStyleOption))}}cb.displayName="ModelDropdown";var cS=n(386560),cP=n(171975);function cT(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M14 7.879V6a1 1 0 0 0-1.707-.707L9.586 8H6.5A1.5 1.5 0 0 0 5 9.5v5a1.5 1.5 0 0 0 .974 1.405L6.879 15H6.5a.5.5 0 0 1-.5-.5v-5a.5.5 0 0 1 .5-.5H10l2-2 1-1v2.879l1-1Zm0 4.242-1 1V18l-1-1-1.44-1.44-.706.708 2.439 2.44A1 1 0 0 0 14 18v-5.879Zm3.854-5.975a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.707l11-11a.5.5 0 0 1 .708 0ZM15.5 10.677v-.056l.681-.68A2.999 2.999 0 0 1 15.5 14.6v-1.277c.311-.352.5-.816.5-1.323s-.189-.97-.5-1.323ZM18 12a3.987 3.987 0 0 0-1.112-2.767l.708-.707a5.002 5.002 0 0 1-2.096 8.246V15.71A4.001 4.001 0 0 0 18 12Z",clipRule:"evenodd"}))}var cw=n(553738),cI=n(647215),ck=n(477633),cN=n(564734),cC=n(68710),cA=n(632319);function cO({videoPlayback:{mediaLoop:e,muted:t}}){let n=null;return(0,B.gl)(e)&&(0,B.gl)(t)?n=(0,T.tx)("proto.prototype_panel.replace_mixed_muted_and_loop_video_playback",{loopSvg:l.createElement(eb.B,{svg:ck.A,className:cI.eT}),speakerSvg:l.createElement(eb.B,{svg:cC.A,className:cI.To})}):(0,B.gl)(e)?n=(0,T.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:l.createElement(eb.B,{svg:ck.A,className:cI.eT})}):(0,B.gl)(t)&&(n=(0,T.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:l.createElement(eb.B,{svg:cC.A,className:cI.To})})),n?l.createElement(eh.fI,null,l.createElement(eh.UZ,{className:cI.pc},n)):null}let cx=e=>(0,B.gl)(e)?"mixed":e,cR=e=>!0===e,cM=function(e){let t=()=>{let t=!cR(e.videoPlayback.mediaLoop);e.updateSelectionProperties({videoMediaLoop:t}),e.dispatch((0,sb._P)({name:"Node video loop changed",params:{newLoop:t,oldLoop:cx(e.videoPlayback.mediaLoop),numVideosSelected:e.videoPlayback.numVideosSelected}}))},n=()=>{let t=!e.videoPlayback.muted;e.updateSelectionProperties({videoMuted:t}),e.dispatch((0,sb._P)({name:"Node video muted changed",params:{newMuteValue:t,oldMuteValue:cx(e.videoPlayback.muted),numVideosSelected:e.videoPlayback.numVideosSelected}}))},r=l.createElement("span",{className:(0,ay.GS)()?void 0:cI.hW},l.createElement(lu.S,{label:l.createElement(n9.J,{"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.default_video_playback_state")},(0,T.tx)("proto.prototype_panel.autoplay")),onChange:t=>{e.updateSelectionProperties({videoAutoplay:t}),e.dispatch((0,sb._P)({name:"Node video autoplay Changed",params:{newAutoplay:t,oldAutoplay:cx(e.videoPlayback.autoplay),numVideosSelected:e.videoPlayback.numVideosSelected}}))},checked:cR(e.videoPlayback.autoplay),mixed:(0,B.gl)(e.videoPlayback.autoplay)})),i=(0,ay.GS)()?l.createElement(cP.f,{checked:cR(e.videoPlayback.mediaLoop),mixed:(0,B.gl)(e.videoPlayback.mediaLoop),onIcon:l.createElement(el.U,{svg:ck.A},l.createElement(lm,null)),offIcon:l.createElement(el.U,{svg:cN.A},l.createElement(lh,null)),onChange:t,recordingKey:u.Pt(e,"videoLoopToggle"),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.loop"),"aria-label":(0,T.t)("proto.prototype_panel.loop")}):l.createElement(cw.m,{toggled:cR(e.videoPlayback.mediaLoop),svg:e.videoPlayback.mediaLoop?ck.A:cN.A,fallbackSvg:e.videoPlayback.mediaLoop?ck.A:cN.A,onMouseDown:t,recordingKey:u.Pt(e,"videoLoopToggle"),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.loop"),dataTestId:"videoLoopToggle",className:cI.BM}),a=(0,ay.GS)()?l.createElement(cP.f,{checked:cR(!e.videoPlayback.muted),mixed:(0,B.gl)(e.videoPlayback.muted),onIcon:l.createElement(el.U,{svg:cC.A},l.createElement(l_.L,null)),offIcon:l.createElement(el.U,{svg:cA.A},l.createElement(cT,null)),onChange:n,recordingKey:u.Pt(e,"videoSoundToggle"),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.sound"),"aria-label":(0,T.t)("proto.prototype_panel.sound")}):l.createElement(cw.m,{toggled:!e.videoPlayback.muted,svg:cR(e.videoPlayback.muted)?cA.A:cC.A,fallbackSvg:cR(e.videoPlayback.muted)?cA.A:cC.A,onMouseDown:n,recordingKey:u.Pt(e,"videoSoundToggle"),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.sound"),dataTestId:"videoSoundToggle",className:cI.BM}),o=(0,ay.GS)()?l.createElement(eE.pG,{input:r,leftIcon:i,rightIcon:a}):l.createElement(eh.fI,{className:cI.kh},r,l.createElement("div",{className:cI.zc},i,a));return l.createElement(eh.Zk,null,l.createElement(eh.fI,null,l.createElement(eh.xw,{extended:!0},(0,T.tx)("proto.prototype_panel.video"))),o,l.createElement(cO,{videoPlayback:e.videoPlayback}))};var cL=n(420450),cD=n(955136);function cF(e){let{type:t}=e;return l.createElement("div",{className:tT.cx.flex.justifyCenter.itemsCenter.$},l.createElement(eb.B,{className:tT.cx.flexGrow1.mx12.$,useOriginalSrcFills_DEPRECATED:!0,svg:"horizontal"===t?cL.A:cD.A}),l.createElement("span",{className:tT.cx.flexGrow1.m6.$,style:{maxWidth:144}},(0,T.tx)("proto.prototype_panel.content_needs_to_be_bigger_than_the_frame_tooltip")))}let cK=(0,sh.ex)("prototype_scroll_horizontal_info",cF,()=>({type:"horizontal",unconstrainWidth:!0})),cV=(0,sh.ex)("prototype_scroll_vertical_info",cF,()=>({type:"vertical",unconstrainWidth:!0})),cU="scroll_behavior_panel--inactiveLabel--IexW8",cB="scroll_behavior_panel--inactiveLabelContainer--lQjAi";var cH=n(591363);function cG(e){let{scrollDirection:t,showScrollWarning:n,disableOverflowBehaviorItem:r,dropdownShown:i,updateSelectionProperties:a}=e,o=(0,J.wA)(),[s,c]=function(){let e=(0,nl.J2)(K.Ez5.propertiesPanelState().shownPropertiesPanels)[K.ibQ.OVERFLOW_ITEM],t=(0,tF.kl)("isSection"),n=(0,tF.kl)("anyTopLevelFramesInSelection");return[e,!t&&!n]}(),d=(0,ay.GS)()?l.createElement(np.mS,{titleTx:(0,T.tx)("proto.scroll_panel.scroll_behavior_title")}):l.createElement(eh.fI,null,l.createElement(eh.xw,{className:"scroll_behavior_panel--panelTitle--kN-Nl"},(0,T.tx)("proto.scroll_panel.scroll_behavior_title")));return s||c?l.createElement(tP.p,{name:"scroll_behavior_panel"},l.createElement(eh.Zk,null,d,c&&l.createElement(eh.fI,null,l.createElement("div",{className:cB},l.createElement("span",{className:cU},(0,T.tx)("proto.scroll_panel.position_dropdown.position"))),l.createElement(cZ,{recordingKey:u.Pt(e,"scrollBehavior"),dropdownShown:i})),s&&l.createElement(eh.fI,null,l.createElement("div",{className:cB},l.createElement("span",{className:cU},(0,T.tx)("proto.scroll_panel.overflow_dropdown.overflow"))),n&&l.createElement(eb.B,{className:"scroll_behavior_panel--infoIcon--FeXbf",svg:cH.A,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":eo.Ib.SPECIAL,"data-tooltip":"HORIZONTAL"===t?cK:cV,"data-tooltip-show-immediately":!0}),l.createElement(cz,{className:n?"scroll_behavior_panel--scrollDirectionShort--w6iSo":"scroll_behavior_panel--scrollDirection--XSmzK",property:t,dispatch:o,dropdownShown:i,onChange:e=>{o((0,sb._P)({name:"Overflow Behavior changed",params:{newDirection:e,oldDirection:(0,B._W)(t,"MIXED")}})),a({scrollDirection:e})},disabled:r,recordingKey:u.Pt(e,"scrollDirection")})))):null}class cY extends no.c${}class cW extends no.l6{}let c$=["NONE","HORIZONTAL","VERTICAL","BOTH"];class cz extends l.PureComponent{render(){return l.createElement(cW,{id:"scroll-direction-select",className:this.props.className,chevronClassName:"scroll_behavior_panel--scrollDirectionChevron--5keRt",inputClassName:"scroll_behavior_panel--scrollDirectionInput--vJSqu",property:this.props.property||"NONE",formatter:nn.Rk,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,disabled:this.props.disabled,recordingKey:this.props.recordingKey,dataTestId:"scroll-direction-dropdown"},c$.map(e=>l.createElement(cY,{key:e,value:e,recordingKey:u.Pt(this.props,e)})))}}cz.displayName="ScrollDirectionDropdown";class cX extends no.l6{}class cQ extends no.c${}function cZ(e){let t=(0,J.wA)(),n=(0,tF.kl)("scrollBehavior"),{fixedScrollingDisabled:r}=(0,ra.R)(e=>{let t=e.mirror.selectionProperties;return{fixedScrollingDisabled:!t.nodesAreAllNotInStacksOrAbsolutePositioned||!t.allHaveScrollableFrameAsParent}}),i="scroll-behavior-select",a=e.dropdownShown&&e.dropdownShown.type===i?nn.Ge:nn.wi;return l.createElement(cX,{id:i,className:"scroll_behavior_panel--scrollPosition--YAyUM",formatter:a,property:n||"SCROLLS",onChange:e=>{t((0,sb._P)({name:"Node Scroll Behavior Changed",params:{newValue:e}}));let n="FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"===e?K.KjJ.FIXED:"STICKY_SCROLLS"===e?K.KjJ.STICKY_SCROLLS:K.KjJ.SCROLLS;eP.l7.user("set-scroll-behavior",()=>K.X3B.aggressivelySetScrollBehaviorOfSelection(n)),F.Y5.commit()},dispatch:t,dropdownShown:e.dropdownShown,dropdownClassName:"scroll_behavior_panel--fullWidth--reSmx",recordingKey:e.recordingKey,disabled:e.disabled,dataTestId:"scroll-behavior-dropdown"},l.createElement(cQ,{value:"SCROLLS"}),l.createElement(cQ,{value:"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME",disabled:r}),l.createElement(cQ,{value:"STICKY_SCROLLS"}))}var cJ=n(105020),cj=n(548183),cq=n(854547),c0=n(654784),c1=n(351731);function c5(){return l.createElement(o0.u,{idForTests:"create-connection-hint",title:(0,T.t)("proto.onboarding.creating_a_connection"),userFlag:"dismissed_create_connection_hint",icon_DEPRECATED:cq.A,iconFallback:c0.A,hintText:(0,T.t)("proto.onboarding.select_a_frame_or_object_hint")})}function c4(){return l.createElement(o0.u,{idForTests:"delete-connection-hint",title:(0,T.t)("proto.onboarding.removing_a_connection"),userFlag:"dismissed_delete_connection_hint",icon_DEPRECATED:cJ.A,iconFallback:cj.A,hintText:(0,T.t)("proto.onboarding.to_delete_a_connection_click_and_drag_on_either_end")})}function c3(){return l.createElement(o0.u,{idForTests:"play-button-hint",title:(0,T.t)("proto.onboarding.running_your_prototype"),userFlag:"dismissed_play_button_hint",icon_DEPRECATED:c1.A,hintText:(0,T.t)("proto.onboarding.use_the_play_button_hint")})}function c2({dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:r}){let i=0===r&&!e,a=0!==r&&!t,o=!n,s=l.useMemo(()=>i?s3.c.CREATING_A_CONNECTION:a?s3.c.REMOVING_A_CONNECTION:o?s3.c.RUNNING_YOUR_PROTOTYPE:null,[i,a,o]);return s?l.createElement(O.fu,{name:"Prototype Onboarding Hint Panel V1",properties:{trackingDescriptor:s}},l.createElement(eh.Zk,null,l.createElement("div",null,i&&l.createElement(c5,null),a&&l.createElement(c4,null),o&&l.createElement(c3,null)))):null}class c6 extends l.PureComponent{constructor(){super(...arguments),this.onClickShowPrototypeSettings=()=>{this.props.dispatch((0,sb._P)({name:"Show Prototype Settings Clicked"})),se.wr()}}renderOnboardingPanel(){let e=!!this.props.userFlags.dismissed_create_connection_hint,t=!!this.props.userFlags.dismissed_delete_connection_hint,n=!!this.props.userFlags.dismissed_play_button_hint,r=this.props.selectionProperties.numTransitionsOnCurrentPage;return l.createElement(c2,{dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:r})}renderPrototypeSettingsPanel(){return l.createElement(tP.p,{name:"show_prototype_settings_panel"},l.createElement(eh.Zk,{className:this.props.isUI3?to.rq:void 0},l.createElement(s2.z,{onClick:this.onClickShowPrototypeSettings,recordingKey:u.Pt(this.props,"prototypeSettingsButton")},(0,T.tx)("proto.menu.show_prototype_settings"))))}renderDevicePanel(){(0,lL.KF)((0,B.hS)(this.props.selectionProperties.prototypeDevice),"should not have mixed device selection");let e=(0,sb.Qx)(this.props.selectionProperties.prototypeDevice);return l.createElement(ch,{key:"device-panel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,prototypeBackgroundColor:this.props.selectionProperties.prototypeBackgroundColor,prototypeDevice:e,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:"devicePanel",isUI3:this.props.isUI3,pickerShown:this.props.pickerShown})}render(){var e;let t=!(0,B.hS)(this.props.selectionProperties.transitionNodeID)||P.fn((0,B.E7)(this.props.selectionProperties.transitionNodeID)),n=(null==(e=this.props.selectionProperties)?void 0:e.numSelected)??!1,r=!!this.props.selectionProperties.numVideosSelected,i=this.props.selectionProperties.isInstanceSelected||this.props.selectionProperties.isInstanceSublayerSelected,a=this.props.selectionProperties.prototypeStartingPointsInfo&&this.props.selectionProperties.prototypeStartingPointsInfo.length>0,o=!t,s=(this.props.selectionProperties.isValidPrototypingSourceSelected??!0)||this.props.selectionProperties.isSectionSelected&&(0,sy.YR)();if(!n)return l.createElement("div",null,this.renderDevicePanel(),!this.props.isUI3&&l.createElement(s8,{recordingKey:u.Pt(this.props,"backgroundPanel"),prototypeBackgroundColor:this.props.selectionProperties.prototypeBackgroundColor,pickerShown:this.props.pickerShown,dispatch:this.props.dispatch}),a&&l.createElement(th.A,null),o&&this.renderOnboardingPanel(),l.createElement(a9.Mw,{panelName:a9.ON.PROTOTYPE}));{let e=l.createElement(cG,{dropdownShown:this.props.dropdownShown,scrollDirection:this.props.selectionProperties.scrollDirection??"NONE",showScrollWarning:this.props.selectionProperties.showWontScrollWarning??!1,disableOverflowBehaviorItem:!!i,recordingKey:u.Pt(this.props,"scrollBehaviorPanel"),updateSelectionProperties:F.Y5.updateSelectionProperties});return l.createElement("div",null,this.props.selectionProperties.isTopLevelFrameAndValidPrototypeSourceSelected&&l.createElement(cS.A,{recordingKey:u.Pt(this.props,"startingPointPanel")}),s&&l.createElement(sU,null),e,r&&l.createElement(cM,{updateSelectionProperties:F.Y5.updateSelectionProperties,dispatch:this.props.dispatch,videoPlayback:function(e){let{videoMediaLoop:t,videoAutoplay:n,videoMuted:l,numVideosSelected:r}=e;return(0,lL.B1)(t),(0,lL.B1)(n),(0,lL.B1)(l),(0,lL.B1)(r),{autoplay:n,muted:l,mediaLoop:t,numVideosSelected:r}}(this.props.selectionProperties)}),this.renderPrototypeSettingsPanel(),o&&this.renderOnboardingPanel(),l.createElement(a9.Mw,{panelName:a9.ON.PROTOTYPE}))}}}c6.displayName="PrototypePanel";let c8=(0,O.kp)(function(e){let{bigNudgeAmount:t,smallNudgeAmount:n}=(0,V.sT)(),r=(0,ay.GS)();return l.createElement(c6,{...e,bigNudgeAmount:t,smallNudgeAmount:n,isUI3:r})},Q.e0.PROTOTYPE_PANEL);var c7=n(544403),c9=n(73163),de=n(139689),dt=n(146394),dn=n(155300);let dl={[K.eVK.TOP_LEFT]:"anchor_point_selector--apTopLeft--jsueH",[K.eVK.TOP_CENTER]:"anchor_point_selector--apTopMiddle--Wp-kD",[K.eVK.TOP_RIGHT]:"anchor_point_selector--apTopRight--mbC5X",[K.eVK.MIDDLE_LEFT]:"anchor_point_selector--apMiddleLeft--G-YlO",[K.eVK.MIDDLE_CENTER]:"anchor_point_selector--apMiddleMiddle--gut-r",[K.eVK.MIDDLE_RIGHT]:"anchor_point_selector--apMiddleRight--VZnhH",[K.eVK.BOTTOM_LEFT]:"anchor_point_selector--apBottomLeft--30X3n",[K.eVK.BOTTOM_CENTER]:"anchor_point_selector--apBottomMiddle--ySpzF",[K.eVK.BOTTOM_RIGHT]:"anchor_point_selector--apBottomRight--rXs-P"},dr={[K.eVK.TOP_LEFT]:"top_left",[K.eVK.TOP_CENTER]:"top_center",[K.eVK.TOP_RIGHT]:"top_right",[K.eVK.MIDDLE_LEFT]:"middle_left",[K.eVK.MIDDLE_CENTER]:"middle_center",[K.eVK.MIDDLE_RIGHT]:"middle_right",[K.eVK.BOTTOM_LEFT]:"bottom_left",[K.eVK.BOTTOM_CENTER]:"bottom_center",[K.eVK.BOTTOM_RIGHT]:"bottom_right"};function di(e){let{value:t,anchorPoint:n,onAnchorPointChange:r,disabled:i,dataTestId:o}=e,s=l.useCallback(()=>{r(t)},[r,t]),c=t===n;return l.createElement("button",{className:`anchor_point_selector--anchorPointButton--JCPGp ${dl[t]}`,onClick:s,disabled:i,"data-testid":o},l.createElement("div",{className:a()("anchor_point_selector--anchorPointButtonInner--LSo9Y",{"anchor_point_selector--apButtonActive--eNX6V":c,"anchor_point_selector--disabled--YCcFc":i}),"data-testid":c?`${o}.active`:void 0}))}let da=e=>"INPUT"===e.tagName;function ds(e){let{anchorPoint:t,onAnchorPointChange:n,disabled:r,restoreFocusElements:i}=e,[o,s]=l.useState(document.activeElement),c=e=>{n(e),o&&da(o)&&(null==i?void 0:i.includes(o))&&o.focus()};return l.createElement("div",{className:a()("anchor_point_selector--anchorPointSelector--ZC9rv",{"anchor_point_selector--anchorPointSelectorDisabled--JScxh":r}),onMouseDown:()=>{s(document.activeElement)}},l.createElement(l.Fragment,null,l.createElement(di,{disabled:r,value:K.eVK.TOP_LEFT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${dr[K.eVK.TOP_LEFT]}`}),l.createElement(di,{disabled:r,value:K.eVK.TOP_CENTER,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${dr[K.eVK.TOP_CENTER]}`}),l.createElement(di,{disabled:r,value:K.eVK.TOP_RIGHT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${dr[K.eVK.TOP_RIGHT]}`})),l.createElement(l.Fragment,null,l.createElement(di,{disabled:r,value:K.eVK.MIDDLE_LEFT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${dr[K.eVK.MIDDLE_LEFT]}`}),l.createElement(di,{disabled:r,value:K.eVK.MIDDLE_CENTER,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${dr[K.eVK.MIDDLE_CENTER]}`}),l.createElement(di,{disabled:r,value:K.eVK.MIDDLE_RIGHT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${dr[K.eVK.MIDDLE_RIGHT]}`})),l.createElement(l.Fragment,null,l.createElement(di,{disabled:r,value:K.eVK.BOTTOM_LEFT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${dr[K.eVK.BOTTOM_LEFT]}`}),l.createElement(di,{disabled:r,value:K.eVK.BOTTOM_CENTER,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${dr[K.eVK.BOTTOM_CENTER]}`}),l.createElement(di,{disabled:r,value:K.eVK.BOTTOM_RIGHT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${dr[K.eVK.BOTTOM_RIGHT]}`})))}let dc=K.eVK.MIDDLE_CENTER;var dd=(e=>(e.TextInput="text-input",e.Selector="selector",e))(dd||{}),dp=(e=>(e.Select="select",e.Input="input",e.Scrub="scrub",e.Width="width",e.Height="height",e))(dp||{});function du(e,t){return(0,d.xN)(e,0)?((0,m.x1)("clampScaleValue","scale is 0",{originalValue:e,newValue:t}),1):(0,d.qE)(t/e,.01,100)}var dm=n(336417),dh=n(127285),d_=n(360882),dE=n(614851),dy=n(59466);let dg=[.25,.5,.75,1,2,3,4,5,10];class dv extends ni.a3{}class df extends no.c${}let db=new class{constructor(){this.MAX_SCALE=100,this.MIN_SCALE=.01}parse(e){let t=(0,d_.q)(e),n=(0,dh.O4)(t,1);if(null!==n.value&&isFinite(n.value)){let t=(0,d_.v)(e);return{value:n.value,anchorPoint:null===t?void 0:t}}throw new nt.LS("Could not parse input",n.error)}format(e){if(null==e)return"";let t=parseFloat(e.value.toFixed(2));return`${t}x`}getNudgeAmount(e){return e?1:.5}incrementBy(e,t){return{value:e.value+t,anchorPoint:e.anchorPoint}}snap(e,t){return{value:(0,d.YE)(e.value,t),anchorPoint:e.anchorPoint}}clamp(e){return{value:(0,d.qE)(e.value,this.MIN_SCALE,this.MAX_SCALE),anchorPoint:e.anchorPoint}}isEqual(e,t){return e.value===t.value&&e.anchorPoint===t.anchorPoint}},dS=l.forwardRef((e,t)=>{let{disabled:n,scale:r,onScaleChange:i,recordingKey:a,onInputKeyDown:o}=e,s=(0,J.wA)(),c=(0,J.d4)(e=>e.dropdownShown),d=u.c1(a),p=(0,ay.GS)(),m=dg.map((e,t)=>l.createElement(df,{key:t,value:{value:e},recordingKey:d("scaleInput",e)})),h={smallNudgeAmount:1,bigNudgeAmount:10,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01,"data-tooltip":"","data-tooltip-type":eo.Ib.TEXT,dispatch:s,value:{value:r},onValueChange:(e,t)=>{i(e.value,dp.Scrub,t),t&&F.Y5.commit()},scrubbingDisabled:n,formatter:db};return l.createElement(ni.ow,{value:{select:p?ns.pW:void 0,inputComponent:p?ns.gm:void 0}},l.createElement(no.tV,{value:{chevron:p?nc.c9:void 0}},l.createElement(dv,{scrubbableControlProps:h,id:"scale-input-fullscreen.scale_panel.scale",forwardedRef:t,className:"scale_row--scaleCombobox--jimxi",property:{value:r},onKeyDown:o,onChange:(e,t,n)=>{i(e.value,n===ni.G7.Input?dp.Input:dp.Select,t??tV.zk.NO,e.anchorPoint),t&&F.Y5.commit()},formatter:db,dispatch:s,dropdownShown:c,onMouseDown:e=>{e.stopPropagation()},recordingKey:d("scaleInput"),disabled:n,svg:dy.A,svgClassName:dE.QK,ui3Icon:l.createElement(dm.l,null),dropdownWidth:104,dataTestId:"scale_panel.scale"},m)))}),dP=l.forwardRef(e=>l.createElement(eh.fI,null,l.createElement(dS,{...e}))),dT="scale_width_height_row--condensedWidthHeightRow--VOTEM",dw="scale_width_height_row--condensedScrubbableInput--XxHxl",dI={smallNudgeAmount:.01,bigNudgeAmount:.1,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01};function dk(e){let{disabled:t,scale:n,property:r,selectionRegionsBounds:i,selectionRegionsOriginalBounds:a,onScaleChange:o,recordingKey:s,forwardedRef:c,onKeyDown:p}=e,m="width"===r?dp.Width:dp.Height,h=(0,J.wA)(),_=u.c1(s),E=function(){if(i&&i.length){let e=i[0][r];return i.every(t=>(0,d.xN)(t[r],e,.005))?e:B.oV}return B.oV}(),y=(0,n5.Xs)(),g=(0,B.gl)(E)?dI:{},v=(0,ay.GS)();return l.createElement(nr.$j,{noBorderOnHover:!0,dispatch:h,forwardedRef:c,className:dw,inputClassName:dE.hF,disabled:t,floatingPointFormat:v?void 0:{maxNumDigits:4},onKeyDown:p,dataTestId:`scale_panel.${r}`,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":"width"===r?(0,T.t)("fullscreen.properties_panel.transform_panel.width"):(0,T.t)("fullscreen.properties_panel.transform_panel.height"),tooltipForScreenReadersOnly:!0,recordingKey:_(`${r}Input.input`),min:(0,B.gl)(E)?.01:1,value:E??0,mixedMathHandler:{getValue:()=>n,onChange:(e,t,n)=>{let l=t(e);Number.isNaN(l)||o((0,d.qE)(l,.01,100),m,n)}},onValueChange:(e,t)=>{!Number.isNaN(e)&&E&&E!==B.oV&&a&&a.length&&o(du(a[0][r],e),m,t)},...y,...g},l.createElement("span",{className:`${dE.QK} svg`},"width"===r?(0,T.tx)("fullscreen.properties_panel.transform_panel.w"):(0,T.tx)("fullscreen.properties_panel.transform_panel.h")))}function dN(e){let{widthRef:t,heightRef:n,onWidthInputKeyDown:r,onHeightInputKeyDown:i,...a}=e;return l.createElement(dk,{...a,property:"width",forwardedRef:t,onKeyDown:r})}function dC(e){let{widthRef:t,heightRef:n,onWidthInputKeyDown:r,onHeightInputKeyDown:i,...a}=e;return l.createElement(dk,{...a,property:"height",forwardedRef:n,onKeyDown:i})}function dA(e){return l.createElement(eh.fI,{className:dT},l.createElement(dN,{...e}),l.createElement(dC,{...e}))}function dO(e){let t=l.createElement(dN,{...e}),n=l.createElement(dC,{...e});return l.createElement(eE.fn,{leftLabel:(0,T.t)("fullscreen.properties_panel.transform_panel.width"),leftInput:t,rightLabel:(0,T.t)("fullscreen.properties_panel.transform_panel.height"),rightInput:n,icon:null})}var dx=n(889012),dR=n.n(dx);let dM="scale_panel--scalePanelRow--Cbovd";var dL=n(630834);let dD=()=>{F.Y5.triggerAction("set-tool-default")};function dF(e){let t=(0,J.d4)(e=>e.mirror.sceneGraphSelection),n=(0,tF.kl)("selectionRegions"),r=(0,B.E7)(n),i=(0,iT.ZC)(r),a=l.useRef(0),[o,c]=(0,l.useState)(void 0),p=(0,iT.ZC)(o),m=l.useRef(null),h=(0,tF.kl)("selectionResizable"),_=(0,B._W)(h,!1),E=(0,tK.p8)("activeUserAction"),y=(0,iT.ZC)(E),g=(0,nl.J2)(K.Ez5.propertiesPanelState().shownPropertiesPanels),v=(0,iT.ZC)(g),[f,b]=(0,l.useState)(!1),S=l.useRef(null),P=l.useRef(null),w=l.useRef(null),I=(0,tK.p8)("currentTool"),k=(0,iT.ZC)(I),N=I!==K.NLJ.SCALE,C=!_||N,A=(0,ay.GS)(),[O,x]=(0,l.useState)(dc),R=(0,nl.J2)(K.Ez5.canvasViewState().scaleToolLastCanvasAnchorPoint),M=u.qP(e.recordingKey??"","anchorPointChange",x),[L,D]=(0,l.useState)(void 0),V=(0,l.useCallback)(e=>{void 0===L?D(e):L!==e&&D(null)},[L]),{trackScaleChangeEvent:U,trackScaleToolDismissed:H,trackAnchorPointChange:G}=function(){let e=(0,so.am)(),t=(0,l.useCallback)(t=>{e("scale_tool_panel_set_value",{key:"height",...t})},[e]),n=(0,l.useMemo)(()=>dR()(t,3e3),[t]),r=(0,l.useCallback)((e,l)=>l?n(e):t(e),[n,t]),i=(0,l.useCallback)(t=>e("scale_tool_panel_set_value",{key:"width",...t}),[e]),a=(0,l.useMemo)(()=>dR()(i,3e3),[i]),o=(0,l.useCallback)((e,t)=>t?a(e):i(e),[a,i]),s=(0,l.useCallback)(t=>e("scale_tool_panel_set_value",{key:"scale",...t}),[e]),c=(0,l.useMemo)(()=>dR()(s,3e3),[s]),d=(0,l.useCallback)((e,t)=>t?c(e):s(e),[c,s]),p=(0,l.useCallback)(t=>e("scale_tool_panel_dismissed",{...t}),[e]);return{trackScaleChangeEvent:d,trackWidthChangeEvent:o,trackHeightChangeEvent:r,trackAnchorPointChange:(0,l.useCallback)(t=>e("scale_tool_set_anchor_point",{...t}),[e]),trackScaleToolDismissed:p}}();(0,l.useEffect)(()=>{E===K.QOV.RESIZING&&O!==R&&(V(R),M(R))},[E,O,M,V,R]);let[Y,W]=(0,l.useState)(1),[$,z]=(0,l.useState)(!1),[X,Q]=(0,l.useState)(!1),[j,q]=(0,l.useState)(!0),ee=(0,l.useCallback)((e,t)=>{o&&o.length&&(K.glU.setScale(e,t,o.map(e=>({origin:{x:e.x,y:e.y},size:{x:e.width,y:e.height}})),null!==L),Q(!0),V(t))},[o,L,V]);(0,l.useEffect)(()=>{z(!0)},[t]),(0,l.useEffect)(()=>{!(null==v?void 0:v[K.ibQ.SCALE_ITEM])&&(null==g?void 0:g[K.ibQ.SCALE_ITEM])&&z(!0)},[g,v]);let et=(0,l.useCallback)(()=>X?(Q(!1),!0):E===K.QOV.RESIZING||E===K.QOV.DEFAULT&&y===K.QOV.RESIZING,[E,X,y]);(0,l.useLayoutEffect)(()=>{if(i&&i.length&&r&&r.length&&i.length===r.length)for(let e=0;e<r.length;e++){let{x:t,y:n,width:l,height:a}=r[e].bounds,{x:o,y:s,width:c,height:p}=i[e].bounds;if(c!==l||p!==a){if(!et()&&!$){z((0,d.xN)(c,l)!==(0,d.xN)(p,a));break}}else if(o!==t||s!==n){V(null);break}}},[i,r,et,V,$]),(0,l.useLayoutEffect)(()=>{let e=!1;if((0,s.kc)().ce_scale_tool_skew&&r){let t=m.current??r.map(e=>(e.bounds.width||1)/(e.bounds.height||1)),n=K.glU.getSelectionAngleSum();if(r.length===t.length){m.current=[];for(let l=0;l<r.length;++l){let i=(r[l].bounds.width||1)/(r[l].bounds.height||1);(e||(0,dn.o)(i,t[l],1e-4))&&(0,dn.o)(n,a.current,1e-4)||(e=!0),m.current.push(i),a.current=n}}}(e||$)&&(W(1),M(dc),K.Ez5.canvasViewState().scaleToolLastCanvasAnchorPoint.set(dc),D(void 0),c(K.glU.getSelectionRegionsBounds().map(({origin:e,size:t})=>({x:e.x,y:e.y,width:t.x,height:t.y}))),b(!1),z(!1))},[$,r,M,R]),(0,l.useLayoutEffect)(()=>{r&&r.length&&o&&o.length&&(r!==i||(0,s.kc)().ce_scale_tool_skew&&o!==p)&&(j?W(du(o[0].width,r[0].bounds.width)):q(!0))},[p,r,o,i,j]),(0,l.useEffect)(()=>{let e=I===K.NLJ.SCALE&&k!==K.NLJ.SCALE;e&&Object.keys(t).length>0&&e&&[K.QOV.DEFAULT,K.QOV.SELECTING_TEXT].includes(E)&&S.current&&(S.current.focus(),S.current.select())},[E,I,k,t]),(0,l.useEffect)(()=>{let e=()=>{S.current&&(b(!1),S.current.focus(),S.current.select())};return dt.h.subscribeScaleToolActivated(e),()=>{dt.h.unsubscribeScaleToolActivated(e)}},[]),(0,l.useEffect)(()=>{let e=e=>{e.target!==S.current&&e.target!==P.current&&e.target!==w.current&&b(!0)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]);let en=(0,l.useCallback)(e=>{let t="Escape"===e.key,n="Enter"===e.key;!f&&(n||t)&&dD()},[f]),er=l.createElement(eh.$4,null,l.createElement(ey.K,{onClick:()=>{dD(),H({selectionCount:Object.keys(t).length})},"aria-label":(0,T.t)("fullscreen.scale_panel.close")},l.createElement(el.U,{svg:dL.default,fallbackSvg:dL.default},l.createElement(de.A,null)))),ei=l.createElement(dS,{scale:Y,onInputKeyDown:en,onScaleChange:eP.nc.user("change-scale",(e,t,n,l)=>{W(e),q(!1),void 0!==l&&(0,s.kc)().ee_scale_tool_ap_input?(U({value:e,source:t,anchorPoint:l,anchorPointSource:dd.TextInput}),ee(e,l),M(l)):(t===dp.Select?U({value:e,source:t,anchorPoint:O,anchorPointSource:dd.Selector}):U({value:e,source:t,anchorPoint:O,anchorPointSource:dd.Selector},!0),(0,Z.flushSync)(()=>{ee(e,O),n&&r&&r.length>1&&K.glU.logMultiEditActionForSelection("scale_panel_finish",null)}))}),disabled:C,recordingKey:e.recordingKey,ref:S}),ea=l.createElement(ds,{restoreFocusElements:[S.current,P.current,w.current].filter(Boolean),anchorPoint:O,onAnchorPointChange:eP.nc.user("change-anchor-point",e=>{e!==O&&(1!==Y&&(ee(1,O),ee(Y,e)),M(e)),G({anchorPoint:e})}),disabled:C}),eo=l.createElement(A?dO:dA,{scale:Y,selectionRegionsBounds:r.map(e=>e.bounds),selectionRegionsOriginalBounds:o,onScaleChange:eP.nc.user("change-scale",(e,t,n)=>{U({value:e,source:t,anchorPoint:O,anchorPointSource:dd.Selector},!0),W(e),q(!1),ee(e,O),n&&(r&&r.length>1&&K.glU.logMultiEditActionForSelection("scale_panel_finish",null),F.Y5.commit())}),widthRef:P,heightRef:w,onHeightInputKeyDown:en,onWidthInputKeyDown:en,disabled:C,recordingKey:e.recordingKey});return A?l.createElement(eh.Zk,{"data-testid":`scale_panel.state.${N?"hidden":C?"disabled":"enabled"}`,className:"scale_panel--scalePanel--EfJhl"},l.createElement(np.r,{titleTx:(0,T.tx)("fullscreen.scale_panel.scale"),icon:er}),eo,l.createElement(eE.sY,{leftLabel:(0,T.t)("fullscreen.scale_panel.scale"),rightLabel:(0,T.t)("fullscreen.scale_panel.anchor_point"),topLeftInput:ei,bottomLeftInput:null,rightInput:ea,topIcon:null,bottomIcon:null})):l.createElement(eh.Zk,{"data-testid":`scale_panel.state.${N?"hidden":C?"disabled":"enabled"}`},l.createElement(eh.fI,{className:dM},l.createElement(eh.xw,null,(0,T.tx)("fullscreen.scale_panel.scale")),er,ea),l.createElement(eh.fI,null,ei),eo)}let dK={smallNudgeAmount:.01,bigNudgeAmount:.1,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01};function dV({disabled:e,widthOrHeight:t,scale:n,property:r,onScaleChange:i,onWidthOrHeightChange:a,recordingKey:o,forwardedRef:s,onKeyDown:c}){let d="width"===r?dp.Width:dp.Height,p=(0,J.wA)(),m=(0,n5.Xs)(),h=(0,B.gl)(t)?dK:{},_=u.c1(o);return l.createElement(nr.$j,{noBorderOnHover:!0,dispatch:p,forwardedRef:s,className:dw,inputClassName:dE.hF,disabled:e,floatingPointFormat:{maxNumDigits:4},onKeyDown:c,dataTestId:`scale_panel.${r}`,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":"width"===r?(0,T.t)("fullscreen.properties_panel.transform_panel.width"):(0,T.t)("fullscreen.properties_panel.transform_panel.height"),tooltipForScreenReadersOnly:!0,recordingKey:_(`${r}Input.input`),min:(0,B.gl)(t)?.01:1,value:t||0,mixedMathHandler:{getValue:()=>n,onChange:(e,t,n)=>{let l=t(e);Number.isNaN(l)||i(l,d,n)}},onValueChange:(e,n)=>{!Number.isNaN(e)&&t&&t!==B.oV&&a(e,n)},...m,...h},l.createElement("span",{className:`${dE.QK} svg`},"width"===r?(0,T.tx)("fullscreen.properties_panel.transform_panel.w"):(0,T.tx)("fullscreen.properties_panel.transform_panel.h")))}function dU({width:e,height:t,onWidthChange:n,onHeightChange:r,onWidthInputKeyDown:i,onHeightInputKeyDown:a,widthInputRef:o,heightInputRef:s,...c}){return l.createElement(eh.fI,{className:dT},l.createElement(dV,{...c,property:"width",widthOrHeight:e,onWidthOrHeightChange:n,onKeyDown:i,forwardedRef:o}),l.createElement(dV,{...c,widthOrHeight:t,onWidthOrHeightChange:r,onKeyDown:a,property:"height",forwardedRef:s}))}let dB=n(630834);function dH(){F.Y5.triggerAction("set-tool-default")}function dG({recordingKey:e}){let t=(0,nl.J2)(K.yFm.state().scale),n=eP.nc.user("change-scale",e=>{K.yFm.setScale(e)}),r=(0,nl.J2)(K.yFm.state().width);r="number"==typeof r?r:B.oV;let i=eP.nc.user("change-scale-width",e=>{K.yFm.setWidth(e)}),a=(0,nl.J2)(K.yFm.state().height);a="number"==typeof a?a:B.oV;let o=eP.nc.user("change-scale-height",e=>{K.yFm.setHeight(e)}),s=(0,nl.J2)(K.yFm.state().anchorPoint),c=eP.nc.user("change-anchor-point",e=>{K.yFm.setAnchorPoint(e)}),{handleKeyDown:d,heightInputRef:p,scaleInputRef:u,widthInputRef:m}=function(){let e=(0,J.d4)(e=>e.mirror.sceneGraphSelection),[t,n]=l.useState(!1),r=l.useRef(null),i=l.useRef(null),a=l.useRef(null),o=(0,tK.p8)("currentTool"),s=(0,iT.ZC)(o),c=(0,tK.p8)("activeUserAction"),[d,p]=l.useState(!1);l.useEffect(()=>{let t=o===K.NLJ.SCALE&&s!==K.NLJ.SCALE;Object.keys(e).length>0&&t&&[K.QOV.DEFAULT,K.QOV.SELECTING_TEXT].includes(c)&&r.current&&(r.current.focus(),r.current.select())},[c,o,s,e]),l.useEffect(()=>{let e=()=>{r.current&&(n(!1),p(!1),r.current.focus(),r.current.select())};return dt.h.subscribeScaleToolActivated(e),()=>{dt.h.unsubscribeScaleToolActivated(e)}},[]),l.useEffect(()=>{let e=e=>{e.target!==r.current&&e.target!==i.current&&e.target!==a.current&&n(!0)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]);let u=l.useCallback(e=>{let n="Escape"===e.key,l="Enter"===e.key;!t&&(l||n)&&p(!0)},[t]);return l.useEffect(()=>{d&&dH()}),{handleKeyDown:u,scaleInputRef:r,widthInputRef:i,heightInputRef:a}}();return l.createElement(eh.Zk,null,l.createElement(eh.fI,{className:dM},l.createElement(eh.xw,null,(0,T.tx)("fullscreen.scale_panel.scale")),l.createElement("span",null,l.createElement(ey.K,{onClick:dH,"aria-label":(0,T.t)("fullscreen.scale_panel.close")},l.createElement(el.U,{fix_me_removeThisPropAndProvideUI3Icon:!0,svg:dB,fallbackSvg:dB}))),l.createElement(ds,{restoreFocusElements:[u.current,m.current,p.current].filter(Boolean),anchorPoint:s,onAnchorPointChange:c,disabled:!1})),l.createElement(dP,{scale:t,onScaleChange:n,disabled:!1,onInputKeyDown:d,recordingKey:e,ref:u}),l.createElement(dU,{scale:t,width:r,height:a,onWidthChange:i,onHeightChange:o,onScaleChange:n,onKeyDown:d,widthInputRef:m,heightInputRef:p,disabled:!1,recordingKey:e}))}function dY(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 9.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5Zm9 0a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5Zm-8-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm.5 8.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5Z",clipRule:"evenodd"}))}let dW=(0,sh.ex)("autolayout_v3_migration_info",function(e){let{tooltipText:t}=e,n=(0,c.Gc)(e=>{e.stopPropagation(),lt.Ay.unsafeRedirect("https://help.figma.com/hc/articles/360040451373#Updates_to_Auto_Layout","_blank")});return l.createElement("div",{className:"autolayout_v3_migration_info_tooltip--autolayoutMigration--OQ8zC"},t,l.createElement("a",{onMouseDown:n,rel:"noopener"},(0,T.tx)("fullscreen.properties_panel.migration_tooltip_learn_more")))},e=>({tooltipText:e.getAttribute("data-tooltip-text")}));var d$=n(460528),dz=n(700829),dX=n(467213),dQ=n(416082),dZ=n(283942),dJ=n(221537);let dj="alignment_view_v4--indicator--VmKfE",dq="alignment_view_v4--indicatorBaseline--4kxfb",d0="alignment_view_v4--counterCenter--MlF9q";function d1({onClick:e,onDoubleClick:t,onHover:n,...r}){let i=(0,dJ.rO)(r.stackPrimaryAlignItems),o="BASELINE"===r.stackCounterAlignItems,s="HORIZONTAL"===r.stackMode?"HORIZONTAL":"VERTICAL",c="WRAP"===r.stackWrap,d="HORIZONTAL"===s?"alignment_view_v4--horizontal--UiniT":"alignment_view_v4--vertical--JVrRJ",p=i?"alignment_view_v4--spaceBetween--RZOdp":"alignment_view_v4--packed--MZMpk",u=(0,B.hS)(r.stackPrimaryAlignItems)&&(0,B.hS)(r.stackCounterAlignItems),m=r.primaryHover&&r.counterHover,h=(0,l.useCallback)(e=>{let[n,l]=d9(e.target);if(i){let t=e.target.getBoundingClientRect();"HORIZONTAL"===s?n=Math.floor((e.clientX-t.x)/t.width*3):l=Math.floor((e.clientY-t.y)/t.height*3)}t(n,l)},[t,i,s]),_=(0,l.useCallback)(e=>n(...d9(e.target)),[n]),E=(0,l.useCallback)(e=>n(null,null),[n]);return l.createElement("div",{className:a()(r.className,"alignment_view_v4--mainContainer--zUBsm",d,p,{"alignment_view_v4--baselineAlign--xLTR2":o}),tabIndex:0,onKeyDown:r.onKeyDown},l.createElement(d7,{baseline:o}),l.createElement(d6,{stackMode:s,spaceBetween:i,baselineAlign:o,onMouseMove:_,onMouseOut:E,onClick:e,onDoubleClick:h}),m&&l.createElement(d5,{hover:!0,primaryAlign:r.primaryHover,counterAlign:r.counterHover,isStackWrap:c}),u&&l.createElement(d5,{primaryAlign:r.stackPrimaryAlignItems,counterAlign:r.stackCounterAlignItems,isStackWrap:c}),o&&l.createElement(d2,{onClick:r.onRemoveBaseline}))}function d5({hover:e,primaryAlign:t,counterAlign:n,isStackWrap:r}){return l.createElement("div",{className:a()("alignment_view_v4--indicatorContainer--ewQnB alignment_view_v4--_centered--S6qQk",t?d3[t]:void 0,n?d4[n]:void 0,{"alignment_view_v4--hover---ncmo":e})},l.createElement("div",{className:a()("alignment_view_v4--indicatorGroup--vlMlW",{"alignment_view_v4--wrap--nsYBR":r})},"BASELINE"===n?(0,dJ.rO)(t)?l.createElement(l.Fragment,null,l.createElement("div",{className:dj}),l.createElement("span",{className:dq},"A"),l.createElement("div",{className:dj})):l.createElement("span",{className:dq},"A"):r?l.createElement(l.Fragment,null,l.createElement("div",{className:dj}),l.createElement("div",{className:dj}),l.createElement("div",{className:dj}),l.createElement("div",{className:dj}),l.createElement("div",{className:dj})):l.createElement(l.Fragment,null,l.createElement("div",{className:dj}),l.createElement("div",{className:dj}),l.createElement("div",{className:dj}))))}let d4={MIN:"alignment_view_v4--counterMin--1LPg6",CENTER:d0,MAX:"alignment_view_v4--counterMax--HzBqX",BASELINE:d0},d3={MIN:"alignment_view_v4--primaryMin--DHsQj",CENTER:"alignment_view_v4--primaryCenter--ci9Aj",MAX:"alignment_view_v4--primaryMax--i8kqd",SPACE_EVENLY:"",SPACE_BETWEEN:""};function d2({onClick:e}){let t=pt(),n=pn(),r=2*t/3+2,i=t-9,a=t-5.5;return l.createElement("svg",{className:"alignment_view_v4--baselineControls--cwzcf alignment_view_v4--_centered--S6qQk",width:t,height:t,viewBox:n,fill:"none"},l.createElement("g",{className:"alignment_view_v4--baselineHovered--uY49E","data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.properties_panel.stack_panel.remove_baseline_align"),onClick:e},l.createElement("rect",{x:"4.5",y:`${r}`,width:`${i}`,height:"14",rx:"2",fill:"var(--color-bg-selected-tertiary, #EDF5FA)"}),l.createElement("line",{x1:"5.5",y1:`${r}`,x2:`${a}`,y2:`${r}`,stroke:"var(--color-bg-brand-hover, #0D99FF)",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"1 5"}),l.createElement("line",{x1:"5.5",y1:`${r}`,x2:`${a}`,y2:`${r}`,stroke:"var(--color-bg-tertiary, rgba(0, 0, 0, 0.3))",strokeWidth:"2",strokeLinecap:"round"})))}function d6({spaceBetween:e,stackMode:t,baselineAlign:n,onMouseMove:r,onMouseOut:i,onClick:a,onDoubleClick:o}){let s=pe({stackMode:t,baselineAlign:n,spaceBetween:e});return l.createElement("div",{className:"alignment_view_v4--tooltipGrid--1PH8Z alignment_view_v4--_centered--S6qQk",onMouseMove:r,onMouseOut:i,onClick:a,onDoubleClick:o},s.map((n,r)=>{let i=r%3,a=Math.floor(r/3);return"HORIZONTAL"===t&&e&&(a=i,i=0),l.createElement(d8,{key:r,x:i,y:a,..."string"==typeof n?{tooltip:n}:n})}))}function d8({x:e,y:t,tooltip:n,below:r}){return l.createElement("div",{"data-x":e,"data-y":t,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":n,"data-tooltip-show-above":!r||void 0})}function d7({baseline:e}){let t=pn(),n=pt(),r=n/3,i=`${r}`,a=`${r/2}`,o=e?r:0,s=e?r:n,c=(0,l.useId)();return l.createElement("svg",{width:n,height:n,viewBox:t,fill:"currentColor"},l.createElement("defs",null,l.createElement("pattern",{id:c,width:i,height:i,patternUnits:"userSpaceOnUse"},l.createElement("circle",{cx:a,cy:a,r:"1"}))),l.createElement("rect",{width:"79",height:s,y:o,fill:`url(#${c})`}))}function d9(e){let{x:t,y:n}=e.dataset;return[parseInt(t),parseInt(n)]}function pe({baselineAlign:e,spaceBetween:t,stackMode:n,isUi3:l}){return e&&t?l?[{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_text_baseline"),below:!0}]:[(0,T.t)("fullscreen.properties_panel.stack_panel.align_baseline")]:e?[{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_left_baseline"),below:l},{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_center_baseline"),below:l},{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_right_baseline"),below:l}]:t?"HORIZONTAL"===n?l?[(0,T.t)("fullscreen.properties_panel.stack_panel.align_top"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_center"),{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_bottom"),below:!0}]:[(0,T.t)("fullscreen.properties_panel.stack_panel.align_auto_top_gap"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_auto_center_gap"),{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_auto_bottom_gap"),below:!0}]:l?[(0,T.t)("fullscreen.properties_panel.stack_panel.align_left"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_center"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_right")]:[(0,T.t)("fullscreen.properties_panel.stack_panel.align_auto_left_gap"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_auto_center_gap"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_auto_right_gap")]:[(0,T.t)("fullscreen.properties_panel.stack_panel.align_top_left"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_top_center"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_top_right"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_left"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_center"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_right"),{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_bottom_left"),below:!0},{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_bottom_center"),below:!0},{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_bottom_right"),below:!0}]}let pt=()=>(0,o.jz)("60px"),pn=()=>{let e=pt();return`0 0 ${e} ${e}`},pl="alignment_view_v4_ui3--indicatorBaseline--NUe6M",pr="alignment_view_v4_ui3--counterCenter--QC-B7";function pi({onClick:e,onDoubleClick:t,onHover:n,...r}){let i=(0,dJ.rO)(r.stackPrimaryAlignItems),o="BASELINE"===r.stackCounterAlignItems,s="HORIZONTAL"===r.stackMode?"HORIZONTAL":"VERTICAL",c="WRAP"===r.stackWrap,d="HORIZONTAL"===s?"alignment_view_v4_ui3--horizontal--2Shqc":"alignment_view_v4_ui3--vertical--zGQMJ",p=i?"alignment_view_v4_ui3--spaceBetween--o3EAq":"alignment_view_v4_ui3--packed--EvdQi",u=(0,B.hS)(r.stackPrimaryAlignItems)&&(0,B.hS)(r.stackCounterAlignItems),m=r.primaryHover&&r.counterHover,h=(0,l.useCallback)(e=>{let[n,l]=p_(e.target);if(i){let t=e.target.getBoundingClientRect();"HORIZONTAL"===s?n=Math.floor((e.clientX-t.x)/t.width*3):l=Math.floor((e.clientY-t.y)/t.height*3)}t(n,l)},[t,i,s]),_=(0,l.useCallback)(e=>n(...p_(e.target)),[n]),E=(0,l.useCallback)(e=>n(null,null),[n]);return l.createElement("div",{className:a()(r.className,"alignment_view_v4_ui3--mainContainer---0NcS",d,p,{"alignment_view_v4_ui3--baselineAlign--OxyzT":o}),tabIndex:0,onKeyDown:r.onKeyDown},l.createElement(ph,null),l.createElement(pp,{stackMode:s,spaceBetween:i,baselineAlign:o,onMouseMove:_,onMouseOut:E,onClick:e,onDoubleClick:h}),m&&l.createElement(pa,{hover:!0,primaryAlign:r.primaryHover,counterAlign:r.counterHover,isStackWrap:c}),u&&l.createElement(pa,{primaryAlign:r.stackPrimaryAlignItems,counterAlign:r.stackCounterAlignItems,isStackWrap:c}),o&&l.createElement("div",{className:"alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if"},l.createElement(pd,{onClick:r.onRemoveBaseline})))}function pa({hover:e,primaryAlign:t,counterAlign:n,isStackWrap:r}){function i(){let e=(0,dJ.rO)(t);if("BASELINE"===n)return e?l.createElement(l.Fragment,null,l.createElement("span",{className:pl},"A"),l.createElement("span",{className:pl},"A"),l.createElement("span",{className:pl},"A")):l.createElement("span",{className:pl},"A");let i=r&&!e?5:3;return l.createElement(po,{n:i})}return l.createElement("div",{className:a()("alignment_view_v4_ui3--indicatorContainer--napq- alignment_view_v4_ui3--tooltipGrid--HBKLD alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if",t?pc[t]:void 0,n?ps[n]:void 0,{"alignment_view_v4_ui3--hover--ypG6x":e})},"BASELINE"===n?i():l.createElement("div",{className:"alignment_view_v4_ui3--indicatorGridCell--lp1lH"},l.createElement("div",{className:a()("alignment_view_v4_ui3--indicatorGroup--urXG2",{"alignment_view_v4_ui3--wrap--JWwtI":r})},i())))}function po({n:e}){return l.createElement(l.Fragment,null,Array.from({length:e},(e,t)=>l.createElement("div",{key:t,className:"alignment_view_v4_ui3--indicator--82j5F"})))}let ps={MIN:"alignment_view_v4_ui3--counterMin--aOx1R",CENTER:pr,MAX:"alignment_view_v4_ui3--counterMax--cCtqr",BASELINE:pr},pc={MIN:"alignment_view_v4_ui3--primaryMin--Q8O6a",CENTER:"alignment_view_v4_ui3--primaryCenter--RzFRC",MAX:"alignment_view_v4_ui3--primaryMax--eMvqL",SPACE_EVENLY:"",SPACE_BETWEEN:""};function pd({onClick:e}){return l.createElement("button",{className:"alignment_view_v4_ui3--baselineControls--xazGW alignment_view_v4_ui3--_centered--MV2if","data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.properties_panel.stack_panel.remove_baseline_align"),onClick:e},l.createElement("div",{className:"alignment_view_v4_ui3--baselineControlLine--6BBmA"}))}function pp({spaceBetween:e,stackMode:t,baselineAlign:n,onMouseMove:r,onMouseOut:i,onClick:a,onDoubleClick:o}){let s=pe({stackMode:t,baselineAlign:n,spaceBetween:e,isUi3:(0,ew.R)()});return l.createElement("div",{className:"alignment_view_v4_ui3--tooltipGrid--HBKLD alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if",onMouseMove:r,onMouseOut:i,onClick:void 0,onMouseUp:a,onDoubleClick:o},"HORIZONTAL"===t&&n&&e?l.createElement(pu,{tooltips:s}):s.map((n,r)=>{let i=r%3,a=Math.floor(r/3);return"HORIZONTAL"===t&&e&&(a=i,i=0),l.createElement(pm,{key:r,x:i,y:a,..."string"==typeof n?{tooltip:n}:n})}))}function pu({tooltips:e}){let t=(0,l.useId)(),n=e[0];return null==n?null:l.createElement(l.Fragment,null,l.createElement("div",{"data-tooltip-proxy-element-id":t}),l.createElement(pm,{id:t,x:1,y:1,..."string"==typeof n?{tooltip:n}:n}),l.createElement("div",{"data-tooltip-proxy-element-id":t}))}function pm({id:e,x:t,y:n,tooltip:r,below:i}){return l.createElement("div",{id:e,"data-x":t,"data-y":n,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-above":!i||void 0})}function ph(){return l.createElement("div",{className:"alignment_view_v4_ui3--dotGrid--N6RPe alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if"},Array.from({length:9},(e,t)=>l.createElement("div",{className:"alignment_view_v4_ui3--dotGridCell--r7m5y",key:t},l.createElement("div",{key:t,className:"alignment_view_v4_ui3--dot--d5NQx"}))))}function p_(e){let{x:t,y:n}=e.dataset;return[parseInt(t),parseInt(n)]}var pE=n(232531),py=n(876618);let pg=["MIN","CENTER","MAX"];function pv({className:e,recordingKey:t}){let n=(0,tF.kl)("stackMode"),r=(0,tF.kl)("stackWrap"),[i,a]=(0,tF.lJ)("stackPrimaryAlignItems"),[o,s]=(0,tF.lJ)("stackCounterAlignItems"),[p,m]=(0,l.useState)(void 0),[h,_]=(0,l.useState)(void 0),E=(0,py.sR)(),y=(0,py.uV)(),g=(0,so.am)(),v=(0,ew.R)(),f=(0,J.d4)(lQ.qd),b=(0,dJ.rO)(i),S="BASELINE"===o,P=(0,l.useCallback)((e,t)=>{if(null==e||null==t){m(void 0),_(void 0);return}let l=pf(e,t,n,b),r=pb(e,t,n,S);m(l),_(r)},[n,S,b,m,_]),T=u.rf(t,"click",(0,l.useCallback)(e=>{let t=p,n=h;e&&e.__interactionTest&&(t=e.primaryAlignItems,n=e.counterAlignItems),t&&n&&(b||a(t,tV.zk.NO),s(n),g("Autolayout alignment grid used",{nodeIds:f}))},[p,h,b,s,g,a,f]),{recordMetadata:()=>({primaryAlignItems:p,counterAlignItems:h}),playbackMetadata:e=>({...e,__interactionTest:!0})}),{clearVariableConsumption:w}=(0,pE.O)("STACK_SPACING",K.rXF.FLOAT),I=(0,l.useCallback)((e,t)=>{y(void 0===t||t,e,tV.zk.NO),w()},[y,w]),k=(0,l.useCallback)((e,t)=>{if(b){y(!1,"alignment double click",tV.zk.NO);let l=pf(e,t,n,!1),r=pb(e,t,n,S);m(l),_(r),a(l,tV.zk.NO),s(r),g("Autolayout spacing mode changed",{mode:l,doubleClick:!0})}else I("alignment double click"),s(pb(e,t,n,S))},[I,S,b,s,a,y,n,g]),N=(0,l.useCallback)(()=>{s("CENTER"),g("Disable baseline alignment",{source:"alignment grid"})},[s,g]),C=u.v_(t,"keydown",(0,l.useCallback)(e=>{function t(e){"HORIZONTAL"===n?a(e):s(e)}function l(e){"VERTICAL"===n?a(e):s(e)}function r(e,t){if((0,B.gl)(e))return"CENTER";let n=pg.indexOf(e);if(-1===n)return null;let l=(0,d.qE)(n+t,0,pg.length-1);return pg[l]}let p="HORIZONTAL"===n?i:o,u="VERTICAL"===n?i:o;switch(e.keyCode){case c.Uz.ESCAPE:case c.Uz.ENTER:e.currentTarget.blur();break;case c.Uz.UP_ARROW:{let e=r(u,-1);e&&l(e);break}case c.Uz.DOWN_ARROW:{let e=r(u,1);e&&l(e);break}case c.Uz.LEFT_ARROW:{let e=r(p,-1);e&&t(e);break}case c.Uz.RIGHT_ARROW:{let e=r(p,1);e&&t(e);break}case c.Uz.B:"HORIZONTAL"===n&&E("BASELINE"!==o,"alignment keyboard");break;case c.Uz.X:I("alignment keyboard",!(0,dJ.rO)(i));break;case c.Uz.W:l("MIN");break;case c.Uz.A:t("MIN");break;case c.Uz.S:l("MAX");break;case c.Uz.D:t("MAX");break;case c.Uz.V:l("CENTER");break;case c.Uz.H:t("CENTER");break;default:(0,dZ.jr)(e,dZ.W0.YES,dZ.VA.YES);return}e.preventDefault()},[I,o,i,E,s,a,n])),A=v?l.createElement(pi,{className:e,stackMode:n,stackWrap:r,stackPrimaryAlignItems:i,stackCounterAlignItems:o,onHover:P,onClick:T,onDoubleClick:k,onKeyDown:C,onRemoveBaseline:N,counterHover:h,primaryHover:p}):l.createElement(d1,{className:e,stackMode:n,stackWrap:r,stackPrimaryAlignItems:i,stackCounterAlignItems:o,onHover:P,onClick:T,onDoubleClick:k,onKeyDown:C,onRemoveBaseline:N,counterHover:h,primaryHover:p});return l.createElement(tS.E,{name:"alignment_view"},A)}function pf(e,t,n,l){return l?(0,s.kc)().ce_stack_justify_space_between?"SPACE_BETWEEN":"SPACE_EVENLY":pg["VERTICAL"===n?t:e]}function pb(e,t,n,l){return l?"BASELINE":pg["VERTICAL"===n?e:t]}var pS=n(630978),pP=n(178466),pT=n(791489),pw=n(931828),pI=n(309798),pk=n(801161);function pN({onClick:e,onOpen:t,modalKey:n,...r}){let i=(0,J.wA)(),a=(0,oT.Xo)(),o=(0,l.useRef)(null),s=(0,ew.R)(),c=(null==a?void 0:a.id)===n,d=(0,iT.ZC)(c),p=c?new y.Mi(a.initialX,a.initialY):null,m=(0,l.useRef)(r.onClose);m.current=r.onClose,(0,l.useEffect)(()=>{var e;d&&!c&&(null==(e=m.current)||e.call(m))},[c,d]),(0,l.useEffect)(()=>()=>{var e;return null==(e=m.current)?void 0:e.call(m)},[]);let h=(0,l.useCallback)(()=>{c&&(i(w.XE()),F.Y5.deselectProperty())},[i,c]),_=(0,l.useCallback)(()=>{if(c)return;e||null==t||t();let{top:l}=Z.findDOMNode(o.current).getBoundingClientRect();i(w.u1({id:n,initialX:es.qo,initialY:l}))},[i,c,n,e,t]);(0,l.useEffect)(()=>{null!=r.open&&(r.open?_():h())},[h,_,r.open]);let E=l.createElement(eT.YW,{ref:o,svg:r.svg,fallbackSvg:r.fallbackSvg,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":r.tooltip,onMouseMove:()=>{c&&i(pk.jD())},onMouseDown:e??(e=>{e.stopPropagation(),c?h():_()}),recordingKey:u.Pt(r,"trigger"),selected:c,className:r.buttonClassName},s?r.ui3Icon:void 0),g=r.buttonInteractableName?l.createElement(tS.E,{name:r.buttonInteractableName},E):E,v=c?l.createElement(eY.vx,{title:r.title,initialPosition:p,initialConstraints:{x:"right",y:"top"},headerSize:"small",onClose:h,recordingKey:u.Pt(r,"modal")},r.children):null,f=v&&r.modalTrackableName?l.createElement(tP.p,{name:"stack_layout_details_modal"},v):v;return l.createElement(l.Fragment,null,g,f)}var pC=n(63666),pA=n(70964),pO=n(579623),px=n(280106);let pR="stack_layout_details_preview--stroke--tWkNh",pM="stack_layout_details_preview--strokeLight--RsPk7",pL="stack_layout_details_preview--fill--V74cf",pD="stack_layout_details_preview--fillWhite--uTjlG",pF="stack_layout_details_preview--fillTertiary--xuwqQ",pK={reverseStackingOrder:function({enabled:e}){let t=[l.createElement("g",{key:"1",filter:"url(#reverse-stacking-order-filter)"},l.createElement("rect",{className:pD,x:"67",y:"40",width:"40",height:"40",rx:"20"}),l.createElement("path",{className:pL,d:"M88.4893 53.9091V67H87.294V55.1619H87.2173L84.1491 57.201V55.9609L87.2429 53.9091H88.4893Z"}),l.createElement("rect",{className:pR,x:"66.5",y:"39.5",width:"41",height:"41",rx:"20.5"})),l.createElement("g",{key:"2",filter:"url(#reverse-stacking-order-filter)"},l.createElement("rect",{className:pD,x:"99",y:"40",width:"40",height:"40",rx:"20"}),l.createElement("path",{className:pL,d:"M114.964 67V66.1243L119.241 61.3175C119.799 60.6868 120.248 60.1477 120.589 59.7003C120.93 59.2528 121.177 58.8395 121.331 58.4602C121.488 58.081 121.567 57.6868 121.567 57.2777C121.567 56.7791 121.45 56.3445 121.216 55.9737C120.986 55.5987 120.668 55.3068 120.263 55.098C119.858 54.8892 119.402 54.7848 118.895 54.7848C118.358 54.7848 117.888 54.8999 117.483 55.13C117.082 55.3601 116.771 55.6754 116.549 56.076C116.328 56.4766 116.217 56.9368 116.217 57.4567H115.073C115.073 56.7322 115.239 56.0909 115.571 55.5327C115.908 54.9702 116.366 54.5291 116.946 54.2095C117.53 53.8899 118.19 53.7301 118.927 53.7301C119.656 53.7301 120.304 53.8878 120.87 54.2031C121.437 54.5142 121.883 54.9382 122.206 55.4751C122.53 56.0121 122.692 56.6129 122.692 57.2777C122.692 57.7592 122.607 58.2259 122.437 58.6776C122.27 59.1293 121.983 59.6321 121.574 60.1861C121.165 60.7401 120.598 61.4176 119.873 62.2188L116.626 65.843V65.9261H123.101V67H114.964Z"}),l.createElement("rect",{className:pR,x:"98.5",y:"39.5",width:"41",height:"41",rx:"20.5"})),l.createElement("g",{key:"3",filter:"url(#reverse-stacking-order-filter)"},l.createElement("rect",{className:pD,x:"131",y:"40",width:"40",height:"40",rx:"20"}),l.createElement("path",{className:pL,d:"M151.048 67.179C150.243 67.179 149.522 67.0341 148.887 66.7443C148.252 66.4503 147.75 66.0433 147.379 65.5234C147.008 65.0036 146.812 64.4048 146.791 63.7273H147.999C148.02 64.2045 148.167 64.6222 148.44 64.9801C148.713 65.3338 149.075 65.6108 149.527 65.8111C149.978 66.0071 150.481 66.1051 151.035 66.1051C151.64 66.1051 152.173 65.9922 152.633 65.7663C153.098 65.5405 153.46 65.2315 153.72 64.8395C153.984 64.4432 154.116 63.9957 154.116 63.4972C154.116 62.9687 153.982 62.5021 153.713 62.0973C153.445 61.6925 153.059 61.3771 152.556 61.1513C152.058 60.9254 151.461 60.8125 150.767 60.8125H150V59.7386H150.767C151.333 59.7386 151.834 59.6364 152.269 59.4318C152.708 59.223 153.053 58.9311 153.304 58.5561C153.556 58.1811 153.681 57.7401 153.681 57.233C153.681 56.7514 153.573 56.3274 153.355 55.9609C153.138 55.5945 152.831 55.3068 152.435 55.098C152.043 54.8892 151.585 54.7848 151.061 54.7848C150.554 54.7848 150.089 54.8828 149.667 55.0788C149.245 55.2749 148.904 55.5518 148.645 55.9098C148.389 56.2678 148.252 56.6918 148.235 57.1818H147.078C147.096 56.5 147.283 55.9013 147.641 55.3857C148.003 54.8658 148.483 54.4609 149.079 54.1712C149.68 53.8771 150.345 53.7301 151.074 53.7301C151.845 53.7301 152.512 53.8878 153.074 54.2031C153.637 54.5185 154.071 54.9382 154.378 55.4624C154.689 55.9822 154.845 56.5554 154.845 57.1818C154.845 57.9276 154.642 58.5668 154.238 59.0994C153.833 59.6278 153.287 59.9943 152.601 60.1989V60.282C153.436 60.4482 154.093 60.8189 154.57 61.3942C155.051 61.9652 155.292 62.6662 155.292 63.4972C155.292 64.196 155.109 64.8246 154.743 65.3828C154.376 65.9368 153.873 66.3757 153.234 66.6996C152.599 67.0192 151.87 67.179 151.048 67.179Z"}),l.createElement("rect",{className:pR,x:"130.5",y:"39.5",width:"41",height:"41",rx:"20.5"}))];return e&&t.reverse(),l.createElement("svg",{width:"240",height:"120",fill:"none"},t,l.createElement("rect",{className:pM,x:"58.5",y:"28.5",width:"123",height:"63",rx:"3.5",strokeDasharray:"4 2"}),l.createElement("defs",null,l.createElement("filter",{id:"reverse-stacking-order-filter",x:"-1px",y:"-1px",width:"44",height:"42",filterUnits:"objectBoundingBox",colorInterpolationFilters:"sRGB"},l.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),l.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),l.createElement("feOffset",{dx:"2"}),l.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),l.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),l.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1112_23748"}),l.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1112_23748",result:"shape"}))))},alignToBaseline:function(){return l.createElement("svg",{width:240,height:120,fill:"none"},l.createElement("path",{className:a()("stack_layout_details_preview--alignToBaselineLine--Erw5t","stack_layout_details_preview--strokeAssistive--GgFOd"),d:"M38 60.5h164"}),l.createElement("g",{className:"stack_layout_details_preview--alignToBaselineA--kQYyh"},l.createElement("path",{className:pL,d:"M63.8516 67L65.2514 63.0561H70.7486L72.1484 67H73.4013L68.6392 53.9091H67.3608L62.5987 67H63.8516ZM65.6349 61.9822L67.9553 55.4624H68.0447L70.3651 61.9822H65.6349Z"}),l.createElement("rect",{className:pR,x:46.5,y:38.5,width:43,height:43,rx:1.5})),l.createElement("rect",{className:a()("stack_layout_details_preview--alignToBaselineEmpty--Z-l7O",pR),x:98.5,y:38.5,width:43,height:43,rx:1.5}),l.createElement("g",{className:"stack_layout_details_preview--alignToBaselineG--YayQ-"},l.createElement("path",{className:pL,d:"M171.843 68.8864C174.169 68.8864 175.895 67.7486 175.895 65.2557V55.1818H174.783V57.0547H174.668C174.265 56.1726 173.453 55.0476 171.651 55.0476C169.222 55.0476 167.592 57.0803 167.592 60.0653C167.592 63.076 169.279 64.8977 171.632 64.8977C173.396 64.8977 174.259 63.875 174.649 62.9737H174.751V65.1854C174.751 67.0135 173.581 67.8636 171.843 67.8636C170.161 67.8636 169.356 67.0518 168.941 66.304L168.007 66.9176C168.583 68.0426 169.835 68.8864 171.843 68.8864ZM171.766 63.8558C169.816 63.8558 168.736 62.2962 168.736 60.0462C168.736 57.8345 169.797 56.0831 171.766 56.0831C173.69 56.0831 174.77 57.745 174.77 60.0462C174.77 62.4176 173.658 63.8558 171.766 63.8558Z"}),l.createElement("rect",{className:pR,x:150.5,y:38.5,width:43,height:43,rx:1.5})),l.createElement("rect",{className:a()("stack_layout_details_preview--alignToBaselineOutline--YlRIY",pM),x:38.5,y:30.5,width:163,height:59,rx:3.5,strokeDasharray:"4 2",vectorEffect:"non-scaling-stroke"}))},bordersTakeSpace:function(){return l.createElement("svg",{width:240,height:120,fill:"none"},l.createElement("g",{className:"stack_layout_details_preview--bordersTakeSpaceLeft--WTfPZ"},l.createElement("rect",{className:pF,x:"43",y:"37",width:"48",height:"48",rx:"2"}),l.createElement("rect",{className:pD,x:"49",y:"43",width:"36",height:"36",rx:"2"})),l.createElement("g",{className:"stack_layout_details_preview--bordersTakeSpaceRight--QCBF1"},l.createElement("rect",{className:pF,x:"98",y:"37",width:"99",height:"48",rx:"2"}),l.createElement("rect",{className:pD,x:"104",y:"43",width:"87",height:"36",rx:"2"})),l.createElement("rect",{className:a()("stack_layout_details_preview--bordersTakeSpaceOutline--Xq42w",pM),x:"48.5",y:"42.5",width:"143",height:"37",rx:"1.5",strokeDasharray:"4 2",vectorEffect:"non-scaling-stroke"}))}};function pV({setting:e,enabled:t}){let n=e?pK[e]:null;return l.createElement("div",{className:a()("stack_layout_details_preview--preview---r9k-",{"stack_layout_details_preview--active--yCMB3":t}),"data-non-interactive":!0},n?l.createElement(n,{enabled:t}):l.createElement("div",{className:"stack_layout_details_preview--previewText--0NBYb"},(0,T.tx)("fullscreen.properties_panel.stack_panel.preview")))}let pU="stack_layout_details_modal--dropdownControl--PRPD5",pB="stack_layout_details_modal--onboardingBody--SQp9T",pH="stack_layout_details_modal--input--h2Yc7",pG="stack_layout_details_modal--chevron--tW9wo";var pY=n(769502);let pW="seen_stack_spacing_auto_onboarding";function p$(e){let[t,n]=(0,l.useState)(!1),[r,i]=(0,l.useState)({enabled:!1}),a=(0,ew.R)()?(0,T.t)("fullscreen.properties_panel.section_autoLayout.settings"):(0,T.t)("fullscreen.properties_panel.stack_panel.advanced_layout");return l.createElement(l.Fragment,null,l.createElement(pN,{title:a,tooltip:a,modalKey:"LAYOUT_DETAILS_PICKER",buttonInteractableName:"open_stack_layout_details_modal_button",modalTrackableName:"stack_layout_details_modal",svg:o4.A,ui3Icon:l.createElement(tv.A,null),buttonClassName:pY.Sj,recordingKey:e.recordingKey,onClose:()=>{setTimeout(()=>{n(!0)},250)}},l.createElement(pV,{setting:r.setting,enabled:r.enabled}),l.createElement("div",{className:"stack_layout_details_modal--controls--SFjhS"},l.createElement(pQ,{updatePreview:i,recordingKey:e.recordingKey}),l.createElement(pz,{updatePreview:i,recordingKey:e.recordingKey}),l.createElement(pX,{updatePreview:i,recordingKey:e.recordingKey}))),t&&l.createElement(pj,{onDismiss:()=>n(!1)}))}function pz({updatePreview:e,recordingKey:t}){var n;let r=(0,J.wA)(),i=(0,tC.U)(),[a,o]=(0,tF.lJ)("stackReverseZIndex"),s=(0,so.am)(),c=(0,J.d4)(lQ.qd),d=(0,ay.GS)(),p=(null==(n=(0,pP.Gq)())?void 0:n.getPrimaryLocale(!0))===pT.Xn?120:180,m=!0===a;return l.createElement(tS.E,{name:"stacking_order_control"},l.createElement(pO.L,{label:(0,T.t)("fullscreen.properties_panel.stack_panel.canvas_stacking_order"),onMouseEnter:()=>e({setting:"reverseStackingOrder",enabled:m}),onMouseLeave:()=>e({enabled:!1})},l.createElement(no.l6,{id:"reverse-stacking-order-select",dispatch:r,className:pU,inputClassName:pH,chevronClassName:pG,textAlign:d?void 0:"right",property:a,formatter:pZ,onChange:e=>{o(e),s(e?"Enable reverse zIndex":"Disable reverse zIndex",{nodeIds:c})},recordingKey:u.Pt(t,"reverseStackingOrder"),dropdownShown:i,dropdownAlignment:"right",dropdownWidth:p,onOptionFocus:t=>e({setting:null!=t?"reverseStackingOrder":void 0,enabled:!!t})},l.createElement(no.c$,{value:!0}),l.createElement(no.c$,{value:!1}))))}function pX({updatePreview:e,recordingKey:t}){let n=(0,tF.kl)("stackMode"),r="BASELINE"===(0,tF.kl)("stackCounterAlignItems"),i="HORIZONTAL"!==n,a=(0,py.sR)();return l.createElement(tS.E,{name:"baseline_alignment_control"},l.createElement(px.k,{label:(0,T.t)("fullscreen.properties_panel.stack_panel.align_text_baseline"),recordingKey:u.Pt(t,"alignToBaseline"),property:r,disabled:i,onChange:t=>{a(t,"modal"),e({setting:"alignToBaseline",enabled:t})},onFocus:t=>{e({setting:"alignToBaseline",enabled:r})},onHover:(t,n)=>{e({setting:"ENTER"===n?"alignToBaseline":void 0,enabled:t})},"data-tooltip":i?(0,T.t)("fullscreen.properties_panel.stack_panel.only_applicable_for_horizontal_layout"):void 0,"data-tooltip-type":eo.Ib.TEXT}))}function pQ({updatePreview:e,recordingKey:t}){let n=(0,J.wA)(),r=(0,tC.U)(),[i,a]=(0,tF.lJ)("bordersTakeSpace"),o=(0,so.am)(),s=(0,J.d4)(lQ.qd),c=(0,ay.GS)(),d=!0===i;return l.createElement(tS.E,{name:"borders_take_space_control"},l.createElement(pO.L,{label:(0,T.t)("fullscreen.properties_panel.stack_panel.borders_take_space"),onMouseEnter:()=>e({setting:"bordersTakeSpace",enabled:d}),onMouseLeave:()=>e({enabled:!1})},l.createElement(no.l6,{id:"borders-take-space-select",dispatch:n,className:pU,inputClassName:pH,chevronClassName:pG,dropdownWidth:168,textAlign:c?void 0:"right",property:d,formatter:pJ,onChange:e=>{a(e),o("change_borders_take_space",{enabled:e,source:"modal",nodeIds:s})},recordingKey:u.Pt(t,"bordersTakeSpace"),dropdownShown:r,onOptionFocus:t=>e({setting:null!=t?"bordersTakeSpace":void 0,enabled:!!t})},l.createElement(no.c$,{value:!0}),l.createElement(no.c$,{value:!1}))))}let pZ={format:e=>e?(0,T.t)("fullscreen.properties_panel.stack_panel.first_on_top"):(0,T.t)("fullscreen.properties_panel.stack_panel.last_on_top")},pJ={format:e=>e?(0,T.t)("fullscreen.properties_panel.stack_panel.included"):(0,T.t)("fullscreen.properties_panel.stack_panel.excluded"),formatExtended:e=>({text:e?(0,T.t)("fullscreen.properties_panel.stack_panel.included_in_layout"):(0,T.t)("fullscreen.properties_panel.stack_panel.excluded_from_layout")})};function pj({onDismiss:e}){let t=(0,J.wA)();return(0,pI.f)(pW)?null:l.createElement(pC.OA,{targetKey:"stack-spacing-input",shouldNotWrapInParagraphTag:!0,dismissModal:()=>{t(pw.b({[pW]:!0})),e()},background:"light",width:268,title:(0,T.tx)("fullscreen.properties_panel.stack_panel.gap_onboarding_title"),secondaryCtaText:l.createElement("a",{href:"https://help.figma.com/hc/articles/360040451373-Explore-auto-layout-properties#spacing-between",target:"_blank",style:{textDecoration:"none"}},(0,T.tx)("general.learn_more")),onClickSecondaryCta:tL.lQ,ctaText:(0,T.tx)("general.got_it"),onClickPrimaryCta:e,arrowPosition:eY.F_.RIGHT_TITLE},l.createElement(pA.Gv,{containerClassName:"stack_layout_details_modal--onboardingImg--4Uak-",src:"https://static.figma.com/uploads/94241d15e9d47a0c73734ae71850674f78cd4ab0"}),l.createElement("p",{className:pB},(0,T.tx)("fullscreen.properties_panel.stack_panel.gap_onboarding_body1",{gapBetweenItems:l.createElement("strong",null,(0,T.tx)("fullscreen.properties_panel.stack_panel.gap_items"))})),l.createElement("p",{className:pB},(0,T.tx)("fullscreen.properties_panel.stack_panel.gap_onboarding_body2",{auto:l.createElement("strong",null,(0,T.tx)("fullscreen.properties_panel.stack_panel.auto"))})))}var pq=n(802411),p0=n(729943),p1=n(253781);function p5(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 7h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5ZM6 7.5A1.5 1.5 0 0 1 7.5 6h2A1.5 1.5 0 0 1 11 7.5v2A1.5 1.5 0 0 1 9.5 11h-2A1.5 1.5 0 0 1 6 9.5v-2Zm8.5-.5h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5Zm-1.5.5A1.5 1.5 0 0 1 14.5 6h2A1.5 1.5 0 0 1 18 7.5v2a1.5 1.5 0 0 1-1.5 1.5h-2A1.5 1.5 0 0 1 13 9.5v-2ZM9.5 14h-2a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5Zm-2-1A1.5 1.5 0 0 0 6 14.5v2A1.5 1.5 0 0 0 7.5 18h2a1.5 1.5 0 0 0 1.5-1.5v-2A1.5 1.5 0 0 0 9.5 13h-2Zm10.384 1.32a.5.5 0 0 0-.768-.64l-2.15 2.58-1.112-1.114a.5.5 0 0 0-.708.708l1.5 1.5a.5.5 0 0 0 .738-.034l2.5-3Z",clipRule:"evenodd"}))}function p4(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M16.5 7h-9a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5Zm-9-1A1.5 1.5 0 0 0 6 7.5v2A1.5 1.5 0 0 0 7.5 11h9A1.5 1.5 0 0 0 18 9.5v-2A1.5 1.5 0 0 0 16.5 6h-9Zm2 8h-2a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5Zm-2-1A1.5 1.5 0 0 0 6 14.5v2A1.5 1.5 0 0 0 7.5 18h2a1.5 1.5 0 0 0 1.5-1.5v-2A1.5 1.5 0 0 0 9.5 13h-2Zm10.384 1.32a.5.5 0 0 0-.768-.64l-2.15 2.58-1.112-1.114a.5.5 0 0 0-.708.708l1.5 1.5a.5.5 0 0 0 .738-.034l2.5-3Z",clipRule:"evenodd"}))}function p3(e){let{propertiesPanelShouldShowRemoveAutoLayout:t}=ua(),n=t?(0,T.t)("fullscreen.properties_panel.stack_panel.remove_auto_layout"):(0,T.t)("fullscreen.properties_panel.stack_panel.use_auto_layout"),{actionEnabledStackSelection:r,actionEnabledUnstackSelection:i}=ua(),a=t?i:r,o=t?"unstack-selection":"stack-selection",s=(0,l.useCallback)(()=>{F.Y5.triggerActionInUserEditScope(o,{source:"panel"})},[o]);return l.createElement(eT.YW,{"aria-label":n,"data-tooltip":n,"data-tooltip-type":eo.Ib.TEXT,"data-tooltip-shortcut-key":o,selected:t,showTooltipWhenSelectedIsTrue:!0,disabled:!a,onClick:s,recordingKey:u.Pt(e.recordingKey,t?"removeButton":"addButton")},l.createElement(p2,null))}function p2(){let e=(0,tF.kl)("stackMode"),t=(0,tF.kl)("stackWrap"),{propertiesPanelShouldShowRemoveAutoLayout:n}=ua();if(!n)return l.createElement(p0.Q,null);if((0,B.gl)(e)||null==e||(0,B.gl)(t))return l.createElement(p1.v,null);if("WRAP"===t)return l.createElement(p5,null);switch(e){case"NONE":case"HORIZONTAL":return l.createElement(p1.v,null);case"VERTICAL":return l.createElement(p4,null)}}var p6=n(258890),p8=n(996620),p7=n(689606),p9=n(957069),ue=n(733982);function ut(e){return l.createElement(tP.p,{name:"stack_panel"},l.createElement(un,{...e}))}let un=l.memo(e=>{let{version:t}=(0,et.DP)();return"ui3"===t?l.createElement(ur,{...e}):l.createElement(ul,{...e})});function ul(e){let{showMigrationUi:t,actionEnabledStackSelection:n,actionEnabledUnstackSelection:r,propertiesPanelShouldShowRemoveAutoLayout:i,wrappingEnabled:a}=ua();return l.createElement(eh.Zk,null,l.createElement(oZ,{title:(0,T.tx)("fullscreen.properties_panel.stack_panel.auto_layout"),addProperty:()=>{F.Y5.triggerActionInUserEditScope("stack-selection",{source:"panel"})},removeProperty:()=>{F.Y5.triggerActionInUserEditScope("unstack-selection",{source:"panel"})},contentsVisibleOrMixed:e.onlyStacksSelected,showButton:i?"-":"+",minusDisabled:!r,plusDisabled:!n,recordingKey:e.recordingKey,dataTestId:"open-stack-panel"},t?l.createElement(us,null):l.createElement(l.Fragment,null,l.createElement(eh.fI,{className:a?pY.TE:pY.mm},l.createElement(uc,{recordingKey:e.recordingKey}),l.createElement("div",{className:pY.T$},l.createElement(pv,{recordingKey:u.Pt(e,"alignment")})),l.createElement(p$,{recordingKey:u.Pt(e,"stackLayoutDetails")}),l.createElement(ud,{recordingKey:e.recordingKey}),a&&l.createElement(up,{recordingKey:e.recordingKey})),l.createElement(uu,{recordingKey:e.recordingKey}))))}function ur(e){let t=e.onlyStacksSelected?(0,T.tx)("fullscreen.properties_panel.stack_panel.auto_layout"):(0,T.tx)("fullscreen.properties_panel.stack_panel.layout"),n=(0,nl.J2)(K.Ez5.propertiesPanelState().shownPropertiesPanels),r=(0,J.d4)(e=>e.mirror.selectionProperties),i=(0,o9.aW)(n,void 0,r,void 0);return l.createElement(eh.Zk,{"data-onboarding-key":d$.W},l.createElement(np.Wv,{titleTx:t},l.createElement(ov.hw,{recordingKey:u.Pt(e,"frameFitButton")}),i?l.createElement(p3,{recordingKey:e.recordingKey}):void 0),l.createElement(ui,{...e}))}function ui({onlyStacksSelected:e,onlyShowResizingRow:t,recordingKey:n}){var r;let{showMigrationUi:i,wrappingEnabled:a,textAutoResize:o,missingFont:s}=ua(),c=(0,n5.Df)(),d=(0,l.useRef)(null),p=(0,tF.kl)("nodesAreAllInsideStacks"),m=(0,nl.J2)(K.Ez5.propertiesPanelState().enabledTypePanelControls),h=!!(null==(r=F.Y5)?void 0:r.isFontListLoaded()),_=(0,tF.kl)("numSelectedByType"),E=(0,R.vx)(_,"TEXT"),y=(0,ow.o3)(ow.nt.ui3ClipContentControl),g="transformPanel",v=l.createElement(l.Fragment,null,l.createElement(oO.Ws,{recordingKey:g,forwardedRef:d}),l.createElement(dX.J,{visible:!!(e||p),widthHeightRowRef:d})),f=c.fixedFrameOptions&&l.createElement(ok.u,{recordingKey:n}),b=E&&l.createElement("div",{className:pY.Z2},l.createElement(dQ.f,{disabled:!h||!!s,enabledTypePanelControls:m,textAutoResize:o,recordingKey:n})),S=l.createElement(dz.e,{recordingKey:g});return!e||t?l.createElement(l.Fragment,null,v,b,!y&&f,S):l.createElement(l.Fragment,null,i?l.createElement(us,null):l.createElement(l.Fragment,null,v,l.createElement(eE.sY,{topLeftInput:l.createElement(uc,{recordingKey:n}),rightInput:l.createElement(pv,{recordingKey:u.Pt(n,"alignment")}),leftLabel:a?(0,T.tx)("fullscreen.properties_panel.section_autoLayout.label_direction"):(0,T.tx)("fullscreen.properties_panel.section_autoLayout.label_direction_and_gap"),rightLabel:(0,T.tx)("fullscreen.properties_panel.section_autoLayout.label_alignment"),bottomLeftInput:a?null:l.createElement(ud,{recordingKey:n}),topIcon:l.createElement(p$,{recordingKey:u.Pt(n,"stackLayoutDetails")}),bottomIcon:null}),a?l.createElement(eE.fn,{leftInput:l.createElement(ud,{recordingKey:n}),rightInput:l.createElement(up,{recordingKey:n}),icon:null,leftLabel:(0,T.tx)("fullscreen.properties_panel.section_autoLayout.label_gap"),rightLabel:null}):null,l.createElement(uu,{recordingKey:n}),!y&&l.createElement(ok.u,{recordingKey:n}),S))}function ua(){return(0,ra.R)(e=>{let{mirror:{appModel:t,selectionProperties:{propertiesPanelShouldShowRemoveAutoLayout:n,containsStacksNeedingAlignmentMigration:l,stackMode:r,stackWrap:i,textAutoResize:a,missingFont:o}}}=e;return{showMigrationUi:l,actionEnabledStackSelection:(0,X.Yh)(t,"stack-selection"),actionEnabledMultiStackSelection:(0,X.Yh)(t,"run-multi-stack-auto-layout"),actionEnabledUnstackSelection:(0,X.Yh)(t,"unstack-selection"),propertiesPanelShouldShowRemoveAutoLayout:n,wrappingEnabled:("HORIZONTAL"===r||(0,B.gl)(r))&&("WRAP"===i||(0,B.gl)(i)),textAutoResize:a,missingFont:o}})}let uo=!1;function us(){let e;let t=(0,so.am)(),[n,r]=(0,l.useState)(!1),{isOrInInstance:i,containsComponents:a}=(0,ra.R)(e=>{let{isInstanceSelected:t,isInstanceSublayerSelected:n,numSelectedByType:l}=e.mirror.selectionProperties;return{isOrInInstance:!!(t||n),containsComponents:!!l&&!!l.SYMBOL}});(0,l.useEffect)(()=>{uo||(t("stack_v2_migration_info_shown"),uo=!0)},[t]),(0,tK.f4)(()=>{r(!1)});let o=(0,l.useCallback)(()=>{let e=K.AlE.getActiveCanvas();eP.l7.user("update-stack-to-alv3",()=>{K.Qa7.updateStackToAutoLayoutV3(e,K.Ez5.bigNudgeAmount())}),F.Y5.triggerAction("commit"),r(!0),t("stack_v2_migration_updated")},[t]),s=(0,l.useCallback)(e=>{F.Y5.triggerActionInUserEditScope("undo"),r(!1)},[]);if(n)return l.createElement(eh.fI,{className:pY.A5},l.createElement("span",{className:pY.Yv},(0,T.tx)("fullscreen.properties_panel.stack_panel.auto_layout_updated")),l.createElement("a",{className:pY._V,onClick:s},(0,T.tx)("fullscreen.properties_panel.stack_panel.undo")));let c=K.AlE.getActiveCanvas(),d=K.Qa7.isOrInInstanceWithDeprecatedAlignmentOverride(c);return e=i?d?(0,T.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version_instance_overrides"):(0,T.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version_instance"):a?(0,T.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version_components"):(0,T.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version"),l.createElement(eh.fI,{className:pY.A5},l.createElement("div",{className:pY.Yv},(0,T.tx)("fullscreen.properties_panel.stack_panel.new_auto_layout_version_available"),l.createElement(eb.B,{className:pY.zp,svg:ue.A,"data-tooltip-type":eo.Ib.SPECIAL,"data-tooltip":dW,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-text":e})),l.createElement(e9.nR,{onClick:o,className:pY.RM,type:"button",disabled:i&&!d},(0,T.tx)("fullscreen.properties_panel.stack_panel.update")))}function uc(e){let t=(0,lD.Zr)("unstack-selection"),n=(0,tF.kl)("stackMode"),r=(0,tF.kl)("stackWrap"),{version:i}=(0,et.DP)(),a=(0,so.am)(),o=(0,J.d4)(lQ.qd),s="ui2"===i?pY.N:pY.O_;return l.createElement(tS.E,{name:"stack_mode_control"},l.createElement("div",{className:s,"data-onboarding-key":"stack-mode-control"},l.createElement(ce.I,{property:"HORIZONTAL"===n&&"WRAP"===r?"WRAP":n,onChange:e=>{a("Stack Mode Changed",{stackMode:e,nodeIds:o}),eP.l7.user("set-stack-mode",()=>K.Qa7.setStackModeAndFlipPrimaryAndCounterAxisValues(e))},recordingKey:u.Pt(e,"stackMode"),disabled:!t},l.createElement(ce.Y,{svg:p8.A,value:"VERTICAL",tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.vertical_direction")}),l.createElement(ce.Y,{svg:p6.A,value:"HORIZONTAL",tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.horizontal_direction")}),l.createElement(ce.Y,{svg:p9.A,value:"WRAP",tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.wrap")}))))}function ud(e){let t=(0,dJ.Wx)(),n=(0,dJ.Y9)(),{version:r}=(0,et.DP)(),i="ui2"===r?pY.Kz:void 0;return l.createElement(tS.E,{name:"stack_spacing_control"},l.createElement(ns.KI,{outerClassName:i,onFocus:()=>t(K.RN9.SPACING,!0),onBlur:()=>t(K.RN9.SPACING,!1),onScrubBegin:()=>t(K.RN9.SPACING,!0),onScrubEnd:()=>t(K.RN9.SPACING,!1),onMouseEnter:()=>n(K.RN9.SPACING,!0),onMouseLeave:()=>n(K.RN9.SPACING,!1),onNudge:()=>K.glU.temporarilyHideOverlay(K.hJs.SELECTION),recordingKey:u.Pt(e,"stackSpacing"),source:"panel",onboardingKey:"stack-spacing-input"}))}function up(e){let t=(0,dJ.Wx)(),n=(0,dJ.Y9)(),{version:r}=(0,et.DP)(),i="ui3"===r?void 0:pY.UN;return l.createElement(tS.E,{name:"stack_counter_spacing_input"},l.createElement(pS.q,{outerClassName:i,onFocus:()=>t(K.RN9.COUNTER_SPACING,!0),onBlur:()=>t(K.RN9.COUNTER_SPACING,!1),onScrubBegin:()=>t(K.RN9.COUNTER_SPACING,!0),onScrubEnd:()=>t(K.RN9.COUNTER_SPACING,!1),onMouseEnter:()=>n(K.RN9.COUNTER_SPACING,!0),onMouseLeave:()=>n(K.RN9.COUNTER_SPACING,!1),onNudge:()=>K.glU.temporarilyHideOverlay(K.hJs.SELECTION),recordingKey:u.Pt(e,"stackCounterSpacing"),inputTestId:"stack-counter-spacing",source:"panel"}))}function uu({recordingKey:e}){let[t,n]=(0,l.useState)(!1),[r,i]=(0,l.useState)(!1),a=(0,pq.U)(),{version:o}=(0,et.DP)();(0,tK.f4)(e=>{let{stackHorizontalPadding:t,stackPaddingRight:l,stackVerticalPadding:r,stackPaddingBottom:i}=e.mirror.selectionProperties,o=(0,B.q)(t,l),s=(0,B.q)(r,i);n((0,B.gl)(o)||(0,B.gl)(s)||a)});let s=(0,so.am)(),d=(0,J.d4)(lQ.qd),p=(0,ew.R)(),m=()=>{n(!t),K.Qa7.setFocusStackPanelInput(K.RN9.PADDING_ALL,!1),s(t?"Disable autolayout independent padding":"Enable autolayout independent padding",{nodeIds:d})},h=p?l.createElement(iH.d,{onClick:m,toggled:t,actionOnPointerDown:!0,"data-tooltip-type":eo.Ib.TEXT,"aria-label":(0,T.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),"data-tooltip":(0,T.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),recordingKey:u.Pt(e,"showAllPaddingControls"),"data-test-id":"stack-padding-toggle"},l.createElement(dY,null)):l.createElement(cw.m,{"data-tooltip-type":eo.Ib.TEXT,"aria-label":(0,T.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),"data-tooltip":(0,T.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),recordingKey:u.Pt(e,"showAllPaddingControls"),"data-test-id":"stack-padding-toggle",onMouseDown:m,svg:p7.A,toggled:t,className:pY.NC});return l.createElement(tS.E,{name:"stack_padding_controls"},l.createElement("ui3"===o?uh:um,{showAllPaddingControls:t,showSinglePaddingControl:r,setShowSinglePaddingControl:i,recordingKey:e,handleClick:function(e){(0,c.Fo)(e)&&i(!0)},showAllPaddingControlsToggle:h}))}function um({showAllPaddingControls:e,showSinglePaddingControl:t,setShowSinglePaddingControl:n,recordingKey:r,handleClick:i,showAllPaddingControlsToggle:o}){return l.createElement(eh.fI,{heightMultiplier:e&&!t?2:void 0},t?l.createElement(u_,{className:pY.mR,paddingSelection:dJ.mx.ALL,onBlur:()=>n(!1),focusOnMount:!0,recordingKey:r}):e?l.createElement(l.Fragment,null,l.createElement(u_,{className:a()(pY.oH,pY.aO),paddingSelection:dJ.mx.LEFT,onClick:i,recordingKey:r,inputTestId:"padding-left"}),l.createElement(u_,{className:a()(pY.oH,pY.uH),paddingSelection:dJ.mx.RIGHT,onClick:i,recordingKey:r,inputTestId:"padding-right"}),l.createElement(u_,{className:a()(pY.T1,pY.aO),paddingSelection:dJ.mx.TOP,onClick:i,recordingKey:r,inputTestId:"padding-top"}),l.createElement(u_,{className:a()(pY.T1,pY.uH),paddingSelection:dJ.mx.BOTTOM,onClick:i,recordingKey:r,inputTestId:"padding-bottom"})):l.createElement(l.Fragment,null,l.createElement(u_,{className:pY.oH,paddingSelection:dJ.mx.HORIZONTAL,onClick:i,recordingKey:r,inputTestId:"padding-horizontal"}),l.createElement(u_,{className:pY.T1,paddingSelection:dJ.mx.VERTICAL,onClick:i,recordingKey:r,inputTestId:"padding-vertical"})),o)}function uh({showAllPaddingControls:e,showSinglePaddingControl:t,setShowSinglePaddingControl:n,recordingKey:r,handleClick:i,showAllPaddingControlsToggle:a}){return t?l.createElement(eE.fn,{leftInput:l.createElement(u_,{paddingSelection:dJ.mx.ALL,onBlur:()=>n(!1),focusOnMount:!0,recordingKey:r}),rightInput:null,icon:a,leftLabel:(0,T.tx)("fullscreen.properties_panel.section_autoLayout.label_padding"),rightLabel:null}):e?l.createElement(l.Fragment,null,l.createElement(eE.fn,{leftInput:l.createElement(u_,{paddingSelection:dJ.mx.LEFT,onClick:i,recordingKey:r}),rightInput:l.createElement(u_,{paddingSelection:dJ.mx.TOP,onClick:i,recordingKey:r}),icon:a,leftLabel:(0,T.tx)("fullscreen.properties_panel.section_autoLayout.label_padding"),rightLabel:null}),l.createElement(eE.fn,{leftInput:l.createElement(u_,{paddingSelection:dJ.mx.RIGHT,onClick:i,recordingKey:r}),rightInput:l.createElement(u_,{paddingSelection:dJ.mx.BOTTOM,onClick:i,recordingKey:r}),icon:null,leftLabel:null,rightLabel:null})):l.createElement(eE.fn,{leftInput:l.createElement(u_,{paddingSelection:dJ.mx.HORIZONTAL,onClick:i,recordingKey:r,inputTestId:"padding-horizontal"}),rightInput:l.createElement(u_,{paddingSelection:dJ.mx.VERTICAL,onClick:i,recordingKey:r,inputTestId:"padding-vertical"}),icon:a,leftLabel:(0,T.tx)("fullscreen.properties_panel.section_autoLayout.label_padding"),rightLabel:null})}function u_({className:e,paddingSelection:t,recordingKey:n,inputTestId:r,onClick:i,onBlur:a,focusOnMount:o}){let s=(0,dJ.Wx)(),c=(0,dJ.Y9)();return l.createElement(pq.s,{outerClassName:e,paddingSelection:t,focusOnMount:o,onFocus:()=>K.Qa7.setFocusStackPanelInput(t,!0),onBlur:e=>{K.Qa7.setFocusStackPanelInput(t,!1),null==a||a(e)},onMouseEnter:()=>c(t,!0),onMouseLeave:()=>c(t,!1),onClick:i,onScrubBegin:()=>s(t,!0),onScrubEnd:()=>s(t,!1),onNudge:()=>K.glU.temporarilyHideOverlay(K.hJs.SELECTION),recordingKey:u.Pt(n,"stackPadding",dJ.mx[t]),inputTestId:r,source:"panel"})}var uE=n(7723);let uy="template-controls-picker";var ug=n(929077);function uv(){let{sceneNodesToEdit:e,description:t}=(0,ra.R)(e=>({sceneNodesToEdit:(0,lQ.F4)(e),description:e.mirror.selectionProperties.description})),n="string"==typeof t?t:"",r=l.useCallback(t=>{eP.l7.user("set-description",()=>{for(let n of e)n.setDescriptionRich(t)})},[e]),i=l.useCallback(()=>{F.Y5.commit()},[]);return l.createElement("div",{className:"template_controls_menu--descriptionContainer--pRK0M"},l.createElement(ug.A,{description:n,isViewOnly:!1,placeholder:(0,T.t)("design_systems.template_panel.template_placeholder"),onBlur:i,onSubmit:r}))}function uf(){let e=(0,J.wA)(),t=(0,J.d4)(e=>e.pickerShown),n=new y.Mi(null==t?void 0:t.initialX,null==t?void 0:t.initialY);return(null==t?void 0:t.id)!==uy?null:l.createElement(eY.vx,{autoflowHeight:!0,headerSize:"small",initialPosition:n,initialWidth:320,onClose:()=>{e(w.XE())},scrollOverflow:!1,title:(0,T.t)("design_systems.template_panel.template_controls")},l.createElement(uv,null))}var ub=n(400439),uS=n(832039),uP=n(691151),uT=n(999918);let uw=l.memo(function(){let{containingTemplate:e,pickerShown:t,templateDescription:n}=(0,ra.R)(e=>({containingTemplate:(0,eQ._k)(e),pickerShown:e.pickerShown,templateDescription:e.mirror.selectionProperties.description??""})),r=(0,J.d4)(ea.Dr),i=(0,J.d4)(ea.cB),a=l.useRef(null),o=(0,J.wA)(),s=l.useCallback((e,t,n=es.qo)=>{if(!a)return;let l=Z.findDOMNode(a.current),r=(0,es.cn)(l,n);o(w.u1({id:t,initialX:r.x,initialY:r.y})),o(k.sw()),o(w.Uv())},[o]),c=l.useCallback(e=>{(null==t?void 0:t.id)===uy?o(w.XE()):s(e,uy,320)},[t,o,s]);return e&&e.isAlive()?l.createElement(eh.Zk,{ref:a},l.createElement(eh.fI,{className:rz.LO},l.createElement(uE.R,{guid:e.guid,value:e.name,canEdit:!0,icon:l.createElement(eb.B,{svg:uP.A,className:uS.Kk}),editAction:"rename-template"}),l.createElement("span",{className:ub.MC},l.createElement(eT.YW,{className:ub.UW,selected:(null==t?void 0:t.id)===uy,onClick:c,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":eo.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.template_panel.template_controls"),svg:uT.A,recordingKey:"templateControls"}))),l.createElement(eu.n,{description:n}),r&&i&&l.createElement(em.x,null),l.createElement(uf,null)):null});var uI=n(333483);function uk({onExpand:e}){return l.createElement(eh.Zk,{"data-testid":"toggle-simplified-panels",className:uI.aW},l.createElement(s2.z,{onClick:e,recordingKey:"toggleSimplifiedPanels"},(0,T.tx)("design_systems.component_properties.show_more_properties")))}var uN=n(559184),uC=n(96225);let uA=(0,o.jz)(iM.uj0);class uO extends u.o6{constructor(){super(...arguments),this.state={panelState:ta.GR.DEFAULT_EXPANDED},this.onMouseDown=u.cZ(this,"mousedown",()=>{F.Y5.deselectProperty(),this.props.dispatch(w.XE()),this.props.dispatch((0,I.vq)()),this.props.dispatch(k.sw()),this.props.dispatch(w.Uv())}),this.onContextMenu=e=>{let t=e.target;if(t){let n=t.tagName,l=t.type;n&&"INPUT"===n.toUpperCase()&&l&&"TEXT"===l.toUpperCase()||t.isContentEditable||e.preventDefault()}},this.showCreateStyleModal=({styleType:e,inheritStyleKeyField:t,nodeId:n,rowLeft:l,rowTop:r})=>{this.props.dispatch(k.sw()),this.props.dispatch(k.Zs({rowLeft:l,rowTop:r,styleType:e,inheritStyleKeyField:t,nodeId:n}))},this._stylePreviewThumbnail=new $.H4(()=>{var e;let t=(0,Y.IW)(this.props.stylePreviewShown),n=null==(e=this.props.openFile)?void 0:e.canEdit,r=!!t||!n||this.props.appModel.isReadOnly;return l.createElement(tu,{key:"style-preview-panel",selectedStyleProperties:this.props.selectedStyleProperties,isInspectPanel:this.props.propertiesPanelTab===K.FAf.INSPECT,stylePreviewShown:this.props.stylePreviewShown,externalStyle:t,isRenaming:this.props.library.isRenamingSelectedStyle,viewOnly:r,dispatch:this.props.dispatch,recordingKey:u.Pt(this.props,"stylePreviewPanel")})}),this.onCloseStylePreviewModal=()=>{K.glU.selectStyle(g.n3.INVALID,g.IA.INVALID),this.props.dispatch(k.sw()),this.props.dispatch((0,N.B)())},this.renderStylePreviewModal=()=>{var e;if(!this.props.stylePreviewShown.isShown||![K.FAf.DESIGN,K.FAf.SITE,K.FAf.INSPECT].includes(this.props.propertiesPanelTab))return;let t=this.props.selectedStyleProperties,n=new y.Mi(this.props.stylePreviewShown.rowLeft-ta.tA,this.props.stylePreviewShown.rowTop);if(this.props.stylePreviewShown.isCreating){let{styleType:e,inheritStyleKeyField:t,styleNameInputPrefix:r}=this.props.stylePreviewShown;return l.createElement(ts,{recordingKey:"createStyleModal",initialPosition:n,styleNameInputPrefix:r,styleType:e,inheritStyleKeyField:t})}{let r=!(0,L.eE)(this.props.stylePreviewShown.style,this.props.openFile),i=r||!(null==(e=this.props.openFile)?void 0:e.canEdit)||this.props.appModel.topLevelMode===G.lyf.BRANCHING,a=(0,P.dI)(t.guid);if(!(a&&this.props.library.local.styles[a]&&!this.props.library.local.styles[a].is_soft_deleted)&&!r||!this.props.selectedStyleProperties.guid)return;return l.createElement(ti.zK.Provider,{value:ti.zM.EDIT_STYLE},l.createElement(eY.vx,{title:this.getStylePreviewThumbnailTitle(t.styleType,i),key:(0,Y.Gj)(this.props.stylePreviewShown.style),headerSize:"small",initialWidth:ta.tA,initialPosition:n,onClose:this.onCloseStylePreviewModal,recordingKey:u.Pt(this.props,"modal"),dragHeaderOnly:!0},l.createElement("div",{className:to.FY},this._stylePreviewThumbnail.render({isVisible:!0}),this._externalStyleLink.render({isVisible:r}))))}},this._externalStyleLink=new $.H4(()=>l.createElement(og,{stylePreviewShown:this.props.stylePreviewShown,user:this.props.user})),this._framePresetPanel=new $.H4(()=>l.createElement(ov.nl,{key:"frame-presets",dispatch:this.props.dispatch,expandedFramePresetType:this.props.expandedFramePresetType,recordingKey:"framePresetPanel"})),this._pencilToolPanel=new $.H4(()=>l.createElement(o8,{key:"pencilToolPanel",id:"pencilToolPanel",openFile:this.props.openFile,recordingKey:"pencilToolPanel"})),this._canvasBackgroundPanel=new $.H4(()=>{let e=this.props.selectionProperties;return l.createElement(or,{key:"canvas-background",backgroundColor:e.backgroundColor,backgroundEnabled:e.backgroundEnabled,backgroundOpacity:e.backgroundOpacity,exportBackgroundDisabled:e.exportBackgroundDisabled,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,modalShown:this.props.modalShown,editModeType:this.props.appModel.activeCanvasEditModeType,pickerShown:this.props.pickerShown,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,library:this.props.library,openFile:this.props.openFile,recordingKey:"canvasBackgroundPanel",currentSelectedProperty:this.props.appModel.currentSelectedProperty,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,defaultColor:H.rC,sceneGraphSelection:this.props.sceneGraphSelection,selectedStyleProperties:this.props.selectedStyleProperties,hasExports:!!e.exportSettings&&(0,B._W)(e.exportSettings,[]).length>0})}),this._viewOnlyFlowsPanel=new $.H4(()=>l.createElement(th.A,{viewOnly:!0})),this._localStylesPanel=new $.H4(e=>l.createElement(a5,{key:e,scrollContainer:this.scrollContainer,recordingKey:e})),this._transformPanel=new $.H4(()=>{var e;return l.createElement(oO.zq,{key:"transform",propertiesPanelState:this.state.panelState,recordingKey:"transformPanel",pickerShown:this.props.pickerShown,openFileKey:(null==(e=this.props.openFile)?void 0:e.key)||null,canEditConstraints:this.props.isUI3&&this.shouldShowConstraintsResizingPanel(),onlyShowXYInputsRow:this.props.isUI3&&(this.state.panelState===ta.GR.DEFAULT_SIMPLIFIED||(this.selectionProperties().areOnlyResponsiveSetsSelected??!1))})}),this._vectorPanel=new $.H4(()=>{let e=this.selectionProperties(),t=this.props.isUI3;return l.createElement(oO.Ss,{key:"vector-transform",x:e.x,y:e.y,cornerRadius:e.cornerRadius,handleMirroring:e.handleMirroring,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:"vectorTransformPanel",isUI3:t})}),this._liveObjectPanel=new $.H4(()=>l.createElement(oB.cI,{key:"live-object",recordingKey:"liveObjectPanel",pasteSources:this.props.selectionProperties.pasteSources})),this._instancePanel=new $.H4(()=>{let e=this.props.selectionProperties;return l.createElement(of._,{key:"instance",symbolGUIDsBackingSelection:e.symbolGUIDsBackingSelection,resettableInstanceOverridesMap:e.resettableInstanceOverrides,stateGroupSelectionInfo:e.stateGroupSelectionInfo,recordingKey:"instancePanel"})}),this._constraintsResizingPanel=new $.H4(()=>{var e;return l.createElement(os,{key:"constraints",openFileKey:(null==(e=this.props.openFile)?void 0:e.key)||null,dropdownShown:this.props.dropdownShown,recordingKey:"constraintsPanel"})}),this._interactionsPanel=new $.H4(()=>l.createElement(sU,{key:"interactions"})),this._stackPanel=new $.H4(()=>l.createElement(ut,{key:"stack",onlyShowResizingRow:this.props.isUI3&&this.state.panelState===ta.GR.DEFAULT_SIMPLIFIED,onlyStacksSelected:this.props.shownPanels[K.ibQ.STACK_ITEM],recordingKey:"stackPanel"})),this._removeGroupFillAndStrokePanel=new $.H4(()=>l.createElement(oJ,{key:"remove-group-fill-stroke"})),this._maskPanel=new $.H4(()=>{let e=this.selectionProperties();return l.createElement(oW,{key:"mask",maskType:e.maskType,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:"maskPanel"})}),this._componentPropertiesPanel=new $.H4(()=>l.createElement(e2,{key:"componentProperties",recordingKey:"propsPanel"})),this._componentPanel=new $.H4(()=>l.createElement(ep.cu,{key:"component",recordingKey:"componentPanel"})),this._templatePropertiesPanel=new $.H4(()=>l.createElement(t_,{key:"templateProperties",recordingKey:"templatePropsPanel"})),this._templatePanel=new $.H4(()=>l.createElement(uw,{key:"template"})),this._gridsPanel=new $.H4(()=>l.createElement(ta.tC,{key:"grids",selectionProperties:this.props.selectionProperties})),this._layerPanel=new $.H4(()=>{let e=this.props.selectionProperties;return this.props.isUI3?l.createElement(oV,{recordingKey:"appearancePanel"}):l.createElement(rJ,{key:"layer",blendMode:e.blendMode,opacity:e.opacity,visible:e.visible,variableConsumptionInfo:e.variableConsumptionInfo,recordingKey:"layerPanel"})}),this._localVariablesPanel=new $.H4(()=>l.createElement(a7,{key:"local-variables"})),this._typePanel=new $.H4(()=>l.createElement(ta.gc,{key:"type",selectionProperties:this.props.selectionProperties})),this._selectionPaints=new $.H4(()=>l.createElement(o$.UA,{key:"selection-paints",selectionPaints:this.props.selectionPaints,recordingKey:"selectionPaintsPanel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,sceneGraphSelection:this.props.sceneGraphSelection,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,pickerShown:this.props.pickerShown,stylePickerListLayout:this.props.stylePickerListLayout,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:H.rC,library:this.props.library,openFile:this.props.openFile,isUI3:this.props.isUI3})),this._fillPanel=new $.H4(()=>{let e;return this.props.selectionProperties.numSelectedByType&&(e=(0,tW.aZ)(K.rrT.FILL,this.props.selectionProperties.numSelectedByType)),l.createElement(ta.B8,{key:"fill",selectionProperties:this.props.selectionProperties,variableScopes:e})}),this._strokePanel=new $.H4(()=>{let e=this.props.selectionProperties;return l.createElement(o$.$p,{key:"stroke",stylePickerShown:this.props.stylePickerShown,strokePanelMode:this.props.strokePanelMode,strokePanelTerminalPointCount:this.props.strokePanelTerminalPointCount,strokePaints:e.strokePaints,borderSharedWeight:e.borderSharedWeight,strokeWeight:e.strokeWeight,strokeAlign:e.strokeAlign,strokeCap:e.strokeCap,strokeJoin:e.strokeJoin,miterLimitAngle:e.miterLimitAngle,connectorLineStyle:e.connectorLineStyle,leftEndCap:e.leftEndCap,rightEndCap:e.rightEndCap,maxStrokeWeight:e.maxStrokeWeight,dashPattern:e.dashPattern,dashCap:e.dashCap,terminalCap:e.terminalCap,arcRadius:e.arcRadius,arcSweep:e.arcSweep,numSelectedByType:e.numSelectedByType,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,modalShown:this.props.modalShown,pickerShown:this.props.pickerShown,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,stylePickerListLayout:this.props.stylePickerListLayout,currentSelectedProperty:this.props.appModel.currentSelectedProperty,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:H.Em,inheritStyleKey:e.inheritFillStyleKeyForStroke||null,inheritStyleID:e.styleIdForStrokeFill||null,library:this.props.library,sceneGraphSelection:this.props.sceneGraphSelection,selectedStyleProperties:this.props.selectedStyleProperties,openFile:this.props.openFile,recordingKey:"strokePanel",isPanelBodyCollapsedAtom:null})}),this._effectsPanel=new $.H4(()=>l.createElement(ta.w5,{key:"effects",selectionProperties:this.props.selectionProperties})),this._slidesShadowPanel=new $.H4(()=>l.createElement(r9,{recordingKey:"slidesShadowPanel"})),this._exportPanelInspectTab=new $.H4(()=>{let e=this.selectionProperties(),t=this.props.openFile,n=(0,X.Nf)(this.props.appModel);return l.createElement(od.LI,{key:"export",title:this.isReadOnlyNonInspect()?(0,T.t)("fullscreen.properties_panel.export"):(0,T.t)("fullscreen.properties_panel.presets"),standalone:!0,openFile:t,singleNodeName:od.LI.singleNodeNameFrom(e),numSelected:e.numSelected,exportSettings:e.exportSettings,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:n,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,currentSelectedProperty:this.props.appModel.currentSelectedProperty,pickerShown:this.props.pickerShown,recordingKey:"exportsPanel",saveAsState:this.props.saveAsState,panelWidth:o9.iP})}),this._exportPanel=new $.H4(()=>{let e=this.props.selectionProperties,t=(0,X.Nf)(this.props.appModel);return l.createElement(od.LI,{key:"export",openFile:this.props.openFile,singleNodeName:od.LI.singleNodeNameFrom(e),numSelected:e.numSelected,exportSettings:e.exportSettings,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:t,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,currentSelectedProperty:this.props.appModel.currentSelectedProperty,pickerShown:this.props.pickerShown,recordingKey:"exportsPanel",saveAsState:this.props.saveAsState,panelWidth:o9.iP})}),this._pluginPanel=new $.H4(()=>{var e,t;let n=this.selectionProperties();return l.createElement(o7.Q,{key:"plugin",pluginRelaunchData:n.pluginRelaunchData,localPlugins:this.props.localPlugins,publishedPlugins:this.props.publishedPlugins,allSavedPlugins:this.props.allSavedPlugins.plugins,orgEntity:(0,D.Jl)(this.props),dispatch:this.props.dispatch,openFileKey:(null==(e=this.props.openFile)?void 0:e.key)||null,editorType:(null==(t=this.props.openFile)?void 0:t.editorType)?(0,z.wN)(this.props.openFile.editorType):null,numSelected:n.numSelected??0,recordingKey:"pluginPanel"})}),this._prototypePanel=new $.H4(()=>l.createElement(c8,{key:"prototype",dispatch:this.props.dispatch,selectionProperties:this.selectionProperties(),appModel:this.props.appModel,pickerShown:this.props.pickerShown,dropdownShown:this.props.dropdownShown,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,sceneGraphSelection:this.props.sceneGraphSelection,editModeType:this.props.appModel.activeCanvasEditModeType,library:this.props.library,openFile:this.props.openFile,userFlags:this.props.userFlags,recordingKey:"prototypePanel"})),this._scalePanel=new $.H4(()=>(0,s.kc)().ce_scale_tool_v2?l.createElement(dG,{key:"scale",recordingKey:"scalePanel"}):l.createElement(dF,{key:"scale",recordingKey:"scalePanel"})),this._slidesAlignPanel=new $.H4(()=>l.createElement(t9,{recordingKey:"slidesAlignPanel"})),this._slidesThemePanel=new $.H4(()=>l.createElement(ia,{recordingKey:"slidesThemePanel"})),this._slidesInstancePanel=new $.H4(()=>l.createElement(lq,{recordingKey:"slidesInstancePanel"})),this._slidesFillPanel=new $.H4(()=>l.createElement(lX,{recordingKey:"slidesFillPanel"})),this._slidesOpacityPanel=new $.H4(()=>l.createElement(r3,{recordingKey:"slidesOpacityPanel"})),this._slidesTypePanel=new $.H4(()=>l.createElement(ai,{recordingKey:"slidesTypePanel"})),this._slidesLinkPanel=new $.H4(()=>l.createElement(rt,{recordingKey:"slidesLinkPanel"})),this._slidesBorderPanel=new $.H4(()=>l.createElement(n0,{recordingKey:"slidesBorderPanel"})),this._slidesCornerPanel=new $.H4(()=>l.createElement(n8,{recordingKey:"slidesCornerPanel"})),this._slidesAnimationPanel=new $.H4(()=>l.createElement(nT,{selection:this.props.sceneGraphSelection})),this._slidesEmbeddablePrototypePanel=new $.H4(()=>l.createElement(li,{selection:this.props.sceneGraphSelection})),this._slidesInteractiveWidgetPanel=new $.H4(()=>l.createElement(l5,{selection:this.props.sceneGraphSelection})),this._slidesSelectionPaints=new $.H4(()=>l.createElement(o$.UA,{key:"selection-paints",selectionPaints:this.props.selectionPaints,recordingKey:"selectionPaintsPanel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,sceneGraphSelection:this.props.sceneGraphSelection,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,pickerShown:this.props.pickerShown,stylePickerListLayout:this.props.stylePickerListLayout,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:H.rC,library:this.props.library,openFile:this.props.openFile,isUI3:this.props.isUI3,customColorPicker:t5,hideCustomColorPickerFillTypeToggle:!1})),this._sitesPositionPanel=new $.H4(()=>l.createElement(tE.Qc,{recordingKey:"positionPanel"})),this._sitesLinkPanel=new $.H4(()=>l.createElement(tE.rC,{recordingKey:"linkPanel"})),this._sitesPageMetadataPanel=new $.H4(()=>l.createElement(tE.li,{recordingKey:"pageMetadataPanel"})),this._sitesCanvasOverlayPanel=new $.H4(()=>l.createElement(tE.rf,null)),this._sitesAccessibilityPanel=new $.H4(()=>l.createElement(tE.l,{recordingKey:"accessibilityPanel"})),this._sitesResponsivenessPanel=new $.H4(()=>l.createElement(tE.eg,{key:"responsiveness"})),this._sitesHTMLWidgetPanel=new $.H4(()=>l.createElement(tE.Mr,null)),this._sitesInteractionsPanel=new $.H4(()=>l.createElement(tE.GO,{recordingKey:"interactionsPanel"})),this.isStyleSelected=()=>this.props.selectedStyleProperties&&!!this.props.selectedStyleProperties.guid,this.isLiveObjectSelected=()=>(this.props.selectionProperties.pasteSources||[]).length>0,this.selectionProperties=()=>this.isStyleSelected()?this.props.selectedStyleProperties:this.props.selectionProperties,this.shouldShowAlignControls=()=>(0,o9.d6)(this.props.shownPanels),this.shouldRenderUI3ToolbarItems=()=>this.props.isUI3,this.shouldShowConstraintsResizingPanel=()=>{let e=this.props.shownPanels;return!this.scaleShouldHideOtherPanels()&&e[K.ibQ.CONSTRAINTS_ITEM]},this.shouldShowInteractionsPanel=()=>!!this.props.selectionProperties.isValidPrototypingSourceSelected,this.isStateSelected=()=>{var e;return(null==(e=this.props.selectionProperties.stateGroupSelectionInfo)?void 0:e.mode)===K.iCO.STATE},this.shouldShowLocalVariablesPanel=()=>{let e=(0,ap.P)(this.props.selectedView),t=this.props.shownPanels;return!this.scaleShouldHideOtherPanels()&&!this.props.appModel.isReadOnly&&0===Object.keys(this.props.sceneGraphSelection).length&&!t[K.ibQ.FRAME_PRESETS]&&!e},this.shouldShowSelectionPaintsPanel=()=>{let e=this.props.shownPanels;return(0,o9.fI)(e,this.scaleShouldHideOtherPanels(),this.props.selectionPaints)},this.shouldShowSlidesLinkPanel=()=>{let{numSelectedByType:e}=this.props.selectionProperties;return!!e&&(e.TEXT??0)>0&&(0,R.OU)(e,["TEXT"])},this.shouldShowSlidesAlignPanel=()=>{let{numSelectedByType:e}=this.props.selectionProperties,t=e&&(0,R.vx)(e,"SLIDE");return this.shouldShowAlignControls()&&!t},this.doesNotHaveAnySelectedText=()=>{let{numSelectedByType:e}=this.props.selectionProperties;return!((null==e?void 0:e.TEXT)&&e.TEXT>0)},this.shouldShowStackPanel=e=>{let t=this.props.shownPanels;return(0,o9.IY)(t,this.scaleShouldHideOtherPanels(),this.props.selectionProperties,this.isStyleSelected()?this.props.selectedStyleProperties:void 0,e)},this.scaleShouldHideOtherPanels=()=>this.props.shownPanels[K.ibQ.SCALE_ITEM]&&!(0,s.kc)().ee_scale_tool_show_all_panels,this.shouldShowExportPanel=()=>this.props.openFile&&!(0,W.Pe)(this.props.openFile)&&!(0,U.MP)(),this.shouldShowLocalStylesPanel=()=>{let e=(0,ap.P)(this.props.selectedView);return!this.scaleShouldHideOtherPanels()&&0===Object.keys(this.props.sceneGraphSelection).length&&!this.props.shownPanels[K.ibQ.FRAME_PRESETS]&&!e},this.renderSimplifiedDesignPanels=()=>{let e=this.props.shownPanels;if((0,p.Im)(e)||Object.keys(e).every(t=>!e[parseInt(t)])){let e=Error("Rendering simplified design tab with no shownPropertiesPanels");(0,m.$D)(h.e.FIGJAM_CORE,e)}return l.createElement(b.i,{displayAs:b.C.Block},0===Object.keys(this.props.sceneGraphSelection).length&&l.createElement(a9.Mw,{panelName:a9.ON.DESIGN}),!this.props.isUI3&&this.shouldShowAlignControls()&&l.createElement(t8.AV,{recordingKey:"alignPanel"}),this.shouldRenderUI3ToolbarItems()&&l.createElement(uN._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel()}),this.props.isUI3&&this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&!this.isLiveObjectSelected()}),this._transformPanel.render({isVisible:!0}),this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[K.ibQ.SCALE_ITEM]}),!this.props.isUI3&&this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&!this.isLiveObjectSelected()}),this._constraintsResizingPanel.render({isVisible:!this.props.isUI3&&this.shouldShowConstraintsResizingPanel()}),!this.props.isUI3&&this._layerPanel.render({isVisible:e[K.ibQ.LAYER_ITEM]}),this.state.panelState===ta.GR.DEFAULT_SIMPLIFIED&&l.createElement(uk,{onExpand:()=>{this.setState({panelState:ta.GR.OVERRIDDEN_EXPANDED})}}),this.state.panelState===ta.GR.OVERRIDDEN_EXPANDED&&l.createElement(l.Fragment,null,this.props.isUI3&&this._layerPanel.render({isVisible:e[K.ibQ.LAYER_ITEM]}),l.createElement(oc.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[K.ibQ.TEMPLATE_ITEM]}),this._componentPanel.render({isVisible:e[K.ibQ.COMPONENT_ITEM]}),this._vectorPanel.render({isVisible:e[K.ibQ.VECTOR_ITEM]}),!this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._maskPanel.render({isVisible:e[K.ibQ.MASK_ITEM]}),!this.props.isUI3&&this._gridsPanel.render({isVisible:e[K.ibQ.GRIDS_ITEM]}),this._typePanel.render({isVisible:e[K.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[K.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[K.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._fillPanel.render({isVisible:e[K.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[K.ibQ.STROKE_ITEM]}),!this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._effectsPanel.render({isVisible:e[K.ibQ.EFFECTS_ITEM]}),this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this.props.isUI3&&this._gridsPanel.render({isVisible:e[K.ibQ.GRIDS_ITEM]}),this.props.isUI3&&this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[K.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()})),!this.props.isUI3&&this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[K.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}))},this.renderDesignPanels=()=>{let e=this.props.shownPanels;return(((0,p.Im)(e)||Object.keys(e).every(t=>!e[parseInt(t)]))&&!window.figmaPerfTesting&&!(0,_.Lg)()&&!(0,_.nl)()&&(0,m.x1)("PropertiesPanel","Rendering design tab with no shownPropertiesPanels",{isEmpty:(0,p.Im)(e),shouldRenderInspectTab:this.shouldRenderInspectTab()}),e[K.ibQ.FRAME_PRESETS])?l.createElement(b.i,{displayAs:b.C.Block},this._framePresetPanel.render({isVisible:!0})):e[K.ibQ.PENCIL_TOOL]?l.createElement(b.i,{displayAs:b.C.Block},this._pencilToolPanel.render({isVisible:!0})):l.createElement(b.i,{displayAs:b.C.Block},0===Object.keys(this.props.sceneGraphSelection).length&&l.createElement(a9.Mw,{panelName:a9.ON.DESIGN}),!this.props.isUI3&&this.shouldShowAlignControls()&&l.createElement(t8.AV,{recordingKey:"alignPanel"}),this.shouldRenderUI3ToolbarItems()&&l.createElement(uN._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel()}),this.props.isUI3&&this._componentPropertiesPanel.render({isVisible:this.shouldShowComponentPropertiesPanel()}),this.props.isUI3&&this._componentPanel.render({isVisible:e[K.ibQ.COMPONENT_ITEM]}),this.props.isUI3&&this._instancePanel.render({isVisible:this.shouldShowInstancePanel()}),this._transformPanel.render({isVisible:this.props.isUI3&&this.shouldShowAlignControls()||e[K.ibQ.TRANSFORM_ITEM]}),this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[K.ibQ.SCALE_ITEM]}),l.createElement(oc.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[K.ibQ.TEMPLATE_ITEM]}),this._templatePropertiesPanel.render({isVisible:e[K.ibQ.TEMPLATE_ITEM]}),!this.props.isUI3&&this._componentPanel.render({isVisible:e[K.ibQ.COMPONENT_ITEM]}),!this.props.isUI3&&this._componentPropertiesPanel.render({isVisible:e[K.ibQ.COMPONENT_ITEM]&&!this.isStateSelected()}),this._liveObjectPanel.render({isVisible:this.isLiveObjectSelected()}),!this.props.isUI3&&this._instancePanel.render({isVisible:this.shouldShowInstancePanel()}),this._vectorPanel.render({isVisible:e[K.ibQ.VECTOR_ITEM]}),!this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._constraintsResizingPanel.render({isVisible:!this.props.isUI3&&this.shouldShowConstraintsResizingPanel()}),this._maskPanel.render({isVisible:e[K.ibQ.MASK_ITEM]}),!this.props.isUI3&&this._gridsPanel.render({isVisible:e[K.ibQ.GRIDS_ITEM]}),this._layerPanel.render({isVisible:e[K.ibQ.LAYER_ITEM]}),this._typePanel.render({isVisible:e[K.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[K.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[K.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._fillPanel.render({isVisible:e[K.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[K.ibQ.STROKE_ITEM]}),!this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._effectsPanel.render({isVisible:e[K.ibQ.EFFECTS_ITEM]}),this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._localVariablesPanel.render({isVisible:this.shouldShowLocalVariablesPanel()}),this._localStylesPanel.render({isVisible:this.shouldShowLocalStylesPanel(),valueArgs:["local-styles"]}),this.props.isUI3&&this._gridsPanel.render({isVisible:e[K.ibQ.GRIDS_ITEM]}),this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[K.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}))},this.renderSlidesPanels=()=>{let e=this.props.shownPanels,t=this.props.selectionProperties.numSelectedByType;if(e[K.ibQ.PENCIL_TOOL])return l.createElement(b.i,{displayAs:b.C.Block},this._pencilToolPanel.render({isVisible:!0}));let n=!!t&&(t.SLIDE??0)>0&&(0,R.OU)(t,["SLIDE"]);return l.createElement(b.i,{displayAs:b.C.Block},this._slidesAlignPanel.render({isVisible:this.shouldShowSlidesAlignPanel()}),this.shouldRenderUI3ToolbarItems()&&l.createElement(uN._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel(),shouldShowSlidesTypePanel:e[K.ibQ.TYPE_ITEM]}),this._slidesThemePanel.render({isVisible:n}),this._slidesInstancePanel.render({isVisible:this.shouldShowInstancePanel()}),this._slidesTypePanel.render({isVisible:e[K.ibQ.TYPE_ITEM]}),this._slidesFillPanel.render({isVisible:e[K.ibQ.FILL_ITEM]}),this._slidesOpacityPanel.render({isVisible:e[K.ibQ.FILL_ITEM]&&!n}),this._slidesCornerPanel.render({isVisible:e[K.ibQ.STROKE_ITEM]}),this._slidesBorderPanel.render({isVisible:e[K.ibQ.STROKE_ITEM]&&this.doesNotHaveAnySelectedText()}),this._slidesShadowPanel.render({isVisible:e[K.ibQ.EFFECTS_ITEM]}),this._slidesLinkPanel.render({isVisible:e[K.ibQ.TYPE_ITEM]&&this.shouldShowSlidesLinkPanel()}),this._slidesSelectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._slidesEmbeddablePrototypePanel.render({isVisible:e[K.ibQ.SLIDES_EMBED]}),this._slidesInteractiveWidgetPanel.render({isVisible:e[K.ibQ.SLIDES_INTERACTIVE_WIDGET]}))},this.renderSlidesAnimationPanels=()=>{let e=this.props.shownPanels;return l.createElement(b.i,{displayAs:b.C.Block},this._slidesAnimationPanel.render({isVisible:e[K.ibQ.SLIDES_ANIMATION]}))},this.renderSitesPanels=()=>{let e=this.props.shownPanels;return l.createElement(b.i,{displayAs:b.C.Block},this.shouldRenderUI3ToolbarItems()&&l.createElement(uN._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel()}),this._sitesCanvasOverlayPanel.render({isVisible:this.shouldShowSitesCanvasOverlayPanel()}),this._componentPropertiesPanel.render({isVisible:this.shouldShowComponentPropertiesPanel()}),this._componentPanel.render({isVisible:e[K.ibQ.COMPONENT_ITEM]}),this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&this.shouldShowInstancePanel()}),this._sitesPositionPanel.render({isVisible:this.shouldShowSitesPositionPanel()}),this._transformPanel.render({isVisible:e[K.ibQ.TRANSFORM_ITEM]}),this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[K.ibQ.SCALE_ITEM]}),this._sitesPageMetadataPanel.render({isVisible:this.shouldShowSitesPageMetadataPanel()}),l.createElement(oc.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[K.ibQ.TEMPLATE_ITEM]}),this._vectorPanel.render({isVisible:e[K.ibQ.VECTOR_ITEM]}),this._maskPanel.render({isVisible:e[K.ibQ.MASK_ITEM]}),this._layerPanel.render({isVisible:e[K.ibQ.LAYER_ITEM]}),this._typePanel.render({isVisible:e[K.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[K.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[K.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._fillPanel.render({isVisible:e[K.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[K.ibQ.STROKE_ITEM]}),this._effectsPanel.render({isVisible:e[K.ibQ.EFFECTS_ITEM]}),this._gridsPanel.render({isVisible:e[K.ibQ.GRIDS_ITEM]}),this._sitesHTMLWidgetPanel.render({isVisible:this.shouldShowSitesHTMLWidgetPanel()}),this._sitesAccessibilityPanel.render({isVisible:this.shouldShowSitesAccessibilityPanel()}),this._sitesResponsivenessPanel.render({isVisible:this.shouldShowSitesResponsivenessPanel()}),this._localVariablesPanel.render({isVisible:this.shouldShowLocalVariablesPanel()}),this._localStylesPanel.render({isVisible:this.shouldShowLocalStylesPanel(),valueArgs:["local-styles"]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}))},this.renderInspectionPanels=()=>{var e,t;let n=null==(e=this.props.openFile)?void 0:e.canEdit,r=this.props.selectionProperties,i=!r.prototypeStartingPointsInfo||(null==(t=r.prototypeStartingPointsInfo)?void 0:t.length)>0,a=0===Object.keys(this.props.sceneGraphSelection).length,o=a&&!n&&i;return l.createElement(O.fu,{name:Q.e0.CODE_PANEL},l.createElement(b.i,{displayAs:b.C.Block},l.createElement(a9.Mw,{panelName:a9.ON.INSPECT}),l.createElement(iR.U,{key:"inspection-properties-panel",recordingKey:"inspectionPanel",flowPanel:this._viewOnlyFlowsPanel.render({isVisible:o}),localStylesPanel:this._localStylesPanel.render({isVisible:a,valueArgs:["code-local-styles"]})})))},this.renderPrototypePanels=()=>{let e=this.props.shownPanels;return l.createElement(b.i,{displayAs:b.C.Block},this._sitesLinkPanel.render({isVisible:this.shouldShowSitesLinkPanel()}),this._sitesInteractionsPanel.render({isVisible:this.shouldShowSitesInteractionsPanel()}),this._framePresetPanel.render({isVisible:e[K.ibQ.FRAME_PRESETS]}),this._pencilToolPanel.render({isVisible:e[K.ibQ.PENCIL_TOOL]}),this._prototypePanel.render({isVisible:!e[K.ibQ.FRAME_PRESETS]&&!e[K.ibQ.PENCIL_TOOL]}))},this.shouldRenderInspectTab=()=>this.props.appModel.showUi&&!!this.props.user&&this.props.appModel.isReadOnly,this.onKeyDown=e=>{this.props.selectedStyleProperties&&(0,P.fn)(this.props.selectedStyleProperties.guid)&&(e.event.keyCode===c.Uz.ESCAPE?(e.accept(),K.glU.selectStyle(g.n3.INVALID,g.IA.INVALID)):e.event.keyCode===c.Uz.F&&K.glU.selectStyle(g.n3.INVALID,g.IA.INVALID))},this.scrollContainer=null,this.refMainScrollContainer=e=>{this.scrollContainer=e},this.isReadOnlyNonInspect=()=>this.props.appModel.isReadOnly&&!(0,tc.$A)(this.props.selectedView),this.renderPanelContent=()=>{let e=this.props.appModel.topLevelMode,t=this.props.propertiesPanelTab,n=this.props.appModel.isReadOnly,r=e!==G.lyf.PREVIEW&&(e!==G.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==G.lyf.DEV_HANDOFF&&t===K.FAf.DESIGN,i=e!==G.lyf.PREVIEW&&(e!==G.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==G.lyf.DEV_HANDOFF&&t===K.FAf.SLIDE,a=e!==G.lyf.PREVIEW&&(e!==G.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==G.lyf.DEV_HANDOFF&&t===K.FAf.SLIDE_ANIMATION,o=e===G.lyf.LAYOUT&&!n&&t===K.FAf.SITE,s=e!==G.lyf.PREVIEW&&e!==G.lyf.BRANCHING&&t===K.FAf.PROTOTYPE,c=e===G.lyf.PREVIEW&&!this.props.userStateLoaded||t===K.FAf.INSPECT;return r||i||a||o||s||c||t===K.FAf.EXPORT||t===K.FAf.COMMENT||(0,m.x1)("PropertiesPanel","Rendering empty properties panels",{topLevelMode:G.lyf[e],tab:K.FAf[t],shouldRenderInspectTab:this.shouldRenderInspectTab()}),l.createElement(l.Fragment,null,r&&(this.state.panelState===ta.GR.DEFAULT_EXPANDED?this.renderDesignPanels():this.renderSimplifiedDesignPanels()),i&&this.renderSlidesPanels(),a&&this.renderSlidesAnimationPanels(),o&&this.renderSitesPanels(),s&&this.renderPrototypePanels(),c&&this.renderInspectionPanels(),t===K.FAf.EXPORT&&this._exportPanelInspectTab.render({isVisible:!0}),t===K.FAf.COMMENT&&l.createElement(this.props.commentsPanel,null))},this.onResize=e=>{e=(0,d.qE)(e,uA+1,500),(0,V.UK)().propertiesPanelSplitPosition.set(e)},this.getRightPanelAnimation=(e,t)=>{if(this.props.isUI3)return;let n={ease:"easeInOut",duration:.2,delay:this.props.isCollapsed?void 0:.05};return this.props.isCollapsed?{initial:{left:`calc(${e}px + ${t})`},animate:{left:`calc(${e}px + ${t})`,display:"block",transitionEnd:{display:"none"}},transition:n}:{initial:{left:0},transition:n}}}componentDidUpdate(e,t){super.componentDidUpdate(e,t);let n=e.selectionProperties.productComponentGUIDBackingInstances,l=this.props.selectionProperties.productComponentGUIDBackingInstances;if(n!==l){let e=ta.GR.DEFAULT_EXPANDED;if(l){let t=this.props.sceneGraph.get(l);(null==t?void 0:t.simplifyInstancePanels)&&(e=ta.GR.DEFAULT_SIMPLIFIED)}this.setState({panelState:e})}}getStylePreviewThumbnailTitle(e,t){if(t)switch(e){case"FILL":return(0,T.t)("design_systems.styles.view_color_style");case"TEXT":return(0,T.t)("design_systems.styles.view_text_style");case"EFFECT":return(0,T.t)("design_systems.styles.view_effect_style");case"GRID":return(0,T.t)("design_systems.styles.view_grid_style");default:return(0,T.t)("design_systems.styles.view_style")}else switch(e){case"FILL":return(0,T.t)("design_systems.styles.edit_color_style");case"TEXT":return(0,T.t)("design_systems.styles.edit_text_style");case"EFFECT":return(0,T.t)("design_systems.styles.edit_effect_style");case"GRID":return(0,T.t)("design_systems.styles.edit_grid_style");default:return(0,T.t)("design_systems.styles.edit_style")}}shouldShowSitesPositionPanel(){return(0,ty.Vj)(this.props.selectedView)&&this.props.shownPanels[K.ibQ.SITES_POSITION_ITEM]}shouldShowSitesLinkPanel(){return(0,ty.Vj)(this.props.selectedView)&&this.props.shownPanels[K.ibQ.SITES_LINK_ITEM]}shouldShowSitesPageMetadataPanel(){return(0,ty.Vj)(this.props.selectedView)&&this.props.shownPanels[K.ibQ.SITES_PAGE_METADATA_ITEM]}shouldShowSitesCanvasOverlayPanel(){return(0,ty.Vj)(this.props.selectedView)&&(0,s.kc)().internal_only_debug_tools}shouldShowSitesAccessibilityPanel(){return(0,ty.Vj)(this.props.selectedView)&&this.props.shownPanels[K.ibQ.SITES_ACCESSIBILITY_ITEM]}shouldShowSitesResponsivenessPanel(){return(0,ty.Vj)(this.props.selectedView)&&this.props.shownPanels[K.ibQ.SITES_RESPONSIVENESS_ITEM]}shouldShowSitesHTMLWidgetPanel(){return(0,ty.Vj)(this.props.selectedView)&&this.props.shownPanels[K.ibQ.SITES_HTML_WIDGET_ITEM]}shouldShowSitesInteractionsPanel(){return(0,ty.Vj)(this.props.selectedView)&&this.props.shownPanels[K.ibQ.SITES_INTERACTIONS_ITEM]}shouldShowInstancePanel(){return this.props.shownPanels[K.ibQ.INSTANCE_ITEM]&&!this.isLiveObjectSelected()}shouldShowComponentPropertiesPanel(){return this.props.shownPanels[K.ibQ.COMPONENT_ITEM]&&!this.isStateSelected()}renderLoading(e){return l.createElement(tU.vL,{name:"propertiesPanel",focusOnMount:!0,handleKeyDown:this.onKeyDown},l.createElement(v.V,{className:a()(to.Lp,{[to.Ph]:this.props.isInsetEditorEnabled})},l.createElement(f.P,{ref:this.refMainScrollContainer,className:a()(to.ux,to.KE,A.Dm,{[to.eu]:e,[to.Ph]:this.props.isInsetEditorEnabled}),width:o9.iP,hideScrollbar:!0,scrollingDisabled:!0},l.createElement("div",{className:to.eh,"data-non-interactive":!0},l.createElement(tm.B,null))),this.props.stylePreviewShown.isShown&&this.renderStylePreviewModal()))}render(){var e;if(this.props.isLoading)return this.renderLoading(this.props.shouldAnimateLoadingState);let t=this.props.selectedStyleProperties&&(0,P.fn)(this.props.selectedStyleProperties.guid),n=!!(this.props.dropdownShown||(null==(e=this.props.pickerShown)?void 0:e.modal)),r=this.props.propertiesPanelTab,i=r===K.FAf.COMMENT,c=!this.isReadOnlyNonInspect(),d=(0,ap.P)(this.props.selectedView),p=!t||!n,u=!i&&p,m=(0,x.ft)(),h=l.createElement("div",{className:i&&c&&!d?to.By:to.eh,onMouseDown:m?void 0:this.onMouseDown,onPointerDown:m?this.onMouseDown:void 0,"data-non-interactive":!0},l.createElement(C.j9.Consumer,null,()=>this.renderPanelContent())),_=this.props.isUI3,y=(0,V.UK)().propertiesPanelSplitPosition.getCopy(),g=_?"number"==typeof y&&y>uA+1?y:uA+1:o9.iP+1,b=_?`${(0,o.jz)(iM.M$q)}px`:"var(--spacer-2)",T=this.props.appModel.topLevelMode===G.lyf.HISTORY,w=_&&this.props.isCollapsed;return l.createElement(E.k,{name:"properties_panel",trackingEnabled:(0,s.kc)().trackable_properties||d,alsoTrack:()=>{let e=r===K.FAf.DESIGN?"design_view":"slide_view";return{pageId:(0,X.Nf)(this.props.appModel),selectedNodeIds:Object.keys(this.props.sceneGraphSelection),panelMode:d?e:void 0}}},l.createElement(tU.vL,{name:"propertiesPanel",focusOnMount:!i,handleKeyDown:this.onKeyDown},l.createElement(ti.lk.Provider,{value:this.showCreateStyleModal},l.createElement(v.V,{className:a()(to.Lp,{[to.R]:!this.props.appModel.showUi,[to.dn]:w,[to.Ph]:this.props.isInsetEditorEnabled}),style:{width:g}},this.props.shouldShowBackgroundGradient&&!this.props.isInsetEditorEnabled&&l.createElement(S.T,{side:"right"}),l.createElement(uC.X,null,l.createElement(c7.l,{className:a()(to.ux,A.Dm,{[to.ew]:this.props.rulersVisible,[to.Ph]:this.props.isInsetEditorEnabled}),onContextMenu:this.onContextMenu,"data-onboarding-key":"properties-panel",size:g,onResize:this.onResize,side:"left",animation:this.getRightPanelAnimation(g,b),"data-cancel-insertable-resource-drag-and-drop":!0},l.createElement(ux,{showRightSidebarPill:w},this.props.isUI3&&l.createElement(c9.qW,{openFile:this.props.openFile,dropdownShown:this.props.dropdownShown,multiplayer:this.props.multiplayer,user:this.props.user,isIntegration:(0,U.ck)(),selectedView:this.props.selectedView,recordingKey:this.props.recordingKey}),T&&l.createElement(au.yU,{recordingKey:"versionHistoryView",isUI3:_}),!w&&!T&&l.createElement(si,{activeTab:r,shouldRenderInspectTab:this.shouldRenderInspectTab(),shouldShowAlignControls:this.shouldShowAlignControls(),isUI3:this.props.isUI3,recordingKey:this.props.recordingKey}),!w&&!T&&(i?h:l.createElement("div",{className:to.gq},l.createElement(f.P,{enableOverscroll:!0,key:this.props.propertiesPanelTab,ref:this.refMainScrollContainer,className:to.jG,containerId:ta.rp,hideScrollbar:!u,onContextMenu:this.onContextMenu,scrollingDisabled:i||(t?n:!!this.props.dropdownShown)},h))),this.props.stylePreviewShown.isShown&&this.renderStylePreviewModal())))))))}}function ux({children:e,showRightSidebarPill:t}){let n=(0,r.U1)(),i=(0,M.b)();return l.createElement("div",{ref:n,className:a()(to.KE,{[to.tM]:t,[to.Ph]:i})},e)}uO.displayName="PropertiesPanel"},5102:(e,t,n)=>{n.d(t,{Di:()=>A,H7:()=>C,JQ:()=>O,Uq:()=>w,VL:()=>N,d0:()=>I});var l=n(411855),r=n(109388),i=n(188507),a=n(498750),o=n(939863),s=n(738269),c=n(507877),d=n(119198),p=n(457858),u=n(988022),m=n(974105),h=n(309798),_=n(99506),E=n(833629),y=n(428467),g=n(707465),v=n(984968),f=n(239671),b=n(945020),S=n(836454);let P="https://static.figma.com/uploads/85018c5142c2dc9201c4cab76c1d81b85b0b6181",T="https://static.figma.com/uploads/7797fe8870261875ba0109c61c2297005d9ff6f1";function w(e){let t=l.useRef(null),[n,i]=l.useState(void 0),a=()=>{if(t.current)return t.current.scrollWidth-t.current.clientWidth},o=l.useCallback(e=>{var n;let l;l=void 0!==e?e:null==(n=t.current)?void 0:n.scrollLeft;let r=a();void 0!==l&&void 0!==r&&(l<=0?i("beginning"):l>=r?i("end"):i(void 0))},[]);return l.useEffect(()=>{let e=()=>o();return window.addEventListener("wheel",e),o(),()=>window.removeEventListener("wheel",e)},[o]),{currentViewRef:t,atScrollLimit:n,handleScroll:n=>{var l;let i=r.findDOMNode(t.current),a=null==(l=t.current)?void 0:l.scrollLeft;if(!i||void 0===a)return;"backward"===n&&0===a&&(null==e||e());let s="forward"===n?700:-700;i.scroll({left:a+s,behavior:"smooth"}),o(a+s)}}}function I(e){let t,n;return void 0===e?(t=(0,o.t)("rcs.product_and_template_picker.what_would_you_like_to_do_first"),n=(0,o.t)("rcs.product_and_template_picker.we_can_help_you_get_started_faster")):"design"===e?(t=(0,o.t)("rcs.product_and_template_picker.start_from_presets_and_templates"),n=(0,o.t)("rcs.product_and_template_picker.start_from_presets_or_templates_from_our_community")):(t=(0,o.t)("rcs.product_and_template_picker.save_time_with_ready_made_templates"),n=(0,o.t)("rcs.product_and_template_picker.start_from_templates_made_by_figma_and_our_community")),{titleText:t,subtitleText:n}}let k={design:{type:"blank",editorType:_._Y.DESIGN,svg:S.A},whiteboard:{type:"blank",editorType:_._Y.WHITEBOARD,svg:S.A},iphone:{type:"preset",framePreset:p.$W["iPhone 13 & 14"],img:{src:P,width:52,height:106},backgroundColor:"#CFE2FF"},android:{type:"preset",framePreset:p.$W["Android Large"],img:{src:P,width:52,height:106},backgroundColor:"#b6f0c6"},desktop:{type:"preset",framePreset:p.$W.Desktop,img:{src:T,width:99,height:72},backgroundColor:"#F5EAC1"},wireframe:{type:"preset",framePreset:p.$W.Wireframe,img:{src:T,width:99,height:72},backgroundColor:"#F5EAC1"}};function N(e){let t=[];return t.push(k[e]),"design"===e&&(t.push(k.iphone),t.push(k.desktop)),t}function C(e,t,n){let l=[];return e&&e.forEach(e=>{t[e]&&l.push({type:"hubFile",editorType:n,hubFile:t[e]})}),l}function A(e,t,n){if(!e)return null;let l=Object.keys(t.folders).filter(n=>t.folders[n].team_id===e.id),r="design"===n?v.sK.ADD_DESIGN_FILE:"slides"===n?v.sK.ADD_SLIDES_FILE:v.sK.ADD_FIGJAM_FILE;return 1===l.length&&(0,y.canCreateFile)(l[0],t,n)&&(0,v.rR)(e,{type:r})?l[0]:null}function O(){let e=(0,i.Pj)(),t=(0,i.d4)(e=>{var t;return(0,E.R$)(e.fileByKey,(null==(t=e.user)?void 0:t.id)||null,["exp_tooltips_plus_onboarding","exp_cursor_bot_onboarding"])}),n=(0,h.f)("has_tooltips_plus_no_basics_file");return l.useCallback(l=>{let r=()=>{let t=(0,v.FQ)(i),n=(0,m.xA)(i,b.ai.NEW_TAB,null,{from:b.f6.FILE_BROWSER_NUX,selectedView:i.selectedView});n.editorType=_._Y.DESIGN,n.folder_id=A(t,i,n.editorType),n.openNewFileIn=(0,a.oJ)(l)?b.ai.NEW_TAB:b.ai.SAME_TAB,n.callback=e=>{(0,u.Cu)({fileKey:e,experiment:"exp_tooltips_plus_onboarding"},"Failed to open captive file")},e.dispatch(d.uM(n))},i=e.getState();if(n)r();else if(t){if((0,a.oJ)(l)){let n=(0,g.xS)(i,{view:"fullscreen",fileKey:t,editorType:f.nT.Design});e.dispatch(c.V3({url:n}))}else e.dispatch(s.$T({view:"fullscreen",fileKey:t,editorType:f.nT.Design}))}else r()},[e,t,n])}},67048:(e,t,n)=>{n.d(t,{G:()=>c});var l=n(411855),r=n(629019),i=n.n(r),a=n(498480),o=n(762638),s=n(939863);function c({location:e,overrideText:t,hoverStyleClassName:n}){return l.createElement(a.Ex,{className:i()(o.cx.font11.fontNormal.h16.px4.b1.bRadius5.mr0.hFitContent.if("MODAL"===e||"FILE_BROWSER_BAR"===e||"SLIDES_REWRITE_MODAL"===e,o.cx.colorTextSecondary.colorBorder).if("SUMMARIZE_NUDGE"===e,o.cx.colorTextOnbrand.colorBorderBrand).if("SUMMARIZE_NUDGE_DISABLED"===e,o.cx.colorTextOnbrand.colorBorderDisabled).if("INLINE_TOOLBAR"===e,o.cx.colorTextMenuSecondary.colorBorderMenu).if("SLIDES_REWRITE_MODAL"===e,o.cx.textBodySmall).$,n),color:a.zE.INVERT,subtle:!0,text:t??(0,s.t)("whiteboard.ai_modal.beta_badge")})}},841983:(e,t,n)=>{n.d(t,{D:()=>u,N:()=>p});var l=n(411855),r=n(188507),i=n(356390),a=n(498606),o=n(677859),s=n(88220),c=n(426906);let d=["semi-bold","semi bold","bold","extra-bold","extra bold","black"];function p(e){return d.some(t=>e.toLowerCase().startsWith(t))}function u(){let e=(0,r.d4)(e=>{var t;return p((null==(t=e.mirror.selectionProperties.fontStyle)?void 0:t.toString())||"")}),t=(0,r.d4)(e=>"STRIKETHROUGH"===e.mirror.selectionProperties.whiteboardTextDecoration);return l.createElement(l.Fragment,null,l.createElement(o.K0,{svg:s.A,tooltip:"toggle-bold",tooltipType:a.Ib.LOOKUP,active:e?"LOUD":void 0,onClick:()=>i.Y5.triggerActionInUserEditScope("toggle-bold"),recordingKey:"bold",role:"switch",blurOnClick:!0}),l.createElement(o.K0,{svg:c.A,tooltip:"text-toggle-strikethrough",tooltipType:a.Ib.LOOKUP,active:t?"LOUD":void 0,onClick:()=>i.Y5.triggerActionInUserEditScope("text-toggle-strikethrough"),recordingKey:"strikethrough",role:"switch",blurOnClick:!0}))}}}]);

//# debugId=dcc2e77a-da6a-5873-8ae7-2c6f7d7b17af

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/b05943e011318e34dee29f2833a436731c7e044a/properties_panel-2904da14f11c1a05.min.js.map